[{"title":"Three.jså®æˆ˜ï¼šæ‰“é€ äº¤äº’å¼3Dé¥¼å›¾ä¸ç¯å½¢å›¾","date":"2025-10-30T12:12:00.000Z","path":"2025/10/30/Threejs-Pie-Annular.html","text":"ä¹‹å‰å°±æœ‰å°ä¼™ä¼´è¯„è®ºè¯´è®©å®ç°ä¸€ä¸‹3Dé¥¼å›¾çš„æ•ˆæœï¼Œä»Šå¤©å®ƒç»ˆäºæ¥äº†ï¼ä½œä¸ºä¸€ä¸ªæ•°æ®å¯è§†åŒ–ä¸­ç»ä¹…ä¸è¡°çš„ç»å…¸å›¾è¡¨ï¼Œ3Dé¥¼å›¾ä¸ä»…èƒ½æ›´ç›´è§‚åœ°å±•ç¤ºæ•°æ®æ¯”ä¾‹å…³ç³»ï¼Œè¿˜èƒ½é€šè¿‡ç«‹ä½“çš„è§†è§‰æ•ˆæœå¢å¼ºæ•´ä½“çš„è§†è§‰å†²å‡»åŠ›ã€‚æœ¬æ–‡å°†å¸¦ä½ ä»æœ€åŸºç¡€çš„æ‰‡å½¢ç»˜åˆ¶å¼€å§‹ï¼Œé€æ­¥å®ç°åŒ…æ‹¬å‡é™åŠ¨ç”»ã€ç¯å½¢é¥¼å›¾ã€é«˜ä½å¯¹æ¯”å›¾ã€åˆ†éš”æ•ˆæœä»¥åŠæ ‡ç­¾å±•ç¤ºåœ¨å†…çš„å®Œæ•´3Dé¥¼å›¾æ–¹æ¡ˆã€‚æ— è®ºä½ æ˜¯Three.jsçš„åˆå­¦è€…ï¼Œè¿˜æ˜¯å¸Œæœ›æå‡æ•°æ®å¯è§†åŒ–æŠ€èƒ½çš„è€æ‰‹ï¼Œç›¸ä¿¡è¿™ç¯‡æ–‡ç« éƒ½èƒ½ä¸ºä½ å¸¦æ¥å®ç”¨çš„æŠ€æœ¯æ€è·¯å’Œå®ç°æ–¹æ¡ˆã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢Three.jsåœ¨3Dæ•°æ®å¯è§†åŒ–æ–¹é¢çš„æ— é™å¯èƒ½å§ï¼ æœ¬æ–‡æ‰€æœ‰æ•ˆæœæ•¬è¯·è®¿é—®é¥¼å›¾ä¸ç¯å½¢å›¾æ•ˆæœ å¦‚ä½•ç»˜åˆ¶ä¸€ä¸ª3Dæ‰‡å½¢ åœ¨å®ç°æ•ˆæœä¹‹å‰ï¼Œæˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸ªæœ€é‡è¦çš„é—®é¢˜ï¼Œé‚£å°±æ˜¯å¦‚ä½•é€šè¿‡Three.jsç»˜åˆ¶ä¸€ä¸ª3Dæ‰‡å½¢å‘¢ï¼Ÿç¬”è€…ç¿»éäº†æ–‡æ¡£ä¸­æ‰€æœ‰çš„å‡ ä½•ä½“ï¼Œå¤§æ¦‚æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆï¼›ç¬¬ä¸€ç§å°±æ˜¯åˆ©ç”¨åœ†æŸ±ç¼“å†²å‡ ä½•ä½“ï¼ˆCylinderGeometryï¼‰ï¼Œä¹Ÿå°±æ˜¯æ–‡æ¡£ä¸Šçš„è¿™ä¸ªå½¢çŠ¶çš„ç‰©ä½“ï¼š é€šè¿‡è®¾ç½®å®ƒçš„èµ·å§‹è§’åº¦ï¼ˆthetaStartï¼‰å’Œç»“æŸè§’åº¦ï¼ˆthetaLengthï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å®ç°3Dæ‰‡å½¢æ•ˆæœï¼›ä¸è¿‡ä»æ–‡æ¡£ä¸Šæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å°é—­çš„å›¾å½¢ï¼Œå¦‚æœæˆ‘ä»¬ä¸åšæ‰‡å½¢çš„é«˜åº¦è½å·®å¤„ç†ï¼Œé‚£ä¹ˆä¸å°é—­æ˜¯çœ‹ä¸å‡ºæ¥çš„ï¼›ä½†æ˜¯å¦‚æœæˆ‘ä»¬åé¢åšæ‰‡å½¢ç‚¹å‡»åå‡é«˜å’Œé™ä½é«˜åº¦çš„åŠ¨ç”»ï¼Œé‚£ä¹ˆä¸å°é—­çš„å›¾å½¢å°±ä¼šæœ‰æ˜æ˜¾çš„é—®é¢˜ã€‚ å¦ä¸€ç§æ–¹å¼å°±æ˜¯é€šè¿‡æŒ¤å‹ç¼“å†²å‡ ä½•ä½“ï¼ˆExtrudeGeometryï¼‰ï¼Œå…ˆç”¨Shapeç»˜åˆ¶ä¸€ä¸ªæ‰‡å½¢ï¼Œç„¶åé€šè¿‡ExtrudeGeometryè¿›è¡ŒæŒ¤å‹ï¼Œä¹Ÿå¯ä»¥å¾—åˆ°ä¸€ä¸ª3Dçš„æ‰‡å½¢ï¼Œè€Œä¸”ç›¸æ¯”åœ†æŸ±ç¼“å†²å‡ ä½•ä½“ï¼ŒæŒ¤å‹å‡ºæ¥çš„æ‰‡å½¢æ˜¯å°é—­çš„ï¼Œè¿˜é€šè¿‡è®¾ç½®é«˜åº¦ï¼Œå®ç°é«˜åº¦å‡é™çš„æ•ˆæœã€‚ æ–¹æ¡ˆç¡®å®šåï¼Œæˆ‘ä»¬å¼€å§‹æ¥å®ç°æ•ˆæœï¼›é¦–å…ˆæˆ‘ä»¬æ ¹æ®åˆ—è¡¨ä¸­çš„æ•°æ®ï¼Œè®¡ç®—æ€»çš„æ•°é‡ï¼Œç„¶åæ¯ä¸ªæ‰‡å½¢å¯¹åº”çš„å¼§åº¦å°±å¯ä»¥é€šè¿‡åˆ—è¡¨æ¯ä¸€é¡¹æ•°å€¼ / æ€»æ•° * 2 * Math.PIæ¥è®¡ç®—å¾—åˆ°äº†ï¼›åŒæ—¶ç”±äºæ¯æ¬¡ç»˜åˆ¶æ‰‡å½¢éƒ½æ˜¯ä»ä¸Šä¸€æ¬¡æ‰‡å½¢ç»“æŸçš„åœ°æ–¹å¼€å§‹ç»˜åˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿å­˜ä¹‹å‰ç´¯è®¡çš„æ‰‡å½¢å¼§åº¦ï¼š 1234567891011121314151617181920initMesh() &#123; // è·å–æ€»çš„æ•°é‡ const total = list.reduce((acc, cur) =&gt; acc + cur.value, 0); // ä¹‹å‰ç´¯è®¡çš„å¼§åº¦ let last = 0; for (let i = 0; i &lt; list.length; i++) &#123; // å½“å‰æ•°é‡ const &#123; value &#125; = list[i]; // å½“å‰é¡¹å¯¹åº”å¼§åº¦ const rad = (value / total) * 2 * Math.PI; const geo = this.createPieGeometry(last, rad) // ... last += rad; &#125;&#125; è¿™æ ·æˆ‘ä»¬å°±é€šè¿‡è®¡ç®—å¾—åˆ°çš„radå¼§åº¦æ¥åˆ›å»ºæ‰‡å½¢å‡ ä½•ä½“äº†ï¼Œå®ƒè¡¨ç¤ºå½“å‰åˆ—è¡¨é¡¹å¯¹åº”çš„å¼§åº¦ï¼›åœ¨æ¯æ¬¡åˆ›å»ºæ‰‡å½¢æ—¶ï¼Œæˆ‘ä»¬é€šè¿‡lastä¿å­˜ä¹‹å‰çš„ç´¯è®¡å¼§åº¦ï¼Œç„¶åä½œä¸ºå½“å‰æ‰‡å½¢çš„èµ·å§‹å¼§åº¦ï¼Œè¿™æ ·å°±èƒ½ä¿è¯æ¯æ¬¡åˆ›å»ºçš„æ‰‡å½¢æ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”æ˜¯ä»ä¸Šä¸€ä¸ªæ‰‡å½¢çš„ç»“æŸåœ°æ–¹å¼€å§‹ç»˜åˆ¶çš„ã€‚ 1234567891011121314151617181920212223242526272829// åˆ›å»º3Dæ‰‡ç¯å½¢çŠ¶createPieGeometry(startAngle: number, angleRange: number, segments: number = 32) &#123; const shape = new Shape() // å¤–åœ†å¼§ shape.absarc(0, 0, 3, startAngle, startAngle + angleRange, false) // å†…åœ†å¼§ï¼ˆåå‘ç»˜åˆ¶ï¼Œå½¢æˆé—­åˆè·¯å¾„ï¼‰ shape.absarc(0, 0, 3, startAngle + angleRange, startAngle, true) // é—­åˆè·¯å¾„ shape.closePath() // å®šä¹‰æ‹‰ä¼¸å‚æ•° const extrudeSettings = &#123; // æŒ¤å‡ºçš„å½¢çŠ¶çš„æ·±åº¦ depth: this.config.depth, // å¯¹æŒ¤å‡ºçš„å½¢çŠ¶åº”ç”¨æ˜¯å¦æ–œè§’ bevelEnabled: false, // åˆ†æ®µå±‚æ•° curveSegments: segments, &#125; const geometry = new ExtrudeGeometry(shape, extrudeSettings) geometry.rotateX(-Math.PI / 2) // åˆ›å»ºæ‹‰ä¼¸å‡ ä½•ä½“ return geometry&#125; è¿™é‡Œæˆ‘ä»¬é€šè¿‡Shapeåˆ›å»ºä¸€ä¸ª2Dæ‰‡å½¢ï¼Œç„¶åé€šè¿‡ExtrudeGeometryè¿›è¡Œæ‹‰ä¼¸ï¼Œå¾—åˆ°ä¸€ä¸ª3Dçš„æ‰‡å½¢ï¼›ç„¶åç»™æˆ‘ä»¬çš„å‡ ä½•ä½“æ·»åŠ æè´¨ï¼Œè®¾ç½®é¢œè‰²ï¼Œå¹¶æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼š 1234567891011for (let i = 0; i &lt; list.length; i++) &#123; const geo = this.createPieGeometry(last, rad) // çœç•¥å…¶ä»–ä»£ç  const material = new MeshPhongMaterial(&#123; color: Math.random() * 0xffffff, side: DoubleSide, transparent: true, &#125;) const pieMesh = new Mesh(geo, material) this.scene.add(pieMesh)&#125; è¿™æ ·æˆ‘ä»¬å°±èƒ½çœ‹åˆ°ä¸€ä¸ªåŸºæœ¬çš„3Dé¥¼å›¾æ•ˆæœäº†ï¼š åˆå§‹åŠ¨ç”»æ•ˆæœ æˆ‘ä»¬è®©é¥¼å›¾æœ‰åˆå§‹åŒ–çš„ä¸€ä¸ªå‡èµ·åŠ¨ç”»æ•ˆæœï¼Œç»å¸¸å¬è€æ¿ç”»é¥¼çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œ3Dé¥¼å›¾æ˜¯ä¸€ä¸ªä¸ªçš„3Dæ‰‡å½¢ç»„æˆçš„ï¼Œæˆ‘ä»¬å…ˆè®¾ç½®æ¯ä¸ªæ‰‡å½¢åœ¨Yè½´æ–¹å‘ä¸Šçš„ç¼©æ”¾ä¸º0ï¼š 1234567891011121314export default class BasicPie &#123; // æ‰‡å½¢ç‰©ä½“ pieList: Mesh&lt;ExtrudeGeometry, MeshPhongMaterial&gt;[] = [] initMesh() &#123; for (let i = 0; i &lt; list.length; i++) &#123; const pieMesh = new Mesh(geo, material) // è®¾ç½®Yè½´åˆå§‹åŒ–ç¼©æ”¾ä¸º0 pieMesh.scale.set(1, 0, 1) this.pieList.push(pieMesh) this.scene.add(pieMesh) &#125; &#125;&#125; æˆ‘ä»¬åœ¨åˆ›å»ºå‡ ä½•ä½“çš„æ—¶å€™ï¼Œè®¾ç½®scaleçš„Yè½´ä¸º0ï¼Œè¿™æ ·æ‰‡å½¢é»˜è®¤å¤„äºç¼©æ”¾ä¸å‘ˆç°çš„çŠ¶æ€ï¼›ç„¶åç‰©ä½“åˆ›å»ºå®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹æ‰§è¡ŒåŠ¨ç”»äº†ï¼š 12345678910// åˆå§‹åŒ–åŠ¨ç”»initAnimate() &#123; this.pieList.map((el, index) =&gt; &#123; gsap.to(el.scale, &#123; y: 1, duration: 1, ease: &quot;circ.out&quot;, &#125;) &#125;)&#125; æˆ‘ä»¬å°±èƒ½çœ‹åˆ°ä¸€ä¸ªåˆå§‹åŒ–çš„å‡é™æ•ˆæœï¼š å‰©ä¸‹å…¨æ–‡æ•¬è¯·è®¿é—®å¾®ä¿¡é“¾æ¥é˜…è¯»","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"Echartsé«˜çº§æŸ±çŠ¶å›¾å¼€å‘ï¼šæ¸å˜ä¸3Dæ•ˆæœå®ç°","date":"2025-08-28T04:00:00.000Z","path":"2025/08/28/Echarts-Custom-Render.html","text":"è¿™ä¸æœ€è¿‘æˆ‘å¸è®¾è®¡åˆåˆç»™æˆ‘æ•´æ´»äº†ï¼Œç”©ç»™æˆ‘å‡ å¼ ç‚«é…·çš„å›¾è¡¨æ•ˆæœå›¾ï¼Œçœ‹å¾—æˆ‘çœ¼èŠ±ç¼­ä¹±ï¼›ç¬”è€…ç…äº†ä¸€çœ¼EChartså¸¸è§„é…ç½®é¡¹ï¼Œæœç„¶ç›´æ¥é…ç½®æ˜¯å®ç°ä¸äº†çš„ã€‚ä¸è¿‡æ²¡å…³ç³»ï¼Œè¿™æ¬¡æ­£å¥½æ·±å…¥EChartsçš„renderItemå‡½æ•°ï¼Œå®ƒå¯ä»¥è¯´æ˜¯EChartsä¸­å®ç°é«˜åº¦è‡ªå®šä¹‰å›¾è¡¨çš„â€ç»ˆææ­¦å™¨â€ã€‚ renderItem æƒ³è¦å®ç°ä¸Šè¿°æ•ˆæœï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹echartçš„renderItemå‡½æ•°æœ‰ä¸€å®šçš„äº†è§£ï¼›è¿™ä¸ªå‡½æ•°æ˜¯Echartsç”¨æ¥å®ç°ä¸€äº›è‡ªå®šä¹‰å½¢çŠ¶(custom series)çš„æ ¸å¿ƒæ¸²æŸ“å‡½æ•°ï¼Œå®ƒå¯ä»¥å…è®¸å¼€å‘è€…å®Œå…¨æ§åˆ¶å›¾å½¢çš„ç»˜åˆ¶é€»è¾‘ï¼Œè€Œä¸ä»…å±€é™äºå®˜æ–¹æä¾›çš„å›¾å½¢ï¼› é¦–å…ˆå®ƒçš„ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå°†typeå®šä¹‰æˆcustomï¼Œç„¶åä¼ å…¥renderItemå‡½æ•°å°±å¯ä»¥äº†ï¼š 123456789101112var options = &#123; series: [ &#123; type: &quot;custom&quot;, name: &quot;åç§°&quot;, data: dataArray, renderItem: function (params, api) &#123; // è¿”å›ä½ æƒ³è¦çš„å›¾å½¢ &#125;, &#125;, ],&#125; å¯¹äºæ¯ä¸€é¡¹dataæ•°æ®ï¼Œéƒ½ä¼šè°ƒç”¨renderItemè¿›è¡Œæ¸²æŸ“ï¼›åœ¨æœ€è¿‘æ–°å‘å¸ƒEcharts6+çš„ç‰¹æ€§ä¸­ï¼Œè¿˜å¯ä»¥å¯¹renderItemå‡½æ•°è¿›è¡Œå°è£…æ³¨å†Œï¼Œåœ¨seriesä½¿ç”¨æ—¶æ”¯æŒå­—ç¬¦ä¸²çš„å†™æ³•ï¼š 12345678910111213141516const renderItem = (params, api) =&gt; &#123; return &#123; // å®šä¹‰å›¾å½¢ &#125;&#125;;echarts.registerCustomSeries(&#x27;bubble&#x27;, renderItem);var options = &#123; series: [ &#123; type: &quot;custom&quot;, name: &quot;åç§°&quot;, data: dataArray, renderItem: &#x27;bubble&#x27;, &#125;, ],&#125; æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸ç®¡å‡½æ•°æ€ä¹ˆå°è£…ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å¯¹äºæˆ‘ä»¬åç»­ç»˜åˆ¶å›¾å½¢èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œæˆ‘ä»¬ä¸‹é¢å°±å¥½å¥½è¯´é“è¯´é“è¿™ä¸ªå‡½æ•°ã€‚ params paramså‚æ•°åŒ…å«äº†å½“å‰æ•°æ®ä¿¡æ¯å’Œåæ ‡ç³»çš„ä¿¡æ¯ï¼Œå®ƒæä¾›äº†ä¸‹é¢å‡ ä¸ªå±æ€§ï¼š 1234567891011121314151617181920212223242526&#123; // è§¦å‘æ­¤æ¬¡é‡ç»˜çš„ action çš„ typeã€‚ actionType: null, // ä¸€ä¸ªå¯ä¾›å¼€å‘è€…æš‚å­˜ä¸œè¥¿çš„å¯¹è±¡ã€‚ç”Ÿå‘½å‘¨æœŸåªä¸ºï¼šå½“å‰æ¬¡çš„æ¸²æŸ“ context: &#123;&#125;, // åæ ‡ç³»ä¿¡æ¯ï¼Œä¸åŒçš„åæ ‡ç³»ä¸­ï¼ŒcoordSysé‡Œçš„ä¿¡æ¯ä¸ä¸€æ · coordSys: &#123; type: &quot;cartesian2d&quot;, x: 200, y: 20, width: 743, height: 297 &#125;, // dataä¸­æ•°æ®é¡¹çš„index dataIndex: 2, // æ•°æ®é¡¹åœ¨å½“å‰åæ ‡ç³»ä¸­å¯è§çš„æ•°æ®çš„ indexï¼ˆå³ dataZoom å½“å‰çª—å£ä¸­çš„æ•°æ®çš„ indexï¼‰ dataIndexInside: 2, // ç»´åº¦æ•°æ® encode: &#123; x: ... y: ... &#125;, // æœ¬ç³»åˆ— id seriesId: &quot;&quot;, // æœ¬ç³»åˆ— index seriesIndex: 0, // æœ¬ç³»åˆ— name seriesName: &quot;&quot;,&#125; paramså‚æ•°ä¸€èˆ¬é…åˆapiä¸­çš„å‡½æ•°ä½¿ç”¨ã€‚ api ç¬¬äºŒä¸ªå‚æ•°æ¯”è¾ƒå¸¸ç”¨ï¼Œå°±æ˜¯apiå‚æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªCustomSeriesRenderItemAPIç±»å‹çš„å¯¹è±¡ï¼Œä¸Šé¢æŒ‚è½½æœ‰å¾ˆå¤šçš„å‡½æ•°ä¾›å¼€å‘è€…è°ƒç”¨ï¼Œä¸»è¦ç”¨æ¥å°†æ•°æ®å’Œåæ ‡è¿›è¡Œè½¬æ¢ä½¿ç”¨ã€‚ valueå‡½æ•° è¿™ä¹ˆå¤šå‡½æ•°ï¼Œæˆ‘ä»¬æŒ‘é€‰å‡ ä¸ªé‡è¦çš„å‡½æ•°è®²è§£ä¸€ä¸‹ï¼›é¦–å…ˆçœ‹ä¸‹valueå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯å–å‡ºå½“å‰ç»´åº¦dimensionçš„æ•°æ®å€¼ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®é™…çš„æ¡ˆä¾‹ï¼š 1234567891011121314var options = &#123; series: [ &#123; data: [10, 20, 30], type: &quot;custom&quot;, renderItem: function (params, api) &#123; // 0,1,2 console.log(api.value(0)) // 10,20,30 console.log(api.value(1)) &#125; &#125; ]&#125; æˆ‘ä»¬ä¸Šé¢æ¨¡æ‹Ÿäº†ä¸€ç»„ç®€å•çš„æ•°æ®ï¼Œapi.value(0)è·å–çš„æ˜¯ç¬¬ä¸€ä¸ªç»´åº¦çš„æ•°æ®ï¼Œè¿™é‡Œæ•°æ®æ˜¯ä¸€ç»´æ•°ç»„ï¼Œç¬¬ä¸€ä¸ªç»´åº¦ä¸€èˆ¬æ˜¯Xè½´ï¼Œå› æ­¤å¾ªç¯è¾“å…¥åœ¨Xè½´ä¸Šçš„é¡ºåº0,1,2ï¼›è€Œapi.value(1)è·å–çš„æ˜¯ç¬¬äºŒä¸ªç»´åº¦çš„æ•°æ®ï¼Œä¸€èˆ¬æ˜¯Yè½´ï¼Œå› æ­¤å¾ªç¯è¾“å‡ºå¯¹åº”dataçš„å€¼ã€‚ å¦‚æœæˆ‘ä»¬æŠŠæ•°æ®çš„ç»´åº¦æ‰©å¤§ä¸€ä¸ªç»´åº¦ï¼Œæ¯”å¦‚æ•£ç‚¹å›¾ä¼šç”¨åˆ°äºŒç»´æ•°ç»„ï¼Œé‚£ä¹ˆapi.value(dimension)å°±è¾“å‡ºå¯¹åº”ç»´åº¦çš„æ•°æ®ã€‚ 123456789101112131415161718var options = &#123; series: [ &#123; data: [ [10, 100], [20, 200], [30, 300], ], type: &quot;custom&quot;, renderItem: function (params, api) &#123; // 10,20,30 console.log(api.value(0)) // 100,200,300 console.log(api.value(1)) &#125; &#125; ]&#125; é‚£ä¹ˆèªæ˜çš„å°ä¼™ä¼´å¯èƒ½å°±ä¼šæƒ³åˆ°äº†ï¼Œå¦‚æœæˆ‘çš„æ•°æ®ä¸æ˜¯çº¯æ•°å€¼ï¼Œè€Œæ˜¯ç±»ä¼¼ä¸‹é¢çš„å¯¹è±¡æ•°ç»„ï¼Œé‚£ä¹ˆè¯·é—®api.valueè¯¥å¦‚ä½•è¿”å›ï¼Ÿ 12345678910111213var options = &#123; series: [ &#123; data: [ &#123; value: 1048, name: &#x27;Search Engine&#x27; &#125;, &#123; value: 735, name: &#x27;Direct&#x27; &#125;, &#123; value: 580, name: &#x27;Email&#x27; &#125;, &#123; value: 484, name: &#x27;Union Ads&#x27; &#125;, &#123; value: 300, name: &#x27;Video Ads&#x27; &#125; ], &#125; ]&#125; å…¶å®è¿™æ ·çš„å¯¹è±¡æ•°æ®ç»“æ„æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç»´æ•°ç»„ï¼Œå› æ­¤å’Œä¸€ç»´æ•°ç»„çš„è¿”å›æ˜¯ç›¸åŒçš„ã€‚ coordå‡½æ•° äº†è§£äº†api.valueå‡½æ•°çš„ç”¨æ³•ä¹‹åï¼Œä¸‹é¢å°±æ˜¯coordå‡½æ•°ï¼Œæ ¹æ®åå­—æˆ‘ä»¬èƒ½çŒœæµ‹åˆ°ï¼Œå®ƒçš„ä½œç”¨æ˜¯å®šä½ï¼Œä¸è¿‡åƒä¸‡å¯åˆ«å°ç§äº†è¿™ä¸ªå‡½æ•°ï¼Œå®ƒå¯æ˜¯æˆ‘ä»¬ä¸‹é¢éœ€è¦ç”¨åˆ°çš„ä¸€ä¸ªæœ€é‡è¦çš„åæ ‡è½¬æ¢å‡½æ•°ï¼›å®ƒå¯ä»¥å°†æˆ‘ä»¬valueä¸­è·å–åˆ°çš„æ•°æ®ï¼Œè½¬æ¢æˆç”»å¸ƒä¸Šçš„åæ ‡ï¼›coordå‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š 123456type Coord = [number, number]; // [x, y] æˆ– [radius, angle]api.coord( dataValue: Coord | number[], // è¾“å…¥æ•°æ®å€¼ clamp?: boolean // æ˜¯å¦é™åˆ¶åœ¨åæ ‡ç³»å†…ï¼ˆé»˜è®¤falseï¼‰): Coord; // è¿”å›ç”»å¸ƒåƒç´ åæ ‡ [pxX, pxY] coordå‡½æ•°æ¯”è¾ƒéš¾ç†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä¸Šé¢çš„çš„ä¾‹å­æ¥å…·ä½“çœ‹ä¸‹ï¼›æ¯”å¦‚æˆ‘ä»¬æ ¹æ®[10, 20, 30]è¿™æ ·çš„ä¸€ä¸ªæ•°æ®ï¼Œä½¿ç”¨è‡ªå®šä¹‰å›¾å½¢å±•ç¤ºä¸€ä¸ªæŸ±çŠ¶å›¾ï¼›é¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨valueå‡½æ•°è·å–xã€yè½´çš„å€¼ï¼š 1234567&#123; renderItem: function (params, api) &#123; const xValue = api.value(0); // ç±»ç›®ç´¢å¼• const yValue = api.value(1); // æ•°å€¼ // ... &#125;&#125; è¿™é‡Œå¯¹api.value(0)å’Œapi.value(1)ç”¨æ³•æœ‰æ‰€ç–‘é—®çš„å°ä¼™ä¼´å¯ä»¥å›åˆ°ä¸Šä¸€èŠ‚å†çœ‹ä¸€ä¸‹ã€‚ æ¥ç€ä½¿ç”¨coordè¿”å›æ•°æ®ç‚¹æ‰€åœ¨çš„xã€yåæ ‡ä»¥åŠåŸºå‡†çº¿åæ ‡çš„åæ ‡ï¼š 1234567&#123; renderItem: function (params, api) &#123; const [x, y] = api.coord([xValue, yValue]); // æ•°æ®ç‚¹åæ ‡ const [x0, y0] = api.coord([xValue, 0]); // åŸºå‡†çº¿åæ ‡ // ... &#125;&#125; è¿™é‡Œä»£ç æ¯”è¾ƒæŠ½è±¡ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨echartsåæ ‡ç³»ä¸­ï¼ŒåŸç‚¹çš„ä½ç½®åœ¨å·¦ä¸‹è§’ï¼›è€Œåœ¨canvasç”»å¸ƒåæ ‡ç³»ä¸‹ï¼ŒåŸç‚¹çš„ä½ç½®æ˜¯ä½äºå·¦ä¸Šè§’ï¼›ä½†æ˜¯ï¼Œè€Œæˆ‘ä»¬åœ¨renderItemå‡½æ•°ä¸­è¿”å›çš„å›¾å½¢æ˜¯åŸºäºcanvasåæ ‡ç³»ï¼Œcoordçš„å®šä½ä½œç”¨æ­£æ˜¯å°†echartsçš„æ•°æ®è½¬æ¢ä¸ºåœ¨canvasä¸Šçš„ä½ç½®ï¼Œå¯ä»¥è¯´æ˜¯è¿æ¥èµ·äº†ä¸¤ä¸ªå›¾å½¢ç³»ç»Ÿçš„é‡è¦æ¡¥æ¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€å¼ ç¤ºæ„å›¾æ¥æ›´å¥½çš„ç†è§£ï¼š ä¸Šé¢è·å–çš„[x,y]å’Œ[x0,y0]æ­£æ˜¯æˆ‘ä»¬çš„æ•°æ®10,20,30åœ¨æ¯æ¬¡å¾ªç¯è°ƒç”¨æ—¶è½¬æ¢ä¸ºcanvasä¸‹çš„åæ ‡ä½ç½®ã€‚ ç†è§£äº†coordçš„ä½œç”¨ï¼Œæˆ‘ä»¬å†æ¥ç”»æŸ±çŠ¶å›¾å°±éå¸¸ç®€å•äº†ï¼š 12345678910111213141516171819202122const boxWidth = 20&#123; renderItem: function (params, api) &#123; // ... return &#123; type: &quot;rect&quot;, shape: &#123; // å‘å·¦åç§»10px x: x - boxWidth / 2, // é¡¶éƒ¨å¯¹é½æ•°æ®ç‚¹ y, // å›ºå®šå®½åº¦ width: boxWidth, // é«˜åº¦ = åŸºå‡†çº¿y - æ•°æ®ç‚¹y height: y0 - y, &#125;, style:&#123; fill: api.visual(&quot;color&quot;), &#125; &#125;; &#125;&#125; è¿™é‡Œæœ€ç»ˆçš„é‡è¦çš„å°±æ˜¯è¿™ä¸ªé«˜åº¦y0 - yçš„è®¡ç®—äº†ï¼Œç›¸ä¿¡åªè¦ç†è§£äº†ä¸Šé¢åæ ‡è½¬æ¢ï¼Œè¿™é‡Œçš„è®¡ç®—å…¬å¼å°±å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬çœ‹ä¸‹æˆ‘ä»¬ç”Ÿæˆçš„è‡ªå®šä¹‰æŸ±çŠ¶å›¾æ•ˆæœï¼š visualå‡½æ•° visualå‡½æ•°ç”¨äºè·å–è§†è§‰æ˜ å°„ç»“æœï¼Œå®ƒèƒ½å¤Ÿå°†æ•°æ®å€¼è‡ªåŠ¨æ˜ å°„åˆ°é¢œè‰²ã€å¤§å°ã€é€æ˜åº¦ç­‰è§†è§‰å±æ€§ï¼›å®ƒçš„ç”¨æ³•å¦‚ä¸‹ï¼š 12345api.visual( visualType: &#x27;color&#x27; | &#x27;symbol&#x27; | &#x27;symbolSize&#x27; | &#x27;opacity&#x27; | ..., dataIndex?: number, payload?: object); ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬æƒ³è¦ä»æ•°æ®å€¼ä¸­è·å–çš„ç±»å‹ï¼Œæ¯”å¦‚ä¸Šé¢æŸ±çŠ¶å›¾ä¸­æˆ‘ä»¬å°±è·å–äº†æ¯ä¸ªæŸ±å­çš„é¢œè‰²ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ•°æ®çš„ç´¢å¼•ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„é™„åŠ æ•°æ®ã€‚ å†æ¯”å¦‚æˆ‘ä»¬åœ¨ç»˜åˆ¶è‡ªå®šä¹‰æ•£ç‚¹å›¾çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡visualå‡½æ•°è·å–æ•£ç‚¹çš„å¤§å°å’Œé¢œè‰²ï¼Œå‘ˆç°æ›´å¥½çš„è§†è§‰æ•ˆæœï¼š 1234567891011121314151617181920212223242526272829303132333435363738&#123; series: [ &#123; data: [ [10, 20, 5], [40, 60, 12], [70, 30, 8], [80, 50, 20], [30, 80, 15], ], type: &quot;custom&quot;, renderItem: function (params, api) &#123; // è·å–æ•°æ®å€¼ï¼ˆx, y, sizeï¼‰ const xValue = api.value(0); const yValue = api.value(1); // è½¬æ¢ä¸ºç”»å¸ƒåæ ‡ const [x, y] = api.coord([xValue, yValue]); // åŠ¨æ€è·å–è§†è§‰å±æ€§ const symbolSize = api.visual(&quot;symbolSize&quot;); // ç»˜åˆ¶åœ†å½¢ï¼ˆæ°”æ³¡ï¼‰ return &#123; type: &quot;circle&quot;, shape: &#123; cx: x, cy: y, r: symbolSize / 2, &#125;, style: &#123; fill: api.visual(&quot;color&quot;), &#125;, &#125;; &#125;, &#125;, ],&#125; æˆ‘ä»¬çœ‹æ•ˆæœå¦‚ä¸‹ï¼š è¿”å›å‚æ•° ä»‹ç»å®Œapiä¸­å¸¸ç”¨çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸‹å¦‚ä½•åœ¨renderItemä¸­è¿”å›å›¾å½¢å…ƒç´ ï¼›æ”¯æŒä»¥ä¸‹å¤šç§å›¾å½¢å…ƒç´ ï¼š lineï¼ˆç›´çº¿ï¼‰ rectï¼ˆçŸ©å½¢ï¼‰ circleï¼ˆåœ†å½¢ï¼‰ ringï¼ˆåœ†ç¯ï¼‰ sectorï¼ˆæ‰‡å½¢ï¼‰ arcï¼ˆåœ†å¼§ï¼‰ polygonï¼ˆå¤šè¾¹å½¢ï¼‰ pathï¼ˆè·¯å¾„ï¼Œå¯ç»˜åˆ¶ä»»æ„å½¢çŠ¶ï¼‰ textï¼ˆæ–‡æœ¬ï¼‰ groupï¼ˆç»„åˆå¤šä¸ªå›¾å½¢ï¼‰ ä¸Šé¢çš„æ¡ˆä¾‹ä¸­æˆ‘ä»¬å·²ç»è¿”å›è¿‡äº†rectçŸ©å½¢å’Œcircleåœ†å½¢ä¸¤ç§å›¾å½¢ï¼Œtypeå±æ€§å®šä¹‰äº†å›¾å½¢çš„ç±»å‹ï¼›è€Œshapeå±æ€§åˆ™å®šä¹‰äº†å›¾å½¢çš„ç»“æ„ï¼Œstyleå±æ€§å®šä¹‰å›¾å½¢çš„æ ·å¼ï¼Œè¿™ä¸¤ç§å±æ€§åœ¨ä¸åŒå›¾å½¢ä¸­å·®åˆ«æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥åœ¨å®˜æ–¹æ–‡æ¡£ä¸­æŸ¥åˆ°ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡style.fillå±æ€§ï¼Œå°†ä¸Šé¢çš„æŸ±çŠ¶å›¾ï¼Œæ”¹å†™æˆä¸€ä¸ªæ¸å˜çš„æŸ±çŠ¶å›¾ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647// åˆ›å»ºé€æ˜åº¦æ¸å˜çš„è¾…åŠ©å‡½æ•°function createAlphaGradient(baseColor, startAlpha = 1, endAlpha = 0) &#123; // è§£æåŸºç¡€é¢œè‰²ï¼ˆæ”¯æŒå¤šç§æ ¼å¼ï¼‰ const parsedColor = echarts.color.parse(baseColor); // åˆ›å»ºèµ·å§‹é¢œè‰²ï¼ˆRGBAæ•°ç»„æ ¼å¼ï¼‰ const startColor = [ parsedColor[0], parsedColor[1], parsedColor[2], startAlpha, ]; // åˆ›å»ºç»“æŸé¢œè‰² const endColor = [ parsedColor[0], parsedColor[1], parsedColor[2], endAlpha, ]; // æ­£ç¡®è°ƒç”¨ stringify - ä¼ å…¥ RGBA æ•°ç»„ const startColorStr = echarts.color.stringify(startColor, &quot;rgba&quot;); const endColorStr = echarts.color.stringify(endColor, &quot;rgba&quot;); // è¿”å›çº¿æ€§æ¸å˜ï¼ˆä»ä¸Šåˆ°ä¸‹ï¼‰ return new echarts.graphic.LinearGradient(0, 0, 0, 1, [ &#123; offset: 0, color: startColorStr &#125;, &#123; offset: 1, color: endColorStr &#125;, ]);&#125;&#123; renderItem: function (params, api) &#123; // çœç•¥å…¶ä»–ä»£ç  // è·å–åŸºç¡€é¢œè‰² const baseColor = api.visual(&quot;color&quot;); // åˆ›å»ºå‚ç›´æ¸å˜ï¼ˆä»1åˆ°0.05é€æ˜åº¦ï¼‰ const gradientColor = createAlphaGradient(baseColor, 1, 0.05); return &#123; style: &#123; fill: gradientColor, &#125;, &#125;; &#125;,&#125; ä¸Šé¢ä»£ç é€šè¿‡visualè·å–äº†å½“å‰æŸ±å­çš„ä¸€ä¸ªåŸºå‡†é¢œè‰²baseColorï¼Œç„¶åè§£æè¿™ä¸ªåŸºå‡†é¢œè‰²çš„RGBé€šé“å€¼ï¼Œå†é€šè¿‡createAlphaGradientå‡½æ•°è¿”å›graphic.LinearGradientä¸€ä¸ªæ¸å˜æ•ˆæœã€‚ é™¤äº†å›¾å½¢çš„å±æ€§ï¼ŒrenderItemå‡½æ•°è¿˜å¯ä»¥è¿”å›enterFromã€leaveToã€enterAnimationã€leaveAnimationç­‰ä¸€ç³»åˆ—è¿›å…¥å’Œç¦»å¼€çš„åŠ¨ç”»å±æ€§ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®©æŸ±å­å®ç°é€ä¸ªå¢é•¿çš„åŠ¨ç”»æ•ˆæœï¼š 12345678910111213141516171819&#123; renderItem: function (params, api) &#123; // çœç•¥å…¶ä»–ä»£ç  return &#123; type: &quot;rect&quot;, // çœç•¥å…¶ä»–å±æ€§ enterAnimation: &#123; delay: params.dataIndex * 400, &#125;, enterFrom: &#123; shape: &#123; height: 0, y: y0, &#125;, style: &#123;&#125; &#125;, &#125; &#125;&#125; è¿™é‡Œæ·»åŠ äº†enterFromå±æ€§ï¼Œè¿™ä¸ªå±æ€§ç”¨äºå®ç°å…¥åœºåŠ¨ç”»ï¼›shapeé‡Œé¢å¯ä»¥æ”¾å„ç§å›¾å½¢çš„å±æ€§ï¼Œstyleå±æ€§æ·»åŠ å…¥åœºå‰çš„æ ·å¼ï¼Œä¾‹å¦‚åœ¨styleä¸­æ·»åŠ colorã€opacityç­‰ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ•ˆæœï¼š æˆ‘ä»¬å¯ä»¥è®¿é—®è¿™ä¸ªé¡µé¢æŸ¥çœ‹æ•ˆæœ é™¤äº†åŸºç¡€çš„å…ƒç´ ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å¤šå…ƒç´ ç»„åˆåï¼Œè¿”å›ä¸€ä¸ªgroupï¼Œè¿™æ ·å°±å¯ä»¥ç»„åˆæˆæ›´å¤æ‚çš„å›¾å½¢äº†ï¼›ä¸‹é¢å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦å®ç°çš„ä¸‰ä¸ªæ¡ˆä¾‹ï¼šæŠ˜çº¿è£…é¥°æ—‹è½¬å…ƒç´ ã€åˆ†éš”æ¸å˜æŸ±çŠ¶å›¾å’Œç«‹ä½“æ¸å˜æŸ±çŠ¶å›¾ã€‚ æŠ˜çº¿è£…é¥°æ—‹è½¬å…ƒç´  æˆ‘ä»¬æƒ³è¦åœ¨æŠ˜çº¿å›¾ä¸Šæ·»åŠ ä¸€äº›ä¸‹é¢çš„è£…é¥°æ—‹è½¬å…ƒç´ ï¼š é¦–å…ˆæˆ‘ä»¬å‘ç°è¿™ä¸ªè£…é¥°å…ƒç´ æ•´ä½“å¯ä»¥åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€ä¸ªå¤§çš„åœ†ç‚¹ï¼Œåé¢æ‹–ç€ä¸€ä¸ªæ¸å˜çš„åœ†å¼§ï¼›å¤§çš„åœ†ç‚¹å¥½å®ç°ï¼Œé€šè¿‡circleç»˜åˆ¶å³å¯ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨groupä¸­æ·»åŠ ä¸€ä¸ªcircleï¼š 123456789101112131415161718192021222324252627&#123; renderItem: function (params, api) &#123; const xValue = api.value(0); const yValue = api.value(1); const [x, y] = api.coord([xValue, yValue]); return &#123; type: &quot;group&quot;, x, y, children: [ &#123; type: &quot;circle&quot;, shape: &#123; cx: -15, cy: 0, r: 2, &#125;, style: &#123; fill: &quot;rgba(255,255,255,0.6)&quot;, &#125;, &#125;, ] &#125; &#125;&#125; æ¥ç€æˆ‘ä»¬æ¥ç»˜åˆ¶åœ†ç¯ï¼Œç»è¿‡åœ¨å®˜æ–¹æ–‡æ¡£ç»„ä»¶çš„ä¸€é€šæŸ¥æ‰¾åï¼Œå‘ç°äº†ä¸€ä¸ªåä¸ºarcçš„å›¾å½¢å…ƒç´ ï¼Œæˆ‘ä»¬é€šè¿‡strokeå±æ€§ç»™å®ƒä¸€ä¸ªçº¿æ€§çš„æ¸å˜æ•ˆæœï¼š 12345678910111213141516171819202122232425262728293031323334353637383940&#123; renderItem: function (params, api) &#123; return &#123; type: &quot;group&quot;, x, y, children: [ // çœç•¥å…¶ä»–ä»£ç  &#123; type: &quot;arc&quot;, shape: &#123; cx: 0, cy: 0, r: 15, r0: 10, startAngle: 0, endAngle: Math.PI * 2, &#125;, style: &#123; stroke: &#123; type: &quot;linear&quot;, colorStops: [ &#123; offset: 0, color: &quot;rgba(255,255,255,1)&quot;, &#125;, &#123; offset: 1, color: &quot;rgba(255,255,255,0)&quot;, &#125;, ], &#125;, lineWidth: 2, fill: &quot;transparent&quot;, &#125;, &#125;, ] &#125; &#125;&#125; æˆ‘ä»¬çœ‹åˆ°arcå…ƒç´ çš„åœ†ç¯æ¸å˜æ•ˆæœæ˜¯åœ¨æ•´ä½“åœ†ç¯ä¸Šçš„ä»å·¦åˆ°å³æ¸å˜ï¼Œè€Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦æ²¿ç€æ•´ä¸ªåœ†ç¯çš„æ¸å˜æ•ˆæœï¼š ä¿—è¯è¯´å¾—å¥½ï¼Œæ—¢ç„¶ä¸€ä¸ªåœ†ç¯ä¸è¡Œï¼Œé‚£å°±ç»™ä»–æ¥ä¸¤ä¸ªï¼›æˆ‘ä»¬æŠŠåœ†ç¯åˆ†å‰²æˆä¸Šä¸‹ä¸¤ä¸ªéƒ¨åˆ†ï¼Œæ¯ä¸ªéƒ¨åˆ†åˆ†åˆ«ä½¿ç”¨çº¿æ€§æ¸å˜ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546&#123; children: [ &#123; type: &quot;arc&quot;, shape: &#123; startAngle: 0, endAngle: Math.PI, &#125;, style: &#123; colorStops: [ &#123; offset: 0, color: &quot;rgba(255,255,255,0.6)&quot;, &#125;, &#123; offset: 1, color: &quot;rgba(255,255,255,0.3)&quot;, &#125;, ], // çœç•¥å…¶ä»–ä»£ç  &#125;, &#125;, &#123; type: &quot;arc&quot;, // æ—‹è½¬ rotation: Math.PI, shape: &#123; startAngle: 0, endAngle: Math.PI, &#125;, style: &#123; colorStops: [ &#123; offset: 0, color: &quot;rgba(255,255,255,0.3)&quot;, &#125;, &#123; offset: 1, color: &quot;rgba(255,255,255,0)&quot;, &#125;, ], // çœç•¥å…¶ä»–ä»£ç  &#125;, &#125;, ]&#125; è¿™æ ·å°±èƒ½è¾¾åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœäº†ï¼š å›¾å½¢ä¸Šçš„å…ƒç´ å·²ç»åŸºæœ¬ç»˜åˆ¶å®Œæˆäº†ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è®©groupå…ƒç´ æ—‹è½¬èµ·æ¥ï¼›åœ¨renderItemçš„è¿”å›å±æ€§ä¸­è¿˜æœ‰ä¸€ä¸ªkeyframeAnimationå±æ€§å¯ä»¥ç”¨æ¥é…ç½®åŠ¨ç”» 123456789101112131415161718192021222324252627282930313233&#123; renderItem: function (params, api) &#123; return &#123; type: &quot;group&quot;, x, y, keyframeAnimation: &#123; // åŠ¨ç”»æ—¶é•¿ï¼Œå•ä½ ms duration: 2000, // åŠ¨ç”»ç¼“åŠ¨ easing: &#x27;linear&#x27; // æ˜¯å¦å¾ªç¯ loop: true, // åŠ¨ç”»çš„å…³é”®å¸§ keyframes: [ &#123; percent: 0, rotation: 0, &#125;, &#123; percent: 0.5, rotation: -Math.PI, &#125;, &#123; percent: 1, rotation: -Math.PI * 2, &#125;, ], &#125;, // çœç•¥å…¶ä»–ä»£ç  &#125; &#125;&#125; keyframesæ•°ç»„æ¯ä¸€é¡¹ä¸ºä¸€ä¸ªå…³é”®å¸§ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªå¿…é€‰å±æ€§æ˜¯percentï¼Œè¡¨ç¤ºè¯¥å…³é”®å¸§çš„ç™¾åˆ†æ¯”ï¼Œå–å€¼èŒƒå›´æ˜¯0-1ï¼›å…¶å®ƒå±æ€§ä¸ºå›¾å½¢åœ¨è¿™ä¸ªå…³é”®å¸§çš„å±æ€§ï¼Œä¾‹å¦‚ä½ç½®xï¼Œyï¼Œæ ·å¼styleå’Œshapeç­‰ç­‰ï¼›è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†å…ƒç´ çš„æ—‹è½¬åŠ¨ç”»ã€‚ æˆ‘ä»¬å¯ä»¥è®¿é—®è¿™ä¸ªé¡µé¢æŸ¥çœ‹æ•ˆæœ åˆ†éš”æ¸å˜æŸ±çŠ¶å›¾ ä¸‹é¢å°±æ˜¯æœ¬æ–‡è¦å®ç°çš„é‡ç‚¹ï¼šåˆ†éš”æ¸å˜æŸ±çŠ¶å›¾ï¼Œæˆ‘ä»¬çœ‹ä¸‹æœ€åè¾¾åˆ°çš„æ•ˆæœï¼š å›é¡¾æˆ‘ä»¬ä¸Šé¢å·²ç»å®ç°çš„æ¸å˜æŸ±çŠ¶å›¾ï¼Œæˆ‘ä»¬å‘ç°åˆ†éš”æ¸å˜æŸ±çŠ¶å›¾ï¼Œå°±æ˜¯å°†ä¸€æ ¹æŸ±å­æ‹†åˆ†æˆå¤šä¸ªæ–¹å—å‘ˆç°å‡ºæ¥ï¼Œæ¯ä¸ªæ–¹å—çš„é¢œè‰²éƒ½åœ¨åƒç€æ›´æµ…çš„é¢œè‰²å˜åŒ–ï¼›å› æ­¤è¿™ä¸ªå›¾çš„éš¾åº¦å…¶å®åœ¨äºå¦‚ä½•è®¡ç®—å‡ºå½“å‰indexæ‰€å¯¹åº”å°æ–¹å—çš„é¢œè‰²å’Œæ–¹å—æ‰€åœ¨yè½´ä½ç½®ã€‚ æˆ‘ä»¬å…ˆæŠŠå°æ–¹å—çš„åŸºç¡€ä¿¡æ¯éƒ½å®šä¹‰å‡ºæ¥ï¼Œæ¯”å¦‚å®½é«˜ä»¥åŠæ ¼å­é—´çš„é—´è·ç­‰æ•°æ®ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445&#123; renderItem: function (params, api) &#123; const xValue = api.value(0); // ç±»ç›®ç´¢å¼• const yValue = api.value(1); // æ•°å€¼ const [x, y] = api.coord([xValue, yValue]); // æ•°æ®ç‚¹åæ ‡ const [x0, y0] = api.coord([xValue, 0]); // åŸºå‡†çº¿åæ ‡ // æ€»ä½“æŸ±å­çš„é«˜åº¦ const totalHeight = y0 - y; // æ¯ä¸ªæ ¼å­é—´çš„é—´è· const gap = 3; // æ¯ä¸ªæ ¼å­çš„å®½åº¦ const width = 20; // æ¯ä¸ªæ ¼å­çš„é«˜åº¦ const height = 6; // æ ¼å­çš„æ€»æ•° const count = Math.round(totalHeight / (height + gap)); // è·å–åŸºç¡€é¢œè‰² const baseColor = api.visual(&quot;color&quot;); const rects = Array.from(&#123; length: count &#125;, (_, index) =&gt; &#123; const realHeight = y0 - (height + gap) * index; return &#123; type: &quot;rect&quot;, shape: &#123; x: x, y: realHeight, width, height, &#125;, style: &#123; fill: baseColor, &#125;, &#125;; &#125;); return &#123; type: &quot;group&quot;, x: 0, y: 0, children: rects, &#125;; &#125;,&#125; è¿™é‡Œæˆ‘ä»¬æŠŠheight+gapçœ‹ä½œæ˜¯ä¸€æ•´ä¸ªæ ¼å­çš„é«˜åº¦ï¼›å…ˆé€šè¿‡åŸºå‡†çº¿yoå‡å»æ•°æ®yçš„åæ ‡ï¼Œè·å–æ•´ä¸ªæŸ±å­çš„é«˜åº¦totalHeightï¼›ç„¶åé€šè¿‡totalHeightå¯ä»¥è®¡ç®—æ•´ä¸ªæŸ±å­æ‰€éœ€çš„å°æ–¹å—æ•°é‡countã€‚ ç„¶åå¾ªç¯countï¼Œæ¥ç”Ÿæˆæ¯ä¸€ä¸ªå°æ–¹å—ï¼›æ¯ä¸€ä¸ªå°æ–¹å—çš„yè½´ä½ç½®è®¡ç®—ï¼Œä»åŸºå‡†çº¿å¼€å§‹å‘ä¸Šè®¡ç®—ï¼Œå…¬å¼ä¸ºrealHeight = y0 - (height + gap) * indexï¼›æˆ‘ä»¬çœ‹ä¸‹æœ€åçš„æ•ˆæœï¼š æˆ‘ä»¬å‘ç°ç”±äºapi.coord([xValue, yValue])è·å–çš„æ•°æ®åæ ‡çš„xè½´æ˜¯åœ¨ä¸­å¿ƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†xçš„ä½ç½®å‡å»äºŒåˆ†ä¹‹ä¸€çš„æŸ±å­å®½åº¦widthï¼›è€Œä¸‹é¢ç¬¬ä¸€ä¸ªæ–¹å—ä¹Ÿè¶…å‡ºäº†åŸºå‡†çº¿y0çš„é«˜åº¦ï¼Œæˆ‘ä»¬ä¸ºäº†è®©æœ€åä¸€ä¸ªæ–¹å—åº•éƒ¨è´´ç€åŸºå‡†çº¿ï¼Œæˆ‘ä»¬å°†æŸ±å­æ•´ä½“å¾€ä¸Šåç§»ä¸€ä¸ªå°æ–¹å—heightçš„é«˜åº¦ï¼š 12345678910111213// çœç•¥å…¶ä»–ä»£ç const rects = Array.from(&#123; length: count &#125;, (_, index) =&gt; &#123; const realHeight = y0 - (height + gap) * index; return &#123; type: &quot;rect&quot;, shape: &#123; // xä½ç½®å‡å»æŸ±å­ä¸€åŠçš„å®½åº¦ x: x - width / 2, // yä½ç½®å‘ä¸Šåç§»heightè·ç¦» y: realHeight - height, &#125;, &#125;;&#125;); è¿™æ ·ä¿®å¤æŸ±å­çš„xã€yä½ç½®åï¼ŒæŸ±å­å°±åœ¨æ•´ä¸ªç©ºé—´çš„ä¸­é—´ä½ç½®ï¼›ä¸‹é¢æˆ‘ä»¬å†ç»™æ¯ä¸ªå°æ–¹å—ä¸€ä¸ªåŠ¨ç”»æ•ˆæœï¼Œè®©å°æ–¹å—åˆšå¼€å§‹å®½åº¦é«˜åº¦éƒ½ä¸º0ï¼Œä»ä¸­å¿ƒå¼€å§‹ï¼ŒæŒ¨ä¸ªçš„å¢é•¿å‡ºæ¥ã€‚ è¿™é‡Œæˆ‘ä»¬ä¸è®¾ç½®widthã€heightä¸º0,è€Œæ˜¯é€šè¿‡scaleXå’ŒscaleYåœ¨Xã€Yè½´ä¸Šçš„ç¼©æ”¾ï¼›è¿™æ˜¯å› ä¸ºé€šè¿‡ç¼©æ”¾ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶ç¼©æ”¾çš„ä¸­å¿ƒç‚¹åœ¨å°æ–¹å—çš„ä¸­é—´ï¼š 1234567891011121314151617181920212223const realHeight = y0 - (height + gap) * index;return &#123; type: &quot;rect&quot;, scaleX: 1, scaleY: 1, opacity: 1, originX: x0, originY: realHeight - height / 2, shape: &#123; x: x - width / 2, y: realHeight - height, width, height, &#125;, enterFrom: &#123; scaleX: 0, scaleY: 0, style: &#123; opacity: 0 &#125;, &#125;, enterAnimation: &#123; delay: 20 * index, &#125;,&#125;; æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡enterFromå±æ€§è®¾ç½®æ¯ä¸ªå°æ–¹å—è¿›å…¥æ—¶çš„çŠ¶æ€ï¼ŒXYæ–¹å‘ç¼©æ”¾éƒ½ä¸º0ï¼Œé€æ˜åº¦ä¹Ÿä¸º0ï¼›ç¼©æ”¾ä¸­å¿ƒç‚¹çš„è®¾ç½®ä¸Šï¼ŒoriginXè®¾ç½®ä¸ºx0å°±æ˜¯å°æ–¹å—çš„Xè½´ä¸­å¿ƒï¼›è€Œæˆ‘ä»¬ä¸Šé¢Yè½´å‘ä¸Šåç§»äº†heightç»˜åˆ¶äº†æ–¹å—ï¼Œå› æ­¤originYè®¾ç½®ä¸ºrealHeight - height / 2å³ä¸ºYè½´ä¸­å¿ƒï¼›è¿™æ ·æˆ‘ä»¬ç¼©æ”¾çš„åŠ¨ç”»ä¹Ÿè®¾ç½®å¥½äº†ã€‚ æ¸å˜é¢œè‰² æ¯ä¸ªå°æ–¹å—çš„å½¢çŠ¶å’Œä½ç½®ç¡®å®šåï¼Œæˆ‘ä»¬ä¸‹é¢å°±éœ€è¦ç»™å®ƒä»¬æ¥â€œæ¶‚é¢œè‰²â€äº†ï¼›æˆ‘ä»¬åœ¨ä¸Šé¢è·å–åˆ°æ¯ä¸ªæŸ±å­çš„åŸºç¡€é¢œè‰²baseColorï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶çš„é¢œè‰²å€¼ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å¾—åˆ°æŸ±å­åº•éƒ¨çš„é¢œè‰²ï¼Œæ˜¯ä¸€ä¸ªrgbaçš„è‰²å€¼ï¼Œä¾‹å¦‚ï¼šrgba(255, 255, 255, 0.1)ï¼›æˆ‘ä»¬å…ˆå®ç°ä¸¤ä¸ªè‰²å€¼è½¬æ¢çš„å·¥å…·å‡½æ•°ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940/** * åå…­è¿›åˆ¶é¢œè‰²è½¬rgbé¢œè‰² * @param &#123;string&#125; hex åå…­è¿›åˆ¶é¢œè‰²ï¼Œä¾‹å¦‚#212c37 * @returns &#123;number[]&#125; rgbé¢œè‰² */export function hexToRgb(hex: string): number[] &#123; let str = hex.replace(&quot;#&quot;, &quot;&quot;); if (str.length === 8) &#123; // é•¿åº¦å…«ä½ï¼Œæ˜¯212c37ffçš„æ ¼å¼ï¼Œå…ˆæŠŠåé¢çš„é€æ˜åº¦æ›¿æ¢æ‰ str = str.substring(0, 6); &#125; if (str.length % 3) &#123; return []; &#125; //è·å–æˆªå–çš„å­—ç¬¦é•¿åº¦ let count = str.length / 3; //æ ¹æ®å­—ç¬¦ä¸²çš„é•¿åº¦åˆ¤æ–­æ˜¯å¦éœ€è¦ è¿›è¡Œå¹‚æ¬¡æ–¹ let power = 6 / str.length; let r = parseInt(&quot;0x&quot; + str.substring(0 * count, 1 * count)) ** power; let g = parseInt(&quot;0x&quot; + str.substring(1 * count, 2 * count)) ** power; let b = parseInt(&quot;0x&quot; + str.substring(2 * count)) ** power; return [r, g, b];&#125;/** * è®¾ç½®é¢œè‰²çš„alphaå€¼ * @param &#123;string&#125; colorStr é¢œè‰²å­—ç¬¦ä¸² * @param &#123;number&#125; alpha äº®åº¦0-1 * @return &#123;string&#125; æ–°çš„rgbaé¢œè‰²å­—ç¬¦ä¸² */export function alphaBlend(colorStr: string, alpha: number): string &#123; const colorArr = hexToRgb(colorStr); if (!colorArr.length) &#123; return &quot;&quot;; &#125; const [r, g, b] = colorArr; return `rgba($&#123;r&#125;,$&#123;g&#125;,$&#123;b&#125;,$&#123;alpha&#125;)`;&#125; hexToRgbå‡½æ•°æ˜¯ä¸€ä¸ªè‰²å€¼è½¬æ¢å‡½æ•°ï¼Œè€ŒalphaBlendåˆ™æ˜¯æˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„å°†baseColorè½¬ä¸ºæœ€ç»ˆé¢œè‰²çš„å‡½æ•°ï¼š 12345// è·å–åŸºç¡€é¢œè‰²const baseColor = api.visual(&quot;color&quot;);// æŸ±å­åº•éƒ¨çš„æœ€ç»ˆé¢œè‰²const endColor = alphaBlend(baseColor as string, 0); èµ·ç‚¹å’Œç»ˆç‚¹çš„é¢œè‰²ç¡®å®šäº†ï¼Œåœ¨å¾ªç¯countå‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®è¿™ä¸¤ä¸ªé¢œè‰²æ¥ç¡®å®šæ–¹å—çš„é¢œè‰²äº†ï¼›ä¸ºäº†è®©æ¯ä¸ªå°æ–¹å—åœ¨ç›¸åŒé«˜åº¦æœ‰ç›¸åŒçš„æ¸å˜é¢œè‰²ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°apiä¸­çš„ä¸€ä¸ªå‡½æ•°api.getHeightï¼Œå®ƒçš„ä½œç”¨æ˜¯è·å–æ•´ä¸ªechartså®¹å™¨çš„é«˜åº¦ã€‚ 12345678910111213141516const rects = Array.from(&#123; length: count &#125;, (_, index) =&gt; &#123; const realHeight = y0 - (height + gap) * index; const fill = liftColor( baseColor, endColor, realHeight / api.getHeight() ); return &#123; type: &quot;rect&quot;, // å…¶ä»–å±æ€§ style: &#123; fill, &#125;, &#125;;&#125;); è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªliftColorå‡½æ•°ï¼Œå®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ï¼ŒbaseColorå’ŒendColorä½œä¸ºèµ·ç‚¹å’Œç»ˆç‚¹çš„é¢œè‰²ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åœ¨ä¸¤ä¸ªé¢œè‰²ä¸­é—´çš„è¿‡æ¸¡æ¯”ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨æŸ±å­å½“å‰é«˜åº¦realHeighté™¤ä»¥å®¹å™¨çš„æ€»é«˜åº¦ä½œä¸ºæ¯”ä¾‹ï¼Œè¿™æ ·åœ¨ç›¸åŒçš„é«˜åº¦å°±å¯ä»¥ä¿æŒä¸€è‡´ï¼›æœ€åæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æœ€åçš„å®ç°æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬å¯ä»¥è®¿é—®è¿™ä¸ªé¡µé¢æŸ¥çœ‹æ•ˆæœ ç«‹ä½“æ¸å˜æŸ±çŠ¶å›¾ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ç«‹ä½“æ¸å˜æŸ±çŠ¶å›¾çš„å®ç°æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬å‘ç°ï¼Œè¿™ä¸ªç«‹ä½“æŸ±çŠ¶å›¾å…¶å®æ˜¯ä¸€ä¸ª2.5Dçš„ç«‹ä½“ï¼Œç›¸æ¯”äºæ™®é€šä¸€ç»´çš„æŸ±çŠ¶å›¾ï¼Œå®ƒæ˜¯ç”±å·¦å³ä¸¤ä¸ªæ¢¯å½¢å’Œé¡¶éƒ¨çš„è±å½¢æ‹¼æ¥è€Œæˆï¼›è€Œè¿™ä¸‰ç§å½¢çŠ¶å®˜æ–¹æ–‡æ¡£ä¸­éƒ½æ˜¯æ²¡æœ‰æä¾›çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡graphic.registerShapeæ¥æ³¨å†Œæ–°çš„å›¾å½¢ç»˜åˆ¶å‡½æ•°ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768// å·¦ä¾§çš„å›¾å½¢const leftShape = graphic.extendShape(&#123; buildPath(ctx, shape) &#123; const &#123; topBasicsYAxis, bottomYAxis, basicsXAxis &#125; = shape // ä¾§é¢å®½åº¦ const WIDTH = 15 // æ–œè§’é«˜åº¦ const OBLIQUE_ANGLE_HEIGHT = 4 // ä½¿ç”¨æ•´æ•°åæ ‡é¿å…æµ®ç‚¹ç²¾åº¦é—®é¢˜ const p1 = [Math.round(basicsXAxis - WIDTH), Math.round(topBasicsYAxis - OBLIQUE_ANGLE_HEIGHT)] const p2 = [Math.round(basicsXAxis - WIDTH), Math.round(bottomYAxis)] const p3 = [Math.round(basicsXAxis), Math.round(bottomYAxis)] const p4 = [Math.round(basicsXAxis), Math.round(topBasicsYAxis)] ctx.moveTo(p1[0], p1[1]) ctx.lineTo(p2[0], p2[1]) ctx.lineTo(p3[0], p3[1]) ctx.lineTo(p4[0], p4[1]) ctx.closePath() &#125;,&#125;)// å³ä¾§å›¾å½¢const rightShape = graphic.extendShape(&#123; buildPath(ctx, shape) &#123; const &#123; topBasicsYAxis, bottomYAxis, basicsXAxis &#125; = shape // ä¾§é¢å®½åº¦ const WIDTH = 15 // æ–œè§’é«˜åº¦ const OBLIQUE_ANGLE_HEIGHT = 4 const p1 = [Math.round(basicsXAxis), Math.round(topBasicsYAxis)] const p2 = [Math.round(basicsXAxis), Math.round(bottomYAxis)] const p3 = [Math.round(basicsXAxis + WIDTH), Math.round(bottomYAxis)] const p4 = [Math.round(basicsXAxis + WIDTH), Math.round(topBasicsYAxis - OBLIQUE_ANGLE_HEIGHT)] ctx.moveTo(p1[0], p1[1]) ctx.lineTo(p2[0], p2[1]) ctx.lineTo(p3[0], p3[1]) ctx.lineTo(p4[0], p4[1]) ctx.closePath() &#125;,&#125;)// é¡¶éƒ¨å›¾å½¢const topShape = graphic.extendShape(&#123; buildPath(ctx, shape) &#123; const &#123; topBasicsYAxis, basicsXAxis &#125; = shape // ä¾§é¢å®½åº¦ const WIDTH = 15 // æ–œè§’é«˜åº¦ const OBLIQUE_ANGLE_HEIGHT = 4 // ç¨å¾®æ‰©å¤§é¡¶éƒ¨å½¢çŠ¶ä»¥è¦†ç›–å¯èƒ½çš„é—´éš™ const p1 = [Math.round(basicsXAxis), Math.round(topBasicsYAxis + 0.5)] const p2 = [Math.round(basicsXAxis + WIDTH + 0.5), Math.round(topBasicsYAxis - OBLIQUE_ANGLE_HEIGHT)] const p3 = [Math.round(basicsXAxis), Math.round(topBasicsYAxis - OBLIQUE_ANGLE_HEIGHT * 2)] const p4 = [Math.round(basicsXAxis - WIDTH - 0.5), Math.round(topBasicsYAxis - OBLIQUE_ANGLE_HEIGHT)] ctx.moveTo(p1[0], p1[1]) ctx.lineTo(p2[0], p2[1]) ctx.lineTo(p3[0], p3[1]) ctx.lineTo(p4[0], p4[1]) ctx.closePath() &#125;,&#125;)graphic.registerShape(&quot;leftShape&quot;, leftShape)graphic.registerShape(&quot;rightShape&quot;, rightShape)graphic.registerShape(&quot;topShape&quot;, topShape) è¿™é‡Œctxå°±æ˜¯canvasçš„ä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ç»˜åˆ¶ï¼›shapeæ˜¯ä¼ å…¥çš„å›¾å½¢æ•°æ®ï¼Œè¿™é‡Œéƒ½æ˜¯ä¸€äº›canvasçš„è¯­æ³•ï¼Œä¸å†èµ˜è¿°äº†ã€‚ ä¸‹é¢å°±æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„renderItemå‡½æ•°äº†ï¼Œåœ¨typeä¸­ä½¿ç”¨registerShapeä¸­æ³¨å†Œçš„å›¾å½¢åç§°ï¼Œä¼ å…¥shapeçš„æ•°æ®ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051&#123; renderItem: function (params, api) &#123; const xValue = api.value(0) // ç±»ç›®ç´¢å¼• const yValue = api.value(1) // æ•°å€¼ const [x, y] = api.coord([xValue, yValue]) // æ•°æ®ç‚¹åæ ‡ const [x0, y0] = api.coord([xValue, 0]) // åŸºå‡†çº¿åæ ‡ // è·å–é¢œè‰² const baseColor = api.visual(&quot;color&quot;) as string return &#123; type: &quot;group&quot;, children: [ &#123; type: &quot;leftShape&quot;, shape: &#123; topBasicsYAxis: y, basicsXAxis: x, bottomYAxis: y0, &#125;, style: &#123; fill: reateAlphaGradient(baseColor, 1, 0), &#125;, &#125;, &#123; type: &quot;rightShape&quot;, shape: &#123; topBasicsYAxis: y, basicsXAxis: x, bottomYAxis: y0, &#125;, style: &#123; fill: createAlphaGradient(baseColor, 1, 0), &#125;, &#125;, &#123; type: &quot;topShape&quot;, shape: &#123; topBasicsYAxis: y, basicsXAxis: x, bottomYAxis: y0, &#125;, style: &#123; fill: baseColor, &#125;, &#125;, ], &#125; &#125;,&#125; è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªç”±ä¸‰ä¸ªå›¾å½¢æ‹¼æ¥è€Œæˆçš„æ¸å˜æŸ±çŠ¶å›¾ï¼š ä¸ºäº†è®©å›¾å½¢æ›´æœ‰ç«‹ä½“çš„æ•ˆæœï¼Œæˆ‘ä»¬è®©ä¸‹é¢ä¸¤ä¸ªæ¢¯å½¢çš„é¢œè‰²é€æ˜åº¦æ›´ä½ä¸€ç‚¹ï¼š 123456789101112&#123; type: &quot;leftShape&quot;, style: &#123; fill: createAlphaGradient(baseColor, 0.7, 0), &#125;,&#125;&#123; type: &quot;rightShape&quot;, style: &#123; fill: createAlphaGradient(baseColor, 0.9, 0), &#125;,&#125; è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ç«‹ä½“æ¸å˜æŸ±çŠ¶å›¾çš„æ•´ä½“æ•ˆæœï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®è¿™ä¸ªé¡µé¢æŸ¥çœ‹æ•ˆæœ æ€»ç»“ æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†renderItemå‡½æ•°å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰çš„å›¾è¡¨ï¼›é¦–å…ˆè§£é‡ŠrenderItemå‡½æ•°çš„åŸºæœ¬ç”¨æ³•å’Œå‚æ•°ç»“æ„ï¼ŒåŒ…æ‹¬paramså¯¹è±¡æä¾›çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€apiä¸­çš„å…³é”®å‡½æ•°ï¼ˆvalueå‡½æ•°ã€coordå‡½æ•°ã€visualå‡½æ•°ç­‰ï¼‰ï¼›ä¸»è¦çš„éš¾ç‚¹å°±åœ¨äºç†è§£åœ¨å‡½æ•°ä¸­å¦‚ä½•æ•°æ®å€¼è½¬æ¢ä¸ºè§†è§‰å±æ€§ï¼Œä»¥åŠå¦‚ä½•ç»„åˆåŸºæœ¬å›¾å½¢å…ƒç´ æ¥æ„å»ºå¤æ‚çš„è‡ªå®šä¹‰å›¾è¡¨ã€‚ æœ¬æ–‡é‡ç‚¹ä»‹ç»äº†ä¸‰ä¸ªé«˜çº§æ¡ˆä¾‹çš„å®ç°ï¼šæŠ˜çº¿è£…é¥°æ—‹è½¬å…ƒç´ é€šè¿‡ç»„åˆåœ†å½¢å’Œåœ†å¼§åˆ›å»ºåŠ¨æ€æ—‹è½¬æ•ˆæœï¼›åˆ†éš”æ¸å˜æŸ±çŠ¶å›¾å°†å•ä¸ªæŸ±å­åˆ†è§£ä¸ºå¤šä¸ªæ¸å˜è‰²å—ï¼›ç«‹ä½“æ¸å˜æŸ±çŠ¶å›¾åˆ™é€šè¿‡æ³¨å†Œè‡ªå®šä¹‰å½¢çŠ¶åˆ›å»º2.5Dç«‹ä½“æ•ˆæœã€‚ è¿™ä¸‰ä¸ªæ¡ˆä¾‹æ˜¾ç¤ºäº†renderItemå¼ºå¤§çš„çµæ´»æ€§ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¼€å‘å‡ºè¶…è¿‡Echartså†…ç½®çš„å›¾è¡¨ç±»å‹ï¼Œåˆ›é€ å‡ºé«˜åº¦å®šåˆ¶åŒ–çš„æ•°æ®å¯è§†åŒ–æ•ˆæœã€‚ æœ¬æ–‡æ‰€æœ‰ä»£ç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€Echartsé«˜çº§å¼€å‘ã€‘å³å¯è·å–ã€‚ å‚è€ƒecharts - è‡ªå®šä¹‰å½¢çŠ¶ - å®ç°ç«‹ä½“æŸ±çŠ¶å›¾é€šè¿‡Echartsæ€æ ·å®ç°ç«‹ä½“æŸ±çŠ¶å›¾","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"}]},{"title":"ä¸€æ¬¾è§£å‹çš„3Dæ–¹å—åŠ è½½åŠ¨ç”»æ•ˆæœ","date":"2025-08-11T04:00:00.000Z","path":"2025/08/11/Threejs-Cube-Loading.html","text":"è¿™ä¸æœ€è¿‘æˆ‘å¸è®¾è®¡å¸ˆåˆç»™æˆ‘æ•´äº†ç‚¹æ´»ï¼Œå®ç°ä¸€ä¸ªåŠ è½½è¿›åº¦çš„åŠ¨ç”»ï¼Œåˆšå¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæ”¾ä¸¤ä¸ªåœ†åœˆè½¬ä¸€ä¸‹å°±å¯ä»¥äº†ï¼›ä½†æ˜¯è®¾è®¡è¯´æˆ‘ä»¬æ˜¯ä¸€ä¸ª3Dé¡¹ç›®ï¼Œå¾—æç‚¹é«˜ç«¯å¤§æ°”çš„ï¼Œäºæ˜¯å°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚ ç¯å¢ƒå‡†å¤‡ é¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯å°†ä¸‰ç»´åœºæ™¯çš„å››ä¸ªè¦ç´ å‡†å¤‡å¥½ï¼Œè¿™é‡Œç¬”è€…ä¸ºäº†ç®€åŒ–ä»£ç ï¼Œä½¿ç”¨äº†è‡ªå·±å°è£…çš„å·¥å…·æ¥åˆ›å»ºï¼š 1234567891011121314151617export default class Index &#123; scene: Scene; camera: PerspectiveCamera; renderer: WebGLRenderer; controls: OrbitControls; constructor() &#123; this.scene = initScene(); this.camera = initCamera(new Vector3(60, 50, 70), 55, 0.01, 200); this.renderer = initRenderer(&#123; antialias: true, alpha: true &#125;); // è®¾ç½®é€æ˜èƒŒæ™¯ this.renderer.setClearColor(0x000000, 0); this.controls = initOrbitControls(this.camera, this.renderer, false); &#125;&#125; è¿™é‡Œæœ‰ä¸€ä¸ªæˆ‘ä»¬å¯èƒ½ä¼šä¸å¤ªå¸¸è§çš„å‡½æ•°ï¼šrenderer.setClearColorï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ç”¨äºè®¾ç½®æ¸²æŸ“å™¨çš„æ¸…é™¤é¢œè‰²ï¼Œä¹Ÿå°±æ˜¯åœºæ™¯ä¸­çš„èƒŒæ™¯è‰²ï¼›è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªåå…­è¿›åˆ¶çš„é¢œè‰²ï¼Œé»˜è®¤æ˜¯0x000000ï¼Œå³é»‘è‰²ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯å…¶é€æ˜åº¦alphaå€¼ï¼›æˆ‘ä»¬åæœŸå¯ä»¥åœ¨èƒŒæ™¯ä¸­æ’å…¥ä¸€äº›é¢„åŠ è½½å›¾ç­‰ï¼Œå› æ­¤å¯ä»¥é€šè¿‡è®¾ç½®è¿™ä¸ªå‡½æ•°çš„alphaä¸º0æ¥æ¸…é™¤èƒŒæ™¯çš„é¢œè‰²ã€‚ ç¯å¢ƒæ­å»ºå¥½äº†ï¼Œç¥è¯´è¦æœ‰å…‰ï¼›äºæ˜¯æˆ‘ä»¬åˆ›å»ºä¸¤ç§å…‰ï¼Œç¯å¢ƒå…‰å’Œå¹³è¡Œå…‰ï¼š 123456789101112131415161718export default class Index &#123; initLight() &#123; &#123; // ç¯å¢ƒå…‰ this.ambientLight = new AmbientLight(0xffffff, 1) this.ambientLight.castShadow = false this.scene.add(this.ambientLight) &#125; &#123; // å¹³è¡Œå…‰ this.directionalLight = new DirectionalLight(0xffffff, 1.2) this.directionalLight.position.set(0, 10, 0) this.directionalLight.castShadow = true this.scene.add(this.directionalLight) &#125; &#125;&#125; æ¥ç€ï¼Œå°±éœ€è¦æˆ‘ä»¬æœ€é‡è¦çš„ç‰©ä½“ï¼Œä¸‰ä¸ªæ–¹å—äº†ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥æ‰¹é‡åœ°åˆ›å»ºæ–¹å—ï¼š 1234567891011121314151617export default class Index &#123; createCube(x: number, y: number, z: number, size: number, color: number): Mesh&lt;BufferGeometry, MeshPhongMaterial&gt; &#123; const material = new MeshPhongMaterial(&#123; color, &#125;) const mesh = new Mesh(new BoxGeometry(size, size, size), material) mesh.castShadow = true mesh.receiveShadow = true mesh.position.set(x, y, z) mesh.name = &quot;cube&quot; this.scene.add(mesh) return mesh &#125;&#125; ç„¶åæŒ‰ç…§åˆå§‹åŒ–çš„ä½ç½®åˆ›å»ºä¸‰ä¸ªæ–¹å—ï¼š 1234567891011const SIZE = 4.8export default class Index &#123; cube1: Mesh&lt;BufferGeometry, MeshPhongMaterial&gt;; cube2: Mesh&lt;BufferGeometry, MeshPhongMaterial&gt;; cube3: Mesh&lt;BufferGeometry, MeshPhongMaterial&gt;; constructor() &#123; this.cube1 = this.createCube(0, 0, 0, SIZE, 0xf0fafc) this.cube2 = this.createCube(0, 0, SIZE, SIZE, 0xf0fafc) this.cube3 = this.createCube(0 - SIZE, 0, SIZE, SIZE, 0xf0fafc) &#125;&#125; è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„SIZEå˜é‡ï¼Œç”¨äºå®šä¹‰æ–¹å—çš„å°ºå¯¸ï¼Œåç»­æ–¹å—çš„ä½ç½®æ›´æ–°ä¹Ÿéƒ½ä¼šä½¿ç”¨è¿™ä¸ªå°ºå¯¸å˜é‡ã€‚ ä»ä»£ç ä¸Šå¯èƒ½å¾ˆéš¾çœ‹å‡ºæ¥ï¼Œå®é™…ä¸Šæ–¹å—æŒ‰ç…§è¿™æ ·çš„ä½ç½®è¿›è¡Œæ’å¸ƒäº†ï¼š ç¿»æ»šæŠŠï¼æ–¹å— ä¸‰ä¸ªæ–¹å—å‡ºåœºäº†ï¼Œé¦–å…ˆæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹å¦‚ä½•å…ˆè®©ä¸€ä¸ªæ–¹å—å‘å‰ç¿»æ»šï¼Œå‘å‰ç¿»æ»šå…¶å®åŒ…å«äº†ä¸¤ä¸ªåŠ¨ä½œï¼Œä¸€ä¸ªæ˜¯å‰è¿›ï¼Œä¸€ä¸ªæ˜¯æ—‹è½¬ï¼›å› æ­¤è¿™é‡Œè¿˜æ˜¯å¼•å…¥æˆ‘ä»¬å¸¸ç”¨çš„GSAPåº“ï¼Œæˆ‘ä»¬è®©cube3å…ˆæ²¿ç€-Zè½´çš„æ–¹å‘è¿åŠ¨çœ‹ä¸€ä¸‹æ•ˆæœï¼š 123456789101112131415161718import gsap from &quot;gsap&quot;;export default class Index &#123; constructor() &#123; const tl = gsap.timeline(); tl.to(this.cube3.position, &#123; z: 0, duration: 1, &#125;) .to( this.cube3.rotation, &#123; x: -Math.PI / 2, duration: 1, &#125;, &quot;&lt;&quot; ); &#125;&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†æ—¶é—´çº¿ï¼Œç„¶åå¯¹Cubeçš„positionä½ç½®å’Œrotationæ—‹è½¬è§’åº¦è¿›è¡Œäº†åŠ¨ç”»è®¾ç½®ï¼›ç”±äºä¸¤ä¸ªåŠ¨ä½œæ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†gsapçš„&lt;å‚æ•°ï¼Œå°†rotationæ’å…¥åˆ°positionåŠ¨ç”»æ‰§è¡Œå‰ï¼Œè¡¨ç¤ºä¸¤ä¸ªåŠ¨ä½œä¹‹é—´çš„æ—¶é—´é—´éš”ä¸º0ç§’ï¼›æˆ‘ä»¬å…è®¸ä»£ç ï¼Œå°±èƒ½çœ‹åˆ°æ–¹å—ç¿»æ»šè¿åŠ¨èµ·æ¥äº†ï¼š ä½†æ˜¯å¦‚æœæ¯ä¸ªæ–¹å—è¿åŠ¨æˆ‘ä»¬éƒ½å†™ä¸€éè¿™æ ·çš„ä»£ç ï¼Œæ¯”è¾ƒè´¹æ—¶è´¹åŠ›ï¼›æˆ‘ä»¬å‘ç°æ–¹å—ä¸æ˜¯æ²¿ç€Xè½´è¿åŠ¨å°±æ˜¯æ²¿ç€Zè½´è¿åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†æ–¹å—çš„ç§»åŠ¨ä»£ç å°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­å»ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445const DURATION = 0.8;/** * å°†æ–¹å—ç§»åŠ¨å¹¶ä¸”æ—‹è½¬åˆ°æŒ‡å®šåœ°æ–¹ * @param &#123;Mesh&#125; cube æ–¹å— * @param &#123;&#x27;x&#x27; | &#x27;z&#x27;&#125; direction æ–¹å‘,åœ¨xè½´æˆ–è€…zè½´ * @param &#123;number&#125; pos ç§»åŠ¨åˆ°çš„æœ€ç»ˆä½ç½® * @param &#123;rotation&#125; rotation æ—‹è½¬çš„è§’åº¦ * @param &#123;rotationAxes&#125; rotationAxes ç»•ç€å“ªä¸ªè½´æ—‹è½¬ * @returns &#123;gsap.core.Timeline&#125; */rollCube( cube: Mesh, direction: &quot;x&quot; | &quot;z&quot;, pos: number, rotation: number, rotationAxes: &quot;x&quot; | &quot;y&quot; | &quot;z&quot;) &#123; const tl = gsap.timeline(); if (direction === &quot;x&quot;) &#123; tl.to(cube.position, &#123; x: pos, duration: DURATION, &#125;).to( cube.rotation, &#123; [rotationAxes]: rotation, duration: DURATION, &#125;, &quot;&lt;&quot; ); &#125; else if (direction === &quot;z&quot;) &#123; tl.to(cube.position, &#123; z: pos, duration: DURATION, &#125;).to( cube.rotation, &#123; [rotationAxes]: rotation, duration: DURATION, &#125;, &quot;&lt;&quot; ); &#125; return tl;&#125; æˆ‘ä»¬å°è£…ä¸€ä¸ªrollCubeå‡½æ•°ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªtimelineæ—¶é—´çº¿ï¼Œç„¶åæ ¹æ®ä¼ å…¥çš„æ–¹å‘ã€ä½ç½®ã€æ—‹è½¬è§’åº¦ã€æ—‹è½¬è½´ç­‰å‚æ•°ï¼Œå°†æ–¹å—çš„ç§»åŠ¨å’Œæ—‹è½¬è¿›è¡Œè®¾ç½®ï¼›å¯¹æ–¹å—çš„å•æ¬¡è¿åŠ¨æ–¹å¼å®ç°å®Œæ¯•ä¹‹åï¼Œé‚£æˆ‘ä»¬ä¸‹é¢å°±è¦æ¥çœ‹ä¸‹å¦‚ä½•è®©ä»–ä»¬ä¸€èµ·è¿åŠ¨èµ·æ¥å‘¢ï¼Ÿæˆ‘ä»¬å¦‚ä½•å°†å•æ¬¡è¿åŠ¨çš„æ—¶é—´çº¿è¿›è¡Œä¸²èµ·æ¥ï¼Ÿ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨gsapçš„ä¸€ä¸ªå°æŠ€å·§ï¼šåµŒå¥—æ—¶é—´çº¿ï¼›åµŒå¥—æ—¶é—´çº¿çš„æ–¹å¼å¯ä»¥æ”¹å˜æˆ‘ä»¬ä»£ç çš„ç»„ç»‡é€»è¾‘ï¼Œè®©æˆ‘ä»¬å®ç°å„ç§å¤æ‚çš„åŠ¨ç”»é€»è¾‘ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„ç®€æ´å’Œå¯è¯»æ€§ï¼›é‚£ä¹ˆåµŒå¥—æ—¶é—´çº¿å¦‚ä½•æ¥åšå‘¢ï¼Ÿ ç”±äºrollCubeä¸­å®šä¹‰äº†ä¸€ä¸ªä¸€ä¸ªå°çš„æ—¶é—´çº¿ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªä¸»æ—¶é—´çº¿ï¼Œç„¶åé€šè¿‡addæ–¹æ³•å°†rollCubeè¿”å›çš„å°æ—¶é—´çº¿æ·»åŠ åˆ°ä¸»æ—¶é—´çº¿ä¸­ï¼š 123456export default class Index &#123; mainTimeline: gsap.core.Timeline; constructor() &#123; this.mainTimeline = gsap.timeline(&#123; repeat: -1 &#125;); &#125;&#125; è¿™é‡Œæˆ‘ä»¬è®¾ç½®repeat: -1ï¼Œè¡¨ç¤ºè¿™ä¸ªä¸»æ—¶é—´çº¿ä¼šæ— é™é‡å¤æ‰§è¡Œï¼Œè¿™æ ·æˆ‘ä»¬å¯¹æ–¹å—ç§»åŠ¨åªéœ€è¦è¿›è¡Œå››æ¬¡ï¼Œå°±å¯ä»¥å®ç°æ•ˆæœäº†ï¼Œè€Œä¸éœ€è¦å°†æ‰€æœ‰æ–¹å—ç§»åŠ¨åˆ°åŸæ¥çš„ä½ç½®ï¼›ä¸‹é¢æˆ‘ä»¬å°±å¯ä»¥æŠŠæ¯ä¸ªå°æ–¹å—çš„è¿åŠ¨æ·»åŠ åˆ°ä¸»æ—¶é—´çº¿ä¸­ï¼š 123456789101112131415161718const ROTATION_UNIT = Math.PI / 2;export default class Index &#123; mainTimeline: gsap.core.Timeline; constructor() &#123; this.mainTimeline.add( this.rollCube(this.cube3, &quot;z&quot;, 0, -ROTATION_UNIT, &quot;x&quot;) ); this.mainTimeline.add( this.rollCube(this.cube2, &quot;x&quot;, -SIZE, ROTATION_UNIT, &quot;z&quot;) ); this.mainTimeline.add( this.rollCube(this.cube1, &quot;z&quot;, SIZE, ROTATION_UNIT, &quot;x&quot;) ); this.mainTimeline.add( this.rollCube(this.cube3, &quot;x&quot;, 0, ROTATION_UNIT, &quot;y&quot;) ); &#125;&#125; æˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥æ›´å¥½çš„ç†è§£è¿™ä¸ªè¿åŠ¨è¿‡ç¨‹ï¼š æˆ‘ä»¬çœ‹ä¸‹æœ€åçš„å®ç°æ•ˆæœï¼Œä¹Ÿå¯ä»¥è®¿é—®è¿™ä¸ªåœ°å€æŸ¥çœ‹ï¼Œç¬”è€…èƒ½çœ‹ä¸€æ•´å¤©ï¼Œç›¸å½“çš„è§£å‹ï¼š æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€3Dæ–¹å—åŠ è½½åŠ¨ç”»ã€‘å³å¯è·å–ã€‚ æ€»ç»“ æœ¬æ–‡æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªæœ‰è¶£çš„3Dæ–¹å—åŠ è½½åŠ¨ç”»çš„æ•ˆæœï¼Œç›¸æ¯”äº2DåŠ è½½æ•ˆæœï¼Œ3Dæ•ˆæœé€šè¿‡ç©ºé—´è¿åŠ¨å’Œæ—‹è½¬å¸¦æ¥äº†æ›´åŠ ä¸°å¯Œçš„è§†è§‰ä½“éªŒã€‚æˆ‘ä»¬å­¦ä¹ äº†é€šè¿‡setClearColoræ–¹æ³•è®¾ç½®é€æ˜èƒŒæ™¯ï¼Œä»¥åŠé€šè¿‡gsapåµŒå¥—æ—¶é—´çº¿çš„æ–¹å¼å°†å¤šä¸ªæ–¹å—åŠ¨ç”»ä¸²è”èµ·æ¥ï¼Œå½¢æˆæ— é™å¾ªç¯çš„åŠ è½½åŠ¨ç”»æ•ˆæœï¼Œè¿™ç§3DåŠ¨ç”»çš„å®ç°æ–¹å¼ä¸ä»…ä»£ç ç»“æ„æ¸…æ™°ï¼Œè€Œä¸”é€šè¿‡ç©ºé—´è¿åŠ¨ä¸ºåŠ è½½æ•ˆæœå¢æ·»äº†æ›´å¤šè¶£å‘³æ€§ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"Threejså…¨çƒåæ ‡åˆ†å¸ƒæ•ˆæœ","date":"2025-04-09T00:12:00.000Z","path":"2025/04/09/Threejs-Global.html","text":"åœ¨æµè§ˆç½‘é¡µæ—¶ï¼Œç¬”è€…å‘ç°åä¸ºäº‘ä¸€ä¸ªæœ‰è¶£çš„æ•ˆæœï¼Œå°±æ˜¯å°†åœ°çƒä¸Šå¸ƒå±€çš„åŸå¸‚æ ‡æ³¨å‡ºæ¥ï¼Œå½“åŸå¸‚å‡ºç°åœ¨åœ°çƒæ­£é¢è§†çº¿èŒƒå›´å†…æ—¶ï¼Œå°±æ˜¾ç¤ºå‡ºæ¥ï¼Œè€Œåœ¨é è¿‘è¾¹ç¼˜æ—¶ï¼Œå°±æ…¢æ…¢çš„éšè—ç›´è‡³æ¶ˆå¤±ä¸è§ï¼›é‚£ä¹ˆè¿™ç§æ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿé‡Œé¢åˆåŒ…å«äº†å“ªäº›çš„é€»è¾‘å‘¢ï¼Ÿæœ¬æ–‡æˆ‘ä»¬å°±æ¥çœ‹ä¸‹è¿™ä¸ªæ•ˆæœçš„å®ç°è¿‡ç¨‹ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æ•ˆæœç¤ºä¾‹ï¼š ç”±äºgifæ–‡ä»¶å¤ªå¤§äº†ï¼Œè¿™é‡Œå°±ä¸æˆªå–åŠ¨å›¾æ•ˆæœäº†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ç›´æ¥æ»‘åˆ°æ–‡æœ«æŸ¥çœ‹å®ç°çš„æ•ˆæœã€‚ ç¯å¢ƒå‡†å¤‡ é¦–å…ˆè¿˜æ˜¯å‡†å¤‡æˆ‘ä»¬ç”»å¸ƒçš„åŸºç¡€ç¯å¢ƒï¼Œåˆå§‹åŒ–åœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨ã€æ§åˆ¶å™¨å››ä»¶å¥—ï¼š 12345678910111213141516171819202122export default class Index &#123; constructor() &#123; // åˆå§‹åŒ–åœºæ™¯ this.scene = initScene(); this.scene.background = new Color(0xf7f7f7); // åˆå§‹åŒ–ç›¸æœº this.camera = initCamera(new Vector3(10, 0, 0), 55, 0.001, 20000); // åˆå§‹åŒ–æ¸²æŸ“å™¨ this.renderer = initRenderer(); // åˆå§‹åŒ–æ§åˆ¶å™¨å“¦ this.controls = initOrbitControls(this.camera, this.renderer); // ç¦æ­¢ç¼©æ”¾ this.controls.enableZoom = false; // é˜»å°¼ this.controls.enableDamping = true; // è‡ªåŠ¨æ—‹è½¬ this.controls.autoRotate = true; &#125;&#125; æˆ‘ä»¬å†å‘åœºæ™¯ä¸­æ·»åŠ ä¸€ä¸ªåœ°çƒï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥ç”¨ä¸€ä¸ªåœ°çƒçš„çº¹ç†è´´å›¾å³å¯ï¼š 12345678910111213// çƒä½“çš„åŠå¾„å¤§å°const SPHERE_RADIUX = 3;initMesh() &#123; this.loader = new TextureLoader(); const mat = new MeshBasicMaterial(&#123; map: this.loader.load(&quot;ditu.jpg&quot;), &#125;); const geo = new SphereGeometry(SPHERE_RADIUX); const sphere = new Mesh(geo, mat); sphere.position.set(0, 0, 0); this.scene.add(sphere);&#125; ä¸‹é¢å°±éœ€è¦åœ¨åœ°çƒğŸŒä¸Šè´´ä¸Šä¸€ä¸ªä¸ªçš„åŸå¸‚å®šä½äº†ï¼Œè¿™é‡Œç”¨åˆ°ä¸€ä¸ªæ–°çš„æ¸²æŸ“å™¨ï¼šCSS2DRendererï¼Œè¿™ä¸ªæ¸²æŸ“å™¨ç”¨äºå°†Htmlå…ƒç´ åµŒå…¥åˆ°3Dåœºæ™¯ä¸­å»ï¼Œç”¨äºåœ¨åœºæ™¯ä¸­å±•ç¤ºä¸€äº›é¢å¤–çš„ä¿¡æ¯ï¼›æ¯”å¦‚VRçœ‹æˆ¿æ—¶å€™çš„æ ‡ç­¾ï¼Œä½¿ç”¨htmlæ ‡ç­¾æœ‰æ›´å¥½çš„æ“æ§ï¼Œæ¯”å¦‚ä½¿ç”¨CSSè¿˜å¯ä»¥å®ç°ç‚¹å‡»ã€æ‚¬æµ®ã€æ¿€æ´»ç­‰ç­‰æ•ˆæœã€‚ æˆ‘ä»¬åœ¨åˆå§‹åŒ–åœºæ™¯çš„æ—¶å€™æ·»åŠ ä¸€ä¸ªCSS2DRendereræ¸²æŸ“å™¨ï¼š 123456789101112131415161718192021import &#123; CSS2DRenderer, CSS2DObject,&#125; from &quot;three/examples/jsm/renderers/CSS2DRenderer.js&quot;;export default class Index &#123; constructor() &#123; // å…¶ä»–åœºæ™¯ä»£ç  const labelRenderer = new CSS2DRenderer(); labelRenderer.setSize(window.innerWidth, window.innerHeight); labelRenderer.domElement.style.position = &quot;absolute&quot;; // è®¾ç½®æ¸²æŸ“å™¨æ ·å¼ labelRenderer.domElement.style.top = &quot;0&quot;; labelRenderer.domElement.style.left = &quot;0&quot;; labelRenderer.domElement.style.zIndex = &quot;1&quot;; this.labelRenderer = labelRenderer; document.body.appendChild(labelRenderer.domElement); // è¿™é‡Œä¿®æ”¹ this.controls = initOrbitControls(this.camera, this.labelRenderer, false); &#125;&#125; è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ–controlsæ§åˆ¶å™¨çš„æ—¶å€™ï¼Œéœ€è¦ä¿®æ”¹å°†CSS2DRendererä¼ å…¥æ§åˆ¶å™¨çš„æ„é€ å‡½æ•°ä¸­ï¼Œå¦åˆ™å°±ä¼šå‡ºç°ç”»å¸ƒæ— æ³•è½¬åŠ¨çš„æƒ…å†µã€‚ ä¸‹é¢æˆ‘ä»¬å°±éœ€è¦å°†Htmlæ ‡ç­¾æ·»åŠ åˆ°CSS2DRendererä¸­å»ï¼Œ 12345678910111213141516171819202122const list = [ &#123; id: 0, name: &quot;åŒ—äº¬&quot;, lng: 116.39, lat: 39.9 &#125;, // çœç•¥å…¶ä»–åŸå¸‚];const tagsList = [];for (let i = 0; i &lt; list.length; i++) &#123; const &#123; name, lng, lat &#125; = list[i]; const pos = this.latLongToVector3(lng, lat, SPHERE_RADIUX); const box = document.createElement(&quot;div&quot;); box.className = &quot;global_position-box&quot;; box.innerHtml = name; const tag = new CSS2DObject(box); tag.position.copy(pos); this.scene.add(tag); tagsList.push(tag);&#125;this.tagsList = tagsList; è¿™é‡Œåœ¨å¾ªç¯åˆ—è¡¨çš„æ—¶å€™ï¼Œéœ€è¦å°†æ•°æ®çš„ç»çº¬åº¦åæ ‡è½¬æ¢æˆåœ¨ä¸‰ç»´ç©ºé—´é‡Œçš„xã€yã€zåæ ‡ï¼Œæˆ‘ä»¬ç”¨åˆ°ä¸€ä¸ªlatLongToVector3å‡½æ•°è¿›è¡Œè½¬æ¢å¤„ç†ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼šä»‹ç»åˆ°è¿™ä¸ªå‡½æ•°ã€‚ é€šè¿‡CSS2DObjectå®ä¾‹åŒ–æ ‡ç­¾åï¼Œè®¾ç½®æ ‡ç­¾çš„å·¦è¾¹ï¼›ä½†æ˜¯å°†æ ‡ç­¾æ·»åŠ åˆ°é¡µé¢ä¸Šå»åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œå¦‚æœæ˜¯åœ¨æˆ‘ä»¬è§†çº¿èƒŒé¢çš„æ ‡ç­¾ï¼ŒåŒæ—¶ä¹Ÿæ˜¾ç°å‡ºæ¥äº†ã€‚ è¿™æ ·çš„æ•ˆæœè‚¯å®šä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ¯æ¬¡renderçš„æ—¶å€™ï¼Œå°±éœ€è¦ä¸æ–­çš„å»æ§åˆ¶æ¯ä¸ªhtmlæ ‡ç­¾çš„é€æ˜åº¦ï¼Œå½“æ ‡ç­¾åœ¨æˆ‘ä»¬è§†çº¿åé¢çš„æ—¶å€™å°±è®¾ç½®ä¸º0ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼›é‚£ä¹ˆæ ‡ç­¾çš„é€æ˜æ€ä¹ˆæ¥è®¡ç®—å‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸‰ä¸ªå·¥å…·å‡½æ•°çš„ä½¿ç”¨ã€‚ ç»çº¬åº¦vsçƒåæ ‡ç³» é¦–å…ˆæˆ‘ä»¬è¦å­¦ä¹ çš„ä¸€ä¸ªå°±æ˜¯ç»çº¬åº¦å’Œä¸‰ç»´çƒä½“åæ ‡è½¬æ¢çš„ä¸€ä¸ªå…³ç³»å‡½æ•°ï¼Œå®ƒä¹Ÿæ˜¯Three.jsä¸­åšä¸‰ç»´åœ°å›¾ç»å¸¸ä¼šé‡åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸‹å®ƒçš„åŸç†å’Œå®ç°é€»è¾‘ã€‚ æˆ‘ä»¬çŸ¥é“åœ¨ä¸‰ç»´åæ ‡ç³»ä¸­ï¼Œæˆ‘ä»¬ç”¨xyzèƒ½å¾ˆå¿«ç¡®å®šä¸€ä¸ªç‚¹åœ¨ç©ºé—´ä¸Šçš„åæ ‡ï¼›ä½†æ˜¯åœ¨çƒä½“åæ ‡ç³»ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å¦å¤–ä¸‰ä¸ªå‚æ•°æ¥ç¡®å®šä¸€ä¸ªç‚¹çš„ä½ç½®ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ•°å­¦ä¸­æ˜¯å¦‚ä½•æ¥è¡¨ç¤ºçš„ï¼š å¾„å‘è·ç¦»ï¼šä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„çƒä½“åŠå¾„ï¼Œæ˜¯çƒé¢åæ ‡ç‚¹åˆ°çƒå¿ƒçš„è·ç¦»ï¼Œç”¨rè¡¨ç¤ºã€‚ æè§’ï¼šæ˜¯zè½´ä¸rçš„äº¤è§’ï¼Œä¸€èˆ¬ç”¨Î¸è¡¨ç¤ºã€‚ æ–¹ä½è§’ï¼šæ˜¯èµ¤é“é¢ï¼ˆç”± x è½´ä¸ y è½´ç¡®å®šçš„å¹³é¢ï¼‰ä¸Šèµ·å§‹äº x è½´ï¼Œæ²¿é€†æ—¶é’ˆæ–¹å‘é‡å‡ºçš„è§’åº¦ï¼Œé€šå¸¸ç”¨Ï†è¡¨ç¤ºã€‚ æˆ‘ä»¬å‡è®¾åœ°çƒæ˜¯ä¸€ä¸ªå®Œç¾çš„çƒä½“ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒThree.jsä¸­ï¼Œyè½´å’Œzè½´ä¸æ•°å­¦æè¿°ä¸­çš„ä½ç½®æ˜¯ç›¸åçš„ï¼Œå³yè½´æ˜¯çºµå‘çš„ï¼Œzè½´æ˜¯ä»åå¾€å‰å»¶ä¼¸çš„ï¼›è¿™ä¹Ÿå¯¼è‡´äº†ä¸‹é¢ä»£ç ä¸­yå’Œzçš„è®¡ç®—æ–¹å¼ä¸å…¬å¼çš„è®¡ç®—æ–¹å¼äº’æ¢ã€‚ å¦‚æœç”¨å…¬å¼æ¥è¡¨ç¤ºï¼Œç›´è§’åæ ‡å’Œçƒåæ ‡çš„å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š å…¬å¼æœ‰äº†ï¼Œæˆ‘ä»¬ä¸‹é¢å°±è¦æ¥çœ‹å…¬å¼ä¸­çš„æè§’Î¸å’Œæ–¹ä½è§’Ï†åˆ†åˆ«å¦‚ä½•æ¥å¾—åˆ°ï¼›æˆ‘ä»¬çŸ¥é“ï¼Œçº¬åº¦æ˜¯ç‚¹ç›¸å¯¹äºèµ¤é“å¹³é¢çš„è§’åº¦ï¼Œä»-90Â°çš„å—æåˆ°90Â°çš„åŒ—æï¼Œè€Œæè§’æ˜¯Three.jsä¸­çš„Yè½´å’Œç‚¹ä¹‹é—´çš„å¤¹è§’ï¼Œå› æ­¤åŒ—ææ˜¯0ï¼Œèµ¤é“æ˜¯90ï¼Œè€Œå—ææ˜¯180ï¼›å› æ­¤æˆ‘ä»¬éœ€è¦ç”¨90å‡å»çº¬åº¦ï¼Œå†é€šè¿‡åº¦æ•°å’Œå¼§åº¦çš„è½¬æ¢å³å¯å¾—åˆ°å¦‚ä¸‹ä»£ç ï¼š 1const phi = (90 - latitude) * (Math.PI / 180); å…¶æ¬¡æ˜¯æ–¹ä½è§’ï¼Œç”±äºæ˜¯æ²¿é€†æ—¶é’ˆæ–¹å‘é‡å‡ºçš„è§’åº¦ï¼Œæˆ‘ä»¬å¯¹å…¶å–åï¼š 1const theta = (longitude + 180) * (Math.PI / 180); ä½†æ˜¯æˆ‘ä»¬å®é™…å¼€å‘ä¸­æ‹¿åˆ°çš„åœ°å›¾ä¸ä¸€å®šæ˜¯æ ‡å‡†çš„åœ°å›¾ï¼Œéœ€è¦å¯¹æ–¹ä½è§’è¿›è¡Œå¤„ç†ï¼Œä¸ä¸€å®šæ˜¯åŠ 180ã€‚ æè§’å’Œæ–¹ä½è§’å¾—åˆ°äº†ï¼Œæˆ‘ä»¬é€šè¿‡å…¬å¼å¾—åˆ°ä¸€ä¸ªæ ‡å‡†çš„ç»çº¬åº¦è½¬æ¢ä¸‰ç»´ç©ºé—´åæ ‡çš„å‡½æ•°å¦‚ä¸‹ï¼š 1234567891011121314151617181920/** * å°†ç»çº¬åº¦è½¬æ¢ä¸ºä¸‰ç»´ç©ºé—´åæ ‡ * @param &#123;number&#125; longitude - ç»åº¦ï¼ˆ-180åˆ°180ï¼‰ * @param &#123;number&#125; latitude - çº¬åº¦ï¼ˆ-90åˆ°90ï¼‰ * @param &#123;number&#125; radius - çƒä½“åŠå¾„ * @returns &#123;THREE.Vector3&#125; è¿”å›Three.jsçš„ä¸‰ç»´å‘é‡åæ ‡ */function latLongToVector3(longitude, latitude, radius): Vector3 &#123; // æè§’ï¼ˆä»åŒ—æå¼€å§‹ï¼‰ const phi = (90 - latitude) * (Math.PI / 180); // æ–¹ä½è§’ï¼ˆä»æœ¬åˆå­åˆçº¿å¼€å§‹ï¼‰ const theta = (longitude + 180) * (Math.PI / 180); // è®¡ç®—çƒä½“ä¸Šçš„ç‚¹åæ ‡ï¼ˆYè½´å‘ä¸Šï¼‰ const x = -radius * Math.sin(phi) * Math.cos(theta); const y = radius * Math.cos(phi); const z = radius * Math.sin(phi) * Math.sin(theta); return new THREE.Vector3(x, y, z);&#125; è§’åº¦è®¡ç®—å‡½æ•° ä¸‹é¢æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªæ•°å­¦é—®é¢˜ï¼š åœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œå·²çŸ¥ABCä¸‰ä¸ªç‚¹çš„åæ ‡ï¼Œæ±‚æ¯ä¸ªç‚¹çš„è§’åº¦ï¼Ÿ ç»å¸¸å­¦é«˜æ•°çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œä¸è¦æŠŠå®ƒæƒ³è±¡æˆä¸‰ç»´ï¼Œè€Œæ˜¯ä¸€ä¸ªå¹³é¢ä¸Šçš„ä¸‰è§’å½¢ï¼›æ ¹æ®ä¸‹é¢ä¸‰è§’å½¢çš„ä½™å¼¦å®šç†ï¼š æˆ‘ä»¬çœ‹ä¸Šé¢çš„å…¬å¼ï¼Œæ ¹æ®ä»»æ„ä¸‰æ¡è¾¹çš„é•¿åº¦ï¼Œæˆ‘ä»¬éƒ½å¯ä»¥è®¡ç®—å‡ºè§’åº¦çš„ä½™å¼¦å€¼ï¼›å› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªå‡½æ•°æ¥è®¡ç®—ä¸‰ç»´ç©ºé—´ä¸‹ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»ï¼š 1234567// è®¡ç®—ç©ºé—´ä¸Šçš„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»export function calc3DPointDist(x1, y1, z1, x2, y2, z2) &#123; const distX = x2 - x1; const distY = y2 - y1; const distZ = z2 - z1; return Math.sqrt(distX * distX + distY * distY + distZ * distZ);&#125; æœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—æ¯ä¸ªè§’å¯¹åº”è¾¹çš„é•¿åº¦äº†ï¼š 123456789101112131415/** * å·²ç»ABCä¸‰ç»´åæ ‡ï¼Œæ±‚å„ä¸ªç‚¹çš„è§’åº¦ * @param &#123;*&#125; A * @param &#123;*&#125; B * @param &#123;*&#125; C * @param &#123;String&#125; pos * @returns */export function calc3DAngle(A, B, C, pos = &quot;A&quot;) &#123; // ä¸‰è§’å½¢æ¯æ¡è¾¹çš„é•¿åº¦ const a = calc3DPointDist(B.x, B.y, B.z, C.x, C.y, C.z); const b = calc3DPointDist(A.x, A.y, A.z, C.x, C.y, C.z); const c = calc3DPointDist(A.x, A.y, A.z, B.x, B.y, B.z); // ...&#125; å°†ä¸Šé¢çš„ä½™å¼¦å®šç†ç»§ç»­æ¨å¯¼ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°æ¯ä¸ªè§’åº¦çš„cosè®¡ç®—å…¬å¼ï¼š å†åˆ©ç”¨Math.acosï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ABCä¸‰ä¸ªè§’çš„è§’åº¦ï¼›å†é€šè¿‡ä¼ å…¥çš„å‚æ•°posï¼Œç›´æ¥å¾—åˆ°æˆ‘ä»¬æƒ³è¦è§’çš„è§’åº¦ï¼š 123456789101112export function calc3DAngle(A, B, C, pos = &quot;A&quot;) &#123; // çœç•¥ä¸Šé¢aã€bã€cçš„è®¡ç®— let cosA = Math.acos((b * b + c * c - a * a) / (b * c * 2)); let cosB = Math.acos((a * a + c * c - b * b) / (a * c * 2)); let cosC = Math.acos((a * a + b * b - c * c) / (a * b * 2)); return &#123; A: (cosA * 180) / Math.PI, B: (cosB * 180) / Math.PI, C: (cosC * 180) / Math.PI, &#125;[pos];&#125; clampå‡½æ•° clampå‡½æ•°å¾ˆå¤šåŒå­¦å¯èƒ½éƒ½æ²¡ç”¨è¿‡ï¼Œä¸€èˆ¬åœ¨c++æˆ–è€…pythonä¸­ç”¨çš„æ¯”è¾ƒå¤šï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼›å®ƒéœ€è¦ä¼ å…¥ä¸‰ä¸ªå€¼ï¼š 123function clamp(num, min, max) &#123; // ...&#125; ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä»£è¡¨å¦‚ä¸‹å«ä¹‰ï¼š numï¼šéœ€è¦åˆ¤æ–­çš„æ•°å€¼ã€‚ minï¼šèŒƒå›´çš„æœ€å°å€¼ã€‚ maxï¼šèŒƒå›´çš„æœ€å¤§å€¼ã€‚ ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¸¾å‡ ä¸ªä¾‹å­ğŸŒ°æ¥ç®€å•çœ‹ä¸‹ï¼š 12345678910// è¿”å›10ï¼Œå°äºæœ€å°å€¼ï¼Œè¿”å›æœ€å°å€¼clamp(5, 10, 20)// è¿”å›16ï¼Œåœ¨è¿”å›å†…ï¼Œè¿”å›åŸå€¼clamp(16, 10, 20)// è¿”å›20ï¼Œè¶…å‡ºæœ€å¤§å€¼ï¼Œè¿”å›æœ€å¤§å€¼clamp(36, 10, 20) é€šè¿‡ä¸‰ä¸ªdemoï¼Œç›¸ä¿¡å¤§å®¶å°±èƒ½ç†è§£è¿™ä¸ªå‡½æ•°çš„ä½œç”¨äº†ï¼Œå‡½æ•°çš„å®ç°å…¶å®ä¹Ÿéå¸¸ç®€å•ï¼š 123function clamp(num, min, max) &#123; return Math.min(Math.max(num, min), max);&#125; æ˜¾ç¤ºè¿˜æ˜¯éšè—æ ‡ç­¾ å¯¹ä¸Šé¢ä¸¤ä¸ªå‡½æ•°ç†è§£åï¼Œæˆ‘ä»¬å°±å¯ä»¥å›åˆ°åœ°çƒä¸Šåæ ‡çš„å¤„ç†äº†ï¼›æˆ‘ä»¬åœ¨threejsæ¯æ¬¡renderçš„æ—¶å€™å¾ªç¯tagsListï¼š 123456789101112&#123; render() &#123; // å½“å‰æ‘„åƒå¤´çš„ä½ç½® const cameraPos = this.camera.position; if (this.tagsList &amp;&amp; this.tagsList.length) &#123; this.tagsList.map((tag) =&gt; &#123; const &#123; position, element &#125; = tag; &#125;); &#125; &#125;&#125; é¦–å…ˆæˆ‘ä»¬å°†tagæ‰“å°å‡ºæ¥çœ‹ä¸‹ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªå±æ€§positionå’Œelementï¼Œæ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼›positionå±æ€§æ˜¯ä¸€ä¸ªVector3ç±»å‹ï¼Œè¡¨ç¤ºtagå½“å‰çš„ä½ç½®ä¿¡æ¯ï¼Œelementå±æ€§æ˜¯ä¸€ä¸ªdomèŠ‚ç‚¹ï¼Œè¡¨ç¤ºæ ‡ç­¾å¯¹åº”çš„domå…ƒç´ ã€‚ æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ä¸­ï¼Œæˆ‘ä»¬çš„ç›¸æœºä½ç½®Cameraä¸€ç›´åœ¨æ—‹è½¬çš„ï¼Œå› ä¸ºè®¾ç½®äº†autoRotateè‡ªåŠ¨æ—‹è½¬ï¼›è€Œæ ‡ç­¾çš„ä½ç½®positionæ˜¯å›ºå®šçš„ï¼›å› æ­¤è¿™ä¸¤ä¸ªç‚¹å’ŒåŸç‚¹ä¹‹é—´å°±å½¢æˆäº†ä¸€ä¸ªç‰¹æ®Šçš„ä¸‰è§’å½¢ï¼š ä¸´ç•Œæƒ…å†µå°±æ˜¯ä»¥åŸç‚¹ä¸ºé¡¶ç‚¹çš„è§’æ­£å¥½æ˜¯90åº¦ï¼Œæ­¤æ—¶æˆ‘ä»¬åˆšåˆšèƒ½çœ‹åˆ°æ ‡ç­¾ï¼›å½“ç›¸æœºä½ç½®ä¸æ–­æ—‹è½¬æ—¶ï¼Œå¦‚æœå°äº90åº¦ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥çœ‹åˆ°æ ‡ç­¾çš„ï¼›ä½†æ˜¯å¦‚æœå¤§äº90åº¦ï¼Œæ ‡ç­¾å·²ç»åˆ°äº†çƒä½“çš„åé¢äº†ã€‚ 1234567const originPoint = new Vector3(0, 0, 0)this.tagsList.map((tag) =&gt; &#123; const &#123; position &#125; = tag; // ä»¥åŸç‚¹ä¸ºé¡¶ç‚¹çš„è§’åº¦ const ang = calc3DAngle(cameraPos, originPoint, position, &quot;B&quot;); // çœç•¥å…¶ä»–&#125;); è¿™é‡Œä¼ å…¥çš„é¡ºåºæ— æ‰€è°“ï¼Œæˆ‘ä»¬åªè¦è®¡ç®—ä»¥åŸç‚¹ä¸ºé¡¶ç‚¹çš„è§’åº¦å³å¯ã€‚ åˆ©ç”¨ä¸Šé¢çš„calc3DAngleå‡½æ•°ï¼Œæˆ‘ä»¬å°†ä¸‰ä¸ªä½ç½®ä¼ å…¥ï¼Œå°±å¯ä»¥å¾ˆè½»æ¾çš„å¾—åˆ°è§’åº¦angï¼›æœ‰äº†è¿™ä¸ªè§’åº¦ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—æ ‡ç­¾çš„é€æ˜åº¦äº†ï¼›æˆ‘ä»¬ä¸Šé¢æåˆ°äº†ï¼Œé€æ˜åº¦çš„ä¸´ç•Œå€¼å°±æ˜¯90åº¦ï¼Œä½†æ˜¯å®é™…ä¸Šç”±äºè§†è§’å’Œçƒä½“çš„ç¼˜æ•…ï¼Œè¿™ä¸ªè§’åº¦ä¸æ˜¯å¾ˆå‡†ç¡®ï¼Œç¬”è€…æµ‹è¯•ä¹‹åå¤§æ¦‚æ˜¯åœ¨85åº¦å·¦å³ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬çš„æ ‡ç­¾ä¹Ÿå¹¶ä¸æ˜¯ä¸€ä¸‹å­é€æ˜åº¦å°±ä»1å˜åˆ°0çš„ï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒä¸€ä¸ªç¼“å†²èŒƒå›´ï¼Œè®©å®ƒä¹Ÿç¼“ç¼“ï¼Œåœ¨è¿™ä¸ªèŒƒå›´å†…ä¼šè¿›è¡Œå˜åŒ–ï¼›è¿™ä¸ªèŒƒå›´å¤§è‡´å°±æ˜¯ä»80åº¦åˆ°85åº¦ä¹‹é—´ï¼Œé€æ˜åº¦ä¼šä»1åˆ°0é€æ¸çš„å˜åŒ–ã€‚ çœ‹åˆ°è¿™æ ·çš„æ˜ å°„å…³ç³»å›¾ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»çŒœåˆ°äº†ï¼Œæ²¡é”™ï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°æˆ‘ä»¬ä¸Šé¢ä»‹ç»çš„clampå‡½æ•°äº†ï¼Œæˆ‘ä»¬å°†è§’åº¦angå¤¹åˆ°80åˆ°85ä¹‹é—´ï¼Œç„¶åä½¿ç”¨scaleå‡½æ•°è¿›è¡Œæ˜ å°„åå°±å¾—åˆ°äº†æˆ‘ä»¬çš„é€æ˜åº¦opacityï¼Œç»™elementå…ƒç´ çš„æ ·å¼èµ‹å€¼å³å¯ï¼š 1234567891011121314151617181920/** * æ˜ å°„èŒƒå›´ * @param &#123;Number&#125; number éœ€è¦æ˜ å°„çš„æ•°å€¼ * @param &#123;Number&#125; inMin æ˜ å°„å…¥å£çš„æœ€å° * @param &#123;Number&#125; inMax æ˜ å°„å…¥å£çš„æœ€å¤§ * @param &#123;Number&#125; outMin æ˜ å°„å‡ºå£çš„æœ€å° * @param &#123;Number&#125; outMax æ˜ å°„å‡ºå£çš„æœ€å¤§ */export function scale(number, inMin, inMax, outMin, outMax) &#123; return ((number - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;&#125;const ANG1 = 80;const ANG2 = 85;this.tagsList.map((tag) =&gt; &#123; // çœç•¥å…¶ä»–ä»£ç  const opacity = scale(clamp(ang, ANG1, ANG2), ANG1, ANG2, 1, 0); tag.element.style.opacity = opacity;&#125;); è¿™æ ·æˆ‘ä»¬çš„æ ‡ç­¾å°±å®ç°äº†ä¸€ä¸ªè¿‡æ¸¡å˜åŒ–ï¼›æœ€åï¼Œåœ¨vueé¡µé¢å¸è½½ä¹‹åï¼Œåˆ«å¿˜è®°è¿˜éœ€è¦å°†CSS2DRendereræ¸²æŸ“å™¨çš„domèŠ‚ç‚¹åˆ é™¤ï¼Œå¦åˆ™ä¼šå¯¼è‡´é¡µé¢ä¼šæœ‰é—®é¢˜ï¼š 1234567&#123; beforeDestroy() &#123; if (this.labelRenderer) &#123; document.body.removeChild(this.labelRenderer.domElement); &#125; &#125;&#125; æˆ‘ä»¬æ¥çœ‹ä¸‹å®ç°çš„æ•ˆæœï¼Œè·ŸåŸé¡µé¢çš„æ•ˆæœå·²ç»ååˆ†æ¥è¿‘äº†ï¼š æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€å…¨çƒåæ ‡åˆ†å¸ƒã€‘å³å¯è·å–ã€‚ æ€»ç»“ æˆ‘ä»¬å‘ç°å¾ˆå¤š3Dåœºæ™¯ä¸‹çš„é—®é¢˜ï¼Œå…¶æœ¬è´¨éƒ½æ˜¯ä¸€ä¸ªä¸ªæ•°å­¦é—®é¢˜ï¼›æœ¬æ–‡æˆ‘ä»¬ç ”ç©¶äº†çƒä½“å’Œç»çº¬åº¦è½¬æ¢å‡½æ•°ã€ä¸‰ä¸ªç‚¹ä¹‹é—´çš„è§’åº¦è®¡ç®—å‡½æ•°ï¼Œè¿™ä¸¤ä¸ªé—®é¢˜æ— ä¸è€ƒéªŒç€æˆ‘ä»¬çš„æ•°å­¦æ¨ç†èƒ½åŠ›ï¼›ç¬”è€…ç”šè‡³å‘ç°ï¼Œåœ¨å®Œæˆè¿™ä¸ªæ¡ˆä¾‹çš„è¿‡ç¨‹ä¸­ï¼Œå­¦ä¹ çš„æ•°å­¦çŸ¥è¯†ï¼Œç”šè‡³æ¯”å†™ä»£ç çš„æ—¶é—´æ›´é•¿ã€æ›´è´¹æ—¶é—´ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"ç©¿è¶Šé˜²ç«å¢™çš„ç§˜ç±ï¼Œæ‰“é€ ä¸ªäººä¸“å±å†…ç½‘ç©¿é€ç½‘ç»œ","date":"2024-12-02T14:09:54.000Z","path":"2024/12/02/Zerotier.html","text":"ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº†ä¸€æ¬¾é«˜æ€§èƒ½ã€å¼€æºçš„å†…ç½‘ç©¿é€å·¥å…·FRPï¼Œä½†æ˜¯å¯¹äºå¾ˆå¤šå°ç™½ç”¨æˆ·æ¥è¯´ï¼Œä¸Šæ‰‹çš„æˆæœ¬æ¯”è¾ƒé«˜ï¼Œæ—¢è¦é…ç½®æœåŠ¡ç«¯åˆéœ€è¦å®¢æˆ·ç«¯ï¼Œè¿˜éœ€è¦å„ç§é…ç½®æ–‡ä»¶ï¼›å› æ­¤æœ¬æ–‡ç»™å¤§å®¶å¸¦æ¥ä¸€æ¬¾æ–°çš„å†…ç½‘ç©¿é€ç»„ç½‘å·¥å…·Zerotierï¼Œäº”åˆ†é’Ÿè®©å¤§å®¶æ›´è½»æ¾çš„å®ç°æ‘¸é±¼ï¼›æœ€ååˆ†äº«æ­å»ºè‡ªå·±çš„æœåŠ¡å™¨è¿›è¡Œç§æœ‰åŒ–éƒ¨ç½²æ•™ç¨‹ï¼Œæ‹’ç»æ‘¸é±¼ä¸­æœ‰ä»»ä½•çš„å»¶è¿Ÿã€‚ ç»å¸¸ææ‰“æ´ç©¿é€çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼ŒFRPæ˜¯ä¸€ä¸ªç©¿é€å·¥å…·ï¼Œæ˜¯ä¸“é—¨ç”¨æ¥ç©¿é€åˆ°å†…ç½‘çš„ï¼Œå®ç°ç‚¹å¯¹ç‚¹ã€è®¾å¤‡åˆ°è®¾å¤‡çš„ç©¿é€åŠŸèƒ½ï¼›è€Œè¿™æ¬¡ä»‹ç»çš„Zerotieråˆ™åŠ äº†ä¸€ä¸ªç»„ç½‘çš„å…³é”®è¯ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ç»„ç½‘å‘¢ï¼Ÿå®ƒæ˜¯å¦‚ä½•æ¥ç»„ç½‘çš„å‘¢ï¼Ÿ æ‰€è°“çš„ç»„ç½‘ï¼Œå…¶å®å°±æ˜¯æ„å»ºäº†ä¸€ä¸ªè™šæ‹Ÿå±€åŸŸç½‘ï¼Œç®€å•æ¥è¯´å°±æ˜¯å°†å¤„äºå¼‚åœ°ä¸åŒç½‘ç»œä¸­çš„è®¾å¤‡ï¼Œè·¨ç½‘ç»œç»„å»ºåœ¨åŒä¸€ä¸ªè™šæ‹Ÿå±€åŸŸç½‘ä¸­ï¼Œä»è€Œå®ç°åŸºäºå†…ç½‘IPçš„è®¾å¤‡é—´çš„äº’ç›¸è®¿é—®ã€‚ è¿™ä¹ˆè¯´èµ·æ¥æœ‰ç‚¹æ¯ç‡¥æ— èŠï¼Œå¦‚æœæˆ‘ä»¬è£…äº†Zerotierä¹‹åæ‰“å¼€ç”µè„‘çš„ç½‘ç»œè¿æ¥ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ–°çš„è™šæ‹Ÿç½‘ç»œï¼š è¿™é‡Œæˆ‘ä»¬å°±çœ‹åˆ°å®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç½‘ç»œZerotier Oneï¼Œä¸è¿‡è¿™ä¸ªç½‘ç»œåœ¨ç‰©ç†ä¸Šå¹¶ä¸å­˜åœ¨ï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸€å¼ ç½‘å¡ä¹Ÿä¸æ˜¯ä¸€æ ¹ç½‘çº¿è¿æ¥çš„ï¼Œåªæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„ç½‘ç»œï¼›åŒæ—¶ä½ å¯ä»¥å°†ä¸åŒçš„è®¾å¤‡ï¼ˆæ¯”å¦‚padã€phoneç­‰ï¼‰éƒ½å®‰è£…è½¯ä»¶åï¼Œæ·»åŠ åˆ°è¿™ä¸ªå±€åŸŸç½‘ï¼Œé€šè¿‡IPçš„æ–¹å¼äº’ç›¸è®¿é—®ï¼Œä¸‹å›¾æ˜¯ç»„ç½‘ç¤ºæ„å›¾ï¼š å› æ­¤æˆ‘ä»¬å‘ç°Zerotierçš„å†…ç½‘ç©¿é€æ–¹å¼å’ŒFRPæœ‰ç€æœ¬è´¨çš„ä¸åŒï¼ŒFRPä¾èµ–äºå…¬ç½‘IPï¼Œå¯¹å•ä¸ªè®¾å¤‡ç‰¹å®šç«¯å£å·è¿›è¡Œéš§é“ç©¿é€ï¼Œé€‚åˆéƒ¨ç½²ç½‘ç«™æœåŠ¡ã€sshè¿æ¥ç­‰å°‘é‡å›ºå®šç«¯å£çš„åŠå…¬ç¯å¢ƒï¼›è€ŒZerotieré€‚åˆå¤šè®¾å¤‡é—´å¤šç«¯å£å·ä¹‹é—´ç»„ç½‘ï¼Œå¸¸è§çš„æƒ…å†µä¾‹å¦‚è®¿é—®å®¶é‡Œçš„nasè®¾å¤‡ï¼ŒåŒæ—¶æˆ‘ä»¬åœ¨nasä¸Šè¿è¡Œäº†å¤šä¸ªæœåŠ¡ï¼Œéœ€è¦å¼€æ”¾å¤šä¸ªç«¯å£ï¼Œè¿™ä¸ªæ—¶å€™é€šè¿‡Zerotierå°±å¯ä»¥è®©æˆ‘ä»¬åœ¨å¼‚åœ°é€šè¿‡æ‰‹æœºã€ç”µè„‘ç­‰å¤šç§è®¾å¤‡éƒ½èƒ½å¤Ÿè®¿é—®åˆ°nasä¸­çš„æœåŠ¡ã€‚ åŒæ—¶Zerotieræ²¡æœ‰ç›´æ¥æš´éœ²å†…ç½‘è®¾å¤‡çš„ç«¯å£ï¼Œé¿å…äº†è®¾å¤‡è¢«å¤§é‡ç½‘ç»œæ‰«æåˆ°ï¼Œæ›´ç±»ä¼¼FRPçš„stcpæ¨¡å¼ã€‚ å¥½äº†ï¼Œè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ä¸‹é¢å°±æ¥çœ‹ä¸‹å®ƒæ˜¯å¦‚ä½•å®‰è£…é…ç½®çš„ã€‚ å®¢æˆ·ç«¯å®‰è£…é…ç½® Zerotieræ”¯æŒå¤šç§å®¢æˆ·ç«¯çš„æ¥å…¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®ƒçš„å®˜ç½‘ä¸‹è½½é¡µé¢ï¼Œæ‰¾åˆ°å¸¸è§çš„Windowsã€MacOSã€Linuxä¸‹è½½è½¯ä»¶ï¼Œè¿˜æœ‰ä¸å¸¸è§çš„å¦‚OpenWRTç³»ç»Ÿã€FreeNASå’Œç¾¤æ™–ç­‰ä¸åŒçš„nasç³»ç»Ÿï¼›ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹å‡ ç§å¸¸ç”¨ç³»ç»Ÿæ˜¯å¦‚ä½•æ¥å®‰è£…çš„ã€‚ ç¬”è€…å°†æœ¬æ–‡æ‰€æœ‰çš„å®‰è£…è½¯ä»¶éƒ½æ•´ç†ä¸Šä¼ äº†ï¼Œéœ€è¦çš„ç›´æ¥è·³è½¬åˆ°æ–‡æœ«è‡ªå–ã€‚ Windowsç¯å¢ƒ é¦–å…ˆæˆ‘ä»¬éœ€è¦å»å®˜ç½‘æ³¨å†Œå¼€é€šä¸€ä¸ªå…è´¹çš„ç½‘ç»œNetworkï¼Œæ‰“å¼€å®˜ç½‘æ³¨å†Œåœ°å€ï¼Œç‚¹å‡»SIGN UPï¼Œå¡«å†™ä¸€ç³»åˆ—ä¿¡æ¯åï¼Œé‡æ–°ç™»å½•è¿›å»ï¼Œåˆ°æˆ‘ä»¬çš„ç½‘ç»œé¡µé¢ï¼›ç‚¹å‡»Create A Networkå°±å¯ä»¥æ–°å»ºç½‘ç»œï¼š åœ¨ç½‘ç»œé¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰å¤šå°‘ç½‘ç»œå’Œå¤šå°‘è®¾å¤‡ï¼Œå¦‚æœæ˜¯å…è´¹ç”¨æˆ·çš„è¯æœ€å¤šåªèƒ½åˆ›å»º3ä¸ªç½‘ç»œå’Œè¿æ¥10ä¸ªè®¾å¤‡ï¼›è®°ä½æˆ‘ä»¬æ–°åˆ›å»ºç½‘ç»œçš„IDï¼Œä¸‹é¢éœ€è¦ç”¨åˆ°ã€‚ ç„¶åä¸‹è½½æˆ‘ä»¬ZeroTierOne.msiçš„å®‰è£…åŒ…ï¼ŒåŒå‡»å®‰è£…åæˆ‘ä»¬æ¡Œé¢å³ä¸‹è§’å°±ä¼šå‡ºç°Zerotierå›¾æ ‡ï¼Œå³å‡»å‡ºç°ä¸€ä¸ªæ“ä½œæ¡†ï¼š ç‚¹å‡»Join New Networkï¼Œå‡ºç°ä¸€ä¸ªå¼¹æ¡†ï¼Œå°†æˆ‘ä»¬ä¸Šé¢çš„ç½‘ç»œçš„IDå¤åˆ¶ç²˜è´´è¿›å»ï¼Œè¿™æ ·æˆ‘ä»¬å°±åŠ å…¥è¿™ä¸ªç½‘ç»œäº†ï¼›ä½†æ˜¯åŠ å…¥ç½‘ç»œåè¿˜éœ€è¦å¯¹è¯¥è®¾å¤‡è¿›è¡Œè®¤è¯ï¼Œæˆ‘ä»¬ç‚¹å‡»ç½‘ç»œè¯¦æƒ…é¡µé¢ï¼Œæ‰¾åˆ°è¯¥è®¾å¤‡ä¸­EditæŒ‰é’®ï¼Œåœ¨å‡ºç°çš„å¼¹æ¡†æœ€ä¸Šé¢ç‚¹å‡»Authorizedï¼Œç„¶åç‚¹å‡»Saveå³å¯ã€‚ è¿™æ ·æˆ‘ä»¬çš„è®¾å¤‡å°±è®¤è¯é€šè¿‡äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Managed IPsåˆ†é…çš„IPè®¿é—®åˆ°è¯¥è®¾å¤‡ä¸‹çš„æœåŠ¡ã€‚ Linuxç¯å¢ƒ Linuxä¸‹å®‰è£…Zerotieråˆ™ç›¸å¯¹å®¹æ˜“ï¼ŒZerotieræä¾›äº†ä¸€é”®å®‰è£…çš„è„šæœ¬ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨Linuxç¯å¢ƒä¸‹è¾“å…¥å¦‚ä¸‹çš„å‘½ä»¤å³å¯ï¼š 1curl -s https://install.zerotier.com | sudo bash æœ€åçœ‹åˆ°å¦‚ä¸‹çš„æç¤ºå°±å®‰è£…æˆåŠŸäº†ã€‚ 1Success! You are ZeroTier address æˆ‘ä»¬ä¹Ÿéœ€è¦é€šè¿‡å‘½ä»¤åŠ å…¥ç½‘ç»œï¼š 1sudo zerotier-cli join &lt;NETWORK ID&gt; çœ‹åˆ°å¦‚ä¸‹åŠ å…¥æˆåŠŸçš„æç¤ºå³å¯ï¼š 1200 join OK åŠ å…¥æˆåŠŸåä¹Ÿéœ€è¦å¯¹è®¾å¤‡è¿›è¡Œè®¤è¯ã€‚ è¿˜æœ‰ä¸€äº›nasè®¾å¤‡ä¼šè‡ªå¸¦çš„ZeroTieræ’ä»¶ï¼Œæˆ‘ä»¬åˆ‡åˆ°è®¾å¤‡é¢æ¿ï¼Œç„¶åè¾“å…¥ç½‘ç»œIDï¼Œç‚¹å‡»å¯ç”¨æŒ‰é’®ï¼Œå³å¯å®ç°nasè®¾å¤‡çš„æ¥å…¥ç½‘ç»œï¼›æ¯”å¦‚ä¸‹é¢å°±æ˜¯ç¬”è€…å®¶ä¸­çš„ä¸€å°å®‰è£…iStoreçš„nasè®¾å¤‡çš„é…ç½®ç•Œé¢ï¼š è¿˜æœ‰Macoså’Œå®‰å“ç¯å¢ƒçš„å®‰è£…ä¹Ÿéƒ½å¾ˆç®€å•ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ã€‚ è‡ªå»ºplanetæœåŠ¡å™¨ æˆ‘ä»¬ä¸Šé¢åˆ›å»ºå’ŒåŠ å…¥çš„ç½‘ç»œéƒ½æ˜¯å®˜æ–¹çš„ï¼Œä½†æ˜¯ç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå®˜æ–¹çš„ç½‘ç»œå»¶è¿Ÿæ¯”è¾ƒå¤§ï¼Œä½¿ç”¨èµ·æ¥ä½“éªŒå¯èƒ½ä¸æ˜¯å¾ˆå‹å¥½ï¼›å› æ­¤æœ‰è‡ªå·±æœåŠ¡å™¨å¹¶ä¸”å¯¹å»¶è¿Ÿè¦æ±‚æ¯”è¾ƒé«˜çš„å°ä¼™ä¼´å°±å¯ä»¥æ„‰å¿«çš„æ­å»ºç§æœ‰æœåŠ¡å™¨è¿›è¡Œç©è€äº†ã€‚ è¿™é‡Œæ¨èä¸€ä¸‹ç¬”è€…ç›®å‰åœ¨ç”¨çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œä¸“é—¨ç”¨æ¥éƒ¨ç½²æˆ‘è‡ªå·±çš„planetæœåŠ¡å™¨ï¼›æ»‘åˆ°ä¸‹é¢æ‰¾åˆ°99æœˆä¸€å¹´çš„ECSå®ä¾‹æœåŠ¡å™¨è´­ä¹°ï¼Œå®ƒä¸ä»…æ€§ä»·æ¯”æé«˜ï¼Œè€Œä¸”æ€§èƒ½ç¨³å®šå¯é ï¼Œå®Œå…¨èƒ½å¤Ÿæ»¡è¶³ä¸ªäººå’Œå°å‹ä¼ä¸šçš„æ—¥å¸¸éœ€æ±‚ï¼›æ— è®ºä½ æ˜¯æƒ³è¦æ­å»ºä¸ªäººç½‘ç«™ã€è¿›è¡Œå°å‹é¡¹ç›®å¼€å‘ï¼Œè¿˜æ˜¯ä½œä¸ºå­¦ä¹ å®è·µçš„å¹³å°ï¼Œè¿™æ¬¾æœåŠ¡å™¨éƒ½æ˜¯ä¸€ä¸ªç»ä½³çš„é€‰æ‹©ï¼›ç¬”è€…éƒ½å·²ç»ç»­è´¹åˆ°26å¹´äº†ï¼Œè¿™æ ·çš„ç¾Šæ¯›ä¸è–…æ›´å¾…ä½•æ—¶ã€‚ é™¤äº†æœåŠ¡å™¨ä¹‹å¤–ï¼Œè¿™é‡Œéœ€è¦ç”¨åˆ°ä¸€ä¸ªå¼€æºçš„ä»“åº“ï¼šdocker-zerotier-planetï¼Œæˆ‘ä»¬å°†å…¶å…‹éš†åˆ°æœåŠ¡å™¨ååæ‰§è¡Œéƒ¨ç½²çš„è„šæœ¬ï¼š 12345git clone https://github.com/xubiaolin/docker-zerotier-planetcd docker-zerotier-planet/./deploy.sh éƒ¨ç½²æˆåŠŸåï¼Œæˆ‘ä»¬éœ€è¦å»å¼€æ”¾ç«¯å£ï¼Œå¼€æ”¾9994/tcpã€9994/udpã€3443/tcpã€3000/tcp4ä¸ªç«¯å£ï¼›ç„¶åè®¿é—®http://[å…¬ç½‘ip]:3443ï¼Œè¿›å…¥æ§åˆ¶é¡µé¢ï¼Œé»˜è®¤è´¦å·/å¯†ç ä¸ºï¼šadmin/passwordï¼Œä¿®æ”¹åˆå§‹å¯†ç ã€‚ ç„¶åå†æ¬¡ç™»å½•ï¼Œç‚¹å‡»Add Networkï¼Œç„¶åè¾“å…¥ç½‘ç»œåç§°ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œï¼Œè¿™é‡Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªç½‘ç»œçš„idï¼š é€‰ä¸­easy setupï¼Œè¾“å…¥é»˜è®¤çš„ipåœ°å€èŒƒå›´ï¼Œæäº¤å³å¯ï¼š åˆ›å»ºç½‘ç»œåï¼Œå¯¹äºæˆ‘ä»¬åŠ å…¥ç½‘ç»œçš„è®¾å¤‡ï¼Œå‹¾é€‰Authorizedé€‰é¡¹æ¡†å³å¯é€šè¿‡è®¤è¯ï¼š ä¸Šé¢è„šæœ¬è¿è¡ŒæˆåŠŸåï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°åœ¨./data/zerotier/distç›®å½•ä¸‹ç”Ÿæˆplanetå’Œmooné…ç½®æ–‡ä»¶ï¼Œä¿å­˜è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼Œåé¢éœ€è¦è¿›è¡Œæ›¿æ¢æ“ä½œã€‚ æ›¿æ¢æ–‡ä»¶ æˆ‘ä»¬æœåŠ¡å™¨å®‰è£…å¥½åï¼Œè¿˜éœ€è¦å¯¹ä¸åŒå®¢æˆ·ç«¯è¿›è¡Œé…ç½®æ–‡ä»¶æ›¿æ¢ï¼Œå°†å®¢æˆ·ç«¯ä¸­çš„é…ç½®æ›¿æ¢æˆæˆ‘ä»¬ä¸Šé¢æœåŠ¡ç”Ÿæˆçš„é…ç½®æ–‡ä»¶ï¼›åœ¨Windowsä¸­ï¼Œå°†plantæ–‡ä»¶è¦†ç›–ç²˜è´´åˆ°C:\\ProgramData\\ZeroTier\\Oneç›®å½•ä¸‹ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒProgramDataç›®å½•æ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ï¼Œéœ€è¦å…è®¸æŸ¥çœ‹éšè—ç›®å½•æ‰å¯æ‰“å¼€ã€‚ æ›¿æ¢åéœ€è¦é‡å¯ZeroTierã€‚ å¯¹äºLinuxç¯å¢ƒï¼Œæ‰§è¡Œwgetå‘½ä»¤è¦†ç›–plantæ–‡ä»¶ï¼Œç„¶åé‡å¯ç½‘ç»œå³å¯ï¼š 123cd /var/lib/zerotier-onesudo wget -O planet http://[your ip]:3000/planet?key=[your key]sudo service zerotier-one restart å®‰å“å®¢æˆ·ç«¯ å¯¹äºå®‰å“å®¢æˆ·ç«¯ï¼Œè‡ªå»ºæœåŠ¡å°±ä¸èƒ½ç›´æ¥ç”¨å®˜æ–¹çš„å®¢æˆ·ç«¯äº†ï¼›è¿™é‡Œæˆ‘ä»¬ä¸‹è½½ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å¼€æºå®¢æˆ·ç«¯ï¼šZerotierFix.apkï¼Œç‚¹å‡»å³ä¸Šè§’ä¸‰ä¸ªç‚¹ï¼Œç„¶åå…¥è½¨ =&gt; ä»æ–‡ä»¶å¯¼å…¥ï¼Œå¯¼å…¥ä»æœåŠ¡å™¨ä¸‹è½½çš„moonæ–‡ä»¶ï¼š å®‰å“å®¢æˆ·ç«¯çš„å®‰è£…åŒ…ç¬”è€…ä¹Ÿå·²ç»æ•´ç†å¥½äº†ï¼Œåœ¨æ–‡æœ«è‡ªå–ã€‚ å…¥è½¨åï¼Œç‚¹å‡»åº•éƒ¨çš„åŠ å·ï¼Œè¿˜æ˜¯è€æ ·å­ï¼Œè¾“å…¥ç½‘ç»œIDï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸»ç•Œé¢çœ‹åˆ°ä¸€æ¡æ–°å»ºçš„ç½‘ç»œäº†ï¼Œç‚¹å‡»å³è¾¹çš„switchå¼€å…³å³å¯å¼€å¯ç½‘ç»œï¼š æ€»ç»“ è¿™é‡Œè¿›è¡Œä¸€ä¸ªç®€å•çš„æ€»ç»“ï¼Œç¬”è€…åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä¹Ÿä½“éªŒè¿‡å¾ˆå¤šçš„å†…ç½‘ç©¿é€å·¥å…·ï¼Œæ¯å®¶çš„ç©¿é€å·¥å…·åœ¨åŠŸèƒ½å’Œä½¿ç”¨ä¸Šå„æœ‰ä¾§é‡ï¼ŒåƒåŸºäºå¼€æºFRPè¡ç”Ÿçš„ä¸»è¦å•†ä¸šåŒ–å·¥å…·ngrokã€NATAPPã€Cpolaréƒ½ä¾§é‡ç«¯å£æ˜ å°„ï¼Œåœ¨æµé‡ã€åŸŸåã€éš§é“æ¡æ•°ä¸Šè¿›è¡Œæ”¶è´¹ï¼Œæ¯”è¾ƒé€‚ç”¨äºéƒ¨ç½²ç½‘ç«™ã€æ­å»ºæœåŠ¡ç­‰åŠå…¬åœºæ™¯ä¸‹çš„åº”ç”¨ã€‚ è€Œç¬”è€…åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­ä¼šé€‰æ‹©Zerotierçš„åŸå› ï¼Œæ˜¯å› ä¸ºä½“éªŒä¸‹æ¥æ˜¯ä¸€æ¬¾éå¸¸é€‚åˆå®¶ç”¨ç»„ç½‘çš„å·¥å…·è½¯ä»¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ååˆ†æ–¹ä¾¿çš„è®¿é—®å®¶é‡Œçš„å„ç§è®¾å¤‡ï¼Œä»¥åŠè®¾å¤‡çš„ä¸åŒç«¯å£ï¼›åŒæ—¶Zerotieråœ¨è½¯ä»¶ä¸Šå¯¹äºè®¾å¤‡çš„æ”¯æŒç¨‹åº¦ä¹Ÿæ˜¯ç›¸å½“ä¸°å¯Œçš„ï¼ŒWindowsã€Linuxã€Macosã€å®‰å“å’ŒiPhoneç­‰å¸¸è§çš„ç³»ç»Ÿéƒ½èƒ½å¤Ÿæ”¯æŒåˆ°ï¼Œç”šè‡³æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°Zerotierè¿˜æ”¯æŒä¸€äº›nasç‰ˆçš„è½¯ä»¶ï¼›å› æ­¤å“ªæ€•æ˜¯åœ¨å¤–å‡ºçš„ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡èº«è¾¹çš„æ‰‹æœºæˆ–å¹³æ¿ï¼Œä¹Ÿèƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„ç©¿é€åˆ°å†…ç½‘ç¯å¢ƒã€‚ ç”šè‡³ç¬”è€…åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…VSCodeç½‘é¡µç‰ˆåï¼Œå®ç°äº†é€šè¿‡æ‰‹æœºè¿œç¨‹å›å…¬å¸æ”¹ä»£ç ã€‚ è€Œä¸”é€šè¿‡æœ¬æ–‡çš„å®‰è£…æ•™ç¨‹æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°ï¼Œåªéœ€è¦è®©è®¾å¤‡å®‰è£…è½¯ä»¶ç„¶ååŠ å…¥ç½‘ç»œå³å¯ï¼Œå®‰è£…ç»„ç½‘ååˆ†ä¾¿æ·ï¼Œè®¾å¤‡ä¼šè‡ªåŠ¨è·å–IPåœ°å€ï¼›Zerotierå®˜æ–¹åœ¨è®¾å¤‡æ•°é‡å’Œç½‘ç»œæ•°é‡ä¸Šä¹Ÿæœ‰é™åˆ¶ï¼Œä½†æ˜¯å¯¹äºæœ‰å…¬ç½‘æœåŠ¡å™¨çš„åŒå­¦æ¥è¯´ï¼Œé€šè¿‡è‡ªå»ºæœåŠ¡å™¨å¯ä»¥ç»•å¼€æ•°é‡çš„é™åˆ¶ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æå¤§é™ä½å»¶è¿Ÿã€‚ æœ¬æ–‡æ‰€æœ‰è½¯ä»¶æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€Zerotierã€‘å³å¯è·å–ã€‚","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"},{"name":"Linux","slug":"Linux","permalink":"https://xieyufei.com/tags/Linux/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"},{"name":"å¼€æº","slug":"OpenSource","permalink":"https://xieyufei.com/tags/OpenSource/"}]},{"title":"ä»Vue3æºç æ·±å…¥ç†è§£refå“åº”å¼","date":"2024-11-25T04:00:00.000Z","path":"2024/11/25/Vue3-Ref.html","text":"åœ¨Vue3ä¸­ï¼Œreactiveå’Œrefä¸¤ä¸ªå“åº”å¼APIç›¸ä¿¡å¤§å®¶ç”¨çš„éƒ½æ¯”è¾ƒç†Ÿç»ƒäº†ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨æ—¶è¿˜æœ‰ä¼—å¤šçš„å“åº”å¼APIå‡½æ•°ï¼Œæœ¬æ–‡å°±ä»æºç è§’åº¦ï¼Œæ¥çœ‹ä¸‹ä¸åŒAPIåŠå…¶å®ç°æ–¹å¼ï¼Œç›¸ä¿¡çœ‹å®Œæœ¬æ–‡ä¹‹åä¼šåŠ æ·±å¯¹Vue3å“åº”å¼çš„ç†è§£ã€‚ æˆ‘ä»¬åœ¨çœ‹æºç çš„æ—¶å€™ï¼Œç”±äºä¼—å¤šçš„å‡½æ•°å’Œç±»ï¼Œç»å¸¸ä¼šé™·å…¥è¿·èŒ«çš„çŠ¶æ€ï¼Œä¸çŸ¥é“è¿™ä¸ªç±»æˆ–è€…ç±»ä¸‹é¢æŸä¸ªå±æ€§æ˜¯åšä»€ä¹ˆç”¨çš„ï¼›è€Œä¸”éšç€ç°åœ¨vue3å½»åº•æ‹¥æŠ±Typescriptï¼Œç±»å‹çš„ä½¿ç”¨ä¹ŸåŠ å¤§äº†æˆ‘ä»¬è¯»æºç æ—¶çš„éš¾åº¦ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜éœ€è¦å¯¹tsçš„ç”¨æ³•æœ‰æ‰€äº†è§£ï¼›å› æ­¤ç¬”è€…æœ‰ä»¥ä¸‹å‡ ç‚¹å°å°çš„å»ºè®®ï¼š å‰”é™¤æ— å…³ä»£ç ï¼Œæ¯”å¦‚æ— å…³çš„ç±»å‹ç³»ç»Ÿï¼Œæ³¨é‡æ ¸å¿ƒé€»è¾‘ã€æ³¨é‡æ ¸å¿ƒé€»è¾‘ã€æ³¨é‡æ ¸å¿ƒé€»è¾‘ï¼Œé‡è¦çš„äº‹æƒ…è¯´ä¸‰éã€‚ ä¸è¦çº ç»“äºä¸€ä¸¤ä¸ªå‡½æ•°æˆ–è€…ç±»çš„åŠŸèƒ½ï¼Œéæ ¸å¿ƒçš„ä»£ç èƒ½è·³è¿‡å°±è·³è¿‡å§ã€‚ çœ‹æ³¨é‡Šï¼Œå¾ˆå¤šæ³¨é‡Šä¹Ÿä¼šå†™æ˜å‡½æ•°çš„ä½œç”¨ï¼Œå¸®åŠ©æˆ‘ä»¬ç†è§£ã€‚ çœ‹åç§°ï¼Œåç§°å¯ä»¥å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ï¼ŒåŠ ä¸Šåˆç†çš„çŒœæµ‹ï¼Œå»æ£æ‘©ä½œè€…çš„æ„å›¾ã€‚ æœ€åå®åœ¨çœ‹ä¸å‡ºæ¥ä¹ŸçŒœä¸åˆ°ï¼Œè¿˜æœ‰ä¼—å¤šå¼ºå¤§AIé—®ç­”å·¥å…·ï¼Œç”¨å¥½AIå·¥å…·ã€‚ æ¢³ç†å¥½ä¸»è¦æµç¨‹ï¼Œæœ‰æ—¶ä¸€ä¸ªå‚æ•°ä¼šæµè½¬ç»è¿‡å¾ˆå¤šçš„å‡½æ•°ï¼Œæˆ‘ä»¬å¿…é¡»æ¢³ç†å¥½æ¯ä¸ªå‡½æ•°çš„å‚æ•°ï¼Œå¯ä»¥é‡ç‚¹å…³æ³¨å‡½æ•°çš„å…¥å‚åŠå‡ºå‚ã€‚ æˆ‘ä»¬çœ‹ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ç»å¸¸éœ€è¦è·³è½¬åˆ°å¤šä¸ªä¸åŒçš„å‡½æ•°ï¼Œåœ¨ç¼–è¾‘å™¨ä¸Šå°†ä»£ç åˆ†æˆå¤šä¸ªå±æŸ¥çœ‹ï¼Œä¸€ä¸ªå±æ³¨é‡ä¸»çº¿é€»è¾‘ï¼Œå…¶ä»–å¯ä»¥çœ‹å·¥å…·å‡½æ•°ã€‚ ç»“åˆå¹³æ—¶çš„ä½¿ç”¨åœºæ™¯çœ‹ä»£ç ï¼Œå¯¹ç†è§£å‡½æ•°çš„ä½œç”¨ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ å› æ­¤æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‹é¢ä»£ç ï¼Œå¾ˆå¤šåœ°æ–¹ç¬”è€…éƒ½æ ‡æ³¨äº†çœç•¥éƒ¨åˆ†ä»£ç ï¼Œåªè´´äº†é‡ç‚¹çš„ä»£ç å‡ºæ¥ï¼›å¸¦ç€ä¸‹é¢çš„ç–‘é—®æˆ‘ä»¬æ¥çœ‹æºç ï¼š ç¼–è¯‘å’Œè¿è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ reactiveå’Œrefæœ‰ä»€ä¹ˆå…³ç³»å’ŒåŒºåˆ«ï¼Ÿ å“åº”æ”¶é›†æ˜¯æ€ä¹ˆåšçš„ï¼Ÿ æœ¬æ–‡åº”è¯¥æ˜¯å…¨ç½‘æœ€æ·±å…¥çš„å¯¹refæºç è§£è¯»ï¼Œæ–‡ç« å†…å®¹è¾ƒé•¿ï¼Œè§‰å¾—æœ‰æ‰€æ”¶è·çš„è®°å¾—ç‚¹èµå…³æ³¨æ”¶è—ï¼Œä¸€é”®ä¸‰è¿ã€‚ é¡¹ç›®ä»‹ç» é¦–å…ˆæˆ‘ä»¬è¦å»å­¦ä¹ æºç ï¼Œå°±è¦å¯¹æ•´ä¸ªé¡¹ç›®æœ‰ä¸€ä¸ªåŸºæœ¬äº†è§£ï¼Œäº†è§£æ¯ä¸ªæ¨¡å—ã€æ¯ä¸ªç›®å½•çš„ä½œç”¨ï¼Œè¿™æ ·å¯¹æˆ‘ä»¬åæœŸé˜…è¯»æºç ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ï¼›æˆ‘ä»¬å°†é¡¹ç›®ä»Githubä¸Šå…‹éš†ä¸‹æ¥ï¼š 1git clone https://github.com/vuejs/core.git vue3-core å¦‚æœå› ä¸ºç½‘ç»œé—®é¢˜å…‹éš†ä¸ä¸‹æ¥ï¼Œç›´æ¥è·³è½¬æ–‡æœ«è·å–Vue3çš„æºç ï¼›ç¬”è€…å…‹éš†ä¸‹æ¥æ—¶ï¼Œå½“å‰ç‰ˆæœ¬å·ä¸º3.5.12ã€‚ æˆ‘ä»¬çœ‹åˆ°æ•´ä¸ªé¡¹ç›®çš„ç›®å½•è¿˜æ˜¯éå¸¸å¤šçš„ï¼Œåˆæœ‰ç¼–è¯‘æ—¶ï¼Œåˆæœ‰è¿è¡Œæ—¶çš„ç›®å½•ï¼Œä¸»è¦çš„ä»£ç éƒ½å­˜æ”¾åœ¨packagesç›®å½•ï¼Œå› æ­¤æˆ‘ä»¬ä¸»è¦çœ‹ä¸‹å®ƒä¸‹é¢çš„ç›®å½•ç»“æ„ï¼š 12345678910111213141516171819changelogs/ # é¡¹ç›®çš„å˜æ›´æ—¥å¿—script/ # å­˜æ”¾æ„å»ºè„šæœ¬å’Œå…¶ä»–ä¸å¼€å‘æµç¨‹ç›¸å…³çš„è„šæœ¬ã€‚packages/ # å­˜æ”¾äº†Vue3æ ¸å¿ƒçš„å„ç§åŒ…å’Œæ¨¡å— â”œâ”€â”€ compiler-core â”œâ”€â”€ compiler-dom â”œâ”€â”€ compiler-sfc â”œâ”€â”€ compiler-ssr â”œâ”€â”€ dts-built-test â”œâ”€â”€ dts-test â”œâ”€â”€ reactivity â”œâ”€â”€ runtime-core â”œâ”€â”€ runtime-dom â”œâ”€â”€ runtime-test â”œâ”€â”€ server-renderer â”œâ”€â”€ sfc-playground â”œâ”€â”€ shared â”œâ”€â”€ template-explorer â”œâ”€â”€ vue â””â”€â”€ vue-compat ä¸Šé¢ç›®å½•ï¼Œæˆ‘ä»¬å°†å…¶å½’ç±»ä¸€ä¸‹ï¼Œä¸»è¦åˆ†ä¸ºä¸‹é¢å‡ ä¸ªéƒ¨åˆ†ï¼›é¦–å…ˆå°±æ˜¯ç¼–è¯‘å™¨ç›¸å…³çš„ç›®å½•ï¼Œä¸»è¦æ˜¯ä»¥ä¸‹å‡ ä¸ªç›®å½•ï¼š compiler-coreï¼šç¼–è¯‘æ ¸å¿ƒï¼ŒåŒ…æ‹¬æ¨¡æ¿è§£æã€ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰æ„å»ºç­‰ã€‚è¿™æ˜¯Vueæ¨¡æ¿ç¼–è¯‘çš„åŸºç¡€éƒ¨åˆ†ï¼Œä¸ä¾èµ–äºç‰¹å®šçš„å¹³å°ã€‚ compiler-domï¼šç¼–è¯‘å™¨é’ˆå¯¹æµè§ˆå™¨ç¯å¢ƒçš„ä»£ç ï¼Œä¸»è¦å¤„ç†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°çš„è¿‡ç¨‹ã€‚è¿™æ˜¯Vueåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹è¿›è¡Œæ¨¡æ¿ç¼–è¯‘çš„å…³é”®éƒ¨åˆ†ã€‚ compiler-ssrï¼šç¼–è¯‘å™¨é’ˆå¯¹æœåŠ¡ç«¯æ¸²æŸ“ç¯å¢ƒçš„ä»£ç ï¼Œä½¿å¾—Vueèƒ½å¤Ÿåœ¨æœåŠ¡ç«¯è¿›è¡Œæ¨¡æ¿ç¼–è¯‘ compiler-sfcï¼šç”¨äºè§£æ.vueå•æ–‡ä»¶ç»„ä»¶çš„ç¼–è¯‘å™¨æ¨¡å—ï¼Œå®ƒè´Ÿè´£å°†.vueæ–‡ä»¶ç¼–è¯‘æˆJavaScriptæ¨¡å—ï¼Œä»¥ä¾¿åœ¨Vueé¡¹ç›®ä¸­ä½¿ç”¨ã€‚ å…¶æ¬¡æ˜¯å“åº”å¼æ¨¡å—ç›¸å…³çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡é‡ç‚¹è®²è§£çš„ç›®å½•ï¼š reactivityï¼šå“åº”å¼ç³»ç»Ÿçš„æ ¸å¿ƒä»£ç ï¼Œè¿™æ˜¯Vue3å®ç°æ•°æ®å“åº”å¼çš„åŸºç¡€éƒ¨åˆ†ï¼Œå®ƒä½¿å¾—Vueèƒ½å¤Ÿè¿½è¸ªæ•°æ®çš„å˜åŒ–å¹¶è‡ªåŠ¨æ›´æ–°DOMã€‚ è¿˜æœ‰æ˜¯è¿è¡Œæ—¶æ¨¡å—ï¼ŒåŒ…æ‹¬å¦‚ä¸‹ç›®å½•ï¼š runtime-coreï¼šä¸å¹³å°æ— å…³çš„è¿è¡Œæ—¶æ ¸å¿ƒä»£ç ï¼ŒåŒ…æ‹¬è™šæ‹ŸDOMã€ç»„ä»¶å®ä¾‹åŒ–ç­‰ã€‚è¿™æ˜¯Vueè¿è¡Œæ—¶ç³»ç»Ÿçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå®ƒè´Ÿè´£å¤„ç†ç»„ä»¶çš„åˆ›å»ºã€æ›´æ–°å’Œé”€æ¯ç­‰ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚ runtime-domï¼šè¿è¡Œæ—¶é’ˆå¯¹æµè§ˆå™¨ç¯å¢ƒçš„ä»£ç ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹æ“ä½œã€äº‹ä»¶å¤„ç†ç­‰ã€‚è¿™éƒ¨åˆ†ä»£ç ä½¿å¾—Vueèƒ½å¤Ÿåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹è¿›è¡ŒDOMæ“ä½œï¼Œä»è€Œå®ç°å¯¹ç”¨æˆ·ç•Œé¢çš„æ›´æ–°ã€‚ runtime-testï¼šç”¨äºæµ‹è¯•çš„è¿è¡Œæ—¶ä»£ç ã€‚è¿™éƒ¨åˆ†ä»£ç ä¸»è¦ç”¨äºå¯¹Vueçš„è¿è¡Œæ—¶ç³»ç»Ÿè¿›è¡Œæµ‹è¯•ï¼Œä»¥ç¡®ä¿å…¶æ­£ç¡®æ€§å’Œç¨³å®šæ€§ã€‚ æœ€åæ˜¯ä¸€äº›å…¶ä»–åŠŸèƒ½æ¨¡å—ï¼ŒåŒ…æ‹¬ä»¥ä¸‹ç›®å½•ï¼š server-rendererï¼šVue3å•æ–‡ä»¶ç»„ä»¶playgroundï¼Œç”¨äºæµ‹è¯•å’Œæ¼”ç¤ºVueå•æ–‡ä»¶ç»„ä»¶çš„åŠŸèƒ½ã€‚ sharedï¼šåŒ…å«äº†ä¸€äº›å…¬å…±çš„å·¥å…·å‡½æ•°å’Œç±»å‹å®šä¹‰ï¼Œè¿™äº›å‡½æ•°å’Œç±»å‹å®šä¹‰è¢«å…¶ä»–æ¨¡å—å¹¿æ³›ä½¿ç”¨ã€‚ æˆ‘ä»¬å‘ç°ï¼Œå¯¹ç›®å½•çš„åŠŸèƒ½è¿›è¡Œåˆ’åˆ†åï¼Œå…¶å®åŠŸèƒ½å°±æ²¡æœ‰é‚£ä¹ˆå¤æ‚äº†ï¼›å›åˆ°ä¸Šé¢çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œç¼–è¯‘å’Œè¿è¡Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿç¼–è¯‘æ¨¡å—compileré€šå¸¸ç”¨æ¥å°†æˆ‘ä»¬ä»£ç ä¸­å†™çš„Vueæ¨¡æ¿ç¼–è¯‘æˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œæ¸²æŸ“å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯åœ¨å¼€å‘ç¯å¢ƒå’Œæ„å»ºå·¥å…·ï¼ˆWebpackã€Viteç­‰ï¼‰ä¸­è¿è¡Œã€‚ è€Œè¿è¡Œæ—¶æ¨¡å—runtimeæ˜¯å¯ä»¥ç›´æ¥åŠ è½½ï¼ˆæ¸²æŸ“å‡½æ•°ï¼‰å¹¶æ‰§è¡Œçš„ï¼Œåƒæˆ‘ä»¬å¸¸è§çš„ç»„ä»¶çš„å®ä¾‹åŒ–ã€æ¸²æŸ“ã€æ›´æ–°å’Œé”€æ¯ç­‰ç”Ÿå‘½å‘¨æœŸäº‹ä»¶éƒ½æ˜¯åœ¨è¿è¡Œæ—¶å»æ‰§è¡Œçš„ã€‚ Refæºç éƒ¨åˆ† ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹Reféƒ¨åˆ†çš„æºç ï¼Œæ‰“å¼€reactivity/src/index.tsï¼Œæˆ‘ä»¬çœ‹åˆ°ä»å„ä¸ªå“åº”å¼çš„å­æ¨¡å—ä¸­å¯¼å‡ºäº†ä¸å°‘å‡½æ•°å’Œtypeï¼š 123456789101112131415export &#123; // ...&#125; from &#x27;./ref&#x27;export &#123; // ...&#125; from &#x27;./reactive&#x27;export &#123; // ...&#125; from &#x27;./watch&#x27;export &#123; // ...&#125; from &#x27;./computed&#x27; æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šæ¨¡å—åç§°éƒ½æ˜¯æˆ‘ä»¬ç†Ÿæ‚‰çš„åŠŸèƒ½ï¼Œæ¯”å¦‚watchå’Œcomputedï¼›æˆ‘ä»¬æ‰“å¼€æœ¬èŠ‚è¦ä»‹ç»çš„reactivity/src/ref.tsï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é‡Œé¢æœ€é‡è¦çš„ä¸¤ä¸ªå‡½æ•°ï¼šrefå’ŒshallowRefã€‚ 123456789export function ref&lt;T = any&gt;(): Ref&lt;T | undefined&gt;export function ref(value?: unknown) &#123; return createRef(value, false)&#125;export function shallowRef&lt;T = any&gt;(): ShallowRef&lt;T | undefined&gt;export function shallowRef(value?: unknown) &#123; return createRef(value, true)&#125; æˆ‘ä»¬å‘ç°refå’ŒshallowReféƒ½æ¥æ”¶ä¸€ä¸ªä»»æ„å€¼anyåšå‚æ•°ï¼Œç„¶åè¿”å›Refå’ŒShallowRefçš„å¯¹è±¡ï¼Œä¸¤è€…æœ¬è´¨ä¸Šæ²¡ä»€ä¹ˆå·®åˆ«ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¸¤è€…çš„tsç±»å‹å®šä¹‰ï¼š 1234567891011declare const RefSymbol: unique symbolexport interface Ref&lt;T = any, S = T&gt; &#123; get value(): T set value(_: S) [RefSymbol]: true&#125;declare const ShallowRefMarker: unique symbolexport type ShallowRef&lt;T = any, S = T&gt; = Ref&lt;T, S&gt; &amp; &#123; [ShallowRefMarker]?: true&#125; æˆ‘ä»¬çœ‹åˆ°Refä¸Šåªæœ‰getterå’Œsetterä¸¤ä¸ªæ–¹æ³•ï¼Œè€ŒShallowRefæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä»Refåˆæˆè€Œæ¥ï¼Œåªæ˜¯å°†ShallowRefMarkeræ ‡è¯†ä¸ºtrueã€‚ç„¶årefå’ŒshallowReféƒ½è°ƒç”¨äº†createRefå‡½æ•°ï¼Œæˆ‘ä»¬æ‰¾åˆ°createRefå‡½æ•°çš„å®ç°ï¼š 123456function createRef(rawValue: unknown, shallow: boolean) &#123; if (isRef(rawValue)) &#123; return rawValue &#125; return new RefImpl(rawValue, shallow)&#125; è¿™é‡Œå…ˆå¯¹ä¼ å…¥å€¼è¿›è¡ŒisRefçš„åˆ¤æ–­ï¼Œåˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯refå¯¹è±¡ï¼Œåˆ¤æ–­é€»è¾‘å…¶å®ä¹Ÿéå¸¸ç®€å•ï¼Œå°±æ˜¯é€šè¿‡å¯¹è±¡ä¸Šæ˜¯å¦æœ‰ä¸€ä¸ª__v_isRefçš„æ ‡è¯†åˆ¤æ–­ï¼Œå› ä¸ºåé¢refå¯¹è±¡å¤„ç†åéƒ½ä¼šæ‰“ä¸Šè¿™ä¸ªæ ‡è¯†ï¼š 12345678export enum ReactiveFlags &#123; // ...å…¶ä»–æ ‡è¯† IS_REF = &#x27;__v_isRef&#x27;,&#125;export function isRef(r: any): r is Ref &#123; return r ? r[ReactiveFlags.IS_REF] === true : false&#125; å›åˆ°createRefå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ä¾‹åŒ–äº†RefImplç±»å¹¶ä¸”è¿”å›ï¼Œè¿™ä¸ªç±»çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç”¨æ¥åˆ›å»ºRefå¯¹è±¡ï¼›å®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯ä¼ å…¥çš„åˆå§‹å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°è¡¨æ˜æ˜¯å¦æ˜¯å¯¹è±¡æ˜¯å¦æ˜¯æµ…å±‚å“åº”shallowï¼›å¦‚æœæˆ‘ä»¬å°†refåˆ›å»ºçš„å¯¹è±¡æ‰“å°å‡ºæ¥ï¼Œå°±ä¼šå‘ç°æœ¬è´¨ä¸Šå…¶å®éƒ½æ˜¯ä»RefImplå®ä¾‹åŒ–å‡ºæ¥ï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬æºç é‡Œé¢çš„é€»è¾‘ã€‚ 12const num: Ref&lt;number&gt; = ref(2);console.log(num, &#x27;num1&#x27;); æ ¸å¿ƒç±»RefImpl __v_isRefçš„æ ‡è¯†æˆ‘ä»¬ä¸Šé¢åœ¨isRefå‡½æ•°ä¸­ä¹Ÿè¯´äº†ï¼Œåªè¦æ˜¯refåˆ›å»ºå‡ºæ¥çš„å¯¹è±¡éƒ½ä¼šæœ‰ï¼›æˆ‘ä»¬æ¥ç€çœ‹refæ ¸å¿ƒç±»RefImplçš„å®ç°ï¼š 123456789101112131415161718192021class RefImpl&lt;T = any&gt; &#123; _value: T private _rawValue: T dep: Dep = new Dep() public readonly [ReactiveFlags.IS_REF] = true public readonly [ReactiveFlags.IS_SHALLOW]: boolean = false constructor(value: T, isShallow: boolean) &#123; this._rawValue = isShallow ? value : toRaw(value) this._value = isShallow ? value : toReactive(value) this[ReactiveFlags.IS_SHALLOW] = isShallow &#125; get value() &#123; // ... &#125; set value(newValue) &#123; // ... &#125;&#125; å¸¦æœ‰ä¸‹åˆ’çº¿çš„å±æ€§ä¸€èˆ¬æ˜¯ç±»çš„ç§æœ‰å±æ€§ï¼Œä¸ä¼šå¯¹å¤–æš´éœ²ï¼Œæ¯”å¦‚_valueå’Œ_rawValueï¼Œåœ¨refå¯¹è±¡ä¸Šå°±ä¸èƒ½è¢«è®¿é—®ã€‚ åœ¨RefImplæ„é€ å‡½æ•°ä¸­ï¼Œä¸¤ä¸ªåªè¯»çš„æ ‡è¯†ç¬¦ReactiveFlags.IS_REFå’ŒReactiveFlags.IS_SHALLOWå…¶å®æ˜¯ä¸¤ä¸ªå­—ç¬¦ä¸²å˜é‡çš„æ ‡è¯†ç¬¦ï¼Œç”¨æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯Refå’Œæ˜¯å¦æ˜¯ShallowRefï¼Œè¿™é‡Œä¸å†èµ˜è¿°ï¼›depå¯¹è±¡æ˜¯ç”¨æ¥å®ç°ä¾èµ–æ”¶é›†çš„ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼šè¯´åˆ°ã€‚ è¿™é‡Œçš„_valueå­˜å‚¨çš„å…¶å®å°±æ˜¯æˆ‘ä»¬refå¯¹è±¡çš„çœŸå®å€¼ï¼ˆå“åº”åŒ–ä¹‹åçš„æ‹¦æˆªå¯¹è±¡Proxy Objectï¼‰ï¼Œæˆ‘ä»¬ä¸‹é¢é€šè¿‡getterå’Œsetterè®¿é—®å’Œä¿®æ”¹æ—¶ï¼Œå®é™…ä¸Šå°±æ˜¯æ“ä½œ_valueä¸­çš„å€¼ï¼Œå®ƒå€¼çš„å˜åŒ–è¿½è¸ªæ˜¯æ•´ä¸ªå“åº”å¼çš„æ ¸å¿ƒï¼›è€Œ_rawValueä¸­å­˜å‚¨çš„æ˜¯çœŸå®å€¼ï¼ˆæ²¡æœ‰å“åº”åŒ–çš„ï¼‰ï¼Œåœ¨ä¿®æ”¹valueçš„æ—¶å€™ç”¨æ¥è¿›è¡Œæ–°è€å€¼åˆ¤æ–­ã€‚ åœ¨_valueå€¼åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬çœ‹åˆ°å¦‚æœæ˜¯éæµ…å±‚Shallowï¼Œè¿˜è°ƒç”¨äº†toReactiveï¼Œè¿™ä¸ªå‡½æ•°å…¶å®æ˜¯æˆ‘ä»¬ä»¥åä¼šè¯´çš„reactive.tsæ–‡ä»¶ä¸­æš´éœ²å‡ºæ¥çš„ï¼Œå¦‚æœä¼ å…¥çš„åˆå§‹å€¼æ˜¯å¯¹è±¡ï¼Œè¿˜ä¼šå¯¹å…¶è¿›è¡Œæ›´æ·±å±‚æ¬¡å“åº”åŒ–çš„å¤„ç†ï¼š 123// packages/reactivity/src/ref.tsexport const toReactive = &lt;T extends unknown&gt;(value: T): T =&gt; isObject(value) ? reactive(value) : value æˆ‘ä»¬çœ‹åˆ°toReactiveä¸­å¦‚æœä¼ å…¥çš„valueæ˜¯å¯¹è±¡ç­‰å¼•ç”¨ç±»å‹ï¼Œä¼šè°ƒç”¨reactiveè¿›è¡ŒProxyæ‹¦æˆªï¼›è€Œå¦‚æœæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªæ•°å­—æˆ–è€…ä¸€ä¸ªå­—ç¬¦ä¸²ç­‰åŸºæœ¬ç±»å‹æ—¶ï¼Œè¿”å›æœ¬èº«ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥ç®€å•çš„æ€»ç»“ä¸€ä¸‹ï¼Œå¦‚æœrefæ¥æ”¶åˆ°ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œ_valueä¸­å­˜å‚¨çš„ä¹Ÿæ˜¯åŸå§‹å€¼ï¼Œæœ¬è´¨ä¸ŠåŠ«æŒçš„æ˜¯_valueçš„getterå’Œsetterå‡½æ•°æ¥å®ç°å“åº”å¼çš„ï¼›è€Œå¦‚æœrefå‡½æ•°æ¥æ”¶åˆ°å¼•ç”¨ç±»å‹ï¼Œ_valueä¸­å­˜å‚¨çš„æ˜¯è½¬åŒ–åçš„Proxy Objectä»£ç†å¯¹è±¡ï¼Œé€šè¿‡ä»£ç†å¯¹è±¡çš„å±æ€§æ¥å®ç°çš„å“åº”å¼ã€‚ getterå’Œsetterå‡½æ•° æˆ‘ä»¬æ¥ç€é€šè¿‡ä¸€ä¸ªç®€ç•¥ç‰ˆçš„ä»£ç ï¼Œæ¥çœ‹ä¸‹getterå’Œsetterä¸­å¯¹_valueå€¼æ—¶åšäº†å“ªäº›æ“ä½œï¼š 12345678910111213class RefImpl&lt;T = any&gt; &#123; // å…¶ä»–å±æ€§ get value() &#123; // çœç•¥äº†å¼€å‘è°ƒè¯•ç¯å¢ƒä¸‹çš„ä»£ç  this.dep.track() return this._value &#125; set value(newValue) &#123; // çœç•¥å…¶ä»–ä»£ç  this._value = useDirectValue ? newValue : toReactive(newValue) this.dep.trigger() &#125;&#125; é¦–å…ˆæˆ‘ä»¬è¦ç†è§£getterå’Œsetterå‡½æ•°æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨çš„ï¼Œå°±èƒ½ç†è§£å®ƒé‡Œé¢çš„æ“ä½œé€»è¾‘äº†ï¼›å½“æˆ‘ä»¬è¯»å–refå¯¹è±¡çš„.valueå±æ€§æ—¶ï¼Œgetterå‡½æ•°èµ·ä½œç”¨ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨é¡µé¢ä¸Šä½¿ç”¨æ’å€¼æ¨¡æ¿&#123;&#123; num &#125;&#125;æ—¶ï¼ˆæœ¬è´¨è°ƒç”¨äº†num.valueï¼‰ï¼Œæˆ–è€…watch(num)ç›‘å¬æ—¶ï¼Œéƒ½ä¼šè§¦å‘getterå‡½æ•°ï¼›è€Œæˆ‘ä»¬åœ¨ä¿®æ”¹å€¼num.value = 3æ—¶å°±ä¼šè§¦å‘setterå‡½æ•°ã€‚ å½“ç„¶è¿˜ä¼šæœ‰å…¶ä»–çš„è§¦å‘é€»è¾‘ï¼Œè¿™é‡Œæ˜¯åˆ—ä¸¾äº†æœ€å¸¸è§çš„ä¸€äº›æƒ…å†µã€‚ å› æ­¤ä¸Šé¢çš„ç®€ç•¥ç‰ˆçš„ä»£ç å°±å¾ˆå¥½ç†è§£äº†ï¼Œä¹Ÿå°è¯äº†æˆ‘ä»¬ä¸Šé¢çš„è¯´æ³•ï¼Œå³ï¼š_valueå­˜å‚¨çš„æ˜¯çœŸå®å€¼ï¼ˆå“åº”åŒ–ä¹‹åçš„ï¼‰ï¼Œgetterå’Œsetteræ“ä½œçš„æ˜¯_valueä¸­çš„å€¼ã€‚ é‚£ä¹ˆè¿™é‡Œçš„this.depä¹Ÿå¾ˆå¥½ç†è§£äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„å°†å…¶ç†è§£ä¸ºå†…éƒ¨å­˜å‚¨äº†ä¸€ä¸ªæ•°ç»„ï¼Œå½“getteråœ¨ä¸åŒåœ°æ–¹è®¿é—®æˆ–è€…æ˜¾ç¤ºvalueçš„æ—¶å€™ï¼Œå°±å°†å®ƒæ·»åŠ åˆ°æ•°ç»„ä¸­ï¼›è€Œå½“æˆ‘ä»¬å»ä¿®æ”¹äº†valueå€¼æ—¶ï¼Œå°±è§¦å‘triggerå‡½æ•°ï¼Œå°†æ•°ç»„ä¸­å­˜å‚¨çš„ä¿®æ”¹çš„é¡µé¢åœ°æ–¹ï¼Œå…¨éƒ¨é€šçŸ¥æ›´æ–°ã€‚ æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢æµè§ˆå™¨é‡Œç›´æ¥æ‰“å°å‡ºæ¥çš„refå¯¹è±¡numï¼Œç”±äºæ²¡æœ‰è§¦å‘getterï¼Œå› æ­¤å®ƒçš„depæ˜¾ç¤ºundefinedï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¾åˆ°templateä¸­å’Œwatché‡Œé¢å»ï¼š 12345678910&lt;template&gt; &lt;div&gt;&#123;&#123; num &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot; setup&gt; const num: Ref&lt;number&gt; = ref(2); watch(num, (val) =&gt; &#123; // ... &#125;) console.log(num, &#x27;num&#x27;);&lt;/script&gt; æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢æ‰“å°å‡ºæ¥çš„depå±æ€§ä¸­çš„mapå°±æœ‰ä¸¤ä¸ªæ”¶é›†åˆ°çš„ä¾èµ–äº†ï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„undefinedäº†ã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹å®Œæ•´çš„setterå‡½æ•°ï¼š 12345678910111213141516class RefImpl&lt;T = any&gt; &#123; set value(newValue) &#123; const oldValue = this._rawValue const useDirectValue = this[ReactiveFlags.IS_SHALLOW] || isShallow(newValue) || isReadonly(newValue) newValue = useDirectValue ? newValue : toRaw(newValue) if (hasChanged(newValue, oldValue)) &#123; this._rawValue = newValue this._value = useDirectValue ? newValue : toReactive(newValue) // çœç•¥äº†å¼€å‘ç¯å¢ƒçš„ä»£ç  this.dep.trigger() &#125; &#125;&#125; è¿™é‡Œå°†_rawValueæš‚å­˜åˆ°oldValueå˜é‡ï¼Œè¿™é‡ŒuseDirectValueæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç®€å•ç†è§£ä¸ºnewValueï¼Œç„¶ååˆ¤æ–­ä¼ å…¥newValueå’ŒoldValueæ˜¯å¦æœ‰å˜åŒ–ï¼Œå…¶å®æœ¬è´¨ä¸Šä¹Ÿå°±æ˜¯åˆ¤æ–­ä¼ å…¥çš„æ–°å€¼å’Œ_rawValueæ˜¯å¦æœ‰å˜åŒ–ï¼Œå¦‚æœå˜åŒ–äº†ï¼Œ_rawValueå’Œ_valueéƒ½æ”¹ä¸ºæ–°çš„å€¼ï¼ŒåŒæ—¶è§¦å‘dep.triggerã€‚ é‚£è¿™é‡Œå¯èƒ½è¿˜æœ‰å°ä¼™ä¼´ä¼šæå‡ºè¿™æ ·çš„ç–‘é—®ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥å°†newValueå’Œ_valueä¸­çš„å€¼è¿›è¡Œå¯¹æ¯”ï¼Œè€Œè¦é€šè¿‡_rawValueï¼Ÿå› ä¸ºç»“åˆè¿™é‡Œçš„setterå‡½æ•°ï¼Œæˆ‘ä»¬å›æƒ³ä¸€ä¸‹æ„é€ å‡½æ•°ä¸­å°±èƒ½æ˜ç™½äº†ï¼Œ_rawValueå­˜å‚¨çš„æ˜¯æ•°æ®çš„åŸå§‹å€¼ï¼Œè€Œ_valueå­˜å‚¨çš„æ˜¯å“åº”åŒ–ä¹‹åçš„æ•°æ®ï¼Œè€Œ_rawValueå­˜å‚¨çš„åŸå§‹å€¼å°±æ˜¯ç”¨æ¥è¿›è¡Œå¯¹æ¯”æ“ä½œçš„ï¼›å¦‚æœæˆ‘ä»¬ç›´æ¥å°†newValueå’Œ_valueå¯¹æ¯”ï¼Œé‚£ä¹ˆhasChangedæ°¸è¿œéƒ½ä¼šè¿”å›trueã€‚ æˆ‘ä»¬å°†refå‡½æ•°çš„åŸºæœ¬é€»è¾‘ä»‹ç»å®Œåï¼Œå†æŠŠå…¶ä»–å‡ ä¸ªrefç›¸å…³çš„å‡½æ•°é¡ºä¾¿ä¹Ÿæ¥çœ‹ä¸€ä¸‹ã€‚ unref é¦–å…ˆå°±æ˜¯unrefï¼Œç”¨æ¥è·å–refå¯¹è±¡ä¸­çš„valueå€¼ï¼š 123export function unref&lt;T&gt;(ref: MaybeRef&lt;T&gt; | ComputedRef&lt;T&gt;): T &#123; return isRef(ref) ? ref.value : ref&#125; æˆ‘ä»¬å‘ç°ï¼Œå…¶å®unrefè¿™ä¸ªå‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œåªæ˜¯å¸®æˆ‘ä»¬æ‹¿åˆ°refå¯¹è±¡çš„valueå±æ€§ï¼›å¯¹äºåŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“valueä¸­å­˜å‚¨çš„å°±æ˜¯å€¼æœ¬èº«ï¼›è€Œå¯¹äºæ•°ç»„å’Œå¯¹è±¡ç­‰å¼•ç”¨ç±»å‹ï¼Œvalueä¸­å­˜çš„åˆ™æ˜¯Proxy Objectæ‹¦æˆªå¯¹è±¡ã€‚ å› æ­¤å¦‚æœæˆ‘ä»¬è¿˜æƒ³ç»§ç»­è·å–å¼•ç”¨ç±»å‹çš„çœŸå®å€¼ï¼Œè¿˜éœ€è¦é€šè¿‡toRawè¿›è¡Œä¸€ä¸‹è½¬æ¢ï¼š 1234567891011121314151617const num = ref(10);// 10console.log(unref(num)); const obj = ref(&#123; a: 1,&#125;);// Proxy(Object)console.log(unref(obj));// &#123;a:1&#125;console.log(toRaw(unref(obj))); // &#123;a:1&#125;ï¼Œæ•ˆæœå’Œunrefæ˜¯ä¸€æ ·çš„console.log(toRaw(obj.value)); toRefs refä¸­è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„å‡½æ•°å°±æ˜¯toRefsï¼Œå¤åˆ¶reactiveä¸­çš„æ‰€æœ‰å±æ€§å¹¶è½¬æˆrefå¯¹è±¡ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®ƒçš„ç”¨æ³•ï¼š 12345const state = reactive(&#123; foo: 1, bar: 2,&#125;);const &#123; foo, bar &#125; = toRefs(state) ä¸‹é¢å°±æ¥çœ‹ä¸‹å®ƒçš„æºç é€»è¾‘ï¼š 1234567export function toRefs&lt;T extends object&gt;(object: T): ToRefs&lt;T&gt; &#123; const ret: any = isArray(object) ? new Array(object.length) : &#123;&#125; for (const key in object) &#123; ret[key] = propertyToRef(object, key) &#125; return ret&#125; è¿™é‡Œå…ˆå¯¹ä¼ å…¥çš„objectè¿›è¡Œæ˜¯å¦æ•°ç»„çš„åˆ¤æ–­ï¼Œå¦‚æœæ˜¯æ•°ç»„ï¼Œåˆ›å»ºç›¸åŒé•¿åº¦çš„æ•°ç»„ï¼›å¦åˆ™ï¼Œåˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæœ€åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚ è¿™é‡Œçš„objectå…¶å®æ˜¯æˆ‘ä»¬ä¼ å…¥çš„reactiveå¯¹è±¡ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°è¿™é‡Œobjectè¿˜å¯ä»¥ä¼ å…¥æ•°ç»„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„ä»£ç ï¼š 1234567const list = reactive([&#123; a: 11 &#125;, &#123; a: 22 &#125;]);const res = toRefs(list);setTimeout(() =&gt; &#123; res[0].value.a = 111;&#125;, 800); ä¸€èˆ¬æ²¡æœ‰äººè¿™ä¹ˆå¹²ã€‚ å›åˆ°toRefsï¼Œæˆ‘ä»¬å‘ç°å¯¹objectè°ƒç”¨äº†propertyToRefå‡½æ•°ï¼Œè¿™é‡Œçš„keyå°±æ˜¯objectä¸Šæ¯ä¸ªå±æ€§çš„åç§°ï¼›æˆ‘ä»¬ç»§ç»­çœ‹propertyToRefåšäº†ä»€ä¹ˆï¼š 12345678910function propertyToRef( source: Record&lt;string, any&gt;, key: string, defaultValue?: unknown,) &#123; const val = source[key] return isRef(val) ? val : (new ObjectRefImpl(source, key, defaultValue) as any)&#125; Recordç±»å‹ æˆ‘ä»¬çœ‹åˆ°propertyToRefä¸­ä¼ å…¥çš„å‚æ•°sourceæ˜¯ä¸€ä¸ªRecordç±»å‹ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªç±»å‹ï¼›Recordæ˜¯tså†…ç½®çš„ä¸€ä¸ªé«˜çº§ç±»å‹ï¼Œå¯ä»¥è®©æˆ‘ä»¬æ¥å®šä¹‰å…·æœ‰ç‰¹å®šé”®å’Œç›¸åº”å€¼ç±»å‹çš„å¯¹è±¡ç±»å‹ï¼›å®ƒçš„è¯­æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåé¢æ˜¯ä¸€å¯¹å°–æ‹¬å·ï¼Œå°–æ‹¬å·ä¸­ä¸¤ä¸ªåˆ†åˆ«è¡¨ç¤ºå®šä¹‰å¯¹è±¡çš„é”®çš„ç±»å‹å’Œå€¼çš„ç±»å‹ï¼š 12345678type MyRecord = Record&lt;string, number&gt;;const obj: MyRecord = &#123; aa: 1, bb: 2&#125;;console.log(obj.aa) è¿™è¾¹æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªMyRecordç±»å‹ï¼Œå…·æœ‰å­—ç¬¦ä¸²å’Œæ•°å­—çš„å¯¹è±¡ç±»å‹ï¼›ç›¸æ¯”äºobjectç±»å‹ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®objectä¸Šé¢çš„å±æ€§ä¼šæŠ¥é”™ï¼š 1234567const obj1: object = &#123; aa: 1, bb: 2&#125;;// Errorï¼šç±»å‹â€œobjectâ€ä¸Šä¸å­˜åœ¨å±æ€§â€œaaâ€ã€‚console.log(obj1.aa) æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨è”åˆç±»å‹æ¥é™åˆ¶å¯¹è±¡çš„é”®ï¼Œé™åˆ¶ä¸ºç‰¹å®šçš„å­—ç¬¦ä¸²ï¼š 1234567type Names = &#x27;alice&#x27; | &#x27;bob&#x27; | &#x27;charlie&#x27;;const obj: Record&lt;Names, number&gt; = &#123; alice: 1, bob: 2, charlie: 3,&#125;; ä½†æ˜¯è¿™ç§å†™æ³•è¦æ±‚æˆ‘ä»¬å°†æ‰€æœ‰çš„é”®éƒ½å†™å®Œå…¨ï¼Œä¸ç„¶ä¼šæç¤ºæŠ¥é”™ï¼›å¯ä»¥ç»“åˆPartialï¼Œå°†æ‰€æœ‰çš„é”®å˜ä¸ºå¯é€‰çš„ï¼š 123const obj: Partial&lt;Record&lt;Names, number&gt;&gt; = &#123; alice: 1,&#125;; è¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦æŠŠæ‰€æœ‰çš„å±æ€§éƒ½å†™å…¨äº†ã€‚é™¤äº†å°†å€¼å®šä¹‰ä¸ºåŸºæœ¬ç±»å‹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰ä¸ºå¯¹è±¡ï¼›æ¯”å¦‚å®šä¹‰ä¸€ä¸ªå­¦ç”Ÿçš„å­—å…¸å¯¹è±¡ï¼š 1234567891011121314151617181920212223enum Sex &#123; Male, Female,&#125;interface Student &#123; id: number; name: string; sex: Sex;&#125;const map: Record&lt;string, Student&gt; = &#123; chen: &#123; id: 0, name: &#x27;Chen&#x27;, sex: Sex.Male, &#125;, li: &#123; id: 0, name: &#x27;Li&#x27;, sex: Sex.Female, &#125;,&#125;; æ€»ç»“ä¸€ä¸‹ï¼ŒRecordç±»å‹æ˜¯tsä¸­ä¸€ä¸ªå¼ºå¤§å¹¶ä¸”çµæ´»çš„å·¥å…·ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„è®©æˆ‘ä»¬å®šä¹‰å¸¦æœ‰ç‰¹å®šé”®å€¼å¯¹çš„å¯¹è±¡ã€‚ ObjectRefImplç±» å›åˆ°ä¸Šé¢propertyToRefå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°åˆå°è£…äº†ä¸€ä¸ªæ–°çš„ç±»ObjectRefImplï¼Œå®ƒçš„æºç å¦‚ä¸‹ï¼š 1234567891011121314151617class ObjectRefImpl&lt;T extends object, K extends keyof T&gt; &#123; public readonly [ReactiveFlags.IS_REF] = true public _value: T[K] = undefined! constructor( private readonly _object: T, private readonly _key: K, private readonly _defaultValue?: T[K], ) &#123;&#125; get value() &#123; const val = this._object[this._key] return (this._value = val === undefined ? this._defaultValue! : val) &#125; set value(newVal) &#123; this._object[this._key] = newVal &#125; // çœç•¥éƒ¨åˆ†ä»£ç &#125; è¿™é‡Œconstructorçš„ç¼©ç•¥å†™æ³•å†™æ³•æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šçœ‹ä¸æ‡‚äº†ï¼Œæˆ‘ä»¬ç¨å¾®è§£é‡Šä¸€ä¸‹ï¼›constructorä¼ å…¥äº†å¸¦æœ‰ä¿®é¥°ç¬¦çš„å‚æ•°ï¼Œè¿™æ ·tså°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åœ¨ç±»é‡Œå£°æ˜å®ä¾‹ä¸Šçš„å±æ€§ï¼Œä¸ç”¨æˆ‘ä»¬åœ¨ä¸‹é¢å»å­å“§å­å“§åœ°ä¸€ä¸ªä¸€ä¸ªæ˜¾ç¤ºåœ°å†™å‡ºæ¥äº†ï¼›å› æ­¤å…¶å®ä¸Šé¢çš„constructorå†™æ³•å°±ç›¸å½“äºå¦‚ä¸‹ï¼š 123456789101112class ObjectRefImpl&lt;T extends object, K extends keyof T&gt; &#123; private readonly _object: T; private readonly _key: K; private readonly _defaultValue?: T[K]; constructor(_object: T, _key: K, _defaultValue?: T[K]) &#123; this._object = _object; this._key = _key; this._defaultValue = _defaultValue; &#125; // å…¶ä»–ä»£ç &#125; å› æ­¤ç¼©ç•¥å†™æ³•ä¸­constructorä¸­çš„ä¿®é¥°ç¬¦ä¸èƒ½çœç•¥æ‰ï¼Œå…·ä½“çš„ç”¨æ³•å¯ä»¥å‚è€ƒå®ä¾‹å±æ€§çš„ç®€å†™å½¢å¼ å›åˆ°ObjectRefImplç±»ä¸­ï¼Œå®ƒé‡Œé¢çš„å±æ€§å…¶å®å¾ˆç®€å•ï¼Œä¸€ä¸ª_objectï¼Œå­˜å‚¨çš„æ˜¯æˆ‘ä»¬ä¼ è¿›å…¥çš„reactiveå¯¹è±¡ï¼›_keyæ˜¯reactiveå¯¹è±¡ä¸Šéœ€è¦æ˜ å°„çš„ä¸€ä¸ªé”®åï¼›_defaultValueæ˜¯é»˜è®¤çš„å€¼ï¼›æˆ‘ä»¬å‘ç°ObjectRefImplè¿™ä¸ªç±»åšçš„äº‹æƒ…å…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯æŠŠreactiveå¯¹è±¡çš„å–å€¼å’Œèµ‹å€¼è¿‡ç¨‹è¿›è¡Œäº†ä¸€ä¸‹å°è£…ã€‚ toRef æœ€åä¸€ä¸ªå¸¸ç”¨çš„å‡½æ•°å°±æ˜¯toRefï¼Œæˆ‘ä»¬ä¸»è¦ç”¨å®ƒæ¥å¤åˆ¶reactiveé‡Œé¢çš„å•ä¸ªå±æ€§ç„¶åè½¬æˆrefå¯¹è±¡ï¼Œæ—¢ä¿ç•™äº†å“åº”å¼ï¼Œä¹Ÿä¿ç•™äº†å¯¹åŸæœ‰reactiveçš„å¼•ç”¨ï¼›æˆ‘ä»¬å…ˆçœ‹ä¸‹å®ƒçš„å¸¸è§ç”¨æ³•ï¼š 12345const state = reactive(&#123; foo: 1, bar: 2,&#125;);const fooRef = toRef(state, &#x27;foo&#x27;); çœ‹åˆ°è¿™é‡Œå¾ˆå¤šå°ä¼™ä¼´å¯èƒ½ä¹Ÿæƒ³åˆ°äº†ï¼Œä¸Šé¢toRefsæºç ä¸­ä¸æ˜¯æœ‰propertyToRefå‡½æ•°ä¹ˆï¼Œåªè¦ä¼ å…¥å°è£…ä¸€ä¸‹ä¸å°±å®Œäº‹äº†ã€‚ ä½†æ˜¯å®é™…ä¸Šè¿™ä¸ªåªæ˜¯å®ƒçš„å…¶ä¸­ä¸€ä¸ªç”¨æ³•ï¼ŒtoRefæ”¯æŒä¼ å…¥å¤šç§ç±»å‹çš„æ•°æ®ï¼›ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹å®ƒé‡Œé¢çš„ä¸»è¦å®ç°æºç ï¼š 123456789101112131415export function toRef( source: Record&lt;string, any&gt; | MaybeRef, key?: string, defaultValue?: unknown,): Ref &#123; if (isRef(source)) &#123; return source &#125; else if (isFunction(source)) &#123; return new GetterRefImpl(source) as any &#125; else if (isObject(source) &amp;&amp; arguments.length &gt; 1) &#123; return propertyToRef(source, key!, defaultValue) &#125; else &#123; return ref(source) &#125;&#125; è¿™é‡Œåˆ†ä¸ºå¤šç§æƒ…å†µï¼Œé¦–å…ˆç¬¬ä¸€ç§æƒ…å†µï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°æœ¬æ¥å°±æ˜¯refå¯¹è±¡ï¼Œåˆ™è¿”å›è‡ªå·±ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°äº†ï¼›ç¬¬äºŒç§æƒ…å†µï¼ŒisFunctionæ£€æŸ¥å‚æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨toRefä¸­ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™ç§å†™æ³•ï¼š 12345678910const state = reactive(&#123; foo: 1, bar: 2,&#125;);const barRef: Readonly&lt;Ref&lt;number&gt;&gt; = toRef(() =&gt; state.bar);setTimeout(() =&gt; &#123; state.bar = 4;&#125;, 1000); è¿™é‡Œç”±äºä¼ å…¥çš„æ˜¯å‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªåªè¯»çš„Refï¼Œæˆ‘ä»¬ä¸èƒ½å»ä¿®æ”¹å®ƒçš„valueå€¼ï¼›å›åˆ°toRefå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°åˆå°†sourceï¼ˆå‡½æ•°ï¼‰ä¼ å…¥äº†GetterRefImplç±»ï¼Œæˆ‘ä»¬çœ‹å®ƒçš„å®ç°é€»è¾‘ï¼š 123456789class GetterRefImpl&lt;T&gt; &#123; // çœç•¥å‡ ä¸ªæ ‡è¯†å±æ€§ public _value: T = undefined! constructor(private readonly _getter: () =&gt; T) &#123;&#125; get value() &#123; return (this._value = this._getter()) &#125;&#125; è¿™é‡Œconstructorçš„ç¼©ç•¥å†™æ³•å’Œä¸Šé¢ä¸€æ ·ï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚è¿™é‡Œçš„_getterå‚æ•°æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åè¿”å›æ³›å‹Tï¼Œå› æ­¤å®ƒçš„ç±»å‹å…¶å®å°±æ˜¯() =&gt; Tï¼›ç„¶åGetterRefImplç±»çš„getterå‡½æ•°å°±è°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶è¿”å›ç»“æœã€‚ toRefå‡½æ•°çš„ç¬¬ä¸‰ç§æƒ…å†µï¼Œå¦‚æœsourceæ˜¯å¯¹è±¡ï¼Œå¹¶ä¸”è¿˜æœ‰å…¶ä»–å‚æ•°ï¼Œè°ƒç”¨propertyToRefå‡½æ•°ï¼Œå°±æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ç”¨æ³•äº†ã€‚ æœ€åä¸€ç§æƒ…å†µå¦‚æœæ˜¯å…¶ä»–ç±»å‹ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªrefå¯¹è±¡ï¼š 123toRef(1)toRef(&#x27;2&#x27;) å› æ­¤æˆ‘ä»¬ç”¨toRefä¼ å…¥åŸºæœ¬ç±»å‹ï¼Œå…¶å®å’Œç›´æ¥è°ƒç”¨refå‡½æ•°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ ä¸€äº›ç»†èŠ‚é—®é¢˜ ä¸Šé¢æˆ‘ä»¬åªæ³¨é‡refå‡½æ•°æ•´ä½“çš„é€»è¾‘ï¼Œå¿½ç•¥äº†ä¸€äº›ç»†èŠ‚é—®é¢˜ï¼Œæœ¬å°ç»“æˆ‘ä»¬å°±æ¥çœ‹ä¸‹ç»†èŠ‚é—®é¢˜ï¼›æ¯”å¦‚æˆ‘ä»¬ä¸Šé¢æåˆ°ï¼Œå¸¦æœ‰ä¸‹åˆ’çº¿çš„å±æ€§ä¸€èˆ¬æ˜¯ç±»çš„ç§æœ‰å±æ€§ï¼Œä¸ä¼šå¯¹å¤–æš´éœ²ï¼›ä½†æ˜¯æˆ‘ä»¬çœ‹åˆ°_valueå®šä¹‰çš„æ—¶å€™æ²¡æœ‰åŠ privateï¼Œè€Œ_rawValueåŠ äº†privateï¼š 1234class RefImpl&lt;T = any&gt; &#123; _value: T private _rawValue: T&#125; å› æ­¤å…¶å®_valueå±æ€§é»˜è®¤å°±æ˜¯publicçš„ï¼Œè¿™å°±å’Œæˆ‘ä»¬çš„è®¤çŸ¥ä¸ç¬¦äº†ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨refå¯¹è±¡ä¸Šç¡®å®ä¹Ÿè®¿é—®ä¸åˆ°_valueã€‚å½“äº‹å®å’Œæˆ‘ä»¬çš„è®¤çŸ¥æœ‰æ‰€å†²çªæ—¶ï¼Œè‚¯å®šæ˜¯å“ªé‡Œå‡ºäº†é—®é¢˜ï¼Œè¿™é‡Œå°±éœ€è¦è€å¿ƒä»¥åŠåˆç†çš„çŒœæµ‹å‡è®¾äº†ã€‚ æˆ‘ä»¬ç»§ç»­çœ‹refçš„ç±»å‹å®šä¹‰ï¼Œä¸Šé¢ç¡®å®æ²¡æœ‰_valueï¼Œå› æ­¤è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨é‡Œé¢è®¿é—®_valueå±æ€§ä¼šæŠ¥é”™çš„æ ¹æœ¬åŸå› æ‰€åœ¨ã€‚ 12345interface Ref&lt;T = any, S = T&gt; &#123; get value(): T set value(_: S) [RefSymbol]: true&#125; é‚£ä¹ˆæ—¢ç„¶å¤–é¢è®¿é—®ä¸åˆ°_valueï¼Œé‚£ä¹ˆç¬”è€…å°±å¤§èƒ†çš„çŒœæµ‹ï¼Œæ˜¯ä¸æ˜¯éœ€è¦åœ¨æºç å†…éƒ¨å»è®¿é—®å‘¢ï¼Ÿç»è¿‡å…¨å±€æŸ¥æ‰¾ï¼Œæ€»ç®—åœ¨ç¬”è€…å¿½ç•¥çš„ä¸€ä¸ªå‡½æ•°ä¸­çœ‹åˆ°äº†_valueçš„èº«å½±ï¼š 123456789101112131415export function triggerRef(ref: Ref): void &#123; if ((ref as unknown as RefImpl).dep) &#123; if (__DEV__) &#123; ;(ref as unknown as RefImpl).dep.trigger(&#123; target: ref, type: TriggerOpTypes.SET, key: &#x27;value&#x27;, // åœ¨è¿™é‡Œè®¿é—®äº†_valueå±æ€§ newValue: (ref as unknown as RefImpl)._value, &#125;) &#125; else &#123; ;(ref as unknown as RefImpl).dep.trigger() &#125; &#125;&#125; æˆ‘ä»¬çœ‹åˆ°åœ¨newValueä¸­ç”¨åˆ°äº†RefImplç±»çš„_valueï¼Œè¿™å°±è§£é‡Šäº†ä¸Šé¢ä¸ºä»€ä¹ˆ_valueä¸æ˜¯å®šä¹‰æˆäº†privateã€‚ æ€»ç»“ è¿™é‡Œæˆ‘ä»¬å¯¹refå‡½æ•°æºç åšä¸ªç®€å•çš„æ€»ç»“ï¼Œæœ¬æ–‡ä»refå’ŒshallowRefå‡½æ•°å…¥æ‰‹ï¼Œæ‰¾åˆ°äº†å®ƒä»¬å…±åŒçš„å°è£…å‡½æ•°createRefï¼Œç„¶åæ‰¾åˆ°äº†refçš„æ ¸å¿ƒç±»RefImplï¼Œrefå‡½æ•°ä¼ å…¥çš„å€¼å®é™…ä¸Šéƒ½å­˜å‚¨åœ¨å®ƒçš„_valueå±æ€§ä¸­ï¼ŒåŸºæœ¬ç±»å‹çš„å“åº”å¼æ˜¯é€šè¿‡_valueçš„getterå’Œsetterå‡½æ•°ï¼Œè€Œå¤æ‚ç±»å‹åˆ™æ˜¯ç»§ç»­ä½¿ç”¨reactive.tsä¸­çš„toReactiveè½¬åŒ–æˆä»£ç†å¯¹è±¡ï¼Œå®ç°å“åº”å¼çš„ã€‚ ç„¶åç»§ç»­å¯¹refç›¸å…³çš„å‡ ä¸ªå‡½æ•°unrefã€toRefså’ŒtoRefè¿›è¡Œäº†è¯´æ˜ï¼ŒåŒæ—¶é€šè¿‡æºç æˆ‘ä»¬å­¦åˆ°äº†constructorä¸­å‚æ•°çš„ç¼©ç•¥å†™æ³•ï¼Œè¿˜æœ‰Recordç±»å‹å®šä¹‰çš„å¯¹è±¡ç±»å‹ï¼Œè¿™äº›å°æŠ€å·§éƒ½å¯ä»¥æå¤§çš„æ–¹ä¾¿æˆ‘ä»¬åç»­é¡¹ç›®ä¸­tsçš„ä½¿ç”¨ã€‚ æœ¬æ¥ç¬”è€…æ˜¯æ‰“ç®—æŠŠreactiveçš„æºç ä¸€èµ·å†™çš„ï¼Œä½†æ˜¯éšç€refä¸­çš„ç±»è¶Šçœ‹è¶Šå¤šï¼Œæœ¬æ–‡çš„å†…å®¹ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå› æ­¤ç¬”è€…å°†reactiveæºç çš„è§£æåé¢ä¼šå•ç‹¬ä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šç‚¹èµæ”¶è—ï¼Œæ›´æ–°ä¼šæ›´å¿«å“¦ã€‚ è·å–Vue3æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€Vue3æºç ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"}]},{"title":"æˆ‘åšäº†ä¸‰æŠŠæ¤…å­åŸæ¥çº¹ç†è¿™æ ·åŠ è½½åˆ‡æ¢","date":"2024-11-06T12:12:00.000Z","path":"2024/11/06/Threejs-Chair.html","text":"æˆ‘ä»¬åœ¨æµè§ˆä¸€äº›3Dç½‘ç«™æ—¶ï¼Œç»å¸¸èƒ½çœ‹åˆ°ä¸€äº›æ¨¡å‹æä¾›äº†åˆ‡æ¢å¤–è§‚çš„æŒ‰é’®ï¼Œé€šè¿‡ä¸åŒçš„é¢œè‰²æˆ–è€…çº¹ç†çš„æŒ‰é’®åˆ‡æ¢ï¼Œæ¥è®©æ¨¡å‹å‘ˆç°å‡ºæ¥æ›´å¤šçš„æ•ˆæœï¼Œæ¯”å¦‚ç»™å±•ç¤ºçš„æ±½è½¦æ¢ä¸ªå¤–è§‚é¢œè‰²ä¹‹ç±»çš„ã€‚æœ¬æ–‡æˆ‘ä»¬å…ˆä»ç®€å•çš„æ¨¡å‹å…¥æ‰‹ï¼Œçœ‹ä¸‹ç»™æ¤…å­æ¨¡å‹åˆ‡æ¢çº¹ç†æ˜¯å¦‚ä½•æ¥å®ç°è¿™æ ·çš„æ•ˆæœã€‚ é¦–å…ˆæ—¢ç„¶è¦å¯¹çº¹ç†å›¾ç‰‡è¿›è¡Œåˆ‡æ¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹çº¹ç†çš„åŸºæœ¬å±æ€§å’Œç”¨æ³•è¦æœ‰ä¸€ä¸ªç®€å•çš„äº†è§£ï¼Œæœ¬æ–‡çš„åŸºç¡€çŸ¥è¯†æˆ‘ä»¬å°±ä»çº¹ç†Textureçš„ä½¿ç”¨å¼€å§‹ã€‚ çº¹ç†çš„ä½¿ç”¨ æˆ‘ä»¬åœ¨åŠ è½½çº¹ç†å›¾ç‰‡çš„æ—¶å€™ï¼Œç»å¸¸ä¼šçœ‹åˆ°wrapS = wrapT = RepeatWrappingçš„å†™æ³•ï¼Œå¹¶ä¸”è®¾ç½®repeatï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¦è¿™æ ·è®¾ç½®å‘¢ï¼Ÿæˆ‘ä»¬ç®€å•çœ‹ä¸‹çº¹ç†çš„ç”¨æ³•ã€‚ é¦–å…ˆçº¹ç†çš„ä½¿ç”¨ï¼Œå¯ä»¥è®©æˆ‘ä»¬çš„å°†å›¾åƒåº”ç”¨åˆ°å‡ ä½•ä½“ä¸Šï¼Œå®ç°æ›´åŠ çœŸå®å’Œé€¼çœŸçš„æ¸²æŸ“æ•ˆæœï¼›æ¯”å¦‚æˆ‘ä»¬æƒ³è®©ä¸€å—é•¿æ–¹ä½“å‘ˆç°å‡ºçŸ³å¤´çš„çº¹ç†æˆ–è€…é—¨çš„æœ¨çº¹ç†ï¼Œå¦‚æœé€šè¿‡çº¯ä»£ç Shaderå®ç°ï¼Œå…ˆä¸è¯´èƒ½ä¸èƒ½å®ç°å§ï¼Œå¦‚æœæ•ˆæœç”¨Shaderå»å‘ˆç°ï¼Œå¯¹GPUã€å†…å­˜çš„å‹åŠ›ä¹Ÿä¼šéå¸¸çš„å¤§ï¼›ä½†æ˜¯å¦‚æœæˆ‘ä»¬è´´ä¸ªå›¾ç‰‡çº¹ç†ä¸Šå»ï¼Œå®ç°çš„æ•ˆæœç›¸åŒï¼Œå¹¶ä¸”æˆæœ¬ä¹Ÿç›¸å¯¹ä½äº†å¾ˆå¤šã€‚ çº¹ç†çš„åˆ›å»ºæ–¹å¼æœ‰å¤šç§ï¼Œé¦–å…ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡THREE.Textureæ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªçº¹ç†å¯¹è±¡ï¼Œå°†å›¾ç‰‡Imageä¼ å…¥æ„é€ å‡½æ•°ä¸­å»ï¼š 1234567const img = new Image();img.src = &quot;path/to/your/image.jpg&quot;;const tx = new Texture(img);img.onload = () =&gt; &#123; // åŠ è½½æˆåŠŸåæ›´æ–°çº¹ç† tx.needsUpdate = true;&#125;; è¿™é‡Œç”±äºimgæ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œå› æ­¤Textureçš„å›¾åƒæ”¹å˜äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å›¾ç‰‡çš„å›è°ƒå‡½æ•°ä¸­é‡æ–°æ›´æ–°çº¹ç†çš„needsUpdateä¸ºtrueï¼›å¦ä¸€ç§æ–¹å¼åˆ™æ›´ç®€å•ï¼Œç›´æ¥ä½¿ç”¨TextureLoaderï¼Œé€šè¿‡åå­—æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œå®ƒå°±æ˜¯ä¸ªTextureçš„åŠ è½½å™¨ï¼›åŠ è½½åè¿”å›çš„çº¹ç†å¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨å›è°ƒå‡½æ•°ä¸­å¯¹Textureçš„å±æ€§è¿›è¡Œè°ƒæ•´ï¼š 1234const textureLoader = new THREE.TextureLoader(); const texture = textureLoader.load(&#x27;path/to/your/image.jpg&#x27;, () =&gt; &#123; console.log(&#x27;Texture loaded&#x27;); &#125;); æ¥ç€ï¼Œæˆ‘ä»¬å†æ¥çœ‹çº¹ç†çš„å‡ ä¸ªå¸¸ç”¨å±æ€§çš„æ•ˆæœã€‚ image æˆ‘ä»¬é€šè¿‡THREE.Textureæ„é€ å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªçº¹ç†å¯¹è±¡ï¼Œå¦‚æœåæœŸè¿˜æƒ³ä¿®æ”¹çº¹ç†çš„å›¾ç‰‡ï¼Œå°±å¯ä»¥é€šè¿‡å®ƒçš„ä¸€ä¸ªé‡è¦çš„å±æ€§imageï¼š 123456789const img = new Image();img.src = &quot;path/to/your/image.jpg&quot;;const tx = new Texture();img.onload = () =&gt; &#123; // å›¾ç‰‡åŠ è½½å®Œæˆåä¿®æ”¹imageå±æ€§ tx.image = img; tx.needsUpdate = true;&#125;; è¿™é‡Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç©ºçš„Textureï¼Œå½“å›¾ç‰‡åŠ è½½å®Œæˆåï¼Œæˆ‘ä»¬ä¿®æ”¹çº¹ç†çš„imageå±æ€§ï¼Œå¹¶è®¾ç½®needsUpdateä¸ºtrueï¼Œè¿™æ ·çº¹ç†çš„å›¾ç‰‡å°±ä¿®æ”¹æˆåŠŸäº†ã€‚ repeat æˆ‘ä»¬çº¹ç†æ­£å¸¸æ˜¯å¹³é“ºåœ¨ç‰©ä½“çš„è¡¨é¢çš„ï¼Œç›¸å½“äºobject-fit: fillçš„æ•ˆæœï¼›ä½†æ˜¯ä¼šæœ‰æ‹‰ä¼¸çš„æ•ˆæœï¼Œå› æ­¤éœ€è¦è¿›è¡Œé‡å¤æ’åˆ—ï¼›repeatå±æ€§å°±æ˜¯ç”¨æ¥è®¾ç½®çº¹ç†åœ¨ç‰©ä½“è¡¨é¢ä¸Šçš„é‡å¤æ¬¡æ•°ï¼Œå®ƒæ˜¯ä¸€ä¸ªTHREE.Vector2å¯¹è±¡ï¼Œåˆ†åˆ«è¡¨ç¤ºåœ¨æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘ä¸Šçš„é‡å¤æ¬¡æ•°ï¼š 12// åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šå„é‡å¤ä¸¤æ¬¡texture.repeat.set(2, 2); æ¯”å¦‚æˆ‘ä»¬å¯¹ä¸€ä¸ªå¸¸è§çš„æœ¨å¤´çº¹ç†ï¼Œè®¾ç½®é‡å¤æ’åˆ—ä¸¤æ¬¡ï¼Œç”±äºé»˜è®¤çš„åŒ…è£…æ¨¡å¼æ˜¯ClampToEdgeWrappingï¼Œå› æ­¤æˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹çš„çº¹ç†ï¼š wrapSå’ŒwrapT wrapSå’ŒwrapTå±æ€§ç”¨äºè®¾ç½®çº¹ç†åœ¨Sï¼ˆUï¼‰æ–¹å‘å’ŒTï¼ˆVï¼‰æ–¹å‘ä¸Šçš„åŒ…è£…æ¨¡å¼ï¼Œå¸¸è§çš„åŒ…è£…æ¨¡å¼æœ‰å¦‚ä¸‹ï¼š THREE.ClampToEdgeWrappingï¼šé»˜è®¤ï¼Œçº¹ç†ä¸­çš„æœ€åä¸€ä¸ªåƒç´ å°†å»¶ä¼¸åˆ°ç½‘æ ¼çš„è¾¹ç¼˜ã€‚ THREE.RepeatWrappingï¼šçº¹ç†å°†ç®€å•åœ°é‡å¤åˆ°æ— ç©·å¤§ã€‚ THREE.MirroredRepeatWrappingï¼š çº¹ç†å°†é‡å¤åˆ°æ— ç©·å¤§ï¼Œåœ¨æ¯æ¬¡é‡å¤æ—¶å°†è¿›è¡Œé•œåƒã€‚ é»˜è®¤æƒ…å†µä¸‹wrapSå’ŒwrapTéƒ½æ˜¯ClampToEdgeWrappingï¼Œå› æ­¤æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸Šé¢è®¾ç½®äº†repeatåçº¹ç†å½·ä½›æ¨¡ç³Šäº†ä¸€æ ·ï¼Œæˆ‘ä»¬æ”¹ä¸ºRepeatWrappingï¼š 1texture.wrapS = texture.wrapT = THREE.RepeatWrapping; å†çœ‹é‡å¤çš„æ•ˆæœå°±ä¼šæ­£å¸¸å¾ˆå¤šäº†ã€‚ rotation rotationå±æ€§ç”¨äºè®¾ç½®çº¹ç†åœ¨ç‰©ä½“è¡¨é¢ä¸Šçš„æ—‹è½¬è§’åº¦ï¼›å®ƒæ˜¯ä¸€ä¸ªæ•°å€¼ï¼Œè¡¨ç¤ºçº¹ç†ç»•å…¶ä¸­å¿ƒç‚¹æ—‹è½¬çš„è§’åº¦ï¼ˆä»¥å¼§åº¦ä¸ºå•ä½ï¼‰ã€‚ 1texture.rotation = 45; æˆ‘ä»¬çœ‹æ—‹è½¬çš„æ•ˆæœï¼š offset offsetå±æ€§ç”¨äºè®¾ç½®çº¹ç†åœ¨ç‰©ä½“è¡¨é¢ä¸Šçš„åç§»é‡ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªTHREE.Vector2å¯¹è±¡ï¼Œåˆ†åˆ«è¡¨ç¤ºåœ¨æ°´å¹³æ–¹å‘å’Œå‚ç›´æ–¹å‘ä¸Šçš„åç§»é‡ï¼š 1texture.offset.set(0.8, 0.8); åç§»é‡çš„è®¾ç½®èŒƒå›´æ˜¯0åˆ°1ã€‚ æˆ‘ä»¬çœ‹ä¸‹åç§»çš„æ•ˆæœï¼š flip flipå±æ€§ç”¨äºç¿»è½¬çº¹ç†ï¼Œå®ƒæœ‰ä¸¤ä¸ªå¸ƒå°”å€¼å±æ€§ï¼ŒflipXå’ŒflipYï¼Œåˆ†åˆ«è¡¨ç¤ºæ˜¯å¦æ²¿Xè½´å’ŒYè½´ç¿»è½¬çº¹ç†ã€‚ 12texture.flipX = true;texture.flipY = true; needsUpdate needsUpdateå±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæ ‡è®°çº¹ç†æ˜¯å¦éœ€è¦åœ¨ä¸‹æ¬¡æ¸²æŸ“æ—¶æ›´æ–°ï¼›å½“çº¹ç†çš„æºå›¾åƒå‘ç”Ÿå˜åŒ–æ—¶ï¼Œéœ€è¦å°†å…¶è®¾ç½®ä¸ºtrueï¼š 1texture.needsUpdate = true; åœ¨äº†è§£äº†çº¹ç†çš„åŸºæœ¬ä½¿ç”¨åï¼Œæˆ‘ä»¬ä¸‹é¢å°±å¯ä»¥æ¥çœ‹ä¸‹åˆ‡æ¢çš„æ¡ˆä¾‹äº†ï¼›æ—¢ç„¶è¦åˆ‡æ¢æ¨¡å‹çº¹ç†ï¼Œé‚£æˆ‘ä»¬è‡³å°‘éœ€è¦å¼‚æ­¥åŠ è½½ä¸¤ä¸ªä»¥ä¸Šçš„çº¹ç†å›¾ç‰‡ï¼ŒåŒæ—¶æˆ‘ä»¬çš„3Dæ¨¡å‹ä¹Ÿæ˜¯å¼‚æ­¥åŠ è½½çš„ï¼Œå› æ­¤ç¬”è€…åšæ¢è‚¤çš„æ¨¡å‹ç»ƒä¹ ï¼Œå…¶å®åˆšå¼€å§‹é¢ä¸´æœ€å¤§æœ€æ£˜æ‰‹çš„é—®é¢˜æ˜¯ï¼š3Dæ¨¡å‹å’Œå¤šå¼ çº¹ç†å›¾ç‰‡å¦‚ä½•åŠ è½½åç»“åˆèµ·æ¥ï¼Ÿå¦‚æœéƒ½è¦é€šè¿‡å¼‚æ­¥åµŒå¥—ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ä»£ç ä¼šå¼‚å¸¸çš„ç¹æ‚ï¼›æœ€åï¼Œç»è¿‡å‡ ä¸ªæ¡ˆä¾‹çš„ç»ƒä¹ åï¼Œç¬”è€…æ‰¾åˆ°äº†é¢„åŠ è½½å’Œæ¸è¿›åŠ è½½ä¸¤ç§æ–¹å¼ã€‚ é¢„åŠ è½½æ‰€æœ‰çº¹ç† ç¬¬ä¸€æŠŠæ¤…å­å®ç°çš„æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡LoadingManageråŠ è½½ç®¡ç†å™¨ï¼Œæ¥ç­‰å¾…æˆ‘ä»¬æ‰€æœ‰çš„æ¨¡å‹å’Œçº¹ç†æ–‡ä»¶åŠ è½½å®Œæˆåï¼Œå†å»åˆ›å»ºæ·»åŠ ç½‘æ ¼å¯¹è±¡Meshï¼›é¦–å…ˆæˆ‘ä»¬åˆå§‹åŒ–ç¯å¢ƒï¼Œåˆ›å»ºä¸€ä¸ªæ¸²æŸ“å™¨ï¼š 1234567891011121314export default class Index &#123; constructor(options) &#123; this.renderer = new WebGLRenderer(&#123; antialias: true, &#125;); this.renderer.setClearColor(0xffffff); this.renderer.setPixelRatio(window.devicePixelRatio * 2); this.renderer.setSize(window.innerWidth, window.innerHeight); // å¼€å¯é˜´å½± this.renderer.shadowMap.enabled = true; this.renderer.autoClear = false; // å…¶ä»–åˆå§‹åŒ– &#125;&#125; ä½¿ç”¨shadowMap.enabled = trueå¼€å¯é˜´å½±ï¼›ç„¶åæ–°å»ºLoadingManagerï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨æ¥ç®¡ç†æˆ‘ä»¬æ‰€æœ‰çš„LoaderåŠ è½½è¿›åº¦çš„ï¼›æ–°å»ºåä¼ å…¥åˆ°æˆ‘ä»¬ä¸‹é¢æ‰€éœ€è¦ä¸‰ä¸ªLoaderä¸­ï¼š 12345const loadingManager = new LoadingManager();this.objLoader = new OBJLoader(loadingManager);this.textureLoader = new TextureLoader(loadingManager);this.cubeLoader = new CubeTextureLoader(loadingManager); ç„¶ååœ¨loadAssetsåˆå§‹åŒ–åŠ è½½æˆ‘ä»¬æ‰€æœ‰çš„èµ„æºæ–‡ä»¶ï¼ŒåŠ è½½å®Œæˆåä½¿ç”¨initMeshå»åˆ›å»ºç½‘æ ¼å¯¹è±¡äº†ã€‚ 12345678910this.initLight();this.loadAssets();loadingManager.onProgress = (url, itemsLoaded, itemsTotal) =&gt; &#123; // è®¾ç½®è¿›åº¦æ¡&#125;;loadingManager.onError = () =&gt; &#123;&#125;;loadingManager.onLoad = () =&gt; &#123; // åŠ è½½å®Œæˆ this.initMesh();&#125;; LoadingManageræä¾›äº†ä¸‰ä¸ªå›è°ƒå‡½æ•°ï¼š onLoadï¼šæ‰€æœ‰åŠ è½½å™¨åŠ è½½å®Œæˆåã€‚ onProgressï¼šå½“æ¯ä¸ªé¡¹ç›®å®Œæˆåï¼Œå°†è°ƒç”¨æ­¤å‡½æ•°ã€‚ onErrorï¼šå½“ä¸€ä¸ªåŠ è½½å™¨é‡åˆ°é”™è¯¯æ—¶ã€‚ è€Œåœ¨onProgresså‡½æ•°ä¸­ï¼Œä¹Ÿæä¾›çš„å‡ ä¸ªå‚æ•°ï¼š urlï¼šå½“å‰è¢«åŠ è½½çš„é¡¹çš„urlã€‚ itemsLoadedï¼šç›®å‰å·²åŠ è½½é¡¹çš„ä¸ªæ•°ã€‚ itemsTotalï¼šæ€»å…±æ‰€éœ€è¦åŠ è½½é¡¹çš„ä¸ªæ•°ã€‚ å¯ä»¥å‘ç°ï¼Œé€šè¿‡itemsLoaded / itemsTotal * 100%çš„è®¡ç®—å…¬å¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¡ç®—å‡ºå½“å‰èµ„æºçš„åŠ è½½è¿›åº¦ï¼Œè®¾ç½®ä¸€ä¸ªå…¨å±çš„åŠ è½½ç­‰å¾…æ•ˆæœæ¥ç¼“è§£ç”¨æˆ·æµè§ˆç©ºç™½é¡µé¢çš„ç„¦è™‘æ„Ÿï¼ŒåŒæ—¶åœ¨onLoadåŠ è½½ç»“æŸçš„å›è°ƒä¸­å†æŠŠè¿™ä¸ªåŠ è½½çš„å¼¹æ¡†ç»™éšè—ã€‚ åœ¨loadAssetså‡½æ•°ä¸­ï¼Œä½¿ç”¨CubeTextureLoaderæˆ‘ä»¬åŠ è½½ä¸€äº›ç¯å¢ƒçº¹ç†çš„ç´ æï¼ŒTextureLoaderåŠ è½½æ¨¡å‹çº¹ç†ï¼ŒOBJLoaderåŠ è½½æˆ‘ä»¬çš„æ¨¡å‹æ–‡ä»¶ï¼š 12345678910111213141516171819202122232425262728&#123; loadAssets() &#123; this.envMap = this.cubeLoader.load([ &quot;posx.jpg&quot;, &quot;negx.jpg&quot;, &quot;posy.jpg&quot;, &quot;negy.jpg&quot;, &quot;posz.jpg&quot;, &quot;negz.jpg&quot;, ]); this.textureLoader.load(&quot;fabric_blue.jpg&quot;, (texture) =&gt; &#123; texture.needsUpdate = true; texture.wrapS = texture.wrapT = RepeatWrapping; texture.repeat.set(2, 2); this.fabricBlue = texture; &#125;); this.textureLoader.load(&quot;fabric_yellow.jpg&quot;, (texture) =&gt; &#123; texture.needsUpdate = true; texture.wrapS = texture.wrapT = RepeatWrapping; texture.repeat.set(2, 2); this.fabricYellow = texture; &#125;); this.objLoader.load(&quot;cushion.obj&quot;, (obj) =&gt; &#123; this.cushionObj = obj; &#125;); // çœç•¥åŠ è½½å…¶ä»–ç´ æ &#125;&#125; è¿™é‡Œæˆ‘ä»¬ç®€å•åŠ è½½å¹¶å…¨å±€ä¿å­˜äº†ä¸¤ç§ç»‡ç‰©æè´¨ï¼Œè“è‰²çš„æè´¨fabricBlueå’Œé»„è‰²çš„æè´¨fabricYellowï¼›è¿˜æœ‰ä¸€ä¸ªåå«æ¨¡å‹cushionObjã€‚ ç­‰å¾…æ‰€æœ‰çš„ç´ æåŠ è½½å®Œæˆåï¼Œæˆ‘ä»¬åœ¨initMeshä¸­å°±å¯ä»¥æ¥æ·»åŠ ç½‘æ ¼å¯¹è±¡äº†ï¼š 1234567891011121314151617181920212223&#123; initMesh() &#123; const group = new Object3D(); this.cushionObj.traverse((el) =&gt; &#123; if (el instanceof Mesh) &#123; el.material = new MeshStandardMaterial(&#123; map: this.fabricBlue, envMap: this.envMap, // çœç•¥å…¶ä»–å±æ€§ &#125;); // æ·»åŠ æŠ•å½± el.receiveShadow = true; el.castShadow = true; &#125; &#125;); this.cushionObj.position.y = -10; group.add(this.cushionObj); // çœç•¥å…¶ä»–æ¤…å­çš„éƒ¨ä»¶ this.scene.add(group); &#125;&#125; è¿™é‡Œæˆ‘ä»¬æ–°å»ºäº†ä¸€ä¸ªObject3Då¯¹è±¡ï¼Œå®ƒä¹Ÿæ˜¯åœºæ™¯ä¸­çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œä¸è¿‡å’ŒMeshä¸åŒçš„æ˜¯ï¼Œå®ƒæ²¡æœ‰æè´¨å’Œå‡ ä½•ä½“ï¼Œæˆ‘ä»¬åªæ˜¯ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªå±€éƒ¨ç©ºé—´ï¼Œæœ‰ç‚¹ç±»ä¼¼ä¸‰ä½“ä¸­äº‘å¤©æ˜é€ç»™ç¨‹æ¬£çš„ä¸€ä¸ªå°å®‡å®™æ¥èº²é¿å®‡å®™å¤§åç¼©ï¼Œè€Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸ªç©ºèŠ‚ç‚¹æ¥æ‰¿è½½æ¤…å­çš„å„ä¸ªéƒ¨ä»¶ï¼Œåé¢å¦‚æœæ¤…å­éœ€è¦æ—‹è½¬æˆ–è€…ç§»åŠ¨ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œå³å¯ï¼›å…·ä½“çš„ä½¿ç”¨æ–¹å¼ä¹Ÿå¯ä»¥å‚è€ƒå®˜ç½‘åœºæ™¯å›¾ æœ€åä¸è¦å¿˜è®°å°†Object3Då¯¹è±¡æ·»åŠ åˆ°sceneåœºæ™¯ä¸­å»ã€‚ æœ‰äº›æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°ä½¿ç”¨äº†Groupå¯¹è±¡æ¥åŒ…è£¹äº†å­å¯¹è±¡ï¼Œå…¶å®Groupç»§æ‰¿è‡ªObject3Dï¼Œæˆ‘ä»¬æ‰“å¼€three.jsçš„æºç å°±ä¼šçœ‹åˆ°å¦‚ä¸‹ä»£ç ï¼Œå› æ­¤ä¸¤è€…æœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼š 12345678910// src/objects/Group.jsimport &#123; Object3D &#125; from &#x27;../core/Object3D.js&#x27;;class Group extends Object3D &#123; constructor() &#123; super(); this.isGroup = true; this.type = &#x27;Group&#x27;; &#125;&#125;export &#123; Group &#125;; æ‰€æœ‰çš„ç½‘æ ¼å¯¹è±¡æ·»åŠ å®Œï¼Œæˆ‘ä»¬çš„çœ‹åˆ°æ¤…å­å¤§æ¦‚å°±æ˜¯è¿™æ ·çš„ï¼š é‚£ä¹ˆæœ€å…³é”®çš„é—®é¢˜æ¥äº†ï¼Œå¦‚ä½•å¯ä»¥è®©å®ƒçš„æè´¨ä»fabricBlueåˆ‡æ¢åˆ°fabricYellowå‘¢ï¼Ÿæˆ‘ä»¬æ·»åŠ guiè°ƒè¯•ï¼š 12345678910111213141516171819202122232425&#123; initGui() &#123; const params = &#123; yellow() &#123; _this.cushionObj.traverse((el) =&gt; &#123; if (el instanceof Mesh) &#123; el.material.map = _this.fabricYellow; el.material.needsUpdate = true; &#125; &#125;); &#125;, blue() &#123; _this.cushionObj.traverse((el) =&gt; &#123; if (el instanceof Mesh) &#123; el.material.map = _this.fabricBlue; el.material.needsUpdate = true; &#125; &#125;); &#125;, &#125;; const folder1 = this.gui.addFolder(&quot;ç»‡ç‰©æè´¨&quot;); folder1.add(params, &quot;blue&quot;); folder1.add(params, &quot;yellow&quot;); &#125;&#125; æˆ‘ä»¬åªéœ€è¦åœ¨æ¨¡å‹ä¸­æ‰¾åˆ°éœ€è¦æ”¹å˜çš„éƒ¨åˆ†ï¼Œä¿®æ”¹å®ƒçš„mapå±æ€§ä¸ºå¯¹åº”çš„çº¹ç†ï¼Œè¿™æ ·åœ¨é¡µé¢ä¸Šç‚¹å‡»æŒ‰é’®åˆ‡æ¢å°±å¯ä»¥å‘ˆç°ä¸åŒçš„æ•ˆæœï¼›è¿™ç§æ–¹å¼æœ€å¸¸è§ï¼Œä¹Ÿæ¯”è¾ƒé€‚åˆæ¨¡å‹æ¯”è¾ƒç®€å•ã€çº¹ç†ä¹Ÿä¸æ˜¯å¾ˆå¤æ‚çš„æƒ…å†µã€‚ æˆ‘ä»¬çœ‹ä¸‹å®é™…çš„é¡µé¢æ•ˆæœï¼š æ¸è¿›å¼åŠ è½½çº¹ç† æ¸è¿›å¼åŠ è½½çº¹ç†ï¼Œè¿™æ˜¯ç¬”è€…ç»™è¿™ç§æ–¹å¼èµ·çš„ä¸€ç§å½¢è±¡çš„åç§°ï¼Œæœ‰ç‚¹ç±»ä¼¼vueæ¸è¿›å¼æ¡†æ¶çš„æ„æ€ï¼›è¿™ç§æ–¹å¼å°±æ˜¯åªè¦åŠ è½½ä¸€ç‚¹ç´ æå°±æ·»åŠ åˆ°åœºæ™¯ä¸­æ¥ï¼Œæ¯”å¦‚åŠ è½½ä¸€ä¸ªæ¤…å­ä¸Šçš„å«å­æ¨¡å‹ï¼Œå°±æŠŠè¿™ä¸ªå«å­æ·»åŠ è¿›æ¥å±•ç¤ºï¼Œå°½ç®¡å«å­çš„çº¹ç†å¯èƒ½è¿˜æ²¡æœ‰åŠ è½½å¥½ã€‚ é€šè¿‡æè¿°ï¼Œæˆ‘ä»¬å°±ä¼šå‘ç°è¿™ç§æ–¹å¼ä¼šæ¯”å‰é¢çš„é¢„åŠ è½½çš„æ–¹å¼éº»çƒ¦ï¼Œå› ä¸ºä¸ç¡®å®šæ¨¡å‹æ–‡ä»¶å’Œçº¹ç†æ–‡ä»¶å“ªä¸ªå…ˆåŠ è½½å®Œæˆï¼Œå¹¶ä¸”è¿˜éœ€è¦ç­‰åŠ è½½å®Œæˆåï¼Œå†æŠŠä¸¤è€…ç»“åˆèµ·æ¥ã€‚ ä½†æ˜¯è¿™ç§æ–¹å¼çš„ä¼˜åŠ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œç”¨æˆ·ä¸ç”¨æ¼«é•¿çš„ç­‰å¾…æ‰€æœ‰ç´ æåŠ è½½å®Œæˆï¼Œå¯ä»¥ä¸€ç‚¹ä¸€ç‚¹çœ‹åˆ°æ¨¡å‹åŠ è½½çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ­ç§¯æœ¨çš„æ„Ÿè§‰ï¼›é¦–å…ˆæˆ‘ä»¬è¿˜æ˜¯éœ€è¦é€šè¿‡LoadingManageråŠ è½½ç®¡ç†å™¨ï¼ŒåŠ è½½è¿‡ç¨‹ä¸­åœ¨é¡µé¢ä¸­é—´æ˜¾ç¤ºä¸€ä¸ªåœ†å½¢çš„è¿›åº¦æ¡å’Œç™¾åˆ†æ¯”ï¼š 1234567891011121314151617const loadingManager = new LoadingManager();this.objLoader = new OBJLoader(loadingManager);this.imgLoader = new ImageLoader(loadingManager);loadingManager.onStart = () =&gt; &#123; // æ˜¾ç¤ºè¿›åº¦æ¡ showLoading.value = true;&#125;;loadingManager.onProgress = (url, num, total) =&gt; &#123; // è¿›åº¦æ¡ç™¾åˆ†æ¯” loadingNum.value = Math.floor(num / total * 100);&#125;;loadingManager.onLoad = () =&gt; &#123; // éšè—è¿›åº¦æ¡ showLoading.value = false;&#125;;this.loadAssets(); æˆ‘ä»¬åœ¨onLoadå›è°ƒä¸­ä¹Ÿä¸éœ€è¦åˆå§‹åŒ–ç½‘æ ¼å¯¹è±¡äº†ï¼Œæ‰€æœ‰æ¨¡å‹å’Œçº¹ç†çš„åŠ è½½éƒ½æ˜¯åœ¨loadAssetsä¸­å®Œæˆçš„ã€‚è¿™é‡Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦TextureLoaderäº†ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸€ä¸ªImageLoaderå›¾ç‰‡åŠ è½½å™¨æ¥åŠ è½½å›¾ç‰‡ï¼Œæˆ‘ä»¬ä¸‹é¢ä¼šçœ‹åˆ°å®ƒçš„ä½œç”¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637&#123; loadAssets() &#123; this.leatherTexture = new Texture(); this.leatherBump = new Texture(); this.group = new Object3D(); this.imgLoader.load(&quot;leather_white.jpg&quot;, (img) =&gt; &#123; this.leatherTexture.image = img; // çœç•¥å…¶ä»– &#125;); this.imgLoader.load(&quot;leather_bump.jpg&quot;, (img) =&gt; &#123; this.leatherBump.image = img; // çœç•¥å…¶ä»– &#125;); // åå«æ¨¡å‹ this.objLoader.load( &quot;barcelona-cushion.obj&quot;, (obj) =&gt; &#123; obj.traverse((el) =&gt; &#123; if (el instanceof Mesh) &#123; el.material = new MeshStandardMaterial(&#123; map: this.leatherTexture, bumpMap: this.leatherBump, // çœç•¥å…¶ä»–å±æ€§ &#125;); &#125; &#125;); this.group.add(obj); &#125; ); // çœç•¥åŠ è½½å…¶ä»–éƒ¨ä»¶ this.scene.add(this.group); &#125;,&#125;; è¿™è¾¹æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§ç±»å‹åª’ä»‹å¯¹è±¡ï¼Œé¦–å…ˆå°±æ˜¯é€šè¿‡Textureç±»åˆ›å»ºçš„leatherTextureå’ŒleatherBumpç©ºæè´¨å¯¹è±¡ï¼Œä½œä¸ºå›¾ç‰‡å’Œæ¨¡å‹ä¹‹é—´çš„åª’ä»‹ï¼›å¦‚æœä¸Šé¢çš„jpgå›¾ç‰‡è¿˜æ²¡æœ‰åŠ è½½ï¼Œé‚£ä¹ˆbarcelona-cushion.objåŠ è½½ç©ºçš„æè´¨ï¼Œåœ¨å›¾ç‰‡åŠ è½½å®Œæˆåå†ç»™Textureçš„imageå±æ€§èµ‹å€¼ï¼Œå› æ­¤æ¨¡å‹çš„åŠ è½½å°±å’Œçº¹ç†çš„åŠ è½½è¿›è¡Œäº†è§£è€¦ã€‚ ä¿®æ”¹äº†çº¹ç†çš„imageå±æ€§åï¼Œä¸è¦å¿˜è®°ä¿®æ”¹needsUpdateã€‚ å…¶æ¬¡å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„Object3Då¯¹è±¡ï¼Œå®ƒå¯ä»¥ä½œä¸ºæ•´ä¸ªæ¨¡å‹åŠ è½½çš„åª’ä»‹ï¼›å‡è®¾ä¸‹é¢è¿˜æœ‰å…¶ä»–çš„objæ¨¡å‹ï¼Œä¸ç®¡å“ªä¸ªæ¨¡å‹å…ˆåŠ è½½å®Œæˆï¼Œéƒ½ä¼šå‘è¿™ä¸ªå±€éƒ¨ç©ºé—´ä¸­å»æ·»åŠ ç½‘æ ¼å¯¹è±¡ï¼›æˆ‘ä»¬æ¥çœ‹ä¸‹æ¨¡å‹ä¸€ç‚¹ç‚¹åŠ è½½çš„æ•ˆæœï¼š æ¤…å­æ¨¡å‹åŠ è½½å®Œæˆåï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ¥æ”¹å˜å®ƒçš„çº¹ç†ï¼Œä¸è¿‡å’Œä¸Šé¢ç›´æ¥æ”¹å˜æè´¨çš„mapå±æ€§ä¸åŒï¼Œè¿™é‡Œåªéœ€è¦åŠ è½½å›¾ç‰‡åç›´æ¥ä¿®æ”¹å…¨å±€çš„Textureçš„imageå±æ€§å³å¯ã€‚ 123456789101112131415161718192021222324&#123; initGui() &#123; const _this = this; this.gui = initGui(); const params = &#123; White() &#123; _this.imgLoader.load(&quot;leather_white.jpg&quot;, (img) =&gt; &#123; _this.leatherTexture.image = img; // çœç•¥å…¶ä»– &#125;); &#125;, Black() &#123; _this.imgLoader.load(&quot;leather_black.jpg&quot;, (img) =&gt; &#123; _this.leatherTexture.image = img; // çœç•¥å…¶ä»– &#125;); &#125;, &#125;; const folder = this.gui.addFolder(&quot;çš®é©é¢œè‰²&quot;); folder.add(params, &quot;White&quot;); folder.add(params, &quot;Black&quot;); &#125;&#125; æˆ‘ä»¬åœ¨åˆ‡æ¢çº¹ç†çš„æ—¶å€™ï¼ŒImageLoaderä¹Ÿä¼šè§¦å‘åŠ è½½å™¨çš„å›è°ƒå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°ä¸€ä¸ªåŠ è½½loadingï¼›æˆ‘ä»¬çœ‹ä¸‹å®é™…çš„é¡µé¢æ•ˆæœï¼š åˆ‡æ¢é¢œè‰²æˆ–çº¹ç† æœ€åä¸€æŠŠæ¤…å­æ¡ˆä¾‹ï¼Œä¹Ÿæ¯”è¾ƒæœ‰æ„æ€ï¼Œé€‰æ‹©ä¸åŒæ¤…å­éƒ¨ä½åï¼Œå¯ä»¥åˆ‡æ¢ä¸åŒçš„æè´¨æˆ–è€…é¢œè‰²ï¼›è¿™é‡Œæˆ‘ä»¬åŠ è½½å®ƒçš„æ¨¡å‹ï¼Œç»™æ¯ä¸ªéƒ¨ä»¶é‡æ–°åˆ›å»ºä¸€ä¸ªMeshPhongMaterialçš„æè´¨ï¼š 12345678910111213this.gltfLoader.load(&quot;chair.glb&quot;, (gltf) =&gt; &#123; const theModel = gltf.scene; theModel.traverse((el) =&gt; &#123; if (el.isMesh) &#123; el.material = new MeshPhongMaterial(&#123; color: 0xf1f1f1, shininess: 10 &#125;); &#125; &#125;); // çœç•¥å…¶ä»–ä»£ç  this.theModel = theModel; this.scene.add(theModel);&#125;); åŠ è½½å¯ä»¥çœ‹ä¸‹æ¤…å­çš„æ¨¡å‹å¤–è§‚ï¼š å½“æˆ‘ä»¬ç‚¹å‡»å³ä¾§çš„æ—¶å€™ï¼Œå°†æ¤…å­æ¿€æ´»çš„éƒ¨ä½ä¿å­˜èµ·æ¥ã€‚ 123456&#123; // è®¾ç½®å·¦ä¾§é€‰ä¸­çš„éƒ¨ä½ setOptions(opt) &#123; this.active = opt; &#125;&#125; å½“ç‚¹å‡»ä¸‹é¢æè´¨å’Œé¢œè‰²çš„é€‰é¡¹æ—¶ï¼Œæ ¹æ®itemçš„textureå±æ€§ï¼Œåˆ¤æ–­æ˜¯çº¹ç†è¿˜æ˜¯é¢œè‰²ï¼Œå¦‚æœæ˜¯çº¹ç†çš„è¯åŠ è½½Textureï¼›å¦‚æœæ˜¯é¢œè‰²çš„è¯ï¼Œä¼ å…¥colorï¼Œæœ€åéƒ½ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„MeshPhongMaterialï¼š 1234567891011121314151617181920212223&#123; // è®¾ç½®ä¸‹æ–¹æè´¨å’Œé¢œè‰² setControls(item) &#123; const &#123; texture, color, size, shininess = 10 &#125; = item; let new_mtl = null; if (texture) &#123; const txt = this.textureLoader.load(texture); txt.repeat.set(size[0], size[1]); txt.wrapS = txt.wrapT = RepeatWrapping; new_mtl = new MeshPhongMaterial(&#123; map: txt, shininess, &#125;); &#125; else if (color) &#123; new_mtl = new MeshPhongMaterial(&#123; color: parseInt(`0x$&#123;color&#125;`), shininess, &#125;); &#125; &#125;&#125; æœ€ååœ¨æ¨¡å‹theModelä¸­æ‰¾åˆ°å¯¹åº”çš„æ¤…å­éƒ¨ä»¶ï¼Œä¿®æ”¹materialä¸ºæ–°çš„æè´¨å³å¯ã€‚ 123456789101112&#123; setControls(item) &#123; // å…¶ä»–ä»£ç  if (new_mtl &amp;&amp; this.theModel) &#123; this.theModel.traverse((el) =&gt; &#123; if (el.isMesh &amp;&amp; el.name === this.active) &#123; el.material = new_mtl; &#125; &#125;); &#125; &#125;&#125; æˆ‘ä»¬çœ‹ä¸‹å®é™…çš„é¡µé¢æ•ˆæœï¼š æ€»ç»“ é€šè¿‡ä»¥ä¸Šå‡ ä¸ªæ¡ˆä¾‹ï¼Œè¿™é‡Œç¬”è€…ç®€å•çš„æ€»ç»“ä¸€ä¸‹ï¼›æˆ‘ä»¬å‘ç°å…¶å®åˆ‡æ¢çº¹ç†çš„æ–¹å¼å¾ˆç®€å•ï¼Œæ— éæ˜¯ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä¿®æ”¹æè´¨çš„mapå±æ€§ï¼Œå¦ä¸€ç§å°±æ˜¯ä¿®æ”¹çº¹ç†çš„imageå±æ€§ã€‚ æ¸è¿›åŠ è½½æ–¹å¼ç¡®å®æ¯”è¾ƒæœ‰æ„æ€ï¼Œé€šè¿‡ä¿®æ”¹çº¹ç†imageå±æ€§ï¼Œèƒ½è®©ç”¨æˆ·çœ¼å‰ä¸€äº®çš„æ„Ÿè§‰ï¼›ä½†æ˜¯å¦‚æœåªåŠ è½½ä¸€ä¸ªä¸¤ä¸ªæ¨¡å‹ï¼Œå…¶å®åº”ç”¨çš„ç©ºé—´ä¹Ÿä¸æ˜¯å¾ˆå¤§ï¼Œå› ä¸ºå®ƒéœ€è¦å»å¼€è¾Ÿä¸€ä¸ªå±€éƒ¨ç©ºé—´æ¥æ·»åŠ å¾ˆå¤šçš„æ¨¡å‹å’Œæè´¨ã€‚ å› æ­¤ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬çš„æ¨¡å‹ä¸æ˜¯å¾ˆå¤æ‚çš„æƒ…å†µä¸‹ï¼Œä¼šé€‰æ‹©ä¸€æ¬¡æ€§çš„å»åŠ è½½æ¨¡å‹çº¹ç†ï¼›å½“éœ€è¦ä¿®æ”¹å“ªä¸ªéƒ¨ä½çš„çº¹ç†æ—¶ï¼Œä½¿ç”¨traverseéå†æ¨¡å‹åä¿®æ”¹å¯¹åº”çš„mapå±æ€§å³å¯ã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€æ¤…å­æ¨¡å‹æ¢è‚¤ã€‘å³å¯è·å–ã€‚ å‚è€ƒ æœ€åæ„Ÿè°¢ä¸‹é¢ç½‘ç«™çš„æ¨¡å‹å’Œç´ æï¼Œç¬”è€…ç”¨ä»¥å­¦ä¹ å’Œç ”ç©¶ã€‚ threedpad.comtympanus.net","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"æµè§ˆç½‘ç«™æ—¶ä¸ºä»€ä¹ˆè€æ˜¯è¦æˆ‘æ¥å—Cookie","date":"2024-11-02T04:00:00.000Z","path":"2024/11/02/Accept-Cookie.html","text":"æˆ‘ä»¬åœ¨æµè§ˆç½‘ç«™æ—¶ï¼Œå°¤å…¶æ˜¯ä¸€äº›å›½å¤–ç½‘ç«™çš„æ—¶å€™ï¼Œç»å¸¸ä¼šå‡ºç°è¿™æ ·çš„å¼¹æ¡†ï¼Œæé†’ä½ æ¥å—å…¨éƒ¨Cookieï¼›å¦‚æœä¸æ¥å—ï¼Œæœ‰äº›å¼¹æ¡†ç”šè‡³ä¼šä¸€ç›´å‡ºç°ï¼Œä¸è®©ä½ è®¿é—®ï¼›é‚£ä¹ˆè¿™ä¸ªå¼¹æ¡†ä¸ºä»€ä¹ˆè¦å‡ºç°å‘¢ï¼Ÿå¦‚æœä½ æ¥å—äº†ï¼Œå¯¹ä½ åç»­æµè§ˆç½‘ç«™ä¼šæœ‰å•¥å½±å“å‘¢ï¼Ÿä½ çš„éšç§æ˜¯å¦ä¼šæ³„éœ²å‘¢ï¼Ÿå¸¦ç€è¿™ä¹ˆå¤šçš„ç–‘æƒ‘æœ¬æ–‡å°±å¸¦ä½ ä¸€æ¢ç©¶ç«Ÿã€‚ Cookie é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ä»€ä¹ˆæ˜¯Cookieï¼Ÿç›¸ä¿¡å¯¹äºå¾ˆå¤šWebå¼€å‘çš„åŒå­¦ï¼Œå°¤å…¶æ˜¯å‰ç«¯å°ä¼™ä¼´æ¥è¯´ï¼ŒCookieå¹¶ä¸é™Œç”Ÿï¼›å¾ˆå¤šå¼€å‘åŒå­¦åˆšä¸Šæ‰‹åšé¡¹ç›®çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨è¿‡å¾ˆå¤šç¬¬ä¸‰æ–¹çš„åº“å¯¹Cookieè¿›è¡Œè¿‡å­˜å‚¨æ“ä½œï¼›æ ¹æ®MDNä¸Šå¯¹Cookieçš„è§£é‡Šï¼š HTTP Cookieæ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„ä¸€å°å—æ•°æ®ã€‚æµè§ˆå™¨ä¼šå­˜å‚¨ cookie å¹¶åœ¨ä¸‹æ¬¡å‘åŒä¸€æœåŠ¡å™¨å†å‘èµ·è¯·æ±‚æ—¶æºå¸¦å¹¶å‘é€åˆ°æœåŠ¡å™¨ä¸Šã€‚é€šå¸¸ï¼Œå®ƒç”¨äºå‘ŠçŸ¥æœåŠ¡ç«¯ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€æµè§ˆå™¨ï¼Œå¦‚ä¿æŒç”¨æˆ·çš„ç™»å½•çŠ¶æ€ã€‚ å…¶å®è¯´åˆ°åº•ï¼ŒCookieå°±æ˜¯ç½‘ç«™åœ¨æˆ‘ä»¬æµè§ˆå™¨ä¸­å­˜å‚¨çš„ä¸€å°å—å­—ç¬¦ä¸²æ•°æ®è€Œå·²ï¼Œä¸€èˆ¬æ€»çš„å¤§å°ä¹Ÿå°±é™åˆ¶åœ¨å‡ MBä»¥å†…ï¼›å®ƒåˆšå¼€å§‹åªæ˜¯è®©ç½‘ç«™èƒ½å¤Ÿç¡®è®¤è®¿é—®çš„ç”¨æˆ·èº«ä»½ï¼Œå› ä¸ºæˆ‘ä»¬éƒ½çŸ¥é“Httpè¯·æ±‚æ˜¯æ— çŠ¶æ€çš„ï¼Œå¹¶ä¸èƒ½ç¡®è®¤æ˜¯å“ªä¸ªè¯·æ±‚æ˜¯å“ªä¸ªç”¨æˆ·å‘èµ·çš„ï¼›ä½†åœ¨è¯·æ±‚ä¸Šå¸¦äº†Cookieä¹‹åï¼Œå°±èƒ½å¤Ÿç¡®è®¤ç”¨æˆ·èº«ä»½ã€‚ Cookieä¸»è¦ä»¥é”®å€¼å¯¹çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œå¦‚name=jackï¼Œæˆ‘ä»¬æ‰“å¼€é¢æ¿æŸ¥çœ‹æ·˜å®ç½‘çš„Cookieï¼š æˆ‘ä»¬ä¼šçœ‹åˆ°å¾ˆå¤šçš„Nameå’ŒValueï¼Œè¿™é‡Œæœ‰ä¸åŒçš„å­—æ®µæˆ‘ä»¬çœ‹ä¸‹å®ƒä»¬æ‰€ä»£è¡¨çš„å«ä¹‰ï¼š Nameï¼šCookieçš„åç§°ã€‚ Valueï¼šCookieçš„å€¼ã€‚ Domainï¼šå¯ä»¥è®¿é—®è¯¥Cookieçš„åŸŸåã€‚ Pathï¼šCookieçš„è®¿é—®è·¯å¾„ã€‚ Expiresï¼šå¤±æ•ˆæ—¶é—´ã€‚ Sizeï¼šCookieå¤§å°ã€‚ Secureï¼šæ ‡è®°ä¸ºSecureçš„Cookieåªé€šè¿‡HTTPSè¯·æ±‚å‘é€ç»™æœåŠ¡ç«¯ã€‚ SameSiteï¼šå…è®¸æœåŠ¡å™¨è®¾å®šCookieä¸éšç€è·¨ç«™è¯·æ±‚ä¸€èµ·å‘é€ã€‚ Priorityï¼šä¼˜å…ˆçº§ã€‚ è¿™é‡Œå­—æ®µæ¯”è¾ƒå¤šï¼Œä¾‹å¦‚Expiresã€Pathç­‰ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨å¼€å‘ä¸­æ‰ä¼šç”¨åˆ°çš„ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šä»‹ç»äº†ï¼›æˆ‘ä»¬ç€é‡æ¥ä»‹ç»ä¸‹Domainå­—æ®µï¼Œå› ä¸ºæœ¬æ–‡åé¢çš„å†…å®¹ä¸»è¦éƒ½æ˜¯å›´ç»•ç€è¿™ä¸ªå­—æ®µæ‰€å±•å¼€çš„ã€‚ è¿™é‡Œå‡è®¾æˆ‘ç½‘ç«™çš„åŸŸåæ˜¯example.comï¼Œæˆ‘ç»™Domainè®¾ç½®çš„æ˜¯.example.comï¼Œé‚£ä¹ˆæˆ‘æ‰€æœ‰example.comå­åŸŸåä¸‹é¢çš„ç½‘ç«™éƒ½æ˜¯èƒ½å…±äº«Cookieçš„ï¼Œæ¯”å¦‚a.example.comå’Œb.example.comï¼Œè¿™ç§ä¸€èˆ¬ç”¨äºå¾ˆå¤šä¸ªé¡¹ç›®å•ç‚¹ç™»é™†ï¼Œé¿å…ç”¨æˆ·åœ¨ç±»ä¼¼çš„ç½‘ç«™ä¸Šé‡å¤ç™»é™†ã€‚ ä¸€ä¸ªä¸å¤ªå…¸å‹çš„æ¡ˆä¾‹å°±æ˜¯æ·˜å®ç½‘å’Œå¤©çŒ«ç½‘ï¼Œè™½ç„¶ä»–ä»¬ä¿©æ˜¯ä¸¤ä¸ªåŸŸåï¼Œä½†æ˜¯éƒ½å±äºé˜¿é‡Œæ——ä¸‹ï¼Œæˆ‘ä»¬åœ¨ä¸€ä¸ªç½‘ç«™ç™»é™†åå°±å¯ä»¥è®¿é—®å¦å¤–çš„ç½‘ç«™äº†ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸Šå›¾ä¸­å°±èƒ½çœ‹åˆ°ï¼Œç¬”è€…æ˜¯åœ¨æ·˜å®ç™»é™†åçš„ï¼Œèƒ½çœ‹åˆ°ä¸å°‘çš„.tmall.comçš„Cookieï¼›å†å»è®¿é—®å¤©çŒ«ä¹Ÿæ˜¯å…ç™»é™†çš„ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ç½‘ç«™çš„åŸŸåæ˜¯example.comï¼Œä½†æ˜¯æˆ‘ç»™Domainè®¾ç½®çš„æ˜¯å…¶ä»–çš„ç½‘å€ï¼Œé‚£è¿™é‡Œé¢å¯æ“ä½œçš„ç©ºé—´å°±å¾ˆå¤§äº†ï¼Œå¦‚æœæ˜¯æˆ‘ä»¬æµè§ˆçš„ç½‘ç«™è‡ªå·±è·Ÿè¸ªå­˜å‚¨çš„Cookieï¼Œæˆ‘ä»¬ä¸€èˆ¬å«åšç¬¬ä¸€æ–¹Cookieï¼Œè¿™ä¸ªå…¶å®è¿˜ç®—æ­£å¸¸ã€‚ ä½†æ˜¯ï¼Œå¦‚æœå­˜å‚¨çš„Cookieå¯è®¿é—®åœ°å€ä¸æ˜¯æˆ‘ä»¬å½“å‰è®¿é—®çš„ç½‘ç«™ï¼Œè€Œæ˜¯åˆ«çš„ä»€ä¹ˆç½‘ç«™ï¼Œè¿™é‡Œå°±éœ€è¦ç‰¹åˆ«ç•™æ„äº†ï¼Œæ˜¯ä¸æ˜¯æŠŠæˆ‘ä»¬çš„æµè§ˆè®°å½•æä¾›ç»™å‹å•†äº†ï¼Œè¿™ç§Cookieå°±å«åšï¼šç¬¬ä¸‰æ–¹Cookieã€‚ ç¬¬ä¸‰æ–¹Cookie å¾ˆå¤šå°ä¼™ä¼´ç›¸ä¿¡éƒ½æœ‰è¿™æ ·çš„ç»å†ï¼Œæˆ‘åœ¨æœç´¢å¹³å°æœç´¢æŸæ ·ä¸œè¥¿ï¼Œæ²¡è¿‡å¤šä¹…ï¼Œä¼šåœ¨è´­ç‰©å¹³å°ä¸Šç«‹å³æ¨é€ç»™æˆ‘ï¼Œæˆ–è€…æˆ‘åœ¨è´­ç‰©å¹³å°æœç´¢äº†æŸæ ·ä¸œè¥¿ï¼Œåœ¨æµè§ˆå™¨çš„å¹¿å‘Šä¸­åˆä¼šç»™æˆ‘æ¨é€ï¼›ç¡®å®ï¼Œè¿™å…¶ä¸­èµ·åˆ°ä½œç”¨çš„å°±æ˜¯ä¸Šé¢æåˆ°çš„ç¬¬ä¸‰æ–¹Cookie é‚£ä¹ˆç¬¬ä¸‰æ–¹Cookieæ˜¯å¦‚ä½•ç”Ÿæˆçš„å‘¢ï¼Ÿä¸»è¦æ˜¯é€šè¿‡ä¸¤ç§æ–¹å¼ï¼›ç¬¬ä¸€ç§å°±æ˜¯ä½¿ç”¨Javascriptçš„document.cookieçš„æ–¹å¼å†™å…¥ï¼Œè¿™ç§æ–¹å¼ä¸€èˆ¬æ˜¯ä¸¤æ–¹åŒå±ä¸€ä¸ªé›†å›¢æˆ–è€…ä¸€å®¶å…¬å¸ï¼Œå› ä¸ºè¿™é‡Œé¢æ¶‰åŠåˆ°æ•°æ®çš„ä¼ è¾“å’ŒåŠ å¯†æ–¹å¼ï¼›æˆ‘ä»¬å­˜å‚¨åˆ°Cookieä¸­çš„æ•°æ®ä¸€èˆ¬éƒ½ä¼šç»è¿‡åŠ å¯†ï¼Œå¦‚æœæ˜¯ä¸¤å®¶å…¬å¸ï¼Œæˆ‘ä¸å¤ªå¯èƒ½æŠŠæˆ‘çš„åŠ å¯†æ–¹å¼ä¹Ÿå‘Šè¯‰ä½ ï¼›é¡¶å¤šç»™ä½ ä¸€ä¸ªnpmåŒ…ï¼Œè®©ä½ æ¥è°ƒç”¨ï¼Œä½†è¿™é‡Œé¢å°±æ¶‰åŠä»£ç é€»è¾‘äº†ï¼Œè¿™å°±æ¯”è¾ƒå¤æ‚äº†ã€‚ å¦ä¸€ç§æ–¹å¼å°±æ˜¯é€šè¿‡æœåŠ¡ç«¯æ¥åœ¨è¯·æ±‚ä¸­å¸¦ä¸ŠSet-Cookieå­—æ®µè¿›è¡Œè®¾ç½®ï¼Œè¿™ç§æ–¹å¼ä¸ä¼šä¾µå…¥å¤ªå¤šçš„ä»£ç ï¼Œåªéœ€è¦åœ¨é¡µé¢ä¸Šå‘ç¬¬ä¸‰æ–¹èµ„æºå‘èµ·ä¸€ä¸ªè¯·æ±‚å³å¯ï¼Œä¸€èˆ¬è¿™ä¸ªè¯·æ±‚è¿”å›çš„èµ„æºä¹Ÿæ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚ä¸€ä¸ªå‡ kbçš„gifå›¾ç‰‡ã€‚ æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢æ·˜å®ç½‘ä¸­çœ‹åˆ°å¾ˆå¤šCookieéƒ½æŒ‡å‘äº†.mmstat.comåŸŸåï¼Œç„¶åæˆ‘ä»¬æœç´¢è¯·æ±‚è®°å½•ä¼šçœ‹åˆ°taobao.comå‘è¿™ä¸ªåŸŸåä¸‹å‘é€äº†å¾ˆå¤šçš„å›¾ç‰‡èµ„æºï¼Œä½†æ˜¯å•¥éƒ½æ²¡æœ‰è¿”å›ï¼Œåè€Œåœ¨å“åº”å¤´ä¸­å¸¦äº†å¾ˆå¤šçš„Set-Cookieå†…å®¹ã€‚ è¿™æ ·å°±å¾ˆæ˜æ˜¾äº†ï¼Œmmstatåº”è¯¥å°±æ˜¯æ·˜å®æ——ä¸‹çš„ç»Ÿè®¡ä»¥åŠå¹¿å‘Šè·Ÿè¸ªçš„å¹³å°ï¼Œç¬”è€…æ‰¾äº†ç½‘ä¸Šä¸å°‘èµ„æ–™ï¼Œå¤§æ¦‚ç‡æ˜¯å¤§æ•°æ®è¥é”€å¹³å°é˜¿é‡Œå¦ˆå¦ˆç»Ÿè®¡ï¼ˆAlimama Statisticï¼‰çš„ç¼©å†™ã€‚ GDPR è¯´äº†è¿™ä¹ˆå¤šçš„Coookieçš„çŸ¥è¯†ï¼Œè¿™å’Œæˆ‘ä»¬çš„å¼¹çª—æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿè¿™é‡Œå°±è¦è¯´åˆ°æ¬§ç›Ÿå‡ºå°çš„ä¸€éƒ¨é‡è¦çš„æ•°æ®å®‰å…¨ä¿æŠ¤æ¡ä¾‹ï¼Œä¹Ÿå°±æ˜¯ï¼šã€Šé€šç”¨æ•°æ®ä¿æŠ¤æ¡ä¾‹ã€‹ï¼ˆGeneral Data Protection Regulationï¼Œä¸‹é¢ç®€ç§°GDPRï¼‰ï¼Œå®ƒå–ä»£çš„æ˜¯1995å¹´æ¨å‡ºçš„æ¬§ç›Ÿã€Šæ•°æ®ä¿æŠ¤æŒ‡ä»¤ã€‹ã€‚ è¿™éƒ¨æ³•ä¾‹æ˜¯åœ¨2016å¹´4æœˆ14æ—¥äºæ¬§ç›Ÿè®®ä¼šä¸Šæ­£å¼é€šè¿‡ï¼Œå¹¶äº2018å¹´5æœˆ25æ—¥åœ¨æ¬§ç›Ÿæˆå‘˜å›½å†…æ­£å¼ç”Ÿæ•ˆå®æ–½çš„ï¼›æˆ‘ä»¬å‘ç°è¿™éƒ¨æ³•ä¾‹å’Œ1995å¹´çš„ã€Šæ•°æ®ä¿æŠ¤æŒ‡ä»¤ã€‹åœ¨æ—¶é—´è·¨åº¦ä¸Šæœ‰20å¹´ä¹‹ä¹…ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“åœ¨è¿™20å¹´é—´äº’è”ç½‘å‘ç”Ÿäº†å¤©ç¿»åœ°è¦†çš„æ”¹å˜ï¼ŒåŒæ—¶ä¹Ÿå‘ç”Ÿè¿‡å¾ˆå¤šå¤§ä¼ä¸šæ•°æ®æ³„éœ²çš„é‡å¤§å®‰å…¨éšæ‚£ï¼Œå› æ­¤åŸæ¥çš„æ³•å¾‹å¯¹æ•°æ®çš„ä¿æŠ¤å·²ç»è·Ÿä¸ä¸Šæ—¶ä»£çš„å‘å±•äº†ã€‚ æ­£æ˜¯ç”±äºGDPRçš„å‡ºå°ï¼Œä¸¥æ ¼è§„èŒƒå’Œé™åˆ¶äº†ä¼ä¸šåœ¨ä¸ªäººæ•°æ®çš„é‡‡é›†ã€å­˜å‚¨ã€å¤„ç†ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œå› æ­¤æˆ‘ä»¬æ‰èƒ½çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¸Šå‡ºç°çš„æ¥å—Cookieçš„å¼¹æ¡†ï¼›è¿™é‡Œé¢çš„å†…å®¹å¾ˆå¤šï¼ŒåŒ…å«äº†10ä¸ªç« èŠ‚ï¼Œ99æ¬¾æ¡ä¾‹ï¼Œæœ¬æ–‡æŒ‘å…¶ä¸­ä¸€äº›é‡è¦çš„ç»†èŠ‚æ¥ç®€å•è®²è§£ä¸€ä¸‹ï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åœ¨ä¸‹é¢å‚è€ƒä¸­æ‰¾åˆ°GDPRä¸­æ–‡ç‰ˆå…¨æ–‡ã€‚ é¦–å…ˆå°±æ˜¯è¿™éƒ¨æ³•å¾‹çš„é€‚ç”¨èŒƒå›´ï¼Œå“ªäº›ä¼ä¸šé€‚ç”¨å‘¢ï¼Ÿä¸»è¦æ˜¯ä¸¤æ–¹é¢ï¼š æ¬§ç›Ÿå¢ƒå†…æˆç«‹çš„ä»»ä½•ä¸€å®¶ä»äº‹ä¸ªäººæ•°æ®å¤„ç†æ´»åŠ¨çš„å…¬å¸æˆ–å®ä½“ã€‚ åœ¨æ¬§ç›Ÿå¢ƒå¤–æˆç«‹çš„å…¬å¸ï¼Œåªè¦å…¶æ•°æ®å¤„ç†æ´»åŠ¨ä¸å‘æ¬§ç›Ÿå¢ƒå†…çš„ä¸ªä½“æä¾›äº§å“æˆ–æœåŠ¡ã€‚ ä¹Ÿå°±æ˜¯è¯´ä¸ç®¡ä½ çš„å…¬å¸æˆç«‹æ˜¯å¦åœ¨æ¬§ç›Ÿå¢ƒå†…ï¼Œåªè¦ä½ åœ¨æ¬§ç›Ÿå¢ƒå†…å¼€å±•äº†ä¸šåŠ¡ï¼Œé‚£ä½ éƒ½ä¼šè¢«è¿™éƒ¨æ³•å¾‹æ‰€çº¦æŸï¼›é‚£ä¹ˆå®ƒç©¶ç«Ÿçº¦æŸä½ å»åšä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­æ¥çœ‹ä¸‹ã€‚ é¦–å…ˆï¼Œä¼ä¸šåœ¨æ”¶é›†ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯ä¹‹å‰ï¼Œåº”å½“ä»¥ä¸€ç§ç®€æ´ã€é€æ˜ã€æ˜“æ‡‚å’Œå®¹æ˜“è·å–çš„å½¢å¼ï¼Œä»¥æ¸…æ™°å’Œå¹³ç™½çš„è¯­è¨€å‘ç”¨æˆ·è¯´æ˜ï¼š å°†æ”¶é›†ç”¨æˆ·çš„å“ªäº›ä¿¡æ¯ï¼› æ”¶é›†åˆ°çš„ä¿¡æ¯å°†å¦‚ä½•è¿›è¡Œå­˜å‚¨ï¼› å­˜å‚¨çš„ä¿¡æ¯ä¼šå¦‚å¦‚ä½•ä½¿ç”¨ï¼› ä¼ä¸šçš„è”ç³»æ–¹å¼ï¼› ä¿¡æ¯åº”å½“ä»¥ä¹¦é¢å½¢å¼æˆ–å…¶ä»–å½¢å¼æä¾›ï¼ŒåŒ…æ‹¬åœ¨åˆé€‚çš„æƒ…å†µä¸‹é€šè¿‡ç”µå­æ–¹å¼æä¾›ã€‚ è¿™ç‚¹æ¯”è¾ƒé‡è¦äº†ï¼Œæ˜ç¡®è¯´æ˜äº†ä¿¡æ¯éœ€è¦é€šè¿‡ä¹¦é¢çš„å½¢å¼æ¥æä¾›ç»™ç”¨æˆ·ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€çœ‹åˆ°çš„å¼¹æ¡†çš„æ ¹æœ¬åŸå› æ‰€åœ¨ã€‚å…¶æ¬¡æ˜¯å¤„ç½šåŠ›åº¦ä¹Ÿæ˜¯ç›¸å½“å¤§çš„ï¼Œæ¡æ¬¾ä¸­æ˜ç¡®å†™é“ï¼š è¿åå¦‚ä¸‹æ¡æ¬¾ï¼Œåº”å½“æŒ‰ç¬¬2æ®µçš„è§„å®šæ–½åŠ æœ€é«˜2000ä¸‡æ¬§å…ƒçš„è¡Œæ”¿ç½šæ¬¾ï¼Œå¦‚æœæ˜¯ä¼ä¸šçš„è¯ï¼Œæœ€é«˜å¯å¤„ç›¸å½“äºå…¶ä¸Šä¸€å¹´å…¨çƒæ€»è¥ä¸šé¢4%çš„é‡‘é¢çš„ç½šæ¬¾ï¼Œä¸¤è€…å–å…¶é«˜çš„ä¸€é¡¹è¿›è¡Œç½šæ¬¾ã€‚ å¯¹äºä¸€äº›å¤§å…¬å¸ï¼Œè¿˜å‹‰å¼ºèƒ½å¤Ÿæ‰¿æ‹…è¿™æ ·çš„ç½šæ¬¾ï¼Œä½†æ˜¯å¯¹äºå°å…¬å¸ï¼Œè¿™ç§å¤„ç½šåŠ›åº¦å¯èƒ½å°±æ˜¯è‡´å‘½çš„äº†ï¼›æ¯”å¦‚è…¾è®¯QQå°±å‘å›½é™…ç‰ˆç”¨æˆ·å‘å¸ƒé€šçŸ¥ï¼Œå®£å¸ƒ5æœˆ20æ—¥èµ·åœæ­¢ä¸ºæ¬§æ´²ç”¨æˆ·æä¾›æœåŠ¡ï¼›éšååˆè¡¨ç¤ºï¼Œæ›´æ–°åˆ°5.0åŠä»¥ä¸Šç‰ˆæœ¬çš„QQå›½é™…ç‰ˆå¯ç»§ç»­ä½¿ç”¨ï¼Œæ—§ç‰ˆæœ¬åˆ™åœ¨5æœˆ20æ—¥åœæ­¢ä½¿ç”¨ã€‚ é¢å¯¹å¦‚æ­¤ä¸¥æ ¼çš„æ³•å¾‹ï¼Œå¾ˆå¤šä¼ä¸šä¹Ÿå°†è¿™æ ·çš„å¼¹æ¡†æ™®åŠåˆ°äº†å…¶ä»–å›½å®¶çš„ä¸šåŠ¡ï¼›æ¯”å¦‚æˆ‘ä»¬éƒ½çŸ¥é“Ubuntuæ˜¯ç”±ä¸€å®¶å—éçš„å…¬å¸Canonicalæ¥è¿è¥çš„ï¼Œä½†æ˜¯åœ¨æ¬§ç›Ÿä¹Ÿæä¾›äº†ç›¸å…³ä¸šåŠ¡ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å»Ubuntuå®˜ç½‘ä¸‹è½½æ—¶ä¹Ÿèƒ½çœ‹åˆ°è¿™æ ·çš„å¼¹æ¡†ã€‚ æˆ‘å›½ç°çŠ¶ è¯´äº†è¿™ä¹ˆå¤šGDPRçš„é™åˆ¶ï¼Œå¤§å®¶è‚¯å®šä¼šè§‰å¾—è¿˜æ˜¯è¥¿æ–¹çš„æœˆäº®åœ†å•Šï¼Œè¿˜æ˜¯è¥¿æ–¹ä¿æŠ¤äººæƒè‡ªç”±ï¼Œæˆ‘ä»¬å›½å†…çš„çš„æ³•å¾‹è¿˜æ˜¯ä¸å¤Ÿå®Œå–„ï¼Œéƒ½æ²¡æœ‰è¿™æ ·çš„å¼¹æ¡†æ¥ä¿æŠ¤æˆ‘çš„çŸ¥æƒ…æƒç›Šã€‚ ä½†å…¶å®ï¼Œä¸ºäº†é¿å…ä¸ªäººä¿¡æ¯æ³„éœ²ã€æ»¥ç”¨ç­‰é—®é¢˜ï¼Œå…¶å®æˆ‘ä»¬å›½å®¶ä»21å¹´å¼€å§‹ï¼Œä¹Ÿæ˜¯å‡ºå°äº†ç›¸å…³çš„æ³•å¾‹æ³•è§„ï¼Œåªæ˜¯æˆ‘ä»¬å¹³æ—¶ä¸å¤ªå»å…³æ³¨è€Œå·²ï¼Œè¿™éƒ¨æ³•å¾‹å°±æ˜¯ï¼šã€Šä¸­åäººæ°‘å…±å’Œå›½ä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ã€‹ï¼Œä¸‹é¢ç®€ç§°ã€Šä¿æŠ¤æ³•ã€‹ï¼Œä¸»è¦é€‚ç”¨äºåœ¨ä¸­åäººæ°‘å…±å’Œå›½å¢ƒå†…å¤„ç†è‡ªç„¶äººä¸ªäººä¿¡æ¯çš„æ´»åŠ¨ã€‚ ä¸ºäº†é¿å…æœ¬æ–‡ä»æŠ€æœ¯æ–‡ç« å˜æˆå†—é•¿ä¹å‘³çš„æ³•å¾‹è®²è§£æ–‡ç« ï¼Œå†µä¸”ç¬”è€…ä¹Ÿä¸æ˜¯ä¸“ä¸šçš„æ³•å¾‹å‡ºèº«ï¼Œå› æ­¤æ–—èƒ†å¼•ç”¨äº†ç½‘ä¸Šå‡ æ®µæ³•å¾‹æ¡æ–‡æ¥è§£é‡Šä¸€ä¸‹ï¼›é¦–å…ˆæ—¢ç„¶æ˜¯ä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ï¼Œé‚£ä¹ˆä»€ä¹ˆä¸ªäººä¿¡æ¯ï¼Œå®ƒåŒ…æ‹¬å“ªäº›å‘¢ï¼Ÿã€Šä¿æŠ¤æ³•ã€‹ä¸­æ˜ç¡®æŒ‡å‡ºäº†ï¼š ä¸ªäººä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”Ÿç‰©è¯†åˆ«ã€å®—æ•™ä¿¡ä»°ã€ç‰¹å®šèº«ä»½ã€åŒ»ç–—å¥åº·ã€é‡‘èè´¦æˆ·ã€è¡Œè¸ªè½¨è¿¹ç­‰ä¿¡æ¯ã€‚ æ²¡é”™ï¼Œæœ€åçš„è¡Œè¸ªè½¨è¿¹ï¼Œä»å®½æ³›çš„è§’åº¦æ¥è¯´ï¼Œå°±åŒ…æ‹¬äº†æˆ‘ä»¬çš„ç½‘é¡µæµè§ˆè®°å½•ç­‰ä¿¡æ¯ï¼Œå› ä¸ºè¿™äº›è®°å½•èƒ½å¤Ÿé—´æ¥æˆ–ç›´æ¥åœ°åæ˜ å‡ºä¸ªäººçš„èº«ä»½ã€å…´è¶£ã€è¡Œä¸ºç­‰ä¿¡æ¯ã€‚ é‚£ä¹ˆå¯¹äºä¸ªäººä¿¡æ¯ï¼Œã€Šä¿æŠ¤æ³•ã€‹æ˜¯æ€ä¹ˆæ¥åšå‡ºè¦æ±‚çš„å‘¢ï¼ŸåŸæ–‡ä¸­æœ‰è¯¦ç»†çš„è¯´æ˜ï¼š å¤„ç†æ•æ„Ÿä¸ªäººä¿¡æ¯åº”å½“å–å¾—ä¸ªäººçš„å•ç‹¬åŒæ„ï¼›æ³•å¾‹ã€è¡Œæ”¿æ³•è§„è§„å®šå¤„ç†æ•æ„Ÿä¸ªäººä¿¡æ¯åº”å½“å–å¾—ä¹¦é¢åŒæ„çš„ï¼Œä»å…¶è§„å®šã€‚ ä»¥å‘å¢ƒå†…è‡ªç„¶äººæä¾›äº§å“æˆ–è€…æœåŠ¡ä¸ºç›®çš„ï¼Œæˆ–è€…ä¸ºåˆ†æã€è¯„ä¼°å¢ƒå†…è‡ªç„¶äººçš„è¡Œä¸ºç­‰å‘ç”Ÿåœ¨æˆ‘å›½å¢ƒå¤–çš„ä¸ªäººä¿¡æ¯å¤„ç†æ´»åŠ¨ï¼Œä¹Ÿé€‚ç”¨æœ¬æ³•ã€‚ æ²¡é”™ï¼Œæœ€åä¸€æ¡å·²ç»è¯´å¾—å¾ˆæ˜ç¡®äº†ï¼Œåªè¦ä½ æ˜¯ä»¥æä¾›äº§å“æˆ–è€…æœåŠ¡ä¸ºç›®çš„çš„åˆ†æè¯„ä¼°æˆ‘çš„æµè§ˆè®°å½•ï¼Œé‚£ä½ å¿…é¡»è¦å–çš„æˆ‘çš„ä¹¦é¢åŒæ„ï¼Œå¦åˆ™å°±æ˜¯è¿æ³•è¡Œä¸ºã€‚ é‚£ä¹ˆæˆ‘ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚åŒæ„äº†å—ï¼Ÿæ²¡é”™ï¼Œæ‰“å¼€æ·˜å®ç½‘éšç§æ”¿ç­–ï¼Œæˆ‘ä»¬å°±èƒ½æ¸…æ¥šçš„çœ‹åˆ°å…¶ä¸­åŠ ç²—åŠ é»‘çš„æ¡æ–‡ã€‚ ç¬”è€…æ‘˜å½•ä¸€ä¸‹å…¶ä¸­æ¯”è¾ƒå…³é”®çš„ä¸¤æ¡ç»™å¤§å®¶çœ‹ä¸€ä¸‹ï¼š ä¸ºå‘æ‚¨å±•ç¤ºå’Œæ¨èæ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„å•†å“æˆ–æœåŠ¡ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šæ”¶é›†å’Œä½¿ç”¨æ‚¨åœ¨è®¿é—®æˆ–ä½¿ç”¨æ·˜å®å¹³å°ç½‘ç«™æˆ–å®¢æˆ·ç«¯æ—¶çš„æµè§ˆã€æœç´¢ã€åŠ è´­ã€äº¤æ˜“è®°å½•å¹¶ç»“åˆä¾æ³•æ”¶é›†çš„è®¾å¤‡ä¿¡æ¯ã€æœåŠ¡æ—¥å¿—ä¿¡æ¯ä»¥åŠå…¶ä»–å–å¾—æ‚¨æˆæƒçš„ä¿¡æ¯ï¼Œé€šè¿‡ç®—æ³•æ¨¡å‹é¢„æµ‹æ‚¨çš„åå¥½ç‰¹å¾ã€‚ æˆ‘ä»¬ä¼šåŸºäºæ‚¨çš„åå¥½ç‰¹å¾åœ¨æ·˜å®åŠå…¶ä»–ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºæˆ–ç»ˆç«¯å‘æ‚¨æ¨é€æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„å•†ä¸šå¹¿å‘ŠåŠå…¶ä»–ä¿¡æ¯ï¼Œæˆ–è€…å‘æ‚¨å‘é€å•†ä¸šæ€§æ¶ˆæ¯ã€‚æˆ‘ä»¬è¿˜ä¼šåŸºäºå¯¹æ·˜å®å¹³å°ç”¨æˆ·æµè§ˆã€æœç´¢å•†å“æˆ–æœåŠ¡çš„çƒ­ç‚¹ã€æ½®æµä¸è¶‹åŠ¿çš„ç»Ÿè®¡åˆ†æï¼Œä½¿ç”¨æ’åºç²¾é€‰ç±»ç®—æ³•å½¢æˆç›¸å…³ç²¾é€‰çš„æ¦œå•ï¼Œå¹¶å‘æ‚¨è¿›è¡Œæ¨èã€‚ éšç§æ”¿ç­–ä¸­å…¶å®ä¹Ÿå·²ç»è¯´çš„å¾ˆæ˜ç¡®äº†ï¼Œç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºæ¨é€æ„Ÿå…´è¶£çš„å•†ä¸šå¹¿å‘Šï¼›è€Œä¸”æˆ‘ä»¬åœ¨æ³¨å†Œç™»é™†çš„æ—¶å€™å°±å·²ç»æˆæƒè¿‡äº†ï¼Œåªæ˜¯å¤§å¤šæƒ…å†µä¸‹æ²¡æœ‰æ—¶é—´å»ä»”ç»†çœ‹ç½‘ç«™æ”¿ç­–é‡Œé¢è¯´çš„æ˜¯ä»€ä¹ˆï¼›ä½†æ˜¯è‡³äºæ˜¯å¦è¦åƒGDPRä¸­è§„å®šçš„é‚£æ ·ï¼Œéœ€è¦é€šè¿‡ä¸€ä¸ªæ˜ç¡®çš„å¼¹æ¡†ï¼Œè¿™ä¸ªéœ€è¦ä»å„æ–¹é¢æ¥ç»¼åˆè€ƒè™‘äº†ï¼Œä¾‹å¦‚ä¼ä¸šç»è¥æˆæœ¬ï¼Œéœ€è¦é¢å¤–çš„å¼€å‘æˆæœ¬ï¼Œä¸­å°ä¼ä¸šæ˜¯å¦æœ‰èƒ½åŠ›åº”å¯¹ï¼Œè¿˜æœ‰ç”¨æˆ·ä½¿ç”¨ä¹ æƒ¯ç­‰ç­‰æ–¹é¢ã€‚ æ€»ç»“ å› æ­¤çœ‹å®Œæœ¬æ–‡ï¼Œæˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿç¬”è€…è¿›è¡Œäº†å¦‚ä¸‹å‡ ç‚¹æ€»ç»“ï¼š ç¬¬ä¸€ï¼Œå¦‚æœä½ æ˜¯å¹¿å‘Šä¸æ•æ„Ÿç”¨æˆ·ï¼Œä¸ä»‹æ„æœ‰å¹¿å‘Šï¼Œæˆ–è€…è¯´è§‰å¾—é‡æ–°ç™»å½•å¾ˆéº»çƒ¦ï¼Œé‚£ä½ çœ‹åˆ°ç±»ä¼¼çš„å¼¹æ¡†ç›´æ¥ç‚¹å‡»æ¥å—æ‰€æœ‰å°±è¡Œäº†ï¼Œä¸ç”¨ç®¡ä»€ä¹ˆæ¡æ¡æ¡†æ¡†çš„å†…å®¹ã€‚ ç¬¬äºŒï¼Œå¦‚æœå‡ºç°æ¥å—Cookieçš„å¼¹æ¡†ï¼Œçœ‹ä¸‹æ˜¯å¦æœ‰æ¥å—å¿…è¦Cookieçš„æŒ‰é’®æˆ–è€…é€‰é¡¹ï¼Œç„¶åè¿›è¡Œå‹¾é€‰ï¼›è¿˜æœ‰ä¸€äº›ç½‘ç«™ä¼šæŠŠå¿…è¦Cookieçš„é€‰é¡¹éšè—åœ¨è®¾ç½®ä¸­ã€‚ æ¯”å¦‚æˆ‘ä»¬åœ¨AdblockPlusçš„å®˜ç½‘ï¼Œç‚¹å¼€è®¾ç½®ï¼Œå°±åªå‹¾é€‰å¿…è¦çš„Cookieï¼Œè¿˜æœ‰ä¸€äº›ç½‘ç«™ä¸Šå‡ºç°Necessaryçš„å­—æ ·ï¼Œä¹Ÿæ˜¯åŒæ ·çš„æ„æ€ã€‚ ç¬¬ä¸‰ï¼Œå½“ç„¶ï¼Œä¸Šé¢çš„Cookieå¼¹æ¡†å›½å†…è¿˜æ²¡æœ‰è¿™æ ·æ¥åšï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æ‰“å¼€æµè§ˆå™¨çš„é˜»æ­¢ç¬¬ä¸‰æ–¹Cookieçš„é€‰é¡¹ï¼Œåç»­æˆ‘ä»¬ä¼šåœ¨æµè§ˆå™¨åœ°å€æ å³ä¾§å‘ç°ä¸€ä¸ªæ‚ä½çœ¼ç›çš„å›¾æ ‡ã€‚ æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„Chromeæµè§ˆå™¨ï¼Œæ‰“å¼€è®¾ç½® =&gt; éšç§å’Œå®‰å…¨ï¼Œç„¶åå‹¾é€‰é˜»æ­¢ç¬¬ä¸‰æ–¹Cookieçš„é€‰é¡¹ï¼›åŒæ—¶ä¹Ÿè¦å‹¾é€‰Do Not Trackï¼ˆä¸è¿‡è¿™ä¸ªé€‰é¡¹å¯¹ç½‘ç«™æ²¡æœ‰å¼ºåˆ¶æ€§ï¼‰ã€‚ ç¬¬å››ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œå¦‚æœå¯¹æµè§ˆå™¨éšç§è¿˜æ˜¯ä¸æ”¾å¿ƒï¼Œè¿˜å¯ä»¥ä½¿ç”¨é¢å¤–çš„ä¿æŠ¤ï¼Œé€šè¿‡å®‰è£…é¢å¤–æ’ä»¶ï¼Œå¦‚è‘—åçš„AdGuardå’ŒAdblick Plusç­‰ï¼Œä¼šè‡ªåŠ¨å¸®åŠ©ä½ æ‹¦æˆªä¸€äº›å¹¿å‘Šï¼Œä¹Ÿèƒ½é˜²æ­¢è¢«æ ‡è®°å’Œè¿½è¸ªï¼›è¿™é‡Œç¬”è€…ä¹Ÿä¸ºå¤§å®¶æ•´ç†å‡†å¤‡å¥½äº†ä¸¤æ¬¾è½¯ä»¶çš„Chromeæ’ä»¶ï¼Œç›´æ¥åœ¨Chromeæµè§ˆå™¨ä¸­æ·»åŠ å®‰è£…å³å¯ï¼Œè·å–æ–¹å¼åœ¨æ–‡æœ«ã€‚ è¿™å°±æ²¡äº†ï¼Ÿæ˜¯çš„ï¼Œæ²¡äº†ï¼ŒCookieçš„å½±å“å…¶å®æ¯”è¾ƒæœ‰é™ï¼Œæ¯•ç«Ÿä¸€èˆ¬ç½‘ç«™çš„Cookieä¸­ä¹Ÿä¸ä¼šå­˜å¯†ç ç­‰ä¸ªäººä¿¡æ¯ï¼Œè€Œä¸”è¿˜ç»è¿‡äº†åŠ å¯†ï¼Œèƒ½æ³„æ¼çš„ç”¨æˆ·ä¿¡æ¯æ¯”è¾ƒæœ‰é™ï¼Œæœ€å¤šçš„å°±æ˜¯è®°å½•ç”¨æˆ·çš„è¡Œä¸ºä¹ æƒ¯ã€æµè§ˆè®°å½•ç­‰ç­‰æ•°æ®ã€‚ ç›¸æ¯”Cookieï¼Œå…¶å®æˆ‘ä»¬æ›´åº”è¯¥å½“å¿ƒé‚£äº›å¸¦æœ‰â€œé¢œè‰²â€çš„é’“é±¼ç½‘ç«™ã€ä¸­å¥–é‚®ä»¶ä»¥åŠä¸æ˜æ¥æºçš„äºŒç»´ç ç­‰ï¼Œæ›´è¦é¿å…åœ¨é™Œç”Ÿçš„ç½‘ç«™è¾“å…¥è‡ªå·±çš„çœŸå®ä¿¡æ¯ï¼Œå¯¼è‡´æ³„æ¼å’Œè¯ˆéª—çš„é£é™©ï¼›è¯¶ï¼Œæœ¬æ–‡æ€ä¹ˆä»ä¸€ç¯‡æŠ€æœ¯æ€§æ–‡ç« ï¼Œå†™æˆäº†æ™®æ³•æ–‡ç« ï¼Œæœ€åå±…ç„¶è¿˜å†™æˆäº†é˜²è¯ˆéª—çš„äº†ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œå¿«æ¥å°†æœ¬æ–‡åˆ†äº«å¹¶è‰¾ç‰¹ç»™ä½ èº«è¾¹æœ€å®¹æ˜“ä¸Šå½“å—éª—çš„æœ‹å‹ï¼Œæé«˜è­¦æƒ•æŠŠã€‚ æœ¬æ–‡æ‰€æœ‰è½¯ä»¶æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€é˜²æ­¢å¹¿å‘Šè¿½è¸ªã€‘å³å¯è·å–ã€‚ å‚è€ƒä¸€æ–‡è¯»æ‡‚GDPR ä»€ä¹ˆæ˜¯ç¬¬ä¸‰æ–¹Cookie å½“æµè§ˆå™¨å…¨é¢ç¦ç”¨ä¸‰æ–¹Cookie GDPRä¸­æ–‡ç‰ˆå…¨æ–‡ Ubuntuç­–ç•¥ GDPR è§„å®šäº†ä»€ä¹ˆï¼Ÿ æ·˜å®ç½‘éšç§","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æµè§ˆå™¨","slug":"Browser","permalink":"https://xieyufei.com/tags/Browser/"},{"name":"äº’è”ç½‘ç§‘æŠ€","slug":"Internet","permalink":"https://xieyufei.com/tags/Internet/"}]},{"title":"Viteå°è£…tså·¥å…·åº“å¹¶å‘å¸ƒnpmåŒ…","date":"2024-09-26T05:14:15.000Z","path":"2024/09/26/Vite-Tool-Library.html","text":"æœ€è¿‘å…¬å¸çš„å¾ˆå¤šé¡¹ç›®éƒ½ç”¨åˆ°ç›¸åŒåŠŸèƒ½çš„æ—¶é—´æ ¼å¼åŒ–å‡½æ•°ï¼Œå¦‚æœæ¯æ¬¡æ¥ä¸€ä¸ªé¡¹ç›®éƒ½æ‹·è´ä¸€ä»½ä»£ç çš„è¯ï¼Œå°±å¾ˆéº»çƒ¦ï¼Œç»“åˆæˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„Verdaccioæ­å»ºnpmç§æœ‰æœåŠ¡å™¨ï¼›æœ¬æ–‡æˆ‘ä»¬é€šè¿‡Viteä½œä¸ºè„šæ‰‹æ¶ï¼Œå°è£…ä¸€ä¸ªæ—¶é—´å‡½æ•°çš„ç»„ä»¶åº“ã€‚ å°è£…æ—¶é—´å‡½æ•°ï¼Œå°±ç»•ä¸å¼€å¼ºå¤§çš„Momentjsåº“ï¼Œä½†æ˜¯Momentjsåº“åˆæ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬æ‰“åŒ…çš„æ—¶å€™ä¸æƒ³å°†å…¶æ‰“åŒ…è¿›æˆ‘ä»¬çš„åº“ä¸­ï¼Œæ‰“åŒ…æ—¶éœ€è¦å°†ä¾èµ–åŒ…è¿›è¡Œæ’é™¤ï¼›å› æ­¤æœ¬æ–‡æˆ‘ä»¬ä¸»è¦æ¥çœ‹ä¸‹å¦‚ä½•é€šè¿‡Viteå°è£…ä¸€ä¸ªçº¯å·¥å…·åº“ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°å†…éƒ¨çš„Verdaccioä¸Šä½¿ç”¨ã€‚ æ¡†æ¶æ­å»º é¦–å…ˆæˆ‘ä»¬ä½¿ç”¨pnpmåŒ…ç®¡ç†å™¨æ­å»ºä¸€ä¸ªViteé¡¹ç›®ï¼Œé€‰æ‹©åº“æ‰“åŒ…æ¨¡å¼ã€‚ 1pnpm create vite è¾“å…¥æˆ‘ä»¬é¡¹ç›®çš„åç§°ï¼Œç„¶åé€‰æ‹©æ¡†æ¶ï¼Œé€‰æ‹©å…¶ä»–Othersï¼š è¿™ä¸€æ­¥æ˜¯é€‰æ‹©é¡¹ç›®çš„æ¨¡æ¿ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé€‰æ‹©åº“æ¨¡å¼ï¼š æœ€ç»ˆæˆ‘ä»¬ç”Ÿæˆé¡¹ç›®æ¨¡æ¿çš„åŸºæœ¬ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š 1234567891011121314|- lib |- main.ts|- public |- vite.svg|- src |- main.ts |- style.css |- typescript.svg |- vite-env.d.ts|- index.d.ts|- index.html|- package.json|- tsconfig.json|- vite.config.ts è¿™é‡Œæˆ‘ä»¬å¯¹ä¸»è¦çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹è¿›è¡Œä½¿ç”¨çš„è¯´æ˜ï¼›libä½œä¸ºæˆ‘ä»¬é¡¹ç›®æ¨¡å—çš„ä¸»è¦å­˜æ”¾ç›®å½•ï¼Œå¯ä»¥å°†æˆ‘ä»¬ä¸åŒçš„å‡½æ•°å’Œæ¨¡å—ç­‰ï¼Œæ”¾åˆ°å®ƒçš„ä¸‹é¢ï¼Œæœ€åä½¿ç”¨index.tsè¿›è¡Œç»Ÿä¸€å¯¼å‡ºã€‚ srcç›®å½•æ˜¯è°ƒè¯•ç›®å½•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨main.tsä¸­å¼•å…¥libä¸­çš„æ¨¡å—ï¼Œè¿›è¡Œè°ƒè¯•ï¼Œæµ‹è¯•åŠŸèƒ½æ˜¯å¦æ­£å¸¸è°ƒç”¨ï¼›å› æ­¤è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢çš„style.csså’Œsvgæ–‡ä»¶åŸºæœ¬ç”¨ä¸åˆ°ã€‚ æƒ³è¦åœ¨å±€åŸŸç½‘ä¸­å¼€å¯è°ƒè¯•ï¼Œåœ¨package.jsonä¸­ä¿®æ”¹devæ·»åŠ --hostå‚æ•°ã€‚ æ­¤å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªæ–‡ä»¶å¤¹æ˜¯æ‰“åŒ…åå‡ºç°ï¼Œä¸€ä¸ªæ˜¯distæ–‡ä»¶å¤¹ï¼Œç”Ÿæˆæ‰“åŒ…åçš„æ–‡ä»¶ï¼›å¦ä¸€ä¸ªæ˜¯typesæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç”Ÿæˆçš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼›å› æ­¤æˆ‘ä»¬è°ƒæ•´åçš„ç›®å½•ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š 123456789101112|- dist |-ï¼ˆæ‰“åŒ…åçš„æ–‡ä»¶ï¼‰|- lib |- index.ts |- ï¼ˆå…¶ä»–æ¨¡å—ï¼‰|- src |- main.ts| types |- index.d.ts |- ï¼ˆå…¶ä»–ç±»å‹å£°æ˜æ–‡ä»¶ï¼‰|- package.json|- vite.config.ts ä½¿ç”¨å—çº§æ³¨é‡Š æˆ‘ä»¬é¡¹ç›®çš„ä¸»è¦ç»“æ„åŸºæœ¬å®šä¹‰å®Œåï¼Œå…ˆæ¥å†™ä¸¤ä¸ªå·¥å…·å‡½æ•°å°è¯•ä¸€ä¸‹ï¼Œåœ¨libç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªformat.tsï¼Œå¯¼å‡ºä¸¤ä¸ªå‡½æ•°ï¼Œç”¨æ¥å®ç°æ—¶é—´æˆ³å’Œæ—¶é—´å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢ï¼š 123456789101112131415161718import moment, &#123; MomentInput &#125; from &quot;moment&quot;;// å°†æ—¶é—´æˆ³è½¬æ¢æˆæ—¶é—´å­—ç¬¦ä¸²export function formatTimestampToDate( timestamp: MomentInput, formatter = &quot;YYYY-MM-DD HH:mm:ss&quot;) &#123; return moment(timestamp).format(formatter);&#125;/** * å°†æ—¶é—´å­—ç¬¦ä¸²è½¬æ¢æˆæ—¶é—´æˆ³ * @param &#123;String&#125; date æ—¶é—´æ ¼å¼ï¼Œä¾‹å¦‚2023-06-01 02:00:00 * @returns &#123;Number&#125; è¿”å›æ—¶é—´æˆ³ï¼Œä¾‹å¦‚1689264000000 */export function formatDateToTimestamp(date: MomentInput) &#123; return moment(date).valueOf();&#125; æ¥ç€æˆ‘ä»¬éœ€è¦åœ¨lib/index.tsä¸­è¿›è¡Œç»Ÿä¸€å¯¼å‡ºï¼š 1export &#123; formatTimestampToDate, formatDateToTimestamp &#125; from &quot;./format&quot;; ä¸Šé¢çš„ä¸¤ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å‘ç°ä½¿ç”¨äº†ä¸¤ç§æ³¨é‡Šæ–¹å¼ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬å¸¸è§çš„è¡Œå†…æ³¨é‡Šï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªæ–œæ çš„æ–¹å¼ï¼›å¦ä¸€ä¸ªæ˜¯æ¯”è¾ƒè¯¦ç»†çš„å—çº§æ³¨é‡Šï¼Œå°†å…¥å‚å’Œå‡ºå‚éƒ½è¯¦ç»†çš„æ ‡æ³¨è¯´æ˜ï¼›å—çº§æ³¨é‡Šçš„å¥½å¤„ï¼Œè®©æˆ‘ä»¬åœ¨src/main.tsä¸­å¼•å…¥ä¸¤ä¸ªå‡½æ•°çœ‹ä¸‹å®é™…çš„æ•ˆæœå°±çŸ¥é“äº†ã€‚ å¾ˆå®¹æ˜“å°±å‘ç°ï¼Œä½¿ç”¨å—çº§æ³¨é‡Šï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶å…·æœ‰å¾ˆå¥½çš„æç¤ºæ•ˆæœï¼›è¿™æ ·åˆ«äººåœ¨è°ƒç”¨æˆ‘ä»¬å°è£…çš„å‡½æ•°æ—¶ï¼Œå°±ä¸ç”¨æ‹…å¿ƒä¸çŸ¥é“å‡½æ•°çš„æ€ä¹ˆè°ƒç”¨ï¼Œä»¥åŠå…¥å‚æ€ä¹ˆä¼ çš„é—®é¢˜äº†ã€‚ é‚£ä¹ˆå¦‚ä½•æ¥ç”Ÿæˆè¿™æ ·çš„æ³¨é‡Šå‘¢ï¼ŸVSCodeæä¾›äº†ä¸€ä¸ªæ’ä»¶jsdocï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å•†åº—ä¸­å¾ˆæ–¹ä¾¿çš„æœç´¢å¹¶å®‰è£…ï¼š æ’ä»¶çš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å†™å‰é¢/**ï¼Œç„¶åVSCodeå°±ä¼šè‡ªåŠ¨æç¤ºä½¿ç”¨jsdocçš„æ³¨é‡Šäº†ã€‚ ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶ æˆ‘ä»¬åœ¨ä¸Šé¢ç›®å½•ç»“æ„ä¸­è¯´åˆ°ï¼Œtypesæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ç”Ÿæˆçš„ç±»å‹å£°æ˜æ–‡ä»¶ï¼›è¿™äº›ç±»å‹å£°æ˜æ–‡ä»¶åŒ…æ‹¬ä¸Šé¢ç¼–å†™çš„å‡½æ•°æ³¨é‡Šä»¥åŠå…¥å‚å‡ºå‚çš„ç±»å‹ï¼›å®ƒçš„ä½œç”¨ï¼Œä¸»è¦å°±æ˜¯åœ¨æˆ‘ä»¬å®‰è£…é¡¹ç›®ä¾èµ–åï¼ŒVSCodeå°±ä¼šä»ä¾èµ–ä¸­æ‰¾åˆ°å£°æ˜æ–‡ä»¶ï¼Œè¿›è¡Œæç¤ºæ“ä½œï¼Œæ–¹ä¾¿åŒ…çš„ä½¿ç”¨è€…æ¥è°ƒç”¨å‡½æ•°ã€‚ å› æ­¤ç±»å‹å£°æ˜æ–‡ä»¶å°±ç›¸å½“äºæ˜¯æˆ‘ä»¬é¡¹ç›®æä¾›ç»™å¤–éƒ¨çš„ä¸€ä»½è¯´æ˜ä¹¦ï¼Œå…¶é‡è¦æ€§è‡ªç„¶ä¸å¿…å¤šè¯´ï¼Œä½†æ˜¯å¦‚æœè®©æˆ‘ä»¬ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªå‡½æ•°çš„ç¼–å†™è¯´æ˜ä¹¦ï¼Œå¤§å®¶è‚¯å®šæ˜¯ä¸ä¹æ„çš„ï¼›é‚£ä¹ˆå›åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸Šæ¥ï¼Œçœ‹ä¸‹å¦‚ä½•æ ¹æ®æˆ‘ä»¬å¯¼å‡ºçš„å‡½æ•°ï¼Œè‡ªåŠ¨çš„ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶å‘¢ï¼Ÿ å¯ä»¥å°†é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆå§‹åŒ–ç”Ÿæˆçš„index.d.tsæ–‡ä»¶åˆ é™¤ã€‚ æ‰“å¼€tsconfig.jsonæ–‡ä»¶ï¼Œæ·»åŠ ç±»å‹å£°æ˜æ–‡ä»¶çš„é…ç½®ï¼ŒoutDirå±æ€§è®¾ç½®è¾“å‡ºçš„ç›®å½•ï¼š 12345678910&#123; &quot;compilerOptions&quot;: &#123; + &quot;declaration&quot;: true, + &quot;outDir&quot;: &quot;types&quot;, + &quot;emitDeclarationOnly&quot;: true, - &quot;noEmit&quot;: true, &#125;, - &quot;include&quot;: [&quot;src&quot;], + &quot;include&quot;: [&quot;lib&quot;]&#125; è¿™é‡Œincludeå±æ€§æ˜¯è®¾ç½®ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶éœ€è¦åŒ…å«çš„æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬ä¸Šé¢å®šä¹‰äº†srcä½œä¸ºè°ƒè¯•ç›®å½•ï¼Œå› æ­¤è¿™é‡Œéœ€è¦æ”¹ä¸ºæˆ‘ä»¬ä»£ç çš„ä¸»è¦ç›®å½•libï¼›ä¿®æ”¹åæˆ‘ä»¬è¿›è¡Œæ‰“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç±»å‹å£°æ˜æ–‡ä»¶å·²ç»ç”Ÿæˆåœ¨typesç›®å½•ä¸‹äº†ï¼š æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å°†package.jsonä¸­çš„typeså±æ€§è¿›è¡Œä¿®æ”¹ï¼Œå‘Šè¯‰åŒ…çš„è°ƒç”¨è€…ï¼Œæˆ‘ä»¬çš„ç±»å‹å£°æ˜æ–‡ä»¶æ”¾åœ¨å“ªï¼š 1234&#123; - &quot;types&quot;: &quot;./index.d.ts&quot;, + &quot;types&quot;: &quot;./types/index.d.ts&quot;,&#125; ä¾èµ–ç®¡ç† åœ¨å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œç›¸ä¿¡å¤§å®¶å¯¹dependencieså’ŒdevDependenciesæ¯”è¾ƒäº†è§£äº†ï¼Œæˆ‘ä»¬çŸ¥é“dependenciesæ˜¯æˆ‘ä»¬é¡¹ç›®è¿è¡Œæ‰€å¿…é¡»çš„ä¾èµ–ï¼Œæ¯”å¦‚æˆ‘ä»¬æ­£å¸¸å¼€å‘ä¸€ä¸ªé¡¹ç›®ï¼Œç”¨åˆ°vueã€reactã€element-plusç­‰ä¾èµ–ï¼Œéƒ½å¯ä»¥æ”¾åˆ°è¿™é‡Œï¼›è€ŒdevDependenciesåˆ™æ˜¯åœ¨å¼€å‘è¿‡ç¨‹ä¸­ç”¨åˆ°çš„ä¾èµ–ï¼Œæ¯”å¦‚typescriptã€viteã€webpackç­‰æ¶‰åŠç¼–è¯‘æ‰“åŒ…ç­‰ä¸€äº›ä¾èµ–ï¼Œéƒ½æ˜¯æ”¾åˆ°devDependencieså­—æ®µã€‚ é‚£ä¹ˆå¦‚æœåˆ«äººåœ¨å®‰è£…æˆ‘ä»¬å¼€å‘çš„åŒ…æ—¶ï¼Œnpmä¼šå¦‚ä½•å¤„ç†devDependencieså­—æ®µé‡Œé¢çš„åŒ…å‘¢ï¼Ÿå¾ˆæ˜æ˜¾ï¼Œnpmä¸ä¼šå»ç®¡è¿™ä¸ªå­—æ®µï¼Œè¿™ä¸ªå­—æ®µåªæ˜¯åœ¨æˆ‘ä»¬åŒ…åœ¨å¼€å‘ä¸­ç”¨åˆ°çš„ä¾èµ–ã€‚ è€Œå¦å¤–ä¸€ä¸ªpeerDependenciesè¿™ä¸ªå­—æ®µæˆ‘ä»¬åœ¨å¹³æ—¶é¡¹ç›®å¼€å‘ä¸­æ¥è§¦çš„æ¯”è¾ƒå°‘ï¼Œå®ƒçš„ç¿»è¯‘è¿‡æ¥çš„æ„æ€å°±æ˜¯å¯¹ç­‰ä¾èµ–ï¼›å°±åƒæˆ‘ä»¬åœ¨åŒ…é‡Œå°è£…æ—¶é—´å‡½æ•°æ—¶ï¼Œéœ€è¦ç”¨åˆ°Momentjsåº“ï¼Œä½†æ˜¯å¦‚æœæ‰“åŒ…çš„æ—¶å€™å°†å…¶æ‰“åŒ…è¿›å»ï¼Œä¼šå¯¼è‡´æ•´ä¸ªåŒ…éå¸¸è‡ƒè‚¿ï¼Œå¦‚æœè°ƒç”¨æˆ‘ä»¬åŒ…çš„é¡¹ç›®ä¹Ÿå®‰è£…äº†Momentjsåº“ï¼Œå°±ä¼šé€ æˆèµ„æºé‡å¤æ‰“åŒ…ã€‚ è¿™æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨package.jsonä¸­ï¼Œæ·»åŠ peerDependenciesï¼Œå‘Šè¯‰åŒ…çš„è°ƒç”¨è€…ï¼Œæƒ³è¦å®‰è£…æˆ‘ï¼Œé¦–å…ˆè¦å®‰è£…è¿™ä¸ªå­—æ®µä¸‹é¢æ‰€æœ‰çš„åŒ…ï¼›å¦‚æœæˆ‘ä»¬å»çœ‹vuexå’Œvue-routerçš„åŒ…ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å®ƒä»¬çš„package.jsonä¸­éƒ½å°†vueè®¾ç½®ä¸ºå¯¹ç­‰ä¾èµ–ï¼š 12345&#123; &quot;peerDependencies&quot;: &#123; &quot;vue&quot;: &quot;^3.2.0&quot; &#125;&#125; é‚£ä¹ˆå›åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­æ¥ï¼Œæˆ‘ä»¬åœ¨å®‰è£…Momentjsæ—¶ï¼Œå¯ä»¥æ·»åŠ --save-peerå‚æ•°ï¼š 1pnpm add moment --save-peer åœ¨viteæ‰“åŒ…æ—¶ï¼Œè¿˜éœ€è¦é€šè¿‡é…ç½®å°†å…¶ä»æ‰“åŒ…ä¸­æ’é™¤ï¼š 123456789101112131415import &#123; defineConfig &#125; from &quot;vite&quot;;export default defineConfig(&#123; build: &#123; // å…¶ä»–é…ç½® rollupOptions: &#123; external: [&quot;moment&quot;], output: &#123; globals: &#123; moment: &quot;moment&quot;, &#125;, &#125;, &#125;, &#125;,&#125;); è¿™æ ·ï¼Œåç»­å½“æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å®‰è£…æˆ‘ä»¬å¼€å‘çš„åŒ…æ—¶ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æç¤ºå®‰è£…äº†ä¸¤ä¸ªä¾èµ–åŒ…,å³åŒ…æœ¬èº«åŠå…¶ä¸‹é¢å¯¹ç­‰ä¾èµ–çš„åŒ…ï¼›å¦‚æœæˆ‘ä»¬å»æŸ¥çœ‹node_modulesï¼Œç›®å½•ä¸‹ä¸­ä¹Ÿæœ‰äº†momentã€‚ 12npm install vite-library-demoadded 2 packages in 2s å‘åŒ… å†™åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„åŒ…åŸºæœ¬çš„åŠŸèƒ½å·²ç»éƒ½å…·å¤‡äº†ï¼Œå¯ä»¥è¿›è¡Œå‘åŒ…çš„æ“ä½œäº†ï¼›è¿™æ—¶æˆ‘ä»¬åˆé¢ä¸´äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å“ªäº›æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ç„¶åå‘å¸ƒä¸Šå»å‘¢ï¼Ÿ æ ¹æ®ä¸Šé¢çš„é¡¹ç›®ç»“æ„ï¼Œæˆ‘ä»¬ä¸»è¦éœ€è¦å‘å¸ƒçš„å°±æ˜¯distå’Œtypesæ–‡ä»¶å¤¹ï¼Œè€Œlibå’Œsrcæ–‡ä»¶å¤¹éƒ½æ˜¯éœ€è¦æ’é™¤çš„ã€‚å’Œ.gitignoreä¸€æ ·ï¼Œ.npmignoreæ–‡ä»¶æ˜¯ç”¨æ¥æŒ‡å®šåœ¨å‘åŒ…æ—¶éœ€è¦æ’é™¤çš„ç›®å½•ï¼›æ­¤å¤–ï¼Œä¸‹é¢è¿™äº›æ–‡ä»¶æ˜¯é»˜è®¤å‘å¸ƒçš„ï¼ŒåŠ ä¸åŠ åˆ°ignoreéƒ½æ²¡æœ‰å½±å“ï¼š package.json README.md LICENSE CHANGELOG å½“é¡¹ç›®ä¸­æ²¡æœ‰æŒ‡å®š.npmignoreæ—¶ï¼Œé»˜è®¤ä½¿ç”¨.gitignoreæ–‡ä»¶ å› æ­¤ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª.npmignoreæ–‡ä»¶ï¼Œå†™å…¥å¦‚ä¸‹å†…å®¹ï¼Œå°†æˆ‘ä»¬ä¸éœ€è¦çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹è¿›è¡Œå‘åŒ…æ—¶çš„æ’é™¤ï¼š 123456node_modulessrclibvite.config.tstsconfig.jsonindex.html æ­¤å¤–ï¼Œå¦‚æœæˆ‘ä»¬é¡¹ç›®ä¸‹æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œä¸€ä¸ªä¸€ä¸ªæ’é™¤æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒvuexåŒ…çš„package.jsonï¼Œå°†æˆ‘ä»¬éœ€è¦å‘å¸ƒçš„æ–‡ä»¶ï¼Œç›´æ¥æ”¾åˆ°fileså±æ€§ä¸‹å³å¯ï¼š 1234567&#123; &quot;files&quot;: [ &quot;dist&quot;, &quot;types&quot; ], // å…¶ä»–å±æ€§&#125; å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼ŒåŒ…æ–‡ä»¶çš„ä¼˜å…ˆçº§ä»é«˜åˆ°ä½å¦‚ä¸‹é¡ºåºï¼š 1fileså±æ€§ &gt; .npmignore &gt; .gitignore å¦å¤–è¿™é‡Œæœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„å°æŠ€å·§ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ¯æ¬¡publishåå†æŸ¥çœ‹åŒ…çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡npm packå…ˆç”Ÿæˆä¸€ä¸ªåŒ…è¿›è¡Œé¢„è§ˆï¼Œå†é€šè¿‡tar -tf XXX.tgzå°±å¯ä»¥é¢„è§ˆåŒ…äº†ã€‚ æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåŒ…é‡Œæ·»åŠ ä¸€äº›å‘å¸ƒä¿¡æ¯ï¼Œä¾‹å¦‚åŒ…ä½œè€…å’Œä¸»é¡µçš„ä¿¡æ¯ï¼š 12345&#123; &quot;author&quot;: &quot;&quot;, &quot;homepage&quot;: &quot;&quot;, // å…¶ä»–å±æ€§&#125; å½“ç„¶åˆ«å¿˜äº†ï¼Œæ·»åŠ READMD.mdè¯´æ˜ï¼Œå‘Šè¯‰å¤§å®¶ä½ è¿™ä¸ªåŒ…æ˜¯åšä»€ä¹ˆç”¨çš„ï¼›æœ€åï¼Œåœ¨æ¿€åŠ¨çš„è¾“å…¥npm pubshå‘½ä»¤åï¼Œæˆ‘ä»¬çš„åŒ…å°±æ­£å¼å‘å¸ƒåˆ°Verdaccioä¸Šå»äº†ï¼Œå¿«å»å‘Šè¯‰ä½ çš„å°ä¼™ä¼´æ¥è°ƒç”¨ä½ çš„åŒ…æŠŠã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€Viteå·¥å…·åº“ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"}]},{"title":"FRPæ­å»ºå†…ç½‘ç©¿é€æœåŠ¡æŒ‡å—","date":"2024-09-17T14:09:54.000Z","path":"2024/09/17/Install-Linux-Frp.html","text":"æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å›å®¶äº†æƒ³è¦è®¿é—®å…¬å¸ç”µè„‘ä¸Šçš„ä¸€äº›èµ„æ–™ï¼Œæˆ–è€…è¿œç¨‹åˆ°å…¬å¸çš„ç”µè„‘ï¼Œå†æˆ–è€…è®¿é—®å…¬å¸å†…ç½‘çš„ç½‘é¡µæœåŠ¡ï¼Œä½†æ˜¯æˆ‘ä»¬å¹¶ä¸çŸ¥é“å…¬å¸çš„ç½‘ç»œåœ°å€ï¼Œä¹Ÿä¸çŸ¥é“å¦‚ä½•è®¿é—®å±€åŸŸç½‘ä¸­çš„æœåŠ¡ï¼›è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°ä¸€ä¸ªå«å†…ç½‘ç©¿é€çš„å·¥å…·äº†ï¼Œä¸–é¢ä¸Šæœ‰å¾ˆå¤šç±»ä¼¼çš„å·¥å…·ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†éƒ½æ˜¯éœ€è¦æ”¶è´¹çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä»‹ç»ä¸€æ¬¾æˆæœ¬è¾ƒä½ã€å¼€æºçš„è½¯ä»¶Frpã€‚ ä»‹ç» Frpæ˜¯ä¸€æ¬¾å¼€æºçš„é«˜æ€§èƒ½çš„åå‘ä»£ç†è½¯ä»¶ï¼Œä¸“æ³¨äºå†…ç½‘ç©¿é€ï¼Œå®ƒæ”¯æŒå¤šç§åè®®ï¼ŒåŒ…æ‹¬TCPã€UDPã€HTTPã€HTTPS ç­‰ï¼›é€šè¿‡frpï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†å†…ç½‘çš„æœåŠ¡æš´éœ²åˆ°å…¬ç½‘ï¼Œé€šè¿‡æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨èŠ‚ç‚¹è¿›è¡Œä¸­è½¬ï¼Œä¾‹å¦‚Linuxçš„sshæˆ–è€…windowsçš„è¿œç¨‹æ§åˆ¶æœåŠ¡ï¼›è€Œä¸–é¢ä¸Šçš„å¾ˆå¤šå†…ç½‘ç©¿é€è½¯ä»¶ä¹Ÿæ˜¯åŸºäºFrpå¼€å‘çš„ã€‚ Frpæ˜¯ä¸€ç§å…¸å‹çš„C/Sæ¶æ„ï¼Œå…¶å¤§è‡´æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š æˆªè‡³æœ¬æ–‡å‘ç¨¿æ—¶ï¼Œfrpæœ€æ–°ç‰ˆæœ¬ä¸º0.60.0ã€‚ é€šè¿‡æµç¨‹å›¾å‘ç°ï¼Œæˆ‘ä»¬å‰æœŸéœ€è¦å®Œæˆä»¥ä¸‹å‡†å¤‡å·¥ä½œï¼š ä¸€ä¸ªåŸŸå ä¸€å°æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ éœ€è¦è®¿é—®çš„å†…ç½‘æœåŠ¡å™¨ï¼Œéƒ¨ç½²äº†æŸäº›æœåŠ¡æˆ–å¼€é€šç«¯å£ åŸŸåçš„è¯ï¼Œå¯ä»¥å»ä¸‡ç½‘æ³¨å†Œä¸€ä¸ªï¼Œé€‰ä¸€äº›ä¸å¸¸ç”¨çš„ï¼Œå¦‚vipæˆ–è€…funç­‰ï¼Œä¸€å¹´ä¹Ÿå°±ä¸€åŒ…çƒŸçš„ä»·æ ¼ã€‚ ä¸‹é¢æ˜¯å‡†å¤‡ä¸€å°å…¬ç½‘IPçš„æœåŠ¡å™¨ï¼Œå¦‚æœæ˜¯ç”µä¿¡çš„å°ä¼™ä¼´ï¼Œä¸”å®¶é‡Œæœ‰é—²ç½®ç”µè„‘ï¼Œå¯ä»¥ç™¾åº¦ä¸€ä¸‹ï¼šç”µä¿¡å…¬ç½‘IPç”³è¯·ï¼Œç„¶åè‡ªè¡Œæ‰“ç”µè¯è·Ÿå®¢æœå°å§å§è¯´ä¸€ä¸‹ï¼Œè®°å¾—åƒä¸‡ä¸è¦è¯´æ˜¯å› ä¸ºå®¶é‡Œçš„ç›‘æ§æ‘„åƒå¤´éœ€è¦å…¬ç½‘IPï¼Œä¹Ÿåƒä¸‡ä¸è¦å»ä¸ºéš¾äººå®¶å°å§å§è¯´å»æŠ•è¯‰è¯´å…¬ç½‘IPæ˜¯æˆ‘ä»¬çš„æƒåˆ©ã€‚ å¦‚æœæ‹¿åˆ°äº†å…¬ç½‘IPï¼Œå°±å¯ä»¥åœ¨è·¯ç”±å™¨é‡Œé¢è¿›è¡Œç«¯å£æ˜ å°„ï¼Œè¿™ä¸€æ­¥ä¸»è¦é’ˆå¯¹çš„æ˜¯é‚£äº›åŠ¨æ‰‹èƒ½åŠ›å¼ºå¤–åŠ è„¸çš®åšçš„ç«¥é‹ï¼›ä½†æ˜¯å¦‚æœä½ ä¸æƒ³è‡ªå·±åŠ¨æ‰‹å¹¶ä¸”å«Œéº»çƒ¦çš„è¯ï¼Œé˜¿é‡Œäº‘æ–°æ¨å‡ºçš„99è®¡åˆ’ï¼ŒåŠ©åŠ›å¹¿å¤§çš„å¼€å‘è€…å’Œä¼ä¸šä¸Šäº‘ï¼Œå¼€å‘è€…å¯äº«99ä¸€å¹´çš„æœåŠ¡å™¨æŠ˜æ‰£æƒç›Šï¼Œè€Œä¸”é‡ç‚¹æ¥äº†æ–°è€åŒäº«ä¼˜æƒ ï¼Œæ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œä¸ä¼šå†å‡ºç°è€ç”¨æˆ·ä¸‹å•æ—¶ä»·æ ¼çªç„¶æš´æ¶¨çš„æƒ…å†µäº†ï¼Œæ–°è€ç”¨æˆ·ä¸‹å•éƒ½ç»Ÿä¸€ä»·æ ¼ï¼š æœåŠ¡ç«¯ é¦–å…ˆæˆ‘ä»¬è¿›è¡ŒæœåŠ¡ç«¯çš„å®‰è£…ï¼Œåœ¨frpçš„releaseé¡µé¢ä¸‹è½½ç¨‹åºï¼Œä¸€èˆ¬ä½¿ç”¨LinuxæœåŠ¡å™¨é€‰æ‹©amdç‰ˆæœ¬è¿›è¡Œä¸‹è½½å³å¯ï¼Œè¿™é‡Œç¬”è€…ä»¥è‡ªå·±æ‰‹ä¸Šå®‰è£…çš„Ubuntu Serverä¸ºä¾‹ï¼š 12wget https://github.com/fatedier/frp/releases/download/v0.60.0/frp_0.60.0_linux_amd64.tar.gztar -zxcf frp_0.60.0_linux_amd64.tar.gz è§£å‹åçš„æ–‡ä»¶å¤¹å¾—åˆ°å››ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„è¿è¡Œç¨‹åºå’Œé…ç½®æ–‡ä»¶ï¼Œå¸¦sçš„æ˜¯æœåŠ¡å™¨è¿è¡Œçš„ï¼Œå¸¦cçš„æ˜¯å®¢æˆ·ç«¯è¿è¡Œçš„ç¨‹åºï¼š 1234|- frps|- frps.toml|- frpc|- frpc.tom å› ä¸ºæ˜¯åœ¨æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬ç¼–è¾‘frps.tomlæ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹é…ç½®ï¼š 12345678bindPort = 7000vhostHTTPPort = 7000auth.token = &quot;your token&quot;webServer.addr = &quot;0.0.0.0&quot;webServer.port = 7500webServer.user = &quot;frp&quot;webServer.password = &quot;frp&quot; auth.tokenæ˜¯æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„è®¤è¯tokenï¼Œéœ€è¦ä¸€è‡´ï¼Œfrpçš„é…ç½®æ–‡ä»¶æœ‰å¾ˆå¤šï¼Œè¿™é‡Œåªåˆ—ä¸¾äº†å¸¸ç”¨çš„å‡ ä¸ªé…ç½®ã€‚ 7000ç«¯å£å°±æ˜¯frpç›‘å¬çš„ä¸»ç«¯å£ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„è¿æ¥è®¿é—®éƒ½æ˜¯éœ€è¦é€šè¿‡è¿™ç«¯å£ï¼Œè€ŒwebServerçš„7500ç«¯å£æ˜¯æ§åˆ¶é¢æ¿çš„è®¿é—®ç«¯å£ï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªrun.shæ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹å†…å®¹ï¼Œè®©frpèƒ½å¤Ÿåœ¨åå°å¯åŠ¨ï¼š 1nohup ./frps -c ./frps.toml &gt; /dev/null 2&gt;&amp;1 &amp; ç»™run.shå¯åŠ¨æƒé™å¹¶è¿è¡Œå³å¯ï¼›æˆ‘ä»¬çš„æœåŠ¡ç«¯å¯åŠ¨åï¼Œè®¿é—®7500å¯èƒ½å¹¶ä¸èƒ½ç›´æ¥çœ‹åˆ°é¡µé¢ï¼Œéœ€è¦åœ¨å®‰å…¨ç»„é‡Œé¢å°†ä¸¤ä¸ªç«¯å£æ·»åŠ è¿›å»ã€‚ åœ¨æµè§ˆå™¨æ‰“å¼€7500ç«¯å£å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç®¡ç†åå°ç•Œé¢äº†ï¼Œåœ¨è¿™ä¸ªç•Œé¢ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¯åŠ¨çš„FrpæœåŠ¡å™¨çš„ä¿¡æ¯ã€é“¾æ¥æ•°é‡ç­‰ç­‰ã€‚ å®¢æˆ·ç«¯ æˆ‘ä»¬ä¸Šé¢æœåŠ¡ç«¯éƒ¨ç½²å¥½äº†ï¼Œå°±å¯ä»¥æ¥éƒ¨ç½²æˆ‘ä»¬å®¢æˆ·ç«¯çš„æœåŠ¡äº†ï¼Œä¸»è¦ä»¥ä¸‹é¢å››ç§åœºæ™¯ä½œä¸ºæ¡ˆä¾‹ï¼Œçœ‹ä¸‹æ¯ä¸ªåœºæ™¯çš„å®¢æˆ·ç«¯ä»£ç æ˜¯å¦‚ä½•éƒ¨ç½²çš„ã€‚ ä¸´æ—¶æ–‡ä»¶æœåŠ¡å™¨ ç¬¬ä¸€ä¸ªæ¡ˆä¾‹å°±æ˜¯ä¸´æ—¶çš„æ–‡ä»¶æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨å·¥ä½œæˆ–è€…ç”Ÿæ´»ä¸­ï¼Œå¶å°”éœ€è¦å‘é€ä¸ªä¿å¯†çš„æ–‡ä»¶èµ„æ–™ç»™æœ‹å‹ï¼Œæœ‰æ—¶å€™åˆä¸æƒ³é€šè¿‡å¾®ä¿¡ï¼ˆæ‡‚å¾—éƒ½æ‡‚ï¼‰ï¼Œç™¾åº¦ç½‘ç›˜é€Ÿåº¦åˆå¤ªæ…¢ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ©ç”¨æˆ‘ä»¬è‡ªå·±çš„frpæœåŠ¡å™¨åšä¸­è½¬ï¼Œåœ¨æœ¬åœ°ç”µè„‘ä¸Šæ­å»ºä¸€ä¸ªä¸´æ—¶çš„æ–‡ä»¶æœåŠ¡å™¨ã€‚ è¿˜æ˜¯ä¸‹è½½ä¸Šé¢releaseé¡µé¢çš„frpå‹ç¼©åŒ…ï¼Œæˆ‘ä»¬è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¿®æ”¹frpc.tomlå®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ï¼š 12345678910111213141516serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[proxies]]name = &quot;file-static&quot;type = &quot;tcp&quot;remotePort = 7810transport.useEncryption = truetransport.useCompression = truetransport.bandwidthLimit = &quot;10MB&quot;[proxies.plugin]type = &quot;static_file&quot;localPath = &quot;your path&quot;httpUser = &quot;frp&quot;httpPassword = &quot;frp&quot; å°†ä¸Šé¢çš„serverAddråœ°å€æ¢æˆè‡ªå·±æœåŠ¡å™¨çš„åœ°å€å’Œtokenï¼ŒlocalPathè¿™é‡Œå°±æ˜¯æœ¬åœ°ç”µè„‘çš„æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒWindowsçš„å†™æ³•å’ŒLinuxçš„è·¯å¾„å†™æ³•éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼›è¿™é‡Œç¬”è€…çš„ç”µè„‘ç”¨çš„æ˜¯windowsï¼Œå°±å¡«å†™D:/softwareï¼›åŒæ ·çš„ï¼Œwindowsçš„å¯åŠ¨å‘½ä»¤å’Œlinuxä¹Ÿä¸ä¸€æ ·ï¼Œéœ€è¦ç”¨åˆ°åæ–œæ ï¼š 1.\\frpc.exe -c .\\frpc.toml è¿™æ ·æˆ‘ä»¬åœ¨æµè§ˆå™¨æ‰“å¼€7810ç«¯å£å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ¬åœ°çš„æ–‡ä»¶åˆ—è¡¨äº†ï¼š æ³¨æ„å¼€æ”¾æœåŠ¡å™¨çš„7810ç«¯å£ï¼Œé¿å…è®¿é—®ä¸åˆ°çš„æƒ…å†µã€‚ è½¬å‘sshæœåŠ¡ æˆ‘ä»¬ç»å¸¸åœ¨å…¬å¸å†…ç½‘æœ‰ä¸€äº›æœåŠ¡å™¨ï¼Œæƒ³è¦åœ¨å®¶é‡Œæˆ–è€…å‡ºå·®çš„æ—¶å€™é€šè¿‡sshæœåŠ¡æ¥è¿œç¨‹è®¿é—®ï¼Œè™½ç„¶å¯ä»¥é€šè¿‡å‘æ—¥è‘µç­‰å·¥å…·ä½¿ç”¨ç•Œé¢è®¿é—®ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¸æ˜¯å¾ˆç¨³å®šï¼›è€Œä¸”è§†é¢‘ä¼ è¾“ï¼Œå®¹æ˜“æœ‰å¡é¡¿çš„æƒ…å†µï¼Œè¿™æ—¶å€™frpå°±èƒ½å¾ˆå¥½çš„æ´¾ä¸Šç”¨å¤„äº†ï¼›æˆ‘ä»¬çŸ¥é“sshçš„é»˜è®¤ç«¯å£éƒ½æ˜¯22ç«¯å£ï¼Œé€šè¿‡frpç›´æ¥è½¬å‘22ç«¯å£å°±è¡Œäº†ã€‚ åœ¨å†…ç½‘çš„æœåŠ¡å™¨ä¸Šåˆ›å»ºå¦‚ä¸‹é…ç½®æ–‡ä»¶ï¼š 12345678910serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[proxies]]name = &quot;linux-ssh&quot;type = &quot;tcp&quot;localIP = &quot;127.0.0.1&quot;localPort = 22remotePort = 7820 è¿™æ ·ï¼Œæˆ‘ä»¬è®¿é—®çš„æ—¶å€™å¯ä»¥é€šè¿‡[your domain]:7820çš„æ–¹å¼ï¼Œä½¿ç”¨ä»»æ„ä½ å–œæ¬¢çš„sshå·¥å…·æ¥è¿›è¡Œè®¿é—®ï¼›è¿™é‡Œç¬”è€…æ¨èä¸€æ¬¾è¶…å¥½ç”¨ï¼Œé¢œå€¼è¶…é«˜çš„sshå·¥å…·Termiusã€‚ ä½†æ˜¯è¿™ç§æ–¹å¼ç›¸å½“äºæ˜¯ç›´æ¥å°†å…¬ç½‘çš„7820ç«¯å£æ˜ å°„åˆ°äº†è¿œç¨‹æœåŠ¡å™¨çš„22ç«¯å£ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ç«¯å£ç›´æ¥æš´éœ²åœ¨å…¬ç½‘ï¼Œä¼šå­˜åœ¨ä¸€å®šçš„é£é™©æ€§ï¼Œå¾ˆå®¹æ˜“è¢«ç½‘ç»œæ”»å‡»æ‰«æåˆ°ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ç§æ›´å®‰å…¨çš„æ–¹å¼ï¼›frpæä¾›äº†stcpç±»å‹çš„ä»£ç†ï¼Œè¿™é‡Œçš„sä¹Ÿæ˜¯secretçš„æ„æ€ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯tcpè¿æ¥ã€‚ æˆ‘ä»¬ç»§ç»­ä¿®æ”¹ä¸Šé¢æœåŠ¡å™¨ä¸Šçš„frpc.tomlæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š 1234567891011serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[proxies]]name = &quot;linux-ssh&quot;type = &quot;stcp&quot;localIP = &quot;127.0.0.1&quot;localPort = 22# åŠ å…¥secretKeyï¼Œä¸€è‡´çš„ç”¨æˆ·æ‰èƒ½è®¿é—®æ­¤æœåŠ¡secretKey = &quot;abcdefg&quot; ç„¶åå›åˆ°æˆ‘ä»¬æœ¬åœ°è®¡ç®—æœºï¼Œåˆ›å»ºä¸€ä¸ªè®¿é—®è€…çš„é…ç½®æ–‡ä»¶ï¼š 1234567891011serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[visitors]]name = &quot;local-visitor&quot;type = &quot;stcp&quot;serverName = &quot;linux-ssh&quot;secretKey = &quot;abcdefg&quot;bindAddr = &quot;127.0.0.1&quot;bindPort = 6000 serverNameå’Œä¸Šé¢proxiesä¸­çš„nameä¿æŒä¸€è‡´ï¼ŒsecretKeyä¹Ÿè¦ä¸€è‡´ï¼Œåœ¨æœ¬åœ°å¯åŠ¨frpæœåŠ¡åï¼Œåœ¨Termiusä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ·»åŠ è®¿é—®åœ°å€äº†ï¼›ä¸è¿‡è¿™æ¬¡æ˜¯æˆ‘ä»¬æœ¬åœ°çš„åœ°å€ï¼Œç›´æ¥æ˜¯é€šè¿‡127.0.0.1:6000è®¿é—®å³å¯ï¼Œæ²¡æœ‰æš´éœ²ä»»ä½•æœåŠ¡å™¨çš„ç«¯å£ã€‚ ä»£ç†webæœåŠ¡ ä»£ç†webæœåŠ¡æ˜¯æˆ‘ä»¬æœ€å¸¸è§ï¼Œä¹Ÿæ˜¯ç»å¸¸éœ€è¦ç”¨åˆ°çš„æœåŠ¡ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å…¬å¸å†…éƒ¨æœ‰æŸä¸ªç½‘ç«™ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å…¬ç½‘ä¹Ÿèƒ½è®¿é—®åˆ°è¿™ä¸ªç½‘ç«™ï¼›é€šè¿‡frpæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªç½‘ç«™æš´éœ²åˆ°å…¬ç½‘ä¸­è®¿é—®ã€‚åˆæˆ–è€…ç»å¸¸å¼€å‘å°ç¨‹åºçš„åŒå­¦ï¼Œè‚¯å®šé‡åˆ°è¿‡è¿™æ ·çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åœ¨å…¬å¸å†…éƒ¨é¡¹ç›®ä¸Šå¼€å‘å¥½äº†å°ç¨‹åºçš„ä»£ç ï¼Œæƒ³è¦ç»™é¢†å¯¼æˆ–è€…æµ‹è¯•é¢„è§ˆä¸€ä¸‹å°ç¨‹åºï¼Œä½†æ˜¯æ°å¥½ä»–ä¸åœ¨å…¬å¸å†…éƒ¨ï¼Œå°ç¨‹åºçš„ç è®¿é—®ä¸äº†ï¼Œè¿™æ—¶ä¹Ÿå¯ä»¥é€šè¿‡frpå°†æœåŠ¡å™¨çš„ç«¯å£æš´éœ²åˆ°å…¬ç½‘ä¸Šé¢ã€‚ æˆ‘ä»¬ç¼–è¾‘frpc.tomeæ–‡ä»¶ï¼Œå°†å†…ç½‘çš„ipã€ç«¯å£ä»¥åŠè‡ªå®šä¹‰åŸŸåæ·»åŠ è¿›å»ï¼š 123456789101112serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[proxies]]name = &quot;com-sd-http&quot;type = &quot;http&quot;localIP = &quot;127.0.0.1&quot;localPort = 7860customDomains = [&quot;frpsd.xxx.xxx&quot;]transport.useEncryption = truetransport.useCompression = true è¿™é‡Œéœ€è¦ç¡®ä¿è‡ªå®šä¹‰åŸŸåå·²ç»æ­£ç¡®è§£æåˆ°äº†é˜¿é‡Œäº‘æœåŠ¡å™¨ä¸Šï¼Œå¦åˆ™å°†æ— æ³•è®¿é—®ã€‚ è¿™æ—¶ï¼Œæˆ‘ä»¬æ‰“å¼€ç½‘å€http://frpsd.xxx.xxx:7000å°±å¯ä»¥æ­£å¸¸è®¿é—®åˆ°å†…ç½‘127.0.0.1:7860ä¸Šçš„æœåŠ¡äº†ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç½‘é¡µå’Œæ¥å£æš´éœ²åˆ°å…¬ç½‘æœåŠ¡æœ‰ä¸€å®šé£é™©ï¼Œæ³¨æ„æƒé™åŠè´¦å·éªŒè¯ã€‚frpæ”¯æŒé€šè¿‡ç®€å•çš„HTTP Basic Authæ¥éªŒè¯ç”¨æˆ·ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡ç”¨æˆ·åå’Œå¯†ç æ‰èƒ½è®¿é—®æœåŠ¡ï¼Œæˆ‘ä»¬é€šè¿‡æ·»åŠ httpUserå’ŒhttpPasswordå­—æ®µæ¥æ·»åŠ éªŒè¯ï¼š 123456789101112serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[proxies]]name = &quot;com-sd-http&quot;type = &quot;http&quot;localIP = &quot;127.0.0.1&quot;localPort = 7860customDomains = [&quot;frpsd.xxx.xxx&quot;]httpUser = &quot;abc&quot;httpPassword = &quot;abc&quot; è¿™æ ·æˆ‘ä»¬è®¿é—®webæœåŠ¡åï¼Œä¼šå¼¹å‡ºä¸€ä¸ªç™»å½•æ¡†ï¼Œè¦æ±‚æˆ‘ä»¬è¾“å…¥è´¦å·å¯†ç æ‰èƒ½è¿›å…¥ã€‚ ç©¿é€Windowsè¿œç¨‹æ§åˆ¶ Windowsè¿œç¨‹æ§åˆ¶ç›¸ä¿¡ä¸å°‘å°ä¼™ä¼´éƒ½ä½¿ç”¨è¿‡ï¼Œå¦‚æœåœ¨å†…ç½‘ä½¿ç”¨è‡ªå¸¦çš„Windowsè¿œç¨‹æ§åˆ¶è½¯ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæµç•…å¾ˆæ–¹ä¾¿çš„çš„æ§åˆ¶è¿œç¨‹ç”µè„‘ï¼Œä½†æ˜¯åœ¨å¤–ç½‘å°±å¾ˆéš¾è®¿é—®åˆ°å†…ç½‘ä¸­çš„Windowsäº†ï¼›è¿™é‡Œä½¿ç”¨çš„è¿æ¥æ–¹å¼ä¹Ÿæ˜¯frpçš„stcpç±»å‹ï¼Œåªä¸è¿‡å°†ç«¯å£æ”¹åˆ°äº†3389ï¼›æˆ‘ä»¬åœ¨è¿œç¨‹è¢«æ§ç«¯çš„ç”µè„‘ä¸Šåˆ›å»ºå¦‚ä¸‹é…ç½®æ–‡ä»¶ï¼š 12345678910serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[proxies]]name = &quot;windows-mstsc&quot;type = &quot;stcp&quot;localIP = &quot;127.0.0.1&quot;localPort = 3389secretKey = &quot;abcd&quot; åœ¨æˆ‘ä»¬æœ¬åœ°æ§åˆ¶ç«¯çš„ç”µè„‘ï¼ŒåŒæ ·å†™å…¥é…ç½®æ–‡ä»¶ï¼Œå¯åŠ¨ä¸€ä¸ªfrpçš„ç¨‹åºï¼š 1234567891011serverAddr = &quot;your domain&quot;serverPort = 7000auth.token = &quot;your token&quot;[[visitors]]name = &quot;mstsc-visitor&quot;type = &quot;stcp&quot;serverName = &quot;windows-mstsc&quot;secretKey = &quot;abcd&quot;bindAddr = &quot;127.0.0.1&quot;bindPort = 8090 éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„serverNameå’ŒsecretKeyå­—æ®µéƒ½è¦å’Œä¸Šé¢å—æ§ç«¯çš„nameå’ŒsecretKeyä¿æŒä¸€ç›´ï¼Œ æˆ‘ä»¬æ‰“å¼€Windowsè¿œç¨‹ï¼Œè¾“å…¥127.0.0.1:8090å°±å¯ä»¥è¿œç¨‹ä¸Šæˆ‘ä»¬çš„ç›®æ ‡è®¡ç®—æœºäº†ã€‚ å¦å¤–è¯´ä¸ªå°æŠ€å·§ï¼Œæœ‰ä¸€äº›Linuxå‘è¡Œç‰ˆå¸¦æœ‰å›¾å½¢ç•Œé¢ï¼Œæ¯”å¦‚ç¬”è€…å¸¸ç”¨çš„Ubuntuï¼Œä¹Ÿæ˜¯èƒ½å¤Ÿæ”¯æŒWindowsçš„è¿œç¨‹è½¯ä»¶æ¥è¿æ¥çš„ï¼Œåœ¨ç³»ç»Ÿè®¾ç½®ä¸­æ‰“å¼€è¿œç¨‹ç™»å½•é€‰é¡¹å³å¯ã€‚ Ubuntuå®¢æˆ·ç«¯è®¾ç½®å¼€æœºå¯åŠ¨ åœ¨ä¸€äº›Linuxçš„å—æ§ç«¯ä¸Šï¼Œæˆ‘ä»¬å¸Œæœ›frpèƒ½å¤Ÿåšåˆ°é‡å¯æˆ–è€…æ–­ç”µåå¼€æœºè‡ªå¯åŠ¨ï¼Œè¿™é‡Œç¬”è€…ä»¥å®¶é‡Œçš„ä¸€å°Ubuntu24ä¸ºä¾‹å­ï¼Œçœ‹ä¸‹å¦‚ä½•è®©frpå¼€æœºå¯åŠ¨ï¼›åœ¨æ–°çš„Ubuntuå‘è¡Œç‰ˆä¸Šå·²ç»æ²¡æœ‰rc.localæ–‡ä»¶äº†ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ–°å»ºä¸€ä¸ªï¼š 1sudo vim /etc/systemd/system/rc-local.service å†™å…¥å¦‚ä¸‹å†…å®¹ï¼š 1234567891011121314[Unit] Description=/etc/rc.local Compatibility ConditionPathExists=/etc/rc.local[Service] Type=forking ExecStart=/etc/rc.local start TimeoutSec=0 StandardOutput=tty RemainAfterExit=yes SysVStartPriority=99[Install] WantedBy=multi-user.target æ¿€æ´»ä¸Šé¢åˆ›å»ºçš„rc-local.serviceï¼š 1sudo systemctl enable rc-local.service åˆ›å»º/etc/rc.localæ–‡ä»¶ï¼š 1sudo vim /etc/rc.local å†™å…¥ä»¥ä¸‹å†…å®¹ï¼š 1234567891011121314151617#!/bin/sh -e# # rc.local## This script is executed at the end of each multiuser runlevel.# Make sure that the script will &quot;exit 0&quot; on success or any other# value on error.## In order to enable or disable this script just change the execution# bits.## By default this script does nothing.# å¼€æœºå¯åŠ¨çš„å‘½ä»¤nohup /home/software/frp/frpc -c /home/software/frp/frpc-ssh.toml &gt; /dev/null 2&gt;&amp;1 &amp;exit 0 æœ€åç»™rc.localæ·»åŠ æ‰§è¡Œæƒé™ï¼š 1sudo chmod +x /etc/rc.local è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†frpçš„å¼€æœºå¯åŠ¨ã€‚ æ€»ç»“ æœ¬æ–‡æˆ‘ä»¬æ€»ç»“äº†frpå¸¸è§çš„å‡ ç§ä½¿ç”¨åœºæ™¯ï¼Œfrpåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œç¡®å®èƒ½å¤Ÿå¸®åŠ©ç¬”è€…è§£å†³å¾ˆå¤šç½‘ç»œä¸Šçš„é—®é¢˜ï¼Œè§£å†³äº†ç¬”è€…åœ¨è¿œç¨‹åŠå…¬ã€è¿œç¨‹è°ƒè¯•ã€è¿œç¨‹æ§åˆ¶ç­‰åœºæ™¯ä¸‹çš„ä¸å°‘é—®é¢˜ï¼›åœ¨åŠå…¬ä¸­ï¼Œè®©ç¬”è€…èƒ½å¤Ÿè½»æ¾ç©¿è¶Šåœ°åŸŸé™åˆ¶ï¼Œè®¿é—®å®¶åº­ç½‘ç»œä¸­çš„å„ç§å½±éŸ³ã€æ–‡æ¡£èµ„æºï¼›å›åˆ°å®¶ä¸­ï¼Œé€šè¿‡æ­å»ºå®‰å…¨é«˜æ•ˆçš„åå‘ä»£ç†éš§é“ï¼Œä¹Ÿèƒ½å¤Ÿç›´æ¥è¿æ¥åˆ°å…¬å¸è¿œç¨‹æœåŠ¡å™¨ä¸Šï¼Œè®©ç¬”è€…èƒ½å¤Ÿæµç•…çš„è°ƒè¯•ã€éƒ¨ç½²é¡¹ç›®ï¼Œæå¤§åœ°æå‡äº†å·¥ä½œæ•ˆç‡ã€‚æ€»è€Œè¨€ä¹‹ï¼Œfrpä»¥å…¶å¼ºå¤§çš„åŠŸèƒ½å’Œçµæ´»çš„éƒ¨ç½²æ–¹å¼ï¼Œæå¤§åœ°ä¸°å¯Œäº†æˆ‘ä»¬çš„ç½‘ç»œæ“ä½œæ‰‹æ®µï¼Œä¸ºè¿œç¨‹å·¥ä½œä¸å­¦ä¹ å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ï¼Œç»å¯¹æ˜¯æ‘¸é±¼å¬æ­Œã€å±…å®¶åŠå…¬çš„ä¸äºŒåˆ©å™¨ã€‚ å‚è€ƒGithubæ–‡æ¡£åœ°å€ubuntu 20.04 æ²¡æœ‰rc.localæ–‡ä»¶çš„è§£å†³æ–¹æ³•","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"},{"name":"Linux","slug":"Linux","permalink":"https://xieyufei.com/tags/Linux/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"},{"name":"å¼€æº","slug":"OpenSource","permalink":"https://xieyufei.com/tags/OpenSource/"}]},{"title":"é»‘æœAppleå®‰è£…æ•™ç¨‹","date":"2024-08-15T12:10:00.000Z","path":"2024/08/15/Black-Apple.html","text":"å¾ˆå¤šå°ä¼™ä¼´æƒ³è¦ä½“éªŒMacOSç³»ç»Ÿçš„æµç•…åº¦ï¼Œä½†æ˜¯æ‰‹ä¸Šæœ‰é—²ç½®çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œé‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡æœ¬æ–‡æ¥å°è¯•å°†MacOSç³»ç»Ÿå®‰è£…åˆ°æˆ‘ä»¬è‡ªå·±çš„ç”µè„‘ä¸Šã€‚ å‡†å¤‡å·¥ä½œ é¦–å…ˆæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ª16GBä»¥ä¸Šçš„Uç›˜ç”¨æ¥åˆ¶ä½œç³»ç»Ÿç›˜ï¼Œå…¶æ¬¡ï¼Œè¿˜éœ€è¦ç”¨çš„çš„è½¯ä»¶å’Œå·¥å…·åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªï¼š ç³»ç»Ÿé•œåƒæ–‡ä»¶ é¦–å…ˆæ˜¯éœ€è¦ä¸‹è½½ç³»ç»Ÿé•œåƒæ–‡ä»¶ï¼Œä½†æ˜¯ä¸åŒçš„EFIæ”¯æŒä¸åŒçš„ç³»ç»Ÿç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½å¯¹åº”çš„ç³»ç»Ÿé•œåƒï¼Œå¯ä»¥å»è‹¹æœç³»ç»Ÿä¹‹å®¶ä¸‹è½½ã€‚ EFIæ–‡ä»¶ ç„¶åå°±æ˜¯æœ€æœ€æœ€é‡è¦çš„EFIæ–‡ä»¶äº†ï¼Œè¿™ç›´æ¥å†³å®šç€æˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿå®‰è£…æˆåŠŸï¼›æˆ‘ä»¬å¯ä»¥åœ¨ç»´æŠ¤æœºå‹EFIæ–‡ä»¶ä»“åº“é‡Œé¢æœç´¢æˆ‘ä»¬ç”µè„‘çš„æœºå‹ï¼›è¿™é‡Œä»¥ç¬”è€…æ‰‹ä¸Šçš„ä¸€å°è”æƒ³L14ç¬”è®°æœ¬ä¸ºä¾‹ï¼Œåœ¨ä»“åº“é‡Œæœç´¢ä¸åˆ°EFIæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æœºå‹+Hackintoshæˆ–è€…æœºå‹+EFIçš„æ–¹å¼åœ¨githubä¸­æœç´¢ï¼›ç¬”è€…æ‰¾åˆ°ä¸€ä¸ªHackintosh-Thinkpad-L14-Gen-1è¿™ä¸ªé¡¹ç›®ï¼Œçœ‹èµ·æ¥æ˜¯æ¯”è¾ƒé€‚åˆæˆ‘ä»¬çš„ç¬”è®°æœ¬ï¼Œå…‹éš†ä¸‹æ¥å¤‡ç”¨ã€‚ ä¸€äº›è½¯ä»¶ ç„¶åå°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ä¸€äº›çƒ§å½•åŠå…¶ä»–å·¥å…·äº†ï¼Œæ¯”å¦‚balenaEtcherã€Diskgeniuså’ŒEasyUEFIï¼›æœ¬æ–‡æ‰€æœ‰çš„å·¥å…·é›†åˆçš„ä¸‹è½½æ–¹å¼è¯·åœ¨æ–‡æœ«è·å–ã€‚ çƒ§å½•é•œåƒ æ‰“å¼€balenaEtcherï¼Œé€‰æ‹©æˆ‘ä»¬ä¸‹è½½å¥½çš„dmgç³»ç»Ÿæ–‡ä»¶å’ŒUç›˜ï¼Œç‚¹å‡»ç°åœ¨çƒ§å½•æŒ‰é’®ï¼š çƒ§å½•çš„æ—¶é—´ä¼šæ¯”è¾ƒä¹…ï¼Œå–å†³äºä½ çš„Uç›˜é€Ÿåº¦ï¼Œè¿˜ä¼šæœ‰ä¸€ä¸ªéªŒè¯çš„è¿‡ç¨‹ã€‚ ç­‰å¾…ä¸€æ®µæ—¶é—´åï¼Œæœ€ç»ˆä¼šæç¤ºçƒ§å½•æˆåŠŸã€‚ ç„¶åæ‰“å¼€Diskgeniusè½¯ä»¶ï¼Œæ‰¾åˆ°Uç›˜ä¸‹é¢çš„EFIåˆ†åŒºï¼Œåˆ é™¤åŸæœ‰çš„æ–‡ä»¶ï¼Œå°†å‰é¢ä¸‹è½½å¥½çš„EFIæ–‡ä»¶å¤¹æ•´ä¸ªæ‹·è´åˆ°EFIåˆ†åŒºä¸­ï¼Œæœ€åçš„æ ¼å¼å¦‚ä¸‹ï¼š å®‰è£…ç³»ç»Ÿ æ’å…¥Uç›˜åˆ°æˆ‘ä»¬éœ€è¦å®‰è£…çš„ç¬”è®°æœ¬ç”µè„‘ä¸­ï¼Œé€‰æ‹©Uç›˜å¯åŠ¨ï¼Œä¸€èˆ¬æ˜¯å¿«æ·é”®ESCæˆ–è€…F12ç­‰ï¼Œå…·ä½“å¯ä»¥ç½‘ä¸Šæ‰¾åˆ°å¯¹åº”èµ„æ–™ï¼›è¿›å…¥Uç›˜åï¼Œé€‰æ‹©ç£ç›˜å·¥å…·ï¼Œéœ€è¦å°†æˆ‘ä»¬çš„ç¡¬ç›˜è¿›è¡Œæ ¼å¼åŒ–ï¼š é€‰ä¸­æˆ‘ä»¬çš„ç¡¬ç›˜ï¼Œç‚¹å‡»å³ä¸Šè§’çš„æŠ¹æ‰æŒ‰é’®ï¼Œé€‰æ‹©APFSæ ¼å¼ï¼Œç‚¹å‡»æŠ¹æ‰æŒ‰é’®è¿›è¡Œæ“ä½œã€‚ å›åˆ°é¦–å±ç•Œé¢ï¼Œé€‰æ‹©å®‰è£…macOSï¼Œç„¶åç‚¹å‡»ç»§ç»­ï¼š é€‰æ‹©æˆ‘ä»¬åˆšæŠ¹æ‰çš„ç£ç›˜ï¼š ç­‰å¾…å®‰è£…å®Œæˆé€‰æ‹©æˆ‘ä»¬åˆšæŠ¹æ‰çš„APFSæ ¼å¼çš„ç£ç›˜ï¼š ä¸­é—´ä¼šé‡å¯ä¸€ä¸¤æ¬¡ï¼Œé‡å¯åç»§ç»­é€‰æ‹©macOS Installerå³å¯ï¼š æœ€ç»ˆæˆ‘ä»¬çš„MacOSç³»ç»Ÿå°±å®‰è£…å®Œæˆï¼Œè¿›è¡Œä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ“ä½œåå°±å¯ä»¥å¼€å¿ƒçš„ç©è€äº†ã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€é»‘æœå®‰è£…ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"}]},{"title":"æ·±å…¥æŒ–æ˜å¾®è½¯å¸å›½çš„åˆ›ä¸šå²","date":"2024-07-01T04:00:00.000Z","path":"2024/07/01/Dig-Microsoft.html","text":"åœ¨çŸ¥ä¹ä¸Šæœ‰è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šä¸­å›½å‡ åƒä¸‡å¤§å­¦ç”Ÿï¼Œä¸ºä»€ä¹ˆå‡ºä¸äº†æ¯”å°”ç›–èŒ¨ï¼Œä¹”å¸ƒæ–¯ï¼Œé©¬æ–¯å…‹ï¼Ÿå¾ˆå¤šå›ç­”éƒ½å½’å’äºå›½å†…çš„ç§‘æŠ€åˆ›æ–°ã€æ”¿ç­–ã€åˆ¶åº¦ã€å…¬å¹³æ€§ç­‰ç­‰å› ç´ ï¼›ä½†æ˜¯å¾ˆå°‘æœ‰äººçœŸæ­£å»å…³æ³¨ä»–ä»¬æˆåŠŸèƒŒåçš„çœŸæ­£åŸå› å’ŒåŠ¨æœºï¼Œæœ¬æ–‡å°±ä»å¾®è½¯çš„åˆ›ä¸šå²å¼€å§‹ï¼Œæ·±å…¥æŒ–æ˜å¤§ä½¬åˆ›ä¸šèƒŒåçš„çœŸæ­£æ•…äº‹ã€‚ æˆ‘ä»¬ä¼ ç»Ÿå°è±¡ä¸­çš„æ¯”å°”ç›–èŒ¨å°±æ˜¯è¿å¹´éœ¸æ¦œä¸–ç•Œé¦–å¯Œã€åšæ…ˆå–„ä»¥åŠä»–çš„ç§‘æŠ€å¤§Houseç­‰ç­‰æ ‡ç­¾ï¼›ä½†æ˜¯å¦‚æœä½ å»ç½‘ä¸Šæœç´¢ä¸€äº›ä¹‹å‰çš„åˆ›ä¸šå†ç¨‹ï¼Œå¾ˆå¤šç»å†éƒ½æ˜¯ç»è¿‡åŒ…è£…ç¾åŒ–åçš„ï¼Œæ¡ˆä¾‹å’Œäº‹å®éƒ½è¢«æœ‰æ„æ— æ„çš„å‰¥ç¦»å’Œæ©ç›–äº†ã€‚ æ‰€ä»¥å¾ˆå¤šå¤§ä½¬çš„åˆ›ä¸šè¿‡ç¨‹ä½ ä¼šè§‰å¾—å¾ˆåŠ±å¿—ï¼Œæ¯”å¦‚åª’ä½“æ–‡ç« åªä¼šä»‹ç»å¤§ä½¬ä»¬åœ¨æŸä¸ªæ—¶é—´ç‚¹åšäº†æŸä»¶äº‹ï¼Œçªç„¶å°±é¢„æµ‹å¯¹äº†æœªæ¥çš„ç§‘æŠ€å‘å±•æ–¹å‘ï¼Œè«åå…¶å¦™çš„å°±æˆåŠŸäº†ï¼›ä½†æ˜¯çœ‹å®Œäº†ä¹‹åå•¥ä¹Ÿæ²¡å­¦ä¼šï¼Œåªè§‰å¾—å¥½åƒè¢«äººçŒäº†ä¸€ç¢—é¸¡æ±¤ï¼Œå¾ˆè¡¥å¾ˆå¥½å–ï¼Œä½†æ˜¯å¯¹ä½ çš„èº«ä½“æ²¡æœ‰ä»»ä½•çš„ç›Šå¤„ï¼Œé™¤äº†è®©ä½ æ›´åŠ çš„æ²¹è…»ä»¥å¤–ã€‚ ä½†å…¶å®å¦‚æœæœ‰è¿‡åˆ›ä¸šç»å†çš„å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œè¦é¢„æµ‹æœªæ¥æ˜¯ååˆ†å›°éš¾çš„ï¼Œå› ä¸ºé¢„æµ‹æœªæ¥æ„å‘³ç€æŠ•å…¥ä¸€å®šçš„ç²¾åŠ›å’Œé‡‘é’±åˆ°ä¸€ä¸ªæœªçŸ¥çš„é¢†åŸŸï¼Œé£é™©æ˜¯å¾ˆé«˜çš„ï¼›è€Œä¸”å³ä½¿å¯¹æœªæ¥çš„é¢„æµ‹åŸºæœ¬æ­£ç¡®ï¼Œä¹Ÿæœ‰æå¤§çš„å¯èƒ½ä¼šç»å†å¤±è´¥ï¼›å…¸å‹çš„æ¡ˆä¾‹å¦‚åˆ›é€ å‡ºäº†ç¬¬ä¸€æ‰¹ä¸ªäººç”µè„‘Altoå’Œæå‡ºä»¥å¤ªç½‘æ„æƒ³çš„æ–½ä¹å…¬å¸ï¼Œæœ‰æŠ€æœ¯æœ‰èµ„é‡‘ï¼Œæ›´æœ‰å¤§æ‰¹ä¼˜ç§€çš„äººæ‰ï¼Œä½†æ˜¯æœ€åè¿˜æ˜¯æ— å¥ˆçš„æ¶ˆå¤±åœ¨å†å²çš„èˆå°ä¸Šã€‚ å…·ä½“æ•…äº‹å¯ä»¥å‚è€ƒæ–½ä¹å’Œä»–çš„ä¸¤ä¸ªå°å·é‚»å±…ï¼Œæœ¬æ–‡ä¸å†å±•å¼€ã€‚ å› æ­¤çœŸå®çš„åˆ›ä¸šè¿‡ç¨‹è¿œæ²¡æœ‰åª’ä½“è¯´çš„é‚£ä¹ˆç®€å•è½»æ¾ï¼Œå¯ä»¥è¯´æ˜¯å……æ»¡äº†è¾›é…¸ï¼›ä¸€å®¶ä¼ä¸šèƒ½å¤Ÿåœ¨æ¿€çƒˆçš„å¸‚åœºåŒ–ç«äº‰ä¸­ç”Ÿå­˜ä¸‹æ¥å·²æ˜¯è‰°éš¾ï¼›è€Œè¦æƒ³åšåˆ°ä¸–ç•Œçº§åˆ«çš„ä¼ä¸šï¼Œæ›´æ˜¯éš¾ä¸ŠåŠ éš¾ï¼Œé™¤äº†éå‡¡çš„å•†ä¸šå¤´è„‘å’Œçœ¼å…‰ï¼Œéšè—åœ¨èƒŒå…‰ç¯åº•ä¸‹çš„é‚£äº›ä¸ä¸ºäººçŸ¥çš„æ‰‹æ®µå’Œé˜´è°‹ï¼ŒåŒæ ·å€¼å¾—æˆ‘ä»¬å»å…³æ³¨å’Œè­¦é†’ï¼›æ­£å¦‚é‚£å¥è€è¯è¯´çš„é‚£æ ·ï¼š æ²¡æœ‰äººèƒ½å¤Ÿéšéšä¾¿ä¾¿æˆåŠŸã€‚ å¦‚æœæŠŠå¾®è½¯çš„åˆ›ä¸šå²åˆ’åˆ†æˆå¤šä¸ªé˜¶æ®µçš„è¯ï¼ŒæŒ‰ç…§ä¸åŒçš„æ—¶é—´ï¼Œå¤§è‡´åˆ†ä¸ºå››ä¸ªæ—¶æœŸï¼Œåˆ†åˆ«å¤§å­¦å‰çš„å­¦ç”Ÿæ—¶æœŸã€å¤§å­¦è¾å­¦åˆ°MITSåˆä½œè¿™æ®µæ—¶é—´çš„åˆ›ä¸šåˆæœŸä»¥åŠå’ŒIBMè‹¹æœåˆä½œçš„äº‹ä¸šè…¾é£æ—¶æœŸï¼Œæœ€åæˆ‘ä»¬çœ‹ä¸‹å¾®è½¯å„æ–­æ“ä½œç³»ç»Ÿåï¼Œå¸¦æ¥çš„é‚£åœºæµè§ˆå™¨å¤§æˆ˜ã€‚ å­¦ç”Ÿæ—¶æœŸ æƒ³è¦äº†è§£ä¸€ä¸ªäººï¼Œå®¶åº­å¯¹ä¸ªäººçš„çš„å½±å“æ˜¯ç»•ä¸å¼€çš„ï¼›1955å¹´10æœˆï¼Œæ¯”å°”ç›–èŒ¨ï¼ˆä¸‹é¢ç®€ç§°ç›–èŒ¨ï¼‰å‡ºç”Ÿäºç¾å›½åç››é¡¿å·è¥¿é›…å›¾å¸‚ï¼›ä»–çš„çˆ¶äº²æ˜¯ä¸€åè‘—åçš„å¾‹å¸ˆï¼Œä»–çš„æ¯äº²çš„èº«ä»½åˆ™æœ‰å¤šç§è¯´æ³•ï¼Œä¸€ç§æ˜¯å¤§å­¦è‘£äº‹ï¼Œä¸€ç§è¯´æ³•æ˜¯å®¶åº­ä¸»å¦‡ï¼Œè¿˜æœ‰è¯´æ˜¯æ•™å¸ˆç­‰ç­‰ï¼›ä¸è¿‡ä»–çš„å¤–ç¥–çˆ¶æ›¾ç»æ‹…ä»»è¿‡é“¶è¡Œè¡Œé•¿ï¼Œå› æ­¤ç¬”è€…çŒœæµ‹ç›–èŒ¨çš„æ¯äº²åº”è¯¥æ˜¯åœ¨ä»–å°çš„æ—¶å€™åœ¨å®¶åšè¿‡ä¸€æ®µæ—¶é—´çš„å…¨èŒä¸»å¦‡ï¼Œåæ¥æ‹…ä»»è¿‡ä¸åŒçš„èŒä½ã€‚ ä¸è¿‡ï¼Œä¸è®ºæ˜¯å“ªç§ï¼Œå¯ä»¥ç¡®å®šçš„æ˜¯ç›–èŒ¨çš„å®¶åº­æƒ…å†µåœ¨ç¾å›½åŸºæœ¬æ˜¯ä¸Šå±‚çš„ï¼›å› ä¸ºå¾‹å¸ˆçš„æ”¶å…¥åœ¨ç¾å›½æœ¬æ¥å°±å¾ˆé«˜ï¼Œç›–èŒ¨çš„çˆ¶äº²åœ¨å¾‹å¸ˆç•Œè¿˜å¾ˆæœ‰å¨æœ›ï¼Œåšè¿‡å¾‹å¸ˆåä¼šä¸»å¸­ï¼›è¿™ä¹Ÿè®©ç›–èŒ¨ä»å°å¯¹ä¸€äº›æ³•å¾‹çš„çŸ¥è¯†è€³æ¿¡ç›®æŸ“ï¼Œä¸ºä»–ä»¥ååº”ä»˜å¤„ç†å„ç§å®˜å¸å¥ å®šäº†åŸºç¡€ï¼Œç”šè‡³è¿˜æä¾›äº†ä¸å°‘çš„å¸®åŠ©ã€‚ å°æ—¶å€™çš„ç›–èŒ¨æ ¹æ®å…¬å¼€çš„èµ„æ–™ï¼Œæ€§æ ¼ä¸»è¦ä¹Ÿåˆ†æˆä¸¤ç§ï¼Œä¸€ç§å°±æ˜¯æ¯”è¾ƒé¡½åŠ£ï¼Œä¸çˆ±æ²Ÿé€šï¼Œçˆ¶æ¯å¸¦å»çœ‹å¿ƒç†åŒ»ç”Ÿï¼›å¦ä¸€ç§ä»‹ç»åˆ™æ˜¯å®¶åº­æ°›å›´å¥½ï¼Œå®¶åº­å†…ç»å¸¸æ¯”èµ›ç©æ¸¸æˆï¼Œæœ‰ç«äº‰ç²¾ç¥ã€é¢†å¯¼æ‰èƒ½ç­‰ç­‰ï¼›ç¬”è€…çš„çœ‹æ³•æ˜¯ï¼Œä¸¤ç§åº”è¯¥éƒ½æœ‰ï¼Œåè€…ç»è¿‡äº†ç¾åŒ–ï¼Œå› ä¸ºç›–èŒ¨çš„æ€§æ ¼ä»ä»–åæ¥çš„äº‹è¿¹æ¥çœ‹ç¡®å®ä¸é‚£ä¹ˆå¥½ç›¸å¤„çš„ï¼Œä½†æ˜¯å®¶åº­æ°›å›´ç¡®å®æ¯”è¾ƒå¥½ï¼Œä»å°å°±å…»æˆäº†ç›–èŒ¨çˆ±è¯»ä¹¦ã€å–œæ¬¢ç«äº‰çš„æ€§æ ¼ã€‚ æ¹–æ»¨ä¸­å­¦ 1976å¹´ï¼Œ12å²çš„ç›–èŒ¨è¢«çˆ¶æ¯é€å…¥äº†å½“åœ°è‘—åçš„ç§ç«‹å­¦æ ¡ï¼šæ¹–æ»¨ä¸­å­¦ï¼Œè¿™æ‰€å­¦æ ¡çš„å­¦è´¹é«˜è¾¾æ¯å­¦æœŸ5000ç¾å…ƒï¼Œä¹Ÿå°±æ˜¯ä¸€å¹´ä¸€ä¸‡ç¾å…ƒï¼Œæ¢ç®—æˆç°åœ¨çš„ç‰©ä»·ï¼ŒåŸºæœ¬ç›¸å½“äºåå¤šä¸‡äººæ°‘å¸ä¸€å¹´ï¼Œè¯»è€…ä»¬å¯ä»¥å‚è€ƒä½ ä»¬å½“åœ°çœåŸé‡Œæœ€å¥½çš„ç§ç«‹å­¦æ ¡çš„æ ‡å‡†ã€‚ ä¸è¿‡å­¦è´¹é«˜æœ‰é«˜çš„ç†ç”±ï¼Œåœ¨ä¸ƒåå¹´ä»£çš„æ—¶å€™ï¼Œè¿™æ‰€å­¦æ ¡å°±å·²ç»å¼€å§‹æœ‰æ„è¯†çš„å¼•å…¥è®¡ç®—æœºè¿›è¡Œæ•™å­¦äº†ï¼›é‚£ä¸ªæ—¶å€™çš„è®¡ç®—æœºè¿˜æ˜¯éå¸¸éå¸¸æ˜‚è´µçš„ï¼Œå› æ­¤è®¡ç®—æœºçš„ä¸»è¦å®¢æˆ·éƒ½æ˜¯ä¸€äº›å†›äº‹ã€ç§‘ç ”å•ä½ä»¥åŠå¤§å…¬å¸ï¼Œæ‰æœ‰èµ„é‡‘ä»¥åŠéœ€æ±‚æ¥ä½¿ç”¨è®¡ç®—æœºã€‚ é‚£ä¸ªæ—¶å€™çš„è®¡ç®—æœºè·Ÿæˆ‘ä»¬ç°åœ¨å­¦æ ¡é‡Œç»å¸¸çœ‹åˆ°å¾®æœºæˆ¿é‡Œçš„è®¡ç®—æœºå¾ˆä¸ä¸€æ ·ï¼Œç°åœ¨çš„æˆ‘ä»¬å·²ç»å¾ˆéš¾æƒ³è±¡äº†ï¼Œå½“æ—¶é™¤äº†è´­ä¹°æœºå™¨çš„æ˜‚è´µè´¹ç”¨å¤–ï¼Œè¿˜éœ€è¦æŒ‰ç…§æ¯ä¸ªå°æ—¶æ”¶å–ä¸è²çš„ä¸Šæœºè´¹ç”¨ã€‚ å½“æ—¶çš„æ¹–æ»¨ä¸­å­¦å°±å·²ç»æ‹¥æœ‰äº†ä¸€å°DECå…¬å¸çš„PDP-8å‹è®¡ç®—æœºï¼Œå­¦æ ¡å°±æä¾›ç»™å­¦ç”Ÿä»¬ä½¿ç”¨ï¼›å½“æ—¶ç›–èŒ¨å’Œä»–æ¹–æ»¨ä¸­å­¦çš„åŒå­¦ä¿ç½—è‰¾ä¼¦ï¼ˆä¹Ÿå°±æ˜¯æ—¥åå¾®è½¯çš„åˆä¼™äººï¼‰å°±éå¸¸è¿·æ‹è®¡ç®—æœºï¼Œä»–ä»¬ä¸¤åªè¦ä¸€æœ‰æ—¶é—´å°±åˆ°æœºæˆ¿å­¦æ ¡æ“ä½œè®¡ç®—æœºï¼›åæ¥ä»–ä»¬åˆ©ç”¨è®¡ç®—æœºè½¯ä»¶çš„æ¼æ´ï¼Œå·å·è·å¾—äº†å…è´¹çš„ä¸Šæœºæ—¶é•¿ï¼Œå¾ˆå¿«å°†å­¦æ ¡é¢„ç®—çš„ä¸Šæœºæ—¶é•¿ç»™ç”¨å®Œäº†ï¼Œè¢«å­¦æ ¡å‘ç°åä¸¤äººå°±è¢«ç¦æ­¢è¿›å…¥æœºæˆ¿ã€‚ æœ‰äº›æ–‡ç« è¿™é‡Œè¯´æ¹–æ»¨ä¸­å­¦çš„æ˜¯PDP-10å‹è®¡ç®—æœºï¼Œè€Œç›–èŒ¨çš„è‡ªè¿°ä¹¦ã€Šæœªæ¥ä¹‹è·¯ã€‹ä¸­æ¸…æ¥šçš„å†™é“ï¼š æœ€æ—©çš„è®¡ç®—æœºå«åšPDP-1ï¼Œè¿™æ˜¯æˆ‘é«˜ä¸­æ—¶ä»£çš„PDP-8çš„å‰èº«ã€‚ åœ¨è¿™æœŸé—´ï¼Œåå‡ å²çš„ç›–èŒ¨å’Œè‰¾ä¼¦å°±å±•ç°å‡ºäº†éå‡¡çš„ç¼–ç¨‹æŠ€æœ¯ï¼Œä»–ä»¬åˆ©ç”¨äº†ç¼–ç¨‹æŠ€æœ¯ï¼Œå¸®åŠ©è½¯ä»¶å…¬å¸å¼€å‘è½¯ä»¶æ‰¾åˆ°bugï¼Œäº¤æ¢æ¡ä»¶å°±æ˜¯ä¸Šæœºæ—¶é•¿ï¼›åœ¨1971å¹´ï¼Œç›–èŒ¨åˆå¸®åŠ©äº†æ¯æ ¡æ¹–æ»¨ä¸­å­¦è®¾è®¡äº†ä¸€æ¬¾å®‰æ’è¯¾è¡¨çš„è½¯ä»¶ï¼Œåæ¥åˆä»¥4200ç¾å…ƒå–ç»™äº†æ¯æ ¡ã€‚ å“ˆä½›å¤§å­¦ 1973å¹´ç§‹å¤©ï¼Œç›–èŒ¨ä»¥é«˜åˆ†è€ƒå…¥äº†å“ˆä½›å¤§å­¦ï¼Œä»–çš„çˆ¶æ¯ä¹Ÿä¸€ç›´æƒ³è®©ä»–å­æ‰¿çˆ¶ä¸šåšä¸€åå¾‹å¸ˆï¼Œäºæ˜¯é¡ºåˆ©çš„è¿›å…¥äº†æ³•å­¦é™¢å­¦ä¹ ï¼›ä¸è¿‡ç›–èŒ¨å¯¹æ³•å¾‹å¹¶ä¸æ„Ÿå…´è¶£ï¼Œå› æ­¤ç»å¸¸é€ƒè¯¾ï¼Œæˆ–è€…åœ¨å®¿èˆå’ŒåŒå­¦ç©ç‰Œï¼Œåœ¨è¿™æœŸé—´ä¸åŒå¯å®¤çš„å²è’‚å¤«é²å°”é»˜ç»“ä¸ºå¯†å‹ã€‚ è¿™æ—¶ç›–èŒ¨é«˜ä¸­çš„åŒå­¦è‰¾ä¼¦ï¼Œå·²ç»åˆ°ä¸€å®¶å…¬å¸å·¥ä½œï¼Œä»–éš”ä¸‰å·®äº”çš„åˆ°å“ˆä½›æ‰¾ç›–èŒ¨ï¼›ä»–ä»¬ä»å®¿èˆå‘æ‰€æœ‰çš„è®¡ç®—æœºå¤§å…¬å¸å¯„ä¿¡ï¼Œæ¯›é‚è‡ªèåœ°ä¸ºä»–ä»¬ç¼–å†™Basicè½¯ä»¶ï¼Œä¸è¿‡å¾ˆæ˜æ˜¾å¤§å…¬å¸å¹¶æ²¡æœ‰ç†ç¬è¿™ä¸¤ä¸ªæ¯›å¤´å°å­ã€‚ 1975å¹´1æœˆçš„ä¸€å¤©ï¼Œç›–èŒ¨å’Œè‰¾ä¼¦ä¹°æ¥ä¸€æœ¬ã€Šå¤§ä¼—ç”µå­å­¦ã€‹æ‚å¿—ï¼Œä»‹ç»çš„æ˜¯å½“æ—¶MITSå…¬å¸æ–°æ¨å‡ºçš„Altair-8800è®¡ç®—æœºï¼ˆä¹Ÿè¢«ç¿»è¯‘ä¸ºç‰µç‰›æ˜Ÿ8800ï¼‰ï¼Œä½¿ç”¨çš„æ˜¯å½“æ—¶è‹±ç‰¹å°”æœ€æ–°çš„8080å¾®å¤„ç†å™¨ï¼Œæ˜¯ä¸€æ¬¾ä¸ºè®¡ç®—æœºçˆ±å¥½è€…ç”Ÿäº§çš„å°å‹ä¸ªäººè®¡ç®—æœºï¼Œå®ƒçš„å…¨éƒ¨å”®ä»·æ‰397ç¾å…ƒã€‚ ä»ä¸Šé¢çš„å›¾ç‰‡ä¹Ÿèƒ½å‘ç°ï¼Œè™½ç„¶Altair-8800è¢«ç§°ä¸ºä¸ªäººè®¡ç®—æœºï¼Œä½†å®ƒç›¸æ¯”æˆ‘ä»¬ç°åœ¨çš„ä¸ªäººç”µè„‘è¿˜æ˜¯æ˜¾å¾—éå¸¸â€œåŸå§‹â€ã€‚ Altair-8800å¹¶ä¸æ˜¯ä¸€å°å®Œæ•´çš„è®¡ç®—æœºï¼Œæ—¢æ²¡æœ‰é”®ç›˜ï¼Œä¹Ÿæ²¡æœ‰æ˜¾ç¤ºå™¨ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç»„è£…èµ·æ¥ï¼›æ’ä¸Šç”µæºï¼Œä½¿ç”¨è€…éœ€è¦ç”¨æ‰‹æŒ‰ä¸‹é¢æ¿ä¸Šçš„8ä¸ªå¼€å…³ï¼Œæ‹¨åŠ¨ä¸€æ¬¡ç›¸å½“äºè¾“å…¥ä¸€ä¸ªå­—èŠ‚ï¼Œè®¡ç®—å®Œæˆåï¼Œé¢æ¿ä¸Šçš„ä¸€æ’ä¿¡å·å°ç¯ç»™å‡ºäºŒè¿›åˆ¶çš„è¾“å‡ºç»“æœã€‚ å°±æ˜¯è¿™æ ·ä¸€å°çœ‹ä¼¼ç®€é™‹çš„è®¡ç®—æœºï¼Œå´è®©ç›–èŒ¨å’Œè‰¾ä¼¦æ¿€åŠ¨ä¸å·²ï¼›å¤šå¹´åï¼Œåœ¨ã€Šæœªæ¥ä¹‹è·¯ã€‹ä¸­ï¼Œç›–èŒ¨è¿™ä¹ˆå›å¿†èµ·ä»–ä»¬ç¬¬ä¸€æ¬¡è§åˆ°Altairçš„åœºæ™¯ï¼š è¿‡å»çš„20å¹´å¯¹æˆ‘æ¥è¯´æ˜¯ä¸€ä¸ªä»¤äººéš¾ä»¥ç½®ä¿¡çš„å†’é™©è¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹æœ€åˆå¼€å§‹çš„é‚£ä¸ªæ—¥å­ï¼Œæˆ‘è¿˜æ˜¯ä¸€ä¸ªå¤§å­¦äºŒå¹´çº§å­¦ç”Ÿï¼Œé‚£å¤©ï¼Œæˆ‘å’Œæˆ‘çš„æœ‹å‹ä¿ç½—Â·è‰¾ä¼¦æ­£ç«™åœ¨å“ˆä½›å¤§å­¦å¹¿åœºä¸Šå¿˜æƒ…åœ°é˜…è¯»ã€Šå¤§ä¼—ç”µå­å­¦ã€‹æ‚å¿—ä¸Šæœ‰å…³ä¸€å°å°è®¡ç®—æœºçš„æè¿°æ–‡ç« ã€‚åœ¨ä¿ç½—å’Œæˆ‘å…´å¥‹åœ°é˜…è¯»è¿™ç¯‡æœ‰å…³ç¬¬ä¸€éƒ¨çœŸæ­£çš„ä¸ªäººè®¡ç®—æœºçš„æ–‡ç« æ—¶ï¼Œæˆ‘ä»¬è¿˜ä¸å¤§æ¸…æ¥šè¿™ç§è®¡ç®—æœºä¼šå¾—åˆ°æ€æ ·çš„å…·ä½“åº”ç”¨ã€‚ä½†æˆ‘ä»¬ç¡®ä¿¡ï¼Œå®ƒå°†ä¼šæ”¹å˜æˆ‘ä»¬å’Œæ•´ä¸ªè®¡ç®—ä¸–ç•Œã€‚ ç»è¿‡ä¸€ç•ªè€ƒè™‘ä¹‹åï¼Œç›–èŒ¨ç»™MITSçš„è€æ¿ç½—ä¼¯èŒ¨æ‰“ç”µè¯ï¼Œè¯´ä»–å’Œæœ‹å‹å·²ç»å¼€å‘å‡ºäº†Basicè¯­è¨€ï¼Œä¿®æ”¹åå°±å¯ä»¥ç”¨åœ¨Altairä¸Šï¼Œè™½ç„¶å½“æ—¶ä»–ä»¬ä¸€è¡Œä»£ç ä¹Ÿæ²¡æœ‰å†™ï¼›ç²¾æ˜çš„å•†äººç½—ä¼¯èŒ¨å½“ç„¶ä¸ä¼šéšä¾¿å°±ç›¸ä¿¡ä¸¤ä¸ªå°æ¯›å­©çš„è¯ï¼Œå½“åœºå°±è¯´ä»–åªè¦çœ‹å®é™…çš„æˆæœï¼Œè°å…ˆç»™ä»–åšå‡ºæ¥è½¯ä»¶ï¼Œä»–å°±å’Œè°åšç”Ÿæ„ã€‚ äºæ˜¯ï¼Œä¸ºäº†å°½å¿«å¼€å‘å‡ºèƒ½è¿è¡Œåœ¨Altair-8800ä¸Šçš„è½¯ä»¶ï¼Œä¸¤äººä¸åˆ†æ˜¼å¤œçš„å·¥ä½œï¼›ä¸è¿‡ä»–ä»¬è¿è¿™å°è®¡ç®—æœºéƒ½æ²¡æœ‰è§è¿‡ï¼Œç›–èŒ¨å°†è‰¾ä¼¦å¸¦åˆ°äº†å“ˆä½›å¤§å­¦ï¼Œå‡è£…æˆå“ˆä½›çš„å­¦ç”Ÿï¼Œåˆ©ç”¨å­¦æ ¡çš„ä¸€å°PDP-10å‹çš„è®¡ç®—æœºä¸Šæ¨¡æ‹Ÿå‡ºå¤„ç†å™¨ï¼Œç„¶åå†ä¸ºè¿™ä¸ªå¤„ç†å™¨ç¼–å†™ç¨‹åºã€‚ ç»è¿‡äº†8ä¸ªæ˜ŸæœŸçš„å¥‹æˆ˜ä¹‹åï¼Œä»–ä»¬ç»ˆäºæŠŠç¨‹åºè®¾è®¡æˆåŠŸäº†ã€‚1975å¹´2æœˆï¼Œè‰¾ä¼¦äº²è‡ªåé£æœºåˆ°MITSï¼Œå‘ç½—ä¼¯èŒ¨æ¼”ç¤ºä»–ä»¬å¼€å‘çš„è½¯ä»¶ã€‚ å°±è¿™æ ·ï¼Œå†å²æ€§çš„æ—¶åˆ»æ¥äº†ï¼Œè‰¾ä¼¦ç´§å¼ çš„æŠŠä»–ä»¬ç¼–å†™çš„Basicè¯­è¨€çš„çº¸å¸¦è¾“å…¥è¿›è¿›è®¡ç®—æœºï¼Œå‡†å¤‡å°±ç»ªåï¼Œç´§æ¥ç€ä»–è¾“å…¥äº†2+2çš„æŒ‡ä»¤ï¼Œè®¡ç®—æœºç«‹åˆ»æ˜¾ç¤ºæ­£ç¡®çš„ç­”æ¡ˆ4ï¼Œè‰¾ä¼¦çŸ¥é“ä»–ä»¬æˆåŠŸäº†ã€‚ ä¸¤äººç¨ä½œä¼‘æ•´åï¼Œè‰¾ä¼¦å›åˆ°äº†ä»–åŸæ¥çš„å…¬å¸ï¼Œç»§ç»­æ”¹è¿›è½¯ä»¶ï¼Œè€Œç›–èŒ¨å›åˆ°å“ˆä½›ç»§ç»­ä¸Šå­¦ï¼Œå®Œå–„Basicè¯­è¨€ã€‚ å“ˆä½›å¤§å­¦å¾ˆå¿«çŸ¥é“äº†ä¸¤äººåˆ©ç”¨å­¦æ ¡è®¡ç®—æœºå¼€å‘è½¯ä»¶çš„äº‹ï¼Œè¿™å°±è®©å­¦æ ¡å¾ˆæ¼ç«äº†ï¼Œä¸€æ–¹é¢ç›–èŒ¨å±…ç„¶ç§è‡ªåˆ©ç”¨å­¦æ ¡çš„è®¡ç®—æœºå¼€å‘å•†ä¸šäº§å“è·åˆ©ï¼Œå¦ä¸€æ–¹é¢ä½ è¿˜å¸¦äº†æ ¡å¤–äººå‘˜è¿›å‡ºæ ¡å›­ï¼Œè¿™å°±å¾ˆä¸åœ°é“äº†ã€‚ å­¦æ ¡å¯¹ç›–èŒ¨è¿›è¡Œä¸¥å‰çš„è®­æ–¥ï¼Œå¹¶è¦æ±‚ä»–å¯¹æ­¤åšå‡ºè§£é‡Šï¼›è¿™å°±æœ‰ç‚¹åƒä½ åœ¨å…¬å¸é‡Œå·å·çš„æ¥ç§æ´»æŒ£å¤–å¿«ï¼Œä¸ä½†ç”¨äº†å…¬å¸çš„æ°´ç”µï¼Œæ™šä¸Šè¿˜ä½åœ¨å…¬å¸ï¼Œä¸å·§è®©è€æ¿ç»™çŸ¥é“äº†ï¼Œè€æ¿éƒ½æƒ³æŠŠä½ ç»™å¼€äº†ï¼›ä¸è¿‡ç›–èŒ¨å¯¹æ­¤æœ‰ä¸€å¥—è‡ªå·±çš„è¯¡è¾©ï¼š å¤§å­¦çš„æ•™æˆå¯ä»¥åˆ©ç”¨å­¦æ ¡çš„èµ„æ–™æ¥å†™ä¹¦ï¼Œå‘è¡¨åå¾—äº†ç¨¿è´¹ï¼Œå¹¶ä¸ç”¨å‘å­¦æ ¡äº¤ä»€ä¹ˆè´¹ç”¨ï¼Œä¸ºä»€ä¹ˆæˆ‘å´è¦ä¸ºä½¿ç”¨å­¦æ ¡çš„è®¡ç®—æœºè€Œäº¤è´¹å‘¢? ç”±äºè¿™å°è®¡ç®—æœºæ˜¯ç”±å†›æ–¹æèµ çš„ï¼Œå­¦æ ¡ä¹Ÿä¸æƒ³æŠŠäº‹æƒ…æå¤§è¢«å†›æ–¹çŸ¥é“ï¼Œæœ€åä¹Ÿåªèƒ½ä¸äº†äº†ä¹‹äº†ï¼›ä¸è¿‡éšåå­¦æ ¡å°±åˆ¶å®šäº†ç›¸å…³è§„å®šï¼šä»»ä½•äººä½¿ç”¨å­¦æ ¡çš„è®¡ç®—æœºå¼€å‘å‡ºå•†ä¸šäº§å“åï¼Œéƒ½è¦å’Œå­¦æ ¡åˆ†äº«åˆ©æ¶¦ã€‚ ä¼‘å­¦åˆ›ä¸š ç”±äºç‰µç‰›æ˜Ÿäº§å“çš„å¤§å—æ¬¢è¿ï¼Œè®©ç½—ä¼¯èŒ¨çš„å…¬å¸æ‰­äºä¸ºç›ˆï¼Œéœ€æ±‚é‡è¿œè¶…å…¬å¸çš„ç”Ÿäº§èƒ½åŠ›ï¼ŒåŒæ—¶ç½—ä¼¯èŒ¨ä¹Ÿæ€¥éœ€ç›–èŒ¨å’Œè‰¾ä¼¦è¿™æ ·çš„äººæ‰ä¸ºä»–ç»§ç»­å®Œå–„è½¯ä»¶ï¼Œäºæ˜¯å‘å‡ºé‚€è¯·ï¼›ç›–èŒ¨å’Œè‰¾ä¼¦ä¸¤äººäºæ˜¯å†³å®šåˆ›åŠä¸€å®¶è‡ªå·±çš„å…¬å¸ï¼Œç‹¬ç«‹å‡ºå”®è‡ªå·±çš„è½¯ä»¶äº§å“ï¼Œä¸è¿‡æ­¤æ—¶çš„ç›–èŒ¨è¿˜æ²¡æœ‰ä¸‹å®šå†³å¿ƒè¾å­¦ï¼›äºæ˜¯ä¸¤ä¸ªäººæŒ‰ç…§å„è‡ªçš„æ„æ„¿è¡Œäº‹ï¼Œç›–èŒ¨ç»§ç»­ç€ä»–çš„å­¦ä¸šï¼Œè€Œè‰¾ä¼¦è¾å»äº†åŸæ¥çš„å·¥ä½œï¼Œæ¥åˆ°äº†ç½—ä¼¯èŒ¨çš„å…¬å¸æ‹…ä»»è½¯ä»¶éƒ¨é—¨ç»ç†ã€‚ åæ¥ï¼Œåœ¨è‰¾ä¼¦çš„åŠè¯´ä¸‹ï¼Œç›–èŒ¨æ€»ç®—ä¸‹å®šäº†å†³å¿ƒï¼Œå›å®¶å’Œçˆ¶æ¯å•†é‡ä¼‘å­¦åˆ›åŠä¸€å®¶è½¯ä»¶å…¬å¸ï¼›æ˜¯çš„ï¼Œå½“æ—¶ç›–èŒ¨æœ€å¼€å§‹è€ƒè™‘çš„æ˜¯ä¼‘å­¦ï¼Œè€Œä¸æ˜¯å¾ˆå¤šæ–‡ç« è¯´çš„è¾å­¦ï¼Œæˆ‘ä»¬å¯ä»¥ä»ã€Šæœªæ¥ä¹‹è·¯ã€‹ä¸­æ‰¾åˆ°ç­”æ¡ˆï¼š æˆ‘çš„è®¡åˆ’æ˜¯å…ˆä¼‘å‡æ¥åˆ›åŠä¸€ä¸ªå…¬å¸ï¼Œç„¶åå†å›åˆ°å­¦æ ¡å®Œæˆå­¦ä¸šã€‚æˆ‘ä»æœªçœŸæ­£æœ‰æ„è¯†åœ°å†³å®šæ”¾å¼ƒå­¦ä½ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œæˆ‘åªæ˜¯è¯·äº†ä¸€ä¸ªé•¿å‡ã€‚ å› æ­¤ï¼Œåœ¨æŸ¥èµ„æ–™çš„æ—¶å€™ï¼Œæˆ‘ä»¬å‘ç°ç›–èŒ¨è¾å­¦çš„æ—¶é—´å¾ˆå¤šæ–‡ç« éƒ½ä¸ä¸€æ ·ï¼Œæœ‰çš„è¯´æ˜¯1975å¹´ï¼Œæœ‰çš„è¯´æ˜¯1976å¹´ï¼Œåˆæœ‰çš„è¯´æ˜¯1977å¹´ï¼›å¯¹æ­¤ç¬”è€…çš„çœ‹æ³•æ˜¯ï¼Œ1975å¹´å¼€å§‹ï¼Œç›–èŒ¨å¼€å§‹å‘å­¦æ ¡ç”³è¯·ä¼‘å­¦ï¼Œå¦‚æœåˆ›ä¸šå¤±è´¥äº†è¿˜æœ‰é€€è·¯ï¼›åæ¥å…¬å¸æ­¥å…¥æ­£è½¨ï¼Œåœ¨1977å¹´ï¼Œç›–èŒ¨æ‰æ­£å¼åŠç†äº†é€€å­¦ã€‚ åˆ›ä¸šåˆæœŸ 1975å¹´7æœˆï¼Œç›–èŒ¨å’Œè‰¾ä¼¦åˆ›å»ºäº†å¾®è½¯å…¬å¸ï¼Œæ ¹æ®åè®®ï¼Œä¸¤ä¸ªäººçš„æƒç›Šåˆ†é…æ¯”ä¾‹ä¸ºï¼šç›–èŒ¨60%ï¼Œè‰¾ä¼¦40%ï¼›æŒ‰å¸¸ç†ä¸¤äººéƒ½æ˜¯åˆä¼™äººï¼Œåº”è¯¥äº”äº”åˆ†ï¼Œä½†ç›–èŒ¨å´ä¸è¿™ä¹ˆè®¤ä¸ºï¼Œè®¤ä¸ºè‰¾ä¼¦é™¤äº†å¼€å…¬å¸ï¼Œè¿˜åœ¨MITSæ‹¿è–ªæ°´ï¼Œè€Œè‡ªå·±ä»¥é€€å­¦ä½œä¸ºä»£ä»·ï¼Œè‡ªå·±ç‰ºç‰²çš„æ›´å¤šï¼Œç†åº”æ‹¿çš„æ›´å¤šï¼›è‰¾ä¼¦ä¹Ÿæ²¡æœ‰å¤šæƒ³å°±ç­”åº”äº†ã€‚ åˆšå¼€å§‹çš„å¾®è½¯è™½ç„¶æˆç«‹äº†ï¼Œä½†è¿˜ç¾½ç¿¼æœªä¸°ï¼Œä¸»è¦é ç€MITSçš„åˆåŒç”Ÿå­˜ï¼›å½“æ—¶ä»–ä»¬å’Œç½—ä¼¯èŒ¨è¾¾æˆäº†Basicè½¯ä»¶çš„ä½¿ç”¨åè®®ï¼ŒMITSè·å¾—10å¹´Basicè½¯ä»¶çš„è®¸å¯ä½¿ç”¨æƒï¼›ä½†æ˜¯ç›–èŒ¨ç•™äº†ä¸ªå¿ƒçœ¼ï¼Œå¹¶æ²¡æœ‰è®©MITSä¸€æ¬¡æ€§ä¹°æ–­è½¯ä»¶ï¼Œè€Œæ˜¯æ¯å”®å‡ºä¸€å°è®¡ç®—æœºæ­è½½çš„Basicè½¯ä»¶ï¼Œå¾®è½¯æŒ‰ç…§æ¯ä»½æ”¶å–30ç¾å…ƒ~60ç¾å…ƒï¼›åŒæ—¶åˆåŒè§„å®šï¼Œä»–ä»¬æœ€å¤šå¯ä»¥è·åˆ©18ä¸‡ç¾å…ƒï¼Œè¶…è¿‡ä¹‹åï¼ŒMITSå°†å®Œå…¨æ‹¥æœ‰è½¯ä»¶ã€‚ åœ¨æ­¤æœŸé—´ï¼Œè‰¾ä¼¦ä¹Ÿå½»åº•è¾å»äº†ç½—ä¼¯èŒ¨å…¬å¸çš„å·¥ä½œï¼Œå’Œç›–èŒ¨ä¸€èµ·ä¸ºå¾®è½¯å·¥ä½œï¼Œè‰¾ä¼¦è´Ÿè´£æŠ€æœ¯æ–¹é¢çš„å·¥ä½œï¼Œç›–èŒ¨è´Ÿè´£é”€å”®ä»¥åŠå•†åŠ¡æ–¹é¢çš„å·¥ä½œï¼›æ²¡å¤šä¹…ï¼Œç›–èŒ¨è®¤ä¸ºè‡ªå·±åœ¨Basicå¼€å‘ä¸­çš„è´¡çŒ®æ›´å¤§ï¼Œä»–ä»¬åˆé‡æ–°ç­¾ç½²äº†ä¸€ä»½æ–°çš„åˆ©ç›Šåè®®ï¼šç›–èŒ¨64%ï¼Œè‰¾ä¼¦36%ï¼Œè‰¾ä¼¦æƒ³æŠŠè¿™ä»¶äº‹èµ¶ç´§äº†ç»“ï¼Œå†æ¬¡åŒæ„äº†ã€‚ éšåï¼Œæ›´å¤šçš„ç¡¬ä»¶å‚å•†çœ‹åˆ°äº†ä¸ªäººPCè¿™å—å¸‚åœºï¼Œçº·çº·å¼€å§‹ç”Ÿäº§è®¡ç®—æœºï¼Œå¾®è½¯å…¬å¸çš„è½¯ä»¶ä¹Ÿè¢«å–ç»™äº†æ›´å¤šçš„å…¬å¸ä½¿ç”¨ã€‚ åˆ°äº†1977å¹´ï¼ŒMITSå› ä¸ºç»è¥é—®é¢˜ï¼Œè¢«å–ç»™äº†ä½©å…‹ç‰¹å…¬å¸ï¼Œä½©å…‹ç‰¹å…¬å¸æ ¹æ®ç½—ä¼¯èŒ¨åè®®ï¼Œè®¤ä¸ºBasicè½¯ä»¶çš„ä¸“åˆ©æƒå±äºä»–ä»¬ï¼Œäºæ˜¯ä¸¤å®¶å…¬å¸å°±Basicè½¯ä»¶çš„å½’å±æƒæ‰“äº†ä¸€åœºå®˜å¸ï¼›ä¸è¿‡åˆ«å¿˜è®°ç›–èŒ¨çš„çˆ¶äº²æ˜¯åšä»€ä¹ˆçš„ï¼Œåœ¨çˆ¶äº²åŠå…¶æœ‹å‹çš„å¸®åŠ©ä¸‹ï¼Œç›–èŒ¨èµ¢å¾—äº†å®˜å¸ï¼Œæœ€ç»ˆè·å¾—äº†Basicè½¯ä»¶çš„æ‰€æœ‰æƒï¼Œå’ŒMITSå½»åº•è§£çº¦ã€‚ å› æ­¤ç¬”è€…å»ºè®®ç¨‹åºå‘˜æœ‹å‹æˆ–è€…æœ‰åˆ›ä¸šæ‰“ç®—çš„å°ä¼™ä¼´ä»¬ï¼Œéƒ½å¯ä»¥æ‰¾æ¥è¿™æœ¬å´å†›åšå£«çš„ã€Šæµªæ½®ä¹‹å·…ç¬¬å››ç‰ˆã€‹çœ‹ä¸€çœ‹ï¼Œå¤šäº†è§£ä¸€ä¸‹å•†ä¸šç«äº‰çš„æ®‹é…·æ€§å’Œç§‘æŠ€é©å‘½çš„å‘å±•å†ç¨‹ï¼Œè€Œä¸ä»…ä»…å±€é™äºè‡ªå·±æŠ€æœ¯ä¸Šçš„ä¸€äº©ä¸‰åˆ†åœ°ï¼Œä¹Ÿèƒ½é¿å…ä»¥ååƒè‰¾ä¼¦ä¸€æ ·è¢«å‘ï¼›ç›¸ä¿¡è¯»å®Œä¼šè®©å¤§å®¶æ”¶ç›Šé¢‡ä¸°çš„ï¼Œå¯¹æŠ€æœ¯å’Œå•†ä¸šçš„å…³ç³»æœ‰æ›´åŠ æ·±åˆ»çš„è®¤è¯†ã€‚ äº‹ä¸šè…¾é£ å¦‚æœè¯´MITSçš„åˆä½œè®©å¾®è½¯æ‰“å¼€äº†è½¯ä»¶å¸‚åœºçš„å±€é¢ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥äº‹ä¸šè…¾é£ä¸»è¦æ¥è‡ªä¸¤æ¬¡é‡è¦çš„å¤–éƒ¨åˆä½œï¼Œç¬¬ä¸€æ¬¡æ˜¯å’Œè“è‰²å·¨äººIBMçš„åˆä½œï¼Œè®©å¾®è½¯å¼€åˆ›å‡ºäº†å±äºè‡ªå·±æ“ä½œç³»ç»Ÿçš„æ—¶ä»£ï¼Œå¦ä¸€æ¬¡æ˜¯å’Œè‹¹æœçš„åˆä½œï¼Œè®©å¾®è½¯å½»åº•å¥ å®šäº†åœ¨å›¾å½¢æ“ä½œç³»ç»Ÿçš„éœ¸ä¸»åœ°ä½ã€‚ IBMåˆä½œ åˆšå¼€å§‹IBMçš„ä¸»è¥ä¸šåŠ¡æ˜¯å¤§å‹è®¡ç®—æœºï¼Œä¸»è¦çš„å®¢æˆ·æ˜¯å†›æ–¹å’Œå¤§å…¬å¸ï¼Œä¸€å°å¤§å‹æœºçš„åˆ©æ¶¦ä¹Ÿè¶³å¤Ÿå¤šï¼ŒåæœŸæ¯å¹´è¿˜æœ‰è½¯ä»¶æœåŠ¡è´¹ç”¨ï¼Œå¾€å¾€æŠµå¾—ä¸Šå‡ ç™¾ä¸Šåƒå°å¾®å‹æœºï¼Œå› æ­¤å¯¹äºç»ˆç«¯ä¸ªäººè®¡ç®—æœºå¸‚åœºå¹¶æ²¡æœ‰å¤šå°‘å…´è¶£ï¼›åæ¥ï¼Œåœ¨è‹¹æœå…¬å¸æ¨å‡ºâ€œApple IIâ€åï¼ŒIBMæ‰å†³å®šå¼€å‘ä¸ªäººè®¡ç®—æœºï¼›ä¸ºäº†å°½å¿«ç ”å‘å‡ºæ¥ï¼ŒIBMå››å¤„å¯»æ‰¾å…¬å¸è¿›è¡Œç§˜å¯†åˆä½œï¼›åœ¨å¤„ç†å™¨ä¸Šï¼Œé€‰æ‹©äº†è‹±ç‰¹å°”å…¬å¸æœ€æ–°çš„8088å¤„ç†å™¨ï¼Œè€Œç³»ç»Ÿè½¯ä»¶æ–¹é¢ï¼Œå¾®è½¯å…¬å¸å¼•èµ·äº†ä»–ä»¬çš„æ³¨æ„ã€‚ é‚£ä¸ªæ—¶å€™ï¼Œå¸‚é¢ä¸Šä¸»æµçš„å¾®æœºæ“ä½œç³»ç»Ÿæ˜¯åŠ é‡ŒÂ·åŸºå°”ä»£å°”åˆ›åŠçš„DRï¼ˆDigital Researchï¼‰å…¬å¸ç ”å‘çš„CP/Mæ“ä½œç³»ç»Ÿï¼Œå¾®è½¯å¹¶æ²¡æœ‰è‡ªå·±çš„æ“ä½œç³»ç»Ÿï¼›å› æ­¤å½“1980å¹´8æœˆï¼Œå½“IBMæ´¾ä»£è¡¨æ‰¾åˆ°ç›–èŒ¨æ—¶ï¼Œä»–å’ŒåŠ é‡Œæ—©å·²æœ‰çº¦å®šï¼Œç›–èŒ¨ä¸è¿›å…¥æ“ä½œç³»ç»Ÿå¸‚åœºï¼Œè€ŒåŠ é‡Œä¸è¿›å…¥è½¯ä»¶å¼€å‘çš„å¸‚åœºï¼ŒåŒæ–¹æ˜¯äº•æ°´ä¸çŠ¯æ²³æ°´ï¼›å› æ­¤ç›–èŒ¨åªèƒ½å¿ç—›æ”¾å¼ƒï¼Œå°†IBMçš„ä»£è¡¨ä»‹ç»ç»™åŠ é‡ŒÂ·åŸºå°”ä»£å°”ã€‚ ä½†æ˜¯å¥½è¿å¹¶æ²¡æœ‰åˆ°æ­¤ç»“æŸï¼ŒIBMå’ŒDRå…¬å¸çš„è°ˆåˆ¤æ²¡æœ‰è°ˆæ‹¢ï¼Œæœ‰ä¸€ç§è¯´æ³•æ˜¯IBMçš„ä»£è¡¨è®©åŠ é‡Œçš„å¦»å­ç­¾ç½²ä¸€ä»½ä¿å¯†åè®®ï¼Œä½†æ˜¯å¥¹ä¸è‚¯ç­¾ç½²ï¼Œä¹Ÿæ²¡æœ‰é‡è§†å’ŒIBMçš„åˆä½œï¼›äºæ˜¯IBMåˆæ‰¾åˆ°äº†ç›–èŒ¨ï¼›è¿™æ ·ï¼ŒDRå…¬å¸å°†å³å°†åˆ°æ‰‹çš„å¥½æœºä¼šæ‹±æ‰‹è®©ç»™äº†ç›–èŒ¨ï¼Œè€Œç›–èŒ¨ä¹Ÿä¸å†é¡¾åŠçº¦å®šï¼Œç«‹é©¬ç­¾ä¸‹äº†å’ŒIBMçš„åˆçº¦ã€‚ ä½†å¼€å‘ä¸€ä¸ªæ“ä½œç³»ç»Ÿå¹¶ä¸æ˜¯é‚£ä¹ˆå®¹æ˜“çš„ï¼Œå°¤å…¶æ˜¯å½“æ—¶IBMè¦æ±‚çš„æ—¶é—´èŠ‚ç‚¹æ¯”è¾ƒç´§ï¼Œè¦æ±‚åœ¨1981å¹´3æœˆåº•ä¹‹å‰å¼€å‘å®Œæˆï¼›åæ¥ç›–èŒ¨å¬è¯´è¥¿é›…å›¾è®¡ç®—æœºå…¬å¸å¼€å‘å‡ºäº†ä¸€æ¬¾å«åšQDosï¼ˆåæ¥æ”¹å86-DOSï¼‰çš„è®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼Œäºæ˜¯ç›–èŒ¨ç«‹é©¬æ„è¯†åˆ°å®ƒçš„ä»·å€¼ï¼›ä¸ºäº†é¿å…ä¸Šé¢ç±»ä¼¼MITSçš„å®˜å¸çº çº·ï¼Œç›–èŒ¨å†³å®šå½»åº•ä¹°æ–­86-DOSçš„æ‰€æœ‰æƒï¼›å¾®è½¯ä¸€å…±æ‰èŠ±è´¹äº†7.5ä¸‡ç¾å…ƒå°±æ‹¥æœ‰äº†æ•´ä¸ªDOSç³»ç»Ÿï¼ŒåŒæ—¶ä¹ŸæŒ–æ¥äº†è¯¥ç³»ç»Ÿçš„å¼€å‘è€…è’‚å§†å¸•ç‰¹æ£®ï¼Œè¿™ä¸ªä»·æ ¼å¯ä»¥è¯´æ˜¯å¾ˆå»‰ä»·äº†ã€‚ ç»ˆäºï¼Œç»è¿‡å‡ ä¸ªæœˆçš„å°é—­å¼€å‘ï¼Œå¾®è½¯ç»ˆäºå°†è¿™å¥—æ“ä½œç³»ç»Ÿç§»æ¤åˆ°äº†IBMçš„æ–°å‹è®¡ç®—æœºä¸Šï¼Œå¹¶ä¸”æ”¹åMS-DOSï¼›1981å¹´8æœˆï¼ŒIBMæ¨å‡ºäº†è‡ªå·±çš„é¦–å°ä¸ªäººè®¡ç®—æœºIBM 5150ï¼Œå½“æ—¶å”®ä»·2280ç¾å…ƒã€‚ é€šè¿‡ä¸Šé¢çš„å›¾ç‰‡æˆ‘ä»¬å°±å‘ç°äº†ï¼Œ5150è·Ÿæˆ‘ä»¬ç°åœ¨æ„ä¹‰ä¸Šçš„è®¡ç®—æœºå¾ˆç›¸ä¼¼äº†ï¼Œæ¯”MITSçš„ç‰µç‰›æ˜Ÿ8800è¦å¥½å¾ˆå¤šï¼Œå·²ç»é…å¤‡æ˜¾ç¤ºå™¨å’Œé”®ç›˜ï¼Œè¿˜æœ‰æ”¯æŒçš„åŠå…¬è½¯ä»¶ï¼ŒåŒæ—¶ä¸ºè®¡ç®—æœºæä¾›äº†è¯¦ç»†çš„è¯´æ˜ä¹¦ï¼Œç›®çš„å°±æ˜¯è®©ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿçš„ä¸Šæ‰‹ï¼›å› æ­¤5150ä¸€ç»é—®ä¸–å°±å–å¾—äº†å·¨å¤§çš„æˆåŠŸï¼Œä»…ä»…ä¸€ä¸ªæœˆå°±æ”¶åˆ°äº†æ•°ä¸‡å°çš„è®¢å•ã€‚ è€Œå¾®è½¯å…¬å¸çš„MS-DOSä¹Ÿå› ä¸ºIBMç”µè„‘çš„æ™®åŠè·å¾—äº†å·¨å¤§çš„æˆåŠŸï¼Œå¾ˆå¤šå…¼å®¹æœºå‚å•†ä¸ºäº†å’ŒIBMç”µè„‘å…¼å®¹ï¼Œä¹Ÿçº·çº·é€‰æ‹©äº†MS-DOSç³»ç»Ÿï¼Œè¿™å°±è®©MS-DOSç³»ç»Ÿæˆä¸ºäº†80å¹´ä»£æ“ä½œç³»ç»Ÿçš„æ ‡å‡†ï¼Œå˜å¾—ç‚™æ‰‹å¯çƒ­ã€‚ å…¼å®¹æœºå°±æ˜¯ç”±ä¸åŒå…¬å¸å‚å®¶ç”Ÿäº§çš„å…·æœ‰ç›¸åŒç³»ç»Ÿç»“æ„çš„è®¡ç®—æœºï¼›1982å¹´IBMå—åˆ¶äºåå„æ–­å®˜å¸ï¼Œå¼€æ”¾äº†PCæœºä¸Šçš„å…¨éƒ¨æŠ€æœ¯èµ„æ–™ï¼Œä»è€Œå½¢æˆPCæœºå¼€æ”¾æ ‡å‡†ï¼Œä½¿ä¸åŒå‚å•†ç”Ÿäº§çš„æ ‡å‡†éƒ¨ä»¶å¯ä»¥äº’æ¢ã€‚ æ¯”å¦‚è‘—åçš„å…¼å®¹æœºå‚å•†åº·æŸã€æˆ´å°”ç­‰ï¼Œéƒ½æ˜¯é‚£ä¸ªæ—¶æœŸæˆç«‹ï¼Œå¼€å§‹ç”Ÿäº§å¹¶é”€å”®è‡ªå·±çš„å…¼å®¹æœºäº§å“ã€‚ MS-DOSçš„æˆåŠŸå¯¹å¾®è½¯æœ‰ç€éå¸¸é‡è¦çš„æ„ä¹‰ï¼Œæˆä¸ºäº†å¾®è½¯è¿›å…¥ä¸ªäººè®¡ç®—æœºå¸‚åœºçš„é‡è¦å¥‘æœºï¼Œç¡®ç«‹äº†å…¶åœ¨ä¸ªäººç”µè„‘æ“ä½œç³»ç»Ÿå¸‚åœºçš„ç»Ÿæ²»åœ°ä½ï¼›åœ¨å¼€å‘ä¸­ç§¯ç´¯äº†å¤§é‡çš„æŠ€æœ¯ç»éªŒï¼Œä¹Ÿä¸ºåç»­å¾®è½¯æ¨å‡ºWindowsæ“ä½œç³»ç»Ÿå¥ å®šäº†æŠ€æœ¯åŸºç¡€ï¼›åŒæ—¶DOSä¹Ÿä¸ºå¾®è½¯å¸¦æ¥äº†å¤§é‡å¯è§‚çš„ç°é‡‘æµï¼Œ1983å¹´ï¼Œå¾®è½¯çš„è¥æ”¶å°±è¶…è¿‡äº†åƒä¸‡ç¾å…ƒã€‚ è‹¹æœåˆä½œ 1981å¹´7æœˆçš„ä¸€å¤©ï¼Œä½äºç¡…è°·çš„è‹¹æœå…¬å¸æ€»éƒ¨ï¼Œä¸€åè‹¹æœçš„å·¥ç¨‹å¸ˆæ­£åœ¨ä¸ºæ¥è®¿çš„ç›–èŒ¨æ¼”ç¤ºæœ€æ–°ç ”å‘çš„éº¦é‡‘å¡”ç”µè„‘çš„æ“ä½œç³»ç»Ÿï¼Œç›–èŒ¨ä»”ç»†çš„è§‚æ‘©ç€ï¼›è®²è§£çš„å‘˜å·¥è®²åˆ°å…´å¥‹çš„åœ°æ–¹ï¼Œç”šè‡³å¼€å§‹çœ‰é£è‰²èˆçš„è¯´èµ·äº†æŠ€æœ¯ç»†èŠ‚ï¼Œå…¨ç„¶æ²¡æœ‰çœ‹åˆ°ä»æ—è¾¹èµ°è¿‡æ¥çš„ä¹”å¸ƒæ–¯é˜´æ²‰çš„è„¸è‰²ï¼›ç»ˆäºä¹”å¸ƒæ–¯æŒ‰æºä¸ä½äº†ï¼Œå¯¹é‚£åå‘˜å·¥è¿å£°å¤§å¼äº†å‡ å¥ï¼šé—­å˜´ï¼ï¼ åœ¨è¿™ä¹‹å‰ï¼Œç›–èŒ¨å’Œä¹”å¸ƒæ–¯å°±å·²ç»åœ¨ä¹‹å‰çš„ä¸€æ¬¡ç”µè„‘å±•ä¼šä¸Šè®¤è¯†äº†ï¼Œé‚£ä¸ªæ—¶å€™ç›–èŒ¨è¿˜åœ¨å–ä»–çš„Basicè½¯ä»¶ç¼–è¯‘å™¨ï¼Œè€Œä¹”å¸ƒæ–¯å‡­å€Ÿç€Apple-IIå‹ç”µè„‘çš„æˆåŠŸæˆä¸ºäº†å®¶å–»æˆ·æ™“çš„åäººï¼Œå› æ­¤å¯¹è¿™ä¸ªä¸€å¤´å·å‘ã€æˆ´ç€åšåšçœ¼é•œç‰‡çš„å¤§ç”·å­©å¹¶ä¸æ˜¯å¾ˆåœ¨æ„ã€‚ åæ¥è‹¹æœå…¬å¸ä»¥2.5ä¸‡ç¾å…ƒå–å¾—äº†å¾®è½¯Basicè¯­è¨€8å¹´çš„ä½¿ç”¨æƒï¼Œç›–èŒ¨ä¹Ÿå¾—ä»¥ç»å¸¸å‡ºå…¥è‹¹æœå…¬å¸ï¼Œä»ä¹”å¸ƒæ–¯æ‰‹ä¸Šè·å¾—äº†ä¸€äº›åº”ç”¨è½¯ä»¶çš„å¼€å‘å·¥ä½œï¼›äºæ˜¯å°±å‘ç”Ÿäº†æˆ‘ä»¬å‰é¢è¯´çš„æ•…äº‹äº†ï¼Œå¦‚æœæ—¶å…‰èƒ½å¤Ÿå€’æµï¼Œç›¸ä¿¡ä¹”å¸ƒæ–¯ä¸€å®šä¸ä¼šè®©è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿã€‚ å›åˆ°å¾®è½¯çš„ç›–èŒ¨ç«‹åˆ»æ„è¯†åˆ°ï¼Œå›¾å½¢ç•Œé¢æ‰æ˜¯æ“ä½œç³»ç»Ÿçš„æœªæ¥ï¼Œå¦‚æœè‡ªå·±ä¸èƒ½æŠ“ä½è¿™ä¸ªæœºä¼šï¼Œåœ¨è¿™æ¬¡æŠ€æœ¯é©å‘½ä¸­å¿…å®šä¼šæœ‰è¢«æ·˜æ±°çš„é£é™©ï¼›ä½†æ˜¯æ­¤æ—¶çš„å¾®è½¯ä»…ä»…å‡­å€ŸMS-DOSç³»ç»Ÿè¦æƒ³å’Œéº¦é‡‘å¡”æ¥æŠ—è¡¡ï¼Œæ— ç–‘æ˜¯æ‹¿ç€å¤§åˆ€å¯¹æŠ—ç«ç‚®ï¼Œå› ä¸ºä¸¤è€…å­˜åœ¨å·¨å¤§çš„æŠ€æœ¯ä»£å·®ã€‚ ä½†æ˜¯ç›–èŒ¨é€šè¿‡å‡ ä¸ªæ˜ä¿®æ ˆé“æš—åº¦é™ˆä»“çš„æ“ä½œï¼ŒæˆåŠŸçš„èµ¢ä¸‹äº†è¿™åœºå¯¹è‹¹æœçš„æ— ç¡çƒŸçš„æˆ˜äº‰ï¼Œé¦–å…ˆå°±æ˜¯ç»§ç»­å…‘ç°å’Œè‹¹æœçš„åˆåŒï¼Œç»§ç»­ä¸ºéº¦é‡‘å¡”å¼€å‘åº”ç”¨è½¯ä»¶ï¼Œä¸€æ¥å¯ä»¥ä¿æŒå’Œè‹¹æœçš„æ¥è§¦ï¼Œç»§ç»­äº†è§£éº¦é‡‘å¡”ç³»ç»Ÿçš„ç»†èŠ‚ï¼ŒäºŒæ¥ï¼Œæ•…æ„è®©æ•´ä¸ªå¼€å‘è¿›å±•ç¼“æ…¢ï¼Œå»¶ç¼“éº¦é‡‘å¡”ç”µè„‘çš„å‘å¸ƒã€‚ ç¬¬äºŒä¸ªæ“ä½œå°±æ˜¯ç­”åº”å’ŒIBMä¸€èµ·å¼€å‘æ–°çš„æ“ä½œç³»ç»ŸOS/2ï¼Œä½†æ˜¯ç›–èŒ¨çš„å¿ƒæ€å¹¶ä¸åœ¨OS/2èº«ä¸Šï¼Œåªæ˜¯æƒ³ç€å€ŸåŠ©IBMçš„æ–°ç³»ç»Ÿæ¥é”»ç‚¼å›¢é˜ŸæŠ€æœ¯ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¸¤è¾¹ä¸‹æ³¨ï¼Œå¦‚æœè‹¹æœçš„ç³»ç»Ÿä¸æˆåŠŸï¼ŒIBMçš„æ“ä½œç³»ç»Ÿå°±ä¼šå é¢†å¸‚åœºï¼Œè‡ªå·±ä¹Ÿä¸è‡³äºåŠŸäºä¸€ç¯‘ï¼›æœ€åä¸€æ­¥ä¹Ÿæ˜¯æœ€é‡è¦çš„æ£‹ï¼Œå°±æ˜¯æ‚„æ‚„ç»„å»ºå›¢é˜Ÿå¼€å‘è‡ªå·±çš„å›¾å½¢åŒ–ç³»ç»ŸWindowsï¼Œä¸ºäº†è¿™ä¸€æ­¥æ£‹ï¼Œç›–èŒ¨äº†è§£åˆ°è‹¹æœçš„ç³»ç»Ÿæ˜¯å¸ˆæ‰¿è‡ªæ–½ä¹å…¬å¸ï¼Œäºæ˜¯æš—åœ°é‡Œè¯·æ¥äº†å¾ˆå¤šé«˜æ‰‹ï¼ŒåŒ…æ‹¬ä¸€æ‰¹æ–½ä¹å…¬å¸åšå›¾å½¢åŒ–ç•Œé¢çš„å·¥ç¨‹å¸ˆã€‚ åæ¥ï¼Œ1984å¹´éº¦é‡‘å¡”ç”µè„‘å‘å¸ƒçš„ç¬¬ä¸€å¤©ï¼Œç›–èŒ¨ç«‹é©¬è®©å‘˜å·¥è¿…é€Ÿä¹°å›ä¸€å°ï¼Œä¾›å¼€å‘Windowsçš„å·¥ç¨‹å¸ˆå‚è€ƒï¼›ä¹”å¸ƒæ–¯ä¹ŸçŸ¥é“äº†ç›–èŒ¨åœ¨å¼€å‘è‡ªå·±çš„å›¾å½¢åŒ–ç³»ç»Ÿï¼ŒæŠŠä»–å«åˆ°å…¬å¸è‡­éª‚äº†ä¸€é¡¿ï¼Œç›–èŒ¨åˆ™ç”¨ä¸‹é¢è¿™å¥ç»å…¸çš„ä¸¤ä¸ªå°å·ç†è®ºæ¥å›åº”ï¼š å˜¿ï¼Œå²è’‚å¤«ï¼ˆä¹”å¸ƒæ–¯ï¼‰ï¼Œè™½ç„¶ä½ åœ¨æˆ‘ä¹‹å‰ï¼Œç ´é—¨è€Œå…¥è¿›äº†æ–½ä¹å…¬å¸æˆ¿é—´ï¼Œæ‹¿èµ°äº†ç”µè§†ï¼Œä½†è¿™ä¸æ„å‘³ç€æˆ‘ä¸èƒ½å°¾éšè€Œæ¥å–èµ°ç«‹ä½“å£°éŸ³å“ã€‚ ä¹”å¸ƒæ–¯ä¹Ÿæ›¾ä¸€åº¦å‡†å¤‡èµ·è¯‰å¾®è½¯ï¼Œä½†æ˜¯1985å¹´ï¼Œç¥¸èµ·è§å¢™ï¼Œè‹¹æœå†…éƒ¨å…ˆå‘ç”Ÿäº†å†…ä¹±ï¼Œä¹”å¸ƒæ–¯å’Œé¦–å¸­æ‰§è¡Œå®˜çº¦ç¿°Â·æ–¯åº“åˆ©ä¹‹é—´çŸ›ç›¾æ¿€åŒ–ï¼Œæ–¯åº“åˆ©åœ¨è‘£äº‹ä¼šçš„æ”¯æŒä¸‹ï¼Œå°†ä¹”å¸ƒæ–¯è¸¢å‡ºäº†è‡ªå·±åˆ›åŠçš„è‹¹æœå…¬å¸ã€‚ 1985å¹´ï¼Œå¾®è½¯é¦–æ¬¡æ¨å‡ºäº†è‡ªå·±Windows1.0ç³»ç»Ÿï¼›1987å¹´ã€‚Windows2.0å‡ºç°äº†ï¼Œå®ƒæ¯”ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ›´ç±»ä¼¼éº¦é‡‘å¡”ç•Œé¢ï¼Œç»ˆäºï¼Œåœ¨1988å¹´ï¼Œè‹¹æœæ­£å¼èµ·è¯‰å¾®è½¯çªƒå–å…¶äº§å“ï¼Œä¸è¿‡ç”±äº1985å¹´æ–¯åº“åˆ©å’Œç›–èŒ¨ç­¾ç½²è¿‡ä¸€é¡¹åè®®ï¼Œå°†Macçš„è§†è§‰æ˜¾ç¤ºå™¨æˆæƒç»™å¾®è½¯ï¼Œå› æ­¤è¿™åœºå®˜å¸å¹¶æ²¡æœ‰ç»™å¾®è½¯å¸¦æ¥å¤šå°‘å®è´¨æ€§çš„æ³•å¾‹åˆ¶è£ã€‚ æˆ‘ä»¬å‘ç°ï¼Œè¿™æ¬¡å¾®è½¯å’Œè‹¹æœçš„åˆä½œå’Œç«äº‰ï¼Œæœ€ç»ˆè®©å¾®è½¯å¤§è·å…¨èƒœï¼Œå…¶ä¸­è¿æ°”æ˜¯ä¸€éƒ¨åˆ†åŸå› ï¼Œè€Œç›–èŒ¨çš„æˆ˜ç•¥æŠ‰æ‹©ä¹Ÿæ˜¯éå¸¸å…³é”®çš„ï¼ŒæˆåŠŸçš„å°†è‡ªå·±æ¨ä¸Šäº†å›¾å½¢åŒ–ç³»ç»Ÿçš„éœ¸ä¸»ä¹‹ä½ï¼›å´å†›åšå£«åœ¨ã€Šæµªæ½®ä¹‹å·…ã€‹ä¸­å°†è¿™åœºå¯¹å†³ç§°ä¸ºï¼šäººæ°‘æˆ˜äº‰ï¼Œä»å¦ä¸€ä¸ªè§’åº¦ï¼Œæ›´ä¸ºè¯¦ç»†çš„è§£è¯»äº†å¾®è½¯å¦‚ä½•é€šè¿‡å¼€æ”¾ã€å…¼å®¹å’Œå»‰ä»·çš„æ–¹å¼å¤ºå›äº†æ“ä½œç³»ç»Ÿä¸Šçš„ä¸»åŠ¨æƒã€‚ æµè§ˆå™¨å¤§æˆ˜ åœ¨ä¹åå¹´ä»£åˆï¼Œå¾®è½¯æ­£åœ¨åº”ä»˜å’Œè‹¹æœçš„å®˜å¸ä»¥åŠåå„æ–­è°ƒæŸ¥çš„å®˜å¸æ—¶ï¼Œäº’è”ç½‘æ­£åœ¨é«˜é€Ÿçš„å‘å±•ï¼Œ1994å¹´ç½‘æ™¯å…¬å¸æ¨å‡ºNetscape Navigator(ç½‘æ™¯å¯¼èˆªè€…)æµè§ˆå™¨è·å¾—å·¨å¤§æˆåŠŸï¼Œå¹¶ä¸”è¿…é€Ÿå æ®å¸‚åœºä¸»å¯¼åœ°ä½ï¼›1995å¹´ï¼Œç½‘æ™¯å…¬å¸å°±å·²ç»é¦–æ¬¡å…¬å¼€å‹Ÿè‚¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¿—ç§°çš„IPOä¸Šå¸‚ï¼Œè¯´æ˜äº†èµ„æœ¬å¸‚åœºå¯¹å…¶é«˜åº¦çš„è®¤å¯ã€‚ å½“æ—¶ç½‘æ™¯å…¬å¸æ­£åœ¨å°è¯•å¼€å‘ä¸€ç§èƒ½ç”¨è®©ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ“ä½œçš„ç½‘ç»œåº”ç”¨ç³»ç»Ÿï¼Œè¿™æ ·å°±å¯ä»¥ç»•å¼€æ“ä½œç³»ç»Ÿçš„é™åˆ¶ï¼Œç”¨æˆ·åªéœ€è¦åœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šå®‰è£…è¿™æ ·çš„ç½‘ç»œåº”ç”¨ç³»ç»Ÿï¼Œè¿™å°±æ²¡æ“ä½œç³»ç»Ÿä»€ä¹ˆäº‹äº†ï¼›ç›–èŒ¨å½“ç„¶ä¸ä¼šå…è®¸è¿™æ ·çš„äº‹æƒ…å‘ç”Ÿï¼Œ1995å¹´å‘ç½‘æ™¯å…¬å¸æå‡ºæ”¶è´­çš„è¯·æ±‚ï¼Œä½†é­åˆ°äº†æ— æƒ…çš„æ‹’ç»ã€‚ æ—¢ç„¶åˆä½œä¸è¡Œï¼Œé‚£å°±åªèƒ½å¼€æˆ˜äº†ï¼å½“æ—¶çš„å¾®è½¯è¿˜æ²¡æœ‰æµè§ˆå™¨ï¼Œä¸è¿‡è¿™å¯¹äºè´¢å¤§æ°”ç²—çš„å¾®è½¯æ¥è¯´ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œåªè¦èƒ½ç”¨é’±è§£å†³çš„é—®é¢˜éƒ½ä¸æ˜¯ä»€ä¹ˆé—®é¢˜ï¼›äºæ˜¯å¾®è½¯ä½¿ç”¨äº†é‡‘é’±æ”»åŠ¿ï¼Œæ‰¾åˆ°äº†Spyglasså…¬å¸ï¼Œè·å¾—äº†æµè§ˆå™¨çš„æˆæƒè®¸å¯ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¼€å‘å‡ºäº†Internet Explorerï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„IEæµè§ˆå™¨ï¼Œäº1995å¹´8æœˆ16å·é¦–æ¬¡äº®ç›¸ã€‚ ç´§æ¥ç€ï¼Œç¬¬äºŒä¸ªæ”¹è¿›ç‰ˆæœ¬çš„IEåœ¨1995å¹´8æœˆ24å·çš„Windows95ä¸Šæ†ç»‘ä¸€èµ·å‡ºå”®ï¼Œéšç€Windows95çš„å¤§è·æˆåŠŸï¼ŒIEä¹Ÿæ¸æ¸å¼€å§‹å æ®å¸‚åœºçš„ä¸»å¯¼åœ°ä½ï¼›æ¶ˆè´¹è€…çœ‹åˆ°ç³»ç»Ÿè‡ªå¸¦äº†å…è´¹çš„æµè§ˆå™¨ï¼Œè°è¿˜ä¼šå»ä¸‹è½½ç½‘æ™¯æµè§ˆå™¨å‘¢ï¼Ÿäºæ˜¯ç½‘æ™¯çš„è‚¡ç¥¨å¤§å¹…ä¸‹è·Œã€‚ 1996å¹´ï¼ŒIE3.0å‘å¸ƒï¼Œå®ƒæ˜¯ç¬¬ä¸€ä¸ªæ”¯æŒCSSæŠ€æœ¯çš„ä¸»æµæµè§ˆå™¨ï¼Œå¹¶ä¸”æ”¯æŒActiveXæ§ä»¶ã€å¤šåª’ä½“ç­‰ç­‰ï¼›åˆ°1997å¹´ï¼Œå¾®è½¯æ¨å‡ºIE4.0ï¼Œè¿™ä¸ªæ—¶å€™çš„IEä»åŠŸèƒ½å’Œå¤–è§‚å·²ç»è¿œè¿œè¶…è¿‡äº†Navigatoräº†ã€‚ ç½‘æ™¯å…¬å¸å¯¹æ­¤å½“ç„¶å¤§ä¸ºä¸æ»¡ï¼Œ1996å¹´å‘æ³•é™¢æèµ·è¯‰è®¼ï¼›1997å¹´æ³•é™¢å‘½ä»¤å¾®è½¯åœæ­¢å°†IEå’ŒWindowsè¿›è¡Œæ†ç»‘ï¼Œä¸è¿‡åˆ¤å†³åªä½¿ç”¨äºWin95ï¼Œå¾®è½¯å†ä¸€æ¬¡åœ¨Win98ä¸Šå’ŒIEè¿›è¡Œæ†ç»‘ï¼›æœ€ç»ˆè¿™åœºå¤§æˆ˜ä»¥ç½‘æ™¯ä»¥42äº¿ç¾å…ƒè¢«æ”¶è´­è€Œè½å¹•ã€‚ æ€»ç»“ ä¸å¾—ä¸æ‰¿è®¤ï¼Œå¾®è½¯åœ¨åˆ›ä¸šåˆæœŸï¼Œç¡®å®æ¨åŠ¨äº†è½¯ä»¶çš„å‘å±•ï¼Œè®©æ“ä½œç³»ç»Ÿéšç€ç”µè„‘ç¡¬ä»¶æ™®åŠåˆ°äº†æ¯ä¸ªå®¶åº­ï¼Œæ¨åŠ¨äº†è®¡ç®—æœºè½¯ä»¶çš„è¿›æ­¥ï¼Œå¼•é¢†äº†è®¡ç®—æœºè½¯ä»¶çš„æµªæ½®ï¼›ä½†æ˜¯åœ¨åæœŸä¾é ç€è‡ªèº«åœ¨æ“ä½œç³»ç»Ÿå¸‚åœºçš„å„æ–­åœ°ä½ï¼Œå·©å›ºè‡ªèº«åˆ©ç›Šï¼Œæ‰¼æ€äº†æ— æ•°åˆ›æ–°å…¬å¸ã€‚ æˆ‘ä»¬çœ‹åˆ°çš„å¾ˆå¤šæ–‡ç« éƒ½å–œæ¬¢å°†æ¯”å°”ç›–èŒ¨çš„æˆåŠŸæ€»ç»“ä¸ºé«˜ç»è¿œç©çš„çœ¼å…‰ã€å’Œå¥½å‹å‹‡æ•¢çš„å»è¿½æ±‚æ¯•ç”Ÿäº‹ä¸šã€æ¯…ç„¶ä»åæ ¡é€€å­¦ï¼Œæœ€ç»ˆæˆä¸ºäº†ä¸–ç•Œé¦–å¯Œï¼›ä½†æ˜¯å¦‚æœä½ çœŸçš„ç›¸ä¿¡äº†è¿™å¥—è¯´è¾å¹¶ä¸”å»åšäº†ï¼Œé¦–å¯Œä¸ä¸€å®šï¼Œä½†æ˜¯æ‰¾ä¸åˆ°å·¥ä½œå¤±ä¸šæ˜¯å¤§æ¦‚ç‡çš„ã€‚ å› ä¸ºæˆ‘ä»¬å¯ä»¥ä»å¾®è½¯çš„æ•´ä¸ªåˆ›ä¸šç»å†æ¥çœ‹ï¼Œæœ¬è´¨ä¸Šï¼Œå¾®è½¯çš„å´›èµ·å°±æ˜¯åˆæ³•çš„åˆ©ç”¨æ³•å¾‹ï¼Œä¸æ–­çš„ä»¿åˆ¶å€Ÿé‰´åˆ«äººçš„è½¯ä»¶ï¼ˆè¿™ç§åšæ³•æ˜¯ä¸æ˜¯ä¹Ÿè®©ä½ æƒ³èµ·äº†å¦ä¸€å®¶å…¬å¸ï¼Ÿï¼‰ï¼›â€œå‘â€åˆä½œä¼™ä¼´ã€å®¢æˆ·ä»¥åŠæ‰“å‹ç«äº‰å¯¹æ‰‹ï¼Œä»¥æ­¤é€æ­¥å½¢æˆäº†åœ¨æ“ä½œç³»ç»Ÿå¸‚åœºä¸Šçš„å„æ–­åœ°ä½ï¼Œè·å–å·¨é¢åˆ©ç›Šï¼›è‡³äºè¿˜æœ‰è¯´æ³•æ˜¯ä¾é ç®¡ç†åˆ¶åº¦ã€ä¼˜ç§€çš„äººæ‰é€‰æ‹”æœºåˆ¶ã€æ¯”å°”ç›–èŒ¨åç»æµèˆ±ç­‰ç­‰æ•…äº‹ï¼Œæˆ‘ä»¬çœ‹çœ‹å°±å¥½äº†ã€‚ æ­£å¦‚å´å†›åšå£«åœ¨ã€Šæµªæ½®ä¹‹å·…ã€‹ä¸­å¯¹å¾®è½¯çš„æ€»ç»“è¯­é‚£æ ·ï¼š å¾®è½¯ä¿ƒæˆäº†æ•´ä¸ªå¾®æœºå·¥ä¸šçš„ç”Ÿæ€é“¾ï¼Œå¹¶ä¸”ä½œä¸ºé¾™å¤´å¼•å¯¼è€…è®¡ç®—æœºå·¥ä¸šå¿«é€Ÿå‘å±•ã€‚åŒæ—¶ï¼Œå®ƒåˆé€šè¿‡å„æ–­æ‰¼æ€äº†æ— æ•°å¯Œæœ‰åˆ›æ–°çš„å…¬å¸ã€‚å¦‚æœä¸æ˜¯åå„æ–­æ³•çš„çº¦æŸå’Œé›…è™ä»¥åŠåæ¥çš„Googleåœ¨äº’è”ç½‘é¢†åŸŸå¯¹å¾®è½¯æˆåŠŸçš„é˜»å‡»ï¼Œæˆ‘ä»¬å¾ˆéš¾æƒ³è±¡æœ‰ä»»ä½•åŠ›é‡èƒ½é˜»æ­¢å®ƒçš„æ‰©å¼ ã€‚ å› æ­¤ï¼Œå›åˆ°æˆ‘ä»¬æ–‡ç« å¼€å¤´çš„é‚£ä¸ªé—®é¢˜ï¼šä¸­å›½å‡ åƒä¸‡å¤§å­¦ç”Ÿï¼Œä¸ºä»€ä¹ˆå‡ºä¸äº†æ¯”å°”ç›–èŒ¨ï¼Œä¹”å¸ƒæ–¯ï¼Œé©¬æ–¯å…‹ï¼Ÿå®¢è§‚åŸå› ä¸Šï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬çš„åˆ¶åº¦ï¼Œå†³å®šäº†æˆ‘ä»¬æ˜¯ä¸å…è®¸å­˜åœ¨å„æ–­ä¼ä¸šï¼Œå› æ­¤è¿™äº›å¹´æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šçš„é«˜ç§‘æŠ€ä¼ä¸šè¢«ç½šæ¬¾ã€ä¸Šå¸‚è¢«å«åœç­‰ç­‰ï¼Œè¿™éƒ½æ˜¯å›½å®¶å±‚é¢ä¸ºäº†æ°‘ç”Ÿè€ƒè™‘çš„ã€‚ æœ€ä¸»è¦çš„åŸå› è¿˜æ˜¯å› ä¸ºäº’è”ç½‘è¡Œä¸šå®¹æ˜“äº§ç”Ÿå„æ–­ä¼ä¸šï¼Œè¿™äº›å„æ–­çš„ç§‘æŠ€ä¼ä¸šåˆ©ç”¨è‡ªèº«å¸‚åœºã€èµ„é‡‘ä¼˜åŠ¿ï¼Œä¸æ–­æ‰©å±•ä¸šåŠ¡ï¼Œæ‰“å‹ä¸­å°ä¼ä¸šï¼Œä¿è¯è‡ªå·±çš„é«˜åˆ©æ¶¦ï¼Œè¿™æ˜¯èµ„æœ¬åœ¨å‘å±•åæœŸå¿…ç„¶ç»å†çš„é˜¶æ®µã€‚ è™½ç„¶æˆ‘ä»¬æ²¡æœ‰å‡ºç°å„æ–­çš„é«˜ç§‘æŠ€ä¼ä¸šï¼Œä¸è¿‡å¹¸è¿çš„æ˜¯æˆ‘ä»¬å‡ åƒä¸‡å¤§å­¦ç”Ÿè¿˜æ˜¯å‡ºäº†ç‹ä¼ ç¦ï¼ˆä¸­å—å·¥ä¸šå¤§å­¦ï¼‰ã€æ±ªæ»”ï¼ˆé¦™æ¸¯ç§‘æŠ€å¤§å­¦ï¼‰ã€é›·å†›ï¼ˆæ­¦æ±‰å¤§å­¦ï¼‰ã€åˆ˜å¼ºä¸œï¼ˆä¸­å›½äººæ°‘å¤§å­¦ï¼‰ç­‰ç­‰ä¸€å¤§æ‰¹ä¼˜ç§€çš„ä¼ä¸šå®¶ï¼Œæ›´æœ‰é‚£äº›åœ¨ç§‘ç ”å•ä½é»˜é»˜ä¸ºå›½å®¶ç§‘æŠ€è¿›æ­¥åšå‡ºå“è¶Šè´¡çŒ®çš„â€œæ— åâ€ç§‘å­¦å®¶ä»¬ã€‚ è°¨ä»¥æ­¤æ–‡çŒ®ç»™é‚£äº›åˆšæ¯•ä¸šçš„å¤§å­¦ç”Ÿã€è¿·èŒ«çš„åˆ›ä¸šè€…ä»¥åŠæ›´å¤šé»˜é»˜æ— é—»çš„ç§‘ç ”å·¥ä½œè€…ä»¬ã€‚ å‚è€ƒæµªæ½®ä¹‹å·…ï¼ˆç¬¬å››ç‰ˆå´å†›è‘—ï¼‰ æ–½ä¹å’Œä»–çš„ä¸¤ä¸ªå°å·é‚»å±… æ— æ•Œå¯‚å¯çš„å¾®è½¯ä¹‹ä¸ºåˆ›æ–°è€Œåˆ›æ–° æ¯”å°”ç›–èŒ¨ä¼ (åˆ˜æ·‘éœç¼–è‘—)","tags":[{"name":"äº’è”ç½‘ç§‘æŠ€","slug":"Internet","permalink":"https://xieyufei.com/tags/Internet/"},{"name":"å†å²","slug":"History","permalink":"https://xieyufei.com/tags/History/"}]},{"title":"äºŒç»´ç è¿˜èƒ½è¿™ä¹ˆç©ï¼Ÿåˆ¶ä½œä¸€ä¸ª3DåŠ¨æ€ç²’å­äºŒç»´ç ï¼","date":"2024-06-03T03:00:00.000Z","path":"2024/06/03/Make-3D-Qrcode.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ç²’å­äº‘åˆ‡æ¢æ•ˆæœä¸­æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•å°†ç‰©ä½“çš„æ¨¡å‹è½¬æ¢æˆç²’å­äº‘å¹¶ä¸”è¿›è¡Œåˆ‡æ¢çš„æ•ˆæœï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ°äº†äºŒç»´ç çš„ç²’å­æ•ˆæœï¼Œé‚£ä¹ˆè¿™æ ·çš„æ•ˆæœæ˜¯å¦‚ä½•å®ç°å‘¢ï¼Ÿæœ¬æ–‡ä»å»ºæ¨¡å¼€å§‹ï¼Œå¸¦é¢†å¤§å®¶ä¸€æ­¥ä¸€æ­¥å®ç°è¿™æ ·çš„æ•ˆæœã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ä¸€äº›å†…å®¹åˆ›ä½œç½‘ç«™ï¼Œç›´æ¥è´´äºŒç»´ç çš„è¯æ–‡ç« ä¼šè¢«é™æµè­¦å‘Šï¼Œé‚£ä¹ˆå¦‚ä½•æ‰èƒ½å¤Ÿå…‰æ˜æ­£å¤§çš„è´´å‡ºäºŒç»´ç å‘¢ï¼Ÿçœ‹å®Œæœ¬æ–‡ï¼Œç›¸ä¿¡ä½ å°±ä¼šæœ‰ç­”æ¡ˆäº†ã€‚æœ€ç»ˆæˆ‘ä»¬æƒ³è¦å®ç°è¿™æ ·çš„ä¸€ä¸ªæ•ˆæœï¼š æœ¬æ–‡æœ€ç»ˆçš„æ•ˆæœå¯ä»¥è®¿é—®é“¾æ¥æŸ¥çœ‹ å»ºæ¨¡ è¦å®ç°è¿™æ ·çš„æ•ˆæœï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å°†äºŒç»´ç è¿›è¡Œå»ºæ¨¡å¤„ç†ï¼›ç½‘ç»œä¸Šä¹Ÿæœ‰å¾ˆå¤šå»ºæ¨¡å·¥å…·ï¼Œè¿™é‡Œç¬”è€…æ¨èä½¿ç”¨å¼€æºä¸”å¥½ç”¨çš„Blender4è¿›è¡Œå»ºæ¨¡ï¼›æ•´ä¸ªå»ºæ¨¡çš„è¿‡ç¨‹è¾ƒä¸ºç¹çï¼Œå› æ­¤éœ€è¦ä¸€å®šçš„è€å¿ƒå’Œç»†å¿ƒï¼›å¦‚æœæœ‰æ›´å¥½çš„å»ºæ¨¡æ–¹å¼ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚ é€‰ä¸­å³ä¸Šè§’çš„Zè½´ï¼Œå°†å›¾ç‰‡æ‹–æ‹½å…¥ç¼–è¾‘å™¨ä¸­ï¼Œæœ€å¥½å°†äºŒç»´ç çš„å››å‘¨ç™½è¾¹è¿›è¡Œè£åˆ‡ï¼›ç„¶åè°ƒæ•´å…¶XYZè½´ä½ç½®ï¼Œè®©å…¶å±…ä¸­ï¼š Shift+Aé”®ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç½‘æ ¼=&gt;å¹³é¢è¿›æ¥ï¼Œå†æ¬¡è°ƒæ•´ä½ç½®ï¼Œç„¶åé€‰æ‹©å³ä¸Šè§’çš„åˆ‡æ¢é€è§†æ¨¡å¼ï¼Œå¿«æ·é”®æ˜¯Alt+Zé”®ï¼›å¼€å¯é€è§†æ¨¡å¼åï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒæ•´å¹³é¢çš„å¤§å°ï¼Œå’ŒäºŒç»´ç ä¸­é—´éƒ¨åˆ†å¤§å°ç›¸åŒå³å¯ã€‚ é€‰æ‹©å¹³é¢åï¼Œç»§ç»­ç‚¹å‡»Tabé”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒCtrl+Ræ·»åŠ åˆ†å‰²çº¿ï¼Œåœ¨å¹³é¢çš„æ¨ªå‘å’Œçºµå‘éƒ½æ·»åŠ å¤šä¸ªåˆ†å‰²çº¿ï¼Œæ»šåŠ¨é¼ æ ‡æ»šè½®å¯ä»¥å¢åŠ æˆ–å‡å°‘æ•°é‡ï¼Œå½“æ•°é‡åˆšå¥½å¯ä»¥åˆ‡å‰²æ¯ä¸ªäºŒç»´ç çš„æ–¹å—æ—¶ç‚¹å‡»å³é”®ç¡®å®šï¼š ç‚¹å‡»å·¦ä¸Šè§’çš„é¢é€‰æ‹©æ¨¡å¼ä»¥åŠæ‰©å±•å½“å‰é€‰ä¸­é¡¹æ¨¡å¼ï¼Œå°†ç™½è‰²å—çš„éƒ¨åˆ†é€‰ä¸­å‡ºæ¥ï¼Œç„¶åç‚¹å‡»delé”®è¿›è¡Œåˆ é™¤ï¼Œé€‰æ‹©é¢é€‰é¡¹ï¼Œè¿™ä¸ªè¿‡ç¨‹éœ€è¦è€å¿ƒæ…¢æ…¢é€‰æ‹©ï¼š æ³¨æ„æ¡†é€‰é¢ä¸­é—´çš„å°ç‚¹ï¼Œæ‰èƒ½é€‰ä¸­é¢ã€‚ åˆ é™¤åæˆ‘ä»¬å¾—åˆ°äº†è¿™æ ·ä¸€ä¸ªå›¾å½¢ï¼Œæˆ‘ä»¬å‘ç°ä¾ç„¶å¯ä»¥è¿›è¡Œæ‰«ç ï¼š æˆ‘ä»¬ç»™æ¯ä¸ªé»‘è‰²çš„å°æ–¹å—åŒæ—¶æ·»åŠ æ¨ªå‘å’Œçºµå‘çš„åˆ†å‰²çº¿ï¼Œé€‰æ‹©æ‰€æœ‰çš„é¢ï¼Œç‚¹å‡»delåˆ é™¤ï¼Œé€‰æ‹©ä»…è¾¹å’Œé¢é€‰é¡¹ è¿™ä¸€æ­¥ä¹Ÿéœ€è¦ç»†å¿ƒå’Œè€å¿ƒï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨å‰é¢ç¬¬ä¸€æ¬¡åˆ†å‰²çš„æ—¶å€™ï¼Œåˆ†å‰²å¾—æ›´ç»†ã€‚ é¢å’Œè¾¹åˆ é™¤äº†ï¼Œæˆ‘ä»¬çš„ç•Œé¢ä¸Šçœ‹ä¼¼ä»€ä¹ˆéƒ½æ²¡æœ‰äº†ï¼Œä¸è¿‡åˆ«ç€æ€¥ï¼Œç„¶åå³ä¸Šè§’é€‰æ‹©ç‚¹æ¨¡å¼ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°åˆ é™¤äº†è¾¹å’Œé¢ä¹‹åï¼Œè¿˜æœ‰å¾ˆå¤šçš„å°ç‚¹å‰©ä½™ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦ä¿ç•™é»‘è‰²æ–¹å—ä¸­å¿ƒçš„ç‚¹ï¼›è¿™é‡Œæˆ‘ä»¬åœ¨ç‚¹æ¨¡å¼ä¸‹æ¡†é€‰é»‘è‰²æ–¹å—ä¸­çš„ç‚¹åï¼Œç„¶åä½¿ç”¨Ctrl+Ié”®è¿›è¡Œåå‘é€‰æ‹©ï¼Œåˆ é™¤å…¶ä»–æ‰€æœ‰çš„ç‚¹ï¼š æœ€ç»ˆæˆ‘ä»¬å¾—åˆ°è¿™æ ·ä¸€ä¸ªç‚¹çŠ¶çš„å›¾å½¢ï¼š å°†å…¶å¯¼å‡ºåˆ°glbæ–‡ä»¶å³å¯ï¼Œæ³¨æ„éœ€è¦å‹¾é€‰æ¾æ•£ç‚¹é€‰é¡¹ï¼š å¯¼å…¥æ¨¡å‹ æˆ‘ä»¬çš„æ¨¡å‹å¤„ç†å®Œæˆåï¼Œå¯ä»¥å¯¼å…¥åˆ°three.jsä¸­æ¥äº†ï¼›æˆ‘ä»¬å¯¼å…¥æ¨¡å‹åï¼Œç”±äºæ¨¡å‹çš„å¤§å°å’Œä½ç½®å¯èƒ½ä¸æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼Œå¯ä»¥å¯¹geometryè¿›è¡Œç¼©æ”¾ã€æ—‹è½¬ã€å¹³ç§»æ“ä½œï¼Œè°ƒæ•´åˆ°é¡µé¢ä¸Šåˆé€‚çš„ä½ç½®å³å¯ï¼š 123456789101112const loader = new GLTFLoader();let qrGeometryloader.load(&quot;/models/qr.glb&quot;, (gltf) =&gt; &#123; const geometry = gltf.scene.children[0].geometry; geometry .scale(20, 20, 20) .rotateX((90 / 180) * Math.PI) .rotateY((90 / 180) * Math.PI) .translate(0, 0, -20); qrGeometry = geometry;&#125;); ç”Ÿæˆéšæœºç‚¹ ç„¶åå°±è¯¥ç”¨åˆ°æˆ‘ä»¬çš„ç²’å­Pointsäº†ï¼Œæˆ‘ä»¬å…ˆç”¨éšæœºæ•°ç”Ÿæˆä¸€å †çš„ç²’å­ï¼Œç„¶åå°†Cameraé•œå¤´æ”¾åˆ°ç²’å­å †çš„è¾¹ç¼˜è¿›è¡Œç§»åŠ¨ï¼Œå°±å¯ä»¥äº§ç”Ÿç²’å­åœ¨æ—‹è½¬çš„æ•ˆæœï¼š 12345678910111213141516171819202122232425262728const getRandomPos(index) &#123; const x = Math.random() * 90 - 45; const y = Math.random() * 90 - 45; const z = Math.random() * 90 - 45; return [x, y, z];&#125;const initPoints = () =&gt; &#123; const randomGeometry = new BufferGeometry(); const verticles = []; for (let i = 0; i &lt; 8000; i++) &#123; const [x, y, z] = getRandomPos(i) verticles.push(x, y, z); &#125; randomGeometry.setAttribute( &quot;position&quot;, new Float32BufferAttribute(verticles, 3) ); const material = new PointsMaterial(&#123; color: 0x333333, size: 0.8, map: new TextureLoader().load(&quot;gradient.png&quot;), &#125;); const pt = new Points(randomGeometry, material); screen.add(pt); this.pt = pt;&#125;; ä½†æ˜¯è¿™æ ·ç”Ÿæˆå‡ºæ¥çš„éšæœºç‚¹å‘ˆç°å‡ºæ¥æ˜¯ä¸€ä¸ªç«‹æ–¹ä½“ï¼Œæ‰€ä»¥æ‘„åƒæœºåœ¨ç§»åŠ¨æ—¶éœ€è¦æŒæ§å¥½ä½ç½®ï¼Œå¦‚æœè·ç¦»åŸç‚¹å¤ªè¿œï¼Œå°±ä¼šå‡ºç°ç²’å­ç¨€ç–ä¸åŒçš„æƒ…å†µï¼›é‚£ä¹ˆæˆ‘ä»¬ä¼˜åŒ–éšæœºå‡½æ•°ï¼Œè®©éšæœºç‚¹ç”Ÿæˆåœ¨ä¸€ä¸ªæ¤­åœ†ä½“çš„èŒƒå›´å†…ï¼Œè¿™æ ·ç›¸æœºåœ¨ç§»åŠ¨æ—¶ç²’å­å°±æ¯”è¾ƒå‡åŒ€äº†ï¼Œä¸ä¼šå‡ºç°åˆ†å¸ƒä¸å‡çš„æƒ…å†µï¼›è¿™é‡Œå¼•å…¥ä¸‰ç»´ç©ºé—´ä¸‹çš„æ¤­åœ†è®¡ç®—å…¬å¼ï¼š è¿™é‡Œçš„è®¡ç®—é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œæœ‰ä¸‰ä¸ªå˜é‡ï¼Œæˆ‘ä»¬é€šè¿‡æ§åˆ¶å˜é‡çš„æ–¹å¼ï¼Œå…ˆç”ŸæˆYè½´å’ŒZè½´çš„éšæœºå€¼ï¼Œç„¶åå¥—ç”¨è®¡ç®—å…¬å¼ï¼Œå°±å¯ä»¥è®¡ç®—å¾—åˆ°Xè½´çš„æœ€å¤§å€¼maxï¼Œå†æ ¹æ®è¿™ä¸ªmaxå€¼éšæœºç”ŸæˆXè½´çš„çš„åæ ‡å³å¯ï¼š 123456789101112131415const getRandomPos = (index) =&gt; &#123; const MAX_Y = 60; const MAX_Z = 80; const MAX_X = 80; const y = Math.random() * MAX_Y * 2 - MAX_Y; const z = Math.random() * MAX_Z * 2 - MAX_Z; const max = Math.sqrt( (1 - Math.pow(y, 2) / MAX_Y / MAX_Y - Math.pow(z, 2) / MAX_Z / MAX_Z) * MAX_X * MAX_X ); const x = Math.random() * max * 2 - max; return [x, y, z];&#125;; æˆ‘ä»¬çœ‹åˆ°Yè½´çš„æ•°å€¼æ¯”Xå’ŒZè½´éƒ½å°ä¸€ç‚¹ï¼Œå› æ­¤æ•´ä¸ªæ¤­åœ†ä½“ä¼šåæ‰ä¸€ç‚¹ï¼Œç”Ÿæˆå‡ºæ¥çš„å›¾å½¢ä¹Ÿç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼š è¿™æ ·ï¼Œæˆ‘ä»¬çš„ç›¸æœºåœ¨æ—‹è½¬æ—¶ç²’å­åˆ†å¸ƒå°±ç›¸å¯¹æ¯”è¾ƒå‡åŒ€äº†ï¼›æˆ‘ä»¬å°†é•œå¤´æ‹‰åˆ°ç²’å­çš„è¾¹ç¼˜ï¼Œç„¶åç»•ç€è¾¹ç¼˜åšç¼“æ…¢çš„ç¯ç»•è¿åŠ¨å°±å¯ä»¥çœ‹åˆ°ç²’å­çš„æ—‹è½¬æ•ˆæœäº†ï¼š 1234567891011121314151617181920const changeCameraView = () =&gt; &#123; new Tween.Tween(&#123; x: 0, &#125;) .to( &#123; x: 80, &#125;, 2400 ) .onUpdate((pos) =&gt; &#123; const &#123; x &#125; = pos; const z = Math.sqrt(80 * 80 - Math.pow(x, 2)); this.camera.position.x = x; this.camera.position.z = z; this.camera.lookAt(new Vector3(0, 0, 0)); this.camera.updateProjectionMatrix(); &#125;) .start();&#125;; æ¨¡å‹åˆ‡æ¢ éšæœºç²’å­ç”Ÿæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†randomGeometryæ¨¡å‹è½¬æ¢æˆæˆ‘ä»¬ä¸Šé¢çš„qrGeometryæ¨¡å‹äº†ï¼Œå¼•å…¥æˆ‘ä»¬çš„åˆ‡æ¢æ¨¡å‹å‡½æ•°ï¼Œè¿™é‡Œçš„å‡½æ•°åœ¨ç²’å­äº‘æ•ˆæœçš„å®ç°é‡Œé¢å·²ç»è¯¦ç»†è§£é‡Šäº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ï¼š 1234567891011121314151617181920212223const changeGeometry = (toArray, duration = 1500) =&gt; &#123; const nowFloatArray = this.pt.geometry.attributes.position.array; const tos = this.mixFloatArray(nowFloatArray, toArray); new Tween.Tween(&#123; ...Array.from(nowFloatArray), &#125;) .to(tos, duration) .easing(Tween.Easing.Quadratic.InOut) .onComplete(() =&gt; &#123; this.isChanging = false; &#125;) .onUpdate((pos) =&gt; &#123; for (let key in pos) &#123; const val = pos[key]; const idx = Number(key); this.pt.geometry.attributes.position.array[idx] = val; &#125; this.pt.geometry.attributes.position.needsUpdate = true; &#125;) .start();&#125;; åœ¨æ—‹è½¬é•œå¤´çš„åŒæ—¶ï¼Œæˆ‘ä»¬è¿›è¡Œæ¨¡å‹çš„åˆ‡æ¢ï¼š 1234this.changeCameraView();setTimeout(() =&gt; &#123; this.changeGeometry(qrGeometry.attributes.position.array, 1600);&#125;, 1600); æœ¬æ–‡æœ€ç»ˆçš„æ•ˆæœå¯ä»¥è®¿é—®é“¾æ¥æŸ¥çœ‹ æ€»ç»“ æœ¬æ–‡æ ¹æ®å‰æ–‡ç²’å­äº‘çš„å®ç°æ•ˆæœï¼Œæ‰©å±•äº†å…·ä½“å¦‚ä½•æ¥å®ç°ä¸€ä¸ªäºŒç»´ç çš„ç²’å­åŒ–æ•ˆæœï¼›é€šè¿‡å»ºæ¨¡å·¥å…·Blenderï¼Œå¯ä»¥å°†æˆ‘ä»¬çš„äºŒç»´ç å»ºç«‹æ¨¡å‹åå¯¼å…¥three.jsä¸­ï¼›é€‚åˆç½‘é¡µä¸Šéœ€è¦å‘ˆç°å±•ç¤ºäºŒç»´ç æ•ˆæœçš„åœ°æ–¹ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"Threejsç²’å­äº‘åˆ‡æ¢æ•ˆæœçš„å®ç°","date":"2024-05-28T05:14:15.000Z","path":"2024/05/28/Threejs-Points-Effect.html","text":"æœ¬æ–‡æˆ‘ä»¬æ¥æ¢è®¨Three.jsä¸­ä¸¤ä¸ªé‡è¦çš„æ¦‚å¿µï¼šç²’å­å’Œç²¾çµï¼Œä½¿ç”¨ç²¾çµSpriteï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¾ˆå¤šç»†å°çš„æœ‰è¶£çš„åœºæ™¯ï¼Œæ¨¡æ‹Ÿé›¨æ»´é›ªèŠ±çš„æ•ˆæœï¼›æœ€åçš„å®ç°æ•ˆæœï¼Œæˆ‘ä»¬ä¼šå°†ä¸€ç»„ç²’å­æ¸²æŸ“æˆå‡ ä½•ä½“çš„æ ·å­ï¼Œå¹¶ä¸”åœ¨å‡ ä½•ä½“çš„å½¢çŠ¶ä¹‹é—´è¿›è¡Œæ¥å›åˆ‡æ¢ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è¯´çš„ç²’å­äº‘åˆ‡æ¢æ•ˆæœï¼Œæ•ˆæœéå¸¸é…·ç‚«ã€‚ ç›¸ä¿¡ä¸å°‘åŒå­¦ä¹‹å‰çœ‹åˆ°è¿‡è…¾è®¯äº’åŠ¨å¨±ä¹æ¡ˆä¾‹ï¼Œä½¿ç”¨three.jsçš„ç²’å­è¿›è¡Œåˆ‡æ¢ï¼Œæ•ˆæœéå¸¸çš„éœ‡æ’¼ï¼›æœ¬æ–‡æˆ‘ä»¬å°±æ¥çœ‹ä¸‹è¿™æ ·çš„æ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„ï¼š æœ€ç»ˆæˆ‘ä»¬å®ç°è¿™æ ·ä¸€ä¸ªåˆ‡æ¢çš„æ•ˆæœï¼š æœ¬æ–‡çš„æœ€ç»ˆå®ç°æ•ˆæœå¯ä»¥ç‚¹å‡»è®¿é—® åœ¨å®ç°è¿™ä¸ªæ•ˆæœä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯è€è§„çŸ©ï¼Œå…ˆæ¥è®²ä¸€ä¸‹ç²’å­çš„åŸºç¡€çŸ¥è¯†ï¼Œåªæœ‰æŠŠåŸºç¡€çŸ¥è¯†ææ¸…æ¥šäº†ï¼Œæˆ‘ä»¬æ‰èƒ½å¤ŸçŸ¥é“åé¢çš„ç²’å­æ˜¯å¦‚ä½•æ¥ç§»åŠ¨å˜æ¢ä½ç½®çš„ï¼›é‚£ä¹ˆæœ¬æ–‡æ¶‰åŠåˆ°çš„three.jsçš„åŸºç¡€çŸ¥è¯†ä¸»è¦å°±æ˜¯ä¸¤ä¸ªï¼š ç²¾çµSprite ç²’å­Points ç²¾çµSprite Spriteï¼ˆç¿»è¯‘è¿‡æ¥å°±æ˜¯ç²¾çµï¼‰æ˜¯ä¸€ä¸ªæ€»æœ‰é¢æœç€æ‘„åƒæœºçš„å¹³é¢ï¼Œå®ƒå’Œç½‘æ ¼æ¨¡å‹Meshä¸€æ ·ï¼Œçˆ¶ç±»éƒ½æ˜¯Object3Dï¼Œå› æ­¤ä»–ä»¬æœ‰ä¸€äº›å…±åŒçš„å±æ€§å’Œæ–¹æ³•ï¼›ä¸åŒçš„æ˜¯Meshæ˜¯ä¸€ä¸ªä¸‰ç»´çš„ç‰©ä½“ï¼Œè€ŒSpriteæœ¬è´¨ä¸Šæ˜¯äºŒç»´çš„å¹³é¢ã€‚ Spriteæ²¡æœ‰é˜´å½±æ•ˆæœï¼Œè®¾ç½®äº†castShadowä¹Ÿæ— æ³•äº§ç”Ÿé˜´å½±ã€‚ æŸ¥çœ‹æºç å¯ä»¥å‘ç°ï¼ŒSpriteå’ŒMeshä¸€æ ·ï¼Œéƒ½æ˜¯ç»§æ‰¿è‡ªObject3Dï¼š 12345// three.js/blob/master/src/objects/Sprite.jsimport &#123; Object3D &#125; from &#x27;../core/Object3D.js&#x27;;class Sprite extends Object3D &#123; // ...&#125; åˆ©ç”¨Spriteæˆ‘ä»¬å¯ä»¥å®ç°ä¸‹é›¨ä¸‹é›ªã€ç«ç„°çˆ†ç‚¸ç­‰ä¸€äº›æ•ˆæœï¼ŒåŒæ—¶åˆ©ç”¨æ€»æ˜¯æœç€æ‘„åƒæœºçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡Spriteåœ¨ä¸€äº›åœºæ™¯ä¸­æ·»åŠ æ ‡ç­¾ï¼Œä»¥è¾¾åˆ°ç‚¹å‡»çš„ç›®çš„ã€‚ Spriteçš„åˆ›å»ºç›¸è¾ƒäºMeshåˆ™æ›´ä¸ºç®€å•ï¼Œç”±äºå®ƒåªæ˜¯ä¸€ä¸ªäºŒç»´çš„å¹³é¢ï¼Œå› æ­¤ä¸éœ€è¦åˆ›å»ºå‡ ä½•ä½“Geometryï¼Œåªéœ€è¦æä¾›ä¸€ä¸ªç²¾çµæè´¨å¯¹è±¡SpriteMaterialï¼Œå®ƒçš„çˆ¶ç±»ä¹Ÿæ˜¯Materialï¼Œå› æ­¤ä¹Ÿå¯ä»¥è®¾ç½®mapè´´å›¾ã€é¢œè‰²colorã€‚ æˆ‘ä»¬ä¸‹é¢æ¥åˆ›å»ºä¸€ä¸ª20*20çš„SpriteçŸ©é˜µï¼Œç»™æ¯ä¸ªç²’å­æŒ‡å®šä½ç½®positionä»¥åŠè®¾ç½®éšæœºçš„é¢œè‰²ï¼š 12345678910for (let i = 0; i &lt; 20; i++) &#123; for (let j = 0; j &lt; 20; j++) &#123; const material = new SpriteMaterial(&#123; color: Math.random() * 0xffffff, &#125;); const sprite = new Sprite(material); sprite.position.set(i * 4, j * 4, 0); scene.add(sprite); &#125;&#125; è¿è¡Œçœ‹æ•ˆæœï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€ä¸ªäº”å½©æ–‘æ–“çš„çŸ©é˜µï¼š Spriteé»˜è®¤æ˜¯çŸ©å½¢å½¢çŠ¶ï¼Œé•¿å®½éƒ½æ˜¯1ï¼Œå¯¹äºé€è§†ç›¸æœºè€Œè¨€ï¼ŒSpriteå’ŒMeshåŒæ ·éµå¾ªè¿‘å¤§è¿œå°çš„æŠ•å½±è§„å¾‹ï¼Œå› æ­¤æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„çŸ©é˜µä¸­ï¼Œå·¦ä¸‹è§’çš„ç‚¹æ˜¯æœ€å¤§çš„ï¼Œè¶Šå¾€å³ä¸Šè§’ï¼Œç‚¹è¶Šå°ã€‚ Spriteçš„æ„é€ å‡½æ•°ä¸­å¹¶æ²¡æœ‰æä¾›è®¾ç½®å¤§å°çš„å±æ€§ï¼Œæƒ³è¦æ”¹å˜Spriteçš„å¤§å°ï¼Œåªèƒ½è®¾ç½®scaleè€Œä¸èƒ½è®¾ç½®é•¿å®½ï¼š 12const sprite = new Sprite(material);sprite.scale.set(3, 3, 1); Spriteæ¨¡æ‹Ÿä¸‹é›¨æ•ˆæœ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•è®©Spriteæ¨¡æ‹Ÿä¸‹é›¨çš„æ•ˆæœï¼Œé¦–å…ˆæˆ‘ä»¬ä¸‹è½½é›¨æ»´çš„ç´ æå›¾ç‰‡ï¼Œé€šè¿‡TextureLoaderåŠ è½½åˆ°SpriteMaterialæè´¨ï¼š 1234const texture = new TextureLoader().load(&quot;/images/textures/rain.png&quot;);const spriteMaterial = new SpriteMaterial(&#123; map: texture,&#125;); ç„¶ååœ¨1000*1000*500çš„èŒƒå›´å†…ï¼Œç”Ÿæˆ16000ä¸ªéšæœºçš„ç²¾çµSpriteï¼š 1234567891011const group = new Group();for (let i = 0; i &lt; 16000; i++) &#123; // ç²¾çµæ¨¡å‹å…±äº«æè´¨ const sprite = new Sprite(spriteMaterial); group.add(sprite); // è®¾ç½®ç²¾çµæ¨¡å‹ä½ç½®ï¼Œåœ¨é•¿æ–¹ä½“ç©ºé—´ä¸Šä¸Šéšæœºåˆ†å¸ƒ const x = 1000 * (Math.random() - 0.5); const y = 500 * Math.random(); const z = 1000 * (Math.random() - 0.5); sprite.position.set(x, y, z);&#125; æœ€åï¼Œåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶ï¼Œä¸æ–­çš„å‡å°‘spriteçš„Yè½´åæ ‡ï¼Œå®ç°ä¸‹è½æ•ˆæœï¼›è€Œå½“å°äºä¸€å®šé˜ˆå€¼æ—¶ï¼Œè®©é›¨æ»´é‡æ–°å›åˆ°å¤©ä¸Šé‡æ–°å¼€å§‹ä¸‹è½çš„è¿‡ç¨‹ã€‚ 12345678910class Index &#123; render() &#123; this.group.children.forEach((sprite, index) =&gt; &#123; sprite.position.y -= 1; if (sprite.position.y &lt;= -300) &#123; sprite.position.y = 500; &#125; &#125;); &#125;&#125; æœ€åæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ¨¡æ‹Ÿä¸‹é›¨çš„æ•ˆæœäº†ã€‚ æœ‰ä¸€äº›é›¨æ»´åœ¨é è¿‘é•œå¤´çš„æ—¶å€™ä¼šæ˜¾å¾—å¾ˆå¤§ï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶é•œå¤´çš„nearå‚æ•°ï¼Œè¿‡äºé è¿‘é•œå¤´çš„é›¨æ»´å°±ä¸è¿›è¡Œæ¸²æŸ“äº†ï¼›æˆ‘ä»¬åˆå§‹åŒ–é•œå¤´çš„æ—¶å€™ï¼Œå°†nearè®¾ç½®ä¸º50ï¼Œè®©é›¨æ»´åœ¨é•œå¤´å†…å¤–ï¼Œä¸è¿›è¡Œæ¸²æŸ“ã€‚ 12- const camera = new THREE.PerspectiveCamera(30, width / height, 1, 2000);+ const camera = new THREE.PerspectiveCamera(30, width / height, 50, 2000); ç‚¹å‡»æŸ¥çœ‹ä¸‹é›¨çš„æ•ˆæœã€‚ Points å¯¹Spriteçš„ç‰¹æ€§æœ‰ä¸€å®šçš„äº†è§£åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹Pointsï¼›æˆ‘ä»¬åœ¨å®é™…æ¶‰åŠç²’å­çš„å¼€å‘ä¸­ï¼Œä¸€èˆ¬ä¸å¤ªä¼šç”¨åˆ°Spriteï¼Œå› ä¸ºåˆ›å»ºäº†å¤§é‡çš„Spriteç²¾çµï¼Œæ¯ä¸ªç²’å­éƒ½éœ€è¦è¿›è¡Œå•ç‹¬çš„ç®¡ç†ï¼ŒåŒæ—¶ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„æ€§èƒ½ï¼›æ›´å¤šçš„åˆ™æ˜¯ä½¿ç”¨Pointsï¼Œä¹Ÿå°±æ˜¯ç²’å­é›†åˆï¼Œåœ¨å¤„ç†å¤§é‡å¯¹è±¡çš„æ—¶å€™èƒ½å¤Ÿæä¾›æ›´å¥½çš„æ€§èƒ½ã€‚ ä»åç§°ä¹Ÿèƒ½çœ‹å‡ºSpriteæ²¡æœ‰å¸¦sï¼Œè€ŒPointså¸¦æœ‰sï¼ŒPointsæ›´é€‚åˆç”¨æ¥å¤„ç†å¤§é‡ç²’å­çš„åœºæ™¯ã€‚ Pointsçš„åˆ›å»ºç›¸è¾ƒäºSpriteä¼šæ›´åŠ å¤æ‚ä¸€ç‚¹ï¼Œå®ƒçš„æ„é€ å™¨æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å½¢çŠ¶ï¼Œå¦ä¸€ä¸ªæ˜¯æè´¨ï¼š 1new Points(BufferGeometry, PointsMaterial) PointsMaterialå’ŒSpriteMaterialç±»ä¼¼ï¼Œéƒ½æ˜¯æè´¨å¯¹è±¡ï¼Œéƒ½æœ‰ç€ç±»ä¼¼çš„å±æ€§ï¼Œè€Œè¿™é‡Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼šBufferGeometryï¼ˆç¼“å†²å‡ ä½•ä½“ï¼‰ï¼›æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®˜ç½‘çš„ç»•å£çš„å®šä¹‰ï¼š BufferGeometryæ˜¯é¢ç‰‡ã€çº¿æˆ–ç‚¹å‡ ä½•ä½“çš„æœ‰æ•ˆè¡¨è¿°ã€‚åŒ…æ‹¬é¡¶ç‚¹ä½ç½®ï¼Œé¢ç‰‡ç´¢å¼•ã€æ³•ç›¸é‡ã€é¢œè‰²å€¼ã€UVåæ ‡å’Œè‡ªå®šä¹‰ç¼“å­˜å±æ€§å€¼ã€‚ä½¿ç”¨BufferGeometryå¯ä»¥æœ‰æ•ˆå‡å°‘å‘GPUä¼ è¾“ä¸Šè¿°æ•°æ®æ‰€éœ€çš„å¼€é”€ã€‚ three.jsä¸­ç»™æˆ‘ä»¬æä¾›äº†å¤§é‡çš„ã€åŸºç¡€çš„å†…ç½®å½¢çŠ¶ï¼šBoxGeometryç«‹æ–¹å½¢çŠ¶ã€CircleGeometryåœ†å½¢å’ŒSphereGeometryçƒå½¢ç­‰ç­‰ï¼Œè¿˜æœ‰ä¸€äº›å¥‡å¼‚çš„å½¢çŠ¶ï¼Œæ¯”å¦‚TorusGeometryåœ†ç¯æ‰­ç»“å‡ ä½•ä½“ã€IcosahedronGeometryäºŒåé¢å‡ ä½•ä½“ç­‰ï¼Œä½†è¿™äº›å½¢çŠ¶æˆ‘ä»¬å¦‚æœå»æŸ¥çœ‹æºç ï¼Œä¼šå‘ç°å®ƒä»¬æ— ä¸€åˆ—å¤–çš„éƒ½æ˜¯ç»§æ‰¿è‡ªBufferGeometryè¿™ä¸ªç±»ï¼š 1234567891011121314class BoxGeometry extends BufferGeometry &#123; constructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) &#123; // ... this.setIndex( indices ); this.setAttribute( &#x27;position&#x27;, new Float32BufferAttribute( vertices, 3 ) ); this.setAttribute( &#x27;normal&#x27;, new Float32BufferAttribute( normals, 3 ) ); this.setAttribute( &#x27;uv&#x27;, new Float32BufferAttribute( uvs, 2 ) ); &#125;&#125;class CircleGeometry extends BufferGeometry &#123; constructor( radius = 1, segments = 32, thetaStart = 0, thetaLength = Math.PI * 2 ) &#123; // ... &#125;&#125; å¹¶ä¸”æ ¹æ®ä¼ å…¥çš„é•¿å®½é«˜ã€åŠå¾„ç­‰å€¼ï¼Œç”Ÿæˆé¡¶ç‚¹åæ ‡positionã€æ³•å‘é‡normalã€çº¹ç†åæ ‡uvç­‰ä¿¡æ¯ï¼Œå¹¶è®¾ç½®åˆ°å‡ ä½•ä½“çš„å±æ€§ä¸­ï¼›å› æ­¤BufferGeometryå°±æ˜¯ç”¨æ¥æ„å»ºå½¢çŠ¶çš„ä¸€ä¸ªåŸºæœ¬ç±»ã€‚ å›åˆ°Pointsæ„å»ºæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å°†é¢„ç½®çš„å½¢çŠ¶ä¼ å…¥åˆ°Pointsçš„æ„å»ºå‡½æ•°ä¸­ï¼š 123456789const boxGeometry = new BoxGeometry(100, 100, 100, 6, 6, 6);const material = new PointsMaterial(&#123; color: 0xffffff, size: 2, transparent: true,&#125;);const point = new Points(boxGeometry, material); å°±å¯ä»¥å°†æˆ‘ä»¬çš„å½¢çŠ¶è½¬æ¢æˆç²’å­çš„å½¢çŠ¶äº†ã€‚ Pointsæ¼«å¤©é£é›ªæ•ˆæœ ä½†æ˜¯æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¹¶æ²¡æœ‰é‚£ä¹ˆå¤šä¸­è§„ä¸­çŸ©çš„å†…ç½®å½¢çŠ¶å¯ä»¥ç”¨ï¼Œæ›´å¤šçš„éƒ½æ˜¯å¥‡ç‰¹çš„å½¢çŠ¶ï¼Œæ‰€ä»¥å°±éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å®šä¹‰å½¢çŠ¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ€ä¹ˆé€šè¿‡Pointsè®¾ç½®ä¸€ç³»åˆ—çš„éšæœºç‚¹ï¼Œå®ç°ä¸€ç§æ¼«å¤©çš„é£é›ªæ•ˆæœï¼›æˆ‘ä»¬æ–°å»ºä¸€ä¸ªBufferGeometryå¯¹è±¡ï¼Œé€šè¿‡setAttributeè®¾ç½®é¡¶ç‚¹åæ ‡ï¼š 123456789101112import &#123; Float32BufferAttribute &#125; from &quot;three&quot;;const vertices = [];for (let i = 0; i &lt; 10000; i++) &#123; const x = Math.random() * 2000 - 1000; const y = Math.random() * 2000 - 1000; const z = Math.random() * 2000 - 1000; vertices.push(x, y, z);&#125;const geometry = new BufferGeometry();geometry.setAttribute(&quot;position&quot;, new Float32BufferAttribute(vertices, 3)); è¿™é‡Œçš„Float32BufferAttributeæ˜¯BufferAttributeçš„ä¸€ä¸ªå­ç±»ï¼Œç”¨äºå­˜å‚¨å’Œç®¡ç†å‡ ä½•ä½“çš„å±æ€§æ•°æ®ï¼ŒåŒ…æ‹¬é¡¶ç‚¹ä½ç½®ã€é¢œè‰²ã€çº¹ç†ç­‰ï¼›Float32è¡¨ç¤ºå­˜å‚¨çš„æ˜¯32ä½æµ®ç‚¹æ•°ï¼Œè¿™ç§ç²¾åº¦ä¹Ÿè¶³å¤Ÿæˆ‘ä»¬æ—¥å¸¸ä½¿ç”¨äº†ï¼›å®ƒæ¥æ”¶ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨é¡¶ç‚¹çš„ä½ç½®ï¼›ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ¥æ”¶æ•°ç»„å…³è”çš„æ•°ç»„å€¼çš„æ•°é‡ï¼Œç”±äºæˆ‘ä»¬çš„é¡¶ç‚¹æ˜¯3ä¸ªæ•°æ®ç¡®å®šä¸€ä¸ªXYZåæ ‡è½´ï¼Œå› æ­¤è¿™è¾¹ä¼ å…¥3ï¼›å¦‚æœæ˜¯uvåæ ‡çš„è¯ï¼Œå› ä¸ºæ˜¯äºŒç»´æ•°æ®ï¼Œåˆ™ä¼ å…¥2ã€‚ ç„¶åæ„å»ºPointsçš„æµç¨‹å’Œä¸Šé¢æ˜¯ä¸€æ ·çš„äº†ï¼Œæ„å»ºPointsMaterialçš„æ—¶å€™æˆ‘ä»¬ä½¿ç”¨ä¸€å¼ é›ªèŠ±çš„è´´å›¾ï¼š 12345678const tx = textureLoader.load(&quot;/images/textures/sprites/snowflake1.png&quot;, assignSRGB);const material = new PointsMaterial(&#123; size: 8, map: tx,&#125;);const pt = new Points(geometry, material); æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°æ»¡å±å¹•å¤§å¤§å°å°çš„é›ªèŠ±äº†ï¼Œæ¯ä¸ªé›ªèŠ±å…¶å®éƒ½æ˜¯ä¸€ä¸ªéšæœºçš„é¡¶ç‚¹ï¼š three.jsçš„å®˜æ–¹demoæä¾›äº†äº”ç§é›ªèŠ±è´´å›¾ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºæ›´å¤šå½¢çŠ¶çš„é›ªèŠ±ï¼š 123456789101112131415161718192021222324252627282930313233const sprite1 = textureLoader.load(&quot;/images/textures/sprites/snowflake1.png&quot;);const sprite2 = textureLoader.load(&quot;/images/textures/sprites/snowflake2.png&quot;);const sprite3 = textureLoader.load(&quot;/images/textures/sprites/snowflake3.png&quot;);const sprite4 = textureLoader.load(&quot;/images/textures/sprites/snowflake4.png&quot;);const sprite5 = textureLoader.load(&quot;/images/textures/sprites/snowflake5.png&quot;);const parameters = [ [[1.0, 0.2, 0.5], sprite2, 20], [[0.95, 0.1, 0.5], sprite3, 15], [[0.9, 0.05, 0.5], sprite1, 10], [[0.85, 0, 0.5], sprite5, 8], [[0.8, 0, 0.5], sprite4, 5],];for (let i = 0; i &lt; parameters.length; i++) &#123; const color = parameters[i][0]; const sprite = parameters[i][1]; const size = parameters[i][2]; const material = new PointsMaterial(&#123; size, map: sprite, &#125;); // material.color.setHSL(0.8, 0, 0.5); material.color.setHSL(color[0], color[1], color[2]); const pt = new Points(geometry, material); pt.rotation.x = Math.random() * 6; pt.rotation.y = Math.random() * 6; pt.rotation.z = Math.random() * 6; this.scene.add(pt);&#125; æˆ‘ä»¬èƒ½çœ‹åˆ°æ›´å¤šå¯†å¯†éº»éº»çš„é›ªèŠ±å½¢çŠ¶ï¼š ä¸è¿‡æˆ‘ä»¬å¾ˆæ˜æ˜¾å‘ç°é›ªèŠ±è´´å›¾æœ‰ä¸ªä¸é€æ˜çš„èƒŒæ™¯ï¼Œæˆ‘ä»¬éœ€è¦æŠŠèƒŒæ™¯è®¾ç½®æˆé€æ˜çš„ã€‚ 1234567const material = new PointsMaterial(&#123; size, map: sprite, + transparent: true, + depthTest: false, + blending: AdditiveBlending,&#125;); åœ¨æ¯æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œè®©Pointsæ²¿ç€yè½´ä¸åœçš„æ—‹è½¬ï¼š 123456789const render = ()=&gt;&#123; for (let i = 0; i &lt; this.scene.children.length; i++) &#123; const obj = this.scene.children[i]; if (obj instanceof Points) &#123; obj.rotation.y = time * (i &lt; 4 ? i + 1 : -(i + 1)); &#125; &#125; requestAnimationFrame(render);&#125; æˆ‘ä»¬å°±å¯ä»¥æ¬£èµé£é›ªçš„æ•ˆæœäº†ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆå§‹åŒ–çš„è§†è§’ä½ç½®è¦è®¾ç½®åœ¨(0,0,1000)ï¼Œè€Œä¸æ˜¯åœ¨åœºæ™¯çš„ä¸­å¿ƒ(0,0,0)ï¼Œåœ¨ä¸­å¿ƒä½ç½®æˆ‘ä»¬çš„è§†è§’ä¼šå¾ˆå¥‡æ€ªï¼Œæœ‰ç§çœ©æ™•çš„æ„Ÿè§‰ï¼›è€ŒPointséšæœºé¡¶ç‚¹çš„æœ€å¤§èŒƒå›´æ˜¯åœ¨1000ï¼Œå°†è§†è§’è®¾ç½®åœ¨è¾¹ç¼˜ï¼Œå°±å¯ä»¥æœ‰ä¸€ç§é›ªèŠ±é£˜è½å¿«æ…¢ä¸ä¸€çš„æ„Ÿè§‰ã€‚ æ­£æ‰€è°“å½“å±€è€…è¿·ï¼Œæ—è§‚è€…æ¸…ã€‚ æœ¬æ–‡çš„æœ€ç»ˆå®ç°æ•ˆæœå¯ä»¥ç‚¹å‡»è®¿é—® æ¨¡å‹åˆ‡æ¢ ç»è¿‡å‰æ–‡çš„å‡ ä¸ªæ¡ˆä¾‹å­¦ä¹ ï¼Œç›¸ä¿¡å¤§å®¶å¯¹Spriteå’ŒPointsçš„ç”¨æ³•ä¹Ÿå·²ç»æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•è®©æ¨¡å‹ä¸­çš„ç²’å­è¿åŠ¨èµ·æ¥ï¼›è¦è®©æˆ‘ä»¬çš„æ¨¡å‹å˜æ¢ï¼Œæœ€é‡è¦çš„å°±æ˜¯å¦‚ä½•è®©Pointsä¸­çš„æ¯ä¸€ä¸ªç²’å­èƒ½å¤Ÿè¿åŠ¨åˆ°æŒ‡å®šçš„ä½ç½®ã€‚ é¦–å…ˆæˆ‘ä»¬é€šè¿‡ä¸¤ä¸ªç®€å•çš„åŸå§‹æ¨¡å‹æ¥ç®€å•æ¨¡æ‹Ÿç²’å­çš„åˆ‡æ¢ï¼Œæˆ‘ä»¬ä»ç®€å•çš„æ¨¡å‹å¼€å§‹ï¼Œåˆå§‹åŒ–ä¸€ä¸ªç›’å­æ¨¡å‹ï¼Œå®ç°ä»ç›’å­BoxGeometryæ¨¡å‹åˆ‡æ¢åˆ°åœ†å½¢SphereGeometryçš„è¿‡ç¨‹ã€‚ 1234567891011const boxGeometry = new BoxGeometry(100, 100, 100, 6, 6, 6);const sphereGeometry = new SphereGeometry(100, 12, 12);const material = new PointsMaterial(&#123; color: 0xffffff, size: 2, transparent: true,&#125;);const point = new Points(boxGeometry, material);this.point = pointthis.scene.add(point); æˆ‘ä»¬å°è£…ä¸€ä¸ªchangeGeometryçš„å‡½æ•°ï¼Œä¼ å…¥æˆ‘ä»¬æƒ³è¦å˜æ¢åçš„æ¨¡å‹ï¼Œå› æ­¤è¿™ä¸ªchangeGeometryå‡½æ•°çš„å®ç°é€»è¾‘å°±éå¸¸é‡è¦äº†ï¼Œå†³å®šç€æœ€ç»ˆåˆ‡æ¢çš„æ•ˆæœï¼š 123const changeGeometry =&gt; (toArray) =&gt; &#123; // å®ç°é€»è¾‘&#125; æˆ‘ä»¬å–å‡ºåˆ‡æ¢åæ¨¡å‹ä¸­çš„é¡¶ç‚¹æ•°ç»„toArrayï¼Œæ˜¯åˆ‡æ¢åçš„æ•°ç»„ï¼›è€Œthis.pointä¸­çš„é¡¶ç‚¹æ•°æ®æ˜¯åˆ‡æ¢å‰çš„æ•°æ®ï¼Œçœ‹ä¼¼toArrayå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„åˆ‡æ¢åçš„æ•°æ®ï¼›æˆ‘ä»¬ä¼šå‘ç°ï¼Œæ­¤æ—¶é¢ä¸´ç€ä¸€ä¸ªéå¸¸æ£˜æ‰‹çš„é—®é¢˜ï¼š å˜æ¢å‰åä¸¤ä¸ªæ¨¡å‹çš„é¡¶ç‚¹æ•°ç»„é•¿åº¦ä¸ä¸€è‡´æ€ä¹ˆå¤„ç†ï¼Ÿ åœ¨changeGeometryå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡Tween.jsï¼Œå°†this.pointä¸­çš„é¡¶ç‚¹æ•°æ®ï¼Œè¿›è¡Œç§»åŠ¨åˆ°ä¸åŒçš„ä½ç½®ä¸Šï¼›å› æ­¤æˆ‘ä»¬çš„ç›®çš„æ˜ç¡®äº†ï¼Œéœ€è¦ç§»åŠ¨åçš„é¡¶ç‚¹æ•°æ®å®šä¹‰ä¸ºXæ•°ç»„ã€‚ å› æ­¤æˆ‘ä»¬å…ˆè€ƒè™‘ç¬¬ä¸€ç§æƒ…å†µï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„æƒ…å†µï¼Œå°±æ˜¯ä¸¤è€…é•¿åº¦ç›¸ç­‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦çš„Xæ•°ç»„å°±æ˜¯toArrayæ•°ç»„çš„æ•°æ®ï¼Œé‚£ä¹ˆé—®é¢˜å°±è§£å†³äº†ã€‚ ä¸‹é¢æˆ‘ä»¬è€ƒè™‘ç¬¬äºŒç§æƒ…å†µï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åˆ‡æ¢å‰çš„this.pointä¸­çš„é¡¶ç‚¹æ•°æ®æ¯”åˆ‡æ¢åçš„toGeometryä¸­çš„æ•°æ®è¦å°‘ï¼›ç›´è§‚çš„æ„Ÿå—å°±æ˜¯é¡¶ç‚¹æ•°æ®ä¸å¤Ÿäº†ã€‚ è¿™ç§æƒ…å†µæœ€æç«¯çš„æ¡ˆä¾‹å°±æ˜¯ï¼Œå¼€å§‹æœ‰ä¸€ä¸ªé¡¶ç‚¹æ•°æ®ï¼Œæœ€åæœ‰åä¸ªé¡¶ç‚¹æ•°æ®ï¼Œè¿™ç§å˜æ¢æ˜æ˜¾åˆ‡æ¢åçš„æ¨¡å‹è‚¯å®šæ˜¯ä¼šç¼ºå°‘éƒ¨åˆ†é¡¶ç‚¹ï¼Œåªæœ‰å¼€å§‹çš„é‚£ä¸€ä¸ªé¡¶ç‚¹æ•°æ®èƒ½å¤Ÿå®ç°å˜æ¢ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦çš„Xæ•°ç»„å°±æ˜¯å°†toGeometryçš„æ•°ç»„ä¸­æˆªå–åŒæ ·é•¿åº¦çš„æ•°æ®æ•°ç»„ï¼›æˆ‘ä»¬éœ€è¦å†å®šä¹‰ä¸€ä¸ªmixFloatArrayå‡½æ•°è¿›è¡Œé¡¶ç‚¹æ•°æ®çš„å¤„ç†ï¼š 123456789101112131415// è·å–åˆ‡æ¢åçš„é¡¶ç‚¹æ•°æ®const mixFloatArray = (fromList, toList) =&gt; &#123; const froms = Array.from(fromList); const tos = Array.from(toList); if (froms.length === tos.length) &#123; // ç¬¬ä¸€ç§æƒ…å†µé•¿åº¦ç›¸åŒ return &#123; ...tos &#125;; &#125; else if (froms.length &lt; tos.length) &#123; // ç¬¬äºŒç§æƒ…å†µtoé•¿åº¦å¤§äºfrom return &#123; ...tos.splice(0, froms.length) &#125;; &#125; else if (froms.length &gt; tos.length) &#123; // å…¶ä»–é€»è¾‘ &#125;&#125;; è¿™é‡ŒfromListå’ŒtoListéƒ½æ˜¯ä¼ å…¥æ¨¡å‹çš„geometry.attributes.position.arrayï¼Œéƒ½æ˜¯ç±»æ•°ç»„ï¼Œæˆ‘ä»¬ä½¿ç”¨Array.fromè½¬ä¸ºæ•°ç»„åå†è¿›è¡Œæ“ä½œï¼›è€Œå¤„ç†åçš„æ•°æ®æˆ‘ä»¬éœ€è¦æ”¾åˆ°Tweençš„toå‡½æ•°ä¸­ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†å¤„ç†å·çš„æ•°ç»„å†è½¬æ¢æˆå¯¹è±¡ã€‚ è¿™ç§æƒ…å†µåŸºæœ¬ä¸ä¼šå‡ºç°ï¼Œå› æ­¤æˆ‘ä»¬åœ¨åˆå§‹åŒ–é¡¶ç‚¹çš„æ—¶å€™è¦åˆå§‹è¶³å¤Ÿå¤šçš„é¡¶ç‚¹æ•°æ®ï¼Œä¿è¯èƒ½å¤Ÿè¦†ç›–æ‰€æœ‰çš„æ¨¡å‹ã€‚ ç¬¬ä¸‰ç§æƒ…å†µå°±æ¯”è¾ƒå¤æ‚äº†ï¼Œå°±æ˜¯åˆ‡æ¢å‰çš„this.pointä¸­çš„é¡¶ç‚¹æ•°æ®æ¯”åˆ‡æ¢åçš„æ•°æ®è¦æ¥çš„å¤šï¼Œç›´è§‚çš„æ„Ÿå—å°±æ˜¯é¡¶ç‚¹æ•°æ®å¤šäº†ï¼Œé‚£ä¹ˆæŠŠå¤šä½™çš„é¡¶ç‚¹æ”¾åˆ°å“ªé‡Œå‘¢ï¼Ÿ æˆ‘ä»¬å…ˆè¯•ç€ç”Ÿæˆéšæœºæ•°è¿›è¡Œè¡¥è¶³ï¼š 123456789101112131415161718192021const getRandomNum = () =&gt; &#123; return 2000 * Math.random() - 1000;&#125;;const mixFloatArray = (fromList, toList) =&gt; &#123; const froms = Array.from(fromList); const tos = Array.from(toList); if (froms.length === tos.length) &#123; return &#123; ...tos &#125;; &#125; else if (froms.length &lt; tos.length) &#123; return &#123; ...tos.splice(0, froms.length) &#125;; &#125; else if (froms.length &gt; tos.length) &#123; // fromçš„é•¿åº¦æ›´é•¿ const newArr = []; for (let i = 0; i &lt; froms.length - tos.length; i++) &#123; newArr.push(getRandomNum()); &#125; return &#123; ...tos.concat(newArr) &#125;; &#125;&#125;; æˆ‘ä»¬åˆ‡æ¢åçš„é¡¶ç‚¹æ•°æ®æœ‰äº†ï¼Œå›åˆ°æˆ‘ä»¬çš„changeGeometryå‡½æ•°ï¼Œæˆ‘ä»¬è·å–åˆ‡æ¢åçš„æ•°ç»„tosï¼Œä½¿ç”¨Tweenå°†this.pointä¸­çš„é¡¶ç‚¹æ•°æ®åˆ‡æ¢åˆ°tosï¼Œåœ¨onUpdateä¸­æ›´æ–°æ¯ä¸ªé¡¶ç‚¹çš„æ•°æ®ï¼š 1234567891011121314151617181920212223const changeGeometry = (toArray, duration = 1500) =&gt; &#123; const nowFloatArray = this.pt.geometry.attributes.position.array; const tos = this.mixFloatArray(nowFloatArray, toArray); this.isChanging = true; new Tween.Tween(&#123; ...Array.from(nowFloatArray), &#125;) .to(tos, duration) .easing(Tween.Easing.Quadratic.InOut) .onComplete(() =&gt; &#123; this.isChanging = false; &#125;) .onUpdate((pos) =&gt; &#123; for (let key in pos) &#123; const val = pos[key]; const idx = Number(key); this.pt.geometry.attributes.position.array[idx] = val; &#125; this.pt.geometry.attributes.position.needsUpdate = true; &#125;) .start();&#125;; è°ƒç”¨changeGeometryåªéœ€è¦ä¼ å…¥æˆ‘ä»¬åˆ‡æ¢åçš„æ¨¡å‹é¡¶ç‚¹æ•°æ®ï¼Œå³å¯å®ç°åˆ‡æ¢æ•ˆæœï¼š 12345678const boxGeometry = new BoxGeometry(100, 100, 100, 6, 6, 6);const sphereGeometry = new SphereGeometry(100, 12, 12);const point = new Points(boxGeometry, material);setTimeout(() =&gt; &#123; changeGeometry(sphereGeometry.attributes.position.array);&#125;, 1000); æˆ‘ä»¬çœ‹ä¸‹ä»BoxGeometryåˆ‡æ¢åˆ°SphereGeometryçš„æ•ˆæœï¼Œç”±äºBoxGeometryçš„é¡¶ç‚¹æ•°é‡æ›´å¤šï¼Œå› æ­¤å¤šä½™çš„é¡¶ç‚¹ä¼šå‘å››å‘¨å››æ•£å¼€æ¥ï¼š åˆ‡æ¢æ•ˆæœä¼˜åŒ– æˆ‘ä»¬ä¸Šé¢å®ç°äº†åŸºæœ¬çš„åˆ‡æ¢æ•ˆæœäº†ï¼Œä¸è¿‡ä¸Šé¢ç”Ÿæˆéšæœºæ•°çš„æ–¹å¼æ•ˆæœå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€äº›ä¼˜åŒ–æ¥æå‡åˆ‡æ¢æ•ˆæœï¼›æˆ‘ä»¬ç»§ç»­ä¼˜åŒ–mixFloatArrayå‡½æ•°ï¼Œå¯¹äºè¡¥è¶³çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬ä¸å†ç”Ÿæˆéšæœºæ•°ï¼Œè€Œæ˜¯ä½¿ç”¨fromListåé¢çš„æ•°æ®è¿›è¡Œè¡¥è¶³ï¼š æ³¨æ„ï¼šä¸‹é¢æˆ‘ä»¬è®¨è®ºçš„ä¼˜åŒ–éƒ½åªé’ˆå¯¹ç¬¬ä¸‰ç§æƒ…å†µï¼Œä¹Ÿå°±æ˜¯fromListçš„æ•°æ®æ¯”toListå¤šçš„æƒ…å†µä¸‹ã€‚ ä½“ç°åˆ°ä»£ç ä¸Šï¼Œæˆ‘ä»¬ç›´æ¥æˆªå–fromListçš„åé¢éƒ¨åˆ†ï¼Œç„¶åæ‹¼æ¥åˆ°toListä¸Šï¼š 1234567891011121314const mixFloatArray = (fromList, toList) =&gt; &#123; const froms = Array.from(fromList); const tos = Array.from(toList); if (froms.length === tos.length) &#123; return &#123; ...tos &#125;; &#125; else if (froms.length &lt; tos.length) &#123; return &#123; ...tos.splice(0, froms.length) &#125;; &#125; else if (froms.length &gt; tos.length) &#123; // fromçš„é•¿åº¦æ›´é•¿ const newArr = froms.slice(tos.length); return &#123; ...tos.concat(newArr) &#125;; &#125;&#125; æˆ‘ä»¬çœ‹ä¸‹åˆ‡æ¢æ•ˆæœï¼Œæˆ‘ä»¬å‘ç°å¤§éƒ¨åˆ†é¡¶ç‚¹æ˜¯æ²¡æœ‰ç§»åŠ¨çš„ï¼Œåªæœ‰æ•°æ®ä¸åŒçš„é¡¶ç‚¹æ‰ä¼šç§»åŠ¨ï¼Œè¿™ä¹Ÿç¬¦åˆæˆ‘ä»¬çš„ä»£ç å®ç°é€»è¾‘ã€‚ ä½†æ˜¯è¿™æ ·çš„æ•ˆæœå’Œæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœä¸ä¸€è‡´ï¼Œæˆ‘ä»¬ç»§ç»­ä¼˜åŒ–mixFloatArrayé€»è¾‘ï¼›æˆ‘ä»¬å‘ç°ç›´æ¥æˆªå–fromListè¡¥è¶³ä¼šå¯¼è‡´éƒ¨åˆ†é¡¶ç‚¹ä¸ç§»åŠ¨ï¼ŒåŒæ—¶æˆ‘ä»¬åˆè¦ä¿è¯å¤„ç†åçš„toListçš„æ•°ç»„é•¿åº¦å’ŒfromListçš„é•¿åº¦ç›¸åŒã€‚ è¿™é‡Œæˆ‘ä»¬æƒ³åˆ°å¯ä»¥å¯¹toListçš„æ•°ç»„è¿›è¡Œå¤åˆ¶ï¼Œå¤åˆ¶Næ¬¡åï¼Œå†æˆªå–éƒ¨åˆ†æ•°æ®Mï¼Œæ‹¼æ¥åˆ°åŸæ¥æ•°æ®ä¸Šï¼Œå°±å¯ä»¥å®ç°é•¿åº¦ç›¸åŒçš„æ•ˆæœï¼›åŒæ—¶ä¸¤ä¸ªæ•°ç»„çš„æ•°æ®è¿˜ä¸ä¼šæœ‰é‡å¤çš„ï¼Œè¿™é‡Œåˆ©ç”¨äº†æ¨¡æ•°å’Œä½™æ•°çš„æ¦‚å¿µï¼Œå¯¹å…¶ä¸äº†è§£çš„åŒå­¦å¯ä»¥è‡ªè¡Œç™¾åº¦ï¼š ä½“ç°åˆ°ä»£ç ä¸Šï¼Œå®ç°é€»è¾‘å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829// è·å–æ¨¡æ•°å’Œä½™æ•°const getMod = (num1, num2) =&gt; &#123; return [Math.floor(num1 / num2), num1 % num2];&#125;;// å°†fromListå’ŒtoListæ··åˆconst mixFloatArray = (fromList, toList) =&gt; &#123; const froms = Array.from(fromList); const tos = Array.from(toList); if (froms.length === tos.length) &#123; return &#123; ...tos &#125;; &#125; else if (froms.length &lt; tos.length) &#123; return &#123; ...tos.splice(0, froms.length) &#125;; &#125; else if (froms.length &gt; tos.length) &#123; // fromçš„é•¿åº¦æ›´é•¿ const newArr = []; // ä¸¤è€…ç›¸å·®çš„é•¿åº¦ const len = froms.length - tos.length; const [n1, n2] = getMod(len, tos.length); // å°†toListå¤åˆ¶n1æ¬¡ for (let i = 0; i &lt; n1; i++) &#123; newArr.push(...tos); &#125; // ä»toListä¸­æˆªå–n2ä¸ªæ•°æ® newArr.push(...tos.slice(0, n2)); return &#123; ...tos.concat(newArr) &#125;; &#125;&#125;; æˆ‘ä»¬çœ‹ä¸‹ä¼˜åŒ–åçš„æ•ˆæœï¼Œå·²ç»åŸºæœ¬ä»¤äººæ»¡æ„äº†ï¼š åŸºæœ¬çš„åˆ‡æ¢æ•ˆæœå®ç°åï¼Œæˆ‘ä»¬å¯¼å…¥è…¾è®¯äº’åŠ¨å¨±ä¹æ¡ˆä¾‹ä¸­çš„æ¨¡å‹ï¼Œå°±å¯ä»¥å®ç°å¤šä¸ªæ¨¡å‹ä¹‹é—´çš„åˆ‡æ¢äº†ï¼Œè¿™é‡Œä¸è´´ä»£ç äº†ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åœ¨æ–‡æœ«è‡ªå–ä»£ç ã€‚ æ»šåŠ¨åˆ‡æ¢ æˆ‘ä»¬æ¥çœ‹ä¸‹æ»šåŠ¨åˆ‡æ¢çš„æ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨jsä¸­å°†åˆ‡æ¢ä¸åŒæ¨¡å‹çš„å‡½æ•°slideToå°è£…ä¼ å…¥å½“å‰çš„åˆ‡æ¢åˆ°ç¬¬å‡ ä¸ªæ¨¡å‹ï¼ŒåŒæ—¶å®šä¹‰isChangingæ§åˆ¶åˆ‡æ¢çŠ¶æ€ï¼Œåœ¨Tween.jsåˆ‡æ¢å®Œæˆåæ”¹å˜isChangingçš„å€¼ï¼š 12345678910111213141516171819202122232425262728class Index &#123; // ... å…¶ä»–ä»£ç  constructor() &#123; // æ­£åœ¨åˆ‡æ¢çš„å˜é‡flag this.isChanging = false; &#125; changeGeometry()&#123; this.isChanging = true; new Tween.Tween(&#123; ...Array.from(this.pt.geometry.attributes.position.array), &#125;) .onComplete(() =&gt; &#123; this.isChanging = false; &#125;) &#125; // åˆ‡æ¢åˆ°ç¬¬å‡ ä¸ªæ¨¡å‹ slideTo(num) &#123; if (num === 1) &#123; this.changeGeometry(this.cpgame3Gemotry); &#125; else if (num === 2) &#123; this.changeGeometry(this.cpac5); &#125; else if (num === 3) &#123; this.changeGeometry(this.cpbook2); &#125; else if (num === 4) &#123; this.changeGeometry(this.cpmovie4); &#125; &#125;&#125; åœ¨é¡µé¢ä¸Šï¼Œè¿™é‡Œç¬”è€…ä½¿ç”¨çš„æ˜¯vue3çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨é¡µé¢åŠ è½½å®Œæˆåç›‘å¬domå…ƒç´ çš„wheelæ»šåŠ¨äº‹ä»¶ï¼š 1234567891011121314151617181920&lt;template&gt; &lt;div id=&quot;webgl-output&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import PointsEffect from &quot;./index&quot;;let pe;let dom;let step = 1;const mouseScroll = debounce((ev) =&gt; &#123;&#125;, 50);onMounted(() =&gt; &#123; pe = new PointsEffect(); dom = document.querySelector(&quot;#webgl-output&quot;); dom.addEventListener(&quot;wheel&quot;, mouseScroll);&#125;);onBeforeUnmount(() =&gt; &#123; dom.removeEventListener(&quot;wheel&quot;, mouseScroll);&#125;);&lt;/script&gt; åœ¨æ»šåŠ¨äº‹ä»¶ä¸­ï¼Œæˆ‘ä»¬å…ˆåˆ¤æ–­isChangingçš„å€¼ï¼Œç„¶åå°±å¯ä»¥è°ƒç”¨slideToå‡½æ•°åˆ‡æ¢äº†ã€‚ 1234567891011121314151617181920const mouseScroll = debounce((ev) =&gt; &#123; // å½“å‰åˆ‡æ¢ä¸­ if (pe.isChanging) &#123; return; &#125; const &#123; wheelDelta &#125; = ev; if (wheelDelta &lt; 0) &#123; // å¾€ä¸‹ä¸€é¡µæ»šåŠ¨ if (step &lt; MAX_STEP) &#123; step++; pe.slideTo(step); &#125; &#125; else &#123; // ä¸Šä¸€é¡µæ»šåŠ¨ if (step &gt; 1) &#123; step--; pe.slideTo(step); &#125; &#125;&#125;, 50); æ€»ç»“ æˆ‘ä»¬çš„ç²’å­æ•ˆæœåŸºæœ¬å°±å®ç°å®Œäº†ï¼Œé€šè¿‡ä¸€ä¸ªç²’å­äº‘çš„åˆ‡æ¢æ•ˆæœï¼Œæˆ‘ä»¬å¯¹Spriteå’ŒPointsè¿›è¡Œäº†æ·±å…¥çš„å­¦ä¹ ï¼›æˆ‘ä»¬å‘ç°æ•´ä¸ªé¡¹ç›®çš„éš¾ç‚¹è¿˜æ˜¯åœ¨äºå¦‚ä½•è®¡ç®—åˆ‡æ¢åçš„ç²’å­äº‘çš„é¡¶ç‚¹ä½ç½®ï¼Œä¹Ÿå°±æ˜¯æ•°å­¦çš„æ€ç»´ï¼›ç¬”è€…é€šè¿‡ä¸‰ç§ä¸åŒçš„é¡¶ç‚¹è®¡ç®—æ–¹å¼ï¼Œä¸æ–­çš„ä¼˜åŒ–å‘ˆç°æ•ˆæœï¼Œå‘ˆç°æ•ˆæœä¸Šè¿˜æœ‰å¾…ä¼˜åŒ–ï¼›åœ¨å®é™…çš„æ¡ˆä¾‹ä¸­è¿˜åŠ å…¥äº†æ¼‚æµ®çš„ç²’å­ã€åæœŸå¤„ç†ç­‰æ•ˆæœï¼Œåœ¨è¾¹ç¼˜æœ‰ä¸€åœˆè™šåŒ–æ•ˆæœï¼Œæ˜¾å¾—æ›´åŠ çš„é«˜ç«¯å¤§æ°”ã€‚ æœ¬æ–‡çš„æœ€ç»ˆå®ç°æ•ˆæœå¯ä»¥ç‚¹å‡»è®¿é—® æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€ç²’å­äº‘åˆ‡æ¢ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"Threejså¤šåœºæ™¯åˆ‡æ¢çš„è¿‡æ¸¡æ•ˆæœ","date":"2024-04-17T12:12:00.000Z","path":"2024/04/17/Threejs-Scene-Transition.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« å…¨æ™¯é¢„è§ˆä¸­ï¼Œæˆ‘ä»¬é€šè¿‡Threejsä½¿ç”¨å¤šç§æ–¹å¼å®ç°äº†å…¨æ™¯é¢„è§ˆçš„æ•ˆæœï¼Œä»¥åŠä¿¯ç°æ•ˆæœçš„åœºæ™¯åŠ¨ç”»ï¼Œä½†æ˜¯è¿™éƒ½æ˜¯åœ¨å•ä¸ªåœºæ™¯ä¸­å®ç°çš„ï¼›ä¹Ÿæœ‰è¯»è€…è¯„è®ºè¯´è®²ä¸€ä¸‹å¤šåœºæ™¯ä¸‹çš„åœºæ™¯è¿‡æ¸¡æ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„ï¼Œé‚£ä¹ˆæœ¬æ–‡æˆ‘ä»¬å°±æ¥å­¦ä¹ ä¸€ä¸‹å¤šåœºæ™¯çš„è¿‡æ¸¡æ•ˆæœã€‚ åœ¨å®ç°å¤šåœºæ™¯å‰ï¼Œæˆ‘ä»¬å…ˆæ¥äº†è§£three.jsä¸­ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼šç¦»å±æ¸²æŸ“ï¼›åªæœ‰ç†è§£äº†è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨åç»­å®ç°å¤šåœºæ™¯çš„è¿‡æ¸¡æ•ˆæœã€‚ æœ¬æ–‡çš„å…¨æ™¯è¿‡æ¸¡æ•ˆæœå¯ä»¥ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ ç¦»å±æ¸²æŸ“ ç¦»å±æ¸²æŸ“æŒ‡çš„æ˜¯å°†æ¸²æŸ“ç»“æœæš‚æ—¶å­˜åœ¨GPUå†…éƒ¨çš„å¸§ç¼“å­˜ä¸­ï¼Œè€Œä¸æ˜¯ç›´æ¥æ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Šï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥å¯¹æ¸²æŸ“ç»“æœè¿›è¡ŒåæœŸå¤„ç†ï¼Œå¦‚æ·»åŠ æ»¤é•œã€åå°„æŠ˜å°„ã€å½“æˆçº¹ç†åº”ç”¨åœ¨å‡ ä½•ä½“ç­‰ç­‰ã€‚ åœ¨three.jsä¸­ï¼Œä¸€å…±æœ‰3ç§ç¦»å±æ¸²æŸ“çš„ç±»ï¼š WebGLMultisampleRenderTarget WebGLCubeRenderTarget WebGLRenderTarget åœ¨æ™®é€šçš„æ¸²æŸ“ä¸­ï¼Œæˆ‘ä»¬æŠŠsceneåœºæ™¯ä¿å­˜åˆ°canvasç”»å¸ƒçš„é»˜è®¤å¸§ç¼“å†²åŒºï¼Œä¹Ÿå°±æ˜¯ç›´æ¥æ¸²æŸ“åˆ°Canvasç”»å¸ƒä¸Šï¼Œå®ƒæ˜¯æ²¡æœ‰å…·ä½“çš„æ¸²æŸ“ç›®æ ‡çš„ï¼š 1renderer.render(scene, camera); è€Œç¦»å±æ¸²æŸ“åˆ™ä¸ä¼šç›´æ¥æ¸²æŸ“åˆ°ç”»å¸ƒä¸Šå»ï¼Œå®ƒè®¾ç½®äº†å…·ä½“çš„æ¸²æŸ“ç›®æ ‡ï¼ˆä¹Ÿå°±æ˜¯Targetå•è¯çš„å«ä¹‰ï¼‰ï¼›å°†æ¸²æŸ“ç»“æœå­˜å‚¨åˆ°ç›®æ ‡å¯¹è±¡ï¼ˆæ¯”å¦‚WebGLRenderTargetï¼‰ï¼Œé€šè¿‡ç›®æ ‡å¯¹è±¡çš„çº¹ç†å±æ€§.textureï¼Œå¯ä»¥æ‹¿åˆ°æ¸²æŸ“ç»“æœçš„åƒç´ ã€‚ 1234const target = new WebGLRenderTarget(512, 512);renderer.setRenderTarget(target);renderer.render(scene, camera); WebGLCubeRenderTargetçš„ç”¨æ³•ä¹Ÿå·®ä¸å¤šï¼Œä¸è¿‡å®ƒä¸»è¦ç”¨äºåˆ›å»ºç«‹æ–¹ä½“è´´å›¾æ¸²æŸ“ç›®æ ‡ï¼›ä¸¤è€…çš„åŒºåˆ«ä¸»è¦åœ¨äºåˆ›å»ºçš„æ¸²æŸ“ç›®æ ‡çš„ç±»å‹å’Œç”¨é€”ï¼ŒWebGLCubeRenderTargetä¸“é—¨ç”¨äºåˆ›å»ºç«‹æ–¹ä½“è´´å›¾æ¸²æŸ“ç›®æ ‡ï¼Œä¹Ÿå°±æ˜¯ä¸‰ç»´çš„ç›®æ ‡ï¼›è€ŒWebGLRenderTargetåˆ™ç”¨äºåˆ›å»ºæ™®é€šçš„äºŒç»´æ¸²æŸ“ç›®æ ‡ï¼Œé€‚ç”¨äºå„ç§éœ€è¦æ¸²æŸ“åˆ°çº¹ç†çš„åœºæ™¯ï¼›ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹ä¸¤è€…çš„å…·ä½“ç”¨æ³•ã€‚ WebGLCubeRenderTarget æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹WebGLCubeRenderTargetçš„ç”¨æ³•ï¼Œå®ƒä¸€èˆ¬ç»“åˆCubeCameraä½¿ç”¨ï¼›æˆ‘ä»¬çŸ¥é“åœ¨three.jsä¸­é€è§†ç›¸æœºPerspectiveCameraæ˜¯æ¨¡æ‹Ÿäº†ç°å®ä¸­äººçœ¼çš„è§†è§’ï¼Œå…¶å¯è§†ä½“æ˜¯ä¸€ä¸ªé”¥ä½“ã€‚ è€ŒCubeCameraç«‹æ–¹ä½“ç›¸æœºä¸»è¦ç”¨äºæ¸²æŸ“ç‰©ä½“å‘¨å›´çš„ç¯å¢ƒè´´å›¾ï¼›å®ƒä»¥ç›¸æœºçš„ä½ç½®ä¸ºä¸­å¿ƒï¼Œä»å…­ä¸ªæ–¹å‘ï¼ˆå‰ã€åã€å·¦ã€å³ã€ä¸Šã€ä¸‹ï¼‰æ‹æ‘„åœºæ™¯ï¼Œå®ç°åå°„å’ŒæŠ˜å°„æ•ˆæœï¼›ç›¸å½“äºåœ¨6ä¸ªæ–¹å‘ä¸Šåˆ›å»ºäº†é€è§†ç›¸æœºï¼Œç„¶åå¹¶å°†æ‹æ‘„çš„åœºæ™¯æ¸²æŸ“åˆ°ä¸€ä¸ªWebGLCubeRenderTargetä¸Šã€‚ CubeCameraç«‹æ–¹ä½“ç›¸æœºçš„è¿™ç§ç‰¹æ€§ä½¿å¾—åœ¨å®ç°è´Ÿè´£çš„å…‰ç…§å’Œåå°„æ•ˆæœæ—¶éå¸¸æœ‰ç”¨ï¼›å®ƒçš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œä¸ºäº†åå°„æ•ˆæœï¼Œæˆ‘ä»¬ç»™åœºæ™¯ä¸€ä¸ªhdrè´´å›¾ã€‚ 123456789new RGBELoader().load( &quot;/textures/equirectangular/quarry_01_1k.hdr&quot;, (texture) =&gt; &#123; texture.mapping = EquirectangularReflectionMapping; this.scene.background = texture; this.scene.environment = texture; &#125;); ç„¶åæˆ‘ä»¬æ„å»ºWebGLCubeRenderTargetå®ä¾‹ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªsizeå’Œçº¹ç†å‚æ•°çš„å¯¹è±¡ï¼›sizeè¶Šå¤§ï¼Œçº¹ç†ä¹Ÿå°±è¶Šæ¸…æ™°ï¼Œä¸è¿‡ä¹Ÿæ›´åŠ è€—è´¹æ€§èƒ½ï¼›ä¸€èˆ¬æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªé€‚ä¸­çš„æ•°å€¼ï¼Œ256æˆ–è€…512å³å¯ï¼š 1234567const cubeRenderTarget = new WebGLCubeRenderTarget(256, &#123; format: RGBAFormat, // æ˜¯å¦ä¸ºçº¹ç†ç”Ÿæˆmipmap generateMipmaps: true, // å½“ä¸€ä¸ªçº¹ç´ è¦†ç›–å°äºä¸€ä¸ªåƒç´ æ—¶ï¼Œè´´å›¾å°†å¦‚ä½•é‡‡æ ·ã€‚ minFilter: LinearMipmapLinearFilter,&#125;); æ¥ç€å°±æ˜¯åˆ›å»ºæˆ‘ä»¬çš„ç«‹æ–¹ä½“ç›¸æœºäº†ï¼Œå°†ä¸Šé¢åˆ›å»ºå¥½çš„cubeRenderTargetä¼ å…¥ï¼Œ 1const cubeCamera = new CubeCamera(1, 1000, cubeRenderTarget); æœ€åæ·»åŠ éœ€è¦åå°„çš„çƒä½“ï¼Œå°†cubeRenderTargetçš„çº¹ç†è´´åˆ°çƒä½“ä¸Šï¼š 123456789const material = new MeshStandardMaterial(&#123; envMap: cubeRenderTarget.texture, roughness: 0.05, metalness: 1,&#125;);const sphere = new Mesh(new SphereGeometry(10), material);sphere.position.set(0, 0, 0);this.scene.add(sphere); åœ¨æ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…éœ€è¦æ¸²æŸ“é€è§†ç›¸æœºï¼Œè¿˜è¦ä¸æ–­çš„æ›´æ–°ç«‹æ–¹ä½“ç›¸æœºï¼š 12345const render = ()=&gt;&#123; // ... this.cubeCamera.update(this.renderer, this.scene); this.renderer.render(this.scene, this.camera);&#125; æˆ‘ä»¬åœ¨åå°„çƒå‘¨å›´æ·»åŠ ä¸€ä¸ªæ—‹è½¬çš„çƒä½“ï¼Œå°±èƒ½çœ‹åˆ°é•œé¢åå°„çš„æ•ˆæœäº†ï¼š WebGLRenderTarget ç†è§£äº†ç«‹æ–¹ä½“ç›¸æœºçš„åŸç†å’Œç”¨æ³•ï¼Œç«‹æ–¹ä½“ç›¸æœºçš„æ¡ˆä¾‹æ˜¯ç¦»å±æ¸²æŸ“çš„ä¸€ä¸ªç®€å•åº”ç”¨ï¼›ç„¶åå°±æ˜¯æˆ‘ä»¬ç¦»å±æ¸²æŸ“çš„é‡è¦ç±»ï¼šWebGLRenderTargetï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„ç”¨æ³•ã€‚ å‡è®¾æˆ‘ä»¬ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œä¸€ä¸ªå­åœºæ™¯ä¸­æœ‰3ä¸ªç«‹æ–¹ä½“ï¼Œä¸åœçš„æ—‹è½¬ï¼›å¦å¤–æœ‰ä¸€ä¸ªçˆ¶åœºæ™¯ï¼Œæœ‰ä¸€ä¸ªå¹³é¢ï¼Œå‘ˆç°äº†å­åœºæ™¯ä¸­çš„åœºæ™¯ï¼Œæœ‰ç§åµŒå¥—ç”»ä¸­ç”»çš„æ„Ÿè§‰ã€‚ é¦–å…ˆæˆ‘ä»¬æ„å»ºä¸€ä¸ªå­åœºæ™¯ç±»ï¼ŒåŒæ—¶å°†ä¸‰ä¸ªç«‹æ–¹ä½“æ”¾åˆ°boxsæ•°ç»„ä¸­å»ï¼š 123456789101112131415161718192021222324// å­åœºæ™¯class SubScene &#123; constructor() &#123; this.scene = new Scene(); this.scene.background = new Color(0x00ffff); // ç›¸æœºaspectä¸º1 this.camera = new PerspectiveCamera(55, 1, 1, 20000) this.boxs = []; for (let i = 0; i &lt; 3; i++) &#123; const col = new Color().setHex(0xffffff * Math.random()); const box = new Mesh( new BoxGeometry(5, 5, 5), new MeshBasicMaterial(&#123; color: col, &#125;) ); box.position.set(10 * i, 0, 0); this.boxs.push(box); this.scene.add(box); &#125; &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œå­åœºæ™¯ä¸­ç›¸æœºçš„aspectè®¾ç½®ä¸º1ï¼Œå› æ­¤æˆ‘ä»¬åœ¨çˆ¶åœºæ™¯ä¸­æ¸²æŸ“ç‰©ä½“çš„å®½é«˜æ¯”ä¾‹ä¹Ÿä¸º1ï¼Œå¦åˆ™ä¼šå‡ºç°é”¯é½¿ã€‚ ç„¶åå°±æ˜¯æœ€é‡è¦çš„ä¸»åœºæ™¯é€»è¾‘ï¼Œæˆ‘ä»¬å…ˆæŠŠå­åœºæ™¯å’Œçˆ¶åœºæ™¯çš„sceneè¿›è¡Œåˆå§‹åŒ–ï¼Œ 1234567class Index &#123; constructor() &#123; this.subScene = new SubScene(); this.scene = new Scene(); this.camera = new PerspectiveCamera(55, window.innerWidth / window.innerHeight, 1, 20000); &#125;&#125; çˆ¶åœºæ™¯çš„ç›¸æœºæ¯”ä¾‹è¿˜æ˜¯ä¸ºé¡µé¢çš„å®½é«˜æ¯”ä¾‹ï¼šwindow.innerWidth / window.innerHeight ç„¶åæˆ‘ä»¬æ„å»ºä¸€ä¸ªWebGLRenderTargetå®ä¾‹ï¼Œç”¨æ¥å­˜å‚¨å­åœºæ™¯çš„æ¸²æŸ“ç»“æœï¼š 123456789class Index &#123; constructor() &#123; // .. this.rendererTarget = new WebGLRenderTarget( window.innerWidth, window.innerHeight ); &#125;&#125; å†æ˜¯ç”¨äºæ¸²æŸ“å­åœºæ™¯çš„å¹³é¢ç‰©ä½“ï¼Œå°†å…¶mapè®¾ç½®ä¸ºrendererTargetå¯¹è±¡ï¼Œå®ƒçš„å¤§å°æ¯”ä¾‹å’Œå­åœºæ™¯çš„ç›¸æœºæ¯”ä¾‹ä¿æŒä¸€è‡´ï¼š 1234567const material = new MeshPhongMaterial(&#123; map: this.rendererTarget.texture, side: DoubleSide,&#125;);const mesh = new Mesh(new PlaneGeometry(100, 100), material);this.scene.add(mesh); æœ€åæˆ‘ä»¬åœ¨æ¸²æŸ“å‡½æ•°ä¸­ï¼Œè®©å­åœºæ™¯çš„ä¸­çš„ç«‹æ–¹ä½“æ—‹è½¬èµ·æ¥ï¼š 1234567891011const render = () =&gt; &#123; this.subScene.boxs.map((item) =&gt; &#123; item.rotation.x += 0.01; item.rotation.y += 0.01; &#125;); this.renderer.setRenderTarget(this.rendererTarget); this.renderer.render(this.subScene.scene, this.subScene.camera); this.renderer.setRenderTarget(null); this.renderer.render(this.scene, this.camera);&#125; æ¸²æŸ“æ—¶ï¼Œå…ˆå°†æ¸²æŸ“å¯¹è±¡setRenderTargetè®¾ç½®æˆå­åœºæ™¯ï¼Œæ¸²æŸ“ç»“æœä¿å­˜åˆ°ç›®æ ‡å¯¹è±¡this.rendererTargetä¸­ï¼›æœ€åå°†æ¸²æŸ“ç›®æ ‡åˆ‡å›åˆ°ä¸»åœºæ™¯æ¥è¿›è¡Œæ¸²æŸ“ï¼›æœ€åæˆ‘ä»¬çœ‹åˆ°çš„æ•ˆæœå°±æ˜¯ä¸€ä¸ªå¹³é¢ç‰©ä½“ä¸­æ¸²æŸ“å¦ä¸€ä¸ªåœºæ™¯ï¼š å¤šåœºæ™¯åˆ‡æ¢ ç†è§£äº†ç¦»å±æ¸²æŸ“çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“çš„å¤šåœºæ™¯æ˜¯å¦‚ä½•æ¥åˆ‡æ¢çš„ï¼Œæˆ‘ä»¬å…ˆå¯¹æ•´ä½“çš„æ¶æ„æœ‰ä¸€å®šäº†è§£ï¼Œå…¶å®å¾ˆå¥½ç†è§£ï¼›å‡è®¾ç°åœ¨æˆ‘ä»¬éœ€è¦ä»åœºæ™¯1è¿‡æ¸¡åˆ°åœºæ™¯2ï¼Œå¼€å§‹æ—¶æ¸²æŸ“åœºæ™¯1ï¼Œåœ¨ä¸­é—´è¿‡æ¸¡æ—¶æ¸²æŸ“ä¸€ä¸ªè¿‡æ¸¡çš„åœºæ™¯ï¼Œè¿™ä¸ªè¿‡æ¸¡åœºæ™¯å°†åœºæ™¯1å’Œ2ç¦»å±å¯¹è±¡çš„çº¹ç†è¿›è¡Œæ¨¡ç³ŠåŒ–å±•ç¤ºï¼Œæœ€åè¿‡æ¸¡ç»“æŸæ¸²æŸ“åœºæ™¯2ã€‚ æˆ‘ä»¬å…ˆå°†åŸºç¡€çš„æ¸²æŸ“å™¨ã€ç›¸æœºã€è½¨é“æ§åˆ¶å™¨ç­‰åˆ›å»ºå¥½ï¼Œå¹¶ä¸”å®šä¹‰åœ¨å…¨å±€ï¼Œæ–¹ä¾¿åœ¨å…¶ä»–ç±»ä¸­ä½¿ç”¨ï¼š 12345678910111213141516let renderer, camera, controls;// ä¸»ç±»export default class Index &#123; constructor() &#123; renderer = initRenderer(&#123; physicallyCorrectLights: false, &#125;); camera = initCamera(new Vector3(0, 500, 2), 100, 1, 20000); controls = new OrbitControls(camera, renderer.domElement); controls.minDistance = 5; controls.maxDistance = 20; // å…¶ä»–é€»è¾‘ &#125;&#125; æ—¢ç„¶æ˜¯å¤šåœºæ™¯ï¼Œè¦ä½“ç°å‡ºå¤šçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬è¦æ„å»ºä¸¤ä¸ªåŠä»¥ä¸Šçš„åœºæ™¯åŠå¯¹åº”çš„ç¦»å±å¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬å•ç‹¬æ„å»ºä¸€ä¸ªåœºæ™¯ç±»ï¼Œç”¨æ¥æ‰¹é‡ç”Ÿäº§åœºæ™¯ï¼š 12345678910111213141516171819202122232425class SingleScene &#123; constructor(options) &#123; const &#123; url &#125; = options; this.scene = initScene(); const renderTargetParameters = &#123; minFilter: LinearFilter, magFilter: LinearFilter, stencilBuffer: false, &#125;; const sphereGeometry = new SphereGeometry(500, 50, 50); sphereGeometry.scale(-1, 1, 1); const sphereMaterial = new MeshBasicMaterial(&#123; map: new TextureLoader().load(url), &#125;); const sphere = new Mesh(sphereGeometry, sphereMaterial); this.scene.add(sphere); this.fbo = new WebGLRenderTarget(offsetWidth, offsetHeight, renderTargetParameters); &#125; render(rtt = false) &#123;&#125;&#125; è¿™é‡Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªåœºæ™¯ç±»SingleSceneï¼Œç”¨æ¥æ„å»ºå•ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬çš„åœºæ™¯æ¯”è¾ƒç®€å•ï¼Œåªæœ‰ä¸€ä¸ªå¤§å°ä¸º500å•ä½çš„çƒä½“ï¼Œçƒä½“è´´å›¾ä¸ºä¼ å…¥çš„urlï¼›åŒæ—¶å®ä¾‹åŒ–ä¸€ä¸ªWebGLRenderTargetç¦»å±å¯¹è±¡ï¼Œç”¨æ¥å­˜å‚¨æ¸²æŸ“ç»“æœã€‚ åœ¨æ¸²æŸ“SingleSceneåœºæ™¯æ—¶ï¼Œç”±äºæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæ—¶é—´ç‚¹åˆ‡æ¢å°†this.sceneæ¸²æŸ“åˆ°ç¦»å±å¯¹è±¡è¿˜æ˜¯ç›´æ¥åˆ°Canvasç”»å¸ƒï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¼ å…¥ä¸€ä¸ªå‚æ•°rttï¼Œå¦‚æœrttä¸ºtrueï¼Œåˆ™å°†this.sceneæ¸²æŸ“åˆ°ç¦»å±å¯¹è±¡ï¼Œå¦åˆ™å°†ç¦»å±å¯¹è±¡æ¸²æŸ“åˆ°rendererã€‚ 123456789101112class SingleScene &#123; render(rtt = false) &#123; if (rtt) &#123; renderer.setRenderTarget(this.fbo); renderer.clear(); renderer.render(this.scene, camera); &#125; else &#123; renderer.setRenderTarget(null); renderer.render(this.scene, camera); &#125; &#125;&#125; SingleSceneåœºæ™¯ç±»åŸºæœ¬å°±å®Œæˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸»ç±»ä¸­åˆ›å»ºå¤šä¸ªåœºæ™¯ï¼š 1234567export default class Index &#123; constructor() &#123; this.scene1 = new SingleScene(&#123; url: &quot;XXX-1.jpg&quot; &#125;); this.scene2 = new SingleScene(&#123; url: &quot;XXX-2.jpg&quot; &#125;); // åˆ›å»ºå…¶ä»–åœºæ™¯ &#125;&#125; åœºæ™¯æ¸²æŸ“å™¨ ä¸‹é¢å°±æ˜¯æœ€æ ¸å¿ƒçš„åœºæ™¯æ¸²æŸ“å™¨çš„åŠŸèƒ½ï¼Œç”¨äºåœ¨ä¸¤ä¸ªåœºæ™¯ä¸­è¿›è¡Œåˆ‡æ¢ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰åœºæ™¯ä»¥åŠè¿‡æ¸¡åœºæ™¯çš„æ¸²æŸ“éƒ½æ”¾åˆ°è¿™ä¸ªæ¸²æŸ“å™¨ä¸­æ‰§è¡Œï¼›é¦–å…ˆåˆå§‹åŒ–æ—¶æœ‰ä¸€ä¸ªèµ·å§‹çš„åœºæ™¯ï¼Œæˆ‘ä»¬å°†éœ€è¦çš„å‚æ•°å®šä¹‰å¥½ï¼š 12345678910111213141516171819202122232425function TransitionScene(sceneStart) &#123; // è¿‡æ¸¡çš„å‚æ•° const transitionParams = &#123; // è¿‡æ¸¡è¿›ç¨‹ï¼Œä»0-1 transition: 0, // è¿‡æ¸¡çº¹ç† texture: undefined, // æ˜¯å¦ä½¿ç”¨çº¹ç† useTexture: false, // è¿‡æ¸¡é€Ÿåº¦ transitionSpeed: 0.05, // æ˜¯å¦å¼€å§‹åŠ¨ç”» animate: false, &#125;; // è¿‡æ¸¡å¼€å§‹å‰çš„åœºæ™¯ this.sceneFrom = sceneStart; // è¿‡æ¸¡ç»“æŸåçš„åœºæ™¯ this.sceneTo = undefined; // åˆ‡æ¢ä¸‹ä¸€ä¸ªåœºæ™¯ this.update = (sceneTo, params) =&gt; &#123;&#125; // æ‰€æœ‰çš„åœºæ™¯æ¸²æŸ“ this.render = () =&gt; &#123;&#125;&#125; è¿™ä¸ªTransitionSceneçš„ä½œç”¨å°±æ˜¯åˆå§‹åŒ–çš„æ—¶å€™ä¿å­˜äº†ä¸€ä¸ªå¼€å§‹çš„åœºæ™¯sceneFromï¼Œå½“åˆ‡æ¢åœºæ™¯æ—¶è°ƒç”¨updateå‡½æ•°è¿‡æ¸¡åˆ°ä¸‹ä¸€ä¸ªåœºæ™¯sceneToï¼›åœ¨TransitionSceneä¸­ï¼Œæˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªè¿‡æ¸¡åœºæ™¯ï¼Œè¿™ä¸ªè¿‡æ¸¡åœºæ™¯ä½¿ç”¨äº†æ­£äº¤ç›¸æœºOrthographicCameraä»¥åŠé“ºæ»¡æ•´ä¸ªç›¸æœºè§†è§’çš„å¹³é¢PlaneGeometryï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061function TransitionScene(sceneStart) &#123; // è¿‡æ¸¡çš„åœºæ™¯ this.scene = new Scene(); this.scene.background = new Color(0x000000); this.camera = new OrthographicCamera(offsetWidth / -2, offsetWidth / 2, offsetHeight / 2, offsetHeight / -2, -10, 10); this.material = new ShaderMaterial(&#123; uniforms: &#123; tDiffuse1: &#123; value: null, &#125;, tDiffuse2: &#123; value: null, &#125;, mixRatio: &#123; value: 0.0, &#125;, threshold: &#123; value: 0.1, &#125;, useTexture: &#123; value: false, &#125;, tMixTexture: &#123; value: transitionParams.texture, &#125;, &#125;, vertexShader: ` varying vec2 vUv; void main() &#123; vUv = vec2( uv.x, uv.y ); gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); &#125; `, fragmentShader: ` uniform float mixRatio; uniform sampler2D tDiffuse1; uniform sampler2D tDiffuse2; uniform sampler2D tMixTexture; uniform bool useTexture; uniform float threshold; varying vec2 vUv; void main() &#123; vec4 texel1 = texture2D( tDiffuse1, vUv ); vec4 texel2 = texture2D( tDiffuse2, vUv ); if (useTexture==true) &#123; vec4 transitionTexel = texture2D( tMixTexture, vUv ); float r = mixRatio * (1.0 + threshold * 2.0) - threshold; float mixf=clamp((transitionTexel.r - r)*(1.0/threshold), 0.0, 1.0); gl_FragColor = mix( texel1, texel2, mixf ); &#125; else &#123; gl_FragColor = mix( texel2, texel1, mixRatio ); &#125; &#125; `, &#125;); const geometry = new PlaneGeometry(offsetWidth, offsetHeight); this.quad = new Mesh(geometry, this.material); this.scene.add(this.quad);&#125; è¿™ä¸ªçš„ç€è‰²å™¨ä¸»è¦ä½¿ç”¨ä¸‰ä¸ªå‚æ•°tDiffuse1/tDiffuse2å’ŒmixRatioï¼Œä»åå­—æˆ‘ä»¬ä¹Ÿèƒ½çŒœå‡ºæ¥ï¼ŒtDiffuse1/tDiffuse2æ˜¯ä¸¤ä¸ªåœºæ™¯ï¼ŒmixRatioæ˜¯ä¸¤ä¸ªåœºæ™¯çš„æ··åˆç¨‹åº¦ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨è¿‡æ¸¡æ—¶æ”¹å˜è¿™ä¸ªmixRatioçš„æ•°å€¼å°±èƒ½å‘ˆç°å‡ºä¸€ä¸ªæ¸å˜çš„æ•ˆæœã€‚ å› æ­¤æˆ‘ä»¬ç»§ç»­å®Œå–„updateå‡½æ•°ï¼Œåˆ‡æ¢æ—¶å°†æ–°çš„åœºæ™¯ä¿å­˜åˆ°sceneToï¼ŒåŒæ—¶å°†mixRatioè®¾ä¸º0ï¼š 1234567891011121314151617181920function TransitionScene() &#123; this.update = (sceneTo, params) =&gt; &#123; // åŠ¨ç”»æ­£åœ¨æ‰§è¡Œä¸­ if (transitionParams.animate) return false; const &#123; transitionSpeed = 0.05 &#125; = params; this.sceneTo = sceneTo; transitionParams.transition = 0; transitionParams.transitionSpeed = transitionSpeed; transitionParams.animate = true; this.material.uniforms.tDiffuse1.value = this.sceneTo.fbo.texture; this.material.uniforms.tDiffuse2.value = this.sceneFrom.fbo.texture; this.material.uniforms.threshold.value = 0.1; this.material.uniforms.mixRatio.value = 0.0; return true; &#125;;&#125; è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†fboç¦»å±å¯¹è±¡çš„textureçº¹ç†ï¼Œå°†å…¶èµ‹å€¼åˆ°tDiffuse1å’ŒtDiffuse2ï¼Œåœ¨ç€è‰²å™¨ä¸­å°±å¯ä»¥é€šè¿‡mixRatioæ•°å€¼å°†ä¸¤ä¸ªåœºæ™¯è¿›è¡Œæ··åˆäº†ã€‚ åœ¨TransitionSceneæ¸²æŸ“æ—¶ï¼Œæˆ‘ä»¬æ ¹æ®transitionParams.transitionå‚æ•°åˆ¤æ–­æ¸²æŸ“æ—¶æ®µï¼Œ0æ¸²æŸ“å¼€å§‹åœºæ™¯sceneFromï¼Œ1æ¸²æŸ“ç»“æŸåœºæ™¯sceneToï¼Œä¸­é—´åˆ™æ˜¯æ¸²æŸ“è¿‡æ¸¡åœºæ™¯this.sceneï¼š 123456789101112131415161718192021function TransitionScene() &#123; this.render = () =&gt; &#123; if (transitionParams.transition === 0) &#123; isDef(this.sceneFrom) &amp;&amp; this.sceneFrom.render(); &#125; else if (transitionParams.transition &gt;= 1) &#123; isDef(this.sceneTo) &amp;&amp; this.sceneTo.render(); transitionParams.animate = false; &#125; else &#123; isDef(this.sceneFrom) &amp;&amp; this.sceneFrom.render(true); isDef(this.sceneTo) &amp;&amp; this.sceneTo.render(true); renderer.setRenderTarget(null); renderer.clear(); renderer.render(this.scene, this.camera); &#125; if (transitionParams.animate &amp;&amp; transitionParams.transition &lt;= 1) &#123; // åŠ¨ç”»è¿˜åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ transitionParams.transition = transitionParams.transition + transitionParams.transitionSpeed; this.material.uniforms.mixRatio.value = transitionParams.transition; &#125; &#125;&#125; åœ¨è¿‡æ¸¡æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬å°†transitionSpeedä¸æ–­åŠ åˆ°transitionä¸Šï¼Œä¹Ÿå°±æ˜¯æ§åˆ¶æ··åˆåº¦mixRatioï¼›åŒæ—¶è°ƒç”¨sceneFrom.renderå’ŒsceneTo.renderï¼›è¿™ä¸¤ä¸ªrenderå¯ä¸æ˜¯ç›´æ¥æ¸²æŸ“ï¼Œè€Œå°†ç¦»å±æ¸²æŸ“åˆ°ä¸¤ä¸ªfboä¸­ï¼›æœ€åå†æ¸²æŸ“è¿‡æ¸¡åœºæ™¯this.sceneï¼Œæ­¤æ—¶this.sceneä¸­çš„ç€è‰²å™¨å°±å¯ä»¥æ‹¿åˆ°ä¸¤ä¸ªfboçš„çº¹ç†è¿›è¡Œæ··åˆã€‚ æœ€åï¼Œæˆ‘ä»¬åœ¨åœºæ™¯åˆ‡æ¢å®Œæˆåï¼Œéœ€è¦æŠŠåˆ‡æ¢åçš„sceneToåœºæ™¯ï¼Œèµ‹å€¼ç»™åˆ‡æ¢å‰çš„sceneFromåœºæ™¯ï¼Œä¸ºä¸‹ä¸€æ¬¡çš„åœºæ™¯åˆ‡æ¢åšå‡†å¤‡ï¼š 12345678910111213function TransitionScene() &#123; // ... this.render = () =&gt; &#123; // ... if (transitionParams.transition &gt;= 1) &#123; // åˆ‡æ¢å®Œæˆ setTimeout(() =&gt; &#123; this.sceneFrom = this.sceneTo; transitionParams.transition = 0; &#125;, 10); &#125; &#125;&#125; è¿™æ ·æˆ‘ä»¬çš„è¿‡æ¸¡åˆ‡æ¢å‡½æ•°åŸºæœ¬å°±å®Œæˆäº†ï¼Œæˆ‘ä»¬åœ¨ä¸»ç±»ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå¼€å§‹ä¼ å…¥ç¬¬ä¸€ä¸ªåœºæ™¯scene1ï¼š 1234567891011class Index &#123; constructor() &#123; // ... this.transition = new TransitionScene(this.scene1); this.render(); &#125; render() &#123; this.transition.render(); requestAnimationFrame(this.render.bind(this)); &#125;&#125; æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ‡æ¢çš„æ•ˆæœï¼š è¿‡æ¸¡çº¹ç†å›¾æ¡ˆ åœ¨ä¸Šé¢çš„ç€è‰²å™¨ä»£ç ä¸­æˆ‘ä»¬å‘ç°æœ‰useTextureå’ŒtMixTextureä¸¤ä¸ªå‚æ•°ï¼Œå¯ä»¥åœ¨åˆ‡æ¢æ—¶å‘ˆç°è¿‡æ¸¡çš„çº¹ç†å›¾æ¡ˆæ•ˆæœï¼›æˆ‘ä»¬é¦–å…ˆåœ¨ä¸»ç±»ä¸­åŠ è½½å…­å¼ çº¹ç†çš„pngå›¾ç‰‡ï¼ˆæ‰€æœ‰å›¾ç‰‡ç¬”è€…å·²ç»æ•´ç†å¥½ï¼Œåœ¨æ–‡æœ«é¢†å–ï¼‰ï¼š 1234567891011121314151617class Index &#123; constructor() &#123; this.textures = []; const loader = new TextureLoader(); for (let i = 0; i &lt; 6; i++) &#123; this.textures.push(loader.load(`/images/textures/transition/transition$&#123;i + 1&#125;.png`)); &#125; this.transitionParams = &#123; useTexture: false, //ä¸º false é»˜è®¤é‡‡ç”¨æ¸å˜å¼ transition: 0, transitionSpeed: 0.05, texture: this.textures[0], animate: false, &#125;; &#125;&#125; åœ¨ä¸»ç±»ä¸­ç‚¹å‡»åˆ‡æ¢åœºæ™¯æ—¶ï¼Œéšæœºé€‰æ‹©texturesä¸­çš„ä¸€ä¸ªçº¹ç†å›¾ç‰‡ï¼Œé€šè¿‡transitionParamså‚æ•°ä¼ å…¥updateå‡½æ•°ï¼š 1234567class Index &#123; // ç‚¹å‡»åˆ‡æ¢åœºæ™¯ changeScene(index) &#123; this.transitionParams.texture = this.textures[parseInt(Math.random() * 6)]; this.transition.update(toScene, this.transitionParams); &#125;&#125; æˆ‘ä»¬æ”¹é€ updateå‡½æ•°ï¼Œè§£æ„æ¥æ”¶å‚æ•°paramsä¸­çš„çº¹ç†ï¼Œä¼ å…¥ç€è‰²å™¨çš„uniforms.tMixTextureï¼š 1234567891011121314function TransitionScene() &#123; this.update = (sceneTo, params) =&gt; &#123; const &#123; texture, useTexture = false, &#125; = params; transitionParams.texture = texture; transitionParams.useTexture = useTexture; this.material.uniforms.tDiffuse1.value = this.sceneTo.fbo.texture; this.material.uniforms.tDiffuse2.value = this.sceneFrom.fbo.texture; this.material.uniforms.tMixTexture.value = texture; this.material.uniforms.useTexture.value = useTexture; // ... &#125;&#125; è¿™æ ·ï¼Œåœ¨åŠ¨ç”»æ‰§è¡Œæ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä¸æ­¢æ¸å˜çš„æ•ˆæœï¼Œè¿˜æœ‰çº¹ç†å›¾æ¡ˆçš„æ¸å˜ã€‚ åœºæ™¯åˆ—è¡¨é€‰æ‹© æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æ·±å…¥ç†è§£è‡ªå®šä¹‰æŒ‡ä»¤ClickOutsideä¸­è¯´åˆ°ï¼Œç‚¹å‡»æ—¶éœ€è¦é¢å¤–è¿‡æ»¤å…¶ä»–çš„èŠ‚ç‚¹çš„æƒ…å†µï¼›æˆ‘ä»¬å…ˆæ¥ç®€å•çœ‹ä¸‹é¡µé¢ç»“æ„ï¼š 12345678910111213141516171819202122&lt;template&gt; &lt;div&gt; &lt;div :class=&quot;[&#x27;select-scene&#x27;]&quot; @click=&quot;clickToggleSelectScene&quot;&gt; &lt;div&gt;é€‰æ‹©åœºæ™¯&lt;/div&gt; &lt;/div&gt; &lt;div :class=&quot;[&#x27;scene-list_box&#x27;, isShowSceneList ? &#x27;show&#x27; : &#x27;&#x27;]&quot;&gt; &lt;div class=&quot;scene-item&quot; v-for=&quot;(item, index) in sceneList&quot;&gt; &lt;img :src=&quot;item.image&quot; alt=&quot;&quot; /&gt; &lt;div class=&quot;scene-item_desc&quot;&gt;&#123;&#123; item.name &#125;&#125;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;const isShowSceneList = ref(false);// ç‚¹å‡»å±•ç¤ºæˆ–éšè—åœºæ™¯åˆ—è¡¨const clickToggleSelectScene = () =&gt; &#123; isShowSceneList.value = !isShowSceneList.value;&#125;;&lt;/script&gt; é¡µé¢å¾ˆç®€å•ï¼Œä¸»è¦å°±æ˜¯ä¸€ä¸ªé€‰æ‹©åœºæ™¯æŒ‰é’®.select-sceneå’Œéšè—çš„åœºæ™¯åˆ—è¡¨çš„div.scene-list_boxï¼Œå½“ç‚¹å‡»é€‰æ‹©åœºæ™¯æ—¶ï¼Œè®¾ç½®isShowSceneListä¸ºtrueï¼Œå°±å¯ä»¥æ˜¾ç¤º.scene-list_boxã€‚ ä½†æ˜¯æˆ‘ä»¬è®¾æƒ³ä¸€ä¸‹ï¼Œå½“ç‚¹å‡».scene-list_boxå¤–é¢æ—¶ï¼Œä¹Ÿèƒ½å¤Ÿéšè—.scene-list_boxï¼Œå› æ­¤å°±éœ€è¦ç”¨åˆ°ClickOutsideï¼›æˆ‘ä»¬ç»™.scene-list_boxç»‘å®šç‚¹å‡»å¤–å±‚çš„è§¦å‘äº‹ä»¶ï¼š 12345678910&lt;template&gt;&lt;div :class=&quot;[&#x27;scene-list_box&#x27;, isShowSceneList ? &#x27;show&#x27; : &#x27;&#x27;]&quot; v-click-outside=&quot;hideSelectScene&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;// éšè—åœºæ™¯åˆ—è¡¨const hideSelectScene = () =&gt; &#123; isShowSceneList.value = false;&#125;;&lt;/script&gt; è¿™æ ·å°±å¾ˆå°´å°¬ï¼Œæˆ‘ä»¬ç‚¹å‡»é€‰æ‹©åœºæ™¯æŒ‰é’®.select-sceneæ—¶ï¼Œæ—¢è§¦å‘äº†clickToggleSelectSceneå‡½æ•°ï¼ŒåŒæ—¶åˆè§¦å‘äº†hideSelectSceneå‡½æ•°ï¼Œå¯¼è‡´æˆ‘ä»¬çš„.scene-list_boxå¹¶ä¸èƒ½å¾ˆå¥½çš„å…³é—­ã€‚ æˆ‘ä»¬å°±éœ€è¦å°†é€‰æ‹©åœºæ™¯æŒ‰é’®æ·»åŠ åˆ°è¿‡æ»¤çš„excludesæ•°ç»„ï¼Œç„¶åä¼ å…¥ClickOutsideï¼š 123456789101112&lt;template&gt;&lt;div :class=&quot;[&#x27;scene-list_box&#x27;, isShowSceneList ? &#x27;show&#x27; : &#x27;&#x27;]&quot; v-click-outside:[excludes]=&quot;hideSelectScene&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;const excludes = ref([]);onMounted(() =&gt; &#123; excludes.value.push(document.querySelector(&quot;.select-scene&quot;));&#125;);&lt;/script&gt; æ€»ç»“ æœ¬æ–‡æˆ‘ä»¬é€šè¿‡å¯¹ç¦»å±æ¸²æŸ“æ¦‚å¿µçš„äº†è§£ï¼Œæ·±å…¥ç†è§£äº†WebGLRenderTargetç±»çš„ç”¨æ³•ï¼Œæœ€åå®ç°äº†åœºæ™¯åˆ‡æ¢çš„è¿‡æ¸¡æ•ˆæœï¼›åœ¨ç¼–å†™é¡µé¢ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ç»“åˆä¸Šä¸€ç¯‡æ–‡ç« å­¦ä¹ çš„ClickOutsideæŒ‡ä»¤çš„ç”¨æ³•ï¼Œå®Œæˆäº†é€‰æ‹©åœºæ™¯çš„åŠŸèƒ½ã€‚ æœ¬æ–‡çš„å…¨æ™¯è¿‡æ¸¡æ•ˆæœå¯ä»¥ç‚¹å‡»é“¾æ¥æŸ¥çœ‹ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€Threejsåœºæ™¯è¿‡æ¸¡ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"æ·±å…¥ç†è§£Vue3è‡ªå®šä¹‰æŒ‡ä»¤ClickOutsideçš„å®ç°","date":"2024-04-08T04:00:00.000Z","path":"2024/04/08/Vue-Click-Outside.html","text":"å½“æˆ‘ä»¬åœ¨å¼€å‘ä¸€äº›ç»„ä»¶çš„æ—¶å€™ï¼Œæ¯”å¦‚ä¸‹æ‹‰æ¡†æˆ–è€…ä¸€äº›æ¨¡æ€æ¡†ç­‰ç»„ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç‚¹å‡»å…ƒç´ ä¹‹å¤–çš„æ—¶å€™å°±èƒ½å¤ŸæŠŠç›¸åº”çš„å…ƒç´ æ”¶èµ·æ¥æˆ–è€…éšè—ï¼›è¿™çœ‹ä¼¼ååˆ†ç®€å•çš„éœ€æ±‚ï¼Œå…¶å®éšè—ç€å¾ˆå¤šçš„åˆ¤æ–­é€»è¾‘å’Œä»£ç æŠ€å·§åœ¨é‡Œé¢ï¼Œç¬”è€…å°±ç»“åˆè¿™å‡ å¤©é˜…è¯»element-pluså’Œnaive-ui-adminæºç çš„ç»éªŒï¼Œæ€»ç»“åˆ†äº«è‡ªå·±çš„ä¸€äº›ç»éªŒå’Œæƒ³æ³•ã€‚ åœ¨å­¦ä¹ æºç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¿›è¡Œé“ºå«ä¸€ä¸‹ï¼Œäº†è§£ä¸€ä¸‹ç®€å•å‡ ä¸ªå·¥å…·å‡½æ•°çš„ä½¿ç”¨ï¼Œæ–¹ä¾¿åç»­ç†è§£ã€‚ æœ¬æ–‡åº”è¯¥æ˜¯å…¨ç½‘æœ€æ·±å…¥çš„å¯¹è‡ªå®šä¹‰æŒ‡ä»¤ClickOutsideçš„è§£è¯»ï¼Œæ–‡ç« å†…å®¹è¾ƒé•¿ï¼Œè§‰å¾—æœ‰æ‰€æ”¶è·çš„è®°å¾—ç‚¹èµå…³æ³¨æ”¶è—ï¼Œä¸€é”®ä¸‰è¿ã€‚ å·¥å…·å‡½æ•° é¦–å…ˆæ˜¯onå’Œoffå‡½æ•°ï¼Œåœ¨naive-ui-adminä¸­ç”¨æ¥ç»™å‡½æ•°æ³¨å†Œç»‘å®šå’Œè§£é™¤ç»‘å®šäº‹ä»¶ 12345678910111213141516171819export function on( element: Element | HTMLElement | Document | Window, event: string, handler: EventListenerOrEventListenerObject): void &#123; if (element &amp;&amp; event &amp;&amp; handler) &#123; element.addEventListener(event, handler, false); &#125;&#125;export function off( element: Element | HTMLElement | Document | Window, event: string, handler: Fn): void &#123; if (element &amp;&amp; event &amp;&amp; handler) &#123; element.removeEventListener(event, handler, false); &#125;&#125; æ¯”å¦‚åœ¨ç»™å…ƒç´ ç»‘å®šäº‹ä»¶æ—¶ï¼Œä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ï¼Œçœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€æ´ï¼š 12345const domClick = (ev) =&gt; &#123; // ...&#125;on(el, &#x27;click&#x27;, domClick)off(el, &#x27;click&#x27;, domClick) è¿™é‡Œæ‰©å±•ä¸€ä¸‹ï¼Œåˆ©ç”¨onå’Œoffå‡½æ•°ç»„åˆï¼Œæˆ‘ä»¬è¿˜èƒ½æ‰©å±•å‡ºonceå‡½æ•°ï¼Œç”¨æ¥æ³¨å†Œä¸€æ¬¡æ€§çš„äº‹ä»¶ï¼š 123456789export function once(el: HTMLElement, event: string, fn: EventListener): void &#123; const listener = function (this: any, ...args: unknown[]) &#123; if (fn) &#123; fn.apply(this, args); &#125; off(el, event, listener); &#125;; on(el, event, listener);&#125; åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ç›´æ¥å°†fnå‡½æ•°ç»‘å®šåˆ°å…ƒç´ ä¸Šï¼Œè€Œæ˜¯å·§å¦™çš„åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰äº†listenerå‡½æ•°ç»‘å®šåœ¨elå…ƒç´ ä¸Šï¼Œå†åœ¨listenerå‡½æ•°è§¦å‘åï¼Œåœ¨å…¶å†…éƒ¨æ‰§è¡Œä¸€æ¬¡fnå‡½æ•°åå†è¿›è¡Œè§£ç»‘æ“ä½œã€‚ è‡ªå®šä¹‰æŒ‡ä»¤ åœ¨vueä¸­æœ‰å¾ˆå¤šv-ifã€v-showã€v-modelç­‰å¸¸ç”¨å†…ç½®çš„æŒ‡ä»¤å¯ä»¥ä½¿ç”¨ï¼ŒåŒæ—¶æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çµæ´»çš„å°è£…è‡ªå·±çš„æŒ‡ä»¤ï¼Œæ¥æ»¡è¶³ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚å’Œåœºæ™¯ï¼›æˆ‘ä»¬åœ¨setupä¸€æ–‡ä¸­ä»‹ç»äº†å¦‚ä½•å®šä¹‰å’Œå¼•å…¥å®šä¹‰å¥½çš„æŒ‡ä»¤ï¼ŒæŒ‡ä»¤å¯¹è±¡ä¸­æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä¸ƒä¸ªå£°æ˜å‘¨æœŸçš„é’©å­å‡½æ•°ï¼š createdï¼šåœ¨ç»‘å®šå…ƒç´ çš„ attribute å‰ beforeMountï¼šåœ¨å…ƒç´ è¢«æ’å…¥åˆ° DOM å‰è°ƒç”¨ mountedï¼šç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶åŠå­èŠ‚ç‚¹éƒ½æŒ‚è½½å®Œæˆåè°ƒç”¨ beforeUpdateï¼šç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ›´æ–°å‰è°ƒç”¨ updatedï¼šç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶æ‰€æœ‰åŠå­èŠ‚ç‚¹æ›´æ–°å®Œæˆå beforeUnmountï¼šç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶å¸è½½å‰è°ƒç”¨ unmountedï¼šç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶å¸è½½åè°ƒç”¨ æ³¨æ„æ²¡æœ‰beforeCreateå‡½æ•°ã€‚ é’©å­å‡½æ•°çœ‹ä¼¼æ¯”è¾ƒå¤šï¼Œå…¶å®å¸¸è§å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯mountedã€updatedå’ŒbeforeUnmountï¼Œåœ¨ç”Ÿå‘½å‘¨æœŸå¼€å§‹ã€ä¸­é—´å’Œç»“æŸæ—¶åšä¸€äº›å¤„ç†ï¼Œé’©å­å‡½æ•°å¸¸è§çš„å†™æ³•å¦‚ä¸‹ï¼š 12345const myDirective = &#123; mounted(el, binding, vnode, prevVnode) &#123; // ... &#125;,&#125; è¿™é‡Œæˆ‘ä»¬é‡ç‚¹çœ‹ä¸‹é’©å­å‡½æ•°ä¼ å…¥çš„ä¸¤ä¸ªå‚æ•°ï¼šelå’Œbindingï¼›elå¾ˆæ˜æ˜¾å°±æ˜¯ç»‘å®šæŒ‡ä»¤çš„domå…ƒç´ ï¼Œè€Œbindingå°±æ¯”è¾ƒæœ‰è¶£äº†ï¼Œå®ƒé‡Œé¢å«æœ‰å„ç§ç»‘å®šçš„æ•°æ®ï¼Œå®ƒæœ¬èº«æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒæŠŠå®ƒæ‰“å°å‡ºæ¥ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒæœ‰ä»¥ä¸‹å±æ€§ï¼š valueï¼švalueå°±æ˜¯æˆ‘ä»¬ä¼ å…¥åˆ°æŒ‡ä»¤ä¸­çš„æ•°æ®ã€‚ argï¼šä¼ é€’ç»™æŒ‡ä»¤çš„å‚æ•°ã€‚ dirï¼šæŒ‡ä»¤å¯¹è±¡ã€‚ instanceï¼šä½¿ç”¨æŒ‡ä»¤çš„ç»„ä»¶å¯¹è±¡ï¼Œédomã€‚ modifiersï¼šç”±ä¿®é¥°ç¬¦æ„æˆçš„å¯¹è±¡ã€‚ oldValueï¼šä¹‹å‰çš„å€¼ã€‚ æ¯”å¦‚æˆ‘ä»¬å†™äº†ä¸€ä¸ªè‡ªå®šä¹‰æŒ‡ä»¤ï¼š 1&lt;div v-click-outside:foo.stop.front=&quot;&#x27;hello&#x27;&quot;&gt;&lt;/div&gt; é‚£ä¹ˆæˆ‘ä»¬æ‰“å°å‡ºæ¥çš„bindingå¯¹è±¡å°±ä¼šåƒæ˜¯è¿™æ ·çš„ï¼š 12345678&#123; arg: &quot;foo&quot;, dir: &#123; mounted:f, beforeUnmount:f &#125;, instance: Proxy(Object), modifiers: &#123; stop: true, front: true &#125;, oldValue: undefined, value: &#x27;hello&#x27;&#125; é€šè¿‡è¿™ä¸ªæ¡ˆä¾‹æˆ‘ä»¬å°±èƒ½å¾ˆæ¸…æ¥šæ¯ä¸ªå‚æ•°çš„ä½œç”¨ï¼ŒoldValueä¸€èˆ¬åœ¨updateçš„æ—¶å€™ä¼šç”¨åˆ°ï¼›è€Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯valueå€¼äº†ï¼Œè¿™é‡Œçš„valueå€¼ä¸ä»…ä»…å±€é™äºæ™®é€šçš„æ•°å€¼ï¼Œè¿˜å¯ä»¥ä¼ å…¥å¯¹è±¡æˆ–è€…å‡½æ•°è¿›è¡Œæ‰§è¡Œï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢ä¼šçœ‹åˆ°ã€‚ åŠ¨æ€å‚æ•°æŒ‡ä»¤ è¿™é‡Œè¿˜è¦é¢å¤–ä»‹ç»ä¸€ä¸‹æŒ‡ä»¤çš„argå±æ€§ï¼Œåˆ©ç”¨è¿™ä¸ªæŒ‡ä»¤å±æ€§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç©å‡ºå¾ˆå¤šèŠ±æ ·æ¥ï¼›åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œv-click-outside:fooè¿™æ ·çš„å†™æ³•ï¼ŒæŒ‡ä»¤å‚æ•°argçš„å€¼å°±æ˜¯ç¡®å®šçš„fooã€‚ åœ¨vue3çš„å®˜æ–¹æ–‡æ¡£ä¸Šå°±ç»™å‡ºäº†è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªdivï¼Œé€šè¿‡å›ºå®šå¸ƒå±€fixçš„æ–¹å¼å›ºå®šå†é¡µé¢ä¸€ä¾§ï¼Œä½†æ˜¯éœ€è¦æ”¹å˜å®ƒçš„ä½ç½®ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡valueä¼ å…¥å¯¹è±¡çš„æ–¹å¼è§£å†³ï¼Œå´ä¸æ˜¯å¾ˆå‹å¥½ï¼Œé€šè¿‡åŠ¨æ€argçš„æ–¹å¼æˆ‘ä»¬å°±å¯ä»¥æŠŠè¿™ä¸ªéœ€æ±‚ç»™è½»æ¾å®ç°äº†ï¼› 1234567891011121314&lt;template&gt;&lt;div&gt; &lt;div class=&quot;fixed&quot; v-fixed:[direction]=&quot;200&quot;&gt;&lt;/div&gt; &lt;div @click=&quot;changeDirection&quot;&gt;æ”¹å˜æ–¹å‘&lt;/div&gt;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import vFixed from &#x27;@/directives/fixed&#x27;const direction = ref(&#x27;left&#x27;)const changeDirection = () =&gt; &#123; direction.value = &#x27;right&#x27;&#125;&lt;/script&gt; é€šè¿‡v-fixed:[direction]çš„æ–¹å¼ï¼Œæˆ‘ä»¬ç»™argå‚æ•°ä¼ å…¥äº†leftçš„å€¼ï¼›ç‚¹å‡»æŒ‰é’®æˆ‘ä»¬å¸Œæœ›åˆ‡æ¢å€¼ï¼š 1234567891011121314const fixed = &#123; mounted(el, binding) &#123; const s = binding.arg || &#x27;left&#x27; el.style[s] = (binding.value || 200) + &#x27;px&#x27; &#125;, updated(el, binding) &#123; const s = binding.arg || &#x27;left&#x27; el.style = &#x27;&#x27; el.style[s] = (binding.value || 200) + &#x27;px&#x27; &#125;, beforeUnmount() &#123;&#125;,&#125;export default fixed è¿™æ ·æˆ‘ä»¬å°±å®ç°çš„åŠ¨æ€æŒ‡ä»¤å‚æ•°çš„åˆ‡æ¢ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç»™argä¼ å…¥æ•°ç»„ç­‰å¤æ‚çš„æ•°æ®ã€‚ ç®€æ˜“ç‰ˆå®ç° å¥½äº†ï¼Œä¸Šé¢çš„å·¥å…·å‡½æ•°å’Œé’©å­å‡½æ•°çš„ä»‹ç»é“ºå«å®Œäº†ï¼Œæˆ‘ä»¬å¯¹è‡ªå®šä¹‰æŒ‡ä»¤ä¹Ÿæœ‰äº†ä¸€å®šçš„äº†è§£ï¼›æˆ‘ä»¬ä»æœ€ç®€å•çš„åŠŸèƒ½å¼€å§‹ï¼Œæ¥çœ‹ä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªç®€æ˜“ç‰ˆæœ¬çš„ClickOutsideã€‚ 123456789101112131415161718import &#123; on, off &#125; from &#x27;@/utils/domUtils&#x27;const clickOutside = &#123; mounted(el, binding) &#123; function eventHandler(e) &#123; // å¯¹elå’Œbindingè¿›è¡Œå¤„ç†ï¼Œåˆ¤æ–­æ˜¯å¦è§¦å‘valueå‡½æ•° &#125; el.__click_outside__ = eventHandler on(document, &#x27;click&#x27;, eventHandler) &#125;, beforeUnmount(el) &#123; if(typeof el.__click_outside__ === &#x27;function&#x27;)&#123; off(document, &#x27;click&#x27;, el.__click_outside__) &#125; &#125;,&#125;export default clickOutside æˆ‘ä»¬åœ¨æŒ‡ä»¤æŒ‚è½½çš„æ—¶å€™ï¼Œç»™documentå®šä¹‰å¹¶ä¸”ç»‘å®šäº†ä¸€ä¸ªeventHandlerå¤„ç†å‡½æ•°ï¼Œå¹¶ä¸”æŒ‚è½½åˆ°å…ƒç´ çš„__click_outside__å±æ€§ï¼Œæ–¹ä¾¿åœ¨å¸è½½çš„æ—¶å€™è¿›è¡Œäº‹ä»¶å–æ¶ˆç»‘å®šã€‚ eventHandlerå‡½æ•°åªèƒ½æ”¾åˆ°æŒ‡ä»¤ä¸­å®šä¹‰ï¼Œå¦åˆ™è·å–ä¸åˆ°elå’Œbindingã€‚ åœ¨ä½¿ç”¨clickOutsideçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»™valueä¼ å…¥ç»‘å®šå‡½æ•°ï¼Œå› æ­¤binding.valueçš„å€¼æ¥æ”¶åˆ°çš„å…¶å®æ˜¯ä¸€ä¸ªå‡½æ•°ï¼š 123456789&lt;template&gt; &lt;div v-click-outside=&quot;onClickOutside&quot;&gt; &lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;const onClickOutside = () =&gt; &#123; // ..&#125;&lt;/script&gt; æˆ‘ä»¬åœ¨ä¸Šé¢å®šä¹‰çš„eventHandlerå‡½æ•°ä¹Ÿæ˜¯ç‚¹å‡»äº‹ä»¶çš„è§¦å‘å‡½æ•°ï¼Œåˆ¤æ–­äº‹ä»¶çš„targetæ˜¯å¦åŒ…å«åœ¨elèŠ‚ç‚¹ä¸­ï¼Œå¦‚æœä¸åœ¨çš„è¯å°±æ‰§è¡Œbinding.valueå‡½æ•°ã€‚ 12345678910111213&#123; mounted(el, binding) &#123; function eventHandler(e) &#123; if (el.contains(e.target) || el === e.target) &#123; return false &#125; // è§¦å‘binding.value if (binding.value &amp;&amp; typeof binding.value === &#x27;function&#x27;) &#123; binding.value(e) &#125; &#125; &#125;&#125; è¿™é‡Œç”¨åˆ°äº†ä¸€ä¸ªcontainså‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨æ¥åˆ¤æ–­æŸä¸€èŠ‚ç‚¹æ˜¯å¦æ˜¯å¦ä¸€ä¸ªèŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼Œæˆ‘ä»¬çœ‹ä¸‹MDNæ–‡æ¡£ä¸Šçš„è§£é‡Šï¼š contains()æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºä¸€ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯ç»™å®šèŠ‚ç‚¹çš„åä»£ï¼Œå³è¯¥èŠ‚ç‚¹æœ¬èº«ã€å…¶ç›´æ¥å­èŠ‚ç‚¹ï¼ˆchildNodesï¼‰ã€å­èŠ‚ç‚¹çš„ç›´æ¥å­èŠ‚ç‚¹ç­‰ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºcontainsä¼šå°†èŠ‚ç‚¹æœ¬èº«åˆ¤æ–­è¿”å›trueï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå› æ­¤æˆ‘ä»¬è¿˜è¦æ˜¾ç¤ºåŠ ä¸€ä¸‹el === e.targetçš„åˆ¤æ–­è¿‡æ»¤æ¡ä»¶ã€‚ å› æ­¤æœ€ç»ˆçš„æŒ‡ä»¤å°±æ˜¯è¿™æ ·çš„ï¼š 123456789101112131415161718192021import &#123; on , off &#125; from &#x27;@/utils/domUtils&#x27;const clickOutside = &#123; mounted(el, binding) &#123; function eventHandler(e) &#123; if (el.contains(e.target) || el === e.target) &#123; return false &#125; if (binding.value &amp;&amp; typeof binding.value === &#x27;function&#x27;) &#123; binding.value(e) &#125; &#125; el.__click_outside__ = eventHandler on(document, &#x27;click&#x27;, eventHandler) &#125;, beforeUnmount(el) &#123; if(typeof el.__click_outside__ === &#x27;function&#x27;)&#123; off(document, &#x27;click&#x27;, el.__click_outside__) &#125; &#125;,&#125;export default clickOutside ç®€æ˜“ç‰ˆä¼˜åŒ– æˆ‘ä»¬ç»§ç»­å¯¹è¿™ä¸ªç®€æ˜“ç‰ˆçš„å‡½æ•°è¿›è¡Œä¼˜åŒ–ï¼Œæˆ‘ä»¬å‘ç°ï¼Œæ¯æ¬¡æŒ‡ä»¤åˆå§‹åŒ–å’Œç§»é™¤æ—¶ç»™documentç»‘å®šäº‹ä»¶å¾ˆéº»çƒ¦ï¼›å¦‚æœæŠŠdocumentçš„ç»‘å®šäº‹ä»¶æ”¾åˆ°å¤–é¢æ¥ï¼Œåªç»‘å®šä¸€æ¬¡ï¼Œä¸å°±å‡å°‘äº†æ¯æ¬¡ç»‘å®šå’Œè§£ç»‘çš„ç¹çäº†ä¹ˆã€‚ 123456789on(document, &#x27;click&#x27;, (e) =&gt; &#123; // ...&#125;)const clickOutside = &#123; mounted(el, binding) &#123; // ... &#125;&#125; é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ¥åˆ°äº†ï¼Œæ€ä¹ˆèƒ½å¤Ÿåœ¨clickäº‹ä»¶ä¸­èƒ½å¤Ÿæ‰§è¡Œæ¯ä¸ªæŒ‡ä»¤ä¸­å®šä¹‰çš„eventHandlerå‡½æ•°ï¼Œä»è€Œåˆ¤æ–­å‡ºbinding.valueå‡½æ•°æ˜¯å¦éœ€è¦è§¦å‘æ‰§è¡Œå‘¢ï¼Ÿ æ²¡é”™ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œæ¥æ”¶é›†æ‰€æœ‰æŒ‡ä»¤çš„eventHandlerå‡½æ•°ï¼Œç‚¹å‡»æ—¶ç»Ÿä¸€æ‰§è¡Œï¼›ä¸è¿‡æ•°ç»„å¸¦æ¥çš„é—®é¢˜æ˜¯æœ€åè§£ç»‘æ—¶ä¸å®¹æ˜“å»æ‰¾åˆ°æ¯ä¸ªelå¯¹åº”çš„eventHandlerå‡½æ•°ã€‚ ä¸è¿‡è¿™é‡Œæˆ‘ä»¬æ›´åŠ å·§å¦™çš„å®šä¹‰äº†ä¸€ä¸ªMapå¯¹è±¡ï¼Œç”±äºæˆ‘ä»¬çš„eventHandlerå‡½æ•°å’Œelæ˜¯ä¸€ä¸€å¯¹ç”¨å…³ç³»ï¼Œåˆ©ç”¨Mapå¯¹è±¡çš„é”®å€¼å¯ä»¥å­˜å‚¨ä»»ä½•æ•°æ®çš„ç‰¹æ€§åŠ æŒï¼š 12345678910111213141516171819const nodeList = new Map()on(document, &#x27;click&#x27;, (e) =&gt; &#123; for (const fn of nodeList.values()) &#123; fn(e) &#125;&#125;)const clickOutside = &#123; mounted(el, binding) &#123; function eventHandler(e) &#123; // ... &#125; nodeList.set(el, eventHandler) &#125;, beforeUnmount(el) &#123; nodeList.delete(el) &#125;,&#125; æˆ‘ä»¬å°†eventHandleræ”¶é›†åˆ°nodeListä¸­ï¼Œdocumentç‚¹å‡»æ—¶è§¦å‘æ¯ä¸ªeventHandlerï¼Œå†åœ¨eventHandlerå†…éƒ¨å»åˆ¤æ–­bind.valueæ˜¯å¦éœ€è¦è§¦å‘ã€‚ ç®€æ˜“ç‰ˆå‡çº§ä¼˜åŒ– è™½ç„¶æ˜¯ç®€æ˜“ç‰ˆï¼Œä¸è¿‡æˆ‘ä»¬è¿˜å¯ä»¥å¯¹å®ƒå†å†è¿›è¡Œä¼˜åŒ–ï¼›æˆ‘ä»¬å‘ç°naive-ui-adminçš„æºç clickOutside.tsä¸­ï¼Œå¹¶æ²¡æœ‰æ³¨å†Œclickäº‹ä»¶ï¼Œè€Œæ˜¯æ³¨å†Œäº†mouseup/mousedownäº‹ä»¶ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬åœ¨MDNä¸­å…³äºclick/mouseup/mousedownäº‹ä»¶æ‰¾åˆ°äº†åŸè¯ï¼Œæ˜¯è¿™æ ·è¯´çš„ï¼š å½“å®šç‚¹è®¾å¤‡çš„æŒ‰é’®ï¼ˆé€šå¸¸æ˜¯é¼ æ ‡çš„ä¸»é”®ï¼‰åœ¨ä¸€ä¸ªå…ƒç´ ä¸Šè¢«æŒ‰ä¸‹å’Œæ”¾å¼€æ—¶ï¼Œclick äº‹ä»¶å°±ä¼šè¢«è§¦å‘ã€‚ mouseup/mousedownäº‹ä»¶åœ¨å®šç‚¹è®¾å¤‡ï¼ˆå¦‚é¼ æ ‡æˆ–è§¦æ‘¸æ¿ï¼‰æŒ‰é’®åœ¨å…ƒç´ å†…æŒ‰ä¸‹æ—¶ï¼Œä¼šåœ¨è¯¥å…ƒç´ ä¸Šè§¦å‘ã€‚ å› æ­¤ï¼Œæ€»ç»“ä¸‹æ¥å°±æ˜¯ï¼Œclickäº‹ä»¶åªæ˜¯ç”±é¼ æ ‡çš„å·¦é”®è§¦å‘ï¼Œè€Œmouseup/mousedownäº‹ä»¶æ˜¯ç”±ä»»æ„å®šç‚¹è®¾å¤‡è§¦å‘çš„ï¼Œæ¯”å¦‚é¼ æ ‡çš„å³é”®æˆ–è€…ä¸­é—´çš„æ»šè½®é”®ï¼Œéƒ½æ˜¯å¯ä»¥è§¦å‘çš„ã€‚ ç‚¹å‡»domå…ƒç´ ï¼Œä¸‰ä¸ªäº‹ä»¶çš„è§¦å‘é¡ºåºæ˜¯ï¼šmousedownã€mouseupã€clickã€‚ ä¸Šé¢å¾—å‡ºçš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨VueUseä¸­åŒæ—¶å¾—åˆ°éªŒè¯ï¼›å¦‚æœæˆ‘ä»¬ä½¿ç”¨VueUseçš„onClickOutsideï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒåªæœ‰åœ¨é¼ æ ‡å·¦é”®æ—¶æ‰ä¼šè§¦å‘ï¼›è€Œelement-plusåˆ™æ˜¯ä¸‰é”®åŒæ—¶å¯ä»¥è§¦å‘ã€‚ æ‰“å¼€VueUseæºç ä¸­æˆ‘ä»¬å°±ä¼šå‘ç°ä»–æ³¨å†Œçš„å°±æ˜¯clickäº‹ä»¶ï¼š 12345const cleanup = [ useEventListener(window, &#x27;click&#x27;, listener, &#123; passive: true, capture &#125;), // çœç•¥å…¶ä»–ä»£ç ]cleanup.forEach(fn =&gt; fn()) å› æ­¤çŸ¥é“äº†ä¸‰ä¸ªäº‹ä»¶çš„åŒºåˆ«ï¼Œå›åˆ°æˆ‘ä»¬çš„ç®€æ˜“ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œå‡çº§äº†ï¼›é¦–å…ˆå°†clickäº‹ä»¶è¿›è¡Œæ”¹å†™ï¼Œåˆ†æˆmousedownå’Œmouseupï¼Œä¸è¿‡è¿™ä¸¤ä¸ªäº‹ä»¶éƒ½æœ‰å¯¹åº”çš„äº‹ä»¶å¯¹è±¡eï¼Œæˆ‘ä»¬å…ˆå­˜ä¸€ä¸ªä¸‹æ¥ï¼Œåœ¨eventHandleré‡Œé¢å†å¯¹ä¸¤ä¸ªäº‹ä»¶å¯¹è±¡è¿›è¡Œåˆ¤æ–­ã€‚ 1234567891011let startClickon(document, &#x27;mousedown&#x27;, (e) =&gt; &#123; startClick = e&#125;)on(document, &#x27;mouseup&#x27;, (e) =&gt; &#123; for (const fn of nodeList.values()) &#123; fn(e, startClick) &#125;&#125;) eventHandlerä¹Ÿæ¥æ”¶çš„ä¸æ˜¯clickçš„evå¯¹è±¡äº†ï¼Œè€Œæ˜¯mousedown/mouseupçš„ï¼š 12345678910111213function eventHandler(mouseup, mousedown) &#123; if ( el.contains(mouseup.target) || el === mouseup.target || el.contains(mousedown.target) || el === mousedown.target ) &#123; return false &#125; if (binding.value &amp;&amp; typeof binding.value === &#x27;function&#x27;) &#123; binding.value() &#125;&#125; è¿™æ ·æˆ‘ä»¬çš„ç®€æ˜“å‡½æ•°å°±å‡çº§å®Œæˆäº†ï¼Œä¹Ÿèƒ½åŒæ—¶æ”¯æŒå·¦ä¸­å³é”®çš„äº‹ä»¶äº†ã€‚ æºç å®ç°é€»è¾‘ ç»è¿‡ä¸Šé¢çš„ç®€æ˜“ç‰ˆæœ¬çš„è¿­ä»£å‡çº§ï¼Œç›¸ä¿¡å¤§å®¶å¯¹ClickOutsideæ•´ä½“çš„å®ç°è¿‡ç¨‹å’ŒåŸç†åº”è¯¥æœ‰äº†ä¸€å®šçš„äº†è§£ï¼ŒåŸºæœ¬ä¹Ÿå·²ç»æŠŠæºç è®²äº†ä¸ƒä¸ƒå…«å…«äº†ï¼›æˆ‘ä»¬å°±æ¥çœ‹ä¸‹å®ƒçš„æºç ä¸­è¿˜æœ‰å“ªäº›é€»è¾‘ï¼Œæ— éæ˜¯åˆ¤æ–­çš„æ›´åŠ å…¨é¢ä¸€äº›ï¼Œä¸‹é¢ä¸»è¦ä»¥naive-ui-adminæºç ä¸­çš„clickOutside.tsä¸ºä¸»ã€‚ é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹å®ƒä¸»è¦çš„ä»£ç ç»“æ„ï¼š 12345678910111213141516171819202122232425262728293031323334353637import &#123; on &#125; from &#x27;@/utils/domUtils&#x27;;const nodeList = new Map();let startClick: MouseEvent;on(document, &#x27;mousedown&#x27;, (e: MouseEvent) =&gt; (startClick = e));on(document, &#x27;mouseup&#x27;, (e: MouseEvent) =&gt; &#123; for (const &#123; documentHandler &#125; of nodeList.values()) &#123; documentHandler(e, startClick); &#125;&#125;);function createDocumentHandler(el, binding) &#123; return function (mouseup, mousedown) &#123; // .. &#125;&#125;const ClickOutside: ObjectDirective = &#123; beforeMount(el, binding) &#123; nodeList.set(el, &#123; documentHandler: createDocumentHandler(el, binding), bindingFn: binding.value, &#125;); &#125;, updated(el, binding) &#123; nodeList.set(el, &#123; documentHandler: createDocumentHandler(el, binding), bindingFn: binding.value, &#125;); &#125;, unmounted(el) &#123; nodeList.delete(el); &#125;,&#125;;export default ClickOutside; æˆ‘ä»¬å‘ç°é™¤äº†createDocumentHandlerè¿™ä¸ªå‡½æ•°ä¹‹å¤–ï¼Œå…¶ä»–çš„åŠŸèƒ½åœ¨ä¸Šé¢ç®€æ˜“ç‰ˆé‡Œéƒ½å·²ç»å®ç°äº†ï¼›ç”±äºæˆ‘ä»¬çš„handlerå‡½æ•°ä¸­éœ€è¦ç”¨åˆ°elå’Œbindingï¼Œè¿™é‡Œçš„createDocumentHandlerä½œç”¨æ˜¯åˆ›å»ºä¸€ä¸ªåŒ¿åé—­åŒ…handlerå‡½æ•°ï¼Œå°†handlerå‡½æ•°å­˜å‚¨åˆ°nodeListï¼Œå°±èƒ½å¼•ç”¨elå’Œbindingäº†ã€‚ å› æ­¤æˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸‹è¿™ä¸ªcreateDocumentHandleråšäº†å“ªäº›äº‹æƒ…ï¼Œé¦–å…ˆä»–æ¥æ”¶äº†æŒ‡ä»¤ä¸­çš„elå’Œbindingä¸¤ä¸ªå‚æ•°ï¼Œå®ƒè¿”å›çš„åŒ¿åå‡½æ•°æ˜¯åœ¨mouseupäº‹ä»¶ä¸­è¢«è°ƒç”¨çš„ï¼Œæ¥æ”¶äº†mouseupå’Œmousedownä¸¤ä¸ªäº‹ä»¶å¯¹è±¡ã€‚ æˆ‘ä»¬ç»§ç»­çœ‹åˆ›å»ºå‡ºæ¥çš„documentHandlerå‡½æ•°ä¸­åšäº†å“ªäº›çš„å¤„ç†ï¼Œå®ƒé‡Œé¢ä¸»è¦æœ‰6ä¸ªåˆ¤æ–­çš„flagï¼Œåªè¦ç¬¦åˆä¸‹é¢6ä¸ªæ¡ä»¶ä¹‹ä¸€ï¼Œå³è¿”å›trueï¼Œå°±ä¸è§¦å‘binding.valueå‡½æ•°ï¼š 1234567891011121314return function (mouseup, mousedown) &#123; // ... if ( isBound || isTargetExists || isContainedByEl || isSelf || isTargetExcluded || isContainedByPopper ) &#123; return; &#125; binding.value();&#125; é‚£ä¹ˆè¿™å…­ä¸ªæ¡ä»¶æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬é€ä¸€æ¥è§£è¯»ï¼›å‰ä¸¤ä¸ªåˆ¤æ–­æ˜¯å®Œæ•´æ€§åˆ¤æ–­ï¼Œç¬¬ä¸€ä¸ªæ£€éªŒæ¡ä»¶æ˜¯æ£€æŸ¥bindingæˆ–binding.instanceæ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨isBoundä¸ºtrueï¼›ç¬¬äºŒä¸ªæ£€éªŒæ¡ä»¶æ˜¯mouseup/mousedownçš„è§¦å‘ç›®æ ‡å…ƒç´ targetæ˜¯å¦éƒ½å­˜åœ¨ã€‚ 1234567const mouseUpTarget = mouseup.target as Node;const mouseDownTarget = mousedown.target as Node;// åˆ¤æ–­ä¸€const isBound = !binding || !binding.instance;// åˆ¤æ–­äºŒconst isTargetExists = !mouseUpTarget || !mouseDownTarget; ç¬¬ä¸‰ç¬¬å››ä¸ªåˆ¤æ–­å°±æ˜¯å…ƒç´ åˆ¤æ–­äº†ï¼Œå’Œæˆ‘ä»¬çš„ç®€æ˜“ç‰ˆæœ¬å°±æœ‰ç‚¹ç±»ä¼¼ï¼ŒisContainedByElåˆ¤æ–­mouseUpTargetå’ŒmouseDownTargetæ˜¯å¦åœ¨elå…ƒç´ ä¸­ï¼Œå¦‚æœåœ¨åˆ™ä¸ºtrueï¼›isSelfåˆ™æ˜¯åˆ¤æ–­è§¦å‘å…ƒç´ æ˜¯å¦æ˜¯elè‡ªèº«ã€‚ 1234// åˆ¤æ–­ä¸‰const isContainedByEl = el.contains(mouseUpTarget) || el.contains(mouseDownTarget);// åˆ¤æ–­å››const isSelf = el === mouseUpTarget; ç¬¬äº”ç¬¬å…­ä¸ªåˆ¤æ–­æ˜¯ç‰¹æ®Šæƒ…å†µçš„åˆ¤æ–­ï¼Œåˆ¤æ–­äº”æ˜¯äº‹ä»¶çš„targetæ˜¯å¦è¢«excludesä¸­çš„å…ƒç´ åŒ…å«ï¼Œå¦‚æœæ˜¯ï¼ŒisTargetExcludedä¸ºtrueã€‚ 1234567891011121314// åˆ¤æ–­äº”const isTargetExcluded = (excludes.length &amp;&amp; excludes.some((item) =&gt; item?.contains(mouseUpTarget))) || (excludes.length &amp;&amp; excludes.includes(mouseDownTarget as HTMLElement));const popperRef = ( binding.instance as ComponentPublicInstance&lt;&#123; popperRef: Nullable&lt;HTMLElement&gt;; &#125;&gt;).popperRef;// åˆ¤æ–­å…­const isContainedByPopper = popperRef &amp;&amp; (popperRef.contains(mouseUpTarget) || popperRef.contains(mouseDownTarget)); è¿™é‡Œæˆ‘ä»¬é‡ç‚¹æ¥è®²ä¸€ä¸‹excludesè¿‡æ»¤æ•°ç»„çš„ç”¨æ³•ï¼Œæ­£å¸¸æƒ…å†µä¸‹éƒ½æ˜¯å°†ç»‘å®šå…ƒç´ elä¸‹çš„domèŠ‚ç‚¹åˆ¤æ–­è¿‡æ»¤ï¼Œä½†æ˜¯è¿˜æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç‚¹å‡»æ—¶é¢å¤–è¿‡æ»¤å…¶ä»–çš„èŠ‚ç‚¹ï¼ˆè¿™ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢ä¸€ç¯‡æ–‡ç« ä¼šçœ‹åˆ°ï¼‰ï¼›è¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°excludesæ•°ç»„äº†ï¼Œé‚£å®ƒæ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿåœ¨åˆ›å»ºdocumentHandlerçš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä»è¿™ä¸ªåŠ¨æ€å‚æ•°æŒ‡ä»¤argä¸­æ‹¼äº†è¿™ä¸ªæ•°ç»„ï¼š 123456789function createDocumentHandler(el, binding) &#123; let excludes = []; if (Array.isArray(binding.arg)) &#123; excludes = binding.arg; &#125; else &#123; excludes.push(binding.arg); &#125; // å…¶ä»–åˆ¤æ–­æ¡ä»¶&#125; é‚£ä¹ˆç»“åˆä¸Šé¢çš„åŠ¨æ€å‚æ•°æŒ‡ä»¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸€ä¸‹è¿™ä¸ªexcludeæ¥é¢å¤–æ·»åŠ è¿‡æ»¤çš„domï¼š 1234567891011&lt;template&gt; &lt;div v-click-outside:[excludeDom]=&quot;clickOut&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;const excludeDom = ref([])const clickOut = () =&gt; &#123;&#125;onMounted(() =&gt; &#123; excludeDom.value.push(document.querySelector(&quot;.some-class&quot;));&#125;);&lt;/script&gt; æ€»ç»“ æœ¬æ–‡æ€»ç»“äº†vue3ä¸‹ClickOutsideçš„å®ç°é€»è¾‘ï¼Œä»å·¥å…·å‡½æ•°å°è£…ï¼Œåˆ°è‡ªå®šä¹‰æŒ‡ä»¤çš„å­¦ä¹ ï¼Œå†åˆ°æºç çš„æ·±å…¥å­¦ä¹ ï¼›è™½ç„¶ClickOutsideçš„æ•´ä½“é€»è¾‘å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œä½†æ˜¯åˆšå¼€å§‹ç¬”è€…é˜…è¯»æºç çš„æ—¶å€™ï¼Œå¾ˆéš¾ç†è§£å…¶ä¸­çš„ä¸€äº›ç”¨æ³•ï¼›å°¤å…¶æ˜¯åœ¨äº‹ä»¶çš„æ³¨å†Œï¼Œä¸ºä»€ä¹ˆä¸ç”¨clickï¼Œè€Œæ˜¯ä½¿ç”¨mouseup/mousedownä¸¤ä¸ªäº‹ä»¶ç»„åˆï¼›ç»è¿‡æ·±å…¥çš„æ€è€ƒå’Œå¯¹æ¯”ï¼Œæ‰æ…¢æ…¢ç†è§£ä½œè€…çš„ç”¨æ„ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"},{"name":"æŠ€å·§","slug":"Tips","permalink":"https://xieyufei.com/tags/Tips/"}]},{"title":"è°ä¼šæ‹’ç»ä¸€æ¬¾é…·ç‚«æµç•…çš„è¾‰å…‰å¡ç‰‡åŠ¨ç”»å‘¢ï¼Ÿ","date":"2024-02-19T08:12:00.000Z","path":"2024/02/19/Glow-Card.html","text":"æœ€è¿‘åœ¨æµè§ˆæ˜é‡‘ç½‘ç«™çš„æ—¶å€™å‘ç°æ–°ä¸Šçº¿çš„æ‰£å­å¹³å°ï¼Œå®ƒæ˜¯ä¸€æ¬¾æ— éœ€ä»£ç ï¼Œå³åˆ»å¼€å‘æ–°ä¸€ä»£AI Chat Botçš„åº”ç”¨ç¼–è¾‘å¹³å°ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªå¹³å°å¿«é€Ÿåˆ›å»ºå„ç§ç±»å‹çš„Chat Botï¼›ä¸è¿‡è®©ç¬”è€…æ›´æ„Ÿå…´è¶£çš„æ˜¯å®ƒé¦–é¡µé…·ç‚«çš„å¡ç‰‡è¾‰å…‰æ•ˆæœæ˜¯å¦‚ä½•å®ç°çš„ï¼Œæœ¬æ–‡å°±æ¥æ¢è®¨ä¸€ä¸‹å®ƒçš„å®ç°è¿‡ç¨‹ã€‚ æˆ‘ä»¬çœ‹ä¸‹åŠ¨ç”»æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœæˆ‘ä»¬æ‰“å¼€æ§åˆ¶å°å»çœ‹å…ƒç´ ä¸Šé¢çš„å±æ€§ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œè¿™æ ·çš„æ•ˆæœå…¶å®ä¸»è¦æ˜¯ä¸¤ç§åŠ¨ç”»æ•ˆæœå åŠ ï¼šå¡ç‰‡3Dæ—‹è½¬å’Œåé¢çš„è¾‰å…‰å±‚çš„æ•ˆæœï¼Œæˆ‘ä»¬é€ä¸€æ¥çœ‹ä¸‹å®ç°çš„é€»è¾‘ã€‚ æœ¬æ–‡çš„å®ç°ä»£ç å®ç°åŸºäºVue3ï¼Œå¯¹Vue3è¯­æ³•ä¸äº†è§£çš„å¯ä»¥å…ˆçœ‹ä¸€ä¸‹è¿™ç¯‡æ–‡ç« ï¼›æƒ³çœ‹æœ€ç»ˆçš„å®ç°æ•ˆæœçš„å°ä¼™ä¼´å¯ä»¥ç›´æ¥æˆ³è¿™é‡ŒæŸ¥çœ‹ é¼ æ ‡å±æ€§çš„åŒºåˆ« åœ¨å®ç°æ•ˆæœä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬åœ¨æ‰“å°é¼ æ ‡äº‹ä»¶çš„æ—¶å€™ï¼Œç»å¸¸ä¼šçœ‹åˆ°äº‹ä»¶å¯¹è±¡eventä¸Šé¢æœ‰å„ç§å±æ€§ï¼ŒoffsetXã€clientXã€pageXå’ŒscreenXç­‰ç­‰ï¼Œé‚£ä¹ˆè¿™äº›å±æ€§æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶åˆ°åº•è¯¥ç”¨å“ªä¸ªå±æ€§å‘¢ï¼Ÿ ä¸ºäº†ç®€åŒ–æµç¨‹ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»Xè½´æ–¹å‘ä¸Šçš„å±æ€§ï¼ŒYè½´æ–¹å‘å±æ€§åŒç†ã€‚ offsetX æˆ‘ä»¬æŒ‰ç…§ä»å°èŒƒå›´åˆ°å¤§èŒƒå›´çš„åŸåˆ™ï¼Œå…ˆæ¥çœ‹ä¸‹offsetXå±æ€§ï¼Œæ ¹æ®MDNä¸Šçš„ä»‹ç»ï¼Œåªè¯»å±æ€§offsetXè§„å®šäº†äº‹ä»¶å¯¹è±¡ä¸ç›®æ ‡èŠ‚ç‚¹çš„å†…å¡«å……è¾¹ï¼ˆpadding edgeï¼‰åœ¨Xè½´æ–¹å‘ä¸Šçš„åç§»é‡ï¼›ä»offsetå•è¯ä¹Ÿèƒ½çœ‹å‡ºï¼Œå®ƒæ˜¯ç›¸å¯¹äºç›®æ ‡divçš„åç§»é‡ï¼Œæˆ‘ä»¬ç”¨å›¾å½¢é€šä¿—çš„è¡¨ç¤ºå¦‚ä¸‹ï¼š clientX ç„¶åæ˜¯clientXï¼Œclientæœ‰å®¢æˆ·ç«¯çš„æ„æ€ï¼Œå› æ­¤å®ƒè¡¨ç¤ºäº‹ä»¶å‘ç”Ÿæ—¶çš„æµè§ˆå™¨å®¢æˆ·ç«¯åŒºåŸŸçš„æ°´å¹³åæ ‡ï¼Œæ˜¯ç›¸å¯¹äºæµè§ˆå™¨çª—å£çš„è¾¹è·ï¼Œä¼šéšé¡µé¢æ»šåŠ¨è€Œæ”¹å˜ï¼Œç”¨å›¾å½¢è¡¨ç¤ºå¦‚ä¸‹ï¼š æ³¨ï¼šclientYæ˜¯ä¸åŒ…å«æµè§ˆå™¨çš„ä¹¦ç­¾ã€åœ°å€æ å’Œæ ‡ç­¾æ ç­‰çš„é«˜åº¦ã€‚ pageX å†æ˜¯pageXå±æ€§ï¼Œå®ƒæ˜¯ç›¸å¯¹äºæ•´ä¸ªæ–‡æ¡£çš„æ°´å¹³åæ ‡ï¼Œä¸éšç€é¡µé¢æ»šåŠ¨è€Œæ”¹å˜ï¼›å®ƒå’Œä¸Šé¢clientXçœ‹ä¼¼æ˜¯ç›¸åŒçš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å®ƒä»¬çš„å€¼ä¹Ÿæ˜¯ç›¸åŒçš„ï¼›ä½†pageXä¼šè€ƒè™‘é¡µé¢çš„æ°´å¹³æ–¹å‘ä¸Šçš„æ»šåŠ¨ï¼Œå› æ­¤æœ‰ä¸‹é¢çš„å…¬å¼ï¼š ev.pageX = ev.clientX + window.scrollX é€šè¿‡å›¾å½¢æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºï¼Œå½“æ–‡æ¡£å¤§å°è¶…å‡ºæµè§ˆå™¨åŒºåŸŸæ—¶ï¼ŒpageXæ˜æ˜¾æ˜¯è¦å¤§äºclientXçš„å€¼ï¼š screenX æœ€åæ˜¯screenXï¼Œè¡¨ç¤ºèŒƒå›´æ˜¯æœ€å¤§çš„ï¼Œä½¿ç”¨é¢‘ç‡ä¹Ÿæ˜¯æœ€ä½çš„ï¼Œè¡¨ç¤ºè·ç¦»ç”µè„‘å±å¹•è¾¹ç¼˜çš„æ°´å¹³åæ ‡åç§»é‡ï¼š é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå±æ€§æ˜¯movementXï¼Œå®ƒæä¾›äº†å½“å‰é¼ æ ‡ç§»åŠ¨äº‹ä»¶å’Œä¸Šä¸€æ¬¡é¼ æ ‡ç§»åŠ¨äº‹ä»¶ä¹‹é—´é¼ æ ‡åœ¨æ°´å¹³æ–¹å‘çš„ç§»åŠ¨å€¼ï¼›åœ¨å¤„ç†ç§»åŠ¨å…ƒç´ ç­‰åœºæ™¯æ—¶å°±ä¸éœ€è¦æˆ‘ä»¬è®°å½•ä¸Šæ¬¡çš„ä½ç½®æ•°æ®äº†ï¼Œå› æ­¤å®ƒçš„è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š currentEvent.movementX = currentEvent.screenX - previousEvent.screenX å¡ç‰‡3Dæ—‹è½¬ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹ç¬¬ä¸€ä¸ªå®ç°æ•ˆæœï¼Œé¦–å…ˆæ˜¯è®©å¡ç‰‡å®ç°3Dçš„æ—‹è½¬æ•ˆæœï¼Œæˆ‘ä»¬å…ˆåœ¨é¡µé¢ä¸Šå°†å¡ç‰‡çš„å¸ƒå±€æ’åˆ—å¥½ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;template&gt; &lt;div class=&quot;clip-box&quot;&gt; &lt;div class=&quot;title&quot;&gt;å¦‚ä½•å®ç°ä¸€æ¬¾é…·ç‚«æµç•…çš„è¾‰å…‰å¡ç‰‡åŠ¨ç”»ï¼Ÿ&lt;/div&gt; &lt;div class=&quot;clip-cont&quot;&gt; &lt;div class=&quot;card card1&quot;&gt;Card1&lt;/div&gt; &lt;div class=&quot;card card2&quot;&gt;Card2&lt;/div&gt; &lt;div class=&quot;card card3&quot;&gt;Card3&lt;/div&gt; &lt;div class=&quot;card card4&quot;&gt;Card4&lt;/div&gt; &lt;div class=&quot;card card5&quot;&gt;Card5&lt;/div&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.clip-cont &#123; width: 1204px; position: relative;&#125;.card &#123; background: #161616; position: absolute;&#125;.card1 &#123; width: 434px; height: 450px;&#125;.card2 &#123; width: 434px; height: 290px; top: 460px;&#125;.card3 &#123; width: 760px; height: 290px; left: 444px;&#125;.card4 &#123; width: 375px; height: 450px; left: 444px; top: 300px;&#125;.card5 &#123; width: 375px; height: 450px; left: 829px; top: 300px;&#125;&lt;/style&gt; æˆ‘ä»¬ç»™æ¯ä¸ªå¡ç‰‡è®¾ç½®ä¸€ä¸ªå›ºå®šçš„å®½é«˜å’Œä½ç½®ï¼Œä½¿ç”¨ç»å¯¹å¸ƒå±€è®©å…¶å †å æ’åˆ—ï¼› æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨domèŠ‚ç‚¹ä¸Šç›‘å¬é¼ æ ‡äº‹ä»¶åå¯¹5ä¸ªå¡ç‰‡è¿›è¡Œæ ·å¼çš„ä¿®æ”¹ï¼›ä½†æ˜¯è¿™é‡Œï¼Œå¦‚æœå†™äº”éç›‘å¬å‡½æ•°æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ï¼›æƒ³è¦åœ¨å¤šä¸ªèŠ‚ç‚¹å…ƒç´ ä¸Šå¤ç”¨ç›¸åŒçš„é€»è¾‘ï¼Œå¯ä»¥æŠŠè¿™ä¸ªé€»è¾‘ä»¥ç»„åˆå¼å‡½æ•°çš„å½¢å¼æå–ï¼Œæˆ‘ä»¬å•ç‹¬æ–°å»ºä¸€ä¸ªuseMouse.jsæ–‡ä»¶ï¼š 123456789101112131415// useMouse.js// widthï¼šå¡ç‰‡å®½åº¦ // heightï¼šå¡ç‰‡é«˜åº¦// cardElï¼šå¡ç‰‡çš„domèŠ‚ç‚¹export function useMouse(width, height, cardEl) &#123; const styles = ref(&#x27;&#x27;); const mouseMove = (ev) =&gt; &#123;&#125; const mouseOut = (ev) =&gt; &#123;&#125; return &#123; styles, mouseMove, mouseOut, &#125;;&#125; å¯¼å‡ºæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„stylesæ ·å¼ã€mouseMoveé¼ æ ‡ç§»åŠ¨å‡½æ•°ã€mouseOuté¼ æ ‡ç§»å‡ºå‡½æ•°ï¼›ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå¯¼å…¥ç»„åˆå¼å‡½æ•°ï¼Œä¼ å…¥å®½é«˜ä»¥åŠå¡ç‰‡çš„èŠ‚ç‚¹ï¼Œå¡ç‰‡èŠ‚ç‚¹åœ¨åé¢è¦ç”¨åˆ°ã€‚ 123456789101112131415161718&lt;template&gt; &lt;div class=&quot;card card1&quot; ref=&quot;card1&quot; :style=&quot;styles1&quot; @mousemove=&quot;mouseMove1&quot; @mouseout=&quot;mouseOut1&quot; &gt;Card1&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; ref &#125; from &quot;vue&quot;;import &#123; useMouse &#125; from &quot;./useMouse.js&quot;;const card1 = ref(null);const &#123; styles: styles1, mouseMove: mouseMove1, mouseOut: mouseOut1 &#125; = useMouse(434, 450, card1); // ä¼ å…¥å¡ç‰‡å®½é«˜&lt;/script&gt; æ¥ä¸‹æ¥å°±æ˜¯æœ€æœ€æœ€æœ€æ ¸å¿ƒçš„useMouseçš„ä»£ç äº†ï¼›æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œéœ€è¦åœ¨é¼ æ ‡ç§»åŠ¨çš„æ—¶å€™ï¼Œè®©å¡ç‰‡æ—‹è½¬å‘å‰å€¾æ–œå¯¹åº”çš„è§’åº¦ï¼Œè€Œåœ¨é¼ æ ‡ç¦»å¼€çš„æ—¶å€™ï¼Œåˆ™æ¸…ç©ºè§’åº¦æ ·å¼ï¼š 12345678910111213export function useMouse(width, height, cardEl) &#123; const styles = ref(&#x27;&#x27;); // ä¸€åŠçš„å®½åº¦ const halfWidth = width / 2; // ä¸€åŠçš„é«˜åº¦ const halfHeight = height / 2; const mouseMove = (ev) =&gt; &#123; // todo è®¾ç½®styles &#125; const mouseOut = (ev) =&gt; &#123; styles.value = &#x27;&#x27;; &#125;&#125; æˆ‘ä»¬æƒ³è±¡ä¸€ä¸‹ï¼Œé¼ æ ‡æŸä¸€æ—¶åˆ»çš„ä½ç½®å‡è®¾åœ¨å¡ç‰‡çš„å·¦ä¸Šæ–¹æŸä¸ªç‚¹ï¼Œè·å–é¼ æ ‡è·ç¦»å¡ç‰‡å·¦ä¸Šè§’çš„offsetXå’ŒoffsetYï¼Œæ—‹è½¬è§’åº¦éœ€è¦è®¡ç®—å‡ºè“è‰²æ¡†çš„é•¿å®½ï¼š ç»•ç€Yè½´æ—‹è½¬çš„è§’åº¦å°±æ˜¯è“è‰²æ¡†çš„é•¿åº¦é™¤ä»¥ä¸€åŠçš„å®½åº¦ï¼Œç»•ç€Xè½´æ—‹è½¬çš„è§’åº¦å°±æ˜¯è“è‰²æ¡†çš„é«˜åº¦é™¤ä»¥ä¸€åŠçš„å®½åº¦ã€‚ æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæœ€å¤§çš„æ—‹è½¬è§’åº¦MAX_DEGï¼Œç„¶åç”¨ä¸€ä¸ªç¬¨åŠæ³•ï¼Œåœ¨å››ä¸ªåŒºåŸŸåˆ†åˆ«è®¡ç®—å‡ºä¸åŒçš„è§’åº¦ï¼š 1234567891011121314151617181920212223// Xè½´å’ŒYè½´æœ€å¤§çš„ç¿»è½¬è§’åº¦const MAX_DEG = 10;const mouseMove = (ev) =&gt; &#123; const &#123; offsetX, offsetY &#125; = ev; let rotateX = 0; let rotateY = 0; if (offsetX &lt; halfWidth &amp;&amp; offsetY &lt; halfHeight) &#123; rotateY = ((halfWidth - offsetX) / halfWidth) * MAX_DEG; rotateX = -((halfHeight - offsetY) / halfHeight) * MAX_DEG; &#125; else if (offsetX &gt;= halfWidth &amp;&amp; offsetY &lt; halfHeight) &#123; rotateY = -((offsetX - halfWidth) / halfWidth) * MAX_DEG; rotateX = -((halfHeight - offsetY) / halfHeight) * MAX_DEG; &#125; else if (offsetX &lt; halfWidth &amp;&amp; offsetY &gt;= halfHeight) &#123; rotateY = ((halfWidth - offsetX) / halfWidth) * MAX_DEG; rotateX = ((offsetY - halfHeight) / halfHeight) * MAX_DEG; &#125; else if (offsetX &gt;= halfWidth &amp;&amp; offsetY &gt;= halfHeight) &#123; rotateY = -((offsetX - halfWidth) / halfWidth) * MAX_DEG; rotateX = ((offsetY - halfHeight) / halfHeight) * MAX_DEG; &#125; styles.value = `transform:perspective(1400px) rotateX($&#123;rotateX&#125;deg) rotateY($&#123;rotateY&#125;deg)`;&#125; è¿™é‡Œçš„CSS3çš„perspectiveæŒ‡å®šäº†è§‚å¯Ÿè€…ä¸å¹³é¢çš„è·ç¦»ï¼Œä½¿å…·æœ‰ä¸‰ç»´ä½ç½®å˜æ¢çš„å…ƒç´ äº§ç”Ÿé€è§†æ•ˆæœï¼Œå¦‚æœä¸è®¾ç½®å°±æ²¡æœ‰é€è§†çš„æ•ˆæœï¼›æˆ‘ä»¬çœ‹ä¸‹é¼ æ ‡çš„æ•ˆæœåŸºæœ¬å°±å¯ä»¥å®ç°3Då€¾æ–œçš„æ•ˆæœäº†ã€‚ ç»§ç»­å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œå››ä¸ªåŒºåŸŸå¤ªéº»çƒ¦äº†ï¼Œæˆ‘ä»¬åªè€ƒè™‘Xè½´å’ŒYè½´æ–¹å‘ä¸Šçš„rotateXå’ŒrotateYçš„è®¡ç®—æ–¹å¼ï¼Œä¸Šé¢ä»£ç æœ€ç»ˆå¯ä»¥ä¼˜åŒ–æˆä¸¤è¡Œï¼š 12345const mouseMove = (ev) =&gt; &#123; // çœç•¥å…¶ä»–ä»£ç  rotateX = -((halfHeight - offsetY) / halfHeight) * MAX_DEG; rotateY = ((halfWidth - offsetX) / halfWidth) * MAX_DEG;&#125; è¾‰å…‰æ•ˆæœ æ¥ä¸‹æ¥å°±æ˜¯é¼ æ ‡ç§»åŠ¨æ—¶å€™çš„èƒŒæ™¯è¾‰å…‰æ•ˆæœäº†ï¼Œæˆ‘ä»¬é¦–å…ˆå‘å¡ç‰‡ä¸‹æ’å…¥ä¸€ä¸ªdomèŠ‚ç‚¹ï¼Œç”¨æ¥æ¸²æŸ“è¾‰å…‰ï¼š 123456789export function useMouse(width, height, cardEl) &#123; let hoverEl = null; onMounted(() =&gt; &#123; hoverEl = document.createElement(&quot;div&quot;); hoverEl.className = &quot;hover-element&quot;; cardEl.value.append(hoverEl); &#125;);&#125; ç»™hover-elementå…ƒç´ è®¾ç½®æ ·å¼ï¼Œåœ¨å¡ç‰‡æ‚¬æµ®çš„æ—¶å€™æ‰è®©å…ƒç´ æ˜¾ç¤ºå‡ºæ¥ï¼š 123456789101112131415161718192021.card &#123; &amp;:hover &#123; color: #fff; .hover-element &#123; visibility: visible; &#125; &#125; .hover-element &#123; background: rgba(77, 82, 232, 0.6); border-radius: 50%; -webkit-filter: blur(64px); filter: blur(64px); width: 300px; height: 300px; left: 0px; top: 0px; position: absolute; visibility: hidden; z-index: -1; &#125;&#125; åœ¨é¼ æ ‡ç§»åŠ¨æ—¶ï¼Œå»è®¾ç½®æ‚¬æµ®å…ƒç´ çš„ä½ç½®åç§»ï¼š 12345678910// æ‚¬æµ®é«˜äº®å…ƒç´ çš„å°ºå¯¸const HOVER_SIZE = 300;const mouseMove = (ev) =&gt; &#123; if (hoverEl) &#123; const hX = offsetX - HOVER_SIZE / 2; const hY = offsetY - HOVER_SIZE / 2; hoverEl.style = `transform: translate($&#123;hX&#125;px, $&#123;hY&#125;px);`; &#125;&#125; ä½†æ˜¯æˆ‘ä»¬è¿™æ ·è®¾ç½®ä¹‹åä¼šå‘ç°ï¼Œåé¢çš„hover-elementå…ƒç´ åœ¨é¼ æ ‡ç§»åŠ¨çš„æ—¶å€™ï¼Œä¸€ç›´åœ¨ä¸æ–­çš„é—ªç°ï¼š è¿™æ˜¯å› ä¸ºé¼ æ ‡åœ¨å¡ç‰‡ä¸Šç§»åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»™hover-elementå…ƒç´ è®¾ç½®äº†åç§»ï¼Œåç§»çš„hover-elementå…ƒç´ é˜»æ–­äº†mousemoveäº‹ä»¶ï¼Œè®©hover-elementå…ƒç´ åˆå›åˆ°äº†åŸç‚¹ï¼Œåœ¨é¼ æ ‡ä¸æ–­ç§»åŠ¨æ—¶ï¼Œå¯¼è‡´äº†è¾‰å…‰å‘ˆç°å‡ºäº†é—ªç°æ•ˆæœã€‚ æˆ‘ä»¬å¯ä»¥åœ¨å¡ç‰‡ä¸‹é¢å†åµŒå¥—ä¸€å±‚divä½œä¸ºå¡ç‰‡å†…å®¹ï¼Œè®©å®ƒå§‹ç»ˆä½äºhover-elementå…ƒç´ çš„ä¸Šæ–¹ï¼š 1234567891011121314151617&lt;template&gt;&lt;div class=&quot;card card1&quot; ref=&quot;card1&quot; :style=&quot;styles1&quot;&gt; &lt;div class=&quot;card-cont&quot; @mousemove=&quot;mouseMove1&quot; @mouseout=&quot;mouseOut1&quot;&gt; å¡ç‰‡å†…å®¹ &lt;/div&gt;&lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot;&gt;.card-cont &#123; position: absolute; z-index: 1; width: 100%; height: 100%;&#125;&lt;/style&gt; è¿™æ ·æˆ‘ä»¬çš„è¾‰å…‰æ•ˆæœå°±å¾ˆæµç•…äº†ã€‚ ä¿®æ­£åå·® æˆ‘ä»¬å°†æ–‡æ¡ˆå’Œå›¾ç‰‡æ·»åŠ åˆ°å¡ç‰‡å†…å®¹åä¼šå‘ç°ï¼Œå½“é¼ æ ‡æ‚¬æµ®åˆ°å›¾ç‰‡å…ƒç´ ä¸Šæ—¶ï¼Œè¾‰å…‰å…ƒç´ ä¼šå‡ºç°åå·®ï¼›ç”±äºç¬”è€…è¿™è¾¹æ˜¯å°†å›¾ç‰‡å…ƒç´ è®¾ç½®æˆabsoluteçš„ï¼Œè€ŒoffsetX/offsetYæ˜¯ç›¸å¯¹åå·®ï¼Œå½“æ‚¬æµ®åˆ°ç›®æ ‡å›¾ç‰‡ä¸Šæ˜¯ï¼Œoffsetæ˜¯ç›¸å¯¹äºå›¾ç‰‡çš„ä½ç§»ï¼Œè€Œä¸æ˜¯ç›¸å¯¹äºå¤–å±‚å…ƒç´ ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´é”™ä½ã€‚ æˆ‘ä»¬åœ¨mouseç§»åŠ¨æ—¶ï¼Œè·å–å›¾ç‰‡çš„leftå’Œtopï¼Œå°†å…¶æ•°æ®åŠ åˆ°offsetX/offsetYä¸Šï¼Œå³å¯ä¿®æ­£åå·®ï¼š 12345678910111213141516171819202122/** * è§£æå­—ç¬¦ä¸²ä¸­çš„æ•°å€¼ ä¾‹å¦‚autoã€120px */const parseNumber = (str) =&gt; &#123; if (!str) return 0; const mt = str.match(/(\\d*)px/); if (mt) &#123; return parseFloat(mt[1]); &#125; return 0;&#125;;const mouseMove = (ev) =&gt; &#123; let &#123; offsetX, offsetY &#125; = ev; // ä¿®æ­£offsetåå·® if (ev.target &amp;&amp; ev.target.nodeName === &quot;IMG&quot;) &#123; let style = getComputedStyle(ev.target); offsetX += parseNumber(style.left); offsetY += parseNumber(style.top); &#125;&#125; è¿™é‡ŒgetComputedStyleå®æ—¶è·å–å›¾ç‰‡çš„leftå’Œtopä¼šæ¯”è¾ƒè€—è´¹æ€§èƒ½ï¼Œè¿™é‡Œçš„ä¼˜åŒ–ç‚¹ï¼Œå¯ä»¥åœ¨mountedçš„æ—¶å€™æå‰è·å–å›¾ç‰‡çš„left/topï¼Œæå‰å°†å…¶å­˜å‚¨èµ·æ¥ã€‚ æœ¬æ–‡æœ€ç»ˆçš„å®ç°æ•ˆæœå¯ä»¥æˆ³è¿™é‡ŒæŸ¥çœ‹ã€‚ æ€»ç»“ æœ¬æ–‡é¦–å…ˆæ€»ç»“äº†é¼ æ ‡äº‹ä»¶ä¸­offsetX/clientX/pageX/screenXæ¯ä¸ªå±æ€§çš„ç”¨æ³•ï¼Œäº†è§£äº†æ¯ä¸ªå±æ€§çš„ç”¨æ³•å’ŒåŒºåˆ«ï¼›ç„¶åå®ç°äº†3Då€¾æ–œæ—‹è½¬å’Œè¾‰å…‰å…ƒç´ çš„æ•ˆæœï¼Œå°†å…·ä½“çš„å®ç°é€»è¾‘æŠ½å–åˆ°äº†ç‹¬ç«‹çš„jsæ–‡ä»¶ä¸­ï¼Œæ–¹ä¾¿å¤ç”¨é€»è¾‘ï¼›æœ€åæˆ‘ä»¬å‘ç°æŸäº›å…ƒç´ ä¸‹é¼ æ ‡æ‚¬æµ®çš„æ•ˆæœä¼šæœ‰åå·®ï¼Œæ’æŸ¥åŸå› åå¯¹åå·®è¿›è¡Œä¿®æ­£ã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€è¾‰å…‰å¡ç‰‡ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"CSS","slug":"CSS","permalink":"https://xieyufei.com/tags/CSS/"}]},{"title":"Threejsæµ·æ°´æ•ˆæœå­¦ä¹ ","date":"2024-01-30T12:12:00.000Z","path":"2024/01/30/Threejs-Ocean.html","text":"Threejsä¸­æµ·å¤©ä¸€è‰²çš„æ•ˆæœæ˜¯æ¯”è¾ƒå£®è§‚å¥½ç©çš„ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä¸€æ­¥æ­¥å®ç°è¯¥æ•ˆæœï¼ŒåŒæ—¶ä¹Ÿèƒ½æ·±å…¥ç†è§£ç€è‰²å™¨ä¸­çš„Uniformså‚æ•°çš„ä½œç”¨å’Œå½’ä¸€åŒ–çš„åŸç†åŠæ•ˆæœã€‚ ç¯å¢ƒå‡†å¤‡ é¦–å…ˆæˆ‘ä»¬æ­å»ºThreejsçš„åŸºæœ¬ç¯å¢ƒï¼Œæˆ‘ä»¬å°†åˆå§‹åŒ–çš„å…ƒç´ éƒ½å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ï¼›åœ¨ä½¿ç”¨æ—¶ï¼Œç›´æ¥åˆå§‹åŒ–ç±»å³å¯ï¼š 123456789101112131415161718192021222324252627282930313233343536class Index &#123; constructor() &#123; // åˆå§‹åŒ–åœºæ™¯ this.scene = new Scene(); // åˆå§‹åŒ–ç›¸æœº this.camera = new PerspectiveCamera( 55, window.innerWidth / window.innerHeight, 1, 20000 ); this.camera.position.copy(new Vector3(30, 30, 100)); this.camera.lookAt(new Vector3(0, 0, 0)); this.renderer = new WebGLRenderer(&#123; //å¼€å¯æŠ—é”¯é½¿ antialias: true, physicallyCorrectLights: true, &#125;); this.renderer.setSize(window.innerWidth, window.innerHeight); this.renderer.setPixelRatio(window.devicePixelRatio * 2); document.getElementById(&quot;webgl-output&quot;).appendChild(renderer.domElement); this.scene.add(new AxesHelper(10)); this.controls = new OrbitControls(this.camera, this.renderer, false); this.render(); &#125; render() &#123; this.controls.update(this.clock.getDelta()); this.renderer.render(this.scene, this.camera); requestAnimationFrame(this.render.bind(this)); &#125;&#125; ä»£ç æ¯”è¾ƒå¤šï¼Œè¿™é‡Œä¸»è¦å°±æ˜¯æ­å»ºäº†åœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨ã€è½¨é“æ§åˆ¶å™¨ç­‰åŸºæœ¬çš„Threejså…ƒç´ ï¼Œå®ç°ä¸€ä¸ªThreeç”»å¸ƒä¸­è¯¥æœ‰çš„å…ƒç´ ï¼›ç„¶åæŠŠæˆ‘ä»¬çš„ç±»æ”¾åˆ°é¡µé¢ä¸­åˆå§‹åŒ–ï¼›åœ¨vueä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ”¾åˆ°onMountedé’©å­å‡½æ•°ä¸­æ‰§è¡Œï¼š 12345678910&lt;template&gt; &lt;div id=&quot;webgl-output&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script setup&gt;import &#123; onMounted &#125; from &quot;vue&quot;;import Ocean from &quot;./index&quot;;onMounted(() =&gt; &#123; new Ocean();&#125;);&lt;/script&gt; è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åªè¦ä¸€æ”¹å˜é¡µé¢çš„å®½é«˜å¤§å°ï¼Œæˆ‘ä»¬çš„ç”»å¸ƒç”±äºæ²¡æœ‰åŠæ—¶æ›´æ–°ï¼Œå°±ä¼šå‡ºç°ç©ºç™½çš„åŒºåŸŸï¼›æˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®šé¡µé¢å¤§å°ç›‘å¬äº‹ä»¶ï¼Œé‡æ–°æ›´æ–°rendererå’Œç›¸æœºï¼š 1234567891011121314class Index &#123; constructor() &#123; this._resizeFn = this.resizeFn.bind(this); window.addEventListener(&quot;resize&quot;, this._resizeFn); &#125; resizeFn() &#123; this.renderer.setSize(window.innerWidth, window.innerHeight); this.camera.aspect = window.innerWidth / window.innerHeight; this.camera.updateProjectionMatrix(); &#125; beforeDestroy() &#123; window.removeEventListener(&quot;resize&quot;, this._resizeFn); &#125;&#125; åœ¨vueä¸­ï¼Œé¡µé¢unmountæ—¶è°ƒç”¨beforeDestroyå‡½æ•°ï¼Œè§£é™¤ç›‘å¬äº‹ä»¶ï¼š 1234567let ocean;onMounted(() =&gt; &#123; ocean = new Ocean();&#125;);onBeforeUnmount(() =&gt; &#123; ocean &amp;&amp; ocean.beforeDestroy();&#125;); æ·»åŠ ç‰©ä½“ ç¯å¢ƒåˆæ­¥æ­å»ºå¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥å‘ç”»å¸ƒä¸Šæ·»åŠ ç‰©ä½“äº†ï¼Œè¿™é‡Œæˆ‘ä»¬å…·ä½“æ¥å­¦ä¹ æ°´Waterã€å¤©ç©ºSkyç­‰ç‰©ä½“çš„ä½¿ç”¨æ–¹å¼ã€‚ æ·»åŠ æµ·æ°´ è¿™é‡Œæˆ‘ä»¬éœ€è¦ä»Three.jsæºç ä¸­è·å–ä¸€ä¸ªæ³•çº¿è´´å›¾ï¼Œæ‹·è´åˆ°æˆ‘ä»¬é¡¹ç›®publicç›®å½•ï¼š 1$ cp three.js/examples/textures/waternormals.jpg demos/public/textures/ æ‰€è°“çš„æ³•çº¿è´´å›¾ï¼ˆNormal Mapï¼‰æ˜¯ä¸€ç§çº¹ç†æ˜ å°„æŠ€æœ¯ï¼Œç”¨äºåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æ¨¡æ‹Ÿç‰©ä½“è¡¨é¢çš„ç»†èŠ‚å’Œå‡ ä½•å½¢çŠ¶ã€‚å®ƒé€šè¿‡ä½¿ç”¨RGBé¢œè‰²å€¼æ¥å­˜å‚¨æ¯ä¸ªåƒç´ ç‚¹çš„æ³•çº¿æ–¹å‘ä¿¡æ¯ã€‚ æ³•çº¿è´´å›¾ä¹Ÿå¹¿æ³›åº”ç”¨äºæ¸¸æˆå¼€å‘ã€åŠ¨ç”»åˆ¶ä½œã€è™šæ‹Ÿç°å®ç­‰é¢†åŸŸï¼Œä»¥æä¾›æ›´é€¼çœŸå’Œä¼˜åŒ–çš„è§†è§‰ä½“éªŒã€‚ æˆ‘ä»¬æ‰“å¼€å¤åˆ¶æ³•çº¿è´´å›¾çœ‹ä¸€ä¸‹ï¼Œæ˜¯ä¸€å¼ åè“ç´«è‰²çš„å›¾ç‰‡ï¼› é€šè¿‡æ°´é¢çš„æ³•çº¿è´´å›¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¨¡æ‹Ÿæ°´é¢çš„æ³¢çº¹æ•ˆæœä»¥åŠå¤ªé˜³å…‰çš„ç…§å°„æ•ˆæœäº†ï¼›æˆ‘ä»¬ä»threejsä¸­å¼•å…¥Waterç±»ï¼Œæ„å»ºæ°´å¹³é¢ç‰©ä½“ï¼š 12345678910111213141516171819import &#123; Water &#125; from &quot;three/examples/jsm/objects/Water&quot;;class Index &#123; initMeshes() &#123; this.water = new Water(new PlaneGeometry(10000, 10000), &#123; textureWidth: 512, textureHeight: 512, waterNormals: new TextureLoader().load( &quot;/textures/waternormals.jpg&quot;, (texture) =&gt; &#123; texture.wrapS = texture.wrapT = RepeatWrapping; &#125; ), waterColor: 0x0072ff, &#125;); // ç¿»è½¬å¹³é¢ this.water.rotation.x = -Math.PI / 2; this.scene.add(this.water); &#125;&#125; è¿™é‡Œæˆ‘ä»¬Wateræ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç‰©ä½“ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¸€ä¸ªè¾ƒå¤§çš„PlaneGeometryä½œä¸ºæ°´å¹³é¢ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯WaterOptionsï¼Œå…¶ä¸­ä¸»è¦çš„æ˜¯waterNormalså±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬çš„æ³•çº¿è´´å›¾ï¼Œé€šè¿‡TextureLoaderåŠ è½½ï¼ŒåŠ è½½å®Œæˆåæˆ‘ä»¬è®©å®ƒåœ¨Så’ŒTæ–¹å‘ä¸Šéƒ½é‡å¤å¹³é“ºå¼€æ¥ï¼›è¿˜æœ‰ä¸€ä¸ªå±æ€§æ˜¯waterColorï¼Œå°±æ˜¯æ°´é¢çš„åŸºæœ¬é¢œè‰²ï¼Œæˆ‘ä»¬é€‰ä¸€ä¸ªæ¥è¿‘æµ·æ°´çš„è“è‰²å³å¯ã€‚ å®Œæ•´çš„WaterOptionså‚æ•°å¦‚ä¸‹ï¼Œå…¶ä»–å±æ€§çš„å«ä¹‰åé¢ä¼šè¿›è¡Œè°ƒè¯•ï¼š 123456789101112131415export interface WaterOptions &#123; textureWidth?: number; textureHeight?: number; clipBias?: number; alpha?: number; time?: number; waterNormals?: Texture; sunDirection?: Vector3; sunColor?: ColorRepresentation; waterColor?: ColorRepresentation; eye?: Vector3; distortionScale?: number; side?: Side; fog?: boolean;&#125; æˆ‘ä»¬å…ˆæ‰“å¼€é¡µé¢çœ‹ä¸€ä¸‹æ•ˆæœï¼Œæµ·æ°´çš„çº¹ç†ä¹Ÿå‘ˆç°å‡ºæ¥äº†ï¼š æµ·æ°´çº¹ç†åŠ è½½åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æµ·æ°´æè´¨çš„uniformså±æ€§æ¥è®©çº¹ç†åŠ¨èµ·æ¥ï¼š 12345&#123; render() &#123; this.water.material.uniforms[&quot;time&quot;].value += 1.0 / 60; &#125;&#125; é‚£ä¹ˆè¿™é‡Œçš„uniformsæ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬æ›´æ”¹äº†timeçš„valueå°±å¯ä»¥è®©æ³¢çº¹åŠ¨èµ·æ¥å‘¢ï¼Ÿæˆ‘ä»¬æ‚¬æµ®æŸ¥çœ‹ä¸€ä¸‹Waterçš„æè´¨ï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ªShaderMaterialæè´¨ï¼š ShaderMaterialåœ¨å®šä¹‰é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¹‹å¤–ï¼Œè¿˜ä¼šå£°æ˜uniformså±æ€§ï¼Œå¯ä»¥ç»™é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨ä¸­çš„å˜é‡ä¼ å€¼ï¼Œè¾¾åˆ°ä¸åŒçš„æ¸²æŸ“æ•ˆæœï¼Œæ¯”å¦‚æˆ‘ä»¬æŸ¥çœ‹Water.jsçš„æºç å°±èƒ½çœ‹åˆ°å®ƒçš„uniformså±æ€§é‡Œé¢æœ‰ä¸€ä¸ªtimeå‚æ•°ï¼Œåˆå§‹åŒ–çš„valueæ˜¯0.0ï¼Œå› æ­¤æˆ‘ä»¬æ”¹å˜è¿™ä¸ªå€¼å°±å¯ä»¥æ§åˆ¶æ°´é¢æ³¢çº¹çš„æ¸²æŸ“æ•ˆæœäº†ã€‚ 123456789// three/examples/jsm/objects/Waterconst material = new THREE.ShaderMaterial(&#123; uniforms: &#123; // çœç•¥å…¶ä»–å‚æ•° &#x27;time&#x27;: &#123; value: 0.0 &#125;, &#125;, vertexShader: &#x27;ç€è‰²å™¨ä»£ç &#x27;,// é¡¶ç‚¹ç€è‰²å™¨ fragmentShader: &#x27;ç€è‰²å™¨ä»£ç &#x27;,// ç‰‡å…ƒç€è‰²å™¨&#125;); åœ¨åé¢å¤©ç©ºçš„æè´¨ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°uniformsä¸­æ›´å¤šå‚æ•°çš„ç”¨æ³•ã€‚ å¤©ç©º æµ·æ°´åšå®Œäº†ï¼Œæˆ‘ä»¬æ¥å®ç°å¤©ç©ºä¸­çš„æ•ˆæœï¼›è¿™é‡Œçš„å¤ªé˜³å’Œå¤©ç©ºæ˜¯ä¸€ä½“çš„ï¼ŒThree.jséƒ½é›†æˆåˆ°Skyç±»ä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦å»å•ç‹¬åšä¸€ä¸ªå¤ªé˜³çš„ç‰©ä½“ï¼Œåªè¦åˆå§‹åŒ–ä¸€ä¸ªå¤ªé˜³çš„ä½ç½®ï¼Œåç»­ä¼ å…¥å³å¯ï¼š 12345initMeshes() &#123; // å¤ªé˜³åˆå§‹åŒ–çš„ä½ç½® this.sun = new Vector3(-80, 5, -100); this.water.material.uniforms[&quot;sunDirection&quot;].value.copy(this.sun);&#125; è¿™é‡ŒWaterçš„sunDirectionæ˜¯ä¸€ä¸ªVector3å‘é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨copyå‡½æ•°å°†ä¼ å…¥çš„å¤ªé˜³xyzä½ç½®è¿›è¡Œèµ‹å€¼ã€‚æˆ‘ä»¬åœ¨åé¢è°ƒè¯•çš„æ—¶å€™ï¼Œåªè¦æ›´æ”¹å¤ªé˜³çš„ä½ç½®ï¼Œå°±å¯ä»¥åŒæ—¶æ›´æ”¹é˜³å…‰åœ¨æµ·æ°´å’Œå¤©ç©ºçš„æ•ˆæœï¼› 12345678910111213141516import &#123; Sky &#125; from &quot;three/examples/jsm/objects/Sky&quot;;class Index &#123; initMeshes() &#123; this.sky = new Sky(); this.sky.scale.setScalar(10000); this.sky.material.uniforms[&quot;sunPosition&quot;].value.copy(this.sun); this.sky.material.uniforms[&quot;turbidity&quot;].value = 1; this.sky.material.uniforms[&quot;rayleigh&quot;].value = 1.5; this.sky.material.uniforms[&quot;mieCoefficient&quot;].value = 0.005; this.sky.material.uniforms[&quot;mieDirectionalG&quot;].value = 0.8; this.scene.add(this.sky); &#125;&#125; è¿™é‡Œå®ä¾‹åŒ–äº†ä¸€ä¸ªå¤©ç©ºï¼ŒsetScalarè®¾ç½®äº†ä¸€ä¸ªæ”¾å¤§çš„å€æ•°ï¼Œæˆ‘ä»¬è·Ÿæµ·å¹³é¢è®¾ç½®æˆä¸€æ ·å¤§å°ï¼›uniformsä¸­çš„sunPositionå±æ€§ä¹Ÿæ˜¯å¤ªé˜³çš„ä½ç½®ï¼Œæˆ‘ä»¬ä¼ å…¥sunä½ç½®å³å¯ï¼›å…¶ä»–çš„ä¸€äº›å±æ€§ä¹Ÿæ˜¯è°ƒèŠ‚å¤©ç©ºçš„å‚æ•°ï¼Œæˆ‘ä»¬åœ¨ä¸‹é¢è°ƒè¯•çš„æ—¶å€™ä¼šè¯¦ç»†åˆ†ææ¯ä¸ªå‚æ•°çš„æ„ä¹‰ã€‚ åŠ ä¸Šå¤©ç©ºåï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹é¡µé¢çš„æ•ˆæœï¼Œç°åœ¨æ•´ä½“çš„æ•ˆæœå°±æ›´åŠ çš„çœŸå®äº†ï¼Œæœ‰ç§æµ·ä¸Šè½æ—¥ä½™æ™–çš„åœºæ™¯äº†ã€‚ æµ·æ°´ä¼˜åŒ– ä½†æ˜¯è¿™é‡ŒåŠ äº†å¤ªé˜³ä¹‹åï¼Œæ°´é¢æ˜¾ç¤ºä¼šæœ‰ç‚¹æ³›ç™½ï¼Œæ˜¯å› ä¸ºå¤ªé˜³çš„ä½ç½®çš„å‘é‡é•¿åº¦å¤ªé•¿ï¼›æˆ‘ä»¬ä¸Šé¢åˆå§‹åŒ–å¤ªé˜³ä½ç½®æ˜¯ä¸€ä¸ªVector3ä¸‰ç»´å‘é‡ï¼Œä¸è¿‡è¿™å¹¶ä¸è¡¨ç¤ºå¤ªé˜³å®é™…åœ¨å¤©ç©ºä¸­çš„çœŸå®ä½ç½®ï¼Œåªæ˜¯é€šè¿‡å‘é‡çš„è§’åº¦æ–¹ä½æ¥æ¨¡æ‹Ÿå¤ªé˜³çš„ä½ç½®ï¼›è€Œå‘é‡æ˜¯æœ‰é•¿åº¦çš„ï¼Œå‘é‡è¶Šé•¿ï¼Œå¤ªé˜³å…‰å°±è¶Šå¼ºçƒˆï¼Œæ°´é¢ä¹Ÿå°±æ›´ç™½äº†ã€‚ å› æ­¤ï¼Œè¿™é‡Œéœ€è¦ä»‹ç»ä¸€ä¸‹å½’ä¸€åŒ–çš„æ¦‚å¿µï¼Œå½’ä¸€åŒ–åœ¨æœºå™¨å­¦ä¹ ä¸­ä¹Ÿæœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼Œå°±æ˜¯å°†æ‰€æœ‰çš„æ•°æ®å‹ç¼©åˆ°0åˆ°1ä¹‹é—´çš„èŒƒå›´ï¼›Three.jsä¸­çš„å½’ä¸€åŒ–ï¼Œå…¶å®å°±æ˜¯å°†å‘é‡çš„xyzç­‰æ¯”ä¾‹ç¼©æ”¾ï¼Œå°†æ•´ä¸ªå‘é‡çš„é•¿åº¦ç¼©æ”¾åˆ°é•¿åº¦ä¸º1ã€‚ æ›´å¤šå‘é‡çš„å­¦ä¹ ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šå‘é‡æ–¹å‘(å½’ä¸€åŒ–.normalize) æ¯”å¦‚ä¸‹é¢çš„å‘é‡p1ï¼Œæ ¹æ®åˆä¸­å­¦çš„ä¸¤ç‚¹ä¹‹é—´è®¡ç®—å…¬å¼ï¼Œå®ƒçš„é•¿åº¦æ˜¯âˆš(10*2+20*2+30*2)ï¼Œç®—å‡ºæ¥é•¿åº¦å¤§æ¦‚æ˜¯37å¤šï¼Œè€Œé€šè¿‡normalizeå‡½æ•°ä¹‹åï¼Œæˆ‘ä»¬å†å»è·å–lengthï¼Œå¾—åˆ°çš„å°±æ˜¯å•ä½1ï¼š 12345const p1 = new Vector3(10, 20, 30);console.log(p1.length()); //37.416573867739416// å°†å‘é‡å½’ä¸€åŒ–å¤„ç†p1.normalize();console.log(p1.length()); // 1 å› æ­¤ï¼Œå›åˆ°å¤ªé˜³ä½ç½®çš„è®¾ç½®ï¼Œæˆ‘ä»¬ä¼ åˆ°sunDirection.valueä¸­åï¼Œcopyå‡½æ•°ä¼šå°†ä¼ å…¥çš„sunä½ç½®å¤åˆ¶åˆ°sunDirectionå‘é‡ï¼Œå¹¶è¿”å›è‡ªèº«å‘é‡ï¼›æœ€åå†è°ƒç”¨ä¸€ä¸‹normalizeå‡½æ•°å°±å¯ä»¥å°†å‘é‡è®¾ç½®æˆå•ä½å‘é‡äº†ï¼š copyå‡½æ•°ä½œç”¨å°†æ‰€ä¼ å…¥Vector3çš„xã€yå’Œzå±æ€§å¤åˆ¶ç»™è¿™ä¸€Vector3ï¼Œå¹¶è¿”å›è‡ªèº«ã€‚ 12345this.sun = new Vector3(-80, 5, -100);this.water.material .uniforms[&quot;sunDirection&quot;].value .copy(this.sun) .normalize(); æˆ‘ä»¬é€šè¿‡æŸ¥çœ‹Water.jsæºç ä¸­sunDirectionåˆå§‹å€¼ï¼Œå‘ç°æ˜¯Vector3( 0.70707, 0.70707, 0 )ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå½’ä¸€åŒ–çš„å‘é‡ã€‚ å†æ¬¡çœ‹é¡µé¢æ•ˆæœï¼Œæˆ‘ä»¬å‘ç°æµ·æ°´ä¹Ÿæ›´åŠ çš„æŸ”å’Œäº†ï¼Œä»¿ä½›ä½ å¥³æœ‹å‹çœ‹ä½ çš„çœ¼ç¥ä¸€æ ·çš„æŸ”å’Œï¼š å¤šé¢ä½“ åœ¨Three.jsçš„Demoä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå¤šé¢ä½“åœ¨ä¸åœçš„ä¸Šä¸‹æµ®æ²‰ï¼Œå¤–é¢çš„æè´¨è¢«æµ·æ°´å’Œå¤©ç©ºæ‰€æµ¸æŸ“ï¼Œå°±åƒç”Ÿæ´»åœ¨å¤§åŸå¸‚çš„æˆ‘ä»¬ä¸€æ ·ï¼Œæ²¾æŸ“ç€ä¸–ä¿—æ°”æ¯ï¼Œéšæ³¢é€æµã€‚ã€‚ã€‚ã€‚ æˆ‘ä»¬é¦–å…ˆæ„å»ºä¸€ä¸ªäºŒåé¢ä½“çš„çƒå½¢ç‰©ä½“ï¼š 12345678910111213class Index &#123; initMeshes() &#123; const geometry = new IcosahedronBufferGeometry(20, 1); const material = new MeshStandardMaterial(&#123; roughness: 0, side: DoubleSide, flatShading: true, &#125;); this.cube = new Mesh(geometry, material); this.scene.add(this.cube); &#125;&#125; åœ¨æ¸²æŸ“çš„æ—¶å€™ï¼Œæ§åˆ¶yè½´æ–¹å‘åšsinå‡½æ•°è¿åŠ¨ï¼ŒåŒæ—¶ç»•ç€xè½´å’Œzè½´ä¸æ–­çš„æ—‹è½¬ï¼š 12345678class Index &#123; render() &#123; const now = Date.now(); this.cube.position.y = Math.sin(now * 0.001) * 20 + 5; this.cube.rotation.x = now * 0.001 * 0.5; this.cube.rotation.z = now * 0.001 * 0.5; &#125;&#125; è¿™æ—¶ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„MeshStandardMaterialæè´¨ï¼Œå› æ­¤æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸€ä¸ªç°è‰²çš„ï¼Œå…‰æ»‘çš„çƒä½“åœ¨æ°´é¢ä¸Šä¸‹æ¼‚æµ®ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è®©ç¯å¢ƒçš„å…‰ç…§å°„åˆ°åœ†çƒçš„è¡¨é¢ï¼Œå¯ä»¥ä½¿ç”¨PMREMGeneratorï¼Œå®ƒçš„å…¨ç§°å«é¢„è®¡ç®—è¾å°„åº¦ç¯å¢ƒè´´å›¾ï¼ˆpre-computed radiance environment mapï¼ŒPMREMï¼‰ç”Ÿæˆå™¨ï¼ŒPMREMGeneratorå¯ä»¥æ ¹æ®å½“å‰åœºæ™¯å’Œå…‰ç…§è®¡ç®—å‡ºè¾å°„åº¦ç¯å¢ƒè´´å›¾ï¼Œå¹¶å°†å…¶ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ 1234567891011import &#123; PMREMGenerator &#125; from &quot;three&quot;;class Index &#123; initMeshes() &#123; this.pmremGenerator = new PMREMGenerator(this.renderer); if (this.renderTarget) &#123; this.renderTarget.dispose(); &#125; this.renderTarget = this.pmremGenerator.fromScene(this.scene); this.scene.environment = this.renderTarget.texture; &#125;&#125; å®ƒçš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œæ„å»ºä¸€ä¸ªç±»ï¼Œç„¶åè°ƒç”¨fromSceneä»å½“å‰åœºæ™¯ä¸­ç”Ÿæˆè¾å°„ç¯å¢ƒè´´å›¾ï¼Œèµ‹å€¼ç»™scene.environmentã€‚ æ§åˆ¶è°ƒè¯• ä¸Šé¢æˆ‘ä»¬åˆ›å»ºäº†è“å¤©ã€æµ·æ°´ç­‰ç‰©ä½“ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æè´¨çš„uniformså±æ€§ä¸­æœ‰å¾ˆå¤šå‚æ•°ï¼Œä½†å¯¹æ¯ä¸ªå‚æ•°çš„ç”¨æ³•å´å¹¶ä¸æ¸…æ¥šï¼›æœ¬èŠ‚æˆ‘ä»¬å°±çœ‹å®é™…çœ‹ä¸‹æ¯ä¸ªå‚æ•°çš„å®é™…æ•ˆæœã€‚ å¤ªé˜³ä½ç½®è°ƒè¯• æˆ‘ä»¬åœ¨åˆ›å»ºç‰©ä½“ä¹‹åï¼Œå…ˆæ¥æ·»åŠ å¤ªé˜³ä½ç½®çš„è°ƒè¯•çœ‹ä¸‹æ•ˆæœï¼š 1234567891011121314151617181920212223242526272829import * as dat from &quot;dat.gui&quot;;class Index &#123; constructor() &#123; this.gui = new dat.GUI(); this.initMeshes(); this.enableGui(); &#125; enableGui() &#123; const folderSun = this.gui.addFolder(&quot;å¤ªé˜³ä½ç½®&quot;); folderSun .add(this.sun, &quot;x&quot;, -100, 100) .onChange(this.updateSunPosition.bind(this)); folderSun .add(this.sun, &quot;y&quot;, -100, 100) .onChange(this.updateSunPosition.bind(this)); folderSun .add(this.sun, &quot;z&quot;, -100, 100) .onChange(this.updateSunPosition.bind(this)); &#125; // æ›´æ–°å¤ªé˜³çš„ä½ç½® updateSunPosition() &#123; this.water.material.uniforms[&quot;sunDirection&quot;].value .copy(this.sun) .normalize(); this.sky.material.uniforms[&quot;sunPosition&quot;].value.copy(this.sun); &#125;&#125; é€šè¿‡addFolderå•ç‹¬åˆ›å»ºä¸€ä¸ªå•ç‹¬å±•å¼€çš„æ–‡ä»¶èœå•ï¼Œç„¶ååƒé‡Œé¢æ·»åŠ å¯¹åº”çš„å˜é‡è®¾ç½®ï¼›ç”±äºè¿™é‡Œæˆ‘ä»¬å·²ç»æœ‰äº†å…¨å±€çš„this.sunå˜é‡ï¼Œå®ƒé‡Œé¢ä¹Ÿæœ‰xyzå±æ€§ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥æ‹¿æ¥ç”¨å³å¯ã€‚æ›´æ–°å‚æ•°åï¼Œæˆ‘ä»¬éœ€è¦åŒæ­¥æ›´æ–°waterå’Œskyçš„uniformsï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬æŠ½ç¦»ä¸€ä¸ªå•ç‹¬çš„å‡½æ•°updateSunPositionã€‚ æˆ‘ä»¬æ”¹å˜å¤ªé˜³æ–¹ä½åï¼Œå‘ç°å°çƒè¡¨é¢çš„å…‰ç…§è¾å°„å¼ºåº¦è¿˜æ˜¯æ²¡æœ‰æ”¹å˜ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨äº†pmremGenerator.fromSceneç”Ÿæˆäº†è¾å°„ç¯å¢ƒè´´å›¾ï¼›å› æ­¤åœ¨updateSunPositionå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å†æ¬¡è°ƒç”¨ï¼Œç»™å°çƒè¡¨é¢è¿›è¡Œé‡æ–°æ¸²æŸ“ï¼š 12345678910class Index &#123; updateSunPosition() &#123; // å…¶ä»–ä»£ç ... if (this.renderTarget) &#123; this.renderTarget.dispose(); &#125; this.renderTarget = this.pmremGenerator.fromScene(this.scene); this.scene.environment = this.renderTarget.texture; &#125;&#125; æµ·æ°´è°ƒè¯• æˆ‘ä»¬è¿˜è®°å¾—æµ·æ°´çš„WaterOptionså‚æ•°ä¸­æœ‰å¾ˆå¤šçš„å±æ€§å­—æ®µï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¸åŒå±æ€§çš„æ•ˆæœï¼Œé¦–å…ˆæ˜¯timeå±æ€§ï¼Œæ§åˆ¶æµ·æ°´æ³¢æµªèµ·ä¼çš„é€Ÿåº¦ï¼Œæˆ‘ä»¬å•ç‹¬åˆ›å»ºä¸€ä¸ªå‚æ•°å˜é‡ï¼š 1234567891011121314&#123; enableGui() &#123; const folderWater = this.gui.addFolder(&quot;æµ·æ°´&quot;); this.waterParams = &#123; speed: 1.0, &#125;; folderWater.add(this.waterParams, &quot;speed&quot;, 0, 10).name(&quot;æ°´æµé€Ÿåº¦&quot;).step(0.1); &#125; render() &#123; - this.water.material.uniforms[&quot;time&quot;].value += 1.0 / 60; + this.water.material.uniforms[&quot;time&quot;].value += this.waterParams.speed / 60; &#125;&#125; åœ¨renderå‡½æ•°æ¸²æŸ“çš„æ—¶å€™ï¼Œå°†å›ºå®šå˜é‡1.0æ›¿æ¢æˆæˆ‘ä»¬çš„å‚æ•°å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æ•ˆæœã€‚ é™¤äº†timeï¼Œè¿˜æœ‰ä¸¤ä¸ªå±æ€§alphaå’ŒdistortionScaleå¯ä»¥åŠ åˆ°æˆ‘ä»¬çš„è°ƒè¯•é¢æ¿è°ƒè¯•ï¼Œalphaæ§åˆ¶é€æ˜é€šé“çš„å€¼ï¼Œè‰²å€¼è¶Šå°è¶Šæ³›ç™½ï¼›è€ŒdistortionScaleæ§åˆ¶æ°´é¢æ³¢çº¹çš„æ‰­æ›²ç¨‹åº¦ï¼Œæ•°å€¼è¶Šå¤§ï¼Œæ³¢çº¹è¶Šæ‰­æ›²ã€‚ 1234567891011121314151617181920&#123; enableGui()&#123; this.waterParams = &#123; speed: 1.0, alpha: 1.0, distortionScale: 20, &#125;; folderWater.add(this.waterParams, &quot;alpha&quot;, 0, 1) .onChange((value) =&gt; &#123; this.water.material.uniforms[&quot;alpha&quot;].value = value; &#125;); folderWater .add(this.waterParams, &quot;distortionScale&quot;, 0, 240, 0.1) .name(&quot;æ‰­æ›²æ¯”ä¾‹&quot;) .onChange((value) =&gt; &#123; this.water.material.uniforms[&quot;distortionScale&quot;].value = value; &#125;); &#125;&#125; æˆ‘ä»¬å°†å±æ€§æ·»åŠ åˆ°guiä¸­è°ƒè¯•æ—¶é»˜è®¤å±•ç¤ºå±æ€§çš„è‹±æ–‡åç§°ï¼Œæ¯”å¦‚è¿™é‡Œçš„distortionScaleï¼Œå¾ˆå¤šæ—¶å€™ä¼šä¸çŸ¥é“è¿™ä¸ªå±æ€§çš„ä½œç”¨ï¼›å› æ­¤æˆ‘ä»¬åŠ ä¸ªnameå‡½æ•°ç»™å®ƒä¸€ä¸ªä¸­æ–‡çš„åç§°ï¼Œåœ¨è°ƒè¯•æ—¶æ›´å®¹æ˜“çŸ¥é“å…¶ä½œç”¨ã€‚ è¿™é‡Œå°±ä¸æˆªå›¾å±•ç¤ºå…·ä½“æ•ˆæœäº†ï¼Œå¤§å®¶å¯ä»¥ç‚¹å‡»è¿™é‡Œè‡ªå·±æ‰‹åŠ¨è°ƒè¯•æŸ¥çœ‹æ•ˆæœã€‚ å¤©ç©ºå‚æ•°è°ƒè¯• ä¸‹é¢å°±æ¥è°ƒè¯•å¤©ç©ºçš„å‚æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸‹æœ€é‡è¦çš„ä¸¤ä¸ªå‚æ•°ï¼Œturbidityæµ‘æµŠåº¦å’Œrayleighé”åˆ©å€¼ï¼›è¿˜æ˜¯å’Œä¸Šé¢ä¸€ä¸ªï¼Œæˆ‘ä»¬åœ¨guié‡Œç»™å¤©ç©ºå•ç‹¬åˆ›å»ºä¸€ä¸ªæŠ˜å çš„èœå•ï¼š 123456789101112131415161718192021&#123; enableGui() &#123; const folderSky = this.gui.addFolder(&quot;å¤©ç©º&quot;); this.skyParams = &#123; turbidity: 1, rayleigh: 1.5, &#125;; folderSky .add(this.skyParams, &quot;turbidity&quot;, 0, 100) .name(&quot;æµ‘æµŠåº¦&quot;) .onChange((value) =&gt; &#123; this.sky.material.uniforms[&quot;turbidity&quot;].value = value; &#125;); folderSky .add(this.skyParams, &quot;rayleigh&quot;, 0, 100) .name(&quot;é”åˆ©å€¼&quot;) .onChange((value) =&gt; &#123; this.sky.material.uniforms[&quot;rayleigh&quot;].value = value; &#125;); &#125;&#125; æµ‘æµŠåº¦turbidityå¤§æ¦‚çš„æ•ˆæœå°±æ˜¯å¤ªé˜³è¢«äº‘å±‚é®æŒ¡çš„å…‰æ™•çš„æµ‘æµŠç¨‹åº¦ï¼Œæ•°å€¼è¶Šå°ï¼Œå¤ªé˜³çš„è½®å»“å°±è¶Šæ¸…æ™°ï¼›é”åˆ©å€¼rayleighåˆ™æ›´åƒæ˜¯å¤ªé˜³è¢«ä¹Œäº‘é®ä½çš„æ„Ÿè§‰ï¼Œæ•°å€¼è¶Šå¤§è¶Šæœ‰æ—¥è½è¥¿å±±çš„æ„Ÿè§‰ã€‚ æœ€ç»ˆæ‰€æœ‰è°ƒè¯•æ•ˆæœå¯ä»¥ç‚¹å‡»è¿™é‡ŒæŸ¥çœ‹ã€‚ æ€»ç»“ å­¦ä¹ Three.jså¾ˆç—›è‹¦çš„ä¸€ç‚¹å°±æ˜¯å¾ˆå¤šæ—¶å€™ä¸çŸ¥é“è¿™é‡Œè°ƒç”¨è¿™ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆç”¨ï¼Œè¿˜æ‰¾ä¸åˆ°èµ„æ–™è§£é‡Šï¼Œå¾ˆå¤šå‡½æ•°é‡Œé¢éƒ½ä¼šæ¶‰åŠåˆ°äº†æ•°å­¦æˆ–è€…å›¾å½¢å­¦æ–¹é¢çš„çŸ¥è¯†ï¼Œè°ƒè¯•çš„ä¸æ–¹ä¾¿ä¹Ÿæå¤§çš„å¢åŠ äº†æˆ‘ä»¬å­¦ä¹ çš„æˆæœ¬ï¼›åŒæ—¶ç½‘ç»œä¸Šä¹Ÿå……æ–¥ç€å„ç§ç‰ˆæœ¬çš„ä»£ç ï¼Œè´¨é‡ä¹Ÿéƒ½å‚å·®ä¸é½ï¼›æ¯”å¦‚ç¬”è€…åœ¨å­¦ä¹ waterå’Œskyçš„uniformsè®¾ç½®æ—¶ï¼Œwateråé¢è°ƒç”¨äº†ä¸€ä¸ªnormalizeå‡½æ•°ï¼Œè€Œskyæ²¡æœ‰ï¼Œè®©äººå¾ˆè´¹è§£ï¼Œä¸€å¼€å§‹å¹¶ä¸äº†è§£å…¶ä¸­çš„åŸç†ï¼›ä¸è¿‡é€šè¿‡æ›´æ·±å±‚çš„å­¦ä¹ æŸ¥èµ„æ–™ï¼ŒåŠ ä¸Šä¸æ–­çš„å°è¯•ï¼Œæœ€ç»ˆé€å½»ç†è§£äº†å°±æœ‰ç§æç„¶é¡¿æ‚Ÿçš„æ„Ÿè§‰ã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€æµ·å¤©ä¸€è‰²ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"è®°ä¸€æ¬¡CSS3å’ŒSVGå®ç°ç®­å¤´æ‹å¼¯åŠ¨ç”»","date":"2024-01-17T04:00:00.000Z","path":"2024/01/17/Turn-Round-Arrow.html","text":"è¿™ä¸æœ€è¿‘æˆ‘å¸çš„è®¾è®¡å¸ˆåˆç»™ç¬”è€…æ•´æ´»äº†ï¼Œåœ¨æ•°æ®å¤§å±é¡µé¢çš„ä¸­é—´ä½ç½®ï¼Œåšäº†ä¸€ä¸ªæ•ˆæœå›¾ï¼Œä¸è¿‡éœ€è¦åšä¸€ä¸ªç®­å¤´æ²¿ç€è·¯å¾„å®ç°æ‹å¼¯çš„åŠ¨ç”»æ•ˆæœï¼›è¿™å¯å’‹æ•´å‘¢ï¼Œæœ¬æ–‡å°±ç»“åˆCSS3çš„ç‰¹æ€§å’Œsvgï¼Œçœ‹ä¸€ä¸‹å®ç°çš„æ€è·¯ã€‚ å®ç°æ–¹æ¡ˆ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹æœ€ç»ˆçš„å®ç°æ•ˆæœï¼š é¢å¯¹è¿™ç§å¤æ‚çš„ï¼ˆå¥‡å¥‡æ€ªæ€ªï¼‰åŠ¨ç”»éœ€æ±‚ï¼Œä½œä¸ºè€å‰ç«¯äººäº†ï¼Œä¸Šæ¥è‚¯å®šå°±æ˜¯è´¨é—®è®¾è®¡å¸ˆï¼š ä½ èƒ½ä¸èƒ½åšä¸ªGIFå›¾ï¼Ÿ ç›´æ¥è´´ä¸ªGIFå›¾ä¸å°±å®Œäº‹äº†ï¼Œä¸è¿‡ï¼Œè®¾è®¡ç»™å‡ºäº†è‡ªå·±ç†ç”±ï¼Œæœ€åå‡ºå›¾çš„æ–‡ä»¶å¤ªå¤§ä»¥åŠGIFå›¾å®¹æ˜“æ¨¡ç³Šï¼Œå¦ä¸€ä¸ªåŸå› å…¶å®æ˜¯æˆ‘ä»¬çš„è®¾è®¡åšåŠ¨ç”»ä¸ä¸“ä¸šï¼›å› æ­¤ï¼Œåœ¨å¾—åˆ°è‚¯å®šä¸èƒ½çš„ç­”å¤ä¹‹åï¼Œè®¾è®¡ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ï¼šä½¿ç”¨è’™ç‰ˆåŠ¨ç”»ã€‚ æ‰€è°“çš„è’™ç‰ˆåŠ¨ç”»ï¼Œä¹Ÿå°±æ˜¯ï¼›ç±»ä¼¼é®ç½©å±‚åŠ¨ç”»ï¼Œå°†ä¸€ä¸ªé®ç½©å±‚é¦–å…ˆè¦†ç›–åœ¨æƒ³è¦åŠ¨ç”»çš„ç‰©ä½“ä¸Šæ–¹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œçš„ç®­å¤´ï¼›ç„¶åéšç€æ—¶é—´çš„æ¨ç§»ï¼Œé€æ¸çš„æŠ½ç¦»é®ç½©å±‚ï¼Œå®ç°åŠ¨ç”»çš„ç›®çš„ã€‚ ä¸è¿‡è¿™ç§çš„åŠ¨ç”»æ•ˆæœç”¨åœ¨è¿™é‡Œæ„Ÿè§‰æœ‰ç‚¹lowï¼Œä¸æ˜¯å¾ˆåˆé€‚ï¼›å› æ­¤æˆ‘ä»¬è¿˜æ˜¯æ¥ä¸€ç‚¹ç‚¹å®ç°å§ã€‚ offset-path å°±åœ¨ä¸çŸ¥æ€ä¹ˆåšçš„æ—¶å€™ï¼Œå¥½åœ¨ä¸Šç½‘æŸ¥èµ„æ–™ï¼Œä¸€çœ¼çœ‹åˆ°äº†CSSæ–°çš„å±æ€§offset-pathç»™äº†æˆ‘ä¸€ä¸å¸Œæœ›ï¼›ä¼ ç»Ÿçš„CSS3åŠ¨ç”»åªèƒ½å®ç°å¹³ç§»ã€ç¼©æ”¾ã€æ‹‰ä¼¸ç­‰è§„åˆ™çš„è·¯å¾„åŠ¨ç”»ã€‚ è€Œoffset-pathè¿™ä¸ªå±æ€§å°±æ¯”è¾ƒå¼ºå¤§äº†ï¼Œå¯ä»¥è®©å…ƒç´ æ²¿ç€æŒ‡å®šçš„è·¯å¾„å®ç°ä¸è§„åˆ™è·¯å¾„ï¼Œå¯ä»¥æ˜¯ä»»ä½•çš„å½¢çŠ¶ï¼›æˆ‘ä»¬çœ‹ä¸‹å…¶æµè§ˆå™¨çš„æ”¯æŒç¨‹åº¦ï¼š å®ƒçš„è¯­æ³•å¾ˆå¼ºå¤§ï¼Œæ”¯æŒç”»circleï¼ˆåœ†ï¼‰ã€ellipseï¼ˆæ¤­åœ†ï¼‰æˆ–è€…polygonï¼ˆæŠ˜çº¿ï¼‰ç­‰å¤šç§å›¾å½¢çš„å‡½æ•°ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œå°±ä½¿ç”¨è‡ªå®šä¹‰çš„pathå‡½æ•°å³å¯ï¼Œä¼ å…¥ä¸€ä¸ªpathè·¯å¾„ï¼š 1offset-path: path(&#x27;&lt;path-url&gt;&#x27;) å¯¹è·¯å¾„è¯­æ³•ä¸ç†Ÿæ‚‰çš„å°ä¼™ä¼´å¯ä»¥å­¦ä¹ ä¸€ä¸‹MDNè·¯å¾„çš„è¿™ç¯‡æ–‡ç« ï¼›æ­¤å¤–å®ƒè¿˜æœ‰ä¸¤ä¸ªé‡è¦çš„å±æ€§ï¼Œä¸€ä¸ªæ˜¯offset-distanceï¼Œè¡¨ç¤ºå…ƒç´ ç§»åŠ¨çš„è·ç¦»ï¼Œå¯ä»¥æ˜¯pxå•ä½ï¼Œä¹Ÿå¯ä»¥æ˜¯ç™¾åˆ†æ¯”å•ä½ï¼š 1offset-distance: &lt;length&gt; | &lt;percentage&gt; æˆ‘ä»¬å¯ä»¥æ§åˆ¶offset-distanceå±æ€§æ¥å®ç°å…ƒç´ çš„åŠ¨ç”»æ•ˆæœï¼Œä¸€èˆ¬åŠ¨ç”»æ—¶è®¾ç½®ä»0%åˆ°100%ã€‚ å¦ä¸€ä¸ªå±æ€§å°±æ˜¯offset-rotateï¼Œå®šä¹‰äº†å…ƒç´ è¿åŠ¨æ—¶çš„è§’åº¦å’Œæ–¹å‘ï¼Œå¯ä»¥æ˜¯æŸä¸ªå…·ä½“çš„è§’åº¦ï¼Œä¹Ÿå¯ä»¥æ˜¯autoï¼Œä¹Ÿå¯ä»¥ç»„åˆèµ·æ¥ä¸€èµ·ä½¿ç”¨ï¼Œautoè¡¨ç¤ºè®©å…ƒç´ è¿åŠ¨æ—¶è‡ªå·±æ ¹æ®è½¨è¿¹è°ƒæ•´è§’åº¦å³å¯ï¼š 1offset-rotate: [ auto | reverse ] || &lt;angle&gt; å› æ­¤æœ‰äº†ä¸Šé¢çš„å±æ€§ï¼Œæˆ‘åªè¦ç”»ä¸€ä¸ªdivï¼Œç»™å®ƒä¸€ä¸ªçº¿æ€§è¿‡æ¸¡çš„èƒŒæ™¯CSSï¼Œç„¶åè®©å®ƒæ²¿ç€æŒ‡å®šè·¯å¾„ç§»åŠ¨ä¸å°±è¡Œäº†ï¼Œè¯´å¹²å°±å¹²ã€‚ 1234567891011121314151617181920&lt;div class=&quot;page&quot;&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.box &#123; width: 200px; height: 20px; background: linear-gradient(to left, #15db30, rgba(#15db30, 0.2)); offset-path: path(&quot;M 10 80 C 80 10, 130 10, 190 80 S 300 150, 360 80&quot;); animation: move 4000ms infinite linear;&#125;@keyframes move &#123; 0% &#123; offset-distance: 0%; &#125; 100% &#123; offset-distance: 100%; &#125;&#125;&lt;/style&gt; ä¸Šé¢çš„pathè·¯å¾„çœ‹ç€å¾ˆå¤æ‚ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªç®€å•çš„Så‹æ›²çº¿çš„è¿åŠ¨ï¼Œè¿™é‡Œæˆ‘ä»¬è®©divæ²¿ç€Så‹æ›²çº¿è¿åŠ¨ï¼›è™½ç„¶æƒ³æ³•å¾ˆç¾å¥½å•¦ï¼Œä¸è¿‡ç°å®ä¹Ÿååˆ†çš„ç°å®ï¼Œæœ€åçš„æ•ˆæœå¦‚ä¸‹ï¼š å› ä¸ºæˆ‘ä»¬çš„divæ˜¯é•¿æ¡çš„ï¼Œå¹¶ä¸æ˜¯æµä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬çœ‹åˆ°çš„æ•ˆæœå°±æ˜¯ä¸€é•¿æ¡æ²¿ç€å›ºå®šçš„è½¨é“æ™ƒæ™ƒæ‚ æ‚ çš„ç§»åŠ¨ï¼Œè¿™è‚¯å®šä¸è¡Œäº†ï¼Œä¸èƒ½ç”¨diväº†ã€‚ é‚£æ€ä¹ˆåŠå‘¢ï¼Œç¬”è€…åˆæ€è€ƒäº†å¾ˆä¹…ï¼Œçªç„¶ä¸€ä¸ªæƒ³æ³•åˆå†’å‡ºæ¥äº†ï¼Œæƒ³èµ·äº†å¾®ç§¯åˆ†çš„æ€è·¯ï¼›åŒç†ï¼Œæ—¢ç„¶ä¸€ä¸ªdivå¤ªé•¿äº†ï¼Œé‚£æˆ‘æŠŠå®ƒåˆ‡å‰²æˆå¤šä¸ªä¸å°±è¡Œäº†ï¼Œåªè¦æˆ‘ä»¬çš„åˆ€æŠŠdivåˆ‡å¾—å¤Ÿç»†ï¼Œå†æ‹¼æ¥èµ·æ¥ï¼Œç”¨æˆ·å°±çœ‹ä¸å‡ºæ¥æ˜¯æ‹¼æ¥çš„ï¼Œè¯´å¹²å°±å¹²ã€‚ 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;div class=&quot;page&quot;&gt; &lt;div :class=&quot;[&#x27;box&#x27;, `box$&#123;item&#125;`]&quot; v-for=&quot;item in 20&quot; :key=&quot;item&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.box &#123; width: 20px; height: 20px; position: absolute; left: 0; top: 0;&#125;@for $i from 1 through 20 &#123; .box#&#123;$i&#125; &#123; background: linear-gradient( to left, rgba(#15db30, 1 - ($i - 1) * 0.05), rgba(#15db30, 1 - $i * 0.05) ); offset-path: path(&quot;M 10 80 C 80 10, 130 10, 190 80 S 300 150, 360 80&quot;); offset-rotate: auto; animation: move 10000ms infinite linear; animation-delay: 500ms * $i; &#125;&#125;&lt;/style&gt; è¿™é‡Œä»£ç çœ‹ç€å¾ˆå¤æ‚ï¼Œå…¶å®å¾ˆç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬å¾ªç¯äº†20ä¸ªdivï¼Œç„¶åç”¨scssçš„@forè¯­æ³•ç»™20ä¸ªdivè®¾ç½®æ ·å¼ï¼Œè¿™é‡Œæˆ‘ä»¬ç»™æ¯ä¸ªdivä¸€ä¸ªèƒŒæ™¯é¢œè‰²çš„ä»å³åˆ°å·¦çº¿æ€§è¿‡æ¸¡ï¼Œé€æ¸é€æ˜ï¼Œæœ€åä½¿ç”¨animation-delayè®¾ç½®ä¸€ä¸ªå»¶è¿Ÿæ—¶é—´ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š æœ€åçš„æ•ˆæœå°±åƒä¸€æ¡è´ªåƒè›‡ä¸€æ ·ï¼Œä»å¤´è¿åˆ°å°¾ï¼›ä¸è¿‡è¿™æ ·çš„å®ç°æ–¹å¼å¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œå¦‚æœdelayçš„é—´éš”å¤ªä¹…ï¼Œdivä¹‹é—´å°±ä¼šæœ‰ç©ºéš™ï¼Œå¦‚æœé—´éš”å¤ªå°ï¼Œå°±ä¼šå¯¼è‡´divä¹‹é—´æœ‰é¢œè‰²é‡å çš„éƒ¨åˆ†ï¼Œå¯¼è‡´é¢œè‰²æ’å¸ƒä¸æ˜¯å¾ˆå‡åŒ€ã€‚ ä¸è¿‡æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†divè®¾ç½®æˆå®½åªæœ‰å‡ ä¸ªpxçš„é•¿æ–¹å½¢æ¡çŠ¶ï¼ŒåŒæ—¶æŠŠdivåˆ‡å‰²çš„æ•°é‡æ‹‰å¤§ï¼Œåˆ‡æˆ100æˆ–è€…200çš„divï¼Œè¿™æ ·å°±ä¼šå¥½å¾ˆå¤šã€‚ SVGåŠ¨ç”» ç®­å¤´æ‹å¼¯çš„æ•ˆæœæˆ‘ä»¬å·²ç»å®ç°çš„å·®ä¸å¤šäº†ï¼Œåªè¦å†ç»™å®ƒåŠ ä¸Šåˆé€‚çš„è·¯å¾„å³å¯ï¼›ä¸‹é¢é‚£ä¹ˆæˆ‘ä»¬å†æ¥è€ƒè™‘ä¸€ä¸‹ï¼Œå¦‚ä½•æŠŠç®­å¤´åŠ¨ç”»ç»“åˆåˆ°èƒŒæ™¯ä¸­å»ï¼›åœ¨åˆ‡å›¾æ—¶ï¼Œæˆ‘ä»¬è‚¯å®šæ˜¯éœ€è¦å°†èƒŒæ™¯ä¸­çš„å»ºç­‘å…ƒç´ åˆ‡åˆ°å•ç‹¬çš„ä¸€å¼ å›¾ç‰‡ï¼Œä½†æ˜¯ç®­å¤´çš„è½¨é“å¦‚æœæˆ‘ä»¬è‡ªå·±ç”¨ä»£ç å®ç°ä¼šéå¸¸æ£˜æ‰‹ã€‚ å› æ­¤ç¬”è€…çš„æƒ³æ³•æ˜¯å°†è½¨é“å•ç‹¬è®©è®¾è®¡åˆ‡å›¾å‡ºæ¥ï¼Œå¯¼å‡ºæˆsvgï¼Œæˆ‘ä»¬å°±å¯ä»¥å‚è€ƒsvgä¸­çš„ä»£ç ï¼Œèƒ½å¤ŸçŸ¥é“è½¨é“å®ç°çš„é€»è¾‘äº†ï¼›å› æ­¤æˆ‘ä»¬å°†æ•´ä½“æ”¾åˆ°SVGä¸­å®ç°èµ·æ¥ä¼šæ¯”è¾ƒæ–¹ä¾¿ä¸€ç‚¹ã€‚ stroke-dasharray é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹è½¨é“çš„å®ç°æ–¹å¼ï¼Œè½¨é“ç¯çš„å®ç°å¾ˆç®€å•ï¼Œç›´æ¥ä½¿ç”¨pathï¼Œè®¾ç½®strokeé¢œè‰²å’Œä¸€ä¸ªopacityå°±å¯ä»¥ï¼š 12345678&lt;path d=&quot;M152.444292,118.156631 L492.312457,209.128474 C501.980784,211.716376 509.532541,219.268132 512.120443,228.936459 L603.092286,568.804625 C607.090738,583.742725 598.2224,599.093834 583.2843,603.092286 C578.541228,604.361855 573.547697,604.361855 568.804625,603.092286 L228.936459,512.120443 C219.268132,509.532541 211.716376,501.980784 209.128474,492.312457 L118.156631,152.444292 C114.158179,137.506192 123.026516,122.155083 137.964617,118.156631 C142.707689,116.887062 147.70122,116.887062 152.444292,118.156631 Z&quot; transform=&quot;rotate(-45) translate(-315.5, 114)&quot; fill=&quot;none&quot; stroke=&quot;#2A73E1&quot; stroke-width=&quot;8&quot; opacity=&quot;0.2&quot;&gt;&lt;/path&gt; æˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸‹è½¨é“ä¸­é—´çš„ç‚¹ï¼Œè¿™é‡Œå°±ä¸å¾—ä¸è¯´åˆ°svgçš„stroke-dasharrayå±æ€§ï¼Œè¿™ä¸ªå±æ€§å¯ä»¥ç”¨æ¥æ§åˆ¶å®ç°æè¾¹çš„ç‚¹çš„å›¾æ¡ˆæ ·å¼ï¼›å®ƒçš„è¯­æ³•å¾ˆç®€å•ï¼Œå°±æ˜¯ä¼ å…¥ä¸€ä¸ªæ•°åˆ—ï¼š 1stroke-dasharray=&quot;none | &lt;dasharray&gt;&quot; è¿™ä¸ªæ•°åˆ—ä¸­çš„æ•°ç”¨é€—å·å’Œç©ºæ ¼é—´éš”å¼€ï¼Œæ¯”å¦‚&quot;5, 3, 2&quot;è¿™ç§å½¢å¼ï¼Œé‚£ä¹ˆæ¯ä¸ªæ•°å­—ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬å…ˆä»ç®€å•çš„ä¸€ä¸ªæ•°å­—å’Œä¸¤ä¸ªæ•°å­—å¼€å§‹ï¼š 12345678&lt;path d=&quot;M 0,0 L 300, 0&quot; stroke-dasharray=&quot;10&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M 0,0 L 300, 0&quot; stroke-dasharray=&quot;20 10&quot;&gt;&lt;/path&gt; stroke-dasharrayä¸­çš„æ¯ä¸ªæ•°å­—ä¾æ¬¡æ¥è¡¨ç¤ºçŸ­åˆ’çº¿å’Œç¼ºå£çš„é•¿åº¦ï¼Œå½“ä¸€ä¸ªæ•°å­—10çš„æ—¶å€™ï¼Œè¡¨ç¤ºçŸ­åˆ’çº¿å’Œç¼ºå£çš„é•¿åº¦éƒ½æ˜¯10ï¼Œå› æ­¤æˆ‘ä»¬å°±ä¼šçœ‹åˆ°å®ƒçš„è·ç¦»æ˜¯æ¯”è¾ƒå‡åŒ€çš„ï¼›è€Œä¸¤ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œç¬¬ä¸€ä¸ªæ•°å­—è¡¨ç¤ºçŸ­åˆ’çº¿ï¼Œç¬¬äºŒä¸ªæ•°å­—è¡¨ç¤ºç¼ºå£ï¼Œå› æ­¤æˆ‘ä»¬çœ‹åˆ°çŸ­åˆ’çº¿è¾ƒé•¿ï¼Œè€Œç¼ºå£è¾ƒçŸ­ã€‚ ç†è§£äº†ä¸Šé¢æ•°å­—çš„å«ä¹‰ï¼Œæˆ‘ä»¬å†æ‰©å±•åˆ°ä¸‰ä¸ªæ•°å­—å’Œå››ä¸ªæ•°å­—æ¥çœ‹ä¸€ä¸‹ï¼›å¦‚æœæ˜¯å¥‡æ•°æ•°å­—çš„è¯ä¼šæ¯”è¾ƒç‰¹æ®Šï¼Œæ ¹æ®MDNæ–‡æ¡£ä¸Šçš„è§£é‡Šï¼š å¦‚æœæä¾›äº†å¥‡æ•°ä¸ªå€¼ï¼Œåˆ™è¿™ä¸ªå€¼çš„æ•°åˆ—é‡å¤ä¸€æ¬¡ï¼Œä»è€Œå˜æˆå¶æ•°ä¸ªå€¼ã€‚å› æ­¤ï¼Œ5,3,2 ç­‰åŒäº 5,3,2,5,3,2ã€‚ ç”±äºå¥‡æ•°ä¸ªæ•°å­—åœ¨å¾ªç¯çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªä½ç½®è¡”æ¥ä¸ä¸Šï¼Œå› æ­¤è¿™ä¸ªå±æ€§å®šä¹‰çš„æ—¶å€™å°±å°†å¥‡æ•°ä¸ªè‡ªåŠ¨æ‰©å±•åˆ°äº†å¶æ•°ä¸ªï¼Œæˆ‘ä»¬çœ‹ä¸‹å…·ä½“ä»£ç ç†è§£ä¸€ä¸‹ï¼š 12345678&lt;path d=&quot;M 0,0 L 300, 0&quot; stroke-dasharray=&quot;60, 30, 40&quot;&gt;&lt;/path&gt;&lt;path d=&quot;M 0,0 L 300, 0&quot; stroke-dasharray=&quot;60, 30, 40, 50&quot;&gt;&lt;/path&gt; æˆ‘ä»¬åœ¨æ¯ä¸ªçŸ­åˆ’çº¿å’Œç¼ºå£å¤„ç”¨æ•°å­—æ ‡è®°ä¸€ä¸‹ï¼š æˆ‘ä»¬å‘ç°ï¼Œ3ä¸ªæ•°å­—çš„æ—¶å€™ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ’åˆ—ä¹‹åï¼Œç¬¬äºŒæ¬¡æ’åˆ—çš„æ—¶å€™ï¼Œ60æ‰€åœ¨çš„ä½ç½®è‡ªåŠ¨å˜æˆäº†ç¼ºå£ä½ï¼Œè€Œä¸æ˜¯çŸ­åˆ’çº¿ï¼Œè¿™æ ·è‡ªåŠ¨è¿›è¡Œäº†ä¸€æ¬¡é¡ºåºæ‰©å±•ï¼Œè¿™å°±æ˜¯è¿™ä¸ªå±æ€§å°†å¥‡æ•°ä¸ªè‡ªåŠ¨æ‰©å±•åˆ°äº†å¶æ•°ä¸ªçš„æ•ˆæœï¼›è€Œ4ä¸ªæ•°å­—åˆ™æ˜¯ç…§å¸¸å¾ªç¯æ’åˆ—ã€‚ ç†è§£äº†stroke-dasharrayå±æ€§ï¼Œæˆ‘ä»¬çš„è½¨é“ä¹Ÿå¯ä»¥åœ¨svgä¸‹æ¥æœ€ç»ˆå®Œæˆäº†ã€‚ animateMotion ä¸‹é¢çš„è½¨é“æœ‰äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†åˆ‡å¥½çš„ç®­å¤´æ”¾åˆ°svgä¸­ï¼Œåœ¨svgä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨rectæ¥ä»£æ›¿divï¼›é‚£ä¹ˆï¼Œå¦‚ä½•è®©rectåŠ¨èµ·æ¥å‘¢ï¼Ÿ svgä¹Ÿæœ‰è‡ªå·±çš„åŠ¨ç”»å…ƒç´ ï¼Œè¿™é‡Œä½¿ç”¨animateMotionå…ƒç´ ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯è®©ä¸€ä¸ªå…ƒç´ å¦‚ä½•æ²¿ç€è¿åŠ¨è·¯å¾„è¿›è¡Œç§»åŠ¨ã€‚å®ƒçš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨å…ƒç´ ä¸‹å±‚åµŒå…¥animateMotionå…ƒç´ ï¼Œæœ€é‡è¦çš„å±æ€§å°±æ˜¯pathï¼Œç›¸å½“äºCSS3ä¸­çš„offset-pathå±æ€§ï¼š 12345678910111213141516&lt;rect width=&quot;3&quot; height=&quot;6&quot; :fill=&quot;`url(#orangeGradient$&#123;item&#125;)`&quot; v-for=&quot;item in 20&quot; :key=&quot;item&quot; transform=&quot;translate(-3, -3)&quot;&gt; &lt;animateMotion path=&quot;M583.2843,603.092286 C598.2224,599.093834 607.090738,583.742725 603.092286,568.804625 L568.5,440&quot; :begin=&quot;10 * item + &#x27;ms&#x27;&quot; dur=&quot;3s&quot; repeatCount=&quot;indefinite&quot; rotate=&quot;auto&quot; &gt;&lt;/animateMotion&gt;&lt;/rect&gt; rotateå±æ€§ä¹Ÿç›¸å½“äºCSS3ä¸­çš„offset-rotateï¼Œå› æ­¤æˆ‘ä»¬ç†è§£äº†ä¸Šé¢CSSä¸­çš„offset-*ç­‰ä¸€ç³»åˆ—å±æ€§ï¼ŒanimateMotionä¹Ÿå°±å¾ˆå¥½ç†è§£äº†ã€‚ viewBoxè‡ªé€‚åº” é€šè¿‡width/heightå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®svgç”»å¸ƒçš„å›ºå®šå¤§å°ï¼š 1&lt;svg width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/svg&gt; ä½†æ˜¯ï¼Œåœ¨å®é™…çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è®©ç”»å¸ƒè‡ªé€‚åº”å¤–éƒ¨divçš„å®½é«˜ï¼Œä»¥å®ç°ç”»å¸ƒå‘ˆç°å¤§å°é€‚åº”é¡µé¢çš„ç¼©æ”¾ï¼›è¿™é‡Œå°±è¦ç”¨åˆ°svgå¦ä¸€ä¸ªå±æ€§viewBoxäº†ï¼Œæˆ‘ä»¬çœ‹ä¸‹mdnä¸Šå¯¹è¿™ä¸ªå±æ€§çš„ä»‹ç»ï¼š viewBoxå±æ€§å…è®¸æŒ‡å®šä¸€ä¸ªç»™å®šçš„ä¸€ç»„å›¾å½¢ä¼¸å±•ä»¥é€‚åº”ç‰¹å®šçš„å®¹å™¨å…ƒç´ ã€‚ å®ƒçš„å±æ€§å€¼æ˜¯ä¸€ä¸ªåŒ…å«å››ä¸ªå‚æ•°çš„åˆ—è¡¨ï¼šmin-xï¼Œmin-yï¼Œwidthï¼Œheightï¼Œå››ä¸ªå€¼å¯ä»¥ç”¨ç©ºæ ¼æˆ–è€…é€—å·åˆ†éš”å¼€ï¼› 1&lt;svg viewBox=&quot;min-x, min-y, width, height&quot;&gt; viewBoxé¡¾åæ€ä¹‰å°±æ˜¯è§†å›¾ç›’å­ï¼ŒæŠŠå®ƒç†è§£æˆæˆªå›¾å·¥å…·å‘ˆç°çš„æ•ˆæœå°±è¡Œï¼›ç®€å•ç†è§£ï¼Œmin-xå’Œmin-yå°±æ˜¯æˆªå›¾çš„å³ä¸Šè§’çš„xå’Œyåæ ‡ï¼Œwidthå’Œheightå°±æ˜¯æˆªå›¾åŒºåŸŸçš„å®½åº¦ã€‚ æˆ‘ä»¬çœ‹ä¸‹å®ƒçš„å…·ä½“æ•ˆæœï¼Œé¦–å…ˆï¼Œä¸å¸¦viewBoxçš„æƒ…å†µä¸‹å±•ç¤ºsvgä¸‹çš„å†…å®¹ï¼š 12345678&lt;svg width=&quot;200&quot; height=&quot;200&quot; style=&quot;border: 1px solid red&quot;&gt; &lt;rect x=&quot;0&quot; y=&quot;0&quot; width=&quot;50&quot; height=&quot;40&quot; /&gt; &lt;circle cx=&quot;10&quot; cy=&quot;20&quot; r=&quot;4&quot; fill=&quot;white&quot; /&gt;&lt;/svg&gt; å…ƒç´ æ­£å¸¸å¤§å°æ˜¾ç¤ºï¼Œè¿™æ—¶å€™æˆ‘ä»¬ç»™å®ƒåŠ ä¸€ä¸ªviewBoxï¼š 1234567&lt;svg width=&quot;200&quot; height=&quot;200&quot; viewBox=&quot;0 0 60 60&quot;&gt; &lt;!-- å…¶ä»–å…ƒç´  --&gt;&lt;/svg&gt; æˆ‘ä»¬ä¼šå‘ç°ä¸¤ä¸ªå…ƒç´ æ”¾å¤§æ˜¾ç¤ºäº†ï¼Œè¿™ä¸ªä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬åœ¨200200çš„ç”»å¸ƒä¸Šæˆªå‡ºä¸€ä¸ª6060çš„åŒºåŸŸï¼Œç„¶åå°±ä¼šç­‰æ¯”ä¾‹æ”¾å¤§å‘ˆç°å‡ºæ¥ã€‚ å› æ­¤å›åˆ°æˆ‘ä»¬çš„ç®­å¤´svgï¼Œä¸ºäº†å®ç°è‡ªé€‚åº”çš„æ•ˆæœï¼Œæˆ‘ä»¬å»æ‰svgçš„å®½é«˜ï¼ŒåŠ ä¸ŠviewBoxç­‰äºæˆ‘ä»¬çš„ç”»å¸ƒå®½é«˜å³å¯ï¼š 12345&lt;svg viewBox=&quot;0 0 730 561&quot;&gt; &lt;!-- å…¶ä»–å…ƒç´  --&gt;&lt;/svg&gt; ç‚¹å‡»æŸ¥çœ‹æœ¬æ–‡çš„å®ç°æ•ˆæœã€‚ æ€»ç»“ æˆ‘ä»¬ä»CSS3çš„offset-*å±æ€§å…¥æ‰‹ï¼Œäº†è§£äº†å¦‚ä½•è®©ä¸€ä¸ªå…ƒç´ å®ç°éè§„åˆ™è·¯å¾„ä¸‹çš„åŠ¨ç”»æ•ˆæœï¼›ç„¶åæˆ‘ä»¬ä¸ºäº†æ–¹ä¾¿ï¼Œå°†åŠ¨ç”»æ•ˆæœè¿ç§»åˆ°äº†svgä¸­å»å®ç°ï¼Œå¯¹svgä¸­çš„å…³é”®å±æ€§stroke-dasharrayè¿›è¡Œäº†è¯¦ç»†çš„å­¦ä¹ ï¼›æœ€åä¸ºäº†å®ç°è‡ªé€‚åº”æ•ˆæœï¼Œä½¿ç”¨äº†viewBoxå±æ€§ã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€SVGç®­å¤´æ‹å¼¯ã€‘å³å¯è·å–ã€‚ å‚è€ƒsvg viewBoxä¸è‡ªé€‚åº”","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"CSS","slug":"CSS","permalink":"https://xieyufei.com/tags/CSS/"}]},{"title":"Linuxä¸‹æºç åŒ…Nodejså®‰è£…æ•™ç¨‹","date":"2023-12-22T12:00:00.000Z","path":"2023/12/22/Install-Linux-Nodejs.html","text":"ç”±äºç»å¸¸è¦åœ¨æœåŠ¡å™¨ä¸Šéƒ¨ç½²nodeé¡¹ç›®ï¼Œå› æ­¤ç»å¸¸éœ€è¦åœ¨Linuxç¯å¢ƒä¸‹å®‰è£…Nodejsã€‚ å¤§å¤šæ•°Linuxå‘è¡Œç‰ˆéƒ½æä¾›äº†Node.jsçš„å®‰è£…åŒ…ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼š 12$ sudo apt-get update$ sudo apt-get install nodejs ä½†æ˜¯åŒ…ç®¡ç†å™¨å®‰è£…çš„Nodejsç‰ˆæœ¬æ¯”è¾ƒè€æ—§ï¼Œæœ‰äº›æ˜¯10æˆ–è€…12ç‰ˆæœ¬çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡å»å®˜ç½‘é€šè¿‡ä¸‹è½½æºç åŒ…çš„æ–¹å¼è¿›è¡Œå®‰è£…ã€‚ é¦–å…ˆæ‰“å¼€Node.jsä¸­æ–‡ç½‘ï¼Œå®˜ç½‘æä¾›äº†ä¸åŒç³»ç»Ÿå¹³å°çš„å®‰è£…åŒ…ï¼Œæˆ‘ä»¬ä¸‹è½½å¯¹åº”å¹³å°çš„å³å¯ï¼Œä¾‹å¦‚è¿™é‡Œçš„node-v18.18.0-linux-x64.tar.gzï¼š æˆ‘ä»¬å¯ä»¥é€‰æ‹©è¿™é‡ŒLinuxï¼ˆx64ï¼‰ç‰ˆæœ¬çš„ï¼Œå¦‚æœæƒ³è¦å…¶ä»–ç‰ˆæœ¬çš„ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©å…¨éƒ¨å®‰è£…åŒ…ï¼›è¿™é‡Œæˆ‘ä»¬ç”¨wgetå‘½ä»¤ä¸‹è½½ï¼š 12$ cd ~/ä¸‹è½½/$ wget https://registry.npmmirror.com/-/binary/node/v18.18.0/node-v18.18.0-linux-x64.tar.gz è§£å‹å‹ç¼©åŒ…å¹¶ä¸”ç§»åŠ¨åˆ°/usr/localç›®å½•ä¸‹ï¼š 12$ tar -zxvf node-v18.18.0-linux-x64.tar.gz$ sudo mv node-v18.18.0-linux-x64 /usr/local/nodejs/ åˆ›å»ºè½¯é“¾æ¥ï¼š 12$ sudo ln -s /usr/local/nodejs/bin/node /usr/local/bin/$ sudo ln -s /usr/local/nodejs/bin/npm /usr/local/bin/ éªŒè¯nodeæ˜¯å¦å®‰è£…æˆåŠŸï¼š 1234$ node -vv18.18.0$ npm -v9.8.1","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"},{"name":"Linux","slug":"Linux","permalink":"https://xieyufei.com/tags/Linux/"},{"name":"å¼€æº","slug":"OpenSource","permalink":"https://xieyufei.com/tags/OpenSource/"}]},{"title":"æœ¬åœ°éƒ¨ç½²Echartså®˜ç½‘","date":"2023-12-09T04:00:00.000Z","path":"2023/12/09/Echarts-Deploy.html","text":"ç»å¸¸éœ€è¦ç”¨åˆ°Echartsçš„å°ä¼™ä¼´åº”è¯¥éƒ½æœ‰è¿™æ ·çš„ä½“éªŒï¼Œå®˜ç½‘æ‰“å¼€è®¿é—®å¾ˆæ…¢ï¼Œå¾€å¾€å‡ åˆ†é’Ÿè¿˜æ‰“ä¸å¼€ï¼Œè€Œä¸”åŠ¨ä¸åŠ¨å°±è®¿é—®ä¸äº†ï¼Œæˆ‘ä»¬åˆç­‰ç€æŸ¥æ–‡æ¡£çš„æŸä¸€ä¸ªå±æ€§çš„ç”¨æ³•ï¼›å¦‚æœèƒ½æŠŠEchartsçš„ç½‘ç«™éƒ¨ç½²åˆ°æˆ‘ä»¬è‡ªå·±çš„å†…ç½‘æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæŸ¥æ–‡æ¡£çš„ä½“éªŒå‹å¥½åº¦è‚¯å®šä¸Šå‡äº†ä¸€ä¸ªå°é˜¶ã€‚ ç¯å¢ƒå‡†å¤‡ é¦–å…ˆçœ‹ä¸€ä¸‹ç¬”è€…çš„ç³»ç»Ÿç¯å¢ƒï¼Œè¿™é‡Œç”±äºä¹‹å‰ä¸€ç¯‡æ–‡ç« ä¸­ç¬”è€…å»ºè®®ä½¿ç”¨Linuxï¼Œè€Œæœ‰ä¸€äº›è¯„è®ºè¯´ç¬”è€…æ²¡ç”¨è¿‡Linuxï¼Œè¿™é‡Œæ‰‹å¤´æ­£å¥½æœ‰ä¸€å°Ubuntu22ç³»ç»Ÿå°±ç”¨æ¥æŠ˜è…¾ä¸€ä¸‹å§ï¼š 12345$ node -vv16.14.0$ cat /proc/version Ubuntu 11.4.0-1ubuntu1~22.04 ä¸‹é¢æˆ‘ä»¬å°±éœ€è¦å‡†å¤‡ä»“åº“äº†ï¼Œé¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å…‹éš†çš„ä»“åº“ï¼š 1$ mkdir echarts-deploy &amp;&amp; cd echarts-deploy ç„¶åå…‹éš†ä¼—å¤šçš„Echartsä»“åº“ï¼Œæœ‰äº›ä»“åº“æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œå—é™äºä¸åŒçš„ç½‘ç»œç¯å¢ƒï¼Œå¯èƒ½ä¼šæœ‰å¤±è´¥çš„æƒ…å†µï¼Œéœ€è¦å¤šæ¬¡å°è¯•ã€‚ 1234567891011git clone https://github.com/apache/echarts-website.gitgit clone https://github.com/apache/echarts-www.gitgit clone https://github.com/apache/echarts-examples.gitgit clone https://github.com/apache/echarts-doc.gitgit clone https://github.com/apache/echarts-theme-buildergit clone https://github.com/apache/echarts-handbook.git æœ€åæˆ‘ä»¬çœ‹åˆ°çš„ç›®å½•ç»“æ„å°±æ˜¯è¿™æ ·çš„ï¼š 1234567|- echarts-deploy |- echarts-website |- echarts-www |- echarts-examples |- echarts-doc |- echarts-theme-builder |- echarts-handbook å¼€å§‹æ„å»º æ–‡ä»¶å¤¹å‡†å¤‡å¥½äº†ï¼Œä¹‹åå°±å¯ä»¥å¯¹æˆ‘ä»¬çš„å…‹éš†ä¸‹æ¥çš„ä»“åº“è¿›è¡Œæ„å»ºäº†ï¼›è¿™é‡Œéœ€è¦è¯´ä¸€ä¸‹çš„æ˜¯echarts-websiteè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªä»“åº“ä¸»è¦ç”¨æ¥å…¶ä»–ä»“åº“å­˜æ”¾æ„å»ºå‡ºæ¥çš„é™æ€èµ„æºæ–‡ä»¶ï¼Œå› æ­¤æœ€åæˆ‘ä»¬çš„æœåŠ¡å™¨ä¹Ÿæ˜¯åœ¨è¿™é‡Œå¯åŠ¨çš„ï¼›å¦‚æœä¸æ„å»ºï¼Œç›´æ¥åœ¨è¿™é‡Œå¯åŠ¨æœåŠ¡å™¨ï¼Œæˆ‘ä»¬ä¼šå‘ç°æµè§ˆå™¨è‡ªåŠ¨è·³è½¬åˆ°Echartsçš„å®˜æ–¹åœ°å€ï¼›å› æ­¤ä¸‹é¢æˆ‘ä»¬å¯¹å„ä¸ªä»“åº“è¿›è¡Œæ„å»ºæ“ä½œã€‚ echarts-handbook è¿›å…¥echarts-handbookï¼Œé¦–å…ˆæˆ‘ä»¬npm iå®‰è£…ä¾èµ–ï¼Œç„¶åæ‰“å¼€configs/config.localsite.jsï¼Œä¿®æ”¹é…ç½®ï¼›è¿™é‡Œæˆ‘ä»¬éœ€è¦ç¡®å®šæœ€åçš„æœåŠ¡å™¨çš„IPå’Œç«¯å£ç«¯å£ï¼Œæ¯”å¦‚è¿™é‡Œç¬”è€…å°±ä½¿ç”¨8070ç«¯å£ï¼š 1234567891011export default &#123; routerBase: &#x27;/handbook&#x27;, rootPath: &#x27;http://localhost:8070/handbook&#x27;, exampleViewPath: &#x27;http://localhost:8070/examples/$&#123;lang&#125;/view.html?c=&#x27;, exampleEditorPath: &#x27;http://localhost:8070/examples/$&#123;lang&#125;/editor.html?c=&#x27;, mainSitePath: &#x27;http://localhost:8070/&#x27;, optionPath: &#x27;http://localhost:8070/option.html#&#x27;, gitRepo: &#x27;apache/echarts-handbook&#x27;&#125; æœ€åæ‰§è¡Œnpm run build:localsiteæ„å»ºï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„æ—¥å¿—å°±è¯´æ˜æ„å»ºæˆåŠŸäº†ï¼š echarts-examples echarts-examplesæ˜¯ç¤ºä¾‹çš„ç›®å½•ï¼Œæˆ‘ä»¬è¿›å…¥ç›®å½•ï¼Œnpm iå®‰è£…ä¾èµ–ï¼Œç„¶åæ‰§è¡Œnpm run localsiteæ„å»ºï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„æ—¥å¿—å°±è¯´æ˜æ„å»ºæˆåŠŸäº†ï¼š echarts-doc è¿›å…¥echarts-docï¼Œè¿˜æ˜¯npm iå®‰è£…ä¾èµ–ï¼Œä¿®æ”¹config/env.localsite.jsï¼Œè¿˜æ˜¯æ”¹æˆéœ€è¦éƒ¨ç½²çš„ä¸»æœºIPå’Œç«¯å£å· 12345678const path = require(&#x27;path&#x27;);module.exports = &#123; galleryViewPath: &#x27;http://localhost:8070/examples/$&#123;lang&#125;/view.html?c=&#x27;, galleryEditorPath: &#x27;http://localhost:8070/examples/$&#123;lang&#125;/editor.html?c=&#x27;, handbookPath: &#x27;http://localhost:8070/handbook/$&#123;lang&#125;/&#x27;, // .. å…¶ä»–&#125;; æ‰“å¼€echarts-doc/build.jsï¼Œåœ¨publicåæ·»åŠ zhï¼Œå¦åˆ™ä¼šæç¤ºæ‰¾ä¸åˆ°public/js/doc-bundle.jsæ–‡ä»¶ã€‚ 12345function copySite() &#123; const jsSrcPath = path.resolve(projectDir, &#x27;public/zh/js/doc-bundle.js&#x27;); const cssSrcDir = path.resolve(projectDir, &#x27;public/zh/css&#x27;); // .. å…¶ä»–&#125; ç„¶åæ‰§è¡Œnpm run localsiteè¿›è¡Œæ„å»ºï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„æ—¥å¿—å°±è¯´æ˜æ„å»ºæˆåŠŸäº†ï¼š echarts-www è¿›å…¥echarts-wwwç›®å½•ï¼Œæ‰§è¡Œnpm iå®‰è£…ä¾èµ–ï¼Œæ‰“å¼€config/env.localsite.jsï¼Œå°†ä¸‹é¢ä¸‰ä¸ªåœ°æ–¹çš„åœ°å€æ›´æ¢æˆè‡ªå·±æœåŠ¡å™¨çš„IPå’Œç«¯å£ 123456789101112131415161718const path = require(&#x27;path&#x27;);const config = require(&#x27;./common&#x27;);config.host = &#x27;http://localhost:8070&#x27;;// æ”¹è¿™é‡Œï¼Œæ³¨æ„åé¢ä¸å¸¦æ–œæ config.cdnPayRootMap = &#123; zh: config.host, en: &#x27;http://localhost:8070&#x27; // æ”¹è¿™é‡Œï¼Œæ³¨æ„åé¢ä¸å¸¦æ–œæ &#125;;config.cdnFreeRootMap = &#123; zh: config.host, en: config.host&#125;;config.galleryPath = &#x27;https://localhost:8070/examples/&#x27;; // æ”¹è¿™é‡Œconfig.releaseDestDir = path.resolve(__dirname, &#x27;../../echarts-website&#x27;);module.exports = config; ç„¶åæ‰§è¡Œnpm run localsiteæ„å»ºï¼Œæœ¬æ¬¡æ„å»ºè¿‡ç¨‹æ¯”è¾ƒé•¿ï¼Œå¦‚æœå‡ºç°ä¸‹é¢çš„æ—¥å¿—å°±è¯´æ˜æ„å»ºæˆåŠŸäº†ï¼š å®Œæˆ ä¸Šé¢æ‰€æœ‰ä»“åº“æ„å»ºå®Œæˆåï¼Œæˆ‘ä»¬å›åˆ°echarts-websiteç›®å½•ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€æ˜“æ–¹ä¾¿çš„nodeæœåŠ¡å™¨å·¥å…·æ¥å¯åŠ¨æœåŠ¡å™¨ï¼Œ-på‚æ•°å¯ä»¥ç”¨æ¥æŒ‡å®šç«¯å£å·ï¼š 123$ npm i -g http-server$ http-server -p 8070 æˆ‘ä»¬æ‰“å¼€æœåŠ¡å™¨çš„åœ°å€localhost:8070ï¼Œè¿™è¾¹å¯ä»¥æ¢æˆä½ è‡ªå·±çš„æœåŠ¡å™¨IP+ç«¯å£ï¼Œå°±å¯ä»¥çœ‹åˆ°Echartsæ–‡æ¡£äº†ï¼Œå¾ˆå¤šç¤ºä¾‹å’Œæ‰‹å†Œéƒ½æ˜¯å¯ä»¥æ­£å¸¸æŸ¥çœ‹çš„ï¼Œæ‰“å¼€æŸä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹ä¹Ÿèƒ½çœ‹åˆ°æ•ˆæœï¼Œå’ŒEchartså®˜ç½‘ç®€ç›´æ˜¯ä¸€æ¯›ä¸€æ ·ï¼Œå†…ç½‘è®¿é—®åŸºæœ¬å°±æ˜¯ç§’å¼€äº†ï¼š ç¬”è€…å·²ç»å°†æœ¬æ–‡æ‰“åŒ…å¥½çš„echarts-websiteç›®å½•æ•´ç†ä¸Šä¼ ï¼Œå…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘åå°å›å¤å…³é”®å­—ã€Echartså®˜ç½‘ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"}]},{"title":"Linuxä¸‹Stable Diffusionå®‰è£…ä½¿ç”¨æ•™ç¨‹","date":"2023-11-02T04:12:12.000Z","path":"2023/11/02/Install-Linux-StableDiffusion.html","text":"åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼ŒStable Diffusionå¯ä»¥ä¸ºè®¾è®¡å¸ˆæä¾›è„‘æ´å¤§å¼€çš„åˆ›æ„ç´ æä»¥åŠå¤„ç†å›¾åƒä¿®å¤ã€æé«˜å›¾åƒåˆ†è¾¨ç‡ã€ä¿®æ”¹å›¾åƒé£æ ¼ç­‰ä»»åŠ¡ï¼Œè¾…åŠ©å®ç°åˆ›æ„è½åœ°ã€‚æœ¬æ–‡ä»å®‰è£…æ•™ç¨‹å…¥æ‰‹ï¼Œè®°å½•ä¸‹åœ¨Linuxç¯å¢ƒä¸‹ï¼Œå¦‚ä½•å®‰è£…Stable Diffusionï¼Œä»¥åŠæ¨¡å‹æ’ä»¶çš„å®‰è£…ã€‚ ä»‹ç» Stable Diffusionæ˜¯ä¸€ç§é€šè¿‡æ¨¡æ‹Ÿæ‰©æ•£è¿‡ç¨‹ï¼Œå°†å™ªå£°å›¾åƒé€æ¸è½¬åŒ–ä¸ºç›®æ ‡å›¾åƒçš„æ–‡ç”Ÿå›¾æ¨¡å‹ï¼Œå…·æœ‰è¾ƒå¼ºçš„ç¨³å®šæ€§å’Œå¯æ§æ€§ï¼Œå¯ä»¥å°†æ–‡æœ¬ä¿¡æ¯è‡ªåŠ¨è½¬æ¢æˆé«˜è´¨é‡ã€é«˜åˆ†è¾¨ç‡ä¸”è§†è§‰æ•ˆæœè‰¯å¥½ã€å¤šæ ·åŒ–çš„å›¾åƒã€‚ å®‰è£… é¦–å…ˆéœ€è¦å®‰è£…python3çš„ç¯å¢ƒï¼ŒSDï¼ˆStable Diffusionçš„ç®€ç§°ï¼Œä¸‹é¢éƒ½ç”¨SDè¿›è¡ŒæŒ‡ä»£ï¼‰æ¨èçš„ç‰ˆæœ¬æ˜¯python3.10ï¼Œè¿™é‡Œçœ‹ä¸‹ç¬”è€…çš„ç”µè„‘ç¯å¢ƒï¼š 12345$ python3 -VPython 3.10.12$ pip -Vpip 23.2.1 ç„¶åæˆ‘ä»¬æ‰§è¡Œgit clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.gitï¼Œå°†é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°ï¼š é¡¹ç›®å…‹éš†ä¸‹æ¥åï¼Œæˆ‘ä»¬éœ€è¦åˆ‡æ¢åˆ°SDé¡¹ç›®é‡Œé¢å»å®‰è£…ä¾èµ–ï¼š 12cd stable-diffusion-webuipip3 install -r requirements.txt åœ¨å®‰è£…è¿‡ç¨‹ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°æœ‰ä¸‹é¢è¿™ç§æŠ¥é”™çš„æƒ…å†µï¼Œä¸€èˆ¬éƒ½æ˜¯æŸä¸ªä¾èµ–å®‰è£…ä¸ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å…·ä½“çš„æŠ¥é”™ä¿¡æ¯ï¼Œç„¶åå°è¯•æ‰‹åŠ¨å®‰è£…ï¼š æ¯”å¦‚pytorchï¼Œä¸‹è½½å®‰è£…æ¯”è¾ƒæ…¢ï¼Œä¼šå¯¼è‡´æŠ¥é”™ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œæ‰‹åŠ¨å®‰è£…ï¼š 1234# cpuç‰ˆæœ¬pip3 install torch==2.0.0+cpu torchvision=0.15.1+cpu -f https://download.pytorch.org/whl/torch_stable.html# gpuç‰ˆæœ¬pip3 install torch==2.0.0+cu115 torchvision=0.15.1+cu115 -f https://download.pytorch.org/whl/torch_stable.html pytorchåˆ†ä¸ºCPUç‰ˆæœ¬å’ŒGPUç‰ˆæœ¬ï¼Œå…¶ä¸­GPUç‰ˆæœ¬çš„å®‰è£…éœ€è¦å…ˆå®‰è£…CUDAï¼Œå¯ä»¥å‚è€ƒCUDAå’ŒcuDNNå®‰è£…æ•™ç¨‹ã€‚æ‰€æœ‰ä¾èµ–å®‰è£…å®Œæˆåï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æ‰§è¡Œå¯åŠ¨å‘½ä»¤ï¼š 1./webui.sh æœ‰å¯èƒ½ä¼šå¦‚ä¸‹æŠ¥é”™ï¼š 1ERROR: Cannot activate python venv, aborting... æˆ‘ä»¬éœ€è¦ä½¿ç”¨pythonåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼š 12345python3 -m venv venv_namesource venv_name/bin/activatecd stable-diffusion-webui/./webui.sh çœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œå°±è¯´æ˜å¯åŠ¨æˆåŠŸäº†ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:7860ï¼š å¦‚æœæˆ‘ä»¬å¯åŠ¨æ—¶æƒ³è¦åŠ ä¸€äº›å‚æ•°ï¼Œæ¯”å¦‚ï¼Œå¯åŠ¨æ—¶ä¸æƒ³è¦cudaçš„æ ¡éªŒï¼Œæ‰“å¼€webui.shï¼Œæ·»åŠ ä»¥ä¸‹å‘½ä»¤è¡Œå‚æ•°ï¼š 1export COMMANDLINE_ARGS=&quot;--skip-torch-cuda-test --precision full --no-half&quot; è¿™æ ·å¯åŠ¨åæˆ‘ä»¬æœåŠ¡å™¨åªèƒ½é€šè¿‡localhostè®¿é—®ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦æœåŠ¡å™¨å¯ä»¥é€šè¿‡è¿œç¨‹è®¿é—®ï¼Œæ·»åŠ å‚æ•°ï¼š 1export COMMANDLINE_ARGS=&quot;--server-name 0.0.0.0&quot; æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºSDè®¾ç½®è®¿é—®å¯†ç çš„é™åˆ¶ï¼š 1export COMMANDLINE_ARGS=&quot;--gradio-auth username:password&quot; Anacondaå®‰è£…å¯åŠ¨ ç”±äºLinuxç³»ç»Ÿè‡ªå¸¦çš„Pythonç‰ˆæœ¬å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼ˆSDæ¨èçš„ç‰ˆæœ¬æ˜¯3.10.6ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬è¿˜å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡Anacondaåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œç„¶åå†å¯åŠ¨SDï¼Œå…å»é‡æ–°å®‰è£…pythonçš„çƒ¦æ¼ï¼›é¦–å…ˆæˆ‘ä»¬ä»æ¸…åé•œåƒä¸‹è½½å®‰è£…Anacondaï¼š 123wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-5.3.1-Linux-x86_64.sh -c --user-agent=&quot;Mozilla&quot;chmod +x Anaconda3-5.3.1-Linux-x86_64.sh./Anaconda3-5.3.1-Linux-x86_64.sh å®‰è£…å®Œæˆåæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨condaå‘½ä»¤åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒäº†ï¼š 12conda create --name sd python=3.10ã€‚6conda activate sd é€šè¿‡è™šæ‹Ÿç¯å¢ƒï¼Œæˆ‘ä»¬è¿˜æ˜¯æ‰§è¡Œwebui.shï¼Œç­‰å¾…ä¸€ç³»åˆ—çš„åŒ…å®‰è£…åï¼Œå°±å¯ä»¥å¯åŠ¨æˆ‘ä»¬çš„SDäº†ï¼›æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨nohupå‘½ä»¤ï¼ŒæŠŠwebui.shæ”¾åˆ°åå°æ‰§è¡Œï¼š 123#!/bin/bashsource /home/boe/anaconda3/bin/activate sdnohup ./webui.sh &gt; nohup.log 2&gt;&amp;1 &amp; æ’ä»¶æ‰©å±•çš„å®‰è£… SDè¿˜æœ‰ä¸€äº›ä¸é”™çš„æ’ä»¶å’Œæ‰©å±•å¯ä»¥é…åˆä½¿ç”¨ã€‚ Easynegative åå‘æç¤ºè¯ï¼ˆNegative promptï¼‰ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸æƒ³å‡ºç°ä»€ä¹ˆçš„æè¿°ï¼Œä¾‹å¦‚ä¸€äº›å®¹æ˜“å˜å½¢çš„èº«ä½“éƒ¨ä½çš„æè¿°ç­‰ã€‚EasyNegativeæ˜¯ç›®å‰ä½¿ç”¨ç‡æé«˜çš„ä¸€æ¬¾åå‘æç¤ºè¯embeddingæ¨¡å‹ï¼Œå¯ä»¥æœ‰æ•ˆæå‡ç”»é¢çš„ç²¾ç»†åº¦ï¼Œé¿å…æ¨¡ç³Šã€ç°è‰²è°ƒã€é¢éƒ¨æ‰­æ›²ç­‰æƒ…å†µï¼Œé€‚åˆåŠ¨æ¼«é£å¤§æ¨¡å‹ã€‚ å®ƒçš„ç”¨æ³•ä¹Ÿæ˜¯æœ€ç®€å•çš„ï¼Œä¸‹è½½easynegative.safetensorsæ–‡ä»¶ï¼Œå¹¶ä¸”æ”¾åˆ°stable-diffusion-webui/embeddings/ç›®å½•ä¸‹ï¼Œç„¶ååœ¨åå‘è¾“å…¥è¯ä¸­ï¼Œè¾“å…¥è§¦å‘å…³é”®è¯easynegativeï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹ä¸€äº›å¯ä»¥ç”¨çš„Embeddingæ¨¡å‹ï¼š Deep Negative_v1_75tï¼šDeep Negativeå¯ä»¥æå‡å›¾åƒçš„æ„å›¾å’Œè‰²å½©ï¼Œå‡å°‘æ‰­æ›²çš„é¢éƒ¨ã€é”™è¯¯çš„äººä½“ç»“æ„ã€é¢ å€’çš„ç©ºé—´ç»“æ„ç­‰æƒ…å†µçš„å‡ºç°ï¼Œæ— è®ºæ˜¯åŠ¨æ¼«é£è¿˜æ˜¯å†™å®é£çš„å¤§æ¨¡å‹éƒ½é€‚ç”¨ã€‚ badhandv4ï¼šbadhand æ˜¯ä¸€æ¬¾ä¸“é—¨é’ˆå¯¹æ‰‹éƒ¨è¿›è¡Œä¼˜åŒ–çš„è´Ÿé¢æç¤ºè¯embeddingæ¨¡å‹ï¼Œèƒ½å¤Ÿåœ¨å¯¹åŸç”»é£å½±å“è¾ƒå°çš„å‰æä¸‹ï¼Œå‡å°‘æ‰‹éƒ¨æ®‹ç¼ºã€æ‰‹æŒ‡æ•°é‡ä¸å¯¹ã€å‡ºç°å¤šä½™æ‰‹è‡‚çš„æƒ…å†µï¼Œé€‚åˆåŠ¨æ¼«é£å¤§æ¨¡å‹ã€‚ æˆ‘ä»¬å°†Embeddingæ¨¡å‹æ”¾å…¥æ–‡ä»¶å¤¹åï¼Œé‡å¯SDï¼Œåœ¨webuiä¸­æ‰¾åˆ°Embeddingé¢æ¿ï¼Œç‚¹å‡»ç›¸åº”çš„æ¨¡å‹å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ æ±‰åŒ–æ’ä»¶ ç›¸ä¿¡å…¨æ˜¯è‹±æ–‡ç•Œé¢çš„webuiè‚¯å®šæ²¡æœ‰å‡ ä¸ªå°ä¼™ä¼´æœ‰è€å¿ƒä¸€ä¸ªä¸ªçš„çœ‹ä¸‹å»ï¼Œå› æ­¤æ±‰åŒ–æ’ä»¶æ˜¯å¿…å¤‡çš„ï¼›å®˜æ–¹æœ‰å¥½å‡ ç§å®‰è£…æ–¹å¼ï¼Œæˆ‘ä»¬é€šè¿‡æœ€ç®€å•çš„ä¸‹è½½zipçš„æ–¹å¼ï¼›æ‰“å¼€stable-diffusion-webui-localization-zh_CNï¼Œä¸‹è½½zipæ–‡ä»¶ è§£å‹zipæ–‡ä»¶ï¼Œå¹¶æŠŠæ–‡ä»¶å¤¹æ”¾åˆ°stable-diffusion-webui/extensions/æ–‡ä»¶å¤¹ä¸­ï¼Œæ”¾å¥½ä¹‹åç›®å½•å¦‚ä¸‹ï¼š å¦‚æœæœ‰é­”æ³•åŠ æŒçš„è¯ï¼Œå¯ä»¥ç›´æ¥åœ¨æ ¹ç›®å½•æ‰§è¡Œå…‹éš†å‘½ä»¤ï¼š 1git clone https://github.com/dtlnor/stable-diffusion-webui-localization-zh_CN extensions/stable-diffusion-webui-localization-zh_CN é‡å¯webuiï¼Œç‚¹å‡»Extensions =&gt; Installedï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ’ä»¶å·²ç»å®‰è£…ï¼›ç¡®ä¿å·²ç»å‹¾é€‰æ’ä»¶ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå‹¾é€‰åç‚¹å‡»Apply and restart UIæŒ‰é’®å¯ç”¨ï¼š ç„¶åå°±éœ€è¦åˆ‡æ¢ç•Œé¢çš„è¯­è¨€ï¼Œæ‰¾åˆ°Settings =&gt; User interface =&gt; Localizationé€‰é¡¹ï¼Œåœ¨ä¸‹æ‹‰èœå•ä¸­é€‰ä¸­zh_CNï¼Œç„¶åç‚¹å‡»ä¸Šé¢çš„ä¸¤ä¸ªæŒ‰é’®`Apply settingså’ŒReload UI``ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´åå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç•Œé¢åˆ‡æ¢ä¸­æ–‡äº†ã€‚ sd-webui-prompt-all-in-one sd-webui-prompt-all-in-oneä¹Ÿå¯ä»¥ç®—æ˜¯SDçš„å¿…å¤‡å®ç”¨æ’ä»¶ä¹‹ä¸€äº†ï¼Œå®ƒçš„ä½œç”¨åœ¨äºæé«˜æç¤ºè¯/åå‘æç¤ºè¯è¾“å…¥æ¡†çš„ä½¿ç”¨ä½“éªŒã€‚å®ƒæ‹¥æœ‰æ›´ç›´è§‚ã€å¼ºå¤§çš„è¾“å…¥ç•Œé¢åŠŸèƒ½ï¼Œå®ƒæä¾›äº†è‡ªåŠ¨ç¿»è¯‘ã€å†å²è®°å½•å’Œæ”¶è—ç­‰åŠŸèƒ½ï¼Œå®ƒæ”¯æŒå¤šç§è¯­è¨€ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„éœ€æ±‚ã€‚ å®ƒçš„å®‰è£…ä¹Ÿéå¸¸ç®€å•ï¼Œå°†æ’ä»¶å…‹éš†ä¸‹æ¥åˆ°extensionsç›®å½•å³å¯ï¼š 12cd stable-diffusion-webuigit clone https://gitee.com/physton/sd-webui-prompt-all-in-one.git extensions/sd-webui-prompt-all-in-one é‡å¯æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨ç•Œé¢ä¸Šçœ‹åˆ°æœ‰å„ç§å¯†å¯†éº»éº»çš„æç¤ºè¯ï¼Œæ’ä»¶å°±ç”Ÿæ•ˆäº†ã€‚ æˆ‘ä»¬æ¥çœ‹ä¸‹æ’ä»¶çš„ä¸»è¦åŠŸèƒ½ï¼Œé¦–å…ˆå°±æ˜¯å®æ—¶ç¿»è¯‘åŠŸèƒ½äº†ï¼Œç”±äºSDåªæ”¯æŒè‹±æ–‡ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œæ€ä¹ˆè®©å®ƒçŸ¥é“æˆ‘ä»¬æƒ³è¦ç”»ä»€ä¹ˆå›¾æ¡ˆå°±ä¸æ˜¯é‚£ä¹ˆå‹å¥½äº†ï¼Œå› æ­¤ç¿»è¯‘å·¥å…·æ˜¯å¿…å¤‡çš„ï¼›åœ¨æ’ä»¶çš„è¾“å…¥æ¡†ä¸­ï¼ˆæ³¨æ„ï¼Œæ˜¯æ’ä»¶çš„è¾“å…¥æ¡†ï¼Œä¸æ˜¯SDåŸå§‹çš„è¾“å…¥æ¡†ï¼‰è¾“å…¥å†…å®¹åï¼Œæ’ä»¶ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ç¿»è¯‘ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦ä¸€ä¸ªä¸€ä¸ªçš„è¾“å…¥ç¿»è¯‘ï¼Œå¯ä»¥åœ¨ä¸€æ¬¡æ€§è¾“å…¥å®Œæˆåï¼Œç‚¹å‡»ä¸€é”®ç¿»è¯‘çš„æŒ‰é’®ï¼Œå°†è¾“å…¥æ¡†ä¸­çš„å†…å®¹ç»Ÿä¸€è¿›è¡Œç¿»è¯‘ã€‚ å¯¹äºå¯†å¯†éº»éº»çš„æç¤ºè¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸‹é¢å¯è§†åŒ–çš„å¿«é€Ÿè°ƒæ•´æŸä¸€æç¤ºè¯çš„æƒé‡æˆ–è€…é¡ºåºï¼Œä¸ä¼šå› ä¸ºå„ç§ç¬¦å·é—®é¢˜è€Œçƒ¦æ¼äº†ã€‚ è€Œä¸”åœ¨ä½¿ç”¨ä¸€æ®µæ—¶é—´åï¼Œè‚¯å®šç§¯ç´¯äº†ä¸€äº›é«˜é¢‘å¸¸ç”¨çš„æç¤ºè¯ï¼Œä½¿ç”¨æ”¶è—å·¥å…·ï¼Œå¯ä»¥æŠŠè¿™äº›è¯æ”¶è—èµ·æ¥ï¼Œåé¢ä½¿ç”¨å°±å¾ˆæ–¹ä¾¿äº†ã€‚ Adetailer adetaileræ˜¯ä¸€æ¬¾å¯ä»¥ä¿®å¤é¢éƒ¨å´©åä»¥åŠæ›´æ¢è„¸éƒ¨æ ‡ç­¾çš„æ’ä»¶ï¼Œæ“ä½œæ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬é€šè¿‡æœ¬åœ°å‘½ä»¤è¡Œæ¥è¿›è¡Œå®‰è£…ï¼š 12cd stable-diffusion-webuigit clone https://github.com/Bing-su/adetailer.git extensions/adetailer å®‰è£…å®Œæˆåé‡å¯æˆ‘ä»¬çš„SDè¿›è¡Œï¼Œæ‰“å¼€æµè§ˆå™¨åå‘ç°æ–‡ç”Ÿå›¾çš„å·¦ä¸‹æ–¹å¤šäº†ä¸€ä¸ªAdetaileré€‰é¡¹ï¼Œç‚¹å‡»å±•å¼€å¯ä»¥çœ‹åˆ°æœ‰ä¸€äº›å‚æ•°è°ƒæ•´ï¼Œç‚¹å‡»Enable ADetailerçš„é€‰é¡¹å°±å¯ä»¥å¯ç”¨æ’ä»¶äº†ï¼š æˆ‘ä»¬é€‰æ‹©mediapipe_face_fullæ¨¡å‹ï¼Œåœ¨ä¸‹é¢æç¤ºè¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹æœ€åç”Ÿæˆçš„é¢éƒ¨è¡¨æƒ…ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å†™smileï¼Œå¯ä»¥è®©ç”Ÿæˆçš„äººç‰©è¡¨æƒ…æ›´åŠ çš„å¾®ç¬‘ï¼›æœ€åçš„è¿è¡Œæ•ˆæœï¼Œé¢éƒ¨å¯¹æ¯”ä¹‹å‰ä¹Ÿæ›´åŠ çš„è‡ªç„¶ã€‚ ControlNet æˆ‘ä»¬çŸ¥é“åœ¨SDä¸­ï¼Œæƒ³è¦ç²¾ç¡®æ§åˆ¶ç‰©å“ã€äººç‰©æ˜¯æ¯”è¾ƒå›°éš¾çš„äº‹ï¼Œä¸è¿‡é€šè¿‡ControlNetæ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®Œæˆï¼Œé€šè¿‡ä¸‹é¢å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š 12cd stable-diffusion-webuigit clone https://github.com/Mikubill/sd-webui-controlnet extensions/sd-webui-controlnet é‡å¯åå¯ä»¥åœ¨ä¸»ç•Œé¢ä¸‹æ–¹çœ‹åˆ°ControlNetçš„é€‰é¡¹ã€‚ OpenPoseEditor é€šè¿‡OpenPoseEditoræ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥çš„æ§åˆ¶äººç‰©çš„åŠ¨ä½œ 12cd stable-diffusion-webuigit clone https://github.com/fkunn1326/openpose-editor.git extensions/openpose-editor ä¸€äº›é—®é¢˜Cannot locate TCMalloc. æŠ¥é”™ä¿¡æ¯ï¼š Cannot locate TCMalloc. Do you have tcmalloc or goole-perftool installed on your system? (imporves CPU memory usage) æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 1sudo apt-get install libgoogle-perftools4 libtcmalloc-minimal4 -y Canâ€™t load tokenizer for â€˜openai/clip-vit-large-patch14â€™ æŠ¥é”™ä¿¡æ¯ï¼š OSError: Canâ€™t load tokenizer for â€˜openai/clip-vit-large-patch14â€™. If you were trying to load it from â€˜https://huggingface.co/modelsâ€™, make sure you donâ€™t have a local directory with the same name. Otherwise, make sure â€˜openai/clip-vit-large-patch14â€™ is the correct path to a directory containing all relevant files for a CLIPTokenizer tokenizer. 12mkdir openaigit clone https://www.modelscope.cn/AI-ModelScope/clip-vit-large-patch14.git å‚è€ƒæ¨¡å‹ä¸‹è½½Cç«™civitai.comï¼ˆéœ€æ¢¯å­ï¼‰ huggingface.coï¼ˆéœ€æ¢¯å­ï¼‰ AIGC Cafe æç¤ºè¯ç”Ÿæˆå·¥å…·AIå’’æœ¯ç”Ÿæˆå™¨ Danbooruæ ‡ç­¾è¶…å¸‚ æç¤ºè¯åˆ†äº«ç¤¾åŒºlexica.art/","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"},{"name":"Linux","slug":"Linux","permalink":"https://xieyufei.com/tags/Linux/"},{"name":"å¼€æº","slug":"OpenSource","permalink":"https://xieyufei.com/tags/OpenSource/"}]},{"title":"å­¦å¥½setupè¯­æ³•ç³–ï¼Œå¿«é€Ÿä¸Šæ‰‹Vue3","date":"2023-10-19T04:00:00.000Z","path":"2023/10/19/Vue3-Setup.html","text":"åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œéƒ½ä½¿ç”¨äº†setupçš„è¯­æ³•ç³–ï¼Œå†™èµ·æ¥ååˆ†ç®€æ´æ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰äº›å°ä¼™ä¼´å¯¹å®ƒçš„ç”¨æ³•ä¸æ˜¯å¾ˆäº†è§£ï¼Œç§ä¿¡è¯´å¸Œæœ›èƒ½è®²ä¸€è®²ï¼›æœ¬æ–‡æˆ‘ä»¬å°±ç»“åˆtypescriptï¼Œè¯¦ç»†è®²é€setupè¯­æ³•ç³–çš„ä¸€äº›ç”¨æ³•ã€‚ ç®€ä»‹ æˆ‘ä»¬çŸ¥é“ï¼Œsetupå‡½æ•°æ˜¯vue3ä¸­çš„ä¸€å¤§ç‰¹æ€§å‡½æ•°ï¼Œæ˜¯ç»„åˆå¼APIçš„å…¥å£ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­ç”¨åˆ°çš„æ•°æ®å’Œå‡½æ•°éƒ½éœ€è¦åœ¨é‡Œé¢å®šä¹‰ï¼Œå¹¶ä¸”æœ€åé€šè¿‡setupå‡½æ•°å¯¼å‡ºåæ‰èƒ½åœ¨templateä¸­ä½¿ç”¨ï¼š 1234567891011121314151617181920212223&lt;script&gt;import &#123; ref &#125; from &#x27;vue&#x27;import Card from &#x27;./components/Card&#x27;;export default &#123; components: &#123; Card, &#125;, setup(props, ctx)&#123; const count = ref(0); const add = () =&gt; &#123; count.value ++ &#125; const sub = () =&gt; &#123; count.value ++ &#125; return &#123; count, add, sub, &#125; &#125;&#125;&lt;/script&gt; ä½†æ˜¯setupå‡½æ•°ä½¿ç”¨èµ·æ¥æ¯”è¾ƒè‡ƒè‚¿ï¼Œæ‰€æœ‰çš„é€»è¾‘éƒ½å†™åœ¨ä¸€ä¸ªå‡½æ•°ä¸­å®šä¹‰ï¼›æˆ‘ä»¬å‘ç°è¿™æ ·ç®€å•çš„å˜é‡å’Œå‡½æ•°ï¼Œéœ€è¦é¢‘ç¹çš„å®šä¹‰å¯¼å‡ºï¼Œå†æ¬¡å®šä¹‰å¯¼å‡ºï¼Œåœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ä¼šå¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å†™çš„æ—¶å€™ä¹Ÿæ˜¯éœ€è¦ä¸æ–­çš„æ¥å›åˆ‡æ¢ï¼Œè€Œä¸”å˜é‡ä¸€å¤šè¿˜å®¹æ˜“ææ··ã€‚ äºæ˜¯æ›´å¥½ç”¨çš„setupè¯­æ³•ç³–å‡ºç°äº†ï¼Œå°†setupå±æ€§æ·»åŠ åˆ°&lt;script&gt;æ ‡ç­¾ï¼Œä¸Šé¢çš„å˜é‡å’Œå‡½æ•°å¯ä»¥é€šè¿‡è¯­æ³•ç³–ç®€å†™æˆå¦‚ä¸‹ï¼š 12345678910&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;;const count = ref(0)const add = () =&gt; &#123; count.value ++&#125;const sub = () =&gt; &#123; count.value ++&#125;&lt;/script&gt; é€šè¿‡ä¸Šé¢çš„ä¸€ä¸ªç®€å•çš„å°æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å°±å‘ç°setupè¯­æ³•ç³–ä¸éœ€è¦æ˜¾ç¤ºçš„å®šä¹‰å’Œå¯¼å‡ºäº†ï¼Œè€Œæ˜¯ç›´æ¥å®šä¹‰å’Œä½¿ç”¨ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€é«˜æ•ˆå’Œå¯ç»´æŠ¤ï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°æ˜“è¯»ï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹ä¸‹è¿˜æœ‰å“ªäº›ç”¨æ³•ã€‚ åŸºæœ¬ç”¨æ³• ä¸Šé¢çš„æ¡ˆä¾‹æˆ‘ä»¬å·²ç»çŸ¥é“äº†åœ¨setupè¯­æ³•ç³–ä¸­ï¼Œä¸éœ€è¦å†ç¹ççš„è¿›è¡Œæ‰‹åŠ¨å¯¼å‡ºï¼›ä¸è¿‡setupè¯­æ³•ç³–ä¸æ”¯æŒè®¾ç½®ç»„ä»¶åç§°nameï¼Œå¦‚æœéœ€è¦è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä¸¤ä¸ªscriptæ ‡ç­¾ï¼š 123456789&lt;script&gt;export default &#123; name: &#x27;HomeView&#x27;,&#125;;&lt;/script&gt;&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;;// ...&lt;/script&gt; å¦‚æœè®¾ç½®äº†langå±æ€§ï¼Œscriptæ ‡ç­¾å’Œscript setupæ ‡ç­¾éœ€è¦è®¾ç½®æˆç›¸åŒçš„å±æ€§ã€‚ ç”Ÿå‘½å‘¨æœŸ Vue3ä¸­å–æ¶ˆäº†createçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåœ¨å…¶ä»–çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å‰é¢åŠ ä¸Šäº†onï¼Œä¾‹å¦‚onMountedã€onUpdatedï¼›åŒæ—¶æ–°å¢äº†setupå‡½æ•°æ›¿ä»£äº†createå‡½æ•°ï¼Œsetupå‡½æ•°æ¯”mounteå‡½æ•°æ›´æ—©æ‰§è¡Œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­å¯¼å…¥å‡½æ•°é’©å­ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬ï¼š 1234567891011121314151617&lt;script lang=&quot;ts&quot; setup&gt;import &#123; onBeforeMount, onMounted, onBeforeUpdate, onUpdated, onBeforeUnmount, onUnmounted, onActivated, onDeactivated, onErrorCaptured,&#125; from &quot;vue&quot;;onBeforeMount(()=&gt;&#123; // ...&#125;)&lt;/script&gt; å’Œvue2çš„8ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ç›¸æ¯”ï¼Œåœ¨setupå‡½æ•°ä¸­ï¼Œæ’é™¤äº†beforeCreateå’Œcreatedï¼ŒåŠ ä¸ŠonActivatedå’ŒonDeactivated2ä¸ªåœ¨keep-aliveä¸­ä½¿ç”¨çš„å‡½æ•°é’©å­ï¼Œå’Œä¸€ä¸ªonErrorCapturedå¼‚å¸¸æ•è·é’©å­ï¼Œä¸€å…±æœ‰9ä¸ªç”Ÿå‘½å‘¨æœŸçš„å‡½æ•°é’©å­å¯ä¾›ä½¿ç”¨ã€‚ å“åº”å¼ å“åº”å¼æ˜¯vue3å’Œvue2æ¯”è¾ƒå¤§çš„ä¸€å¤„ä¸åŒä¹‹å¤„ï¼Œvue2åœ¨dataä¸­å®šä¹‰çš„æ•°æ®ä¼šè‡ªåŠ¨åŠ«æŒæˆä¸ºå“åº”å¼ï¼Œè€Œvue3é»˜è®¤è¿”å›çš„æ•°æ®ä¸æ˜¯å“åº”å¼çš„ï¼Œéœ€è¦é€šè¿‡refå’Œreactiveæ¥å®šä¹‰æ•°æ®ï¼Œrefå®šä¹‰ç®€å•çš„æ•°æ®ç±»å‹ï¼Œè€Œreactiveå®šä¹‰å¤æ‚æ•°æ®ç±»å‹ï¼Œä½¿ä¹‹æˆä¸ºå“åº”å¼ï¼š 12345678&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, reactive &#125; from &#x27;vue&#x27;;const count = ref(0);const person = reactive(&#123; name: &#x27;jone&#x27;, age: 18,&#125;)&lt;/script&gt; è™½ç„¶refæ˜¯ç”¨æ¥å®šä¹‰ç®€å•æ•°æ®ç±»å‹ï¼Œä¸è¿‡å¯¹äºå¯¹è±¡å’Œæ•°ç»„çš„å¤æ‚æ•°æ®ç±»å‹ä¹Ÿèƒ½ä½¿ç”¨ï¼Œä¸è¿‡ä½¿ç”¨æ—¶éƒ½éœ€è¦åŠ ä¸Š.valueï¼š 12345678910111213&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, reactive &#125; from &#x27;vue&#x27;;const list = ref([]);const person = ref(&#123; name: &#x27;jone&#x27;, age: 18,&#125;);list.value.push(23);console.log(person.value.name)// æŠ¥é”™// ç±»å‹â€œnumberâ€çš„å‚æ•°ä¸èƒ½èµ‹ç»™ç±»å‹â€œobjectâ€çš„å‚æ•°ã€‚const count = reactive(2)&lt;/script&gt; refå’Œreactiveçœ‹èµ·æ¥ç”¨æ³•æ˜¯ç›¸åŒçš„ï¼Œä½†ä½¿ç”¨refæ—¶ï¼Œæ“ä½œå˜é‡å€¼çš„æ—¶å€™éœ€è¦ç”¨.valueï¼Œå› æ­¤é€‚ç”¨é›¶æ•£çš„å•ä¸ªå˜é‡ï¼›å¦‚æœæ˜¯å¤šä¸ªç›¸å…³è”çš„å˜é‡ï¼Œæ¯”å¦‚ç”¨æˆ·çš„ä¸€ç³»åˆ—ä¿¡æ¯ï¼Œå§“åã€æ€§åˆ«ã€ä½å€ç­‰ï¼Œä½¿ç”¨refå®šä¹‰å•ä¸ªå˜é‡è¾ƒä¸ºéº»çƒ¦ï¼Œå°±å¯ä»¥ä½¿ç”¨reactiveç»„åˆæˆå¯¹è±¡ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è¦ç”¨åˆ°å¤æ‚æ•°æ®ç±»å‹ä¸­çš„æŸä¸ªå±æ€§ï¼Œè¿˜æƒ³è¦å’ŒåŸæ¥çš„æ•°æ®ä¿æŒå…³è”ï¼Œæ¯”å¦‚personä¸­çš„nameæˆ–è€…ageï¼Œåªé€šè¿‡è§£æ„çš„æ–¹å¼ï¼Œæ•°æ®å“åº”æ€§ä¼šä¸¢å¤±ï¼Œé¡µé¢å¹¶ä¸ä¼šæ”¹å˜ï¼š 123456789101112131415&lt;template&gt; &lt;div&gt;&#123;&#123; name &#125;&#125; &#123;&#123; age &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, reactive &#125; from &#x27;vue&#x27;;const person = reactive(&#123; name: &#x27;jone&#x27;, age: 18,&#125;);const &#123; name, age &#125; = person;setTimeout(() =&gt; &#123; // é¡µé¢ä¸Šçš„æ•°æ®å¹¶ä¸ä¼šå“åº”æ”¹å˜ person.name = &quot;hello&quot;;&#125;, 1500);&lt;/script&gt; è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨toRef()å‡½æ•°æ¥å…³è”ä¸¤ä¸ªå˜é‡ï¼Œè¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½ç›¸å½“äºåˆ›å»ºäº†ä¸€ä¸ªrefå¯¹è±¡ï¼Œå¹¶å°†å…¶å€¼æŒ‡å‘å¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§ï¼š 1234567891011121314&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, reactive, toRef &#125; from &#x27;vue&#x27;;const person = reactive(&#123; name: &#x27;jone&#x27;, age: 18,&#125;);const name = toRef(person, &#x27;name&#x27;);setTimeout(() =&gt; &#123; // é¡µé¢ä¸Šçš„æ•°æ®éšä¹‹å“åº” person.name = &quot;hello&quot;; // æˆ–è€…ç›´æ¥æ›´æ”¹nameå˜é‡ name = &quot;hello&quot;;&#125;, 1500);&lt;/script&gt; è¿™æ ·ï¼Œæˆ‘ä»¬æ›´æ”¹personä¸­çš„å±æ€§æˆ–è€…ç›´æ¥æ›´æ”¹nameå˜é‡ï¼Œä¸¤è€…éƒ½ä¼šéšå¯¹æ–¹çš„æ”¹å˜è€Œæ”¹å˜ï¼›æˆ‘ä»¬å‘ç°toRefä¸€æ¬¡åªèƒ½åˆ›å»ºä¸€ä¸ªrefå¯¹è±¡ï¼Œå¦‚æœåŒæ—¶æœ‰æ•°ä¸ªå˜é‡ï¼Œæ•ˆç‡ä¸å¤Ÿé«˜ï¼Œå°±éœ€è¦ç”¨åˆ°toRefs()ï¼š 123456789&lt;script lang=&quot;ts&quot; setup&gt;import &#123; toRefs &#125; from &#x27;vue&#x27;;const person = reactive(&#123; name: &#x27;jone&#x27;, age: 18,&#125;);console.log(toRefs(person));console.log(person);&lt;/script&gt; toRefåªæ˜¯åˆ›å»ºä¸€ä¸ªrefå˜é‡ï¼Œè€ŒtoRefsåˆ™æ˜¯åˆ›å»ºäº†ä¸€å †refå˜é‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†å“åº”å¼å¯¹è±¡ä¸Šæ‰€æœ‰çš„å±æ€§éƒ½è½¬æ¢ä¸ºrefï¼Œç„¶åå†å°†è¿™äº›å˜é‡ç»„åˆæˆä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æ‰“å°å‡ºæ¥çœ‹ä¸‹ï¼Œå‘ç°toRefsåçš„æ•°æ®ä¹Ÿåªæ˜¯ä¸€ä¸ªæ™®é€šçš„å¯¹è±¡ï¼Œåªä¸è¿‡å¯¹è±¡ä¸­æœ‰å¾ˆå¤šçš„refå˜é‡ï¼š è™½ç„¶toRefå¯ä»¥å°†å“åº”å¼æ•°æ®çš„å±æ€§è½¬æ¢æˆrefå¯¹è±¡ï¼Œä¸è¿‡å½“toRefå’Œpropsç»“åˆä½¿ç”¨çš„æ—¶å€™ï¼Œæ˜¯ä¸å…è®¸ä¿®æ”¹refå¯¹è±¡çš„å€¼çš„ï¼Œå› ä¸ºè¿™æ ·ç­‰äºç›´æ¥ä¿®æ”¹propsçš„æ•°æ®ï¼Œè¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ä¸‹é¢ä»‹ç»çš„å¸¦æœ‰get/setçš„computedå‡½æ•°ã€‚ 12345678&lt;script setup&gt;const title = toRef(props, &quot;title&quot;);const clickChange = () =&gt; &#123; // æŠ¥è­¦ï¼š // Set operation on key &quot;title&quot; failed: target is readonly. title.value = &quot;new title&quot;;&#125;;&lt;/script&gt; æˆ‘ä»¬å¯ä»¥å°†titleæ”¹æˆcomputedçš„å½¢å¼ï¼š 12345678&lt;script setup&gt;const title = computed(&#123; get: () =&gt; props.title, set: (val) =&gt; &#123; emits(&quot;update:title&quot;, val); &#125;,&#125;);&lt;/script&gt; æ­¤å¤–ï¼Œå¯¹äºä¸€äº›å¤ç”¨æ€§é«˜çš„æ•°æ®å’Œä¸šåŠ¡é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å°è£…åˆ°ç»„åˆå‡½æ•°ä¸­ï¼Œæ‰€è°“çš„ç»„åˆå¼å‡½æ•°ï¼Œå®˜æ–¹çš„è§£é‡Šå¦‚ä¸‹ï¼š åœ¨Vueåº”ç”¨çš„æ¦‚å¿µä¸­ï¼Œâ€œç»„åˆå¼å‡½æ•°â€(Composables) æ˜¯ä¸€ä¸ªåˆ©ç”¨ Vue çš„ç»„åˆå¼ API æ¥å°è£…å’Œå¤ç”¨æœ‰çŠ¶æ€é€»è¾‘çš„å‡½æ•°ã€‚ æ¯”å¦‚å¯¹äºåˆ†é¡µè¯·æ±‚çš„åˆ—è¡¨æ•°æ®tableListå’Œé¡µç ç­‰å¤šæ•°é¡µé¢ä¼šç”¨åˆ°çš„å¤ç”¨æ€§é«˜çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å°†å…¶æå–åˆ°ç»„åˆå¼å‡½æ•°ä¸­æ¥ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥åˆ©ç”¨toRefså‡½æ•°å°†å“åº”å¼æ•°æ®è½¬æ¢æˆå¤šä¸ªrefï¼ŒåŒæ—¶ä¹Ÿä¸å¤±å»å“åº”æ€§ï¼š 1234567891011121314151617&lt;script setup&gt;import &#123; reactive, toRefs &#125; from &quot;vue&quot;;export function usePage() &#123; const state = reactive(&#123; pageNo: 1, pageSize: 10, tableList: [], &#125;); const addPageNo = () =&gt; &#123; state.pageNo++; &#125;; const getTableList = () =&gt; &#123; // å¼‚æ­¥è·å–åˆ—è¡¨æ•°æ® &#125;; return &#123; ...toRefs(state), addPageNo, getTableList &#125;;&#125;&lt;/script&gt; æˆ‘ä»¬åœ¨é¡µé¢ä¸Šå¼•å…¥usePageå‡½æ•°ï¼ŒåŒæ—¶è§£æ„å‡ºå…¶ä¸­çš„æ•°æ®å’Œå‡½æ•°ï¼š 12345&lt;script setup&gt;import &#123; usePage &#125; from &quot;@/hooks/page&quot;;const &#123; tableList, pageNo, pageSize, addPageNo &#125; = usePage();&lt;/script&gt; computed computedæ˜¯åŸºäºä¾èµ–è¿›è¡Œç¼“å­˜çš„ä¸€ç§å±æ€§ï¼Œç”¨äºæ´¾ç”Ÿå‡ºæˆ–è€…è®¡ç®—å‡ºä¸€ä¸ªå€¼ï¼›æˆ‘ä»¬åœ¨setupä¸­ä½¿ç”¨æ—¶ï¼Œéœ€è¦å…ˆå¼•å…¥computed 1234567&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, computed &#125; from &#x27;vue&#x27;;const count = ref(10);const double = computed(() =&gt; count.value * 2);&lt;/script&gt; æˆ‘ä»¬ç»™computedå‡½æ•°ä¼ å…¥ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç®­å¤´å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºcomputedçš„è®¡ç®—è¿”å›ï¼›ä¸è¿‡æ­¤æ—¶çš„doubleæ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œåœ¨setupä¸­é€šè¿‡.valueè·å–å…¶å€¼ï¼Œå¦‚æœå¼ºè¡Œæ”¹å˜å…¶å€¼ä¼šæŠ¥é”™ï¼›computedä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªoptionsï¼ŒåŠ¨æ€è®¾ç½®ä¾èµ–å€¼ï¼š 1234567891011121314&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, computed &#125; from &#x27;vue&#x27;;const count = ref(10);const double = computed(&#123; get: () =&gt; count.value * 2, set: (val) =&gt;&#123; count.value = val / 2 &#125;&#125;);// è¿™æ ·ä¼šè§¦å‘doubleçš„setå‡½æ•°double.value = 16&lt;/script&gt; watchå’ŒwatchEffect åœ¨Vue3ä¸­ï¼Œwatchå’ŒwatchEffectéƒ½æ˜¯ç”¨æ¥ä¾¦å¬æ•°æ®æºå¹¶æ‰§è¡Œç›¸åº”æ“ä½œçš„å‡½æ•°ï¼›å…¶ä¸­watchå‡½æ•°æ˜¯ç”¨æ¥ä¾¦å¬ç‰¹å®šçš„æ•°æ®æºï¼Œå¹¶åœ¨æ•°æ®æºæ”¹å˜æ—¶æ‰§è¡Œå›è°ƒå‡½æ•°ï¼š 1234567&lt;script setup lang=&quot;ts&quot;&gt;const name = ref(&quot;aa&quot;);watch(name, (newVal, oldVal) =&gt; &#123; // ...&#125;);&lt;/script&gt; å¯¹äºreactiveå¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¾ˆå¤šå°ä¼™ä¼´ç†æ‰€åº”å½“çš„è®¤ä¸ºè¿™æ ·å†™å°±å¯ä»¥äº†ï¼š 123456789&lt;script setup lang=&quot;ts&quot;&gt;const person = reactive(&#123; name: &quot;cc&quot;,&#125;);watch(person.name, (newVal, oldVal) =&gt; &#123; // ... &#125;);&lt;/script&gt; å¦‚æœæŒ‰ç…§ä¸Šé¢å†™æ³•ï¼Œåˆ™ä¼šæŠ¥ä»¥ä¸‹å‘Šè­¦ä¿¡æ¯ï¼š A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types. è¿™æ˜¯å› ä¸ºperson.nameå˜é‡å­˜æ”¾çš„æ˜¯ä¸€ä¸ªå›ºå®šçš„å­—ç¬¦ä¸²å€¼ï¼Œwatchæ‹¿åˆ°çš„å‚æ•°åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯å­—ç¬¦ä¸²å¹¶ä¸å…·å¤‡ä»»ä½•å“åº”å¼çš„å±æ€§ï¼›å› æ­¤ä¸Šè¿°çš„æŠ¥é”™ä¿¡æ¯æç¤ºäº†ï¼Œå¯ä»¥ä¼ å…¥ä¸€ä¸ªgetterå‡½æ•°ã€refå€¼ã€reactiveå¯¹è±¡æˆ–è€…ä»¥ä¸Šç±»å‹çš„æ•°ç»„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æœ‰ä»¥ä¸‹ä¸¤ç§ä¿®æ”¹æ–¹å¼ï¼š 123456789101112131415&lt;script setup&gt;const person = reactive(&#123; name: &quot;cc&quot;,&#125;);// ç¬¬ä¸€ç§ï¼Œç›´æ¥ç›‘å¬å¯¹è±¡watch(person, (newVal, oldVal) =&gt; &#123; // ... &#125;);// ç¬¬äºŒç§ï¼Œé€šè¿‡getterå‡½æ•°åŒ…è£¹watch(() =&gt; person.name, (newVal, oldVal) =&gt; &#123; // ... &#125;);&lt;/script&gt; åŒæ ·çš„ï¼Œæˆ‘ä»¬å¦‚æœè¦ç›‘å¬å¤šä¸ªå±æ€§ï¼Œä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼š 12345&lt;script setup&gt;watch([() =&gt; person.name, count], (val) =&gt; &#123; console.log(&quot;val&quot;, val);&#125;);&lt;/script&gt; é‚£ä¹ˆï¼Œæœ‰è¶£çš„äº‹æƒ…æ¥äº†ï¼Œå¦‚æœæˆ‘ä»¬å°†æƒ…å†µå˜å¾—æ›´åŠ å¤æ‚ä¸€äº›ï¼Œpersonä¸­çš„å±æ€§æ˜¯å¤šå±‚åµŒå¥—çš„å¤æ‚å¯¹è±¡ï¼š 1234567891011121314151617181920&lt;script setup&gt;const person = reactive(&#123; a: &#123; b: &#123; c: &quot;22&quot;, &#125;, &#125;,&#125;);watch( person, (val) =&gt; &#123; // ... &#125;,);setTimeout(() =&gt; &#123; person.a.b.c = &quot;33&quot;;&#125;, 1.5 * 1000);&lt;/script&gt; å¦‚æœä½¿ç”¨watchç›‘å¬personä¸­çš„å±æ€§ï¼Œè¿˜æ˜¯èƒ½ç›‘å¬åˆ°æ”¹å˜ï¼Œå› ä¸ºwatchä¼šè‡ªåŠ¨å¯¹reactiveå¯¹è±¡å¼€å¯æ·±åº¦ç›‘å¬ï¼›ä½†æ˜¯ç”¨getterå‡½æ•°åŒ…è£¹çš„åµŒå¥—å±æ€§ï¼Œè¿˜èƒ½å—ï¼Ÿ 1234567891011121314151617181920&lt;script setup&gt;const person = reactive(&#123; a: &#123; b: &#123; c: &quot;22&quot;, &#125;, &#125;,&#125;);watch( () =&gt; person.a.b, (val) =&gt; &#123; // ... &#125;,);setTimeout(() =&gt; &#123; person.a.b.c = &quot;33&quot;;&#125;, 1.5 * 1000);&lt;/script&gt; å¾ˆé—æ†¾ï¼Œè¿™æ ·å¹¶ä¸èƒ½ç›‘å¬åˆ°ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¤šçº§çš„å±æ€§æ‰‹åŠ¨å¼€å¯æ·±åº¦ç›‘å¬ï¼š 1234567891011&lt;script setup&gt;watch( () =&gt; person.a.b, (val) =&gt; &#123; // ... &#125;, &#123; deep: true, &#125;);&lt;/script&gt; watchEffectå‡½æ•°åˆ™æ˜¯vue3æ–°å¢çš„ä¸€ä¸ªapiï¼Œç”¨äºä¾¦å¬å“åº”å¼æ•°æ®æºï¼Œå‘é€æ”¹å˜åè‡ªåŠ¨é‡æ–°è¿è¡Œå‡½æ•°ï¼›watchEffectå¯ä»¥è§‚å¯Ÿåˆ°å‡½æ•°ä¸­æ‰€æœ‰çš„å“åº”å¼æ•°æ®ï¼Œå¹¶ä¸”åœ¨è¿™äº›æ•°æ®å‘é€æ”¹å˜åè‡ªåŠ¨é‡æ–°è¿è¡Œå‡½æ•°ï¼š 12345678910111213141516&lt;script setup&gt;const person = reactive(&#123; first: &quot;aa&quot;, last: &quot;bb&quot;,&#125;);watchEffect(() =&gt; &#123; console.log(person.first); console.log(person.last);&#125;);setTimeout(() =&gt; &#123; person.first = &quot;bb&quot;;&#125;, 1 * 1000);setTimeout(() =&gt; &#123; person.last = &quot;cc&quot;;&#125;, 2 * 1000);&lt;/script&gt; watchEffectç›‘å¬çš„ä»»æ„æ•°æ®å‘ç”Ÿå˜åŒ–éƒ½ä¼šè§¦å‘å‡½æ•°ã€‚ è·å–ç»„ä»¶å®ä¾‹ åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è·å–å…ƒç´ çš„domèŠ‚ç‚¹æˆ–è€…å­ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œæ¯”å¦‚canvasç”»å›¾ä¼ å…¥domèŠ‚ç‚¹æˆ–è€…è°ƒç”¨å­ç»„ä»¶å†…éƒ¨çš„å‡½æ•°ç­‰ç­‰ï¼Œéƒ½éœ€è¦è·å–èŠ‚ç‚¹ï¼›åœ¨vue2ä¸­æ˜¯é€šè¿‡this.$refsçš„æ–¹å¼ï¼Œvue3ä¸­éœ€è¦é€šè¿‡refï¼š 123456789101112131415161718&lt;template&gt; &lt;div ref=&quot;myRef&quot;&gt;&lt;/div&gt; &lt;my-component ref=&quot;myDom&quot;&gt;&lt;/my-component&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;import MyComponent from &#x27;@/component/MyComponent&#x27;;const myRef = ref(null);const myDom = ref(null);onMounted(() =&gt; &#123; // domå…ƒç´  console.log(myRef.value); // ç»„ä»¶èŠ‚ç‚¹ myDom.value.reload();&#125;);&lt;/script&gt; æˆ‘ä»¬å‘ç°ç»„ä»¶importå¯¼å…¥åï¼Œåœ¨æ¨¡æ¿ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨äº†ï¼Œä¸éœ€è¦å†è¿›è¡Œæ³¨å†Œï¼›ç»™éœ€è¦æ“ä½œçš„èŠ‚ç‚¹ç»‘å®šrefå±æ€§ï¼Œåç§°å’Œä¸‹é¢refå®šä¹‰çš„ä¿æŒä¸€è‡´ï¼›ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ“ä½œdomå…ƒç´ éœ€è¦åœ¨é¡µé¢mountedä¹‹åã€‚ å¯¹äºforå¾ªç¯ä¸­çš„å¤šä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å°†refå±æ€§æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°çš„å‚æ•°ä»£è¡¨äº†å½“å‰å¾ªç¯çš„å…ƒç´ ï¼Œå°†å…¶å­˜å‚¨ä¸‹æ¥ï¼Œå°±å¯ä»¥è·å–å¤šä¸ªèŠ‚ç‚¹çš„åˆ—è¡¨ï¼š 12345678910111213&lt;template&gt; &lt;div v-for=&quot;item in list&quot; :key=&quot;item&quot; :ref=&quot;setRef&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref , onMounted &#125; from &#x27;vue&#x27;;const list = ref([1,2,3,5,7,8]);const refList = ref([]);const setRef = (el) =&gt;&#123; refList.value.push(el)&#125;&lt;/script&gt; Props å¯¹setupçš„åŸºç¡€ç”¨æ³•æœ‰äº†ä¸€å®šäº†è§£ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹setupè¯­æ³•ç³–çš„æ›´å¤šç”¨æ³•ï¼›é¦–å…ˆå°±æ˜¯çˆ¶å­ç»„ä»¶ä¼ æ•°æ®ï¼Œå­ç»„ä»¶éœ€è¦å®šä¹‰propsï¼Œé€šè¿‡definePropsæŒ‡å®špropsçš„æ•°æ®ç±»å‹ï¼Œä¸»è¦æœ‰ä¸‰ç§å†™æ³•æ–¹å¼ï¼š 12345678910111213141516171819&lt;script setup&gt;import &#123; defineProps &#125; from &#x27;vue&#x27;;// ç¬¬ä¸€ç§defineProps([&#x27;title&#x27;]);// ç¬¬äºŒç§defineProps(&#123; title: String, count: Number,&#125;);// ç¬¬ä¸‰ç§defineProps(&#123; title: &#123; type: String, default: &#x27;&#x27;, required: true, &#125;&#125;),&lt;/script&gt; æ¥æ”¶åˆ°çš„propså¯ä»¥ç›´æ¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ï¼›å¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å¯¹è±¡å’Œæ•°ç»„ï¼Œæˆ‘ä»¬åœ¨ä¸ºå…¶è®¾ç½®é»˜è®¤å€¼çš„æ—¶å€™ï¼Œå¦‚æœåªå†™ä¸€ä¸ªç©ºæ•°ç»„ï¼Œå°±ä¼šæŠ¥é”™ï¼š 1234567891011&lt;script setup&gt;import &#123; defineProps &#125; from &#x27;vue&#x27;;// æŠ¥é”™ï¼š// Type of the default value for &#x27;list&#x27; prop must be a function.defineProps(&#123; list: &#123; type: Array, default: [], &#125;,&#125;),&lt;/script&gt; æ­£ç¡®çš„æ–¹å¼æ˜¯é€šè¿‡å‡½æ•°çš„æ–¹å¼è¿”å›ï¼š 12345678910111213&lt;script setup&gt;import &#123; defineProps &#125; from &#x27;vue&#x27;;defineProps(&#123; list: &#123; type: Array, default: () =&gt; [], &#125;, data: &#123; type: Object, default: () =&gt; (&#123;&#125;), &#125;,&#125;),&lt;/script&gt; å¯¹äºç»„åˆç±»å‹çš„propsï¼Œå¯ä»¥é€šè¿‡ä¸­æ‹¬å·ï¼Œä½¿ç”¨é€—å·è¿›è¡Œåˆ†å‰²ï¼š 1234567&lt;script setup&gt;defineProps(&#123; title: &#123; type: [String, Number], &#125;,&#125;),&lt;/script&gt; ä¸Šé¢çš„å†™æ³•ï¼Œæ ¹æ®å®˜æ–¹çš„è¯´æ˜ï¼Œç§°ä¸ºè¿è¡Œæ—¶å£°æ˜ï¼Œä¹Ÿå°±æ˜¯åœ¨é¡¹ç›®è¿è¡Œæ—¶æ‰ä¼šæ ¡éªŒå‚æ•°çš„ç±»å‹æ˜¯å¦æ­£ç¡®ï¼›è€Œä½¿ç”¨äº†typescripï¼Œå¯ä»¥åŸºäºç±»å‹å£°æ˜ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨IDEä¸­ä¼ å…¥å‚æ•°æ—¶ï¼Œç«‹åˆ»å°±èƒ½è¿›è¡Œç±»å‹æ¨æ–­å’Œæ£€æŸ¥ï¼š è¿è¡Œæ—¶å£°æ˜å’ŒåŸºäºç±»å‹å£°æ˜ä¸å¯åŒæ—¶ä½¿ç”¨ã€‚ 123456789101112131415&lt;script setup lang=&quot;ts&quot;&gt;interface Props &#123; title: string; count?: number; flag?: boolean; list?: Array&lt;ListItem&gt;; obj: ListItem;&#125;interface ListItem &#123; id: number; name: string;&#125;const props = defineProps&lt;Props&gt;();&lt;/script&gt; ä½¿ç”¨definePropsè¿›è¡ŒåŸºäºç±»å‹å£°æ˜çš„ç¼ºç‚¹å°±æ˜¯ä¸èƒ½ç»™propsæä¾›é»˜è®¤å€¼ï¼Œè¿™é‡Œè¿˜éœ€è¦ç”¨åˆ°ä¸€ä¸ªwithDefaultså‡½æ•°è¿›è¡Œé»˜è®¤èµ‹å€¼ï¼š 123456789&lt;script setup lang=&quot;ts&quot;&gt;const props = withDefaults(defineProps&lt;Props&gt;(), &#123; title: &quot;&quot;, count: 0, flag: false, list: () =&gt; [], obj: () =&gt; (&#123; id: 0, name: &quot;&quot; &#125;),&#125;);&lt;/script&gt; æ¯æ¬¡ç”¨åˆ°definePropsï¼Œéƒ½éœ€è¦ä»vueä¸­å¼•å…¥ï¼Œè¿™æ ·æ¯”è¾ƒéº»çƒ¦ï¼›å¾ˆå¤šæ–‡ç« ä¸­éƒ½ä¼šè¯´è¿™æ˜¯ä¸€ä¸ªå®å‡½æ•°ï¼Œä¸éœ€è¦å¯¼å…¥ï¼Œç›´æ¥ä½¿ç”¨ï¼›æ‰€è°“çš„å®å‡½æ•°ä¹Ÿå«ç¼–è¯‘å®å‡½æ•°ï¼Œæ˜¯åœ¨ä½œç”¨åŸŸå†…æ²¡æœ‰å®šä¹‰ï¼Œè€Œåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è‡ªåŠ¨æ³¨å…¥çš„å·¥å…·å‡½æ•°ï¼›å®é™…é¡¹ç›®ä¸­eslintä¼šæ ¡éªŒå¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨eslinté…ç½®ä¸­å¼€å¯ç¼–è¯‘å®ï¼š 1234567// .eslintrc.jsmodule.exports = &#123; env: &#123; // æ–°å¢ä»¥ä¸‹ &quot;vue/setup-compiler-macros&quot;: true, &#125;,&#125;; ä¿®æ”¹å®Œåéœ€è¦é‡å¯æœåŠ¡å™¨ï¼Œè¿™æ ·ï¼Œä¸‹é¢çš„defineEmitsã€defineExposeç­‰å‡½æ•°éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ Emits defineEmitså‡½æ•°æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰ç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶çš„APIï¼Œé€šå¸¸ç”¨äºå­ç»„ä»¶ä¸­ï¼›å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ï¼Œç”¨äºæŒ‡å®šéœ€è¦å®šä¹‰çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚ å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶çš„åç§°ï¼š 12345678910&lt;script setup&gt;const emits = defineEmits([&quot;add&quot;, &quot;sub&quot;]);const count = ref(0);const clickAddBtn = () =&gt; &#123; emits(&quot;add&quot;, count.value++);&#125;;const clickSubBtn = () =&gt; &#123; emits(&quot;sub&quot;, count.value++);&#125;;&lt;/script&gt; åœ¨çˆ¶ç»„ä»¶ä¸­æˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä½¿ç”¨@addå’Œ@subçš„å›è°ƒå‡½æ•°äº†ã€‚è€Œå¦‚æœæˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„é”®å°±æ˜¯è‡ªå®šä¹‰äº‹ä»¶çš„åç§°ï¼Œå€¼å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºéªŒè¯è‡ªå®šä¹‰äº‹ä»¶çš„å‚æ•°ç±»å‹ã€‚ 123456789101112&lt;script setup&gt;const emits = defineEmits(&#123; customEvent: (res) =&gt; &#123; console.log(&quot;äº‹ä»¶æ•°æ®:&quot;, res); return res &gt; 5; &#125;,&#125;);const clickBtn = () =&gt; &#123; emits(&quot;customEvent&quot;, Math.floor(Math.random() * 10));&#125;;&lt;/script&gt; åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†è‡ªå®šä¹‰äº‹ä»¶customEventï¼›å½“è¯¥äº‹ä»¶è¢«è§¦å‘æ—¶ï¼Œå°±ä¼šè°ƒç”¨customEventåé¢å®šä¹‰çš„å‡½æ•°ï¼Œæ‰“å°å‡ºè´Ÿè½½æ•°æ®ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨customEventå‡½æ•°ä¸­è¿”å›ä¸€ä¸ªBooleanç±»å‹ï¼Œå¯¹å“åº”æ•°æ®è¿›è¡Œæ ¡éªŒï¼Œå¦‚æœè¿”å›falseï¼Œæ•°æ®æ ¡éªŒä¸é€šè¿‡ï¼Œä¼šåœ¨æ§åˆ¶å°è¿›è¡Œæç¤ºï¼š [Vue warn]: Invalid event arguments: event validation failed for event â€œcustomEventâ€. defineEmitså†™æ³•ä¹Ÿåˆ†ä¸ºè¿è¡Œæ—¶å£°æ˜å’ŒåŸºäºç±»å‹å£°æ˜ï¼Œä½¿ç”¨åŸºäºç±»å‹å£°æ˜åŒæ ·éœ€è¦åœ¨å‡½æ•°åé¢è·Ÿä¸Šæ•°æ®ç±»å‹ï¼Œä½¿ç”¨eå£°æ˜å‡½æ•°çš„åç§°ï¼š 12345678910&lt;script lang=&quot;ts&quot; setup&gt;const emits = defineEmits&lt;&#123; (e: &quot;click&quot;, data: number, data1: number): void; (e: &quot;custom&quot;): void;&#125;&gt;();const clickBtn = () =&gt; &#123; emits(&quot;click&quot;, 2, 3);&#125;;&lt;/script&gt; ä¸è¿‡ï¼Œè¿™æ ·çš„å†™æ³•ä¸æ˜¯å¾ˆå‹å¥½ï¼Œè€Œvue3.3å¼•å…¥äº†ä¸€ç§æ›´ç¬¦åˆäººä½“å·¥ç¨‹å­¦çš„å£°æ˜æ–¹å¼ï¼Œå†™æ³•æ›´åŠ å‹å¥½ï¼š 123456&lt;script lang=&quot;ts&quot; setup&gt;const emit = defineEmits&lt;&#123; foo: [id: number] bar: [name: string, ...rest: any[]]&#125;&gt;()&lt;/script&gt; Expose åœ¨vue2ä¸­ï¼Œå¦‚æœçˆ¶ç»„ä»¶éœ€è¦è°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨this.$refs.child.getData()ï¼Œå°±å¯ä»¥è°ƒç”¨ï¼›ä½†æ˜¯åœ¨vue3ä¸­ï¼Œå­ç»„ä»¶é»˜è®¤éƒ½ä¸ä¼šæš´éœ²ä»»ä½•æ•°æ®å’Œæ–¹æ³•ï¼Œéœ€ç”¨é€šè¿‡defineExposeå‡½æ•°å®šä¹‰åæ‰èƒ½æ‹¿åˆ°ï¼š 123456789101112// Child.vue&lt;script setup&gt;const count = ref(2);const fn = () =&gt; &#123; console.log(&quot;1&quot;);&#125;;defineExpose(&#123; fn, count,&#125;);&lt;/script&gt; çˆ¶ç»„ä»¶é€šè¿‡ä¸Šé¢refçš„æ–¹å¼è·å–ç»„ä»¶å®ä¾‹ï¼Œå³å¯è°ƒç”¨å­ç»„ä»¶æš´éœ²çš„æ–¹æ³•ï¼› 12345678// Parent.vue&lt;script lang=&quot;ts&quot; setup&gt;const childRef = ref(null);onMounted(() =&gt; &#123; childRef.value.fn(); console.log(childRef.value.count);&#125;);&lt;/script&gt; åŒæ ·çš„ï¼ŒdefineExposeä¹Ÿæ”¯æŒåŸºäºç±»å‹å£°æ˜ï¼š 123456789101112131415161718192021222324252627&lt;script lang=&quot;ts&quot; setup&gt;import &#123; Ref &#125; from &#x27;vue&#x27;;const count = ref(2);const fn = () =&gt; &#123; return 2;&#125;;interface FORM &#123; id: number; name: string; note: string;&#125;const form = reactive&lt;FORM&gt;(&#123; id: 0, name: &quot;&quot;, note: &quot;&quot;,&#125;);defineExpose&lt;&#123; count: Ref; form: FORM; fn: () =&gt; number;&#125;&gt;(&#123; form, count, fn,&#125;);&lt;/script&gt; è‡ªå®šä¹‰æŒ‡ä»¤ æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ï¼Œåœ¨vue2ä¸­ï¼ŒæŒ‚è½½å…¨å±€æŒ‡ä»¤é€šè¿‡directiveå‡½æ•°ï¼Œç›´æ¥æŒ‚è½½åˆ°Vueå¯¹è±¡ï¼š 12345&lt;script&gt;Vue.directive(&#x27;auth&#x27;, &#123; // ...&#125;)&lt;/script&gt; è€Œåœ¨vue3ä¸­ï¼Œé€šè¿‡createAppåˆ›å»ºå®ä¾‹ï¼Œå› æ­¤é€šè¿‡app.directiveå‡½æ•°è¿›è¡ŒæŒ‚è½½å…¨å±€æŒ‡ä»¤ï¼š 1234567&lt;script&gt;app.directive(&quot;focus&quot;, &#123; mounted(el: HTMLElement) &#123; el?.focus(); &#125;,&#125;);&lt;/script&gt; è€Œåœ¨setupè¯­æ³•ç³–ä¸­å¼•å…¥è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæˆ‘ä»¬éœ€è¦å°†å¼•å…¥çš„æŒ‡ä»¤åç§°å®šä¹‰æˆvä¸ºå‰ç¼€çš„å°é©¼å³°å½¢å¼ï¼Œå¼•å…¥åä¸ç”¨æ³¨å†Œï¼Œç›´æ¥åœ¨æ¨¡æ¿ä¸­é€šè¿‡å°å†™çš„ä¸­åˆ’çº¿è¿æ¥ä½¿ç”¨å³å¯ï¼š 123456&lt;template&gt; &lt;input type=&quot;text&quot; v-input-focus /&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot; setup&gt;import vInputFocus from &quot;@/directive/focus&quot;;&lt;/script&gt; slotså’Œattrs Vueä¸­æ’æ§½slotæ˜¯ä¸€ç§ç‰¹æ®Šçš„å†…ç½®æ ‡ç­¾ï¼Œå®ƒå…è®¸çˆ¶ç»„ä»¶å‘å­ç»„ä»¶å†…éƒ¨æ’å…¥è‡ªå®šä¹‰çš„htmlå†…å®¹ï¼Œä½¿å¾—çˆ¶ç»„ä»¶å¯ä»¥åœ¨ä¸ä¿®æ”¹å­ç»„ä»¶çš„æƒ…å†µä¸‹ï¼Œéå¸¸çµæ´»å‘å­ç»„ä»¶ä¸­åŠ¨æ€çš„æ·»åŠ ä¿®æ”¹å†…å®¹ï¼›åœ¨vue2ä½¿ç”¨this.$slotså¯¹è±¡æ¥è·å–æ’æ§½ï¼Œè€Œåœ¨setupè¯­æ³•ç³–ä¸­ï¼Œæˆ‘ä»¬å°±è¦ç”¨åˆ°useSlotså‡½æ•°ã€‚ useSlotså‡½æ•°å¯èƒ½å¾ˆå¤šå°ä¼™ä¼´æ¯”è¾ƒé™Œç”Ÿï¼Œå¤§éƒ¨åˆ†åœºæ™¯ä¸‹æˆ‘ä»¬ç›´æ¥ä½¿ç”¨&lt;slot /&gt;æ ‡ç­¾å³å¯ï¼›è€Œåœ¨ä¸€äº›ç‰¹æ®Šçš„æ¸²æŸ“åœºæ™¯ä¸‹ï¼Œå°±éœ€è¦useSlotsåœ¨JSXä¸­æ¸²æŸ“æ’æ§½æ•°æ®ï¼›æ¯”å¦‚ä¸€äº›ç»„ä»¶çš„å±æ€§æ”¯æŒJSXä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥æ¸²æŸ“ä¸€äº›æ’æ§½ï¼š 12345678910111213141516// Child.vue&lt;script setup&gt;import &#123; ref, useSlots, &#125; from &quot;vue&quot;;const slots = useSlots();import &#123; NDataTable &#125; from &quot;naive-ui&quot;;const columns = ref([ &#123; title: &quot;Action&quot;, key: &quot;action&quot;, render(row) &#123; return h(&quot;div&quot;, null, slots.title ? slots.title() : slots.default()); &#125;, &#125;,]);&lt;/script&gt; æˆ‘ä»¬é€šè¿‡useSlotsè·å–slotså¯¹è±¡ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªdefaultå±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é»˜è®¤æ’æ§½ï¼›å¦‚æœæˆ‘ä»¬å‘å­ç»„ä»¶ä¸­æ’å…¥å…¶ä»–å‘½åæ’æ§½ï¼Œslotså¯¹è±¡ä¼šæœ‰ç›¸åº”çš„å±æ€§ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä½¿ç”¨titleæ’æ§½ï¼Œ 12345678&lt;template&gt; &lt;Child&gt; &lt;p&gt; i am default slot&lt;/p&gt; &lt;template #title&gt; &lt;p&gt;i am title slot&lt;/p&gt; &lt;/template&gt; &lt;/Child&gt;&lt;/template&gt; æ‰“å°slotså¯¹è±¡æŸ¥çœ‹ï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸¤ä¸ªå±æ€§ï¼š 1234Proxy(Object) &#123; default: (...args) =&gt; &#123;â€¦&#125;, title: (...args) =&gt; &#123;â€¦&#125;&#125; å›åˆ°ä¸Šé¢çš„æ¡ˆä¾‹ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤æ–­slots.titleå±æ€§æ˜¯å¦å­˜åœ¨ï¼Œä¹Ÿå°±æ˜¯æ’æ§½æ˜¯å¦å­˜åœ¨ï¼Œç„¶åé€šè¿‡hå‡½æ•°æ¸²æŸ“slots.title()ã€‚ å¦å¤–ä¸€ä¸ªæœ‰äº›ç±»ä¼¼çš„å±æ€§å°±æ˜¯attrsï¼Œå¯ä»¥ç”¨æ¥æ•è·ä»»ä½•æˆ‘ä»¬æ²¡æœ‰åœ¨ç»„ä»¶ä¸­å£°æ˜çš„å‚æ•°ï¼Œæˆ‘ä»¬åœ¨setupè¯­æ³•ç³–ä¸­ä¹Ÿæ˜¯ä½¿ç”¨useAttrsæ¥è·å–å®ƒï¼š 1234567// Parent.vue&lt;template&gt; &lt;Child title=&quot;ceshi&quot; msg=&quot;msg11&quot;&gt;&lt;/Child&gt;&lt;/template&gt;&lt;script setup&gt;import Child from &#x27;./Child.vue&#x27;&lt;/script&gt; 123456// Child.vue&lt;script setup&gt;import &#123; useAttrs &#125; from &quot;vue&quot;;const attrs = useAttrs();console.log(&quot;attrs&quot;, attrs.title, attrs.msg);&lt;/script&gt; å¦‚æœæˆ‘ä»¬åœ¨Child.vueå°†titleå®šä¹‰åˆ°propsä¸­åï¼Œattrså°±ä¸ä¼šå‡ºç°titleå±æ€§ã€‚ æ€»ç»“ æœ¬æ–‡æ•´ç†æ€»ç»“äº†setupè¯­æ³•ç³–çš„ä¸€äº›ç”¨æ³•ï¼Œä¸»è¦åŒ…æ‹¬å“åº”å¼ã€propsã€emitã€exposeå’Œslotï¼Œç”±äºç¯‡å¹…çš„é™åˆ¶ï¼Œå“åº”å¼ä¸­è¿˜æœ‰å¾ˆå¤šå‡½æ•°ï¼ŒåŒ…æ‹¬isRefã€unrefã€toRawç­‰è¿™é‡Œä¸å†è¯¦ç»†ä»‹ç»ï¼›setupè¯­æ³•ç³–çš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿä½¿å¾—ä»£ç æ›´ç®€æ´ï¼Œå¯è¯»æ€§å¼ºï¼ŒåŒæ—¶å¯ä»¥å°†å¤æ‚çš„é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†é€šè¿‡ç»„åˆå¼å‡½æ•°æ‹†åˆ†ä¸ºå°çš„ã€å¯å¤ç”¨æ¨¡å—ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¨¡å—åŒ–ã€‚å› æ­¤åœ¨vue3ä¸­ï¼ŒæŒæ¡å¹¶åˆç†çš„åˆ©ç”¨setupè¯­æ³•ç³–å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„ç»„ç»‡å’Œç®¡ç†ä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"}]},{"title":"Win10ä¸‹CUDAå’ŒcuDNNå®‰è£…æ•™ç¨‹","date":"2023-09-05T12:00:00.000Z","path":"2023/09/05/Install-Windows-Cuda.html","text":"CUDAæ˜¯ä¸€ç§ç”±NVIDIAå¼€å‘çš„å¹¶è¡Œè®¡ç®—å¹³å°å’ŒAPIæ¨¡å‹ï¼Œå®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨NVIDIAçš„GPUè¿›è¡Œé«˜æ€§èƒ½çš„è®¡ç®—ä»»åŠ¡ã€‚è¦ä½¿ç”¨CUDAï¼Œéœ€è¦å…ˆå®‰è£…æ”¯æŒCUDAçš„NVIDIAæ˜¾å¡å’ŒNVIDIAé©±åŠ¨ç¨‹åºã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»åœ¨Win10ä¸‹ï¼ŒCUDAå’ŒcuDNNå®‰è£…æ•™ç¨‹ã€‚ CUDAï¼ˆCompute Unified Device Architectureï¼Œç»Ÿä¸€è®¡ç®—æ¶æ„ï¼‰æ˜¯ç”±NVIDIAæ¨å‡ºçš„åŸºäºGPUçš„å¹¶è¡Œè®¡ç®—å¹³å°å’Œç¼–ç¨‹æ¨¡å‹ã€‚å®ƒå…è®¸å¼€å‘è€…ä½¿ç”¨NVIDIA GPUè¿›è¡Œé«˜æ€§èƒ½çš„è®¡ç®—ï¼Œä»è€ŒåŠ å¿«äº†æ·±åº¦å­¦ä¹ ç­‰é¢†åŸŸçš„è®¡ç®—é€Ÿåº¦ã€‚ cuDNNï¼ˆCUDA Deep Neural Network libraryï¼‰æ˜¯ä¸€ä¸ªç”±NVIDIAå¼€å‘çš„æ·±åº¦ç¥ç»ç½‘ç»œåº“ï¼Œå®ƒåŸºäºCUDAï¼Œå¯ä»¥ä¸GPUç»“åˆä½¿ç”¨ï¼Œä»¥å®ç°æ·±åº¦å­¦ä¹ åº”ç”¨çš„åŠ é€Ÿã€‚cuDNNå¯ä»¥ç”¨äºæ·±åº¦ç¥ç»ç½‘ç»œçš„è®­ç»ƒå’Œæ¨ç†ï¼Œå¦‚å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ã€å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ç­‰ã€‚ CUDAå’ŒcuDNNçš„ç»“åˆä½¿ç”¨ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨NVIDIA GPUè¿›è¡Œæ·±åº¦å­¦ä¹ åº”ç”¨çš„å¼€å‘ã€‚è¿™ç§ç»“åˆä¸ä»…å¯ä»¥æé«˜è®¡ç®—é€Ÿåº¦ï¼Œè€Œä¸”è¿˜å¯ä»¥é™ä½å†…å­˜å¼€é”€ï¼Œä½¿å¾—æ·±åº¦å­¦ä¹ åº”ç”¨å¯ä»¥åœ¨æ›´å°‘çš„ç¡¬ä»¶èµ„æºä¸‹è¿è¡Œã€‚ åœ¨å®è·µä¸­ï¼ŒCUDAå’ŒcuDNNè¢«å¹¿æ³›åº”ç”¨äºå›¾åƒè¯†åˆ«ã€è¯­éŸ³è¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰äººå·¥æ™ºèƒ½é¢†åŸŸã€‚æ­¤å¤–ï¼Œå®ƒä»¬è¿˜è¢«ç”¨äºç§‘å­¦è®¡ç®—ã€å¤§æ•°æ®åˆ†æã€è™šæ‹Ÿç°å®ç­‰é¢†åŸŸã€‚æœ¬æ–‡åœ¨Windows10ç¯å¢ƒä¸‹è¿›è¡ŒCUDAå’ŒcuDNNçš„å®‰è£…ã€‚ æ˜¾å¡é©±åŠ¨ é¦–å…ˆæŸ¥çœ‹ç”µè„‘æœ‰æ²¡æœ‰å®‰è£…NVIDIAçš„æ˜¾å¡é©±åŠ¨ï¼Œé¼ æ ‡åœ¨æ¡Œé¢ç©ºç™½å¤„å³å‡»NVIDIAæ§åˆ¶é¢æ¿ï¼Œæˆ–è€…åœ¨å³ä¸‹è§’åŒå‡»NVIDIAæ§åˆ¶é¢æ¿çš„ç»¿è‰²å›¾æ ‡ï¼š ä¸¤ç§æ–¹å¼éƒ½èƒ½æ‰“å¼€æ§åˆ¶é¢æ¿ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ˜¾å¡å‹å·ä»¥åŠé©±åŠ¨ç¨‹åºçš„ç‰ˆæœ¬ï¼š å¦‚æœä¸Šè¿°æ–¹å¼éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™éœ€è¦ä¸‹è½½å®‰è£…ï¼Œæ‰“å¼€NVIDIAå®˜æ–¹é©±åŠ¨https://www.nvidia.cn/Download/index.aspx?lang=cnï¼Œé€‰æ‹©å’Œè‡ªå·±æ˜¾å¡é€‚é…çš„é©±åŠ¨ï¼Œä¸‹è½½è¿›è¡Œå®‰è£…ã€‚ å®‰è£…CUDA æ˜¾å¡é©±åŠ¨å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±æ¥å®‰è£…CUDAäº†ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æ˜¾å¡é©±åŠ¨çš„ç‰ˆæœ¬å†³å®šäº†CUDAçš„ç‰ˆæœ¬ï¼Œå¹¶ä¸å¯ä»¥æ— é™å®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è¿˜æ˜¯åœ¨æ§åˆ¶é¢æ¿ä¸­æŸ¥çœ‹ï¼Œæ‰“å¼€å¸®åŠ© =&gt; ç³»ç»Ÿä¿¡æ¯ =&gt; ç»„ä»¶ï¼š å¯ä»¥çœ‹åˆ°æˆ‘ç”µè„‘æœ€é«˜èƒ½å®‰è£…12.2.79çš„ç‰ˆæœ¬ï¼Œç„¶åå°±å¯ä»¥å»ä¸‹è½½æˆ‘ä»¬éœ€è¦çš„CUDAäº†ï¼Œæ‰“å¼€CUDAä¸‹è½½é¡µé¢ï¼š é»˜è®¤æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦ä½ç‰ˆæœ¬ï¼Œå¯ä»¥ç‚¹å‡»é¡µé¢ä¸‹æ–¹çš„Previouse Releaseï¼Œæ‰“å¼€https://developer.nvidia.com/cuda-toolkit-archiveï¼Œæ‰¾åˆ°æˆ‘ä»¬å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ï¼š å®ŒæˆååŒå‡»æˆ‘ä»¬ä¸‹è½½çš„cuda_12.0.0_527.41_windows.exeå®‰è£…åŒ…ï¼Œå‡ºç°å®‰è£…ç•Œé¢ï¼Œé»˜è®¤å®‰è£…å³å¯ï¼›è¿™é‡Œéœ€è¦è®°ä½å®‰è£…ç›®å½•ï¼Œåé¢é…ç½®ç¯å¢ƒå˜é‡æ—¶éœ€è¦ï¼š å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°é—ªå±ç°è±¡ï¼Œå±äºæ­£å¸¸ã€‚ å®‰è£…æˆåŠŸåæˆ‘ä»¬è¿è¡Œnvcc -Vå°±èƒ½çœ‹åˆ°CUDAçš„ç‰ˆæœ¬å·ã€‚ å®‰è£…cuDNN æ‰“å¼€cuDNNä¸‹è½½é¡µé¢ï¼Œè¿™é‡Œéœ€è¦æ³¨å†Œä¸€ä¸ªNVIDIAçš„è´¦å·ï¼Œå¡«å†™é‚®ç®±å¾ˆæ–¹ä¾¿ï¼š æˆ‘ä»¬ä¹Ÿé€‰æ‹©é€‚åˆè‡ªå·±ç‰ˆæœ¬çš„è¿›è¡Œä¸‹è½½ï¼Œè§£å‹åæˆ‘ä»¬å¾—åˆ°ä»¥ä¸‹çš„ç›®å½•ç»“æ„ï¼š æˆ‘ä»¬å°†æ–‡ä»¶å¤¹è¦†ç›–åˆ°ä¸Šé¢çš„CUDAå®‰è£…ç›®å½•ä¸‹ï¼Œæ¯”å¦‚æˆ‘çš„CUDAçš„å®‰è£…ç›®å½•æ˜¯C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v12.0ï¼Œå°†å‹ç¼©åŒ…å†…å¯¹åº”çš„æ–‡ä»¶å¤¹å¤åˆ¶åˆ°binã€includeã€libç›®å½•ä¸‹å³å¯ ç„¶åæ·»åŠ ç¯å¢ƒå˜é‡ï¼Œé¼ æ ‡å³é”®æ­¤ç”µè„‘ =&gt; å±æ€§ =&gt; é«˜çº§ç³»ç»Ÿè®¾ç½® =&gt; ç¯å¢ƒå˜é‡ï¼Œå°†CUDAçš„å®‰è£…ç›®å½•æ·»åŠ åˆ°CUDA_PATHå˜é‡ä¸­ ç„¶ååœ¨PATHä¸­æ·»åŠ ä»¥ä¸‹è·¯å¾„ï¼š 1234C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v12.0\\binC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v12.0\\libnvvpC:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v12.0C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v12.0\\lib\\x64 å‘½ä»¤è¡Œè¾“å…¥nvidia-smiï¼Œèƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºå„ç§ä¿¡æ¯å°±å®‰è£…å®Œæˆäº†ã€‚","tags":[{"name":"å®‰è£…æ•™ç¨‹","slug":"Installation","permalink":"https://xieyufei.com/tags/Installation/"}]},{"title":"å¤§é‡é‡å¤å†™æ ·å¼æ€ä¹ˆåŠï¼Ÿå½“ç„¶æ˜¯ç”¨TailwindCSSå’¯ï¼","date":"2023-08-20T10:12:00.000Z","path":"2023/08/20/Tailwindcss.html","text":"Tailwind CSSä½œä¸ºä¸€æ¬¾åŸå­åŒ–çš„CSSæ¡†æ¶ï¼Œæä¾›äº†ä¸€ç»„é«˜åº¦å¯å®šåˆ¶åŒ–çš„CSSç¨‹åºå’Œç»„ä»¶ï¼›å¸®åŠ©å‰ç«¯å¼€å‘äººå‘˜å¿«æ·ã€æ–¹ä¾¿åœ°æ„å»ºç¾è§‚çš„ç”¨æˆ·ç•Œé¢ï¼›ç›¸æ¯”äºä¼ ç»Ÿçš„CSSæ¡†æ¶ï¼ŒTailwind CSSæ›´æ³¨é‡ç®€æ´æ€§å’Œçµæ´»æ€§ï¼Œå¯ä»¥å’Œç°æœ‰çš„å‰ç«¯æ¡†æ¶å¦‚Reactã€Vueã€Angularç­‰æ— ç¼é›†æˆï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†ä¼ ç»ŸCSSå¼€å‘ä¸­éœ€è¦ç¼–å†™å¤§é‡é‡å¤çš„æ ·å¼ä»£ç ã€‚ CSSæ¡†æ¶å‘å±•åˆ°ç°åœ¨ï¼Œä¸»è¦ç»å†äº†å››ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯ä»¥CSS2.0å’ŒCSS3.0ä¸ºä¸»çš„ï¼ŒåŸç”ŸCSSé˜¶æ®µï¼Œéœ€è¦ç”¨åˆ°ä»€ä¹ˆæ ·å¼å°±å†™ä»€ä¹ˆæ ·å¼ï¼Œä¹Ÿä¼šæœ‰ä¸€äº›ç®€å•çš„å¤ç”¨ï¼›ç¬¬äºŒä¸ªé˜¶æ®µæ˜¯å°†CSSç»„ä»¶åŒ–ï¼Œå°†å…·æœ‰ç›¸åŒè§†è§‰æ•ˆæœçš„å…ƒç´ å°è£…æˆåŒä¸€ä¸ªç»„ä»¶ç±»ï¼Œæ¯”å¦‚07å¹´Twitteræ¨å‡ºçš„Bootstrapæ¡†æ¶ï¼Œåé¢ä»¥åŠReactå’ŒVueç­‰æ¡†æ¶æ¶Œç°å‡ºæ¥çš„Element UIã€Antdç­‰å„ç§å„æ ·çš„ç»„ä»¶åº“ï¼Œéƒ½å¯¹è‡ªèº«çš„ç»„ä»¶è¿›è¡Œäº†å°è£…ï¼Œæä¾›ç›¸å½“ä¸°å¯Œçš„é¢„è®¾ç»„ä»¶ã€‚ ç¬¬ä¸‰ä¸ªé˜¶æ®µæ˜¯å‡ºç°ä»¥Sassã€Lesså’ŒStylusä¸ºä»£è¡¨çš„çš„CSSé¢„å¤„ç†å™¨ï¼Œå¼¥è¡¥äº†å¸¸è§„CSSè¯­æ³•ä¸å¤Ÿå¼ºå¤§ï¼Œæ²¡æœ‰å˜é‡å’Œæ ·å¼å¤ç”¨çš„æœºåˆ¶ï¼›ä½¿å¾—æˆ‘ä»¬åœ¨å¼€å‘æ ·å¼æ—¶å¯ä»¥ä½¿ç”¨æ ·å¼åµŒå¥—ã€å¾ªç¯ã€å˜é‡ã€æ¡ä»¶æ§åˆ¶ç­‰æ›´é«˜çº§çš„è¯­æ³•ï¼Œæ›´åŠ çµæ´»æ–¹ä¾¿çš„å¼€å‘æ ·å¼ã€‚ ä½†æ˜¯ä¸°å¯Œçš„ç»„ä»¶åº“åœ¨é¢å¯¹é«˜åº¦å®šåˆ¶åŒ–çš„UIè®¾è®¡ç•Œé¢æ—¶ï¼Œæœ‰æ—¶å€™ä¹Ÿæ— å¯é¿å…çš„éœ€è¦è‡ªå·±å†™ä¸€äº›æ ·å¼ï¼Œä¸åŒç»„ä»¶ä¸­ä¹Ÿä¼šæœ‰é‡å¤å°è£…çš„æ ·å¼ï¼›åŒæ—¶é«˜åº¦å°è£…çš„ç»„ä»¶ï¼Œè¿˜éœ€è¦ä¸€å®šçš„å­¦ä¹ æˆæœ¬ï¼ŒçŸ¥é“ç»„ä»¶æ ·å¼å¦‚ä½•æ¥æ§åˆ¶ï¼›å› æ­¤ç¬¬å››ä¸ªé˜¶æ®µä»¥Tailwind CSSä¸ºä¸»çš„CSSåŸå­åŒ–ï¼Œç›´æ¥å°†CSSæ ·å¼æ‰“æ•£ï¼Œå°±åƒä¸€ä¸ªä¸ªåŸå­ä¸€æ ·ï¼Œå°†æ¯ä¸ªCSSçš„æ ·å¼åº”ç”¨åˆ°å¯¹åº”çš„ç±»åã€‚ æ¯”å¦‚æˆ‘ä»¬æœ€å¸¸ç”¨çš„flexå¸ƒå±€ï¼Œå¦‚æœå°è£…åˆ°ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨å¾ˆå¤šç»„ä»¶ä¸­ä¸æ–­é‡å¤çš„å†™flexæ ·å¼ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯¹ä¸‹é¢æ¯ä¸ªå±‚çº§çš„flexå¸ƒå±€éƒ½éœ€è¦æ¥å†™å¯¹åº”çš„æ ·å¼ï¼š 123456789101112131415161718192021&lt;template&gt;&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt; ... &lt;/div&gt; &lt;div class=&quot;right&quot;&gt; ... &lt;/div&gt;&lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.container &#123; display: flex; justify-content: space-around; .left &#123; display: flex; justify-content: space-between; &#125; .right &#123; display: flex; flex-wrap: wrap; align-items: center; &#125;&#125;&lt;/style&gt; ä½†æ˜¯ï¼Œå¦‚æœä½¿ç”¨äº†Tailwind CSSï¼Œä½ åªéœ€è¦å†™ä¸‹é¢å‡ è¡Œä»£ç å³å¯ï¼š 123456&lt;template&gt; &lt;div class=&quot;flex justify-around&quot;&gt; &lt;div class=&quot;flex justify-between&quot;&gt;&lt;/div&gt; &lt;div class=&quot;flex flex-wrap items-center&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt; æ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯æ¯”ä¸Šé¢çš„ä»£ç ç®€æ´å¤šäº†ï¼›æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šé—®ï¼Œè¿™äº›CSSç±»åéƒ½æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿˜æ˜¯æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬å•Šï¼›åˆ«ç€æ€¥ï¼ŒTailwind CSSçš„è¯­ä¹‰åŒ–CSSï¼Œå†ç»“åˆVS Codeå¼ºå¤§çš„æ’ä»¶åŠŸèƒ½ï¼Œå¯ä»¥è®©æˆ‘ä»¬å¾ˆè½»æ¾çš„è®°ä½è¿™äº›ç±»åï¼›å› æ­¤ï¼Œç¬”è€…åœ¨åšä¸€äº›ç®¡ç†åå°ç±»çš„é¡¹ç›®æ—¶ï¼Œç”±äºå¯¹é¡µé¢æ ·å¼è¦æ±‚ä¸é«˜ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­å¤§å¤šæ•°é¡µé¢éƒ½ä¸ç”¨å†™æ ·å¼ï¼Œç›´æ¥ç”¨ç±»åå³å¯ï¼Œæå¤§çš„æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹Tailwind CSSè¿˜æœ‰å“ªäº›å¼ºå¤§çš„åŠŸèƒ½å§ã€‚ å®‰è£…é›†æˆ é¦–å…ˆæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å®‰è£…Tailwind CSSï¼Œå°†å…¶ä½œä¸ºPostCSSçš„ä¸€ä¸ªæ’ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å’Œwebpackã€rollupã€viteä»¥åŠparcelç­‰æ‰“åŒ…å·¥å…·é›†æˆäº†ï¼›å› æ­¤é€šè¿‡npmå®‰è£…ç›¸å…³çš„ä¾èµ–ï¼š 12npm install -D tailwindcss postcss autoprefixernpx tailwindcss init tailwindcss initåœ¨é¡¹ç›®ä¸­è‡ªåŠ¨åˆ›å»ºäº†ä¸€ä¸ªé…ç½®æ–‡ä»¶tailwind.config.jsï¼Œä¸€äº›ä¸»é¢˜ã€æ’ä»¶ç­‰å°±å¯ä»¥åœ¨è¿™é‡Œé…ç½®ï¼Œæˆ‘ä»¬å°†é¡¹ç›®ä¸­çš„æ¨¡æ¿æ–‡ä»¶è·¯å¾„æ·»åŠ è¿›æ¥ï¼š 1234567891011/** @type &#123;import(&#x27;tailwindcss&#x27;).Config&#125; */module.exports = &#123; content: [ // è¿™é‡Œæ‰‹åŠ¨æ·»åŠ é¡¹ç›®ä¸­éœ€è¦çš„æ¨¡æ¿æ–‡ä»¶ &quot;./index.html&quot;, &quot;./src/**/*.&#123;vue,ts,tsx&#125;&quot; ], theme: &#123; extend: &#123;&#125;, &#125;, plugins: [],&#125;; åˆ«å¿˜è®°æŠŠtailwindcssé…ç½®åˆ°postcss.config.jsä¸­ï¼š 123456module.exports = &#123; plugins: &#123; tailwindcss: &#123;&#125;, autoprefixer: &#123;&#125;, &#125;,&#125;; åˆ›å»ºä¸€ä¸ª/src/tailwind.cssæ–‡ä»¶ï¼Œé€šè¿‡@tailwindæŒ‡ä»¤æ¥æ·»åŠ æ¯ä¸€ä¸ªç”¨åˆ°çš„åŠŸèƒ½æ¨¡å—ï¼š 1234/*! @import */@tailwind base;@tailwind components;@tailwind utilities; æœ€ååœ¨æˆ‘ä»¬çš„é¡¹ç›®å…¥å£æ–‡ä»¶ä¸­å¼•å…¥tailwind.css: 12// main.jsimport &#x27;./styles/tailwind.css&#x27;; è¿™æ ·æˆ‘ä»¬å°±èƒ½å¯åŠ¨æŸ¥çœ‹é¡¹ç›®äº†ï¼›é¡¹ç›®å¯åŠ¨åï¼Œæˆ‘ä»¬åœ¨å†™classç±»åæ—¶ï¼Œè‚¯å®šè®°ä¸ä½é‚£ä¹ˆå¤šç¹æ‚çš„ç±»åï¼Œå°±éœ€è¦ç”¨åˆ°ç¼–è¾‘å™¨æ’ä»¶äº†ï¼›æ‰“å¼€VS Codeçš„æ‰©å±•é¢æ¿ï¼Œæœç´¢Tailwind CSS IntelliSenseï¼š è¿™é‡Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šæ‰©å±•ï¼Œé€‰æ‹©ç¬¬ä¸€ä¸ªå®˜æ–¹æ‰©å±•è¿›è¡Œå®‰è£…ï¼Œå°±å¯ä»¥å¢å¼ºTailwindçš„å¼€å‘ä½“éªŒï¼›æˆ‘ä»¬åœ¨å†™ç±»åæ—¶ï¼Œæ¨¡ç³Šå†™ä¸€ä¸ªflexï¼Œå°±ä¼šå¸¦å‡ºflexç›¸å…³çš„ç±»åï¼Œå¹¶ä¸”æ¯ä¸ªæ—è¾¹éƒ½ä¼šæœ‰å¯¹åº”çš„ç±»åçš„è¯¦ç»†å±æ€§ï¼›ç”šè‡³é¼ æ ‡æ”¾åœ¨ç°æœ‰ç±»åä¸Šä¹Ÿä¼šå‘ˆç°å…·ä½“æ ·å¼ç»†èŠ‚ï¼Œè¿™æ ·å°±ä¸ç”¨æ‹…å¿ƒç”¨é”™ç±»åäº†ã€‚ ç‰¹æ€§ æˆ‘ä»¬æ¥çœ‹ä¸‹Tailwind CSSæœ‰å“ªäº›ç‰¹æ€§ã€‚ å®ç”¨ä¸»ä¹‰ Tailwind CSSè®¾è®¡æ€è·¯æ˜¯ä¼˜å…ˆè€ƒè™‘å¦‚ä½•æ¥æ»¡è¶³å®é™…éœ€æ±‚ï¼ˆUtility-First Fundamentalsï¼‰ï¼Œå› æ­¤æä¾›äº†å¤§é‡ä½¿ç”¨çš„CSSç±»åï¼Œå¯ä»¥æ¬¾é€Ÿæ„å»ºå¸¸è§çš„ç•Œé¢å…ƒç´ ï¼Œæˆ‘ä»¬ä»¥å®˜ç½‘çš„ä¸€ä¸ªæ¡ˆä¾‹æ¥ç†è§£å®ƒçš„å®ç”¨ä¸»ä¹‰ä¼˜å…ˆçš„åŸåˆ™ï¼š 1234567891011&lt;div class=&quot;p-6 max-w-sm mx-auto bg-white rounded-xl shadow-lg flex items-center space-x-4&quot;&gt; &lt;div class=&quot;shrink-0&quot;&gt; &lt;img class=&quot;h-12 w-12&quot; src=&quot;/img/logo.svg&quot; alt=&quot;ChitChat Logo&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;div class=&quot;text-xl font-medium text-black&quot;&gt;ChitChat&lt;/div&gt; &lt;p class=&quot;text-slate-500&quot;&gt;You have a new message!&lt;/p&gt; &lt;/div&gt;&lt;/div&gt; æˆ‘ä»¬çœ‹ä¸‹å‘ˆç°çš„æ•ˆæœï¼Œä¹Ÿæ¯”è¾ƒç®€å•ã€‚ åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸‹é¢å‡ ç§æ ·å¼ï¼š å®½é«˜ï¼šæœ€å¤–å±‚çš„å…ƒç´ ä½¿ç”¨max-w-smé™åˆ¶æœ€å¤§å®½åº¦ï¼Œå›¾ç‰‡ä½¿ç”¨w-12å’Œh12æ¥é™åˆ¶å›¾ç‰‡å…·ä½“çš„å®½åº¦é«˜åº¦ã€‚ è¾¹è·ï¼šmx-autoæ¥è®¾ç½®marginå®ç°å·¦å³å±…ä¸­ï¼Œp-6æ§åˆ¶å†…è¾¹è·paddingã€‚ flexå¸ƒå±€ï¼šflexå¼€å¯flexå¸ƒå±€ã€items-centerè®¾ç½®items-centerå®ç°ä¸Šä¸‹å±…ä¸­ï¼Œshrink-0ä¸æ”¶ç¼©ã€‚ èƒŒæ™¯æ ·å¼ï¼šbg-whiteèƒŒæ™¯ç™½è‰²ï¼Œrounded-xlåœ†è§’ï¼Œshadow-lgé˜´å½±ã€‚ æ–‡å­—æ ·å¼ï¼štext-xlå­—ä½“å¤§å°ï¼Œfont-mediumå­—ä½“åŠ ç²—ï¼Œtext-blackå’Œtext-slate-500å­—ä½“é¢œè‰²ã€‚ è¿™é‡Œmarginå’Œpaddingæ¯”è¾ƒç‰¹æ®Šï¼Œæœ‰å¤šç§æ–¹å¼æ¥è®¾ç½®ï¼›æˆ‘ä»¬çŸ¥é“margin: 24pxæ˜¯è®¾ç½®ä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„è¾¹è·ï¼Œåœ¨Tailwind CSSå°±å¯ä»¥ç®€å†™æˆm-6ï¼›å¦‚æœæ˜¯margin: 24px 12pxï¼ŒTailwind CSSå°±å¯ä»¥è®¾ç½®æˆXè½´æ–¹å‘å’ŒYè½´æ–¹å‘ï¼Œå¯¹åº”çš„ç±»åå°±æ˜¯ï¼šmx-3 my-6ï¼Œå› æ­¤ä¸Šé¢çš„mx-autoå°±éå¸¸å¥½ç†è§£äº†ï¼›è€Œä¸Šä¸‹å·¦å³å¯¹åº”å››ä¸ªå­—æ¯tã€bã€lã€rï¼ŒåŠ ä¸Šmarginï¼ˆmï¼‰å’Œpaddingï¼ˆpï¼‰ï¼Œå°±å¯ä»¥åˆ†åˆ«å¯¹åº”ä¸åŒæ–¹å‘çš„è®¾ç½®äº†ï¼Œæ¯”å¦‚pb-4ã€‚ æ›´å¤šçš„æ ·å¼ç¼©å†™ï¼Œå¦‚æœå°ä¼™ä¼´ä¸çŸ¥é“æ€ä¹ˆå†™çš„è¯ï¼Œå¯ä»¥æŸ¥çœ‹å®˜ç½‘çš„æ–‡æ¡£ï¼ŒæŸ¥ä¸€ä¸¤æ¬¡è¯­æ³•åŸºæœ¬å°±èƒ½è®°ä½äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒè¯­ä¹‰åŒ–çš„ã€‚ æˆ‘ä»¬å‘ç°è¿™æ ·çš„å†™æ³•ï¼Œä¼šè®©é¡µé¢æ˜¾å¾—æ¯”è¾ƒè‡ƒè‚¿ï¼Œå–œæ¬¢è¿™ç§å†™æ³•çš„äººä¼šéå¸¸å–œæ¬¢ï¼Œä¸å–œæ¬¢å®ƒçš„äººä¼šè§‰å¾—é¡µé¢å¾ˆæ··ä¹±ï¼Œéš¾ä»¥æ¥å—ï¼›ä½†æ˜¯ç¬”è€…ç”¨ä¸‹æ¥å‘ç°ç¡®å®æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š ä¸ç”¨è´¹æ—¶è´¹åŠ›çš„å»æƒ³å„ç§ç±»åï¼Œå°¤å…¶æ˜¯å¯¹äºè‹±æ–‡ä¸å¥½çš„å°ä¼™ä¼´ï¼Œæ€è€ƒç±»åä¹Ÿä¼šå ç”¨æˆ‘ä»¬å°ä¸€éƒ¨åˆ†çš„æ—¶é—´å’Œç²¾åŠ›ã€‚ æ ·å¼æ–‡ä»¶å ç”¨é¡¹ç›®ç©ºé—´æ€¥å‰§ä¸‹é™ï¼Œå¾ˆå¤šé¡µé¢å†™å°‘é‡ç”šè‡³ä¸ç”¨å†™æ ·å¼ï¼Œç®€ç›´ä¸è¦å¤ªçˆ½äº†ã€‚ ä¸ç”¨æ‹…å¿ƒæ ·å¼è¦†ç›–é—®é¢˜ï¼Œæœ‰äº›æ ·å¼æ–‡ä»¶å¯èƒ½ä¼šè¢«ä¸åŒçš„é¡µé¢å¼•ç”¨ï¼Œæ”¹åŠ¨çš„æ—¶å€™éå¸¸å°å¿ƒç¿¼ç¿¼ï¼›ç°åœ¨æ ·å¼éƒ½åœ¨é¡µé¢ä¸Šï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒè¦†ç›–äº†ã€‚ æ‚¬åœèšç„¦ ç›¸è¾ƒäºå¸¸è§„çš„ç±»åï¼Œæˆ‘ä»¬é¡µé¢ä¸Šæ›´å¤šçš„æ˜¯é¼ æ ‡æ‚¬æµ®ã€èšç„¦ç­‰çŠ¶æ€ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ä¼ªå…ƒç´ å’Œä¼ªç±»ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä»–ä»¬æ˜¯å¦‚ä½•é€šè¿‡ç±»åçš„æ–¹å¼æ¥å®ç°çš„ã€‚ çŠ¶æ€æ›´æ”¹ä¿®é¥°ç¬¦ æˆ‘ä»¬å¯ä»¥ç»™æŒ‰é’®å…ƒç´ è®¾ç½®æ‚¬æµ®ã€èšç„¦çŠ¶æ€çš„æ”¹å˜ï¼Œåœ¨CSSä¸­æ˜¯é€šè¿‡:hoverï¼Œ:focusç­‰å®ç°çš„ï¼ŒTailwind CSSæ·»åŠ hover:å‰ç¼€æ¥å®ç°ï¼Œæ¯”å¦‚ä¸‹é¢ 1234&lt;button class=&quot;bg-sky-500 hover:bg-sky-700 ..&quot;&gt; ç‚¹æˆ‘&lt;/button&gt; è¿™æ ·é¼ æ ‡æ‚¬æµ®åï¼ŒèƒŒæ™¯é¢œè‰²å°±ä¼šåŠ æ·±ï¼›è¿˜å¯ä»¥ä½¿ç”¨active:æ¿€æ´»å’Œfocus:èšç„¦ï¼š 12345&lt;button class=&quot;bg-violet-500 hover:bg-violet-600 active:bg-violet-700 focus:bg-violet-800&quot;&gt; ç‚¹æˆ‘&lt;/button&gt; å¯¹äºaé“¾æ¥ï¼Œvisited:ä¿®é¥°ç¬¦è¡¨ç¤ºé“¾æ¥å·²ç»è®¿é—®è¿‡ã€‚ 1234&lt;a href=&quot;https://xieyufei.com&quot; class=&quot;text-red-500 visited:text-red-500&quot;&gt;&lt;/a&gt; è¿˜æœ‰ä¸€äº›first-of-type:ã€last-of-type:ã€empty:ã€disabled:ã€checked:ä¿®é¥°ç¬¦ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ å…ƒç´ ä¿®é¥°ç¬¦ å¯¹äºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½¿ç”¨first:å’Œlast:æ¥é€‰æ‹©å…ƒç´ ï¼š 1234567&lt;li class=&quot;bg-blue-200 first:mt-10 last:bg-blue-300&quot; v-for=&quot;item in 10&quot; :key=&quot;item&quot;&gt; &#123;&#123; item &#125;&#125;&lt;/li&gt; å¯¹äºå¥‡å¶å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨odd:å’Œeven:ä¿®é¥°ç¬¦æ¥é€‰æ‹©å…ƒç´ ï¼š 1234567&lt;li class=&quot;bg-blue-200 odd:bg-blue-300 even:text-yellow-600&quot; v-for=&quot;item in 10&quot; :key=&quot;item&quot;&gt; &#123;&#123; item &#125;&#125;&lt;/li&gt; å¯¹äºä¸€äº›ç‰¹æ®Šçš„å­å…ƒç´ ï¼Œæ¯”å¦‚é€‰æ‹©ç¬¬å‡ ä¸ªå…ƒç´ :nth-childï¼Œæˆ‘ä»¬é€šè¿‡[&amp;:nth-child(n)]å‰ç¼€ï¼š 1234567&lt;li class=&quot;bg-blue-200 [&amp;:nth-child(3)]:bg-blue-500&quot; v-for=&quot;item in 10&quot; :key=&quot;item&quot;&gt; &#123;&#123; item &#125;&#125;&lt;/li&gt; çˆ¶çº§ä¿®é¥°ç¬¦ è¿˜æœ‰ä¸€äº›å­å…ƒç´ çš„æ ·å¼ä¾èµ–äºçˆ¶çº§å…ƒç´ ï¼Œæˆ‘ä»¬é€šè¿‡ç»™çˆ¶çº§å…ƒç´ æ ‡è®°groupç±»åï¼Œå¹¶ä¸”ä½¿ç”¨group-*çš„ä¿®é¥°ç¬¦æ¥æ ‡è®°ç›®æ ‡å…ƒç´ ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 123456789101112&lt;div class=&quot;group hover:bg-blue-300&quot;&gt; &lt;div class=&quot;text-black group-hover:text-white group-active:text-red-500&quot; &gt; ChitChat &lt;/div&gt; &lt;p class=&quot;text-slate-500 group-hover:text-white&quot;&gt; You have a new message! &lt;/p&gt;&lt;/div&gt; é™¤äº†group-hoverï¼Œè¿˜æ”¯æŒgroup-activeã€group-focusæˆ–è€…group-oddç­‰ä¿®é¥°ç¬¦ï¼›å¦‚æœæœ‰å¤šä¸ªç»„åµŒå¥—çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨group/&#123;name&#125;æ¥æ ‡è®°è¯¥çˆ¶çº§å…ƒç´ ï¼Œå…¶ä¸­çš„å­å…ƒç´ ä½¿ç”¨group-hover/&#123;name&#125;ä¿®é¥°ç¬¦æ¥è®¾ç½®æ ·å¼ï¼š 12345678910&lt;li class=&quot;group/item&quot; v-for=&quot;item in 10&quot; :key=&quot;item&quot;&gt; &#123;&#123; item &#125;&#125; &lt;div class=&quot;invisible group-hover/item:visible text-red-400 group/opt&quot;&gt; &lt;div class=&quot;group-hover/opt:text-red-700&quot;&gt;hover me&lt;/div&gt; &lt;/div&gt;&lt;/li&gt; æ¯”å¦‚ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œæœ€å¤–å±‚çš„å…ƒç´ ä½¿ç”¨äº†group/itemï¼Œè€Œä¸‹é¢çš„æŒ‰é’®ä½¿ç”¨äº†group/optå•ç‹¬å˜æˆä¸€ä¸ªç»„ï¼Œç”¨æ¥æ§åˆ¶è¯¥ç»„ä¸‹é¢çš„å…ƒç´ æ ·å¼ã€‚ åŒçº§ä¿®é¥°ç¬¦ å½“æˆ‘ä»¬éœ€è¦æ ¹æ®åŒçº§å…ƒç´ çš„çŠ¶æ€å¯¹ç›®æ ‡å…ƒç´ è¿›è¡Œæ ·å¼è®¾ç½®æ—¶ï¼Œä½¿ç”¨peeræ ‡è®°åŒçº§çš„å…ƒç´ ï¼Œä½¿ç”¨peer-*ä¿®é¥°ç¬¦å¯¹ç›®æ ‡å…ƒç´ è¿›è¡Œæ ·å¼è®¾è®¡ï¼Œæ¯”å¦‚ä¸‹é¢çš„æ¡ˆä¾‹ï¼š 1234567&lt;div&gt; &lt;span&gt;Email&lt;/span&gt; &lt;input type=&quot;email&quot; class=&quot;peer ...&quot; /&gt; &lt;p class=&quot;mt-2 invisible peer-invalid:visible text-pink-600&quot;&gt; è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€ &lt;/p&gt;&lt;/div&gt; æˆ‘ä»¬ç»™åŒçº§çš„è¾“å…¥æ¡†æ ‡è®°ä¸ºpeerï¼Œè€Œpæ ‡ç­¾å°±æ˜¯æˆ‘ä»¬éœ€è¦è®¾è®¡æ ·å¼çš„ç›®æ ‡å…ƒç´ ï¼Œä½¿ç”¨peer-invalid:visibleè®©pæ ‡ç­¾å½“è¾“å…¥æ¡†è¾“å…¥å†…å®¹æ— æ•ˆæ—¶è¿›è¡Œå†…å®¹çš„æ˜¾ç¤ºï¼Œæ•ˆæœå¦‚ä¸‹ï¼š å’Œgroupçš„ä½¿ç”¨ä¸€æ ·ï¼Œpeerä¹Ÿå¯ä»¥ä½¿ç”¨peer/&#123;name&#125;æ¥æ ‡è®°æŸä¸ªå…·ä½“çš„å…ƒç´ ï¼Œç„¶åä½¿ç”¨peer-*/&#123;name&#125;æ¥è®¾è®¡ç›®æ ‡å…ƒç´ çš„æ ·å¼ã€‚ todo ä¼ªå…ƒç´ ä¿®é¥°ç¬¦ å¯¹äº::afterå’Œ::beforeç­‰ä¼ªå…ƒç´ ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨before:å’Œafter:ä¿®é¥°ç¬¦ï¼š 12345&lt;span class=&quot;after:content-[&#x27;*&#x27;] after:ml-0.5 after:text-red-500 block text-sm font-medium text-slate-700&quot;&gt; Email&lt;/span&gt; å½“ä½¿ç”¨before:å’Œafter:ä¿®é¥°ç¬¦è¿™ç±»ä¿®é¥°ç¬¦æ—¶ï¼ŒTailwind CSSä¼šé»˜è®¤æ·»åŠ content: &#39;&#39;æ ·å¼ï¼Œé™¤éæˆ‘ä»¬éœ€è¦åœ¨contentä¸­æ·»åŠ å…¶ä»–å†…å®¹ï¼Œå¦åˆ™ä¸éœ€è¦é¢å¤–çš„å£°æ˜ã€‚ å¯¹äºè¾“å…¥æ¡†inputçš„placeholderï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨placeholder:ä¿®é¥°ç¬¦å¾ˆæ–¹ä¾¿çš„æ›´æ”¹å ä½ç¬¦æ ·å¼ï¼š 123&lt;input class=&quot;placeholder:italic placeholder:text-slate-400 ...&quot;/&gt; å¤œé—´æ¨¡å¼ æˆ‘ä»¬åœ¨æµè§ˆæœ‰äº›ç½‘ç«™æˆ–è€…Appæ—¶éƒ½ä¼šçœ‹åˆ°æœ‰å¤œé—´æ¨¡å¼çš„åŠŸèƒ½ï¼Œå¯ç”¨å¤œé—´æ¨¡å¼å¯ä»¥è®©ç½‘ç«™å±•ç¤ºä¸åŒçš„é£æ ¼æ ·å¼ï¼ŒTailwind CSSå¯ä»¥é€šè¿‡ç±»åå¾ˆå®¹æ˜“çš„æ§åˆ¶ï¼›è¦å¼€å¯å¤œé—´æ¨¡å¼ï¼Œæˆ‘ä»¬å…ˆåœ¨tailwind.config.jsé…ç½®darkModeï¼š 12345// tailwind.config.jsmodule.exports = &#123; darkMode: &quot;class&quot;, // ...&#125; è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å…¨å±€æ ¹èŠ‚ç‚¹ä¸Šæ§åˆ¶ç±»åæ¥æ§åˆ¶æ•´ä½“çš„é¡µé¢é£æ ¼æ˜¯å¦å‘ˆç°å¤œé—´æ¨¡å¼äº†ï¼Œæ¯”å¦‚åœ¨htmlèŠ‚ç‚¹æˆ–è€…App.vueä¸Šæ·»åŠ /ç§»é™¤darkç±»åï¼›ä¸‹é¢å°±æ¥å¯¹é¡µé¢è¿›è¡Œæ”¹é€ ï¼Œå¯¹äºå¤œé—´æ¨¡å¼ä¸‹çš„èƒŒæ™¯é¢œè‰²æˆ–è€…æ–‡å­—é¢œè‰²ï¼Œä½¿ç”¨dark:ä¿®é¥°ç¬¦ï¼Œ 1234567891011121314&lt;div id=&quot;app&quot; :class=&quot;isDark ? &#x27;dark&#x27; : &#x27;&#x27;&quot;&gt; &lt;div class=&quot;bg-white dark:bg-black&quot; &gt; &lt;h3 class=&quot;text-slate-900 dark:text-white&quot; &gt; è°¢å°é£çš„åšå®¢åœ°å€ï¼š &lt;/h3&gt; &lt;p class=&quot;text-slate-500 dark:text-slate-400&quot;&gt; https://xieyufei.com &lt;/p&gt; &lt;/div&gt;&lt;/div&gt; åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†bg-whiteåœ¨é»˜è®¤æ¨¡å¼ä¸‹çš„èƒŒæ™¯é¢œè‰²ä¸ºç™½è‰²ï¼Œä»¥åŠdark:bg-blackå¤œé—´æ¨¡å¼ä¸‹èƒŒæ™¯é¢œè‰²ä¸ºé»‘è‰²ï¼Œé€šè¿‡isDarkå˜é‡æ¥å®ç°æ§åˆ¶æ ¹èŠ‚ç‚¹å¼€å¯/å…³é—­å¤œé—´æ¨¡å¼ï¼›æ•ˆæœå¦‚ä¸‹ï¼š è‡ªå®šä¹‰æ ·å¼ å¯¹äºä¸€äº›å…¨å±€çš„æ ·å¼ï¼Œæ¯”å¦‚é¢œè‰²æ¨¡å¼ã€è‡ªé€‚åº”ç¼©æ”¾æ¨¡å¼ã€é—´è·ç­‰ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ åˆ°tailwind.config.jsé…ç½®æ–‡ä»¶ä¸­ï¼š 1234567891011121314151617181920212223module.exports = &#123; theme: &#123; screens: &#123; sm: &#x27;480px&#x27;, md: &#x27;768px&#x27;, lg: &#x27;976px&#x27;, xl: &#x27;1440px&#x27;, &#125;, colors: &#123; red: &#x27;#ff0000&#x27;, &quot;main-color&quot;: &quot;#ff7849&quot;, &#125;, extend: &#123; spacing: &#123; &#x27;128&#x27;: &#x27;32rem&#x27;, &#x27;144&#x27;: &#x27;36rem&#x27;, &#125;, borderRadius: &#123; &#x27;4xl&#x27;: &#x27;2rem&#x27;, &#125; &#125; &#125;&#125; æ¯”å¦‚è§‰å¾—å…¨å±€çš„redçº¢è‰²ï¼Œçº¢çš„ä¸å¤Ÿé²œè‰³ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨colorsä¸­é‡æ–°è®¾ç½®ä¸€ä¸ªè‰²å€¼ï¼›æˆ–è€…è®¾ç½®ä¸€ä¸ªå…¨å±€çš„ä¸»è¦è‰²å€¼main-colorï¼Œåœ¨é¡µé¢ä¸­ä½¿ç”¨bg-main-coloræˆ–è€…text-main-colorå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªå…¨å±€çš„é¢œè‰²ã€‚ åœ¨ä½¿ç”¨è¾¹è·å€¼æ—¶ï¼Œæˆ‘ä»¬å‘ç°åªæœ‰mt-6è¿™ç§æ¨¡ç³Šçš„æ•°æ®ï¼Œä½¿ç”¨çš„å•ä½ä¹Ÿæ˜¯remï¼›å¦‚æœè®¾è®¡ç¨¿éœ€è¦æ¯”è¾ƒç²¾ç¡®çš„è¿˜åŸï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤§æ‹¬å·æ¥å°†ç²¾ç¡®çš„æ•°å€¼è¿›è¡Œå‘ˆç°ï¼š 12&lt;div class=&quot;mt-[123px]&quot;&gt;&lt;/div&gt; å¯¹äºè‰²å€¼ã€å­—ä½“å¤§å°ç­‰ï¼Œè¿™ç§ä½¿ç”¨æ–¹å¼ä¹Ÿæ˜¯æœ‰æ•ˆçš„ï¼š 123&lt;div class=&quot;bg-[#f0f0f0] text-[22px] before:content-[&#x27;11&#x27;]&quot;&gt;&lt;/div&gt; ç”šè‡³å¯¹äºCSSå˜é‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å¤§æ‹¬å·ï¼Œéƒ½ä¸éœ€è¦var()ï¼Œåªéœ€è¦æä¾›å˜é‡åç§°ï¼š 12&lt;div class=&quot;bg-[--my-color]&quot;&gt;&lt;/div&gt; å‡½æ•°æŒ‡ä»¤tailwindæŒ‡ä»¤ åœ¨Tailwind CSSä¸­ï¼ŒtailwindæŒ‡ä»¤æ˜¯ç”¨äºå¿«é€Ÿç”ŸæˆåŸºäºé…ç½®çš„æ ·å¼ä»£ç çš„å·¥å…·ã€‚``tailwæ•°ç”Ÿæˆç›¸åº”çš„æ ·å¼ä»£ç ï¼Œè¿™äº›å‚æ•°å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„CSSå±æ€§å’Œå€¼ã€‚å®ƒå¯ä»¥æ ¹æ® Tailwind CSSçš„é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½®æ¥ç”Ÿæˆç›¸åº”çš„æ ·å¼ä»£ç ã€‚ 1234@tailwind base;@tailwind components;@tailwind utilities;@tailwind variants; è¿™é‡Œå¯¹åº”å‚æ•°çš„ä½œç”¨å¦‚ä¸‹ï¼š baseï¼šå¯ä»¥ç”ŸæˆåŸºç¡€æ ·å¼ä»£ç ï¼ŒåŒ…æ‹¬é‡ç½®æ ·å¼ã€å­—ä½“æ ·å¼ã€é—´è·æ ·å¼ç­‰ã€‚ componentsï¼šå¯ä»¥ç”Ÿæˆå„ç§ UI ç»„ä»¶çš„æ ·å¼ä»£ç ï¼Œä¾‹å¦‚æŒ‰é’®ã€å¡ç‰‡ã€è¡¨å•ç­‰ utilitiesï¼šå¯ä»¥ç”Ÿæˆé«˜åº¦å®šåˆ¶åŒ–çš„ã€çŸ­å°ç²¾æ‚çš„æ ·å¼ä»£ç ï¼Œç”¨äºå®ç°ç‰¹å®šçš„è®¾è®¡æ•ˆæœã€‚ variantsï¼šå¯ä»¥ç”¨äºåˆ›å»ºè‡ªå®šä¹‰çš„æ ·å¼å˜ä½“ï¼Œåœ¨éœ€è¦æ—¶çµæ´»åœ°åº”ç”¨å®ƒä»¬ layeræŒ‡ä»¤ @layeræŒ‡ä»¤æ˜¯Tailwind CSSä¸­ä¸€ä¸ªé‡è¦çš„æŒ‡ä»¤ï¼Œå®ƒç”¨äºå°† CSS ç±»åˆ†å±‚ï¼Œä»è€Œæ›´å¥½åœ°ç»„ç»‡å’Œæ§åˆ¶æ ·å¼ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@layeræŒ‡ä»¤æ¥åˆ›å»ºä¸åŒçš„å±‚ï¼ˆlayersï¼‰ã€‚å±‚æ˜¯CSSç±»çš„åˆ†ç»„ï¼Œè¿™äº›ç»„å¯ä»¥ç”¨äºå°† CSS è§„åˆ™å°è£…ä¸ºç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„æ¨¡å—ã€‚é€šè¿‡å°†æ ·å¼è§„åˆ™ç»„ç»‡åˆ°ä¸åŒçš„å±‚ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥æ›´å¥½åœ°æ§åˆ¶æ ·å¼çš„ä½œç”¨èŒƒå›´å’Œä¼˜å…ˆçº§ã€‚ 1234567891011121314151617181920212223@layer base &#123; h1 &#123; @apply text-2xl; &#125; h2 &#123; @apply text-xl; &#125;&#125;@layer components &#123; .btn-blue &#123; @apply bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded; &#125;&#125;@layer utilities &#123; .filter-none &#123; filter: none; &#125; .filter-grayscale &#123; filter: grayscale(100%); &#125;&#125; è¿™é‡Œçš„@layer baseæŒ‡ä»¤ç”¨äºåˆ›å»ºåŸºç¡€å±‚baseã€‚åŸºç¡€å±‚åŒ…å«äº†é€šç”¨çš„ã€åŸºç¡€çš„æ ·å¼è§„åˆ™ï¼Œä¾‹å¦‚é¢œè‰²ã€å­—ä½“ã€é—´è·ç­‰ã€‚è¿™äº›åŸºç¡€æ ·å¼æ˜¯æ•´ä¸ªç½‘ç«™ä¸­æ™®éé€‚ç”¨çš„ï¼Œé€šå¸¸ä¸éœ€è¦è¿›è¡Œä¿®æ”¹æˆ–å®šåˆ¶ã€‚é€šè¿‡å°†åŸºç¡€æ ·å¼è§„åˆ™åˆ†ç¦»åˆ°åŸºç¡€å±‚ä¸­ï¼Œå¯ä»¥ç¡®ä¿å®ƒä»¬åœ¨æ•´ä¸ªç½‘ç«™ä¸­ä¿æŒä¸€è‡´ï¼Œå¹¶ä¸”ä¸ä¼šå—åˆ°å…¶ä»–æ ·å¼è§„åˆ™çš„å½±å“ã€‚ è€Œ@layer componentsæŒ‡ä»¤ç”¨äºåˆ›å»ºç»„ä»¶å±‚componentsã€‚ç»„ä»¶å±‚åŒ…å«äº†ä¸å…·ä½“ç»„ä»¶ç›¸å…³çš„æ ·å¼è§„åˆ™ã€‚ç»„ä»¶å¯ä»¥æ˜¯ä»»ä½•è‡ªå®šä¹‰çš„HTMLå…ƒç´ æˆ–é¡µé¢ç»„ä»¶ï¼Œä¾‹å¦‚æŒ‰é’®ã€å¡ç‰‡ã€è¡¨å•ç­‰ã€‚ç»„ä»¶å±‚ä¸­çš„æ ·å¼è§„åˆ™é€šå¸¸ä¸å…·ä½“çš„UIç»„ä»¶æœ‰å…³ï¼Œå¹¶ä¸”å¯èƒ½éœ€è¦è¿›è¡Œé¢‘ç¹çš„ä¿®æ”¹å’Œå®šåˆ¶ã€‚ @layer utilitiesæŒ‡ä»¤ç”¨äºåˆ›å»ºå®ç”¨å±‚ã€‚å®ç”¨å±‚åŒ…å«äº†é«˜åº¦å®šåˆ¶åŒ–çš„ã€çŸ­å°ç²¾æ‚çš„æ ·å¼è§„åˆ™ã€‚è¿™äº›è§„åˆ™é€šå¸¸æ˜¯ç”¨æ¥å®ç°æŸäº›ç‰¹å®šçš„è®¾è®¡æ•ˆæœã€‚å®ç”¨å±‚ä¸­çš„æ ·å¼è§„åˆ™é€šå¸¸æ˜¯å•ä¸€ç”¨é€”çš„ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œç²¾ç¡®åœ°æ§åˆ¶å’Œå®šåˆ¶ã€‚ applyæŒ‡ä»¤ åœ¨Tailwind CSSä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨@applyæŒ‡ä»¤å°†ç°æœ‰çš„CSSç±»åº”ç”¨äºå·²ç»å®šä¹‰çš„æ ·å¼è§„åˆ™ï¼Œä»¥å®ç°æ›´çµæ´»çš„æ ·å¼æ§åˆ¶ï¼š 12345.my-custom-class &#123; @apply text-center; @apply bg-blue; @apply border-2; &#125; æ¯”å¦‚åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†æˆ‘ä»¬è‡ªå·±çš„ç±»åmy-custom-classï¼Œç„¶åä½¿ç”¨@applyæŒ‡ä»¤å°†text-centerã€bg-blueå’Œborder-2åº”ç”¨äºæˆ‘ä»¬è‡ªå®šä¹‰çš„æ ·å¼ï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å…·ä½“çš„éœ€æ±‚ï¼Œå°è£…ä¸€ç³»åˆ—æˆ‘ä»¬éœ€è¦çš„æ ·å¼è§„åˆ™ã€‚ æ€»ç»“ æœ¬æ–‡æ•´ç†äº†Tailwind CSSçš„ä¸åŒç‰¹æ€§å’Œç”¨æ³•ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å®ç”¨æ€§ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼Œæä¾›äº†ä¸€ç³»åˆ—é¢„è®¾çš„CSSç±»åï¼ŒåŒæ—¶å¯ä»¥æ ¹æ®ä¸åŒçš„éœ€æ±‚ï¼Œè‡ªå®šä¹‰æ ·å¼ç»„åˆï¼Œåº”ç”¨äºä¸åŒçš„åœºæ™¯ä¸­ï¼›é€šè¿‡Tailwind CSSï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ„å»ºä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§çš„é¡µé¢ï¼Œè€Œä¸”ä¹Ÿæ— éœ€ç¼–å†™å¤§é‡çš„CSSæ ·å¼ã€‚ æ€»ä¹‹ï¼ŒTailwind CSSæ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„CSSæ¡†æ¶ï¼Œå·²ç»è¢«åº”ç”¨äºå¤§é‡çš„ç½‘ç«™å’Œæ¡†æ¶ä¸­ï¼Œå¦‚æœä½ ç°åœ¨è¿˜åœ¨ä¸ºå†™æ ·å¼è€Œå‘æ„ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å°è¯•çš„é€‰æ‹©ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æŠ€å·§","slug":"Tips","permalink":"https://xieyufei.com/tags/Tips/"},{"name":"CSS","slug":"CSS","permalink":"https://xieyufei.com/tags/CSS/"}]},{"title":"Chromeæ’ä»¶å®æˆ˜å¼€å‘","date":"2023-08-11T08:12:00.000Z","path":"2023/08/11/Chrome-Plugin-Practise.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†Chromeæ’ä»¶çš„é¡µé¢å¦‚ä½•å†™ï¼Œä»¥åŠå„ä¸ªç»„ä»¶ä¹‹é—´æ˜¯å¦‚ä½•æ¥é€šä¿¡çš„ï¼Œå¾—åˆ°äº†ä¸å°‘æœ‹å‹çš„ç§¯æåé¦ˆï¼Œå¤§å®¶å¯¹Chromeæ’ä»¶çš„ç›¸å…³å†…å®¹ä¹Ÿéƒ½æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œä¹Ÿå­˜åœ¨ç€ç›¸å½“å¤§çš„åº”ç”¨å¸‚åœºï¼›æœ¬æ–‡å°±ç»“åˆé¡¹ç›®å¼€å‘ä¸­é‡åˆ°çš„çš„ä¸€äº›å®é™…é—®é¢˜ï¼Œåˆ†äº«ä¸€äº›å¼€å‘ç»éªŒã€‚ ä»V2å‡çº§åˆ°V3 ä¸Šä¸€ç¯‡æ–‡ç« å†™çš„æ—¶é—´æ¯”è¾ƒæ—©ï¼Œä½¿ç”¨çš„è¿˜æ˜¯V2ç‰ˆæœ¬çš„æ’ä»¶ï¼Œè€Œç°åœ¨Chromeæœ€æ–°çš„æ’ä»¶ç‰ˆæœ¬ä¹Ÿæ¥åˆ°çš„V3ï¼Œè€Œä¸”V2æ’ä»¶ä¹Ÿä¸èƒ½ç»§ç»­åœ¨Chromeå•†åº—é‡Œé¢å‘å¸ƒä¸Šæ¶äº†ï¼›å› æ­¤å¾ˆå¤šæœ‹å‹åæ§½å¾—æ¯”è¾ƒå¤šçš„å°±æ˜¯ï¼Œä¸Šä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»çš„æ’ä»¶ç‰ˆæœ¬å¤ªè€äº†ï¼›å› æ­¤æœ¬æ–‡æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å¦‚ä½•ä»V2å‡çº§åˆ°V3ï¼Œä»¥åŠä¸¤ä¸ªç‰ˆæœ¬å­˜åœ¨ç€å“ªäº›åŒºåˆ«ã€‚ é¦–å…ˆChromeæµè§ˆå™¨æ˜¯ä»88ç‰ˆæœ¬å¼€å§‹æ”¯æŒV3ï¼Œå› æ­¤å¼€å‘ä¹‹å‰ï¼Œé¦–å…ˆç¡®å®šä¸€ä¸‹è‡ªå·±çš„æµè§ˆå™¨ç‰ˆæœ¬æ˜¯å¦é«˜äºè¿™ä¸ªç‰ˆæœ¬ï¼›ç¬¬ä¸€æ­¥ï¼Œå°±æ˜¯ä¿®æ”¹manifest.jsonæ–‡ä»¶ï¼Œå°†æˆ‘ä»¬çš„æ’ä»¶ç‰ˆæœ¬å·ä»2æ”¹åˆ°3ã€‚ 12345&#123; // &quot;manifest_version&quot;: 2, &quot;manifest_version&quot;: 3, // ...&#125; æ³¨æ„ï¼šè¿™é‡Œæ”¹çš„æ˜¯manifest_versionï¼Œè€Œä¸æ˜¯versionå­—æ®µã€‚ æƒé™é…ç½®å‡çº§ åœ¨V2ç‰ˆæœ¬ä¸­ï¼Œhostæƒé™å’Œå…¶ä»–çš„æƒé™é…ç½®ä¸€èˆ¬éƒ½ç»Ÿä¸€çš„æ”¾åœ¨permissionså­—æ®µä¸­ï¼Œè€Œå…¶ä»–ä¸€äº›å¯é€‰æƒé™åˆ™åœ¨optional_permissionsï¼š 1234567891011121314// V2&#123; ... &quot;permissions&quot;: [ &quot;tabs&quot;, &quot;bookmarks&quot;, &quot;https://www.xieyufei.com/&quot;, ], &quot;optional_permissions&quot;: [ &quot;unlimitedStorage&quot;, &quot;*://*/*&quot;, ] // ...&#125; permissionsåˆ—å‡ºçš„æƒé™æ˜¯æ’ä»¶è¢«å®‰è£…å‰æ‰€éœ€è¦çš„ï¼›è€Œoptional_permissionsåˆ—å‡ºçš„ä¸€äº›æƒé™ï¼Œæ˜¯æ’ä»¶åœ¨å®‰è£…æ—¶ä¸éœ€è¦çš„ï¼Œåœ¨å®‰è£…ä¹‹åå¯èƒ½ä¼šè¦æ±‚çš„æƒé™ã€‚ åœ¨V3ç‰ˆæœ¬ä¸­ï¼Œæƒé™é…ç½®æ›´åŠ ç²¾ç»†åŒ–ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸»æœºæƒé™ç‹¬ç«‹åˆ°å•ç‹¬çš„host_permissionså’Œoptional_host_permissionså­—æ®µä¸­ï¼š 123456789101112131415161718// V3&#123; ... &quot;permissions&quot;: [ &quot;tabs&quot;, &quot;bookmarks&quot; ], &quot;optional_permissions&quot;: [ &quot;unlimitedStorage&quot; ], &quot;host_permissions&quot;: [ &quot;https://www.xieyufei.com/&quot;, ], &quot;optional_host_permissions&quot;: [ &quot;*://*/*&quot;, ] // ...&#125; web_accessible_resources web_accessible_resourceså­—æ®µç”¨æ¥æ§åˆ¶å¤–éƒ¨è®¿é—®æ’ä»¶ä¸­çš„èµ„æºï¼Œæ¯”å¦‚content-scriptè„šæœ¬æˆ–è€…popupé¡µé¢ä¸­éœ€è¦å±•ç¤ºå±•ç¤ºå›¾ç‰‡èµ„æºï¼›åœ¨V2ç‰ˆæœ¬ä¸­ï¼Œç›´æ¥å®šä¹‰ä¸€ä¸ªèµ„æºåˆ—è¡¨ï¼Œé‚£ä¹ˆæ‰€æœ‰ç½‘ç«™éƒ½èƒ½è®¿é—®è¿™äº›èµ„æºäº†ï¼š 12345678910// V2&#123; // ... &quot;web_accessible_resources&quot;: [ &quot;images/*&quot;, &quot;style/extension.css&quot;, &quot;script/extension.js&quot; ], // ...&#125; è€Œæ¥åˆ°V3ç‰ˆæœ¬ï¼Œæˆ‘ä»¬éœ€è¦é…ç½®ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œå¯¹è±¡ä¸­é€šè¿‡resourceså’Œmatchesæ›´åŠ ç²¾ç»†åŒ–çš„é…ç½®äº†å“ªäº›å¤–éƒ¨ç½‘ç«™å¯ä»¥è®¿é—®å“ªäº›èµ„æºæ–‡ä»¶ã€‚ 12345678910111213141516// V3&#123; // ... &quot;web_accessible_resources&quot;: [ &#123; &quot;resources&quot;: [ &quot;style/extension.css&quot;, &quot;script/extension.js&quot; ], &quot;matches&quot;: [ &quot;https://*.xieyufei.com/*&quot; ] &#125; ], // ...&#125; å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ å›¾ç‰‡èµ„æºåœ¨ä»¥ä¸‹æ’ä»¶ç›®å½•ä¸‹ï¼š 12345extension-files/ manifest.json content-script.js images/ banner.png æˆ‘ä»¬æƒ³è®©content-script.jsæ¥åœ¨é¡µé¢å‘ˆç°å›¾ç‰‡çš„åœ°å€ï¼Œéœ€è¦åœ¨manifest.jsonå£°æ˜å¯ä»¥è¢«è®¿é—®åˆ°ï¼š 12345678&#123; &quot;web_accessible_resources&quot;: [ &#123; &quot;resources&quot;: [ &quot;images/banner.png&quot; ], &quot;matches&quot;: [ &quot;*&quot; ] &#125; ],&#125; ç„¶ååœ¨content-script.jsä¸­è°ƒç”¨Chromeæ’ä»¶çš„chrome.runtime.getURLå‡½æ•°æ¥è·å–å›¾ç‰‡çš„åœ°å€ï¼Œå›¾ç‰‡çš„åœ°å€çœ‹èµ·æ¥å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š 1chrome-extension://&lt;extension-UUID&gt;/images/banner.png è¿™é‡Œçš„extension-UUIDå¹¶ä¸æ˜¯æ’ä»¶çš„IDï¼Œè€Œæ˜¯ä¸€ä¸ªéšæœºç”Ÿæˆçš„å”¯ä¸€idã€‚ æˆ‘ä»¬åœ¨åŒ¹é…èµ„æºæ–‡ä»¶çš„è·¯å¾„æ—¶ï¼Œé¢å¯¹å¤šä¸ªæ–‡ä»¶åŒ¹é…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼š 12345678&#123; &quot;web_accessible_resources&quot;: [ &#123; &quot;resources&quot;: [ &quot;images/*.png&quot; ], &quot;matches&quot;: [ &quot;*&quot; ] &#125; ],&#125; backgroundåå° backgroundåå°çš„å‡çº§ä¹Ÿæ˜¯Chromeæ’ä»¶æ›´æ–°çš„é‡è¦ç‰¹æ€§ä¹‹ä¸€ï¼Œä½¿ç”¨äº†Service Workeræ›¿ä»£äº†åŸæ¥çš„Background pageã€‚åœ¨V2ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨background.scriptså¯ä»¥é…ç½®å¤šä¸ªjsï¼Œæˆ–è€…ä½¿ç”¨background.pageé…ç½®ä¸€ä¸ªåå°é¡µé¢ï¼š 12345678// V2&#123; &quot;background&quot;: &#123; &quot;scripts&quot;: [&quot;js/script1.js&quot;, &quot;js/script2.js&quot;], // or &quot;page&quot;: &quot;background.html&quot; &quot;persistent&quot;: true &#125;,&#125; persistent: trueæŒ‡å®šäº†è„šæœ¬ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œç›´åˆ°æ’ä»¶è¢«ç¦ç”¨æˆ–è€…å¸è½½ï¼Œè¿™æ ·å°±å¯¼è‡´å ç”¨äº†å¤§é‡çš„å†…å­˜ï¼›å› æ­¤V3åºŸå¼ƒäº†scriptså’Œpageï¼›å¦‚æœæˆ‘ä»¬è¿˜æ˜¯æŒ‡å®šè¿™ä¸¤è€…ï¼ŒChromeå°±ä¼šæŠ¥ä¸‹é¢é”™è¯¯ï¼Œç›´æ¥å°±ä¸è®©æˆ‘ä»¬è¿è¡Œæ’ä»¶äº†ï¼Œ 12é”™è¯¯The &quot;background.scripts&quot; key cannot be used with manifest_version 3. Use the &quot;background.service_worker&quot; key instead. æ— æ³•è½½å…¥æ¸…å•ã€‚ V3ç‰ˆæœ¬å‡çº§æ”¹ç”¨äº†service_workerå­—æ®µä»£æ›¿åŸæ¥scriptså’Œpageï¼Œç¡®ä¿æ’ä»¶ä¸ä¼šä¸€ç›´å ç”¨æµè§ˆå™¨çš„èµ„æºï¼Œä»…åœ¨éœ€è¦æ—¶æ‰è¿è¡Œï¼Œä»è€ŒèŠ‚çœèµ„æºï¼š 1234567//V3&#123; &quot;background&quot;: &#123; &quot;service_worker&quot;: &quot;js/background.js&quot; // ç§»é™¤äº† &quot;persistent&quot;: true &#125;,&#125; service_workerå­—æ®µä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œåªæ”¯æŒå­—ç¬¦ä¸²æ ¼å¼ã€‚ åŒæ—¶V3ç‰ˆæœ¬å‡çº§ä¹Ÿè®©background.jsæ”¯æŒäº†æ¨¡å—åŒ–å¼€å‘ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é‡Œé¢ç›´æ¥importæœ¬åœ°çš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿä¸ç”¨ä¾èµ–æ‰“åŒ…çš„æ–¹å¼è¿›è¡Œæ¨¡å—åŒ–å¼€å‘ï¼Œä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨backgroundæ·»åŠ typeå±æ€§å³å¯ï¼š 1234567// manifest.json&#123; &quot;background&quot;: &#123; &quot;service_worker&quot;: &quot;js/background.js&quot;, &quot;type&quot;: &quot;module&quot; &#125;,&#125; æˆ‘ä»¬åœ¨background.jsä¸­å°±å¯ä»¥ä½¿ç”¨importå¯¼å…¥æœ¬åœ°æ¨¡å—ï¼š 12345678910// background.jsimport &#123; add &#125; from &quot;./utils.js&quot;;chrome.runtime.onInstalled.addListener(() =&gt; &#123; console.log(&quot;æµ‹è¯•æ’ä»¶å·²ç»å®‰è£…&quot;, add(2, 4));&#125;);// utils.jsexport function add(a, b) &#123; return a + b;&#125; åŒæ—¶ï¼Œç”±äºbackgroundä¸å†æ”¯æŒpageé¡µé¢é…ç½®background.htmlï¼Œå› æ­¤ä¹Ÿæ— æ³•è°ƒç”¨windowå¯¹è±¡ä¸Šçš„XMLHttpRequestæ¥æ„å»ºajaxè¯·æ±‚ï¼›ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸èƒ½åƒV2ç‰ˆæœ¬ä¸€æ ·ï¼Œåœ¨background.htmlä¸­ä½¿ç”¨jQueryçš„$.ajaxæ¥å‘é€è¯·æ±‚äº†ï¼Œè€Œæ˜¯éœ€è¦ä½¿ç”¨fetchå‡½æ•°æ¥è·å–æ¥å£æ•°æ®ã€‚ ç”±äºservice workersæ˜¯çŸ­æš‚çš„ï¼Œåœ¨ä¸ä½¿ç”¨æ—¶ä¼šç»ˆæ­¢ï¼Œè¿™æ„å‘³ç€å®ƒä»¬åœ¨æ•´ä¸ªæµè§ˆå™¨æ’ä»¶è¿è¡ŒæœŸé—´ä¼šä¸æ–­çš„å¯åŠ¨ã€è¿è¡Œå’Œç»ˆæ­¢ï¼Œä¹Ÿå°±æ˜¯ä¸ç¨³å®šçš„ï¼›å› æ­¤æˆ‘ä»¬å¯èƒ½éœ€è¦å¯¹V2ä¸­background.jsçš„ä»£ç é€»è¾‘è¿›è¡Œä¸€äº›æ”¹é€ ï¼Œä»¥å¾€æˆ‘ä»¬ä¼šä¹ æƒ¯å°†ä¸€äº›æ•°æ®ç›´æ¥å­˜å‚¨åˆ°å…¨å±€å˜é‡ï¼Œæ¯”å¦‚åƒä¸‹é¢è¿™æ ·ï¼š 123456789101112131415// V2 background.jslet saveUserName = &quot;&quot;;// å…¶ä»–é¡µé¢ï¼Œæ¯”å¦‚content-scriptæˆ–è€…popupä¸­å­˜å‚¨æ•°æ®chrome.runtime.onMessage.addListener((&#123; type, name &#125;) =&gt; &#123; if (type === &quot;set-name&quot;) &#123; saveUserName = name; &#125;&#125;);// ç‚¹å‡»popupæ—¶å±•ç¤ºæ•°æ®chrome.action.onClicked.addListener((tab) =&gt; &#123; // è¿™é‡ŒsaveUserNameå¯èƒ½ä¸ºç©ºå­—ç¬¦ä¸² console.log(saveUserName, &quot;saveUserName&quot;);&#125;); å½“æˆ‘ä»¬è¿è¡Œé¡¹ç›®æ—¶å‘ç°ï¼Œå…¨å±€å˜é‡saveUserNameåœ¨æŸäº›æƒ…å†µä¸‹è·å–åˆ°çš„æ•°æ®å˜æˆç©ºå­—ç¬¦ä¸²ï¼Œå­˜å‚¨çš„æ•°æ®ç›´æ¥æ¶ˆå¤±äº†ï¼›ç¬”è€…åœ¨é¡¹ç›®è°ƒè¯•ä¸­åˆšå¼€å§‹ç»å¸¸ä¼šé‡åˆ°è¿™ç§ç¥å¥‡çš„é—®é¢˜ï¼Œè°ƒè¯•çš„å€¼è·Ÿå®é™…çš„å€¼ä¸ä¸€æ ·ï¼Œéšä¹‹æ¶ˆå¤±çš„è¿˜æœ‰ç¬”è€…çš„ä¿¡å¿ƒã€‚ å› æ­¤åœ¨V3ä¸­ï¼Œéœ€è¦å¯¹è¿™ç§å…¨å±€å­˜å‚¨çš„å˜é‡æ•°æ®è¿›è¡Œæ”¹é€ ï¼Œæ”¹é€ çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å°†æ•°æ®æŒä¹…åŒ–ä¿å­˜åˆ°storageä¸­ï¼Œéœ€è¦ç”¨åˆ°çš„åœ°æ–¹éšç”¨éšå–ï¼š 1234567891011// V3 service workerchrome.runtime.onMessage.addListener((&#123; type, name &#125;) =&gt; &#123; if (type === &quot;set-name&quot;) &#123; chrome.storage.local.set(&#123; name &#125;); &#125;&#125;);chrome.action.onClicked.addListener(async (tab) =&gt; &#123; const &#123; name &#125; = await chrome.storage.local.get([&quot;name&quot;]); chrome.tabs.sendMessage(tab.id, &#123; name &#125;);&#125;); actionså‡çº§ æœ‰å°ä¼™ä¼´ä¹Ÿè®¸å‘ç°äº†ï¼Œæˆ‘ä»¬ä¸Šé¢ä½¿ç”¨äº†chrome.action.onClickedæ¥æ³¨å†Œç‚¹å‡»äº‹ä»¶ï¼Œè€Œä¸æ˜¯åŸæ¥çš„chrome.browserAction.onClickedã€‚ ç”±äºå†å²åŸå› ï¼Œä¹‹å‰å°†æ’ä»¶çš„å›¾æ ‡åˆ†ä¸ºpageActionå’ŒbrowserActionï¼Œä¸¤è€…çš„åŒºåˆ«åœ¨äºbrowserActionå§‹ç»ˆéƒ½æ˜¾ç¤ºï¼Œæ›´åƒæˆ‘ä»¬ç°åœ¨çš„æ’ä»¶å›¾æ ‡é€»è¾‘ï¼›è€ŒpageActionåˆ™æ¯”è¾ƒç‰¹æ®Šï¼Œåªæœ‰å½“æŸäº›ç‰¹å®šçš„é¡µé¢æ‰“å¼€æ—¶æ‰ä¼šæ˜¾ç¤ºå›¾æ ‡ã€‚ è€ŒV2ç‰ˆæœ¬ä¸¤è€…çš„åŒºåˆ†ç•Œé™å·²ç»è¾ƒä¸ºæ¨¡ç³Šäº†ï¼ŒåŒºåˆ«ä¸æ˜¯å¾ˆå¤§ï¼›ä½†æ˜¯åœ¨manifest.jsonä¸­é…ç½®è¿˜æ˜¯æœ‰åŒºåˆ†ï¼Œå¸¸ç”¨çš„å°±æ˜¯browser_actionï¼š 1234567// V2&#123; &quot;page_action&quot;: &#123; ... &#125;, &quot;browser_action&quot;: &#123; &quot;default_popup&quot;: &quot;popup.html&quot; &#125;&#125; å‡çº§åˆ°V3ç‰ˆæœ¬ï¼Œç›´æ¥ç»Ÿä¸€ä¸ºåŒä¸€ä¸ªactionï¼Œä¸éœ€è¦å†åŒºåˆ†ï¼š 123456789101112131415// V3&#123; &quot;action&quot;: &#123; &quot;default_title&quot;: &quot;æ’ä»¶æ ‡é¢˜&quot;, &quot;default_popup&quot;: &quot;popup.html&quot;, &quot;default_icon&quot;: &#123; &quot;16&quot;: &quot;/images/get_started16.png&quot;, &quot;32&quot;: &quot;/images/get_started32.png&quot;, &#125;, &quot;icons&quot;: &#123; &quot;16&quot;: &quot;/images/get_started16.png&quot;, &quot;32&quot;: &quot;/images/get_started32.png&quot;, &#125; &#125;,&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœæ³¨å†Œäº†popup.htmlçš„é¡µé¢ï¼Œåˆ™chrome.action.onClickedç‚¹å‡»äº‹ä»¶æ³¨å†Œåå¹¶ä¸ä¼šè¢«æ‰§è¡Œã€‚ æˆ‘ä»¬åœ¨ç»‘å®šchrome.actionäº‹ä»¶çš„åœ°æ–¹ä¹Ÿéœ€è¦è¿›è¡Œç»Ÿä¸€ï¼š 123456// V2 chrome.browserAction.onClicked.addListener(tab =&gt; &#123; ... &#125;);chrome.pageAction.onClicked.addListener(tab =&gt; &#123; ... &#125;);// V3chrome.action.onClicked.addListener(tab =&gt; &#123; ... &#125;); CSP å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆContent Security Policyï¼Œç®€ç§°CSPï¼‰ï¼Œæ˜¯åœ¨manifest.jsonä¸­é…ç½®çš„ï¼Œç”¨äºé™åˆ¶æ‰©å±•å¯ä»¥ä»å“ªäº›æºåŠ è½½ä»£ç ï¼Œæ¯”å¦‚scriptæ ‡ç­¾å¯ä»¥ä»å“ªäº›åŸŸååœ°å€åŠ è½½CDNï¼Œæˆ–è€…ç¦æ­¢eval()ç­‰å¯èƒ½ä¸å®‰å…¨çš„å‡½æ•°ï¼›åœ¨V2ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²é…ç½®ï¼š 1234// V2&#123; &quot;content_security_policy&quot;: &quot;default-src &#x27;self&#x27;&quot;&#125; å‡çº§åˆ°V3ç‰ˆæœ¬ï¼Œcontent_security_policyå­—æ®µä¾ç„¶è¢«ä¿ç•™ï¼Œæ”¯æŒå¦å¤–ä¸¤ä¸ªå±æ€§ï¼šextension_pageså’Œsandboxï¼š 1234567// V3&#123; &quot;content_security_policy&quot;: &#123; &quot;extension_pages&quot;: &quot;default-src &#x27;self&#x27;&quot;, &quot;sandbox&quot;: &quot;...&quot; &#125;&#125; default-src &#39;self&#39;è¡¨ç¤ºé»˜è®¤æ‰€æœ‰ç±»å‹çš„å¼•ç”¨æ–‡ä»¶ï¼ˆjsæ–‡ä»¶ã€htmlæ–‡ä»¶ï¼‰éƒ½æ˜¯åº”è¯¥åœ¨æ’ä»¶åŒ…å†…çš„ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦æ”¯æŒä»æŸä¸ªåŸŸååœ°å€å¼•å…¥jsæ–‡ä»¶ï¼Œåœ¨V2ä¸­æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‹é¢çš„å†™æ³•ï¼š 12345678// V2&#123; &quot;content_security_policy&quot;: &quot;script-src &#x27;self&#x27; https://xieyufei.com; object-src &#x27;self&#x27;&quot;&#125;// æˆ–è€…æ”¯æŒå­åŸŸå&#123; &quot;content_security_policy&quot;: &quot;script-src &#x27;self&#x27; https://*.xieyufei.com; object-src &#x27;self&#x27;&quot;&#125; ä½†V3ä¸­ä¸æ”¯æŒè¿™æ ·çš„å†™æ³•ï¼Œä¸å…è®¸ä»æŸä¸ªåŸŸååœ°å€å¼•å…¥æ–‡ä»¶ã€‚ APIè°ƒç”¨å‡çº§ æˆ‘ä»¬åœ¨è°ƒç”¨chrome APIçš„åœ°æ–¹ï¼Œä¹Ÿæœ‰ä¸€äº›éœ€è¦è¿›è¡Œå‡çº§æ”¹é€ çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„chrome.actionï¼š 123456// V2 chrome.browserAction.onClicked.addListener(tab =&gt; &#123; ... &#125;);chrome.pageAction.onClicked.addListener(tab =&gt; &#123; ... &#125;);// V3chrome.action.onClicked.addListener(tab =&gt; &#123; ... &#125;); åœ¨è·å–èµ„æºåœ°å€çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦å°†chrome.extension.getURLæ›¿æ¢æˆchrome.runtime.getURLï¼š 12345// V2chrome.extension.getURL(&quot;images/img.png&quot;);// V3chrome.runtime.getURL(&quot;images/img.png&quot;); V3ä¸­ï¼Œæ‰§è¡Œscript-contentçš„apiå‡½æ•°executeScriptä¹Ÿä»tabsï¼Œå‡çº§åˆ°äº†scriptingï¼›å› æ­¤æˆ‘ä»¬è¿˜éœ€è¦åœ¨manifest.jsonä¸­æ·»åŠ scriptingæƒé™æ‰èƒ½è°ƒç”¨ï¼›åŒæ—¶ï¼Œæ‰§è¡Œçš„è„šæœ¬ä¹Ÿä»åŸæ¥çš„å•ä¸ªæ–‡ä»¶ï¼Œå˜æˆå¯ä»¥æ¥æ”¶å¤šä¸ªæ–‡ä»¶ï¼š 12345678910111213// V2chrome.tabs.executeScript( tab.id, &#123; file: &#x27;content-script.js&#x27; &#125;);// V3chrome.scripting.executeScript(&#123; target: &#123;tabId: tab.id&#125;, files: [&#x27;content-script.js&#x27;]&#125;); insertCSS()å’ŒremoveCSS()ä¹Ÿä»tabså‡çº§åˆ°äº†scriptingã€‚ 12345678910// V2chrome.tabs.insertCSS(tab.id, injectDetails, () =&gt; &#123; // callback code&#125;);// V3const insertPromise = await chrome.scripting.insertCSS(&#123; files: [&quot;style.css&quot;], target: &#123; tabId: tab.id &#125;&#125;); service workerå¼‚æ­¥è¿”å›æ•°æ® æˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å€™ä¼šéœ€è¦service workerå¼‚æ­¥è¿”å›ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚è¯·æ±‚æ¥å£åè¿”å›ä¸€äº›æ¥å£æ•°æ®ç­‰ï¼š 123456789101112131415161718// content-script.jschrome.runtime .sendMessage(&#123; type: &#x27;get-status&#x27;, &#125;) .then((res) =&gt; &#123; // å¯¹reså¤„ç† &#125;)// background.jschrome.runtime.onMessage .addListener(async (&#123; type &#125;, sender, sendResponse) =&gt; &#123; if (type === &#x27;get-status&#x27;) &#123; fetch(&#x27;XXX/list.json&#x27;).then(res=&gt;&#123; sendResponse(res) &#125;); &#125; &#125;) ä¸Šé¢çš„ä»£ç ä¸­åœ¨content-script.jså‘é€æ¶ˆæ¯åˆ°backgroundä¸­ï¼Œè™½ç„¶è¿™é‡Œæˆ‘ä»¬è™½ç„¶æ˜¯åœ¨thenä¸­è¿”å›äº†resï¼Œæˆ–è€…ä½¿ç”¨async/awaitï¼›ä½†æ˜¯å¾ˆé—æ†¾ï¼Œåœ¨content-script.jsæ¥æ”¶åˆ°çš„resè¿˜æ˜¯undefinedï¼Œæˆ‘ä»¬éœ€è¦å¯¹backgroundä»£ç è¿›è¡Œæ”¹é€  1234567891011// background.jschrome.runtime.onMessage .addListener(async (&#123; type &#125;, sender, sendResponse) =&gt; &#123; if (type === &#x27;get-status&#x27;) &#123; fetch(&#x27;XXX/list.json&#x27;).then(res=&gt;&#123; sendResponse(res) &#125;); // è¿™é‡Œæ·»åŠ äº†è¿”å›true return true; &#125; &#125;) åœ¨onMessageå›è°ƒå‡½æ•°é‡Œè¿”å›trueï¼Œå‘Šè¯‰Chromeæˆ‘ä»¬æƒ³è¦å¼‚æ­¥å‘é€å“åº”ã€‚ æ’ä»¶å’ŒåŸç”Ÿé¡µé¢é€šä¿¡é—®é¢˜ æˆ‘ä»¬æœ‰æ—¶å€™ä¼šé‡åˆ°éœ€è¦æ’ä»¶å»å’ŒåŸç”ŸWebé¡µé¢è¿›è¡Œé€šä¿¡æƒ…å†µï¼Œè¿™é‡Œçš„åŸç”ŸWebé¡µé¢é¡µé¢æŒ‡çš„å¹¶ä¸æ˜¯content-script.jsæˆ–è€…popup.htmlé¡µé¢ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯æˆ‘ä»¬å¼€å‘çš„ç½‘ç«™é¡µé¢ï¼›æ¯”å¦‚åœ¨åŸç”ŸWebé¡µé¢é¡µé¢ä¸­ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦å®‰è£…äº†æ’ä»¶ï¼Œæ²¡æœ‰å®‰è£…æ’ä»¶çš„è¯æ˜¾ç¤ºä¸‹è½½æ’ä»¶çš„è·³è½¬é“¾æ¥ï¼›æˆ–è€…ç‚¹å‡»åŸç”Ÿé¡µé¢ä¸Šçš„æŸä¸€ä¸ªæŒ‰é’®ï¼Œå°†æ•°æ®ä¿å­˜åˆ°æ’ä»¶ä¸­æ¥ç­‰ç­‰ï¼Œå°±éœ€è¦æ¶‰åŠæ’ä»¶å’ŒåŸç”ŸWebé¡µé¢é¡µé¢çš„é€šä¿¡é—®é¢˜ã€‚ è¿™é‡Œæœ‰å‡ ç§å®ç°é€šä¿¡çš„æ–¹å¼ï¼Œç¬¬ä¸€ç§æœ€ç®€å•çš„æ–¹å¼å°±æ˜¯é€šè¿‡éšè—çš„domèŠ‚ç‚¹ï¼Œæ¯”å¦‚å®‰è£…æ’ä»¶åï¼Œé€šè¿‡content-script.jsåœ¨é¡µé¢ä¸Šæ”¾ç½®ä¸€ä¸ªéšè—çš„domï¼Œå°†æ’ä»¶ä¿¡æ¯æ”¾åˆ°æ”¾åˆ°domèŠ‚ç‚¹ä¸Šï¼Œè¿™æ ·çš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œåªèƒ½ä¼ è¾“ä¸€äº›ç®€å•çš„æ•°æ®ï¼Œä¸”ä¸èƒ½è¿›è¡ŒåŒå‘é€šä¿¡ã€‚ ç¬¬äºŒç§æ–¹å¼ï¼Œé€šè¿‡æ’ä»¶çš„idï¼Œä»åŸç”ŸWebé¡µé¢æƒ³æ’ä»¶å‘é€æ¶ˆæ¯ï¼Œé¦–å…ˆéœ€è¦é…ç½®åœ¨manifest.jsonä¸­é…ç½®externally_connectableå­—æ®µï¼Œæ¥å£°æ˜å“ªäº›Webé¡µé¢å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå’Œæ’ä»¶å»ºç«‹é“¾æ¥ï¼š 123456// manifest.json&#123; &quot;externally_connectable&quot;: &#123; &quot;matches&quot;: [&quot;https://*.fill-you-web-url.com/*&quot;] &#125;,&#125; externally_connectableè¿˜å¯ä»¥æŒ‡å®šidså­—æ®µï¼Œç”¨æ¥æŒ‡å®šéœ€è¦é€šä¿¡çš„å…¶ä»–Chromeæ’ä»¶ï¼›é…ç½®å®Œæˆç„¶åå°±å¯ä»¥åœ¨æˆ‘ä»¬çš„Webé¡µé¢é‡Œæ·»åŠ å‘é€æ¶ˆæ¯çš„ä»£ç äº†ï¼š 1234567891011121314// æ’ä»¶IDconst extensionId = &quot;iodjapnffldobobfdaoobinimjofgejm&quot;;// å‘Chromeæ‰©å±•å‘é€è¯·æ±‚chrome?.runtime?.sendMessage( extensionId, &#123; type: &quot;pageMsg&quot;, msg: &quot;hello i am from origin&quot;, &#125;, (response) =&gt; &#123; console.log(&quot;res data&quot;, response); &#125;); è¿™é‡Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®ä¸Šé¢çš„externally_connectableå­—æ®µï¼Œæµè§ˆå™¨æ˜¯ä¸ä¼šåœ¨æˆ‘ä»¬çš„é¡µé¢ä¸Šæ³¨å…¥chrome.runtime.sendMessageæ–¹æ³•çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹è¿™ä¸ªå‡½æ•°è¿›è¡Œå¼‚å¸¸åˆ¤æ–­ï¼Œå¦åˆ™é¡µé¢å°±ä¼šæŠ¥é”™ã€‚ 12345678910// background.js æ¥æ”¶åŸç”ŸWebé¡µé¢æ¶ˆæ¯chrome.runtime.onMessageExternal.addListener( (request, sender, sendResponse) =&gt; &#123; if (request.type === &quot;pageMsg&quot;) &#123; sendResponse(&#x27;res msg&#x27;); &#125; else &#123; sendResponse(&quot;received&quot;); &#125; &#125;); ç¬¬ä¸‰ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡window.postMessageè¿›è¡Œé€šä¿¡ï¼Œwindow.postMessageä¸€èˆ¬ç”¨åœ¨å¤šä¸ªé¡µé¢ä¹‹é—´é€šä¿¡ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬çš„content-script.jså’ŒåŸç”ŸWebç•Œé¢æ˜¯åŒæºçš„ï¼Œæ›´èƒ½ç›´æ¥é€šä¿¡äº†ï¼›ä¸¤è€…çš„å‘é€æ–¹å¼å’Œæ¥æ”¶æ–¹å¼åœ¨ä»£ç ä¸Šéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™é‡Œä¹Ÿä¸å†è¿›è¡ŒåŒºåˆ†ï¼š 1234567891011121314151617181920212223// é¡µé¢åˆå§‹åŒ–è¯è¿›è¡Œç›‘å¬window.addEventListener(&#x27;message&#x27;, (ev) =&gt; &#123; if (ev.source != window) &#123; return; &#125; if (ev.data) &#123; const &#123; type, saveData &#125; = ev.data; &#125;&#125;)// ç‚¹å‡»å‘é€æ¶ˆæ¯const clickSend = ()=&gt;&#123; window.postMessage( &#123; type: &#x27;myTestPostMsg&#x27;, saveData: &#123; title: &#x27;XXX&#x27;, version: &#x27;QQQ&#x27; &#125;, &#125;, &#x27;*&#x27; );&#125; è¿™æ ·æˆ‘ä»¬ä¸éœ€è¦è·å–æ’ä»¶çš„IDä¹Ÿèƒ½é€šä¿¡äº†ï¼Œä¸è¿‡æˆ‘ä»¬åœ¨ç›‘å¬messageæ¶ˆæ¯æ—¶ä¼šçœ‹åˆ°å„ç§å„æ ·æ’ä»¶æˆ–è€…é¡µé¢ä¹‹é—´ä¼ é€’çš„æ¶ˆæ¯ï¼Œå› æ­¤æˆ‘ä»¬å¯¹ä¼ è¾“æ•°æ®çš„å‘½åæ–¹å¼ä¸Šå·®å¼‚åŒ–ï¼Œå¯ä»¥å®šä¹‰ä¸€äº›ç‹¬ç‰¹çš„å‰ç¼€ï¼Œé¿å…å’Œå…¶ä»–é¡µé¢äº§ç”Ÿä¸å¿…è¦çš„å†²çªã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æµè§ˆå™¨","slug":"Browser","permalink":"https://xieyufei.com/tags/Browser/"},{"name":"æ’ä»¶","slug":"Plugin","permalink":"https://xieyufei.com/tags/Plugin/"}]},{"title":"ä¸€æ–‡æŒæ¡ä½ æ‰€éœ€Threejs3Då…¨æ™¯é¢„è§ˆ","date":"2023-04-28T05:14:15.000Z","path":"2023/04/28/Threejs-Panorama.html","text":"æˆ‘ä»¬ç»å¸¸ä¼šåœ¨ä¸€äº›æ™¯åŒºã€å±•å…ã€é…’åº—æ°‘å®¿çš„å®£ä¼ é¡µé¢ä¸Šï¼Œæˆ–è€…å–æˆ¿çœ‹æˆ¿ç½‘ç«™ï¼Œéƒ½èƒ½é¢‘ç¹çš„çœ‹åˆ°å„ç§3Då…¨æ™¯é¢„è§ˆçš„ç½‘é¡µæ•ˆæœï¼Œè¿™æ ·å°±å¯ä»¥å¦‚ä¸´å…¶å¢ƒèˆ¬çš„çœ‹åˆ°æ‰€åœ¨åœºæ™¯çš„360åº¦èŒƒå›´å†…çš„å„ç§äº‹ç‰©ï¼›é‚£ä¹ˆï¼Œè¿™æ ·çš„æ•ˆæœæ˜¯å¦‚ä½•æ¥å®ç°çš„å‘¢ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±æ¥æ¢è®¨ä¸€ä¸‹å…¶ä¸­æ‰€æœ‰çš„æŠ€æœ¯å®ç°ç»†èŠ‚ï¼Œæœ¬æ–‡å¹²è´§æ»¡æ»¡ï¼Œè®°å¾—ç‚¹èµ+æ”¶è—ã€‚ ç¯å¢ƒæ­å»º é˜…è¯»æœ¬æ–‡éœ€è¦ä¸€å®šçš„ThreejsåŸºç¡€ã€‚ å…¨æ™¯ç´ æ é¦–å…ˆä»€ä¹ˆæ˜¯å…¨æ™¯å›¾å‘¢ï¼Ÿå…¨æ™¯å›¾æ˜¯ä¸€ç§å®æ™¯360Â°å…¨æ–¹ä½çš„å¹³é¢å›¾åƒï¼Œéœ€è¦ç”¨ç‰¹æ®Šçš„å·¥å…·æ¥æŸ¥çœ‹æ‰èƒ½è¾¾åˆ°360Â°ç¯ç»•çš„æ•ˆæœï¼Œæ¯”å¦‚ç”¨æˆ‘ä»¬çš„Threejsã€‚ æ¯”å¦‚ä¸Šé¢çš„è¿™å¼ ç…§ç‰‡ï¼Œå°±æ˜¯ä¸€å¼ å…¨æ™¯ç…§ç‰‡ï¼Œå°†æ•´ä¸ªæˆ¿é—´å‰åå·¦å³ä¸Šä¸‹éƒ½æ‹æ‘„è¿›æ¥ï¼Œå¦‚æœç”¨è‚‰çœ¼çœ‹çš„è¯ï¼Œæ•´ä¸ªæˆ¿é—´å¼¯å¼¯æ›²æ›²çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹ï¼›é‚£ä¹ˆï¼Œè¿™æ ·çš„ç…§ç‰‡æ˜¯å¦‚ä½•æ¥æ‹æ‘„çš„å‘¢ï¼Ÿ æ‰“å¼€ä½ çš„æ‰‹æœºç›¸æœºï¼Œç‚¹å‡»æ›´å¤šï¼Œé‡Œé¢ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªå…¨æ™¯ç›¸æœºçš„é€‰é¡¹ï¼Œç„¶åç«™èµ·èº«æ¥ï¼Œè½¬ä¸€åœˆï¼Œä½ å°±èƒ½å¾—åˆ°ä¸€å¼ å®Œæ•´çš„å…¨æ™¯å›¾ç‰‡äº†ã€‚ å½“ç„¶å¼€ä¸ªç©ç¬‘ï¼Œè¿™æ ·æ‹æ‘„ï¼Œé™¤éä½ çš„æ‰‹ç¨³å®šå¾—å¦‚åŒå·¥å‚é‡Œçš„æœºæ¢°è‡‚ä¸€æ ·ï¼Œå¹¶ä¸”èƒ½å¤Ÿä¿æŒèº«ä½“çš„å¹³è¡¡ï¼›ä¸€èˆ¬æ‹æ‘„å‡ºæ¥çš„ç›¸ç‰‡åªèƒ½ç²—ç•¥çš„çœ‹çœ‹å³å¯ï¼›ä¸“ä¸šçš„æ‹æ‘„è®¾å¤‡éœ€è¦ç”¨åˆ°å•å+ä¸‰è„šæ¶+äº‘å°ï¼Œæ‹æ‘„åè¿˜éœ€è¦ä¸“ä¸šçš„åæœŸå¤„ç†å’Œæ‹¼æ¥ï¼Œæ¯”è¾ƒéº»çƒ¦ï¼›å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä»ç½‘ä¸Šä¸€äº›èµ„æºä¸‹è½½ï¼š å…¨æ™¯å›¾ä¸‹è½½ è¿‘äº›å¹´ï¼Œéšç€ä¸ªäººvlogçš„å…´èµ·ï¼Œå„ç§æ¶ˆè´¹çº§çš„æ‹æ‘„è®¾å¤‡å’Œå·¥å…·ä¹Ÿè¿…é€Ÿå‘å±•ï¼Œå…¨æ™¯ç›¸æœºã€è¿åŠ¨ç›¸æœºç­‰äº§å“ä¸æ–­æ›´æ–°è¿­ä»£ï¼Œå·²ç»èƒ½å¤Ÿå¸¦æ¥å¾ˆå¤šéå¸¸å¥½ç©çš„æ‹æ‘„ä½“éªŒäº†ï¼›æ¯”å¦‚è¿™æ¬¾Insta360 ONE X2åœ¨æ‹æ‘„æ—¶å°±å¯ä»¥é€‰æ‹©360Â°å…¨æ™¯ç…§ç‰‡æ¨¡å¼ï¼Œè½»è½»ä¸€æŒ‰ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€å¼ æ»¡æ„çš„å…¨æ™¯å›¾äº†ã€‚ Threejså°è£… è¦å®ç°å…¨æ™¯å›¾ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥å¯¹Threejsçš„åœºæ™¯å¸ƒå±€è¿›è¡Œä¸€ä¸ªç®€å•çš„å°è£…ï¼Œå¼•å…¥Threejsä¸­æ‰€éœ€è¦ç”¨åˆ°çš„ç»„ä»¶ï¼š 1234567891011121314import &#123; Scene, WebGLRenderer, PerspectiveCamera, Vector3, PCFSoftShadowMap, Color, Clock, AxesHelper, LinearToneMapping,&#125; from &quot;three&quot;;import Stats from &quot;stats.js&quot;;import &#123; OrbitControls &#125; from &quot;three/examples/jsm/controls/OrbitControls&quot;; å°†ä¸€äº›ç”¨åˆ°çš„é»˜è®¤é…ç½®å®šä¹‰åˆ°configä¸­ï¼Œè¿™é‡Œå°†divçš„idè®¾ç½®ä¸ºwebgl-outputï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦åœ¨é¡µé¢æ·»åŠ ä¸€ä¸ªdivå¹¶å°†idè®¾ç½®å³å¯ã€‚ 12345678910111213141516171819// é»˜è®¤çš„é…ç½®const DEFAULT_CONFIG = &#123; domId: &quot;webgl-output&quot;, initPosition: new Vector3(20, 10, 10), fov: 60, near: 1, far: 10000, rendererOptions: &#123;&#125;, // èƒŒæ™¯é¢œè‰² clearColor: new Color(0x94959a), // æ˜¯å¦æ˜¾ç¤ºStats showStats: false, // AxesHelper helper: 0, // æ›å…‰å€¼ exposure: 1, // å¯ç”¨é˜»å°¼ï¼ˆæƒ¯æ€§ï¼‰ enableDamping: true,&#125;; æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªStageçˆ¶ç±»ï¼Œå°†ä¸šåŠ¡é€»è¾‘å®šä¹‰åˆ°å­ç±»ï¼Œç»§æ‰¿è¯¥ç±»å³å¯ï¼š 1234567891011121314151617181920212223242526272829303132333435363738export default class Stage &#123; constructor(config) &#123; const dConfig = DEFAULT_CONFIG; if (isObject(config)) &#123; Object.assign(dConfig, config); &#125; const &#123; fov, near, far, initPosition, clearColor, domId, enableDamping, &#125; = dConfig; this.scene = new Scene(); this.camera = new PerspectiveCamera(fov, window.innerWidth / window.innerHeight, near, far); this.camera.position.copy(initPosition); this.camera.lookAt(this.scene.position); // å¼€å¯æŠ—é”¯é½¿ this.renderer = new WebGLRenderer(&#123; antialias: true &#125;); document.getElementById(domId)?.append(this.renderer.domElement); this.orbitControls = new OrbitControls(this.camera, this.renderer.domElement); this.orbitControls.enableDamping = enableDamping; &#125; render() &#123; this.orbitControls.update(); this.beforeRender &amp;&amp; this.beforeRender(); requestAnimationFrame(this.render.bind(this)); this.renderer.render(this.scene, this.camera); &#125;&#125; è¿™é‡Œrenderå‡½æ•°æ¯æ¬¡éƒ½ä¼šå‘¨æœŸæ€§çš„æ‰§è¡Œï¼Œä¸€äº›å‘¨æœŸæ€§çš„æ¸²æŸ“éƒ½ä¼šæ”¾åˆ°è¿™é‡Œè¿›è¡Œå¤„ç†ï¼›å¦‚æœå­ç±»ä¹Ÿéœ€è¦æ¸²æŸ“ï¼Œé¿å…å‘½åé‡å¤ï¼Œæˆ‘ä»¬å°†å­ç±»çš„æ¸²æŸ“å®šä¹‰åˆ°beforeRenderå‡½æ•°ä¸­ã€‚ æ¸²æŸ“å™¨ç›¸å½“äºæ˜¯ä¸€ä¸ªç”»å¸ƒï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œæ›´ç²¾ç»†çš„è®¾ç½®ï¼Œå¼€å¯é˜´å½±ã€è®¾ç½®èƒŒæ™¯é¢œè‰²ç­‰ã€‚ 1234567891011121314// è¡¨ç¤ºå¯ç”¨é˜´å½±è´´å›¾ï¼Œthis.renderer.shadowMap.enabled = true;// å¹¶å°†é˜´å½±è´´å›¾ç±»å‹è®¾ç½®ä¸ºTHREE.PCFSoftShadowMapthis.renderer.shadowMap.type = PCFSoftShadowMap;// ä»é…ç½®ä¸­è®¾ç½®èƒŒæ™¯é¢œè‰²this.renderer.setClearColor(clearColor);// è®¾ç½®å°ºå¯¸this.renderer.setSize(window.innerWidth, window.innerHeight);this.renderer.toneMapping = LinearToneMapping;// æ›å…‰å€¼this.renderer.toneMappingExposure = exposure;// å°†å¯ç”¨æ­£ç¡®çš„ç‰©ç†ç¯å…‰ã€‚this.renderer.physicallyCorrectLights = true; åœ¨ä½¿ç”¨æ—¶Stageæ—¶ï¼Œç”±äºrenderå‡½æ•°å·²ç»è¢«å ç”¨äº†ï¼Œæˆ‘ä»¬é‡æ–°è®¾ç½®ä¸€ä¸ªbeforeRenderå‡½æ•°ï¼Œåœ¨æ¯æ¬¡renderè°ƒç”¨æ—¶è°ƒç”¨ã€‚ 123456789101112131415161718192021import Stage from &quot;./stage&quot;import &#123; onMounted &#125; from &quot;vue&quot;class Panorama extends Stage &#123; constructor() &#123; super(&#123; initPosition: new Vector3(0, 0, 1), clearColor: new Color(0x000000), &#125;); // åœ¨renderä¹‹å‰å¯ä»¥å‘åœºæ™¯ä¸­æ·»åŠ ä¸€äº›å…¶ä»–çš„å…ƒç´  // å­ç±»ä¸­å¿…é¡»åœ¨constructoræ„å»ºå‡½æ•°çš„æœ€åè°ƒç”¨ this.render(); &#125; beforeRender() &#123; // ä¸€äº›å‘¨æœŸæ€§æ¸²æŸ“çš„æ•°æ®æ”¾åˆ°è¿™é‡Œå¤„ç† &#125;&#125;onMounted(() =&gt; &#123; new Panorama();&#125;); å­ç±»å¿…é¡»æ”¾åˆ°domå…ƒç´ æ¸²æŸ“å®Œæˆåå®ä¾‹åŒ–ã€‚ åœºæ™¯èƒŒæ™¯ å°†ç¯å¢ƒè´´å›¾è®¾ç½®åˆ°åœºæ™¯sceneçš„èƒŒæ™¯ä¹Ÿèƒ½å®ç°å…¨æ™¯å›¾çš„åŠŸèƒ½ï¼Œè¿™ç§æ–¹å¼å®ç°èµ·æ¥ä¹Ÿæ˜¯æœ€ç®€å•çš„ï¼›å°†ç›¸æœºæ”¾åœ¨æ•´ä¸ªåœºæ™¯çš„ä¸­å¿ƒï¼Œå½“ç›¸æœºç§»åŠ¨æ—¶ï¼ŒèƒŒæ™¯å›¾ç‰‡ä¹Ÿéšä¹‹ç§»åŠ¨ã€‚ æ„å»ºä¸€ä¸ªCubeTextureLoaderåŠ è½½å™¨å®ä¾‹ï¼Œå°†å…­ä¸ªé¢çš„è´´å›¾é€šè¿‡åŠ è½½å™¨è½½å…¥ï¼Œé¡ºåºä¸º[right,left,up,down,front,back]ï¼Œç„¶åç›´æ¥è®¾ç½®åˆ°èƒŒæ™¯å³å¯ã€‚ 123456789101112131415161718192021const urls = [ &quot;/images/panorama/px.jpg&quot;, &quot;/images/panorama/nx.jpg&quot;, &quot;/images/panorama/py.jpg&quot;, &quot;/images/panorama/ny.jpg&quot;, &quot;/images/panorama/pz.jpg&quot;, &quot;/images/panorama/nz.jpg&quot;,];class Panorama extends Stage &#123; constructor() &#123; super(&#123; initPosition: new Vector3(0, 0, 1), clearColor: new Color(0x000000), &#125;); const cubeLoader = new CubeTextureLoader(); const map = cubeLoader.load(urls); this.scene.background = map; this.scene.environment = map; this.render(); &#125;&#125; æŸ¥çœ‹å…¨æ™¯æ•ˆæœ ä¸Šé¢çš„é¡ºåºå¤§å®¶å¯èƒ½è®°ä¸ä½ï¼Œæˆ‘ä»¬ä»”ç»†æŸ¥çœ‹pxï¼Œnxçš„é¡ºåºä¼šå‘ç°ï¼Œæ˜¯æŒ‰ç…§xã€yã€zè½´çš„é¡ºåºï¼Œpè¡¨ç¤ºpositiveæ­£é¢ï¼Œnè¡¨ç¤ºnegativeåé¢ï¼Œå› æ­¤pxä¹Ÿå°±æ˜¯å³ä¾§äº†ï¼Œnxå°±æ˜¯å·¦ä¾§ã€‚ è¿™ç§æ–¹å¼ç›¸è¾ƒäºä¸‹é¢ä¸¤ç§ç›’å­çš„å¥½å¤„ï¼Œå°±æ˜¯å®ç°èµ·æ¥ç®€å•ï¼Œè€Œä¸”é¼ æ ‡ç¼©æ”¾ä¸ä¼šæš´éœ²ç›’å­çš„åŸå‹ï¼Œä¸ä¼šå‡ºåœˆï¼›ä½†æ˜¯ç¼ºç‚¹ä¹Ÿæ˜æ˜¾ï¼Œä¸èƒ½ç¼©æ”¾æŸ¥çœ‹èƒŒæ™¯çš„ç»†èŠ‚ä¹‹å¤„ï¼Œä¹Ÿä¸èƒ½æ§åˆ¶è§†è§’çš„è·ç¦»ï¼Œ å…¨æ™¯çƒ å…¨æ™¯çƒåˆ™æ˜¯é¦–å…ˆåˆ›å»ºä¸€ä¸ªçƒå½¢ï¼Œç›´æ¥å°†ä¸€å¼ å…¨æ™¯å›¾ç›´æ¥ä½œä¸ºç´ æè´´ä¸Šã€‚ 12345678910111213141516171819202122class Panorama extends Stage &#123; constructor() &#123; super(&#123; fov: 75, near: 1, far: 1100, initPosition: new Vector3(0, 0, 1), clearColor: new Color(0x000000), &#125;); const sphereGeometry = new SphereGeometry(500, 50, 50); sphereGeometry.scale(-1, 1, 1); const sphereMaterial = new MeshBasicMaterial(&#123; map: new TextureLoader().load(&quot;/images/panorama/panorama.jpg&quot;), &#125;); const sphere = new Mesh(sphereGeometry, sphereMaterial); this.scene.add(sphere); this.render(); &#125;&#125; è¿™é‡Œæˆ‘ä»¬å°†çƒçš„åŠå¾„è®¾ç½®ä¸º500ï¼Œå¦‚æœå¤ªå°äº†ï¼Œç¼©æ”¾æ—¶ä¹Ÿä¼šå‡ºåœˆï¼›è¿™é‡Œçš„sphereGeometry.scale(-1, 1, 1)å…¶å®ç›¸å½“äºsphereGeometry.scale.x = -1ï¼Œå°†è´´å›¾æ²¿ç€xè½´è¿›è¡Œç¿»è½¬ã€‚ æŸ¥çœ‹å…¨æ™¯çƒæ•ˆæœ å…¨æ™¯çƒçš„æ–¹å¼åªèƒ½ç”¨å…¨æ™¯å›¾ï¼Œä¸€èˆ¬å…¨æ™¯å›¾çš„å¤§å°éƒ½è¾¾åˆ°å‡ å…†ç”šè‡³å‡ åå…†ï¼Œå› æ­¤å®é™…ä½¿ç”¨æ—¶éœ€è¦å¯¹å›¾ç‰‡è¿›è¡Œå‹ç¼©ï¼›æˆ–è€…é€šè¿‡å…ˆåŠ è½½ä¸€å¼ æ¨¡ç³Šå›¾å†åŠ è½½é«˜æ¸…å›¾çš„æ–¹å¼ï¼ŒåŠ è½½ä¸¤å¼ å›¾ç‰‡æ¥é¿å…ç”¨æˆ·é•¿æ—¶é—´ç­‰å¾…ï¼Œå› æ­¤è¿™ç§æ–¹å¼å¯¹ç½‘ç»œæœ‰ä¸€å®šçš„è¦æ±‚ã€‚ å¤©ç©ºç›’ å¤©ç©ºç›’çš„æ€è·¯å’Œä¸Šé¢å…¨æ™¯çƒç›¸åŒï¼Œåªä¸è¿‡å°†SphereGeometryçƒå½¢æ¢æˆäº†BoxGeometryæ­£æ–¹å½¢ï¼›è´´å›¾ä¹Ÿç”±ä¸€å¼ å…¨æ™¯å›¾ï¼Œå˜æˆäº†ç›’å­å…­ä¸ªé¢çš„è´´å›¾ï¼›å…­ä¸ªé¢çš„è´´å›¾ç›¸è¾ƒäºä¸€å¼ å…¨æ™¯å›¾ï¼Œå¯ä»¥åˆ©ç”¨æµè§ˆå™¨çš„å¹¶è¡ŒåŠ è½½èƒ½åŠ›ï¼Œæé«˜åŠ è½½é€Ÿåº¦ã€‚ 1234567891011121314151617181920212223const urls = [ &quot;/images/panorama/cubemap/px.png&quot;, &quot;/images/panorama/cubemap/nx.png&quot;, &quot;/images/panorama/cubemap/py.png&quot;, &quot;/images/panorama/cubemap/ny.png&quot;, &quot;/images/panorama/cubemap/pz.png&quot;, &quot;/images/panorama/cubemap/nz.png&quot;,];const materialArr = [];const textureLoader = new TextureLoader();urls.map((item) =&gt; &#123; const material = new MeshBasicMaterial(&#123; map: textureLoader.load(item), &#125;); materialArr.push(material);&#125;);var box = new BoxGeometry(500, 500, 500);var mesh = new Mesh(box, materialArr);mesh.geometry.scale(-1, 1, 1);this.scene.add(mesh); æ•´ä½“çš„æ€è·¯å’Œä¸Šé¢ä¸¤ç§æ–¹å¼æœ‰äº›ç±»ä¼¼ï¼Œåªä¸è¿‡Meshä¼ å‚çš„æè´¨ç”±åŸæ¥çš„ä¸€ä¸ªæè´¨å˜æˆäº†æè´¨æ•°ç»„ï¼›ç„¶åè¿˜æ˜¯å°†meshå¯¹è±¡æ²¿Xè½´è¿›è¡Œç¿»è½¬ã€‚ æŸ¥çœ‹å¤©ç©ºç›’æ•ˆæœ å¯¼èˆªæ ‡ç­¾ ç¯å¢ƒæ­å»ºå¥½ä¹‹åï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æœ‰ä¸€äº›ç½‘ç«™ä¸Šï¼Œç‰©ä½“å‘¨å›´æœ‰ä¸€äº›å¯ç‚¹å‡»çš„æ‚¬æµ®æ ‡ç­¾ï¼Œæˆ–è€…é¼ æ ‡æ‚¬æµ®åæœ‰ä¸€äº›æç¤ºçš„æ–‡æ¡ˆï¼Œè¿™ç§å¯¼èˆªæ ‡ç­¾æ˜¯å¦‚ä½•æ¥å®ç°çš„å‘¢ï¼Ÿè¿™é‡Œå°±éœ€è¦ä»‹ç»ä¸€ä¸‹Threejsçš„ç²¾çµå¯¹è±¡Spriteï¼Œå®ƒæ˜¯ä¸€ä¸ªæ°¸è¿œé¢å‘ç›¸æœºçš„å¹³é¢ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨å®ƒæ¥æ˜¾ç¤ºä¸€äº›æ ‡ç­¾ï¼›æˆ‘ä»¬çœ‹ä¸‹ä»–çš„æ„é€ å‡½æ•°ï¼š 1Sprite(material: Material) è¿™é‡Œçš„materialæ˜¯SpriteMaterialçš„ä¸€ä¸ªå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯å°†æè´¨ä¼ è¿›æ¥ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“çš„ç”¨æ³• æ·»åŠ é”šç‚¹ æˆ‘ä»¬é¦–å…ˆå®šä¹‰å¥½é”šç‚¹çš„æ•°æ®ï¼Œåœ¨å“ªäº›ä½ç½®éœ€è¦æ ‡æ³¨çš„ï¼Œè¿™ä¸€æ­¥ä¹Ÿå¯ä»¥åˆ©ç”¨dat.guiä¸æ–­è°ƒæ•´XYZè½´çš„ä½ç½®ï¼š 1234567891011121314151617181920const posList = [ &#123; x: -5, y: -4, z: -14, content: &quot;åºŠ&quot;, &#125;, &#123; x: -20, y: -5, z: -9, content: &quot;æ²™å‘&quot;, &#125;, &#123; x: 10, y: -6, z: 12, content: &quot;å†°ç®±&quot;, &#125;,]; ä»ä¸Šé¢çš„æ„é€ å‡½æ•°çœ‹å‡ºSpriteçš„æ„å»ºä¸éœ€è¦å‡ ä½•å›¾å½¢ï¼Œå¦‚æœæ˜¯æ²¡æœ‰ä»»ä½•æ–‡æ¡ˆçš„ç®€å•é”šç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€å¼ pngå›¾ç‰‡è®¾ç½®ä¸ºç²¾çµæè´¨SpriteMaterialçš„è´´å›¾ï¼Œç„¶åå¾ªç¯æ„å»ºå¤šä¸ªSpriteæ·»åŠ åˆ°åœºæ™¯ä¸­å»ã€‚ 123456789const spriteMaterial = new SpriteMaterial(&#123; map: textureLoader.load(&quot;/images/icon/position.png&quot;) &#125;);posList.map((item) =&gt; &#123; const &#123; x, y, z &#125; = item; const sprite = new Sprite(spriteMaterial); sprite.position.set(x, y, z); this.scene.add(sprite);&#125;); è¿™æ ·å°±èƒ½çœ‹åˆ°å¤šä¸ªé”šç‚¹å›ºå®šæ¼‚æµ®åœ¨æŸä¸ªä½ç½®äº†ã€‚ é”šç‚¹æ–‡å­— æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°ä¸€äº›é”šç‚¹æ—è¾¹æœ‰æ–‡æ¡ˆæ ‡è¯†ï¼Œäº‹æƒ…å°±å¼€å§‹å˜å¾—å¤æ‚èµ·æ¥äº†ï¼›ç”±äºThreejsä¸­ä¸èƒ½æ·»åŠ divï¼Œå› æ­¤æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥æ¥å®ç°è¿™æ ·çš„æ•ˆæœï¼›é¦–å…ˆæ˜¯ä½¿ç”¨canvasç»˜åˆ¶æ–‡å­—ï¼Œå¹¶ä½œä¸ºçº¹ç†è®¾ç½®ä¸ºSpriteMaterialçš„mapå±æ€§ã€‚ 1234567891011121314151617181920212223const createSpriteLabel = (txt, x, y, z) =&gt; &#123; const canvas = document.createElement(&quot;canvas&quot;); canvas.setAttribute(&quot;width&quot;, &quot;286px&quot;); canvas.setAttribute(&quot;height&quot;, &quot;112px&quot;); const ctx = canvas.getContext(&quot;2d&quot;); ctx.fillStyle = &quot;#FF0000&quot;; ctx.lineWidth = 4; const textMetrics = ctx.measureText(txt); ctx.fillText(txt, (canvas.width - textMetrics.width) / 2, 55); const texture = new Texture(canvas); texture.needsUpdate = true; const spriteMaterial = new SpriteMaterial(&#123; map: texture, &#125;); const sp = new Sprite(spriteMaterial); sp.scale.set(4, 2, 1); sp.position.set(x, y, z); return sp;&#125;; æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªcanvasç”»å¸ƒï¼Œè®¾ç½®ç”»ç¬”çš„é¢œè‰²ç²—ç»†ï¼Œç„¶åç»˜åˆ¶æ–‡æ¡ˆï¼Œå°†canvasä¼ å…¥Textureï¼Œç„¶åä½œä¸ºmapå±æ€§æ„å»ºäº†SpriteMaterialã€‚ canvasçš„æ–¹å¼ä¸€èˆ¬ç”¨æ¥ç”»å›¾å½¢ç®€å•ã€å†…å®¹æ ¼å¼è¾ƒä¸ºå›ºå®šçš„Spriteæ ‡ç­¾ã€‚ å¦ä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨CSS2DRendererï¼ˆCSS 2Dæ¸²æŸ“å™¨ï¼‰ï¼Œè¿™ä¸ªç»„ä»¶å¬ç€éå¸¸é«˜æ·±ï¼Œå…¶å®æ¥è¯´å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨é¡µé¢æœ€å¤–å±‚æ’å…¥ä¸€ä¸ªdivï¼Œç„¶åå°†æˆ‘ä»¬æ‰€éœ€è¦çš„æ¸²æŸ“domèŠ‚ç‚¹æ’å…¥åˆ°è¿™ä¸ªdivä¸­ï¼Œæ¸²æŸ“æˆ‘ä»¬ç†Ÿæ‚‰çš„HTMLå…ƒç´ ï¼›å½“ç›¸æœºæ—‹è½¬æ—¶ï¼Œå®æ—¶æ›´æ–°æ¯ä¸ªdomèŠ‚ç‚¹çš„ä½ç½®å³å¯ï¼›åŒæ—¶åœºæ™¯æ”¾å¤§ç¼©å°æ—¶ï¼Œä¸ä¼šç¼©æ”¾æ ‡ç­¾çš„å¤§å°ï¼Œå¯ä»¥è§¦å‘DOMç‚¹å‡»äº‹ä»¶ï¼›æˆ‘ä»¬å¦‚æœæ‰“å¼€å¼€å‘è€…å·¥å…·æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°bodyæœ€ä¸‹é¢æœ‰ä¸€ä¸ªdivï¼ŒåµŒå¥—äº†å¤šä¸ªå­æ ‡ç­¾ã€‚ 1234import &#123; CSS2DRenderer, CSS2DObject&#125; from &quot;three/examples/jsm/renderers/CSS2DRenderer&quot;; CSS2DRendereræ˜¯Threejsæä¾›çš„æ‰©å±•åº“ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–ä»æ¸²æŸ“å™¨çš„åŒ…ä¸­å¼•å…¥CSS2DRendererå’Œå®ƒçš„æ¨¡å‹å¯¹è±¡CSS2DObjectï¼›ç”±äºè¦æ–°å»ºä¸€ä¸ªæ¸²æŸ“å™¨ï¼Œæˆ‘ä»¬å¯¹å°è£…çš„Stageç±»è¿›è¡Œæ”¹é€ ï¼Œ 123456789101112131415161718192021222324export default class Stage &#123; constructor(config) &#123; // ...å…¶ä»–ä»£ç  //æ–°å»ºCSS2DRenderer const labelRenderer = new CSS2DRenderer(); labelRenderer.setSize(window.innerWidth, window.innerHeight); labelRenderer.domElement.style.position = &quot;absolute&quot;; labelRenderer.domElement.style.top = 0; labelRenderer.domElement.style.left = 0; this.labelRenderer = labelRenderer; document.body.appendChild(labelRenderer.domElement); // å°†è½¨é“æ§åˆ¶å™¨çš„æ¸²æŸ“å™¨ä»rendereræ”¹æˆlabelRenderer this.orbitControls = new OrbitControls(this.camera, this.labelRenderer.domElement); &#125; render() &#123; this.renderer.render(this.scene, this.camera); // è¿™é‡Œè¦æ·»åŠ CSS2DRendererçš„æ¸²æŸ“ this.labelRenderer.render(this.scene, this.camera); &#125;&#125; CSS2DRendereræ¸²æŸ“å™¨å’ŒWebGLRendereræœ‰äº›ç±»ä¼¼ï¼Œä¹Ÿéƒ½æœ‰setSizeå’Œrenderæ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå®ä¾‹åŒ–çš„domElementæ·»åŠ åˆ°bodyä¸­æ¥ï¼›CSS2DRendererä¹Ÿéœ€è¦å®æ—¶æ›´æ–°ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨renderå‡½æ•°ä¸­å¯¹å…¶è¿›è¡Œæ¸²æŸ“ æˆ‘ä»¬è¿˜æ˜¯å’Œä¸Šé¢çš„Spriteé”šç‚¹ä¸€æ ·ï¼Œå¾ªç¯åˆ›å»ºdivæ ‡ç­¾ï¼Œæ·»åŠ åˆ°åœºæ™¯sceneä¸­ï¼› 1234567891011121314151617181920function createLableObj(text, x, y, z) &#123; let laberDiv = document.createElement(&quot;div&quot;); //åˆ›å»ºdivå®¹å™¨ laberDiv.className = &quot;laber_name&quot;; laberDiv.innerHTML = text; laberDiv.style.color = &quot;#F4EA2A&quot;; laberDiv.style.fontSize = &quot;30px&quot;; laberDiv.style.background = &quot;url(/images/icon/position.png) no-repeat&quot;; laberDiv.style.cursor = &quot;pointer&quot;; let pointLabel = new CSS2DObject(laberDiv); pointLabel.position.set(x, y, z); return pointLabel;&#125;posList.map((item) =&gt; &#123; const &#123; x, y, z, content &#125; = item; const label = createLableObj(content, x, y, z); this.scene.add(label);&#125;); æŸ¥çœ‹æ ‡ç­¾æ•ˆæœ æˆ‘ä»¬å‘ç°ï¼Œä¸Šé¢åˆ›å»ºå®Œdivåï¼Œé€šè¿‡divæ ‡ç­¾åˆ›å»ºäº†CSS2DObjectçš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åè®¾ç½®XYZè½´åæ ‡ï¼›è¿™ä¸ªå¯¹è±¡çš„ä½œç”¨å°±æ˜¯å°†Threejsä¸­çš„åæ ‡ä¸å±å¹•çš„åæ ‡è¿›è¡Œè½¬æ¢ï¼Œè¿›è¡Œå®æ—¶çš„æ¸²æŸ“ã€‚ é”šç‚¹è§¦å‘äº‹ä»¶ é”šç‚¹åŠ ä¸Šåï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œè§¦å‘äº‹ä»¶çš„ç»‘å®šï¼Œå¦‚æœä½¿ç”¨CSS2DRendereræ¸²æŸ“å™¨çš„æ–¹å¼ï¼Œç”±äºæ˜¯domå…ƒç´ ï¼Œæˆ‘ä»¬ç›´æ¥ç»™å…ƒç´ ç»‘å®šåŸç”Ÿäº‹ä»¶å³å¯ï¼š 1234567891011// åˆ›å»ºdivå®¹å™¨const laberDiv = document.createElement(&quot;div&quot;);// ç»‘å®šç‚¹å‡»äº‹ä»¶laberDiv.addEventListener(&quot;click&quot;, (ev) =&gt; &#123; console.log(&quot;ev&quot;, ev);&#125;);// ç»‘å®šæ‚¬æµ®äº‹ä»¶laberDiv.addEventListener(&quot;mouseover&quot;, (ev) =&gt; &#123; console.log(&quot;ev&quot;, ev);&#125;);const pointLabel = new CSS2DObject(laberDiv); æˆ‘ä»¬å¯ä»¥è¿›è¡Œåç»­çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ¯”å¦‚åœºæ™¯åˆ‡æ¢äº†ï¼Œæˆ–è€…å¼¹æ¡†å±•ç¤ºè¯¦ç»†ä¿¡æ¯ç­‰ï¼›è€Œä½¿ç”¨Spriteï¼Œç”±äºæ‰€æœ‰çš„ç‰©ä½“éƒ½åœ¨Threejsçš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ä¸èƒ½ç®€å•çš„åˆ©ç”¨ç»‘å®šç‚¹å‡»äº‹ä»¶æ¥è§¦å‘ï¼ŒSpriteä¹Ÿæ²¡æœ‰addEventListeneräº‹ä»¶ã€‚ å› æ­¤ç”¨åˆ°ä¸€ä¸ªå…‰çº¿æŠ•å°„ç±»ï¼šRaycasterï¼Œè¿™ä¸ªç±»ç”¨äºè¿›è¡Œé¼ æ ‡æ‹¾å–ï¼Œä¹Ÿå°±æ˜¯åœ¨ä¸‰ç»´ç©ºé—´ä¸­è®¡ç®—å‡ºé¼ æ ‡ç§»åŠ¨æˆ–ç‚¹å‡»æ—¶ï¼Œåˆ’è¿‡äº†ä»€ä¹ˆç‰©ä½“ã€‚ å®ƒçš„åŸç†æ˜¯ä»é¼ æ ‡å¤„å‘å°„ä¸€æ¡å°„çº¿ï¼Œç©¿è¿‡åœºæ™¯ä¸­çš„ç‰©ä½“ï¼Œé€šè¿‡è®¡ç®—ï¼Œæ‰¾å‡ºä¸å°„çº¿ç›¸äº¤çš„ç‰©ä½“ï¼Œå› æ­¤è¿™ç§æ–¹æ³•ä¹Ÿå«å°„çº¿è¿½è¸ªæ³•ï¼›æˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„ä¸€ä¸ªç”¨æ³•ï¼Œ 12345678910class Panorama extends Stage &#123; constructor() &#123; this.raycaster = new Raycaster(); this.mouse = new Vector2(); this.list = []; posList.map((item) =&gt; &#123; this.list.push(sprite); &#125;) &#125;&#125; æˆ‘ä»¬å®ä¾‹åŒ–Raycasterï¼Œæ–°å»ºä¸€ä¸ªäºŒç»´çš„ç‚¹mouseï¼Œè¿™ä¸ªç‚¹ä¸‹é¢ä¼šç”¨æ¥å­˜å‚¨é¼ æ ‡ç§»åŠ¨çš„äºŒç»´åæ ‡ï¼›ç„¶åå°†Spriteæ”¾åˆ°æ•°ç»„listä¸­ï¼Œç”¨äºRaycasteræ£€æµ‹ç…§å°„åˆ°äº†åœºæ™¯ä¸­çš„å“ªäº›ç‰©ä½“ï¼›å½“ç„¶æˆ‘ä»¬ä¸‹é¢ä¹Ÿèƒ½ç…§å°„æ•´ä¸ªåœºæ™¯scene.childrenä¸‹çš„æ‰€æœ‰ç‰©ä½“ï¼Œä½†æ˜¯æœ‰ä¸€äº›ç‰©ä½“ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œéœ€è¦é¢å¤–çš„åˆ¤æ–­ï¼Œå› æ­¤å¯ä»¥å°†éœ€è¦ç…§å°„ç‰©ä½“å­˜åˆ°æ•°ç»„ä¸­æ¥ã€‚ 1234567891011121314151617181920212223242526class Panorama extends Stage &#123; constructor() &#123; this._pointerMove = this.pointerMove.bind(this); // é¼ æ ‡ç§»åŠ¨ç»‘å®šäº‹ä»¶ this.renderer.domElement.addEventListener(&quot;mousemove&quot;, this._pointerMove); &#125; pointerMove(event) &#123; // å°†é¼ æ ‡ä½ç½®å½’ä¸€åŒ–ä¸ºè®¾å¤‡åæ ‡ã€‚x å’Œ y æ–¹å‘çš„å–å€¼èŒƒå›´æ˜¯ (-1 to +1) this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1; this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1; // é€šè¿‡æ‘„åƒæœºå’Œé¼ æ ‡ä½ç½®æ›´æ–°å°„çº¿ this.raycaster.setFromCamera(this.mouse, this.camera); const intersects = this.raycaster.intersectObjects(this.list); if (intersects.length) &#123; // åç»­ä¸šåŠ¡é€»è¾‘ console.log(&quot;intersects&quot;, intersects); &#125; &#125; beforeDestroy() &#123; this.renderer.domElement.removeEventListener(&quot;mousemove&quot;, this._pointerMove); &#125;&#125; æˆ‘ä»¬è¯¦ç»†çœ‹ä¸‹è¿™é‡Œçš„é€»è¾‘ï¼Œé¦–å…ˆé€šè¿‡eventæ¥è®¡ç®—mouseçš„XYè½´åæ ‡ï¼Œç”±äºsetFromCameraéœ€è¦å½’ä¸€åŒ–çš„åæ ‡å€¼ï¼Œå› æ­¤æˆ‘ä»¬è®¡ç®—æ—¶å°†å…¶å¤„ç†ä¸º[-1, 1]èŒƒå›´å†…çš„å€¼ã€‚setFromCameraæ–¹æ³•é€šè¿‡æ‘„åƒæœºå’Œé¼ æ ‡ä½ç½®æ›´æ–°å°„çº¿ï¼Œæ¥æ”¶mouseå’Œcameraå¯¹è±¡ï¼›æ›´æ–°å°„çº¿åå°±å¯ä»¥ä½¿ç”¨intersectObjectå‡½æ•°æ¥æ‹¾å–å¯¹è±¡äº†ï¼Œæ¥æ”¶çš„intersectsæ•°ç»„å°±æ˜¯æ‹¾å–åˆ°çš„Meshåˆé›†ã€‚ æˆ‘ä»¬å‘ç°Spriteå’ŒCSS2DRendererä¸¤ç§æ–¹å¼å„æœ‰åˆ©å¼Šï¼ŒSpriteè™½ç„¶æ·»åŠ å…ƒç´ æ–¹ä¾¿ï¼Œä½†æ˜¯canvasç»˜åˆ¶å›¾å½¢æ¯”è¾ƒéº»çƒ¦ï¼ŒåŒæ—¶è§¦å‘äº‹ä»¶ä¹Ÿç¹çï¼›è€ŒCSS2DRendereræ·»åŠ å…ƒç´ è¾ƒä¸ºå¤æ‚ï¼Œéœ€è¦ç”¨åˆ°ä¸€ç³»åˆ—åŸç”Ÿå±æ€§ï¼Œä½†æ˜¯è§¦å‘äº‹ä»¶æ–¹ä¾¿ï¼Œå…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œè¿˜éœ€è¦ç»“åˆä¸šåŠ¡åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹å¼ã€‚ åœºæ™¯åŠ¨ç”» æˆ‘ä»¬æœ‰æ—¶å€™ä¼šçœ‹åˆ°è¿™æ ·çš„ä¿¯è§†æ•ˆæœçš„åœºæ™¯åŠ¨ç”»ï¼Œé‚£ä¹ˆè¿™ç§æ•ˆæœæ˜¯å¦‚ä½•æ¥å®ç°çš„å‘¢ï¼Ÿ é¦–å…ˆè¿™ç§æ•ˆæœå°±éœ€è¦ç”¨åˆ°å…¨æ™¯çƒçš„SphereGeometryçƒå½¢ï¼Œç„¶åå°†æ‘„åƒæœºçš„ä½ç½®æ”¾åˆ°çƒä½“çš„æœ€é¡¶éƒ¨ã€‚ 1234567891011121314151617181920212223242526class Panorama extends Stage &#123; constructor() &#123; super(&#123; // è§†è§’ fov: 100, near: 1, far: 10000, // åˆå§‹ä½ç½® initPosition: new Vector3(0, 500, 0), clearColor: new Color(0x000000), &#125;); // çƒä½“åŠå¾„ä¸º500 const sphereGeometry = new SphereGeometry(500, 50, 50); sphereGeometry.scale.x = -1; const sphereMaterial = new MeshBasicMaterial(&#123; map: new TextureLoader().load(&quot;/images/panorama/simons_town_harbour.jpg&quot;), &#125;); const sphere = new Mesh(sphereGeometry, sphereMaterial); this.sphere = sphere; this.scene.add(sphere); &#125;&#125; æˆ‘ä»¬è¿™é‡Œå°†initPositionï¼Œä¹Ÿå°±æ˜¯æ‘„åƒæœºçš„åˆå§‹ä½ç½®ï¼Œæ”¾åˆ°äº†Yè½´500çš„ä½ç½®ï¼Œç”±äºçƒä½“çš„åŠå¾„ä¹Ÿæ˜¯500ï¼Œå› æ­¤å°±ä½äºçƒä½“å†…éƒ¨çš„æœ€é¡¶ä¸Šï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åªéœ€è¦å°†æ‘„åƒæœºçš„ä½ç½®ç¼“æ…¢ä¸‹ç§»å°±å¯ä»¥ã€‚ è¿™é‡Œå¼•å…¥ä¸€ä¸ªè¡¥é—´åŠ¨ç”»åº“tween.jsï¼Œè®©æˆ‘ä»¬å¯ä»¥ç”¨å¹³æ»‘çš„æ–¹å¼æ›´æ”¹å¯¹è±¡çš„å±æ€§ï¼Œåªéœ€è¦å‘Šè¯‰å®ƒåˆå§‹å€¼ã€æœ€ç»ˆå€¼ä»¥åŠæ‰€éœ€è¦èŠ±è´¹çš„æ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œtween.jsä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è®¡ç®—å‡ºæ¯ä¸ªæ—¶é—´ç‚¹ï¼Œåº”è¯¥è®¾ç½®ä¸ºä»€ä¹ˆæ ·çš„å€¼ã€‚ 123456789101112131415161718192021222324252627import Tween from &quot;@tweenjs/tween.js&quot;;class Panorama extends Stage &#123; constructor() &#123; setTimeout(() =&gt; &#123; this.animateCamera(); &#125;, 1.5 * 1000); &#125; animateCamera() &#123; // åˆ›å»ºä¸€ä¸ªåˆå§‹åŒ–ä½ç½® new Tween.Tween(&#123; y: 500, &#125;) // ç§»åŠ¨ç»“æŸçš„ä½ç½® .to(&#123; y: 0, &#125;, 4000) .onUpdate((pos) =&gt; &#123; // æ¯æ¬¡æ›´æ–° this.camera.position.y = pos.y; this.camera.updateProjectionMatrix(); &#125;) .start(); &#125; beforeRender() &#123; Tween.update(); &#125;&#125; å®ƒçš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œè¿™é‡Œé€šè¿‡é“¾å¼è°ƒç”¨ï¼Œåˆ›å»ºä¸€ä¸ªTweenå¯¹è±¡ï¼Œè®¾ç½®yçš„ç»“æŸä½ç½®å’ŒåŠ¨ç”»æ—¶é—´4000æ¯«ç§’ï¼›åœ¨onUpdateå‡½æ•°ä¸­ï¼Œè®¾ç½®æ¯æ¬¡æ›´æ–°åçš„yå®æ—¶æ•°å€¼ï¼Œæœ€åè°ƒç”¨startå‡½æ•°æ¿€æ´»tweenã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿˜è¦åœ¨renderå‡½æ•°ä¸­è°ƒç”¨Tween.updateæ›´æ–°ã€‚ 12345678910111213141516171819202122new Tween.Tween(&#123; y: 500, fov: 100, z: 0, &#125;) .to( &#123; y: 0, fov: 70, z: -200, &#125;, 4000, ) .onUpdate((pos) =&gt; &#123; this.camera.position.y = pos.y; this.camera.updateProjectionMatrix(); this.camera.fov = pos.fov; this.camera.lookAt(new Vector3(0, 0, pos.z)); // é•œå¤´ä¸‹é™æ—¶æ—‹è½¬ this.sphere.rotation.y += 0.006; &#125;) .start(); å½“ç„¶è¿™æ ·çš„é•œå¤´æœ€åä¼šæ¯”è¾ƒç”Ÿç¡¬ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨æ‘„åƒå¤´çš„lookAtï¼Œå½“é•œå¤´ä¸‹é™æ—¶ï¼Œé€æ¸çœ‹å‘è¿œæ–¹ï¼›åˆå§‹åŒ–ä¹Ÿè®¾ç½®ä¸€ä¸ªå¤§çš„å¹¿è§’fovä¸º100ï¼Œå½“é•œå¤´ä¸‹é™æ—¶ï¼Œç¼©å°fovçš„å€¼ï¼Œè¿™æ ·æ•ˆæœè¿‡æ¸¡çš„æ›´åŠ è‡ªç„¶ã€‚ æŸ¥çœ‹åœºæ™¯åŠ¨ç”»æ•ˆæœ","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"},{"name":"å›¾å½¢åŒ–","slug":"Graphical","permalink":"https://xieyufei.com/tags/Graphical/"},{"name":"Threejs","slug":"Threejs","permalink":"https://xieyufei.com/tags/Threejs/"}]},{"title":"GSAPå®æˆ˜ä»¿è£è€€å®˜ç½‘çš„é¡µé¢æ»šåŠ¨æ•ˆæœ","date":"2023-04-14T12:00:00.000Z","path":"2023/04/14/GSAP-Practise.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å¯¹GSAPçš„ç”¨æ³•æœ‰äº†ä¸€ä¸ªç®€å•çš„äº†è§£ï¼Œæœ¬æ–‡æˆ‘ä»¬å°±ç»“åˆGSAPçš„ç”¨æ³•æ•™ç¨‹ï¼Œä»¿ç…§è£è€€å®˜ç½‘MagicOSçš„é¡µé¢ï¼Œå®ç°ä¸€ä¸ªé…·ç‚«çš„ç½‘é¡µæ•ˆæœã€‚ æ•´ä½“æ ·å¼å¸ƒå±€ æˆ‘ä»¬å…ˆæ¥æ¬£èµä¸€ä¸‹é¡µé¢çš„æ•ˆæœï¼Œæ¯ä¸€å¹•å¦‚åŒç”µå½±å¼€åœºä¸€æ ·ç¼“ç¼“çš„å‘ˆç°æ•ˆæœï¼Œå¤§å®¶å¯ä»¥ç‚¹å‡»è¿™ä¸ªé“¾æ¥æ¥æ¬£èµæ•ˆæœï¼š åœ¨æ•´ä½“å¸ƒå±€ä¸Šï¼Œæˆ‘ä»¬å‘ç°ï¼Œå®ƒæ˜¯é€šè¿‡å¤šä¸ªsectionæ¥åˆ’åˆ†æ¯ä¸€å±çš„ï¼›è¿™é‡Œçš„ä¸€å±ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåŠ¨ç”»æ•ˆæœçš„åˆ’åˆ†ï¼Œæ¯ä¸€å±çš„é«˜åº¦å¤§è‡´ç­‰äº100vhã€‚ å¤§å¤šæ•°çš„sectionå†åµŒå¥—ä¸€å±‚.section-wrapperæ¥åŒ…è£¹å†…éƒ¨çš„å…ƒç´ ï¼ŒåŒæ—¶ä½¿ç”¨margin: 0 auto;æ¥è®©wrapperå·¦å³å±…ä¸­ï¼š 1234567891011&lt;div class=&quot;main magic-os&quot;&gt; &lt;!-- ç¬¬ä¸€å± --&gt; &lt;section class=&quot;section-hero section-dark&quot;&gt; &lt;div class=&quot;section-wrapper&quot;&gt;&lt;/div&gt; &lt;/section&gt; &lt;!-- ç¬¬ä¸‰å± --&gt; &lt;section class=&quot;section-magic&quot;&gt; &lt;div class=&quot;section-wrapper&quot;&gt;&lt;/div&gt; &lt;/section&gt; &lt;!-- çœç•¥å…¶ä»–å±... --&gt;&lt;/div&gt; æ ·å¼ä¸Šï¼Œå°†å¾ˆå¤šå±å…¬å…±çš„ã€é€šç”¨æ ·å¼æŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ°.magic-osä¸­ï¼Œæ¯”å¦‚ç»™sectionæ·»åŠ é»‘è‰²çš„èƒŒæ™¯.section-darkï¼Œ.section-headlineæ˜¯ä¸»æ ‡é¢˜ï¼Œ.section-introæ˜¯ä»‹ç»æ€§çš„æ–‡å­—ï¼Œ.section-linkæ˜¯è·³è½¬é“¾æ¥ç­‰ç­‰ï¼›ä¸åŒå±æœ‰ç›¸åŒçš„å¸ƒå±€å’Œå‘ˆç°æ•ˆæœï¼Œæ ·å¼ä¸Šä¹Ÿå¯ä»¥é€šç”¨ï¼Œæ¯”å¦‚.section-startå‘ˆç°svgç”»å›¾å’Œ.section-card-viewå‘ˆç°å¡ç‰‡å¼å¸ƒå±€ç­‰ç­‰ã€‚ 123456789101112131415161718.magic-os &#123; background-color: #fff; section &#123; position: relative; z-index: 1; background-color: #fff; &#125; .section-dark &#123; color: #fff; background-color: #000; &#125;&#125;// ç¬¬ä¸€å±.section-hero &#123;&#125;// ç¬¬ä¸‰å±.section-magic &#123;&#125; è€Œæ¯ä¸€å±ç‰¹æœ‰çš„æ ·å¼åˆ™åœ¨ä¸‹é¢ç‹¬ç«‹å‡ºæ¥ã€‚ é¦–å±é€‚é… é¦–å±æ˜¯æ•´ä¸ªç½‘ç«™çš„é—¨é¢ï¼Œä½“ç°å‡ºæ•´ä¸ªç½‘ç«™çš„ç‰¹è‰²ä¸é£æ ¼ï¼›æˆ‘ä»¬çœ‹åˆ°é¦–å±çš„è®¾è®¡è¿˜æ˜¯æ¯”è¾ƒç®€æ´æ˜äº†çš„ï¼Œä¸€ä¸ªlogoã€ä¸»æ ‡é¢˜å’Œsloganï¼›éšç€å±å¹•å®½åº¦ä¸æ–­çš„ç¼©æ”¾ï¼Œæ–‡å­—çš„å®½åº¦å’Œå›¾ç‰‡çš„å¤§å°ä¹Ÿåœ¨éšä¹‹ç¼“æ…¢çš„ç­‰æ¯”ç¼©æ”¾ï¼Œé€‚é…äº†å„å°ºå¯¸çš„å±å¹•ã€‚ ç¼“æ…¢çš„æ•ˆæœä¸»è¦æ˜¯é€šè¿‡transitionå±æ€§æ¥å®ç°çš„ï¼Œå¸¸è§çš„ç”¨æ³•æ˜¯ï¼štransition: 1sè¡¨ç¤ºè¿‡æ¸¡æ•ˆæœéœ€è¦1ç§’æ¥å®Œæˆï¼›è¿™é‡Œæˆ‘ä»¬å‘ç°åé¢è¿˜å¸¦æœ‰ä¸€ä¸ªæ—¶é—´å€¼ï¼štransition: 1s 0.5sï¼›æˆ‘ä»¬å›é¡¾ä¸€ä¸‹transitionçš„è¯­æ³•ï¼š 1transition: property duration timing-function delay; ä¸éš¾çŒœå‡ºæ¥1sè¡¨ç¤ºå®Œæˆæ—¶é—´durationï¼Œ0.5sè¡¨ç¤ºå»¶è¿Ÿæ—¶é—´delayï¼›å› æ­¤ä¸Šé¢çš„å°±ç›¸å½“äºä¸‹é¢çš„çœç•¥å†™æ³•ï¼š 1transition: all 1s ease 0.5s ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰é‡åˆ°å¤šä¸ªå±æ€§éœ€è¦ä½¿ç”¨transitionçš„æƒ…å½¢ï¼Œç¬”è€…ä¸€èˆ¬ä¼šå·æ‡’ï¼Œä½¿ç”¨allè®©å®ƒä»¬çš„å®Œæˆæ—¶é—´å·®ä¸å¤šï¼›ä½†æ˜¯å¦‚æœå‡ ä¸ªå±æ€§çš„å®Œæˆæ—¶é—´å·®è·è¾ƒå¤§ï¼Œå°±éœ€è¦ä½¿ç”¨é€—å·å°†å¤šä¸ªå±æ€§å¤åˆä½¿ç”¨ï¼š 12345678910111213.box &#123; width: 100px; height: 100px; border: 3px solid black; margin: 30px; cursor: pointer; transition: width 0.5s, background-color 1s 0.5s, transform 2s; &amp;:hover &#123; width: 200px; background-color: red; transform: translateY(100px); &#125;&#125; é€šè¿‡transitionå±æ€§æˆ‘ä»¬èƒ½å¤Ÿå®ç°å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„åŠ¨ç”»æ•ˆæœã€‚ æˆ‘ä»¬å‘ç°åœ¨.section-wrapperå¤–å±‚è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ç±»åï¼Œå°±æ˜¯.aspect-ratioï¼Œè¿™å°±æ¶‰åŠåˆ°äº†å¦‚ä½•é€šè¿‡CSSæ¥å®ç°å›ºå®šå®½é«˜æ¯”ã€‚ CSSå®ç°å›ºå®šå®½é«˜æ¯” é¦–å…ˆï¼Œå¯æ›¿æ¢å…ƒç´ ï¼ˆreplaced elementï¼‰å®ç°å›ºå®šå®½é«˜æ¯”å°±æ¯”è¾ƒç®€å•äº†ï¼Œå’Œå…¶ä»–å…ƒç´ ä¸åŒï¼Œå®ƒä»¬æœ¬èº«æœ‰åƒç´ å®½åº¦å’Œé«˜åº¦çš„æ¦‚å¿µï¼›è¿™é‡Œè¯´åˆ°äº†ä¸€ä¸ªæ¦‚å¿µï¼šå¯æ›¿æ¢å…ƒç´ ï¼Œå…¶å®å°±æ˜¯æµè§ˆå™¨æ ¹æ®å…ƒç´ çš„æ ‡ç­¾å’Œå±æ€§ï¼Œæ¥å†³å®šå…ƒç´ çš„å…·ä½“æ˜¾ç¤ºå†…å®¹ï¼›å¯æ›¿æ¢å…ƒç´ çš„å†…å®¹ä¸å—å½“å‰æ–‡æ¡£çš„æ ·å¼çš„å½±å“ã€‚ CSSå¯ä»¥å½±å“å¯æ›¿æ¢å…ƒç´ çš„ä½ç½®ï¼Œä½†ä¸ä¼šå½±å“åˆ°å¯æ›¿æ¢å…ƒç´ è‡ªèº«çš„å†…å®¹ æ¯”å¦‚iframeä¹Ÿæ˜¯å¯æ›¿æ¢å…ƒç´ ï¼Œå¯èƒ½æœ‰è‡ªå·±çš„æ ·å¼è¡¨ï¼ŒCSSä¸èƒ½å½±å“å…¶å†…éƒ¨çš„æ ·å¼ï¼›å¸¸è§çš„å¯æ›¿æ¢å…ƒç´ æœ‰iframeã€videoã€imgã€embedï¼›ä¸ä¹‹ç›¸å¯¹åº”çš„å°±æ˜¯ä¸å¯æ›¿æ¢å…ƒç´ äº†ï¼Œå®ƒä»¬å†…å®¹å¯ä»¥å—CSSæ¸²æŸ“æ§åˆ¶ï¼›æˆ‘ä»¬å¸¸è§çš„divã€pã€spanç­‰å¤§å¤šæ•°éƒ½æ˜¯ä¸å¯æ›¿æ¢å…ƒç´ ã€‚ æˆ‘ä»¬å°±æ¥çœ‹ä¸‹imgå›ºå®šå®½é«˜æ¯”ï¼Œåªéœ€è¦è®¾ç½®widthæˆ–è€…heightä¸ºä¸€ä¸ªå…·ä½“å€¼ï¼Œå¦ä¸€ä¸ªå±æ€§è®¾ç½®ä¸ºautoå³å¯ï¼š 12345678910111213141516&lt;template&gt; &lt;div class=&quot;wrap&quot;&gt; &lt;img src=&quot;./images/1.jpg&quot; class=&quot;img&quot; /&gt; &lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot;&gt;.wrap &#123; position: relative; width: 50vw; margin: 0 auto; .img &#123; width: 100%; height: auto; &#125;&#125;&lt;/style&gt; è™½ç„¶ä¸Šé¢çš„æ–¹å¼å®ç°äº†å¯æ›¿æ¢å…ƒç´ çš„å›ºå®šå®½é«˜æ¯”ï¼Œä½†æ˜¯ä¸é€‚ç”¨äºdivã€spanç­‰ä¸å¯æ›¿æ¢å…ƒç´ ï¼Œå› ä¸ºå®ƒä»¬æœ¬èº«æ˜¯æ²¡æœ‰å°ºå¯¸çš„ï¼Œé»˜è®¤çš„é«˜åº¦éƒ½æ˜¯0ã€‚ å¯¹äºä¸å¯æ›¿æ¢å…ƒç´ ï¼Œæˆ‘ä»¬èƒ½æƒ³åˆ°ä¸€ç§æ–¹å¼æ˜¯é€šè¿‡jsæ¥å®ç°ï¼Œé¡µé¢åŠ è½½æ—¶è·å–å®½åº¦ï¼Œæ ¹æ®å®½é«˜æ¯”rateè®¡ç®—å‡ºé«˜åº¦ç„¶åèµ‹å€¼styleå±æ€§å³å¯ï¼›åˆ«å¿˜äº†ï¼Œè¿˜éœ€è¦ç›‘å¬resizeï¼Œè¿™æ ·çš„æ–¹å¼ä¹Ÿèƒ½å®ç°ã€‚ å¦ä¸€ç§å°±æ˜¯æˆ‘ä»¬ä¸‹é¢ä»‹ç»çš„çº¯CSSçš„å®ç°æ–¹å¼äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨paddingæ¥æ’‘å¤§divçš„é«˜åº¦ï¼š 123456789101112131415161718&lt;template&gt; &lt;div class=&quot;wrap&quot;&gt; &lt;div class=&quot;cont&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot;&gt;.wrap &#123; position: relative; width: 50vw; margin: 0 auto; .cont &#123; background-color: black; height: 0; padding: 0; padding-bottom: 75%; &#125;&#125;&lt;/style&gt; æˆ‘ä»¬çœ‹åˆ°divå…ƒç´ çš„å®½é«˜æ¯”ä¹Ÿæ˜¯å›ºå®šçš„äº†ï¼Œå¤§è‡´ç›¸å½“äº4/3ï¼Œä¹Ÿå°±æ˜¯75%ã€‚ å¾ˆå¤šå°ä¼™ä¼´è‚¯å®šä¼šå¥½å¥‡ï¼Œä¸ºä»€ä¹ˆåŠ äº†paddingå°±èƒ½å®ç°è¿™æ ·çš„æ•ˆæœï¼›æˆ‘ä»¬ä»mdnä¸Šæ¥æ‰¾ç­”æ¡ˆï¼Œçœ‹ä¸‹mdnå¯¹äºpaddingå±æ€§çš„è§£é‡Šï¼Œå½“å–ç™¾åˆ†æ¯”å€¼çš„æ—¶å€™ï¼Œæ˜¯ç›¸å½“äºåŒ…å«å—çš„å®½åº¦æ¥è®¡ç®—çš„ï¼š é€šè¿‡è¿™ç§æ–¹å¼ï¼Œdivçš„é«˜åº¦å®é™…ä¸Šæ˜¯è¢«paddingç»™æ’‘å¼€çš„ï¼›æˆ‘ä»¬å¯ä»¥å°†ä¸Šé¢çš„æ ·å¼æŠ½ç¦»æˆä¸€ä¸ªé€šç”¨çš„æ ·å¼.aspect-ratioï¼›åœ¨éœ€è¦ç”¨åˆ°å›ºå®šå®½é«˜æ¯”çš„åœ°æ–¹ç›´æ¥ä½¿ç”¨ç±»åå³å¯ï¼Œç»™wrapå…ƒç´ è®¾ç½®ä¸€ä¸ªpadding-bottomæ ·å¼ã€‚ 12345678910111213141516171819202122232425262728293031323334&lt;template&gt; &lt;div class=&quot;wrap aspect-ratio&quot;&gt; &lt;div class=&quot;cont&quot;&gt;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot;&gt;// æŠ½ç¦»å‡ºæ¥çš„å…¬å…±æ ·å¼.aspect-ratio &#123; position: relative; &amp;::before &#123; display: block; content: &quot;&quot;; &#125; &amp; &gt; :first-child &#123; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &#125;&#125;// ä½¿ç”¨æ—¶ç»™çˆ¶çº§beforeåŠ paddingæ§åˆ¶å®½é«˜æ¯”.wrap &#123; position: relative; width: 50vw; margin: 0 auto; &amp;::before &#123; padding-bottom: 75%; &#125;&#125;.cont &#123; background-color: red;&#125;&lt;/style&gt; è¿™æ ·wrapç›’å­å°±è¢«beforeå…ƒç´ æ’‘å¼€äº†ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨é‡Œé¢æ”¾å…¥å†…å®¹ï¼Œè¿˜éœ€è¦å°†divå†…éƒ¨å…ƒç´ ä½¿ç”¨ç»å¯¹å®šä½å……æ»¡æ•´ä¸ªå†…å®¹ï¼›è¿™ç§æ–¹å¼è™½ç„¶èƒ½å¤Ÿå®ç°ï¼Œä½†æ˜¯åªèƒ½é«˜åº¦éšç€å®½åº¦æ”¹å˜è€Œæ”¹å˜ï¼Œç¼ºç‚¹æ˜¯å¹¶ä¸èƒ½åè¿‡æ¥ï¼Œå®½åº¦éšç€é«˜åº¦æ”¹å˜ã€‚ W3Cæå‡ºä¸€ä¸ªä¿æŒçºµæ¨ªæ¯”çš„è§„èŒƒå±æ€§ï¼šaspect-ratioï¼Œæˆ‘ä»¬çœ‹åˆ°ç›®å‰å¤§éƒ¨åˆ†ä¸»æµçš„æµè§ˆå™¨ä¹Ÿå·²ç»æ”¯æŒäº†ï¼Œæ”¯æŒç‡å·²ç»æœ‰90%ï¼›ä½†æ˜¯IEè¿˜æ˜¯å…¨ç‰ˆæœ¬ä¸æ”¯æŒï¼Œå¦‚æœä½ ä¸éœ€è¦è€ƒè™‘æ”¯æŒIEï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨è¯¥å±æ€§ã€‚ é‚£ä¹ˆaspect-ratioå¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿæˆ‘ä»¬å°±ä¸éœ€è¦åƒä¸Šé¢çš„paddingé‚£æ ·æ¥å¥—å¨ƒäº†ï¼Œåªéœ€è¦åœ¨CSSæ·»åŠ ä¸€è¡Œä»£ç ï¼š 12345678910111213&lt;template&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot;&gt;.box &#123; position: relative; width: 50vw; margin: 0 auto; // ç›´æ¥æ·»åŠ å®½é«˜æ¯” aspect-ratio: 4 / 3; background-color: red;&#125;&lt;/style&gt; ç¬¬äºŒå±ä¹Ÿæ˜¯ä½¿ç”¨.aspect-ratioæ¥å®ç°è§†é¢‘å…ƒç´ å®½é«˜çš„å›ºå®šæ¯”ä¾‹ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ æ»šåŠ¨æ¸æ˜¾ æˆ‘ä»¬å¾€ä¸‹ç»§ç»­çœ‹ï¼Œç¬¬ä¸‰å±æ˜¯æ»šåŠ¨æ¸æ˜¾çš„æ•ˆæœï¼Œè¿™é‡Œå°±ç”¨åˆ°äº†GSAPçš„æ»šåŠ¨è§¦å‘ï¼Œæˆ‘ä»¬å…ˆæ¬£èµä¸€ä¸‹é¡µé¢çš„æ•ˆæœï¼š è¿™ä¸€å±çš„é¡µé¢å¸ƒå±€ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸€ä¸ªsection-headlineæ ‡é¢˜ï¼Œsection-contentå†…å®¹åŒ…è£¹å››ä¸ªsection-itemæ¨¡å—å±•ç¤ºã€‚ 123456789101112131415161718&lt;section class=&quot;section-magic&quot;&gt; &lt;div class=&quot;section-wrapper&quot;&gt; &lt;h2 class=&quot;section-headline fade-copy fade-trigger&quot;&gt;4å¤§æŠ€æœ¯åŠ æŒ å…±ç­‘æ–°ä½“éªŒ&lt;/h2&gt; &lt;div class=&quot;section-content fade-copy fade-trigger&quot;&gt; &lt;div class=&quot;section-item&quot;&gt; &lt;img class=&quot;section-icon&quot; src=&quot;./images/icon-magic-ring.svg&quot; alt=&quot;&quot; /&gt; &lt;h3 class=&quot;section-headline-reduced&quot;&gt;MagicRing ä¿¡ä»»ç¯&lt;/h3&gt; &lt;p class=&quot;section-intro&quot;&gt;è·¨ç³»ç»Ÿå¯ä¿¡äº’è”&lt;/p&gt; &lt;/div&gt; &lt;div class=&quot;section-item&quot;&gt; &lt;img class=&quot;section-icon&quot; src=&quot;./images/icon-magic-ring.svg&quot; alt=&quot;&quot; /&gt; &lt;h3 class=&quot;section-headline-reduced&quot;&gt;Magic Live æ™ºæ…§å¼•æ“&lt;/h3&gt; &lt;p class=&quot;section-intro&quot;&gt;å¹³å°çº§AIèƒ½åŠ›&lt;/p&gt; &lt;/div&gt; &lt;!-- çœç•¥å…¶ä»–... --&gt; &lt;/div&gt; &lt;/div&gt;&lt;/section&gt; æˆ‘ä»¬å‘ç°ï¼Œè¿™é‡Œsection-headlineæ ‡é¢˜å’Œsection-contentå†…å®¹éƒ½åŠ äº†ä¸¤ä¸ªç‰¹æ®Šçš„æ ·å¼fade-copyå’Œfade-triggerï¼Œfade-copyçš„æ ·å¼æ¯”è¾ƒç®€å•ï¼Œåˆå§‹åŒ–é€šè¿‡opacity: 0è¿›è¡Œéšè—ï¼ŒåŒæ—¶ä½¿ç”¨transformè®©å®ƒåœ¨åŸå§‹ä½ç½®Yè½´åä¸‹æ–¹ï¼›è§¦å‘æ—¶ï¼Œå†åŠ ä¸Šactiveæ ·å¼å°±å¯ä»¥å®ç°ä»åº•éƒ¨æ»‘åŠ¨ä¸Šæ¥ï¼Œå®ç°æ¸æ˜¾çš„æ•ˆæœã€‚ 123456789.fade-copy &#123; transition: opacity 0.5s, transform 0.5s; transform: translateY(50px); opacity: 0; &amp;.active &#123; transform: translateY(0px); opacity: 1; &#125;&#125; CSSçš„æ ·å¼å®ç°äº†ï¼Œé‚£ä¹ˆæœ€æœ€æœ€å…³é”®çš„é—®é¢˜æ¥äº†ï¼Œå¦‚ä½•åœ¨æ»šåŠ¨æ—¶è§¦å‘ç»™fade-copyå…ƒç´ æ·»åŠ activeç±»åå‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±ç”¨åˆ°äº†ScrollTriggeræ»šåŠ¨è§¦å‘äº†ï¼š 1234567891011121314const triggerFn = () =&gt; &#123; const triggerList = document.querySelectorAll(&quot;.fade-trigger&quot;); triggerList.forEach((item) =&gt; &#123; const hook = item.getAttribute(&quot;data-hook&quot;) || &quot;70%&quot;; gsap.timeline(&#123; scrollTrigger: &#123; trigger: item, start: &quot;top &quot; + hook, toggleClass: &quot;active&quot;, // markers: true, &#125;, &#125;); &#125;);&#125;; è¿™é‡Œhookå‚æ•°ç”¨æ¥è®¾ç½®æ»šåŠ¨è§¦å‘èµ·å§‹çš„ä½ç½®ï¼Œé»˜è®¤æ˜¯åœ¨è·ç¦»å±å¹•é¡¶éƒ¨70%çš„é«˜åº¦ï¼›æˆ‘ä»¬åœ¨å†™ä»£ç çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™ä¸çŸ¥é“å…ƒç´ æ»šåŠ¨åˆ°ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘ï¼Œå› æ­¤å¯ä»¥ç»™ScrollTriggeræ·»åŠ markers: trueæ·»åŠ é¡µé¢ä¸Šçš„æ ‡è®°ï¼Œæ¥è°ƒè¯•æ»šåŠ¨æ¡è§¦å‘çš„ä½ç½®ï¼›è¿˜ä¸äº†è§£ScrollTriggerç”¨æ³•çš„å°ä¼™ä¼´å¯ä»¥ç‚¹å‡»è¿™é‡Œã€‚ æˆ‘ä»¬é€šè¿‡forEachå¾ªç¯æ¥éå†é¡µé¢ä¸Šæ‰€æœ‰çš„.fade-triggerå…ƒç´ ï¼Œæ¯ä¸ªå…ƒç´ éƒ½ç»‘å®šäº†æ»šåŠ¨è§¦å‘çš„äº‹ä»¶ï¼›å› æ­¤åœ¨ä¸‹é¢çš„å¾ˆå¤šåœ°æ–¹ï¼Œæˆ‘ä»¬å‘ç°éƒ½æ˜¯ä½¿ç”¨è¯¥ç±»åæ¥å®ç°çš„æ•ˆæœã€‚ svgåŠ¨ç”» svgç»˜åˆ¶çš„åŠ¨ç”»æ•ˆæœï¼Œå›¾å½¢å¯ä»¥è¿›è¡Œæ— é™ç¼©æ”¾ï¼Œä¹Ÿä¸ä¼šå¤±çœŸï¼Œç›¸è¾ƒäºå›¾ç‰‡ä¹Ÿæ›´åŠ çš„çµæ´»ï¼›è¯´åˆ°å¤±çœŸå°±ä¸å¾—ä¸æè£è€€Magic5çš„è¶…åŠ¨æ€è‡»å½©æ˜¾ç¤ºæŠ€æœ¯ï¼Œè®©HDRç…§ç‰‡å’Œè§†é¢‘æ ©æ ©å¦‚ç”Ÿï¼Œç»“åˆè£è€€é¹°çœ¼ç²¾å½©æŠ“æ‹ï¼Œè®©å›¾åƒæ°¸ä¸å¤±çœŸã€‚ æœ¬æ–‡ä¸å¯¹svgçš„å…·ä½“ä½¿ç”¨æ•™ç¨‹è¿›è¡Œæ·±å…¥çš„æ¢è®¨ï¼Œæˆ‘ä»¬ç®€å•çœ‹ä¸‹gsapæ˜¯å¦‚ä½•ç»“åˆsvgå®ç°å¼ºå¤§çš„åŠ¨ç”»æ•ˆæœã€‚ åœ¨ç¬¬å››å±ã€åä¸€å±ã€åäº”å±å’Œåä¹å±éƒ½æœ‰ç±»ä¼¼çš„svgåŠ¨ç”»æ•ˆæœï¼Œæˆ‘ä»¬ä»¥ç¬¬å››å±ä¸ºä¾‹ï¼Œé¦–å…ˆæ¬£èµä¸€ä¸‹é¡µé¢çš„æ•ˆæœï¼š é¡µé¢ä¸Šé€šè¿‡å‰é¢ä¸‰ä¸ªellipseå…ƒç´ ç»˜åˆ¶æ¤­åœ†å½¢æè¾¹ï¼Œè®¾ç½®transformè®©æ¯ä¸ªæ—‹è½¬ä¸€å®šçš„è§’åº¦ï¼Œå½¢æˆå¯¹ç§°çš„å›¾æ¡ˆï¼›æœ€åä¸€ä¸ªellipseæ˜¯ä¸­å¿ƒçš„åœ†å½¢ã€‚ 12345678910111213141516171819202122232425262728293031&lt;g fill=&quot;none&quot; stroke-dasharray=&quot;0 220% 0&quot;&gt; &lt;ellipse class=&quot;magic-path&quot; cx=&quot;74.8447318&quot; cy=&quot;68.4&quot; rx=&quot;31.5406825&quot; ry=&quot;68.2132305&quot; &gt;&lt;/ellipse&gt; &lt;ellipse class=&quot;magic-path&quot; cx=&quot;74.8447318&quot; cy=&quot;68.4&quot; rx=&quot;31.4542843&quot; ry=&quot;68.4&quot; &gt;&lt;/ellipse&gt; &lt;ellipse class=&quot;magic-path&quot; cx=&quot;74.8447318&quot; cy=&quot;68.4&quot; rx=&quot;31.5406825&quot; ry=&quot;68.2132305&quot; &gt;&lt;/ellipse&gt; &lt;ellipse class=&quot;magic-circle&quot; fill=&quot;#D7A85B&quot; cx=&quot;74.8447318&quot; cy=&quot;68.4&quot; rx=&quot;10.4847614&quot; ry=&quot;10.5230769&quot; &gt;&lt;/ellipse&gt;&lt;/g&gt; å›¾å½¢ç»˜åˆ¶åï¼Œç°åœ¨éœ€è¦çš„å°±æ˜¯å¦‚ä½•è®©ä»–ä»¬åŠ¨èµ·æ¥ï¼Œè¿™é‡Œå€ŸåŠ©stroke-dasharrayæ ·å¼ï¼Œè®©å…¶å®ç°æè¾¹çš„æ•ˆæœï¼š 1234567891011121314ellipse &#123; animation: magic 1.5s linear; animation-fill-mode: both; animation-delay: 3s;&#125;@keyframes magic &#123; 0% &#123; stroke-dasharray: 0 220% 0; &#125; 100% &#123; // å¦‚æœå†™æˆ220% 0% 0%å°±æ˜¯é¡ºæ—¶é’ˆ stroke-dasharray: 0% 0% 220%; &#125;&#125; æˆ‘ä»¬çš„å›¾æ¡ˆå°±åƒä¸‹é¢ä¸€æ ·åŠ¨èµ·æ¥äº†ï¼š å¾ˆå¤šå°ä¼™ä¼´å¯¹stroke-dasharrayè¿™ä¸ªæ ·å¼å¯èƒ½ä¸æ˜¯å¾ˆäº†è§£ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹mdnä¸Šçš„ç”¨æ³•ï¼š å®ƒæ˜¯ç”±æ•°å€¼æˆ–è€…ç™¾åˆ†æ¯”ç»„æˆçš„ä¸€ä¸ªæ•°åˆ—ï¼Œæ•°åˆ—ä¸­çš„æ•°å€¼ï¼Œç¬¬ä¸€ä¸ªè¡¨ç¤ºç‚¹çš„å¤§å°ï¼Œç¬¬äºŒå€¼è¡¨ç¤ºä¸¤ä¸ªç‚¹ä¹‹é—´çš„ç©ºéš™å¤§å°ï¼›ä¸€èˆ¬çš„å†™æ³•å¦‚ï¼šstroke-dasharray:10, 2è¡¨ç¤ºç‚¹10pxï¼Œç‚¹ç©ºéš™2pxï¼›ä¸Šé¢æ ·å¼ä¸­åˆšå¼€å§‹0 220% 0å…¶å®ç›¸å½“äº0 220%ï¼Œè¡¨ç¤ºç©ºéš™å æ»¡å…¨éƒ¨çš„ç©ºé—´ï¼Œä¹Ÿå°±æ˜¯ä¸æ˜¾ç¤ºäº†ã€‚ ä½¿ç”¨stroke-dashoffsetä¹Ÿèƒ½å®ç°ç±»ä¼¼çš„æ•ˆæœã€‚ ç°åœ¨å›¾æ¡ˆæœ‰äº†ä¹ŸåŠ¨èµ·æ¥äº†ï¼Œæˆ‘ä»¬å°±ä¸ç”¨CSSçš„åŠ¨ç”»äº†ï¼›æˆ‘ä»¬éœ€è¦ç»“åˆGSAPæ¥è®©å®ƒå’Œæ»šåŠ¨æ¡å®ç°äº’åŠ¨äº†ï¼Œè¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼ŒGSAPä¹Ÿèƒ½æ§åˆ¶svgçš„å±æ€§ï¼Œè®©svgåŠ¨èµ·æ¥ä¹ˆï¼Ÿ 12345678910111213141516171819202122232425262728gsap .timeline(&#123; scrollTrigger: &#123; trigger: &quot;.magic-svg&quot;, start: &quot;top 60%&quot;, end: &quot;bottom 100%&quot;, scrub: 0.5, &#125;, &#125;) // è®©ellipseå®ç°æè¾¹ .to(&quot;.magic-path&quot;, &#123; strokeDasharray: &quot;0% 0% 220%&quot;, &#125;) // è®©ä¸­å¿ƒåœ†åœˆæ¸æ˜¾ .to(&quot;.magic-circle&quot;, &#123; duration: 0.5, opacity: 1, &#125;) // è®©ellipseä»ç»†åˆ°ç²—æ¸å˜ .from( &quot;.magic-path&quot;, &#123; duration: 0.5, stroke: &quot;#d7a85b&quot;, strokeWidth: 2, &#125;, &quot;&lt;&quot;, ); æˆ‘ä»¬å‘ç°ï¼Œå¾ˆå¤šåŠ¨ç”»ç»“æŸåï¼Œéƒ½æœ‰ç›¸åŒçš„æ•ˆæœï¼Œä¸»æ ‡é¢˜headlineæ¸éšå±•ç¤ºã€å‰¯æ ‡é¢˜subheadå’Œé“¾æ¥linkéƒ½ä»ä¸‹æ–¹æ»šåŠ¨å±•ç¤ºå‡ºæ¥ï¼›è¿™é‡Œå°±éœ€è¦ä»‹ç»ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼šgsap.registerEffectï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨å…¨å±€æ³¨å†Œæƒ³è¦çš„æ•ˆæœï¼Œç›´æ¥è°ƒç”¨ï¼Œä¸ç”¨æ¯æ¬¡éƒ½é‡å¤é€ è½®å­ã€‚ 12345678910111213141516gsap.registerPlugin(SplitText);// æ³¨å†Œgsap.registerEffect(&#123; name: &quot;rainbow&quot;, effect: (target, config) =&gt; &#123; let split = new SplitText(target, &#123; type: &quot;chars,words,lines&quot; &#125;); return gsap.from(split.chars, &#123; opacity: 0, y: -100, stagger: 0.05 &#125;); &#125;,&#125;);// åˆå§‹åŒ–è°ƒç”¨onMounted(() =&gt; &#123; gsap.effects.rainbow(&quot;.h1&quot;); gsap.effects.rainbow(&quot;.h2&quot;);&#125;); è¿™æ ·æ³¨å†Œåæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦æ‰‹åŠ¨è°ƒç”¨gsap.effectsï¼Œæˆ–è€…æˆ‘ä»¬è¿˜è®¾ç½®extendTimeline: trueï¼Œåœ¨ä»»æ„æ—¶é—´çº¿ä¹‹åéƒ½å¯ä»¥è°ƒç”¨è¯¥æ•ˆæœã€‚ 1234567891011121314gsap.registerEffect(&#123; name: &quot;rainbow&quot;, // extendTimelineè®¾ç½®ä¸ºtrue,å¯ä»¥ç›´æ¥åœ¨ä»»ä½•GSAPæ—¶é—´çº¿ä¸Šè°ƒç”¨æ•ˆæœ // è®©ç»“æœç«‹å³æ’å…¥åˆ°å®šä¹‰çš„ä½ç½®(é»˜è®¤æ˜¯åœ¨æœ€åçš„ä½ç½®) extendTimeline: true, // ...å…¶ä»–ä»£ç &#125;);// è°ƒç”¨onMounted(() =&gt; &#123; gsap.timeline() .rainbow(&quot;.h1&quot;) .rainbow(&quot;.h2&quot;);&#125;); è¿™æ ·rainbowæ•ˆæœå°±ä¼šåœ¨æ—¶é—´çº¿ä¸Šé¡ºåºè°ƒç”¨ï¼›æˆ‘ä»¬å›åˆ°è£è€€çš„é¡µé¢æ³¨å†Œå‡½æ•°ä¸Šæ¥ï¼Œå‘ç°åœ¨å…¨å±€æ³¨å†Œäº†ä¸€ä¸ªtech4çš„æ•ˆæœã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344gsap.registerEffect(&#123; name: &quot;tech4&quot;, extendTimeline: true, effect: function (targets) &#123; let tl = gsap .timeline() // æ•´ä¸ªsvgä»æ”¾å¤§æ•ˆæœå›åˆ°æ­£å¸¸ .from(targets[0], &#123; duration: 0.5, scale: 5, yPercent: 80, &#125;) // æ ‡é¢˜é€æ¸æ˜¾ç¤º .to(targets[1], &#123; duration: 0.5, opacity: 1, &#125;) // å‰¯æ ‡é¢˜ä»ä¸‹å‘ä¸Šæ»šåŠ¨ .fromTo( targets[2], &#123; y: 60, &#125;, &#123; y: 0, opacity: 1, &#125;, ); // linké“¾æ¥ä»ä¸‹å‘ä¸Šæ»šåŠ¨ if (targets[3]) &#123; tl.fromTo( targets[3], &#123; y: 60, &#125;, &#123; y: 0, autoAlpha: 1, &#125;, ); &#125; return tl; &#125;,&#125;); å› æ­¤åœ¨åŠ¨ç”»æ•ˆæœç»“æŸåï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªtech4æ•ˆæœæ¥å¯¹æ ‡é¢˜ã€å‰¯æ ‡é¢˜ç­‰å…ƒç´ è¿›è¡Œå¤„ç†ã€‚ 1234gsap .timeline() // å…¶ä»–çš„æ•ˆæœ .tech4([svg, headline, subhead, link, wrapper], &quot;&lt;&quot;); å¡ç‰‡å¼å¸ƒå±€ æˆ‘ä»¬å‰é¢ä»‹ç»è¿‡å¡ç‰‡å¼å¸ƒå±€çš„é€šç”¨æ ·å¼æ˜¯.section-card-viewï¼Œè¿™ç§å¸ƒå±€å°†ä¸¤ä¸ªæˆ–å¤šä¸ªdivå¦‚åŒå¡ç‰‡æ¨ªå‘æ’åˆ—ï¼Œéšç€æ»šåŠ¨æ¡è€Œç§»åŠ¨ï¼Œé¦–å…ˆä¹Ÿæ¥æ¬£èµä¸€ä¸‹é¡µé¢çš„æ»šåŠ¨æ•ˆæœï¼š é¡µé¢ç»“æ„çœ‹ä¼¼å¾ˆå¤æ‚ï¼Œå…¶å®ä¸»è¦å°±ä¸‰å±‚ç»“æ„ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940&lt;template&gt; &lt;section class=&quot;section-connect-4 section-card-view&quot;&gt; &lt;div class=&quot;sticky-wrapper&quot;&gt; &lt;div class=&quot;sticky-content&quot;&gt; &lt;div class=&quot;section-wrapper&quot;&gt; &lt;div class=&quot;section-card&quot;&gt; &lt;!-- å¡ç‰‡å†…å®¹--&gt; &lt;/div&gt; &lt;div class=&quot;section-card&quot;&gt; &lt;!-- å¡ç‰‡å†…å®¹--&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/section&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot;&gt;.section-card-view &#123; .sticky-wrapper &#123; height: 108.333333vw; &#125; .sticky-content &#123; position: sticky; width: 100%; height: auto; top: 65px; overflow: hidden; &#125; .section-wrapper &#123; position: relative; display: flex; width: 70.833333vw; margin: 0 auto; &#125; .section-card &#123; position: relative; flex-shrink: 0; width: 100%; &#125; .section-card + .section-card &#123; margin-left: 3.125vw; &#125;&#125;&lt;/style&gt; æˆ‘ä»¬ä»”ç»†æ¥çœ‹ä¸‹å®ƒçš„å±‚çº§ç»“æ„ï¼Œé¦–å…ˆæ˜¯.sticky-wrapperè®¾ç½®é«˜åº¦108vwï¼Œç”¨æ¥æ’‘å¼€é«˜åº¦ï¼›ä¸­é—´çš„å…ƒç´ .sticky-contentè®¾ç½®position:stickyï¼Œå°±æ˜¯æˆ‘ä»¬ç”¨æ¥å®ç°ç²˜æ€§å®šä½çš„ä¸»è¦å…ƒç´ äº†ï¼Œè¿™æ ·é¡µé¢åœ¨æ»šåŠ¨æ—¶å°±èƒ½ä¿è¯å†…å®¹å§‹ç»ˆè·ç¦»é¡¶éƒ¨æ‚¬æµ®ä¸€å®šé«˜åº¦ï¼›.section-wrapperè®¾ç½®display:flexï¼Œæ˜¯å†…éƒ¨flexå¸ƒå±€çš„å®¹å™¨ã€‚ æˆ‘ä»¬å‘ç°ç¬¬äºŒä¸ªå…ƒç´ åˆšå¼€å§‹ä¼šæœ‰ç¼©å°å¹¶ä¸”æ¯›ç»ç’ƒçš„æ•ˆæœï¼Œå¼±åŒ–å†…å®¹çš„å±•ç¤ºï¼Œéšç€æ»šåŠ¨é€æ¸æ¸…æ™°ï¼›åˆå§‹åŒ–æ—¶å¯ä»¥é€šè¿‡cssè®¾ç½®blurï¼Œæ¥è¾¾åˆ°æ¯›ç»ç’ƒçš„é®ç½©æ•ˆæœã€‚ 12345.section-card + .section-card .section-card-content &#123; transform: scale(0.8); transform-origin: left; filter: blur(10px);&#125; é¡µé¢æœ‰äº†ï¼Œé‚£å¦‚æœè®©å¡ç‰‡æ»šåŠ¨èµ·æ¥å‘¢ï¼Ÿåˆåˆ°äº†æˆ‘ä»¬çš„GSAPå¼€å§‹å¤§æ˜¾èº«æ‰‹çš„æ—¶å€™äº†ï¼›å®ç°çš„é€»è¾‘å…¶å®ä¹Ÿéå¸¸ç®€å•ï¼Œç²˜æ€§å®šä½å…ƒç´ .sticky-contentåœ¨æ»šåŠ¨æ—¶ä¿æŒæ‚¬æµ®ä½ç½®ä¸å˜ï¼Œè®©å…¶å†…éƒ¨çš„flexå¸ƒå±€å…ƒç´ .section-wrapperå‘å³ç§»åŠ¨ï¼Œè¿™æ ·å°±è®©æˆ‘ä»¬æœ‰ç§é”™è§‰ï¼Œæ»šåŠ¨æ¡å‘ä¸‹æ—¶å°†å¡ç‰‡æ¨ç€ç§»åŠ¨ã€‚ 12345678910111213141516171819const cardViewFn = () =&gt; &#123; const sections = document.querySelectorAll(&quot;.section-card-view&quot;); sections.forEach((section) =&gt; &#123; const wrapper = section.querySelector(&quot;.section-wrapper&quot;); const stickyWrapper = section.querySelector(&quot;.sticky-wrapper&quot;); gsap.to(wrapper, &#123; scrollTrigger: &#123; trigger: stickyWrapper, start: &quot;top 65&quot;, end: &quot;bottom 100%&quot;, scrub: 0, &#125;, ease: &quot;none&quot;, x: -swiperOffset, &#125;); &#125;)&#125; æˆ‘ä»¬æŸ¥æ‰¾é¡µé¢ä¸Šæ‰€æœ‰çš„.section-card-viewï¼Œéå†å…ƒç´ å°†å…¶ç»‘å®šScrollTriggeräº‹ä»¶ï¼›scrubå±æ€§å°†æ»šåŠ¨æ¡å’Œ.sticky-wrapperå…ƒç´ çš„xè½´ä½ç§»ç»‘å®šï¼›å…¶å®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„ä»£ç ä¸­æœ‰ä¸€ä¸ªswiperOffsetå˜é‡ï¼ŒçŒœæµ‹å°±æ˜¯wrapperçš„ä½ç§»è·ç¦»ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•æ¥è®¡ç®—çš„å‘¢ï¼Ÿæˆ‘ä»¬å°†æ•´ä¸ªflexå¸ƒå±€å…ƒç´ .section-wrapperå†…éƒ¨çš„æ‰€æœ‰å¡ç‰‡æƒ³è±¡æˆä¸€ä¸ªæ•´ä½“çš„divï¼Œå®ƒå‘å·¦ç§»åŠ¨çš„è·ç¦»å°±æ˜¯æ•´ä½“çš„å®½åº¦å‡å»é¡µé¢çš„å®½åº¦ï¼Œå› æ­¤æˆ‘ä»¬ä¸»è¦çš„å·¥ä½œå°±æ˜¯è®¡ç®—å®ƒçš„å®½åº¦ã€‚ è®¡ç®—æ–¹å¼ç›´æ¥ä¸Šä»£ç ï¼š 12345678910111213141516171819const screenWidth = document.documentElement.clientWidth;const cardWidth = cards[0].clientWidth;const cardMargin = Number(window.getComputedStyle(cards[1]).getPropertyValue(&quot;margin-left&quot;).slice(0, -2));const cardsNumber = cards.length;const swiperOffset = // è·ç¦»é¡µé¢å·¦ä¾§çš„å®½åº¦ * 2 wrapper.getBoundingClientRect().left * 2 // æ¯ä¸ªå¡ç‰‡å®½åº¦ * å¡ç‰‡æ•°é‡ + cardWidth * cardsNumber // å¡ç‰‡çš„å·¦ä¾§è·ç¦» * (å¡ç‰‡æ•°é‡ - 1) + cardMargin * (cardsNumber - 1) // å±å¹•çš„å®½åº¦ - screenWidth;gsap.to(wrapper, &#123; // çœç•¥å…¶ä»–ä»£ç  x: -swiperOffset,&#125;); é‚£ä¹ˆç°åœ¨wrapperä¹Ÿæ»šåŠ¨èµ·æ¥äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†ç¬¬äºŒä¸ªåŠå…¶ä»¥åçš„å¡ç‰‡å†…å®¹åœ¨æ»šåŠ¨æ—¶é€æ¸æ”¾å¤§æ¸…æ™°ï¼Œå»æ‰æ¨¡ç³Šæ•ˆæœã€‚ 1234567891011121314151617181920const cardScroll = cardWidth + cardMargin;const stickyTop = 65;cards.forEach(function (card, index) &#123; if (index &gt; 0) &#123; const startTrigger = stickyTop - cardScroll * (index - 1); gsap.to(card.querySelector(&quot;.section-card-content&quot;), &#123; scrollTrigger: &#123; trigger: card, start: &quot;top &quot; + startTrigger, end: &quot;+=&quot; + cardScroll / 3, scrub: 0, &#125;, ease: &quot;none&quot;, filter: &quot;blur(0px)&quot;, scale: 1, &#125;); &#125;&#125;); æœ€ç»ˆå®ç°çš„æ•ˆæœå¦‚ä¸‹ï¼š æ»šåŠ¨æ•ˆæœä¸æ»‘çš„å¦‚åŒè£è€€Magic5çš„æ‚¬æµ®æµçº¿å››æ›²é¢å±ä¸€æ ·ï¼Œæ— ç•Œè§†åŸŸï¼Œè‡ªåœ¨æŒæ§ã€‚ æ€»ç»“ é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬ç»“åˆå®é™…çš„æ¡ˆä¾‹ï¼Œå¯¹GSAPçš„ä½¿ç”¨æ–¹å¼æœ‰äº†æ›´è¿›ä¸€æ­¥çš„äº†è§£ï¼›ä½†æ˜¯ç”±äºç¯‡å¹…å’Œç²¾åŠ›çš„é™åˆ¶ï¼Œæœ¬æ–‡ä¸»è¦åˆ†æäº†æ»šåŠ¨æ¸æ˜¾ã€svgåŠ¨ç”»å’Œå¡ç‰‡å¼å¸ƒå±€çš„å‡ ä¸ªæ•ˆæœï¼Œå®é™…é¡µé¢ä¸­æœ‰éå¸¸ä¸°å¯Œçš„æ•ˆæœï¼Œæœ¬æ–‡åªæ˜¯çª¥æ¢äº†å…¶ä¸­çš„æå°‘ä¸€éƒ¨åˆ†çš„æ•ˆæœï¼Œå¤§å®¶å¦‚æœæ„Ÿå…´è¶£å¯ä»¥è‡ªè¡Œåœ¨è£è€€å®˜ç½‘æŸ¥çœ‹ã€‚ æœ¬æ–‡æ‰€æœ‰æºç æ•¬è¯·å…³æ³¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘ï¼Œåå°å›å¤å…³é”®è¯ã€GASPè£è€€å®˜ç½‘ã€‘å³å¯è·å–ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"}]},{"title":"ChatGPTçš„ç‹‚é£™ä¹‹è·¯","date":"2023-03-07T12:00:00.000Z","path":"2023/03/07/Whatis-Chatgpt.html","text":"æœ€è¿‘éšç€ChatGPTçˆ†ç«å‡ºåœˆï¼Œç½‘ç»œä¸Šå„ç§å…³äºChatGPTçš„äº‰è®ºå£°ä¹Ÿä¸æ–­ï¼›æœ‰äº›äººæŠŠå®ƒå½“æˆä¸€ä¸ªæ›´é«˜çº§çš„èŠå¤©æœºå™¨äººï¼Œæœ‰äººå…´å¥‹åœ°çœ‹åˆ°äº†åˆ›ä¸šçš„é£å£ï¼Œè€Œå¦ä¸€äº›äººå¯¹å®ƒå–ä»£äººç±»çš„å·¥ä½œéœ²å‡ºäº†ä¸å°‘æ‹…å¿§ï¼›é‚£ä¹ˆå®ƒåˆ°åº•æ˜¯æ¨åŠ¨ç¤¾ä¼šä¸æ–­å‰è¿›çš„å·¥å…·ï¼Œè¿˜æ˜¯å¦„å›¾é¢ è¦†äººç±»ç¤¾ä¼šçš„T-1000ï¼Ÿæœ¬æ–‡æˆ‘ä»¬æ¥æ·±å…¥çš„æ¢è®¨ä¸€ä¸‹ChatGPTçš„é‚£äº›äº‹ã€‚ å½“æˆ‘ä»¬åœ¨è°ˆè®ºChatGPTæ—¶ï¼Œè®¨è®ºçš„æ˜¯èŠå¤©çš„æ¬£å–œï¼Œæ˜¯å¤±ä¸šçš„æ‹…å¿§ï¼Œæ˜¯æœªæ¥çš„æ†§æ†¬ã€‚ å‘å±•å†ç¨‹ ChatGPTçœ‹ä¼¼å¥½åƒæ˜¯åœ¨ä¸€å¤œä¹‹é—´çªç„¶ç«èµ·æ¥ï¼Œä½†å…¶å®å®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªä»€ä¹ˆæ–°é²œçš„æ¦‚å¿µï¼Œæœ€æ—©çš„äººå·¥æ™ºèƒ½å¯ä»¥è¿½æº¯åˆ°1950å¹´ï¼Œè‰¾ä¼¦Â·å›¾çµ(Alan Turing)å‘è¡¨äº†å…·æœ‰é‡Œç¨‹ç¢‘æ„ä¹‰çš„è®ºæ–‡ã€Šè®¡ç®—æœºå™¨ä¸æ™ºèƒ½ã€‹ï¼Œåˆåã€Šæœºå™¨èƒ½æ€è€ƒå—ï¼Ÿã€‹ï¼Œåœ¨è¿™ç¯‡è®ºæ–‡é‡Œï¼Œç¬¬ä¸€æ¬¡æå‡ºäº†å¾ˆæœ‰å“²å­¦çš„æ¦‚å¿µï¼šæ¨¡ä»¿æ¸¸æˆï¼Œä¹Ÿæ­£æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„å¤§åé¼é¼çš„å›¾çµæµ‹è¯•ï¼Œæ­£æ˜¯è¿™ç¯‡æ–‡ç« ä¸ºå›¾çµèµ¢å¾—äº†äººå·¥æ™ºèƒ½ä¹‹çˆ¶çš„æ¡‚å† ã€‚ å›¾çµæµ‹è¯•å°±æ˜¯å°†æµ‹è¯•äººå’Œè¢«æµ‹è¯•è€…ï¼ˆä¸€å°æœºå™¨æˆ–è€…äººï¼‰ï¼Œåœ¨æ²¡æœ‰é¢å¯¹é¢çš„æƒ…å†µä¸‹ï¼Œè®©æµ‹è¯•è€…é€šè¿‡ä¸€äº›æµ‹è¯•è£…ç½®ï¼ˆä¾‹å¦‚é”®ç›˜ï¼‰åƒè¢«æé—®è€…å‘é—®ï¼Œå¦‚æœè¢«æµ‹è¯•è€…è¶…è¿‡30%çš„ç­”å¤ï¼Œä¸èƒ½ä½¿æµ‹è¯•äººç¡®è®¤å‡ºå“ªä¸ªæ˜¯äººã€å“ªä¸ªæ˜¯æœºå™¨çš„å›ç­”ï¼Œé‚£ä¹ˆè¿™å°æœºå™¨å°±é€šè¿‡äº†æµ‹è¯•ï¼›è¿™æ ·çš„æœºå™¨ä¹Ÿè¢«ç§°ä¸ºå›¾çµæœºï¼Œå›¾çµæœºä¹Ÿåªæ˜¯ä¸€ä¸ªè®¾æƒ³ï¼Œå¹¶ä¸æ˜¯çœŸæ­£çš„æœºå™¨ã€‚ å…¶å®æˆ‘ä»¬å‘ç°å›¾çµæµ‹è¯•å¹¶æ²¡æœ‰å¯¹äººå·¥æ™ºèƒ½è¿›è¡Œç›´æ¥çš„å®šä¹‰ï¼Œä»€ä¹ˆæ ·æ‰ç®—æ˜¯äººå·¥æ™ºèƒ½ï¼›è€Œæ˜¯åå…¶é“è€Œè¡Œä¹‹ï¼Œå¹¶æ²¡æœ‰æ‹˜æ³¥äºç¹æ‚çš„è¿‡ç¨‹ï¼Œä»¥ç»“æœä¸ºå¯¼å‘ï¼Œè¾¾åˆ°ä»€ä¹ˆæ ·çš„ç»“æœï¼ˆæ¬ºéª—åˆ°æµ‹è¯•äººï¼‰ï¼Œæ‰ç®—æ˜¯äººå·¥æ™ºèƒ½ï¼›æˆ‘ä»¬æœ‰æ—¶å€™åœ¨å¤„ç†æ£˜æ‰‹é—®é¢˜æ—¶ä¹Ÿå¯ä»¥æ¢ä¸ªæ€è·¯ï¼Œä»¥ç»“æœä¸ºèµ·ç‚¹å¯¹é—®é¢˜è¿›è¡Œæ‹†è§£ã€‚ åœ¨ä¼ è®°ç”µå½±ã€Šæ¨¡ä»¿æ¸¸æˆã€‹ä¸­ï¼Œä¹Ÿå¯¹è¿™ä½å­¤ç‹¬çš„å¤©æ‰æå‡ºçš„è®¾æƒ³è¿›è¡Œäº†æç»˜ï¼Œå½“å›¾çµè¢«è­¦æ¢å…³åˆ°å®¡è®¯å®¤æ—¶ï¼Œè­¦æ¢æå‡ºäº†ä¸€ä¸ªæ„å‘³æ·±é•¿çš„é—®é¢˜ï¼šæœºå™¨èƒ½æ€è€ƒå—ï¼Ÿå›¾çµå°±æå‡ºäº†ç©ä¸€ä¸ªæ¸¸æˆï¼ˆæ­£æ˜¯å›¾çµæµ‹è¯•ï¼‰ï¼›æœ€ç»ˆå›¾çµéœ²å‡ºäº†ç¬‘å®¹ï¼Œä»–æ„Ÿè§‰åˆ°è­¦æ¢ç†è§£äº†æ¸¸æˆè§„åˆ™ã€‚ æ¨¡å¼åŒ¹é…é˜¶æ®µ åœ¨å›¾çµæµ‹è¯•è¢«æå‡ºåï¼Œå¾ˆå¤šç§‘å­¦å®¶å’Œå®éªŒå®¤ä¹Ÿå‘è¿™ä¸ªæµ‹è¯•å‘èµ·äº†å†²å‡»ï¼›åœ¨1966å¹´ï¼ŒMITå®éªŒå®¤è¯ç”Ÿäº†ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„èŠå¤©æœºå™¨äººElizaï¼Œå®ƒçš„å®šä½æ˜¯ä¸€åå¿ƒç†æ²»ç–—å¸ˆã€‚ Elizaä¸»è¦çš„ç­–ç•¥å°±æ˜¯æå‡ºé—®é¢˜ï¼Œå¹¶é‡æ–°è¡¨è¿°ç”¨æˆ·è¯´çš„è¯ï¼Œå¼•å¯¼ç”¨æˆ·å¤šæè¿°é—®é¢˜ã€‚æ¯”å¦‚ä½ å‘Šè¯‰å®ƒï¼šæˆ‘ä»Šå¤©æœ‰ç‚¹å¤´ç–¼ï¼ˆheadacheï¼‰ï¼Œå®ƒå°±ä¼šå‘Šè¯‰ä½ å¤´ç–¼å°±å»å’¨è¯¢åŒ»ç”Ÿç”¨è¯ï¼›å¦‚æœä½ è¯´ä»Šå¤©æœ‰ç‚¹å¾ˆæ²®ä¸§ï¼ˆdepressedï¼‰ï¼Œç„¶åå®ƒå°±ä¼šè¯´å¬è¯´ä½ ä¸å¼€å¿ƒï¼Œè¡¨ç¤ºå¾ˆéš¾è¿‡ï¼›å¦‚æœä½ åˆè¯´æˆ‘å¦ˆå¦ˆï¼ˆmotherï¼‰ç…§é¡¾æˆ‘ï¼Œå®ƒä¼šé—®ä½ å®¶é‡Œè¿˜æœ‰è°æ¥ç…§é¡¾ä½ ã€‚ Elizaé€šè¿‡å…³é”®è¯åŒ¹é…è§„åˆ™å¯¹è¾“å…¥è¿›è¡Œåˆ†è§£ï¼Œè€Œåæ ¹æ®åˆ†è§£è§„åˆ™æ‰€å¯¹åº”çš„é‡ç»„è§„åˆ™æ¥ç”Ÿæˆå›å¤ï¼›é€šä¿—ç‚¹è¯´å°±æ˜¯æŠ“å–å¥å­ä¸­çš„å…³é”®å­—ï¼Œæ¯”å¦‚å‘ç°å¥å­ä¸­æœ‰å¦ˆå¦ˆè¿™ä¸ªå…³é”®è¯ï¼Œå¥¹å°±ä¼šè¯´ï¼šè·Ÿæˆ‘è¯´è¯´ä½ çš„å®¶åº­ï¼›å…¶å®å®ƒçš„èƒŒåå°±æ˜¯å¾ˆå¤šçš„if/elseä»£ç ã€‚ åˆ°äº†1995å¹´ï¼Œå—åˆ°Elizaçš„å¯å‘ï¼Œç†æŸ¥å¾·Â·åå‹’æ–¯å¼€å‘äº†ä¸€ä¸ªèŠå¤©æœºå™¨äººAliceï¼Œå¹¶äº1998å¹´å¼€æºï¼›Aliceçš„æŠ€æœ¯åŸç†ä¸»è¦æ˜¯åŸºäºè‡ªç„¶è¯­è¨€å¤„ç†ï¼Œå®ƒçš„ç›®çš„æ˜¯æ¨¡ä»¿äººç±»çš„è‡ªç„¶è¯­è¨€ï¼Œä¸ç”¨æˆ·è¿›è¡Œæœ‰æ„ä¹‰çš„å¯¹è¯ã€‚å®ƒå¯ä»¥å›ç­”å…³äºå¤©æ°”ã€æ–°é—»ã€ä½“è‚²ç­‰å„ç§è¯é¢˜çš„é—®é¢˜ï¼Œè¿˜å¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæœ‰è¶£çš„èŠå¤©ã€‚ ä¸è¿‡ç›®å‰é˜¶æ®µï¼Œæ— è®ºæ˜¯Elizaè¿˜æ˜¯Aliceï¼Œä»–ä»¬çš„åŸç†éƒ½æ˜¯åŸºäºæ¨¡å¼åŒ¹é…ï¼ˆPattern Matchingï¼‰ï¼Œé€šè¿‡æå–å…³é”®è¯ï¼Œè°ƒç”¨é¢„å…ˆè®¾å¥½çš„æ–‡æœ¬è¿›è¡Œå›å¤ã€‚ è¿™äº›å¯¹è¯æœºå™¨äººè™½ç„¶èƒ½å¤Ÿè¿›è¡Œç®€å•çš„è¯­è¨€äº¤äº’ï¼Œä½†æ˜¯å¯¹è¯­å¥ç¼ºä¹æ·±åº¦çš„ç†è§£å’Œæ¨ç†èƒ½åŠ›ï¼Œå¾ˆéš¾å’Œäººç±»çš„å¯¹è¯æ°´å¹³ç›¸æ¯”ã€‚ ä½†è¿™ç§æ¨¡å¼ä¹Ÿå¹¶ä¸æ˜¯ä¸€æ— æ˜¯å¤„ï¼Œå¯ä»¥é¿å…å¾ˆå¤šé‡å¤æ€§çš„å·¥ä½œï¼Œåè€Œåœ¨æˆ‘ä»¬èº«è¾¹ä¹Ÿå¾ˆå¸¸è§ã€‚æ¯”å¦‚å¸¸è§çš„è´­ç‰©ç½‘ç«™ã€é“¶è¡Œç½‘ç«™æˆ–Appç­‰ï¼Œè¿›å…¥èŠå¤©ç•Œé¢å…ˆç»™ä½ æ¥ä¸€ä¸ªçƒ­æƒ…çš„èŠå¤©æœºå™¨äººï¼Œå·´æ‹‰å·´æ‹‰ç½—åˆ—ä¸€å †å…³é”®è¯å’¨è¯¢ä½ æƒ³å¹²å˜›ã€‚ æœºå™¨å­¦ä¹ æ¨¡å¼ ä¸Šé¢æˆ‘ä»¬ä¹Ÿè¯´åˆ°äº†ï¼Œæ¨¡å¼åŒ¹é…çš„æ–¹å¼å°±ç®—if/elseä»£ç å†™çš„å†å¤šï¼Œä½†æ˜¯æœºå™¨è¿˜æ˜¯ä¸èƒ½ç†è§£å¥å­çš„çœŸæ­£å«ä¹‰ï¼Œåªæ˜¯ç®€å•çš„å›å¤ï¼Œå› æ­¤å‡ºç°äº†ä¸€ä¸ªæ–°çš„æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ï¼šæœºå™¨å­¦ä¹ ã€‚ é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä¸è¿›è¡Œäººä¸ºçš„è§„å®šé—®é¢˜å’Œç­”æ¡ˆï¼Œè€Œæ˜¯ç»™æœºå™¨ä¸€å †ç°æˆçš„æ¡ˆä¾‹ï¼Œè®©æœºå™¨æ¥è¿›è¡Œå­¦ä¹ ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ›´åŠ ç¬¦åˆäººç±»å­¦ä¹ çš„è®¤çŸ¥è§„å¾‹ã€‚ è¿™ä¸ªé˜¶æ®µæ¯”è¾ƒå‡ºåçš„å°±æ˜¯SmarterChildï¼ˆæ›´èªæ˜çš„å°å­©ï¼‰ï¼Œå®ƒæ˜¯ActiveBuddyè‚¡ä»½æœ‰é™å…¬å¸äº2001å¹´å¼€å‘ï¼Œè¯¥èŠå¤©æœºå™¨äººç”¨åœ¨äº†è€ç‰Œå³æ—¶é€šè®¯AIMï¼Œèƒ½å¤Ÿè¿›è¡Œæœ‰è¶£çš„å¯¹è¯å¹¶å¿«é€Ÿè®¿é—®å…¶ä»–æœåŠ¡çš„æ•°æ®ï¼Œæ¯”å¦‚å¤©æ°”ã€è‚¡ç¥¨å’Œç”µå½±æ•°æ®ï¼›ä½ ç”šè‡³å¯ä»¥è´£éª‚å®ƒã€åˆéš¾å®ƒï¼Œå®ƒä¼¼ä¹æ€»æ˜¯çŸ¥é“å¦‚ä½•æ¥åº”å¯¹ã€‚ SmarterChildä¹Ÿæ˜¯æœ€æ—©é›†æˆåˆ°å³æ—¶é€šè®¯å¹³å°çš„èŠå¤©æœºå™¨äººä¹‹ä¸€ï¼Œåœ¨å½“æ—¶è¿…é€Ÿå¼•èµ·äº†è½°åŠ¨ï¼Œæœ‰3000å¤šä¸‡ç”¨æˆ·åœ¨ä½¿ç”¨å®ƒï¼›åæ¥äº2006å¹´è¢«å¾®è½¯æ”¶è´­ï¼Œä¹Ÿè¢«åº”ç”¨åˆ°äº†MSN Messengerä¸Šã€‚ ä¸è¿‡SmarterChildåï¼ŒèŠå¤©æœºå™¨äººè¢«é—å¼ƒäº†å¥½å‡ å¹´ï¼Œå¾®è½¯ä¹Ÿå…³é—­äº†SmarterChildçš„é«˜ç§‘æŠ€éƒ¨é—¨ã€‚ 2010å¹´éšç€æœºå™¨å­¦ä¹ ä¸­çš„ä¸€ä¸ªé¢†åŸŸäººå·¥ç¥ç»ç½‘ç»œï¼ˆArtificial Neural Networksç®€ç§°ANNsï¼‰çš„çˆ†å‘ï¼Œäººå·¥æ™ºèƒ½è¿æ¥äº†ç©ºå‰çš„å‘å±•ã€‚ å®ƒçš„çµæ„Ÿæ¥æºäºç”Ÿç‰©å­¦ï¼Œåˆä¸­ç”Ÿç‰©è¯¾æœ¬ä¸­æˆ‘ä»¬å­¦åˆ°è¿‡ï¼ŒåŠ¨ç‰©çš„ç¥ç»ç½‘ç»œèƒ½å¤Ÿå¤„ç†å¤§é‡å¤æ‚çš„ä¿¡æ¯ï¼Œå°±æ˜¯é€šè¿‡å¤§çº¦1000äº¿ä¸ªç¥ç»å…ƒå½¼æ­¤è¿æ¥æ¥æ‰§è¡ŒåŠŸèƒ½ï¼›äººå·¥ç¥ç»ç½‘ç»œè¦åšçš„å°±æ˜¯æ¨¡æ‹Ÿå¤§è„‘ä¸­çš„åŸºæœ¬å•å…ƒï¼šç¥ç»å…ƒã€‚ äººå·¥ç¥ç»ç½‘ç»œçœ‹èµ·æ¥å¾ˆå‰å®³ï¼Œå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªä¸æ–­çš„æå–ç‰¹å¾çš„è¿‡ç¨‹ï¼Œè·Ÿæˆ‘ä»¬å°æ—¶å€™å­¦ä¼šè®¤çŸ¥äº‹ç‰©å¾ˆç›¸ä¼¼ï¼Œå°±æ˜¯æ‰¾ä¸åŒäº‹ç‰©çš„ç‰¹å¾ï¼›äººå·¥ç¥ç»ç½‘ç»œåœ¨å¾—åˆ°ä¸€ä¸²æ ·æœ¬æ•°æ®åï¼Œä¹Ÿæ˜¯é€šè¿‡å­¦ä¹ æå–æ‰€è§‚å¯Ÿäº‹ç‰©å„éƒ¨åˆ†çš„ç‰¹å¾ï¼Œå°†ç‰¹å¾ä¹‹é—´è¿›è¡Œå…³è”ï¼Œå†ç»è¿‡åå¤çš„è®­ç»ƒï¼Œæœ€åè¾“å‡ºå¾—åˆ°æ­£ç¡®çš„ç­”æ¡ˆã€‚ é€šè¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å‘ç°ï¼Œäººå·¥ç¥ç»ç½‘ç»œéœ€è¦æµ·é‡çš„æ•°æ®è®­ç»ƒå’Œå¼ºå¤§çš„è®¡ç®—èƒ½åŠ›æ”¯æ’‘ï¼›éšç€äº’è”ç½‘çš„å¿«é€Ÿå‘å±•ï¼Œå¤§é‡çš„æ•°æ®é›†ä¹Ÿä¸å†æ˜¯é—®é¢˜ã€‚ Siriæˆç«‹äº2007å¹´ï¼Œ2010å¹´è¢«è‹¹æœä»¥2äº¿ç¾é‡‘æ”¶è´­ï¼Œæœ€åˆä¹Ÿæ˜¯ä»¥æ–‡å­—èŠå¤©ä¸ºä¸»ï¼Œéšåä¸å…¨çƒæœ€å¤§çš„è¯­éŸ³è¯†åˆ«å‚å•†Nuanceåˆä½œï¼ŒSiriå®ç°äº†è¯­éŸ³è¯†åˆ«çš„åŠŸèƒ½ï¼Œå¹¶äº2011å¹´åœ¨iPhone 4Sä¸Šé¦–æ¬¡äº®ç›¸ï¼Œåœ¨å½“æ—¶å¼•å‘è½°åŠ¨ï¼ŒiPhone 4Sä¹Ÿæˆä¸ºäº†ä¸€ä»£ç¥æœºã€‚ Siriè¯†åˆ«ä½ çš„å£°éŸ³ä½¿ç”¨çš„å°±æ˜¯æ·±åº¦å·ç§¯ç½‘ç»œï¼Œä¹Ÿæ˜¯äººå·¥ç¥ç»ç½‘ç»œçš„ä¸€ç§ï¼›iPhoneä¸­ä¸“é—¨æœ‰ä¸€ä¸ªä½åŠŸè€—çš„å¤„ç†å™¨æ¥è¿è¡Œè¿™ä¸ªç¥ç»ç½‘ç»œï¼Œå½“ç›¸ä¼¼åº¦è¾¾åˆ°ä¸€å®šçš„é˜ˆå€¼ï¼Œå°±ä¼šå¯åŠ¨Siriã€‚ Siriçš„æ¨å‡ºä¹Ÿæ ‡å¿—ç€èŠå¤©æœºå™¨äººæŠ€æœ¯è¿›å…¥äº†ä¸€ä¸ªæ–°çš„æ—¶ä»£ï¼Œ æ—¶é—´æ¥åˆ°äº†2017å¹´ï¼Œè°·æ­Œåœ¨ã€ŠAttention is all you needã€‹ä¸€æ–‡ä¸­å‘å¸ƒäº†ä¸€ä¸ªæ–°çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼šTransformeræ¨¡å‹ï¼Œè¯¥æ¨¡å‹ä¸»è¦ç”¨äºå…‹æœæœºå™¨ç¿»è¯‘ä¸­ä¼ ç»Ÿç½‘ç»œè®­ç»ƒæ—¶é—´è¿‡é•¿ï¼Œéš¾ä»¥è¾ƒå¥½å®ç°å¹¶è¡Œè®¡ç®—çš„é—®é¢˜ã€‚ ä¼ ç»Ÿçš„è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆä¾‹å¦‚è¯­éŸ³è¯†åˆ«ã€è¯­è¨€å»ºæ¨¡ã€æœºå™¨ç¿»è¯‘ï¼‰ä¾èµ–äºå¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRecurrent Neural Network, RNNï¼‰ï¼Œåˆ©ç”¨å¾ªç¯è¿›è¡Œé¡ºåºæ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—ä¸€ä¸ªå­—çš„å­¦ä¹ ï¼Œæœ‰ç€è®­ç»ƒæ—¶é—´è¿‡é•¿ã€éš¾ä»¥å¹¶è¡Œè®¡ç®—çš„ç¼ºç‚¹ã€‚ è€ŒTransformeræ¨¡å‹æŠ›å¼ƒäº†ä¼ ç»Ÿçš„æ—¶åºç»“æ„ï¼Œå¹¶è¡Œå¤„ç†åºåˆ—ä¸­çš„æ‰€æœ‰å•è¯æˆ–ç¬¦å·ï¼ŒåŒæ—¶åˆ©ç”¨è‡ªæ³¨æ„åŠ›æœºåˆ¶å°†ä¸Šä¸‹æ–‡ä¸è¾ƒè¿œçš„å•è¯ç»“åˆèµ·æ¥ï¼›è¿™å°±ç›¸å½“äºå­¦æ¸£è¿˜åœ¨ä¸€ä¸ªå­—ä¸€ä¸ªå­—çœ‹ä¹¦æ—¶ï¼Œå­¦éœ¸å·²ç»ä¸€ç›®åè¡Œï¼Œå‡ ä¸ªæ®µè½éƒ½çœ‹å®Œäº†ï¼Œè¿™å­¦ä¹ æ•ˆç‡è‡ªç„¶å°±æ æ çš„ã€‚ å¾®è½¯çš„GPTæ¨¡å‹å’Œè°·æ­Œçš„BERTæ¨¡å‹ï¼Œå…¶ä¸­çš„Téƒ½æ˜¯ä»£è¡¨Transformeræ¨¡å‹çš„æ„æ€ã€‚ æˆ‘ä»¬å‘ç°ä¸€ä¸ªè§„å¾‹ï¼Œç§‘å­¦æŠ€æœ¯çš„å‘å±•è¿›æ­¥æ€»æ˜¯ä¼´éšç€ç†è®ºç ”ç©¶çš„æå‡ºå’Œçªç ´ã€‚ æ—¢ç„¶æ¨¡å‹æœ‰äº†ï¼Œé‚£è‚¯å®šå°±æœ‰å…¬å¸æ¥å¯¹å…¶è¿›è¡Œå•†ä¸šåŒ–äº†ï¼Œæˆ‘ä»¬å…ˆæ¥è¯´è¯´ChatGPTçš„æ¯å…¬å¸OpenAIï¼Œå®ƒäº2015å¹´ç”±ä¸€å¸®ç¡…è°·ç§‘æŠ€å¤§ä½¬æˆç«‹ï¼ŒåŒ…æ‹¬æˆ‘ä»¬ç†ŸçŸ¥çš„ç‰¹æ–¯æ‹‰åˆ›å§‹äººåŸƒéš†Â·é©¬æ–¯å…‹ç­‰ï¼Œæˆç«‹ä¹‹åˆå°±ç¡®è®¤äº†å…¬å¸çš„ä¸»è¦ç›®æ ‡ï¼š åŒ…æ‹¬åˆ¶é€ â€œé€šç”¨â€æœºå™¨äººå’Œä½¿ç”¨è‡ªç„¶è¯­è¨€çš„èŠå¤©æœºå™¨äººã€‚ 2018å¹´ï¼ŒOpenAIåœ¨Transformerçš„æ¨¡å‹åŸºç¡€ä¸Šï¼Œåˆå‘å¸ƒäº†ç”Ÿæˆå¼é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹ï¼ˆGenerative Pre-trained Transformerï¼Œå³GPT-1ï¼‰ï¼›ä¸è¿‡è€å¯¹æ‰‹è°·æ­Œçš„BERTå¾ˆå¿«å°±å‡ºç°äº†ï¼Œå¹¶ä¸”æ€§èƒ½ä¸Šå…¨é¢ç¢¾å‹äº†GTPã€‚ é‚£è¢«å¯¹æ‰‹è¶…è¿‡äº†OpenAIè‡ªç„¶å°±ä¸ç”˜å¿ƒäº†ï¼Œäºæ˜¯ç–¯ç‹‚ç ¸é’±ï¼Œå¢å¤§äº†è®­ç»ƒæ•°æ®é›†ï¼Œé™†ç»­åˆå‘å¸ƒäº†GPT-2å’ŒGPT-3æ¨¡å‹ï¼Œæ¨¡å‹çš„å‚æ•°é‡ä¹Ÿä»GPT-1çš„1.25äº¿ä¸ªè¿…é€Ÿâ€œç‹‚é£™â€åˆ°GPT-3çš„1750äº¿ä¸ªï¼›æ•°é‡æ›´åºå¤§çš„å‚æ•°é‡ä¹Ÿå°±æ„å‘³ç€æ¨¡å‹å…·æœ‰æ›´å¼ºå¤§çš„è¡¨è¾¾èƒ½åŠ›å’Œæ›´å°çš„é¢„æµ‹è¯¯å·®ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç”Ÿæˆæ›´é•¿ã€æ›´è‡ªç„¶çš„æ–‡æœ¬ã€‚ æµ·é‡çš„æ¨¡å‹å‚æ•°å°±è®©GPT-3åœ¨ä¸€äº›æ¯”è¾ƒå¤æ‚çš„é—®é¢˜ä¸Šä¹Ÿèƒ½æœ‰å¾ˆå¥½çš„è¡¨ç°ï¼Œæ¯”å¦‚ä»£æ›¿äººç±»å†™ä¸€äº›è®ºæ–‡ï¼Œç”šè‡³ç¼–å†™SQLè¯­å¥ã€JavaScriptä»£ç ç­‰ç­‰ã€‚ 2021å¹´ï¼ŒOpenAIåŸºäºGPT-3æ¨¡å‹è¿›è¡Œä¿®æ”¹å’Œæ”¹è¿›ï¼Œè°ƒæ•´äº†æ¨¡å‹å‚æ•°ï¼Œæ·»åŠ äº†è®­ç»ƒæ•°æ®ï¼Œå¹´æœ«å‘å¸ƒäº†GPT-3.5ï¼Œä¹Ÿå°±æ˜¯ç›®å‰å¾ˆç«çš„ChatGPTçš„åŸå§‹æ¨¡å‹ã€‚ 2022å¹´11æœˆï¼ŒChatGPTä¸Šçº¿ä»…ä»…å‡ å¤©å°±è·å¾—äº†100ä¸‡ç”¨æˆ·ï¼Œä¸Šçº¿ä¸¤ä¸ªæœˆï¼Œå…¶æœˆæ´»å°±è¾¾åˆ°äº†æƒŠäººçš„1äº¿ï¼Œæˆä¸ºå†å²ä¸Šç”¨æˆ·å¢é•¿æœ€å¿«çš„æ¶ˆè´¹åº”ç”¨ã€‚ å¤§é‡ç”¨æˆ·æ¶Œå…¥çš„èƒŒåï¼Œæ˜¯éœ€è¦åºå¤§çš„ç®—åŠ›æˆæœ¬å’ŒæœåŠ¡å™¨çš„æŠ•å…¥ï¼›æ ¹æ®æŸç ”ç©¶æœºæ„çš„æµ‹ç®—ï¼Œè¿è¡Œè¿™ä¹ˆå¤æ‚çš„GPT-3.5æ¨¡å‹ï¼Œéœ€è¦çš„GPUèŠ¯ç‰‡çš„æ•°é‡å°±é«˜è¾¾2ä¸‡æšï¼Œè€Œä¸“ä¸šçº§æ˜¾å¡ä¸€èˆ¬ä½¿ç”¨A100ï¼›æ ¹æ®æŸè´­ç‰©ç½‘ç«™çš„æ•°æ®ï¼Œ10ä¸‡äººæ°‘å¸ä¸€å—A100æ˜¾å¡çš„ä»·æ ¼åœ¨å›½å†…è¿˜æ˜¯æœ‰å¸‚æ— ä»·ï¼›å› æ­¤ç²—ç•¥è®¡ç®—ä¸‹ï¼Œå•å•æ˜¾å¡çš„æŠ•å…¥å°±è‡³å°‘åœ¨20äº¿ä»¥ä¸Šï¼›è¿˜æœ‰å…¶ä»–å¦‚æ•°æ®é‡‡é›†ã€äººå·¥æ ‡æ³¨ã€æ¨¡å‹è®­ç»ƒç­‰è½¯æ€§æˆæœ¬æ›´æ˜¯éš¾ä»¥ç»Ÿè®¡ã€‚ æ³¨å†Œæ”»ç•¥ èŠäº†è¿™ä¹ˆå¤šçš„ChatGPTçš„å‘å±•å†ç¨‹ï¼Œç›¸ä¿¡å¤§å®¶å¯¹è¿™ä¸Šç™¾äº¿æŠ•å…¥çš„â€œé«˜çº§èŠå¤©æœºå™¨äººâ€è‚¯å®šä¹Ÿéƒ½è¿«ä¸åŠå¾…ã€è·ƒè·ƒæ¬²è¯•äº†ï¼Œé‚£ä¹ˆè¿™é‡Œç¬”è€…å°±åˆ†äº«ä¸€ä¸‹æ³¨å†Œçš„æ”»ç•¥ï¼›ç”±äºä¼—æ‰€å‘¨çŸ¥çš„æŸäº›åŸå› ï¼Œå›½å†…ç”¨æˆ·å¹¶ä¸èƒ½æµç•…çš„ç›´æ¥è®¿é—®ï¼Œæ³¨å†Œçš„è¿‡ç¨‹ä¹Ÿä¼šæœ‰ä¸€äº›æ›²æŠ˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åšå¥½ä»¥ä¸‹å‡†å¤‡å·¥ä½œï¼š èƒ½å¤Ÿè®¿é—®Googleçš„ç¯å¢ƒï¼ˆè¿™æ˜¯å‰ææ¡ä»¶ï¼Œæ‡‚å¾—éƒ½æ‡‚ï¼‰ ä¸€ä¸ªé‚®ç®±ï¼Œæœ€å¥½æ˜¯Gmailæˆ–è€…Outlook ä¸€ä¸ªå›½å¤–æ‰‹æœºå·ï¼ˆæ²¡æœ‰çš„è¯æ¨èsms-activate.orgï¼‰ é¦–å…ˆæˆ‘ä»¬å‡†å¤‡å¥½ä¸€ä¸ªæ¥æ”¶çŸ­ä¿¡éªŒè¯ç çš„æ‰‹æœºå·ï¼Œæ‰“å¼€sms-activate.orgå¹¶æ³¨å†Œè´¦å·ï¼Œè¯­è¨€è°ƒæ•´ä¸ºä¸­æ–‡ï¼Œç‚¹å‡»å³ä¸Šè§’å……å€¼æŒ‰é’®ï¼Œæ”¯ä»˜æ–¹å¼é€‰æ‹©æ”¯ä»˜å®ã€‚ è´¦å·æœ€ä½å……å€¼é‡‘é¢æ˜¯1ç¾å…ƒï¼ŒæŒ‰ç…§å½“å‰æ±‡ç‡æŠ˜ç®—ä¸‹æ¥ä¹Ÿå°±å¤§æ¦‚ä¸ƒå—å¤šäººæ°‘å¸ï¼›æˆ‘ä»¬å¯ä»¥å…ˆå……å€¼1ç¾å…ƒã€‚åœ¨å·¦ä¾§é€‰æ‹©å›½å®¶ï¼Œç„¶åæœç´¢OpenAIï¼Œç§ŸæœŸé»˜è®¤4ä¸ªå°æ—¶ï¼Œç‚¹å‡»å‡ºç§Ÿï¼›è¿™é‡Œä¸åŒå›½å®¶çš„ä»·æ ¼ä¹Ÿä¸ç›¸åŒï¼Œä¸€èˆ¬ä¸œå—äºšå›½å®¶å¦‚å°å°¼ã€æ³°å›½ã€å°åº¦å°¼è¥¿äºšä»·æ ¼ä¼šä¾¿å®œï¼Œä½†æ˜¯ç°åœ¨ç”¨çš„äººæ¯”è¾ƒå¤šï¼Œæœ‰æ¦‚ç‡ä¼šè¢«OpenAIå±è”½æˆ–è€…æ²¡æœ‰å·ç çš„æƒ…å†µï¼›å…¶ä»–æ¬§ç¾å›½å®¶ç›¸å¯¹è´µäº›ï¼Œ1ç¾å…ƒæœ‰å¯èƒ½ä¸‹ä¸æ¥ï¼Œæ¯”å¦‚ç¬”è€…é€‰æ‹©çš„è¥¿ç­ç‰™ï¼Œå°±ç ¸ä¸‹å»æ•´æ•´2ç¾å…ƒã€‚ å¯ä»¥å¯¹ä¸åŒçš„å›½å®¶å·ç è¿›è¡Œå°è¯•ï¼Œåœ¨å››å°æ—¶å†…æ²¡æœ‰æ”¶åˆ°çŸ­ä¿¡æ˜¯å¯ä»¥é€€æ¬¾çš„ã€‚ æ‰‹æœºå·ç å‡†å¤‡å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥æ³¨å†Œäº†ï¼Œæ‰“å¼€signupé¡µé¢ï¼Œåœ¨è¾“å…¥é‚®ç®±åœ°å€ã€å¯†ç ä»¥åŠéªŒè¯é‚®ç®±åï¼Œæˆ‘ä»¬å°±æ¥åˆ°äº†éªŒè¯æ‰‹æœºå·ç çš„é¡µé¢ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸Šé¢ç§Ÿç”¨æ‰‹æœºå·ç çš„ç›¸åº”å›½å®¶ï¼Œç„¶åç²˜è´´å·ç ã€ç‚¹å‡»å‘é€å³å¯ã€‚ ç²˜è´´æ‰‹æœºå·ç æ—¶éœ€è¦æŠŠå‰é¢çš„å›½é™…åŒºå·åˆ æ‰ã€‚ å›åˆ°sms-activateé¡µé¢ï¼Œæˆ‘ä»¬åœ¨ç•™è¨€ä¸­å¯ä»¥çœ‹åˆ°æ”¶åˆ°çš„OpenAIçš„codeï¼Œç²˜è´´å³å¯ã€‚ æ³¨å†Œå®Œæˆåæˆ‘ä»¬æ‰“å¼€chat.openai.com/chatå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ å®ƒçš„ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ä¸‹é¢è¾“å…¥æ¡†ä¸­è¾“å…¥ä½ çš„é—®é¢˜ï¼Œç‚¹å‡»å‘é€æŒ‰é’®ï¼Œå°±èƒ½å–œæä¸€ä¸ªä¸ŠçŸ¥å¤©æ–‡ä¸‹çŸ¥åœ°ç†ã€æ— æ‰€ä¸èƒ½çš„è¯ç—¨æœºå™¨äººäº†ã€‚ åº”ç”¨åœºæ™¯ æ‰€ä»¥ï¼Œè¿™ä¹ˆå¤šç§‘æŠ€å¤§ä½¬ç ¸äº†å‡ ç™¾äº¿ç ”å‘å‡ºæ¥çš„ChatGPTï¼Œä»…ä»…æ˜¯ç”¨æ¥ç»™æˆ‘ä»¬èŠå¤©çš„å—ï¼Ÿè¦æƒ³äº†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä¸å¦¨å…ˆæ¥é—®é—®ChatGPTè‡ªå·±å§ã€‚ èŠå¤©æœºå™¨äºº ç¡®å®ï¼Œè®©ChatGPTç”¨ä½œèŠå¤©æœºå™¨äººï¼Œç¡®å®æœ‰ç‚¹æ€é¸¡ç”¨ç‰›åˆ€äº†ï¼›ä½†æ˜¯ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™æŠŠç‰›åˆ€ï¼Œç”¨æ¥æ€é¸¡åˆ°åº•å¤Ÿä¸å¤Ÿå¿«å‘¢ï¼Ÿæˆ‘ä»¬è¦æ˜¯æƒ³è¦æç‚¹äº‹æƒ…ï¼Œå°±éœ€è¦è°ƒç”¨APIï¼Œè€ŒOpenAIåˆšå¥½åœ¨è¿‘æœŸæä¾›äº†API Keysçš„æ¥å…¥æ–¹å¼ï¼Œå¯ä»¥å°†ChatGPTé›†æˆåˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ä¸­ã€‚è®¿é—®platform.openai.comï¼Œç‚¹å‡»API Keys =&gt; CreateæŒ‰é’®ï¼Œåœ¨å‡ºç°çš„å¼¹æ¡†å¤åˆ¶keyså³å¯ã€‚ å¼¹æ¡†éšè—åå°±çœ‹ä¸åˆ°api keyäº†ï¼Œéœ€è¦å»é‡æ–°ç”Ÿæˆã€‚ å¤åˆ¶æˆåŠŸåï¼Œè¿™é‡Œæ¨èwechatbotè¿™ä¸ªé¡¹ç›®ä¸ºä¸ªäººå¾®ä¿¡æ¥å…¥ChatGPTï¼›æœ‰å¤šç§æ–¹å¼æ¥è¿è¡Œé¡¹ç›®ï¼Œå¯ä»¥åŸºäºæºç è¿è¡Œï¼Œä¹Ÿå¯ä»¥åŸºäºdockeræ¥è¿è¡Œï¼Œä¸è¿‡éƒ½éœ€è¦ç”¨åˆ°ä¸Šé¢å¤åˆ¶å‡ºæ¥çš„keyï¼Œå…·ä½“è¿è¡Œæ–¹å¼å¯æŸ¥çœ‹é¡¹ç›®è¯´æ˜ï¼Œè¿™é‡Œä¸å†å±•å¼€äº†ï¼›å¦‚æœå¯¹dockerä¸äº†è§£çš„å°ä¼™ä¼´å¯ä»¥æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚ é¡¹ç›®è¿è¡Œåï¼Œä½¿ç”¨å¾®ä¿¡æ‰«ç ç™»å½•å³å¯ï¼Œç„¶åæˆ‘ä»¬çš„å¾®ä¿¡å·å°±è‡ªåŠ¨æ¥å…¥äº†ChatGPTçš„èŠå¤©äº†ï¼›ä½¿ç”¨æ–¹å¼ä¹Ÿååˆ†çš„ç®€å•ï¼Œç§èŠè¿™ä¸ªå¾®ä¿¡å·ä¼šç›´æ¥å›å¤ï¼Œç¾¤é‡Œéœ€è¦@è¿™ä¸ªå¾®ä¿¡å·ã€‚ é‡è¦æç¤ºï¼šæ»¥ç”¨æœ‰å¯èƒ½ä¼šè¢«å¾®ä¿¡å°ç¦å±é™©ï¼Œå°½é‡ç”¨å°å·ï¼Œæœ¬æ–‡ä¸æ‰¿æ‹…ä»»ä½•è´£ä»»ã€‚ ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ªè´¦æˆ·çš„APIçš„è°ƒç”¨ä¹Ÿæ˜¯æœ‰é™åˆ¶çš„ï¼Œç›®å‰æ˜¯5ç¾å…ƒï¼Œè¿˜æœ‰è¿‡æœŸæ—¶é—´ï¼Œå¤§å®¶å¨±ä¹ç©ç©å°±å¥½ï¼Œæœ‰æ¡ä»¶çš„å°ä¼™ä¼´å¯ä»¥è¿›è¡Œå……å€¼ã€‚ å·¥ä½œå­¦ä¹ åŠ©æ‰‹ é™¤äº†ç”¨æ¥èŠå¤©ï¼Œåœ¨å·¥ä½œå’Œå­¦ä¹ ä¸­ï¼Œä¹Ÿæ·±å—ä¼—å¤šå­¦ç”Ÿå’ŒèŒåœºäººè¿½æ§ã€‚åœ¨å›½å¤–ä¸€æ‰€å¤§å­¦å“²å­¦æ•™æˆè¯„åˆ†æ—¶ï¼Œååˆ†æƒŠå–œçš„è¯»åˆ°äº†ä¸€ç¯‡â€œå…¨ç­æœ€å¥½çš„è®ºæ–‡â€ï¼Œè®ºæ–‡ä»¥ç®€æ´çš„æ®µè½ã€æ°å½“çš„ä¸¾ä¾‹å’Œä¸¥è°¨çš„è®ºæ®æ¢è®¨äº†ä¸€ä¸ªå“²å­¦é—®é¢˜ï¼›ç„¶è€Œåœ¨æ•™æˆçš„è¿½é—®ä¸‹ï¼Œå­¦ç”Ÿæ‰¿è®¤äº†è®ºæ–‡æ˜¯ç”¨ChatGPTå†™çš„ã€‚ åœ¨å·¥ä½œä¸Šï¼ŒChatGPTä¹ŸæŒ½æ•‘äº†ä¸å°‘èŒåœºäººçš„å‘é™…çº¿ï¼Œç”¨å®ƒç”Ÿæˆäº†åŒ…æ‹¬ä¸”ä¸é™äºï¼šé¢†å¯¼è®²è¯ç¨¿ã€åª’ä½“é€šç¨¿ã€é›†å›¢ç®€ä»‹ã€é¢å¥–è¯ã€ç¥é…’è¯ã€å®£ä¼ å†Œç­‰ç­‰ï¼Œç”šè‡³è¿å‘¨æŠ¥æœˆæŠ¥ã€è¯·å‡ç†ç”±è¿™äº›å¾®ä¸è¶³é“çš„å°äº‹ï¼Œå®ƒä¹Ÿèƒ½ç»™ä½ åŒ…åœ†å’¯ã€‚ åœ¨æ–‡å­—æ¶¦è‰²æ–¹é¢ï¼ŒChatGPTä¸æ¯«ä¹Ÿä¸è¾“ä¸“ä¸šçš„ç¼–è¾‘ï¼Œåœ¨å‘¨æŠ¥æœˆæŠ¥ç”šè‡³æ˜¯å¹´æŠ¥ä¸­ï¼Œè¿™å°±ç›¸å½“å®ç”¨äº†ï¼Œæ‡‚å¾—éƒ½æ‡‚ã€‚ å¯¹äºä¸€äº›ç®€å•çš„å·¥å…·å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è®©ChatGPTç›´æ¥ç”Ÿæˆå³å¯ï¼›æ¯”å¦‚æˆ‘éœ€è¦ä¸€ä¸ªéšè—æ‰‹æœºå·ç çš„å‡½æ•°ï¼Œæè¿°è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½å³å¯ï¼›ç”šè‡³è¿˜èƒ½å¤Ÿè”ç³»ä¸Šä¸‹æ–‡ï¼Œè¿™æ˜¯ä»¥å¾€çš„äººå·¥æ™ºèƒ½æ²¡æœ‰å®ç°çš„ã€‚ ChatGPTä¸ä»…å¸®åŠ©æˆ‘ä»¬è§£å†³äº†é—®é¢˜ï¼Œè¿˜èƒ½æœ‰ç†æœ‰æ®çš„è§£é‡Šé—®é¢˜èƒŒåçš„é€»è¾‘ï¼›æ¯”å¦‚ç¬”è€…ä¸Šå‘¨åœ¨Vue3ä¸­ä½¿ç”¨KeepAliveç»„ä»¶å°±é‡åˆ°äº†é—®é¢˜ï¼Œåœ¨æœç´¢ç™¾åº¦åï¼Œè™½ç„¶æœ‰å¾ˆå¤šçš„å›ç­”ï¼Œä½†æˆ‘ä»¬è¿˜éœ€è¦åœ¨å¤§é‡çš„ç½‘é¡µä¸­å»è¿›è¡ŒäºŒæ¬¡ç­›é€‰ï¼Œæœ€åå¯èƒ½ç­›é€‰å‡ºæ¥çš„è§£å†³æ–¹å¼éƒ½æ˜¯åƒç¯‡ä¸€å¾‹ï¼ˆäº’ç›¸æŠ„è¢­ï¼‰ï¼›è€Œä¸”ç”¨ä¸‹æ¥ä¹Ÿæ˜¯é”™è¯¯ç™¾å‡ºï¼Œå„ç§æŠ¥é”™ï¼Œç”¨æˆ·ä½“éªŒååˆ†ä¸å‹å¥½ï¼Œä¼°è®¡èŠ±äº†å¤§åŠå¤©çš„æ—¶é—´æ‰è§£å†³é—®é¢˜ã€‚ æ¯”å¦‚ç™¾åº¦æ‰¾åˆ°çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå¦‚æœä½¿ç”¨çº¢è‰²çº¿æ¡†ä¸­çš„å†™æ³•ï¼Œvue-routerå°±ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„æŠ¥é”™ï¼Œè€Œä¸”å‡ºç°çš„é”™è¯¯ä¿¡æ¯æ ¹æœ¬æ²¡æ³•å»æœç´¢ã€‚ ä½†æ˜¯ç¬”è€…å¦‚æœä½¿ç”¨ChatGPTæé—®ï¼Œæˆ‘ä»¬çœ‹åˆ°å®ƒé€»è¾‘æ¸…æ™°ï¼Œè¿˜æœ‰å…·ä½“çš„æ¡ˆä¾‹å’Œæ³¨æ„çš„æç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠç»„ä»¶çš„åç§°æ”¾åˆ°includeå±æ€§ä¸‹å³å¯ï¼›åœ¨å®ƒçš„å¸®åŠ©ä¸‹ï¼Œç¬”è€…ç›¸ä¿¡åœ¨å½“æ—¶èƒ½å¤Ÿè·³å‡ºé”™è¯¯çš„é€»è¾‘ï¼Œå¤§å¤§ç¼©çŸ­è§£å†³é—®é¢˜çš„æ—¶é—´ã€‚ åœ¨æ–‡æ¡ˆç”Ÿæˆæ–¹é¢ï¼ŒChatGPTä¹Ÿæ˜¯ä¸€æŠŠå¥½æ‰‹ï¼›å½“æˆ‘ä»¬é¢å¯¹ç©ºç™½çš„æ–‡æ¡£è‹¦è‹¦æ€ç´¢çš„æ—¶å€™ï¼Œä¸å¦¨æ‰“å¼€ChatGPTï¼Œæè¿°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè½»æ¾çš„ç”Ÿæˆä¸€æ®µç²—ç•¥çš„æ–‡æ¡ˆï¼Œåœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œå†æ¬¡ç¼–è¾‘ï¼ŒèŠ‚çœæ—¶é—´å’Œå‹åŠ›ã€‚ åœ¨ä¹‹å‰åŠå…¬è½¯ä»¶ä¸€æ–‡ä¸­æˆ‘ä»¬å°±ä»‹ç»äº†ONLYOFFICEï¼Œåœ¨ONLYOFFICEå®˜ç½‘å…è´¹ä¸‹è½½æ¡Œé¢ç‰ˆæˆ–è€…å…è´¹æ³¨å†Œåœ¨çº¿ä¸ªäººç‰ˆï¼Œåœ¨åŠå…¬è½¯ä»¶é‡Œé¢ä½¿ç”¨ChatGPTï¼Œå¿«é€Ÿçš„ç”Ÿæˆæ–‡æ¡ˆã€‚ é¦–å…ˆéœ€è¦å®‰è£…æ’ä»¶ï¼Œæˆ‘ä»¬åœ¨githubå…‹éš†ä»£ç åï¼Œæ‰¾åˆ°/sdkjs-plugins/content/openai/ï¼Œé€‰æ‹©æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ°ZIPæ–‡ä»¶ï¼Œç„¶åæŠŠæ–‡ä»¶æ ¼å¼æ”¹æˆpluginï¼›æ‰“å¼€æ–‡æ¡£ç•Œé¢ï¼Œæ‰¾åˆ°æ’ä»¶ =&gt; Setting =&gt; Add pluginï¼Œé€‰æ‹©æˆ‘ä»¬çš„pluginæ–‡ä»¶ï¼Œæ’ä»¶å°±æˆåŠŸå®‰è£…äº†ã€‚ ç„¶åè¾“å…¥ä¸Šé¢è·å–åˆ°çš„API Keyï¼Œæˆ‘ä»¬çš„æ’ä»¶å°±æ¿€æ´»å®Œæˆäº†ï¼›åœ¨æ–‡æœ¬å­—æ®µä¸­æè¿°æˆ‘ä»¬æƒ³è¦ç”Ÿæˆçš„æ–‡æ¡ˆå†…å®¹ï¼Œç‚¹å‡»æäº¤æŒ‰é’®å³å¯ï¼›ChatGPTä¼šå¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œåœ¨å‡ ç§’é’Ÿå†…è¿”å›å“åº”ï¼Œå¹¶åœ¨æ–‡æ¡£ä¸­ä»¥çº¯æ–‡æœ¬çš„å½¢å¼æ’å…¥ã€‚ å¯æ›¿ä»£æ€§ å¾ˆå¤šå°ä¼™ä¼´çœ‹åˆ°è¿™é‡Œè‚¯å®šä¹Ÿä¸å¾—æƒŠå¹ï¼šè¿™ChatGPTç¡®å®å¤ªå‰å®³äº†ï¼ç¬”è€…çš„å¾ˆå¤šç¨‹åºå‘˜å°ä¼™ä¼´ä¹Ÿéƒ½åœ¨æ„Ÿå¹ï¼šæˆ‘ä»¬æ˜¯ä¸æ˜¯è¦å¤±ä¸šäº†ï¼Œä½†æ˜¯ç›®å‰çœ‹æ¥æš‚æ—¶è¿˜ä¸ä¼šï¼Œæ¯•ç«Ÿå®ƒçš„è®­ç»ƒæˆæœ¬ç¡®å®é«˜æ˜‚ï¼Œåº”ç”¨è½åœ°èµ·æ¥ä¸å®¹æ˜“ã€‚ ä½†æœ‰ä¸€äº›å²—ä½ï¼Œæ¯”å¦‚å®¢æœå²—ä½ï¼Œå°±æ¯”è¾ƒå®¹æ˜“å—åˆ°å†²å‡»äº†ï¼›ç›¸ä¿¡å¤§å®¶åº”è¯¥éƒ½æ¥åˆ°è¿‡ç±»å‹çš„æœºå™¨äººå®¢æœç”µè¯ï¼Œéƒ½æ˜¯è¯†åˆ«ç‰¹å®šçš„å…³é”®å­—ï¼ŒæŒ‰ç…§å›ºå®šæµç¨‹ï¼Œä¸€å¥è¯ä¸€å¥è¯çš„å›å¤ï¼›éšç€ChatGPTçš„å‡ºç°ï¼Œç›¸ä¿¡æœªæ¥æœºå™¨äººå®¢æœèƒ½å¤Ÿåº”å¯¹æ›´åŠ å¤æ‚çš„åœºæ™¯ï¼Œæ›´åŠ ç²¾å‡†çš„ç†è§£é¡¾å®¢çš„éœ€æ±‚ï¼Œä»è€Œçµæ´»çš„åº”å¯¹ã€‚ ChatGPTä¼šå®Œå…¨æ›¿ä»£ç¨‹åºå‘˜çš„å·¥ä½œå—ï¼Ÿ åœ¨ç¼–ç¨‹æ–¹é¢ï¼Œç¬”è€…è§‰å¾—ChatGPTåœ¨ç›®å‰é˜¶æ®µè¿˜ä¸èƒ½å®Œå…¨çš„å–ä»£ç¨‹åºå‘˜ï¼›åœ¨ç”Ÿæˆä»£ç ç‰‡æ®µè™½ç„¶èƒ½å¤Ÿå¾ˆå¥½çš„å®ç°ï¼Œæœ‰ç‚¹ç±»ä¼¼ä¹‹å‰çš„Copilotï¼›ä½†æ˜¯åœ¨å¤æ‚çš„é¡¹ç›®ä¸­ï¼Œéœ€è¦å»ç†è§£ä¸åŒæ–‡ä»¶æ¨¡å—çš„å«ä¹‰ï¼Œä»è€Œè¿›è¡Œè°ƒç”¨ï¼ŒChatGPTå°±æ— æ³•å–ä»£äº†ï¼›åœ¨ä»£ç bugä¿®å¤ã€å‰åç«¯è”è°ƒã€è·¨éƒ¨é—¨åè°ƒã€å‡ºå·®å¯¹æ¥ç­‰éœ€è¦ç»„ç»‡åè°ƒçš„å·¥ä½œä¸Šæ›´æ˜¯æ— æ³•æ›¿ä»£äººå·¥ã€‚ ç¬”è€…è®¤ä¸ºChatGPTå¸¦æ¥æ›´å¤šçš„æ˜¯ç¼–ç¨‹æ•ˆç‡çš„æå‡ï¼›æ¯”å¦‚åŸæ¥æˆ‘ä»¬éœ€è¦ä¸€å¤©åšçš„å·¥ä½œé‡ï¼Œæœ‰äº†å®ƒçš„ååŠ©ï¼Œä¸€äº›é‡å¤ç®€å•çš„æ¨¡å—æˆ‘ä»¬ç›´æ¥ä¸¢ç»™ä»–å°±èƒ½ç”Ÿæˆäº†ï¼Œæœ€ç»ˆå¯èƒ½ä¸åˆ°åŠå¤©å°±èƒ½å¤Ÿå®Œæˆäº†ã€‚ å•†æ±¤ç§‘æŠ€è‘£äº‹é•¿ï¼šæœªæ¥è½¯ä»¶çš„ä»£ç å¯èƒ½80%éƒ½æ˜¯ç”±AIç”Ÿæˆçš„ã€‚ è™½ç„¶ç›®å‰çœ‹æ¥å¹¶ä¸èƒ½å®Œå…¨çš„æ›¿ä»£ï¼Œéšç€ç¡¬ä»¶æˆæœ¬ä¸æ–­é™ä½ã€æœºå™¨å­¦ä¹ èƒ½åŠ›æé«˜ï¼›å½“æœºå™¨è®­ç»ƒçš„æˆæœ¬ä½äºç¨‹åºå‘˜çš„å·¥èµ„æ—¶ï¼Œä½ è§‰å¾—èµ„æœ¬å®¶åœ¨éœ€è¦äº¤äº”é™©ä¸€é‡‘ã€æ—¶ä¸æ—¶è¿˜è¦æ‘¸é±¼çš„ä½ å’Œä¸‰å››æ¯›ä¸€åº¦ç”µã€24å°æ—¶ä¸åœè¿è¡Œçš„æœºå™¨ä¹‹é—´å¦‚ä½•æŠ‰æ‹©å‘¢ï¼Ÿç›¸ä¿¡æœªæ¥åŸæœ¬å¯èƒ½éœ€è¦æ•°åäººçš„ç ”å‘éƒ¨é—¨ï¼Œæœ€ç»ˆåªéœ€è¦ä¸‰å››ä¸ªæ ¸å¿ƒå·¥ç¨‹å¸ˆç»´æŠ¤å°±èƒ½ä¿è¯ä¸šåŠ¡çš„æ­£å¸¸è¿›è¡Œã€‚ æœªæ¥æˆ‘ä»¬å¦‚ä½•å»é€‰æ‹©å°±ä¸šï¼Ÿ æœªæ¥ChatGPTè™½ç„¶ä¼šæ›¿ä»£ä¸€éƒ¨åˆ†ä½ç«¯çš„å²—ä½ï¼Œä½†æ˜¯è‚¯å®šä¹Ÿä¼šä¸æ–­åˆ›é€ å‡ºæ–°çš„èŒä½ï¼›å°±åƒè®¡ç®—æœºçš„å‡ºç°æ·˜æ±°äº†æ‰“å­—å‘˜ï¼Œä½†æ˜¯åˆ›é€ äº†å¤§é‡çš„ç¨‹åºå‘˜å²—ä½ä¸€æ ·ï¼Œäººå·¥æ™ºèƒ½åˆ›é€ å‡ºå¾ˆå¤šæ–°å…´å²—ä½ï¼Œæ¯”å¦‚æç¤ºè¯é¡¾é—®å¸ˆï¼ˆç¬”è€…è‡ªå·±è‡†æƒ³ï¼‰ï¼Œä¸“ä¸šè´Ÿè´£ç»™ChatGPTæé—®ç”Ÿæˆç›¸åº”æ–‡æ¡ˆæˆ–è€…ç´ æï¼›è¿™æ˜¯ç¤¾ä¼šè¿›æ­¥çš„å¿…ç„¶è¶‹åŠ¿ï¼Œä¹Ÿæ˜¯é€¼ç€è¢«å†å²å¤§åŠ¿è£¹æŒŸå‰è¡Œçš„æˆ‘ä»¬ï¼Œä¸æ–­çš„å­¦ä¹ è¿›æ­¥ã€‚ åœ¨å‰ç«¯æ–¹é¢è‚¯å®šä¹Ÿä¼šæ·˜æ±°å¾ˆå¤šåˆçº§çš„ç¨‹åºå‘˜ï¼Œç¨‹åºå‘˜çš„é—¨æ§›ä¸æ–­é™ä½ï¼›å› æ­¤æˆ‘ä»¬éœ€è¦åœ¨äººå·¥æ™ºèƒ½å–ä»£æˆ‘ä»¬ä¹‹å‰ä¸æ–­çš„å­¦ä¹ è¿›æ­¥ï¼›ç¬”è€…è®¤ä¸ºåœ¨WebGLæ–¹é¢ï¼Œäººå·¥æ™ºèƒ½å¯¹äºå¤æ‚å›¾å½¢åŒ–å’Œå¯¹ç¾å­¦çš„ç†è§£è¿˜æ˜¯ä¸èƒ½å¤Ÿæ›¿ä»£äººå·¥ï¼Œå› æ­¤å‰ç«¯çš„å°ä¼™ä¼´å¯ä»¥å°è¯•è¿›é˜¶è¿™å—é¢†åŸŸï¼ŒåŒæ—¶é«˜çº§æ¶æ„å¸ˆä¹Ÿæ˜¯ä¸é”™çš„æ–¹å‘ã€‚ æ€»ç»“å±•æœ› ç›¸ä¿¡åœ¨ä¸ä¹…çš„æœªæ¥ï¼ŒChatGPTèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æå¤§çš„æå‡ç”Ÿäº§åŠ›å’Œå­¦ä¹ æ•ˆç‡ï¼›é¢å¯¹æ–°æŠ€æœ¯æˆ–æ–°æ–‡ç« æ—¶ï¼Œä¸éœ€è¦å†å®Œæ•´çš„é˜…è¯»ï¼Œè®©ChatGPTç”Ÿæˆæ–‡ç« çš„å¤§çº²å’Œä¸»è¦å†…å®¹ï¼Œå¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå­¦ä¹ ï¼›åœ¨å†™æ–‡æ¡£æ—¶ï¼Œä¹Ÿèƒ½å¤Ÿè®©å®ƒå¿«é€Ÿç”Ÿæˆä¸€ç¯‡æ–‡å­—ä¼˜ç¾çš„å†…å®¹ã€‚ æˆ‘ä»¬æ­£å¤„åœ¨ä¸€ä¸ªè§è¯å†å²çš„æ—¶åˆ»ï¼Œæ²¡äººèƒ½å¤Ÿåœ¨äººå·¥æ™ºèƒ½çš„å†å²æ´ªæµé¢å‰ç‹¬å–„å…¶èº«ï¼Œä¿æŒå‚²æ…¢ä¸å±‘çš„æ€åº¦åªä¼šåŠ é€Ÿè¢«æ·˜æ±°ï¼Œæ­£å¦‚å°è¯´ã€Šä¸‰ä½“ã€‹ä¸­è¯´çš„é‚£æ ·ï¼š å¼±å°å’Œæ— çŸ¥ä¸æ˜¯ç”Ÿå­˜çš„éšœç¢ï¼Œå‚²æ…¢æ‰æ˜¯ã€‚ åœ¨ç”µå½±æµæµªåœ°çƒ2ä¸­ï¼Œåˆ˜åŸ¹å¼ºé—®Mossï¼Œäººç±»èƒ½æ´»ä¸‹æ¥å—ï¼ŸMossè¯´äººç±»çš„å‘½è¿å–å†³äºè‡ªå·±çš„é€‰æ‹©ï¼›å°±åƒæˆ‘ä»¬ç°åœ¨é—®ChatGPTä¼šä¸ä¼šå–ä»£ç¨‹åºå‘˜ä¸€æ ·ï¼Œè™½ç„¶å®ƒå‘Šè¯‰æˆ‘ä»¬è¿˜æ— æ³•å®Œå…¨å–ä»£ï¼Œä½†æ˜¯å¦‚ä½•åšå‡ºé€‰æ‹©ï¼Œæ˜¯å…³ç³»ç€æˆ‘ä»¬æ¯ä¸ªäººçš„å‘½è¿ï¼›è€Œå½“å†å²çš„è½¦è½®ç¼“ç¼“é©¶è¿‡æ—¶ï¼Œæˆ‘ä»¬å”¯ä¸€è¦åšçš„äº‹ï¼Œå°±æ˜¯å°½é‡è·‘åœ¨å®ƒçš„å‰é¢ã€‚","tags":[{"name":"èŠå¤©","slug":"Chat","permalink":"https://xieyufei.com/tags/Chat/"},{"name":"æœºå™¨","slug":"Machine","permalink":"https://xieyufei.com/tags/Machine/"}]},{"title":"GSAPä»å…¥é—¨åˆ°ç²¾é€š","date":"2023-02-06T12:00:00.000Z","path":"2023/02/06/GSAP-Learn.html","text":"æˆ‘ä»¬åœ¨ç½‘ä¸Šæµè§ˆæ—¶ï¼Œç»å¸¸èƒ½çœ‹åˆ°å¾ˆå¤šç½‘ç«™ï¼Œéšç€é¡µé¢æ»šåŠ¨æ¡å‘ä¸‹æ»‘åŠ¨æ—¶ï¼Œæœ‰éå¸¸ä¸°å¯Œçš„é¡µé¢åŠ¨ç”»æ•ˆæœï¼›ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´ä¹Ÿéƒ½å¾ˆå¥½å¥‡ï¼Œè¿™æ ·çš„ç½‘ç«™æ•ˆæœæ˜¯å¦‚ä½•åšå‡ºæ¥çš„ã€‚æˆ‘ä»¬æœ¬æ–‡å°±æ¥æ·±å…¥çš„å­¦ä¹ ä¸€ä¸‹GSAPè¿™ä¸ªåº“çš„ç”¨æ³•ï¼Œä¸ºåé¢å®ç°é…·ç‚«çš„åŠ¨ç”»æ•ˆæœæ‰“ä¸‹åŸºç¡€ã€‚ é¦–å…ˆè¿™æ ·çš„æ»šåŠ¨æ•ˆæœå’Œfullpage.jsã€Swiper.jså…¨å±ç¿»é¡µæ»šåŠ¨è½®æ’­çš„æ•ˆæœæ˜¯ä¸ä¸€æ ·çš„ï¼Œé¡µé¢å…ƒç´ çš„ä½ç½®æåº¦çš„ä¾èµ–äºæ»šåŠ¨æ¡çš„ä½ç½®ï¼Œå› æ­¤æ˜¯éœ€è¦ç›‘å¬æ»šåŠ¨æ¡äº‹ä»¶ï¼›ç¬”è€…åœ¨è°ƒç ”äº†better-scroll.jsã€scrollReveal.jså’ŒiScroll.jsç­‰ä¸€ç³»åˆ—æ’ä»¶åï¼Œå‘ç°è¿™äº›æ’ä»¶å¹¶ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚ ç¬”è€…ä¹Ÿæ›¾ä¸€åº¦æƒ³è¿‡ä¸ä¾èµ–åº“ï¼Œè‡ªå·±æ¥å®ç°ç±»ä¼¼çš„æ•ˆæœï¼Œä¸å°±æ˜¯ç›‘å¬é¡µé¢æ»šåŠ¨ä¹ˆï¼›ä½†æ˜¯æƒ³äº†æƒ³æ»šåŠ¨æ—¶è¿™ä¹ˆå¤šå…ƒç´ çš„åŠ¨ç”»æ•ˆæœå¯¼è‡´çš„æ€§èƒ½é—®é¢˜ä»¥åŠé¡µé¢resizeåå¦‚ä½•æ¥é‡æ–°è®¡ç®—ä¹Ÿæ˜¯ä¸å°çš„é—®é¢˜ï¼Œäºæ˜¯å°±æ‰“æ¶ˆäº†ä¸åˆ‡å®é™…çš„å¿µå¤´ã€‚ åœ¨æ‰’å¼€å¾ˆå¤šç½‘ç«™çš„æºä»£ç ä¹‹åï¼Œç¬”è€…æ‰¾åˆ°äº†ä¸€ä¸ªå¾ˆå¤šç½‘ç«™éƒ½åœ¨ç”¨çš„åŠ¨ç”»åº“ï¼šGSAPï¼›ä½†æ˜¯å¾ˆå¥‡æ€ªï¼Œç½‘ç«™æœç´¢è¿™ä¸ªåº“ï¼Œæˆ‘ä»¬å‘ç°å®ƒçš„æ•™ç¨‹éå¸¸çš„å°‘ï¼Œè¿™ä¹ˆå¥½ç”¨çš„ä¸€ä¸ªåŠ¨ç”»åº“ä¸åº”è¯¥èµ„æ–™è¿™ä¹ˆåŒ®ä¹ï¼›ä½†æ˜¯çœ‹åˆ°å®˜ç½‘å…¨è‹±æ–‡çš„æ•™ç¨‹å’Œæœ‰æ—¶å€™æ— æ³•è®¿é—®demoæ•™ç¨‹åï¼Œä»¥åŠæœ‰ç‚¹éš¾ç†è§£çš„å„ç§æ¦‚å¿µåï¼Œæˆ‘å¥½åƒçŸ¥é“äº†åŸå› ã€‚ ç”±äºæˆ‘ä»¬è¦å®ç°çš„å¾ˆå¤šåŠ¨ç”»æ•ˆæœéƒ½ä¾èµ–äºGSAPï¼Œå› æ­¤æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹GSAPçš„ä½¿ç”¨æ•™ç¨‹ã€‚ GSAP é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“è¿™ä¸ªåº“èƒ½åšä»€ä¹ˆï¼ŒThe GreenSock Animation Platform (GSAP)æ˜¯ä¸€ä¸ªåŠŸèƒ½ååˆ†å¼ºå¤§çš„åŠ¨ç”»å¹³å°ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°å¤§éƒ¨åˆ†çš„åŠ¨ç”»éœ€æ±‚ï¼Œæ„å»ºé«˜æ€§èƒ½çš„ã€é€‚ç”¨äºæ‰€æœ‰ä¸»è¦æµè§ˆå™¨çš„é«˜æ€§èƒ½åŠ¨ç”»ï¼›GSAPéå¸¸çš„çµæ´»ï¼Œå¯ä»¥åœ¨ä»»ä½•æ¡†æ¶ä¸Šå¤„ç†é¡µé¢èƒ½å¤Ÿæ‰€æœ‰é€šè¿‡jsæ”¹å˜çš„å…ƒç´ ï¼Œä¸ä»…å¯ä»¥å¯¹divçš„csså±æ€§è¿›è¡ŒåŠ¨ç”»ï¼Œè¿˜æ˜¯SVGã€Reactã€Vueã€WebGLï¼Œç”šè‡³å’ŒThreejsä¸€èµ·ä½¿ç”¨ã€‚ é™¤äº†GSAPæ ¸å¿ƒåº“å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå®ç”¨çš„æ’ä»¶ï¼Œæ¯”å¦‚ç»“åˆScrollTriggeræ’ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°éå¸¸éœ‡æ’¼çš„æ»šåŠ¨è§¦å‘æ•ˆæœï¼›åŒæ—¶ä¹Ÿä¸éœ€è¦æ‹…å¿ƒå“åº”å¼çš„é—®é¢˜ï¼ŒGSAPç¡®ä¿é¡¹ç›®å“åº”è¿…é€Ÿã€é«˜æ•ˆä¸”æµç•…ã€‚ åŠ¨ç”»å±æ€§ æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œå…ˆæŠŠä¸€ä¸ª.boxå…ƒç´ æ²¿ç€Xè½´ç§»åŠ¨200pxï¼› 1gsap.to(&#x27;.box&#x27;, &#123; x: 200 &#125;); å¦‚æœæˆ‘ä»¬å¯¹.boxå…ƒç´ è¿›è¡Œå…ƒç´ æ£€æŸ¥ï¼Œæˆ‘ä»¬ä¼šå‘ç°GSAPå®é™…ä¸Šæ˜¯ä¸åœçš„ä¿®æ”¹transformå±æ€§ï¼Œç›´è‡³æœ€ç»ˆåœç•™åœ¨transform: translate(200px, 0px)ï¼›æˆ‘ä»¬ç»§ç»­å›åˆ°ä¸Šé¢çš„ä»£ç ã€‚ åœ¨ä¸Šæ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å‘ç°è¿™æ®µä»£ç åŒ…å«æœ‰3å±‚å«ä¹‰ï¼šå‡½æ•°ã€ç›®æ ‡å’Œå˜é‡ï¼›é¦–å…ˆç›®æ ‡å°±æ˜¯æˆ‘ä»¬æƒ³è¦ç§»åŠ¨çš„å…ƒç´ ï¼Œå¯ä»¥æ˜¯CSSé€‰æ‹©å™¨ï¼Œä¹Ÿå¯ä»¥ä½¿domå…ƒç´ ï¼Œç”šè‡³æ˜¯ä¸€ä¸²æ•°ç»„ï¼š 12345678910111213// CSSé€‰æ‹©å™¨gsap.to(&quot;.box&quot;, &#123; x: 200 &#125;);gsap.to(&quot;#box1&quot;, &#123; x: 200 &#125;);// domå…ƒç´ const box = document.querySelector(&quot;.box&quot;);gsap.to(box, &#123; x: 200 &#125;)// å…ƒç´ æ•°ç»„let square = document.querySelector(&quot;.square&quot;);let circle = document.querySelector(&quot;.circle&quot;); gsap.to([square, circle], &#123; x: 200 &#125;) ç„¶åæ˜¯å‡½æ•°ï¼Œæœ‰å››ç§ç±»å‹çš„åŠ¨ç”»å‡½æ•°ï¼š gsap.toï¼šæœ€å¸¸ç”¨çš„åŠ¨ç”»ç±»å‹ï¼Œä»å½“å‰çŠ¶æ€å¼€å§‹ã€‚ gsap.fromï¼šå’Œ.toç›¸åï¼Œä»ä¸€ä¸ªçŠ¶æ€å¼€å§‹åˆ°å½“å‰çŠ¶æ€ã€‚ gsap.fromToï¼šå¯ä»¥è‡ªå®šä¹‰å¼€å§‹å’Œç»“æŸçŠ¶æ€ã€‚ gsap.setï¼šç«‹å³è®¾ç½®å±æ€§ï¼Œæ²¡æœ‰åŠ¨ç”»æ•ˆæœã€‚ æˆ‘ä»¬ç›´æ¥çœ‹æ•ˆæœå°±èƒ½æ˜ç™½è¿™å‡ ä¸ªå‡½æ•°çš„æ„ä¹‰äº†ã€‚ 123gsap.from(&quot;.box&quot;, &#123; x: 300,&#125;); æŸ¥çœ‹demo3æ•ˆæœ 1234567891011gsap.fromTo( &quot;.box&quot;, &#123; x: 0, y: 0, &#125;, &#123; x: 400, y: 50, &#125;,); æŸ¥çœ‹demo4æ•ˆæœ 1234gsap.set(&quot;.box&quot;, &#123; x: 400, y: 50,&#125;); æŸ¥çœ‹demo5æ•ˆæœ æœ€åæ˜¯å˜é‡å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¯ä»¥åŒ…å«çš„ä¿¡æ¯ç§ç±»å°±æ¯”è¾ƒä¸°å¯Œäº†ï¼Œå¯ä»¥æ˜¯æƒ³è¦åŠ¨ç”»çš„ä»»æ„CSSå±æ€§ï¼Œä¹Ÿå¯ä»¥æ˜¯å½±å“åŠ¨ç”»è¡¨ç°å½¢å¼çš„ç‰¹æ®Šå±æ€§ï¼Œæ¯”å¦‚durationæŒç»­æ—¶é—´ã€repeaté‡å¤æ¬¡æ•°ã€‚ 12345678gsap.to(target, &#123; x: 400, y: 50, rotation: 180, // ç‰¹æ®Šå±æ€§ duration: 3, repeat: 2&#125;); æŸ¥çœ‹demo6æ•ˆæœ GSAPå¯ä»¥åŠ¨ç”»ä»»ä½•å±æ€§ï¼Œæ²¡æœ‰ç¡®å®šçš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬CSSå±æ€§ã€è‡ªå®šä¹‰å¯¹è±¡å±æ€§ç”šè‡³CSSå˜é‡å’Œå¤æ‚çš„å­—ç¬¦ä¸²ï¼Œæœ€å¸¸è§çš„åŠ¨ç”»å±æ€§æ˜¯transformså’Œé€æ˜åº¦ã€‚transformså±æ€§æ˜¯åŠ¨ç”»ä¸­æ€§èƒ½æ¶ˆè€—æœ€å°çš„ï¼Œå¯ä»¥ç”¨å®ƒæ¥ç§»åŠ¨å…ƒç´ ã€æ—‹è½¬æˆ–è€…æ”¾å¤§ç¼©å°ï¼Œå› ä¸ºä»–ä»¬ä¸ä¼šå½±å“é¡µé¢çš„å¸ƒå±€ï¼Œæ›´ä¸ä¼šä½¿é¡µé¢é‡æ’ï¼Œå› æ­¤æœ‰ç€è¾ƒå¥½çš„æ€§èƒ½è¡¨ç°ã€‚ å°½å¯èƒ½çš„ä½¿ç”¨transformsï¼Œè€Œä¸æ˜¯å¸ƒå±€å±æ€§ï¼Œä¾‹å¦‚topã€leftæˆ–è€…marginï¼Œæœ‰æ›´å¹³æ»‘çš„åŠ¨ç”»ä½“éªŒã€‚ æˆ‘ä»¬å¯èƒ½æ¯”è¾ƒç†Ÿæ‚‰ä»¥ä¸‹çš„transformså±æ€§ï¼š 1transform: rotate(360deg) translateX(10px) translateY(50%); GSAPæä¾›äº†ä¸‹é¢çš„ç¼©å†™å½¢å¼ï¼Œä¸Šé¢çš„transformså±æ€§å¯ä»¥ç›´æ¥ç¼©å†™æˆä¸‹é¢çš„å±æ€§ï¼ˆyPercentè¡¨ç¤ºç™¾åˆ†æ¯”å…ƒç´ çš„é«˜åº¦ï¼‰ï¼š 1&#123; rotation: 360, x: 10, yPercent: 50 &#125; GSAPæ”¯æŒCSSå±æ€§è½¬ä¸ºå°é©¼å³°å½¢å¼ï¼Œä¾‹å¦‚background-colorå˜æˆbackgroundColor é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬ä¹Ÿå‘ç°äº†ï¼Œé»˜è®¤æƒ…å†µä¸‹GSAPä¼šç»™transformå±æ€§ä½¿ç”¨pxå’Œdegreeså•ä½ï¼Œæ¯”å¦‚&#123;x: 10, rotation: 360&#125;å°±è¡¨ç¤ºxè½´10pxï¼Œæ—‹è½¬360åº¦ï¼›ä½†æ˜¯æˆ‘ä»¬æœ‰æ—¶å€™æƒ³è¦ä½¿ç”¨å…¶ä»–çš„å•ä½ï¼Œæ¯”å¦‚vwï¼Œradiansæˆ–è€…ç›¸å¯¹å•ä½ã€‚ 1234567x: 200, // é»˜è®¤pxx: &quot;+=200&quot; // ç›¸å¯¹å€¼x: &#x27;40vw&#x27;, // è§†çª—å•ä½x: () =&gt; window.innerWidth / 2, // å‡½æ•°è®¡ç®— rotation: 360 // é»˜è®¤è§’åº¦rotation: &quot;1.25rad&quot; // ä½¿ç”¨å¼§åº¦å•ä½ GSAPçš„ç¥å¥‡ä¹‹å¤„åœ¨äºï¼Œä¸ä»…èƒ½å¤Ÿå¯¹domå…ƒç´ åŠ¨ç”»ï¼Œè¿˜èƒ½å¤Ÿå¯¹édomå…ƒç´ ï¼Œæ¯”å¦‚svgã€jså¯¹è±¡ç­‰è¿›è¡ŒåŠ¨ç”»æ“ä½œï¼›å¯¹äºsvgå…ƒç´ ï¼Œæˆ‘ä»¬æ·»åŠ attrå±æ€§é¢å¤–çš„å¤„ç†ä¸€äº›svgçš„å±æ€§ï¼Œåƒwidthã€heightã€fillã€strokeã€opacityç­‰ã€‚ æŸ¥çœ‹demo8æ•ˆæœ 12345678910gsap.to(&quot;.svgBox&quot;, &#123; duration: 2, x: 100, xPercent: -100, // svgå±æ€§ attr: &#123; fill: &quot;#8d3dae&quot;, rx: 50, &#125;,&#125;); ç”šè‡³ï¼Œæˆ‘ä»¬å¯¹jså¯¹è±¡è¿›è¡ŒåŠ¨ç”»æ—¶ï¼Œä¸éœ€è¦ä»»ä½•domå…ƒç´ ï¼Œé’ˆå¯¹ä»»æ„jså¯¹è±¡çš„ä»»æ„å±æ€§è¿›è¡ŒåŠ¨ç”»ï¼ŒonUpdateå‡½æ•°ç”¨äºç›‘å¬åŠ¨ç”»çš„æ›´æ–°è¿‡ç¨‹ï¼š 123456let obj = &#123; myNum: 10, myColor: &quot;red&quot; &#125;;gsap.to(obj, &#123; myNum: 200, myColor: &quot;blue&quot;, onUpdate: () =&gt; console.log(obj.myNum, obj.myColor)&#125;); ç‰¹æ®Šå±æ€§ ç‰¹æ®Šå±æ€§ç”¨æ¥è°ƒæ•´åŠ¨ç”»çš„è¡¨ç°å½¢å¼ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢ç”¨åˆ°äº†repeatå’Œdurationï¼Œä¸‹é¢çš„æ–‡æ¡£ä¸­æä¾›äº†ä¸€äº›å¸¸ç”¨çš„å±æ€§ï¼š å±æ€§å æè¿° duration åŠ¨ç”»çš„æŒç»­æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰é»˜è®¤0.5ç§’ delay åŠ¨ç”»å»¶è¿Ÿæ—¶é—´ repeat åŠ¨ç”»é‡å¤çš„æ¬¡æ•° yoyo å¸ƒå°”å€¼ï¼Œå¦‚æœä¸ºtrueï¼Œæ¯æ¬¡å…¶ä»–åŠ¨ç”»å°±ä¼šå¾€ç›¸åæ–¹å‘è¿åŠ¨ï¼ˆåƒyoyoçƒï¼‰é»˜è®¤false stagger æ¯ä¸ªç›®æ ‡åŠ¨ç”»å¼€å§‹ä¹‹é—´çš„æ—¶é—´ï¼ˆç§’ï¼‰ ease æ§åˆ¶åŠ¨ç”»æœŸé—´çš„å˜åŒ–ç‡ï¼Œé»˜è®¤â€power1.outâ€ onComplete åŠ¨ç”»å®Œæˆæ—¶çš„å›è°ƒå‡½æ•° repeatå±æ€§å°±æ˜¯é‡å¤çš„æ¬¡æ•°ï¼Œä¼šè®©åŠ¨ç”»æ‰§è¡Œå¤šæ¬¡ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å¡«ä¸€ä¸ªæ•°å€¼2ï¼Œä½†å®é™…åŠ¨ç”»çš„æ¬¡æ•°æ˜¯3ï¼Œå› æ­¤æˆ‘ä»¬æ€»ç»“å‡ºæ¥å…¬å¼ï¼šçœŸå®è¿åŠ¨æ¬¡æ•° = repeatå±æ€§ + 1ã€‚ å¦‚æœæˆ‘ä»¬æƒ³è®©åŠ¨ç”»ä¸€ç›´é‡å¤ä¸‹å»ï¼Œä½¿ç”¨repeat: -1ã€‚ repeatä¸€èˆ¬ä¼šå’Œyoyoå±æ€§ä¸€èµ·ä½¿ç”¨ï¼Œå½“yoyoä¸ºtrueæ—¶ï¼Œåœ¨æ¯æ¬¡åŠ¨ç”»ç»“æŸéƒ½ä¼šåå‘è¿åŠ¨ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªè¿åŠ¨å¾ªç¯åŒ…å«ä¸€ä¸ªæ­£å‘å’Œåæ­£è¿åŠ¨ï¼Œåå‘è¿åŠ¨ä¹Ÿè®¡å…¥è¿åŠ¨çš„æ¬¡æ•°ä¸­ã€‚ 12345678gsap.to(&quot;.box&quot;, &#123; rotation: 360, x: 300, xPercent: -100, duration: 2, repeat: 2, yoyo: true,&#125;); æˆ‘ä»¬è¿™è¾¹repeatå†™çš„2ï¼Œå®é™…åŠ¨ç”»ä¸­ï¼Œæ­£å¥½æ˜¯3æ¬¡è¿åŠ¨ï¼Œ1.5æ¬¡å¾ªç¯å¾€å¤è¿åŠ¨ã€‚ delayä¹Ÿéå¸¸å¥½ç†è§£ï¼ŒåŠ¨ç”»å¼€å§‹å»¶è¿Ÿæ—¶é—´ï¼Œå¦‚æœåé¢æ˜¯repeaté‡å¤çš„åŠ¨ç”»ï¼Œåˆ™ä¸ä¼šæœ‰å»¶è¿Ÿäº†ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦ä¸ºåé¢çš„ä»»ä½•é‡å¤è¿åŠ¨æ·»åŠ å»¶è¿Ÿï¼Œå¯ä»¥ä½¿ç”¨repeatDelayå±æ€§ã€‚ 123456789101112gsap.to(&quot;.green&quot;, &#123; rotation: 360, duration: 1, delay: 1, repeat: 1,&#125;);gsap.to(&quot;.purple&quot;, &#123; rotation: 360, duration: 1, repeat: 1, repeatDelay: 1,&#125;); æŸ¥çœ‹demo11æ•ˆæœ æˆ‘ä»¬å‘ç°åŒæ ·æ˜¯æ€»è®¡2æ¬¡çš„é‡å¤æ—‹è½¬è¿åŠ¨ï¼Œç»¿çš„divåŠ¨ç”»å¼€å§‹å‰æœ‰åœé¡¿ï¼Œè€Œåé¢çš„é‡å¤è¿åŠ¨å°±æ²¡æœ‰åœé¡¿äº†ï¼›è€Œç´«è‰²çš„divåŠ¨ç”»å¼€å§‹å‰æ²¡æœ‰åœé¡¿ï¼Œåœ¨åé¢çš„æ¯æ¬¡é‡å¤è¿åŠ¨åˆ™ä¼šæœ‰åœé¡¿ï¼Œå°±æ˜¯repeatDelayçš„ä½œç”¨ã€‚ easeé€Ÿåº¦æ›²çº¿ä¹Ÿæ˜¯åŠ¨ç”»æ•ˆæœçš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸åŒçš„é€Ÿåº¦æ›²çº¿æ—‹è½¬æ•ˆæœä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ 12345678910gsap.to(&quot;.green&quot;, &#123; rotation: 360, duration: 2, ease: &quot;none&quot;,&#125;);gsap.to(&quot;.purple&quot;, &#123; rotation: 360, duration: 2, ease: &quot;bounce.out&quot;,&#125;); staggerå±æ€§ä¹Ÿæ˜¯æ¯”è¾ƒæœ‰è¶£çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨å®ƒæ§åˆ¶å¤šä¸ªç›®æ ‡ä¹‹é—´åŠ¨ç”»çš„å»¶è¿Ÿå·®ï¼Œå½¢æˆå¥‡å¦™åˆå¥½çœ‹çš„äº¤é”™æ•ˆæœã€‚ 1234567gsap.to(&quot;.box&quot;, &#123; duration: 0.5, opacity: 0, y: -100, stagger: 0.1, ease: &quot;back.in&quot;,&#125;); æŸ¥çœ‹demo13æ•ˆæœ æ¯”å¦‚è¿™æ ·ï¼Œè®©diväº¤é”™æ¶ˆå¤±çš„åœºæ™¯ï¼›æˆ–è€…äº¤é”™åŠ¨ç”»ä¸€ä¸ªé˜µåˆ—ï¼Œåªéœ€è¦å‘Šè¯‰GSAPæœ‰å¤šå°‘è¡Œåˆ—ã€‚ 12345678910111213gsap.to(&quot;.box&quot;, &#123; scale: 0.1, y: 30, yoyo: true, repeat: -1, ease: &quot;power1.inOut&quot;, delay: 1, stagger: &#123; amount: 1.5, grid: &quot;auto&quot;, from: &quot;center&quot;, &#125;,&#125;); æŸ¥çœ‹demo14æ•ˆæœ æ—¶é—´çº¿timeline æˆ‘ä»¬åŠ¨ç”»ç»å¸¸ä¼šé‡åˆ°å¤šä¸ªå¯¹è±¡çš„æƒ…å†µï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„delayè¿›è¡Œç®€å•çš„æ§åˆ¶ï¼Œå»¶è¿Ÿç‰©ä½“çš„åŠ¨ç”»å¼€å§‹æ—¶é—´ï¼›ä½†æ˜¯å¦‚æœä¸­é—´æŸä¸ªç‰©ä½“çš„åŠ¨ç”»æ‰§è¡Œæ—¶é—´çªç„¶å»¶é•¿äº†ï¼Œé‚£ä¹ˆå…¶åé¢æ‰€æœ‰çš„åŠ¨ç”»æ—¶é—´éœ€è¦è¿›è¡Œæ‰‹åŠ¨è¿›è¡Œå»¶è¿Ÿï¼Œè¿™æ˜¾å¾—éå¸¸ä¸æ–¹ä¾¿ï¼›å› æ­¤æˆ‘ä»¬éœ€è¦å¼•å…¥æ—¶é—´çº¿timelineçš„æ¦‚å¿µã€‚ æ—¶é—´çº¿æ˜¯GSAPæœ€é‡è¦çš„æ¦‚å¿µä¹‹ä¸€ æˆ‘ä»¬é€šè¿‡gsap.timeline()åˆ›å»ºä¸€ä¸ªæ—¶é—´çº¿ï¼Œç„¶åé€šè¿‡æ—¶é—´çº¿æ§åˆ¶æ¯ä¸€ä¸ªåŠ¨ç”»é¡ºåºæ‰§è¡Œï¼›è¿™æ ·å³ä½¿æˆ‘ä»¬ä¿®æ”¹ä¸­é—´æŸä¸ªåŠ¨ç”»çš„durationï¼Œä¹Ÿä¸ä¼šå½±å“åç»­æ—¶é—´çº¿ã€‚ 12345678910111213const t1 = gsap.timeline();t1.to(&quot;.green&quot;, &#123; x: 600, duration: 2,&#125;);t1.to(&quot;.purple&quot;, &#123; x: 600, duration: 1,&#125;);t1.to(&quot;.orange&quot;, &#123; x: 600, duration: 1,&#125;); æŸ¥çœ‹demo15æ•ˆæœ ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ä¸€ä¸ªåŠ¨ç”»å¼€å§‹çš„åŒæ—¶ï¼Œæ‰§è¡Œå¦ä¸€ä¸ªåŠ¨ç”»ï¼Œé™¤äº†å†é¢å¤–åˆ›å»ºä¸€æ¡æ—¶é—´çº¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨toå‡½æ•°åé¢åŠ ä¸€äº›å°å‚æ•°æ¥è¿›è¡Œç²¾ç¡®çš„æ§åˆ¶ã€‚ 12345678const t1 = gsap.timeline();t1.to(&quot;.red&quot;, &#123; x: 400,duration: 1 &#125;);// åœ¨1ç§’å¼€å§‹æ’å…¥åŠ¨ç”»ï¼ˆç»å¯¹å€¼ï¼‰t1.to(&quot;.green&quot;, &#123; x: 400, duration: 1 &#125;, 1);// åœ¨ä¸Šä¸ªåŠ¨ç”»çš„å¼€å§‹æ’å…¥åŠ¨ç”»t1.to(&quot;.purple&quot;, &#123; x: 400, duration: 1 &#125;, &quot;&lt;&quot;);// åœ¨æœ€åä¸€ä¸ªåŠ¨ç”»ç»“æŸåä¸€ç§’æ’å…¥åŠ¨ç”»t1.to(&quot;.orange&quot;, &#123; x: 400, duration: 1 &#125;, &quot;+=1&quot;); æŸ¥çœ‹demo16æ•ˆæœ ç†è§£ä¸Šé¢ä»£ç ä¸­çš„è¿™äº›å°å‚æ•°å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºå¾ˆå¤šå¤æ‚ç²¾å¦™çš„åŠ¨ç”»æ•ˆæœï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä»»æ„æ—¶é—´ç‚¹æ¥æ‰§è¡Œä»»æ„çš„åŠ¨ç”»æ•ˆæœï¼›ä¸Šé¢çš„ä¾‹å­ä¹ä¸€çœ‹å¯èƒ½ä¸æ˜¯é‚£ä¹ˆå¥½ç†è§£ï¼Œä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œæˆ‘ä»¬ä¸€ç‚¹ç‚¹æ¥ç†è§£ã€‚ è™½ç„¶æˆ‘ä»¬ä¸Šé¢éƒ½æ˜¯ä»¥gsap.toæ¥ä¸ºä¾‹ï¼Œä½†æ˜¯å…¶ä»–çš„å‡½æ•°æ¯”å¦‚from()ã€fromTo()ã€add()ç­‰ä¹Ÿéƒ½é€‚ç”¨ï¼›éœ€è¦æ³¨æ„çš„æ˜¯è¿™äº›å‚æ•°è·Ÿåœ¨å˜é‡å¯¹è±¡çš„åé¢ï¼Œå› æ­¤å‡½æ•°çš„ä»£ç ç»“æ„å¦‚ä¸‹ï¼š .method( target, vars, position ) æˆ‘ä»¬å°†è¿™äº›å‚æ•°ç®€å•çš„åˆ†ä¸€ä¸‹ç±»å°±å¥½ç†è§£å¤šäº†ï¼Œå…¶å®ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ç±»å‹ï¼š ç»å¯¹å€¼ï¼šåœ¨æŸä¸ªç»å¯¹ç§’æ•°æ¥æ‰§è¡ŒåŠ¨ç”»ã€‚ &lt;ç¬¦å’Œ&gt;ç¬¦ï¼šâ€&lt;â€åœ¨ä¸Šä¸ªåŠ¨ç”»å¼€å§‹ï¼Œâ€&gt;â€åœ¨ä¸Šä¸ªåŠ¨ç”»ç»“æŸã€‚ ç›¸å¯¹ç¬¦ï¼š+=åœ¨æœ€åä¸€ä¸ªåŠ¨ç”»ç»“æŸåï¼Œ-=åœ¨æœ€åä¸€ä¸ªåŠ¨ç”»ç»“æŸå‰ã€‚ labelå€¼ï¼šç›´æ¥ç”¨æŸä¸ªæ—¶é—´ç‚¹çš„labelåã€‚ ç»å¯¹å€¼å°±è¡¨ç¤ºåœ¨æŸä¸ªç»å¯¹çš„ç§’æ•°æ—¶æ‰§è¡ŒåŠ¨ç”»ï¼Œæ¯”å¦‚ä¸Šé¢demoä¸­çš„greenå…ƒç´ ï¼Œåœ¨1ç§’æ—¶æ‰§è¡ŒåŠ¨ç”»ï¼›&lt;ç¬¦å·è¡¨ç¤ºåœ¨ä¸Šä¸ªåŠ¨ç”»å¼€å§‹ï¼Œæ¯”å¦‚demoä¸­çš„purpleå…ƒç´ ï¼Œå°±å’Œgreenå…ƒç´ åŒæ—¶æ‰§è¡ŒåŠ¨ç”»ï¼›æˆ‘ä»¬è¿˜å¯ä»¥åœ¨åé¢åŠ ä¸ªæ•°å€¼ï¼Œæ¯”å¦‚ï¼š&lt;3å’Œ&lt;=3ï¼Œä¸¤ç§è¡¨è¾¾æ–¹å¼çš„å«ä¹‰ç›¸åŒï¼Œéƒ½è¡¨ç¤ºåœ¨ä¸Šä¸ªåŠ¨ç”»å¼€å§‹åçš„ä¸‰ç§’æ‰§è¡Œã€‚ 1234const t1 = gsap.timeline();t1.to(&quot;.green&quot;, &#123; x: 400, duration: 1 &#125;) .to(&quot;.purple&quot;, &#123; x: 400, duration: 1 &#125;, &quot;&lt;3&quot;) .to(&quot;.orange&quot;, &#123; x: 400, duration: 1 &#125;, &quot;&gt;1&quot;); æŸ¥çœ‹demo17æ•ˆæœ åœ¨ä¸Šé¢çš„gifæ•ˆæœä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œpurpleå…ƒç´ æ˜¯åœ¨greenå…ƒç´ å¼€å§‹çš„3ç§’åæ‰å¼€å§‹æ‰§è¡Œï¼Œå¹¶ä¸æ˜¯ç»“æŸçš„3ç§’åï¼›&gt;ç¬¦å·åˆ™è¡¨ç¤ºä¸Šä¸ªåŠ¨ç”»ç»“æŸæ—¶ï¼Œç”¨æ³•ç±»ä¼¼ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ ç›¸å¯¹ç¬¦åˆ™è¡¨ç¤ºåŠ¨ç”»ç»“æŸçš„æ—¶é—´ç‚¹ï¼Œ+=1è¡¨ç¤ºä¸Šä¸ªåŠ¨ç”»ç»“æŸ1ç§’åï¼Œ-=2è¡¨ç¤ºä¸Šä¸ªåŠ¨ç”»ç»“æŸå‰2ç§’ã€‚ labelå€¼åˆ™å¾ˆå¥½ç†è§£äº†ï¼Œåœ¨æŸä¸ªæ—¶é—´ç‚¹æ’å…¥ä¸€ä¸ªlabelï¼Œåœ¨è¿™ä¸ªlabelå‰é¢æˆ–è€…åé¢çš„æ—¶é—´æ¥æ‰§è¡Œï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒçš„ç”¨æ³•ï¼š 12345const t1 = gsap.timeline();t1.to(&quot;.green&quot;, &#123; x: 400, duration: 1 &#125;) .add(&quot;myLabel&quot;, 2) .to(&quot;.purple&quot;, &#123; x: 400, duration: 1 &#125;, &quot;myLabel+=1&quot;) .to(&quot;.orange&quot;,&#123; x: 400, duration: 1 &#125;, &quot;myLabel-=1&quot;); é€šè¿‡gsap.addå‡½æ•°ï¼Œæˆ‘ä»¬åœ¨2ç§’å¤„æ”¾ç½®äº†ä¸€ä¸ªmyLabelçš„æ ‡è¯†ï¼Œåœ¨åé¢ä½¿ç”¨myLabel+=1å’ŒmyLabel-=1ç›¸å¯¹è¿™ä¸ªæ ‡è¯†çš„æ—¶é—´è¿›è¡Œæ§åˆ¶ã€‚ æŸ¥çœ‹demo18æ•ˆæœ ä¸åŒæ—¶é—´çº¿ä¸­çš„åŠ¨ç”»å¯èƒ½ä¼šæœ‰ç›¸åŒçš„ç‰¹æ®Šå±æ€§ï¼Œæ¯”å¦‚repeatå’Œdelayç­‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ—¶é—´çº¿çš„åˆ›å»ºå‡½æ•°ä¸­ç»Ÿä¸€è®¾ç½®ï¼Œé¿å…é‡å¤ï¼š 1234const tl = gsap.timeline(&#123; repeat: 1, repeatDelay: 1, yoyo: true &#125;);tl.to(&quot;.green&quot;, &#123; rotation: 360 &#125;) .to(&quot;.purple&quot;, &#123; rotation: 360 &#125;) .to(&quot;.orange&quot;, &#123; rotation: 360 &#125;); å¦‚æœä½ å‘ç°æŸä¸ªå±æ€§ä½ é‡å¤ä½¿ç”¨äº†å¾ˆå¤šæ¬¡ï¼Œæ¯”å¦‚xã€scaleã€durationç­‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨defaultså±æ€§ï¼Œä»»ä½•åŠ åˆ°defaultså±æ€§ä¸­çš„å‚æ•°éƒ½ä¼šè¢«ä¸‹é¢çš„å‡½æ•°ç»§æ‰¿ã€‚ 123456789101112131415const tl = gsap.timeline(&#123; defaults: &#123; scale: 1.2, duration: 2, &#125;,&#125;);tl.to(&quot;.green&quot;, &#123; x: 200,&#125;) .to(&quot;.purple&quot;, &#123; x: 400, &#125;) .to(&quot;.orange&quot;, &#123; x: 600, &#125;); å›è°ƒå‡½æ•° åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹åŠ¨ç”»çš„å¼€å§‹ã€è¿‡ç¨‹ã€ç»“æŸçš„æŸä¸ªæ—¶é—´ç‚¹è¿›è¡Œå›è°ƒæ“ä½œï¼Œgsapæä¾›äº†ä»¥ä¸‹å›è°ƒå‡½æ•°ï¼š onCompleteï¼šåŠ¨ç”»å®Œæˆæ—¶ã€‚ onStartï¼šåŠ¨ç”»å¼€å§‹æ—¶ onUpdateï¼šåŠ¨ç”»æ›´æ–°æ—¶ã€‚ onRepeatï¼šåŠ¨ç”»é‡å¤æ—¶ã€‚ onReverseCompleteï¼šå½“åŠ¨ç”»åœ¨åè½¬åˆ°è¾¾å¼€å§‹æ—¶ã€‚ 123456789101112gsap.to(&quot;.class&quot;, &#123; x: 100, onComplete: () =&gt; console.log(&quot;the tween is complete&quot;)&#125;// æ—¶é—´çº¿æ‰€æœ‰åŠ¨ç”»ç»“æŸæ—¶è°ƒç”¨gsap.timeline(&#123;onComplete: tlComplete&#125;);function tlComplete() &#123; console.log(&quot;the tl is complete&quot;); // ...&#125; ScrollTrigger ç°åœ¨æˆ‘ä»¬å¯¹gsapçš„åŸºæœ¬ç”¨æ³•æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹æ’ä»¶çš„ç”¨æ³•ï¼›æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰©å±•åŠ¨ç”»çš„é«˜çº§åŠŸèƒ½ï¼Œè®©åŠ¨ç”»çš„è¡¨ç°æ›´ä¸°å¯Œï¼›æˆ‘ä»¬ä¸»è¦æ¥äº†è§£ScrollTriggerçš„ä½¿ç”¨ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸‹ScrollTriggerçš„ä¸€ä¸ªç®€å•ç”¨æ³•ï¼Œ 123456789101112131415161718192021import &#123; ScrollTrigger &#125; from &quot;gsap/ScrollTrigger&quot;;gsap.registerPlugin(ScrollTrigger);gsap.to(&quot;.green&quot;, &#123; rotation: 360, scale: 1.5, backgroundColor: &quot;red&quot;, scrollTrigger: &#123; trigger: &quot;.green&quot;, scrub: true, &#125;,&#125;);gsap.to(&quot;.purple&quot;, &#123; rotation: 360, scale: 1.5, backgroundColor: &quot;red&quot;, scrollTrigger: &#123; trigger: &quot;.purple&quot;, scrub: 1, &#125;,&#125;); ä½¿ç”¨å‰å½“ç„¶è¦å¯¹æ’ä»¶è¿›è¡Œæ³¨å†Œäº†ï¼Œä½¿ç”¨gsap.registerPluginå°†ScrollTriggeræ³¨å†Œï¼Œå¦åˆ™æˆ‘ä»¬åœ¨ä¸‹é¢æ“ä½œæ—¶ä¼šå‘ç°æ²¡æœ‰ä»»ä½•æ•ˆæœã€‚ åœ¨toå‡½æ•°ä¸­æˆ‘ä»¬æ–°å¢äº†ä¸€ä¸ªscrollTriggerå±æ€§ï¼Œtriggerè¡¨ç¤ºå½“å‰åŠ¨ç”»è§¦å‘çš„å…ƒç´ ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä½¿ç”¨å½“å‰å…ƒç´ ï¼›markersæ˜¯å¦è¿›è¡Œæ ‡è®°ï¼Œscrubè¡¨ç¤ºæ˜¯å¦å°†åŠ¨ç”»æ•ˆæœé“¾æ¥åˆ°æ»šåŠ¨æ¡ï¼Œéšç€æ»šåŠ¨æ¡å¹³æ»‘å¤„ç†ï¼›å¦‚æœæ˜¯falseï¼ˆé»˜è®¤ï¼‰ï¼Œéšç€å…ƒç´ å‡ºç°åœ¨è§†çª—å†…ï¼Œç›´æ¥è§¦å‘åŠ¨ç”»ï¼Œå¦‚æœæ˜¯trueï¼Œåˆ™å¹³æ»‘åŠ¨ç”»ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ•ˆæœï¼š æŸ¥çœ‹demo21æ•ˆæœ scrubè¿˜å¯ä»¥æ˜¯æŸä¸ªå…·ä½“çš„æ•°å€¼ï¼Œè¡¨ç¤ºå»¶è¿Ÿæ»šåŠ¨æ¡å¤šå°‘ç§’åŠ¨ç”»ï¼›æ¯”å¦‚è¿™é‡Œçš„1ï¼Œå»¶è¿Ÿ1ç§’æ‰§è¡ŒåŠ¨ç”»ã€‚ æˆ‘ä»¬åœ¨æ»šåŠ¨æµè§ˆå™¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨pinå±æ€§å°†æŸä¸ªå…ƒç´ å›ºå®šåœ¨æŸä¸ªä½ç½®ï¼›pinå¯ä»¥æ˜¯cssé€‰æ‹©å™¨å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼æˆ–è€…ç›´æ¥domå…ƒç´ ï¼›å¦‚æœæ˜¯trueï¼Œåˆ™ç›´æ¥å›ºå®šå½“å‰çš„åŠ¨ç”»å…ƒç´ ï¼›æˆ‘ä»¬è¿™é‡Œä½¿ç”¨pinå°†purpleå…ƒç´ å›ºå®šèµ·å§‹ä½ç½®ï¼š 12345678gsap.to(&quot;.green&quot;, &#123; x: 400, duration: 2, scrollTrigger: &#123; trigger: &quot;.green&quot;, pin: &quot;.purple&quot;, &#125;,&#125;); æŸ¥çœ‹demo22æ•ˆæœ startå’Œend startå’Œendå±æ€§ç”¨æ¥å†³å®šæ»šåŠ¨è§¦å‘å…ƒç´ å¼€å§‹çš„ä½ç½®ï¼Œå¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°å€¼æˆ–è€…å‡½æ•°ï¼Œä¸¤è€…çš„ç”¨æ³•ç±»ä¼¼ï¼Œæˆ‘ä»¬ä»¥startä¸ºä¾‹ï¼›startçš„å€¼é»˜è®¤æ˜¯&quot;top bottom&quot;ï¼Œå®ƒçš„å«ä¹‰æ˜¯å½“è§¦å‘ç‰©ä½“ï¼ˆtriggerï¼‰çš„é¡¶éƒ¨ï¼ˆtopï¼‰ç¢°åˆ°æµè§ˆå™¨çš„åº•éƒ¨ï¼ˆbottomï¼‰æ—¶ï¼›æˆ‘ä»¬çœ‹ä¸‹å½“å¼€å¯æ ‡è®°markeræ—¶çš„è§¦å‘ä½ç½®ã€‚ æˆ‘ä»¬çœ‹åˆ°scroller-startçš„çº¿å°±æ˜¯æµè§ˆå™¨è§†çª—çš„è¾¹ç•Œçº¿ï¼Œå½“æµè§ˆå™¨å‘ä¸‹æ»šåŠ¨æ—¶ï¼Œè¿™æ¡çº¿æ»šåŠ¨åˆ°ç‰©ä½“çš„startçº¿æ—¶ï¼Œå°±è§¦å‘äº†åŠ¨ç”»æ•ˆæœï¼›åŒæ ·çš„é“ç†ï¼Œå‘ä¸Šæ»šåŠ¨æ—¶ï¼Œå½“scroll-endçš„çº¿è§¦ç¢°åˆ°endæ—¶ï¼ŒåŠ¨ç”»ç»“æŸã€‚ startå€¼çœ‹èµ·æ¥å¾ˆæ€ªå¼‚ï¼Œä¸å¥½ç†è§£ï¼Œå…¶å®æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæ‹†æˆä¸¤éƒ¨åˆ†æ¥çœ‹ï¼›ç¬¬ä¸€ä¸ªtopå€¼è¡¨ç¤ºç‰©ä½“çš„ä¸Šè¾¹ç•Œï¼ŒåŒæ ·çš„æˆ‘ä»¬å¯ä»¥è®¾ä¸ºbottomï¼ˆç‰©ä½“ä¸‹è¾¹ç•Œï¼‰ã€centerï¼ˆç‰©ä½“ä¸­é—´ï¼‰æˆ–è€…å…·ä½“æ•°å€¼ï¼ˆ100pxã€80%ï¼‰ï¼Œå³æ§åˆ¶çš„æ˜¯ç‰©ä½“æ—è¾¹çš„startçº¿ã€‚ ç¬¬äºŒä¸ªå€¼è¡¨ç¤ºæµè§ˆå™¨è§†çª—æ»šåŠ¨è§¦å‘çš„scroller-startçº¿ï¼Œbottomè¡¨ç¤ºè§†çª—çš„åº•éƒ¨ï¼Œæˆ‘ä»¬ä¹Ÿè®¾ä¸ºtopæˆ–è€…centeræˆ–è€…æ•°å€¼ï¼Œä»¥åŠç™¾åˆ†æ¯”ï¼ˆä¾‹å¦‚80%ï¼Œè¡¨ç¤ºæ•´ä¸ªè§†çª—çš„80%é«˜åº¦ï¼‰ï¼Œç”šè‡³æ˜¯ç›¸å¯¹ä½ç½®ï¼Œæ¯”å¦‚bottom-=100pxã€‚ toggleClass æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸æƒ³è¦gsapçš„åŠ¨ç”»ï¼Œè€Œæ˜¯æƒ³ç”¨æˆ‘ä»¬è‡ªå·±è‡ªå®šä¹‰çš„cssç±»åæ¥å®ç°æŸäº›åŠ¨ç”»æ•ˆæœï¼ŒtoggleClasså±æ€§å¯ä»¥è®©æˆ‘ä»¬åœ¨è§¦å‘çš„å…ƒç´ ä¸Šæ·»åŠ æˆ–è€…ç§»é™¤è¿™äº›çš„ç±»åï¼Œä»å®ƒçš„åå­—ä¹Ÿèƒ½çœ‹å‡ºæ¥å®ƒæ˜¯å¤„ç†ç±»åçš„ï¼›å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¾‹å¦‚toggleClass: &quot;active&quot;ï¼Œå°±è¡¨ç¤ºè¦æ–°å¢/ç§»é™¤çš„ç±»åã€‚ toggleClassä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡ï¼Œå¯ä»¥åœ¨å…¶ä»–çš„å…ƒç´ ä¸Šæ¥æ–°å¢/ç§»é™¤ç±»åï¼Œæ¯”å¦‚ï¼š 1toggleClass: &#123;targets: &quot;.my-selector&quot;, className: &quot;active&quot;&#125; æŸ¥çœ‹demo24æ•ˆæœ æˆ‘ä»¬å¯ä»¥å°†ScrollTriggerç»“åˆtimelineåˆ›å»ºåŠ¨ç”»ã€‚ 123456789101112const tl = gsap.timeline(&#123; scrollTrigger: &#123; trigger: &quot;.wrap&quot;, scrub: true, &#125;,&#125;);tl.to(&quot;.green&quot;, &#123; x: 200,&#125;);tl.to(&quot;.purple&quot;, &#123; x: 400,&#125;); æŸ¥çœ‹demo25æ•ˆæœ æ€»ç»“ æœ¬æ–‡GSAPæ‰€æœ‰çš„ç”¨æ³•æ•™ç¨‹å¤§è‡´åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæœ¬æ–‡æ¶‰åŠåˆ°äº†ä¸€äº›åŠ¨ç”»æ–¹é¢çš„æ¦‚å¿µï¼Œæœ‰äº›ä¸å‡†ç¡®çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£ï¼›ç¬”è€…ä¹Ÿå‚è€ƒäº†å®˜ç½‘å¾ˆå¤šdemoå’Œè‹±æ–‡æ¡ˆä¾‹çš„ç¿»è¯‘ç†è§£ï¼Œå·¥ä½œé‡è¾ƒå¤§ï¼Œæœ›ç»™ä¸ªä¸€é”®ä¸‰è¿ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"åŠ¨ç”»","slug":"Animation","permalink":"https://xieyufei.com/tags/Animation/"}]},{"title":"Linuxä¸‹å¥½ç”¨çš„ç¥çº§åŠå…¬è½¯ä»¶","date":"2023-01-12T12:00:00.000Z","path":"2023/01/12/Linux-Office.html","text":"å¤šå¹´ä¹‹åï¼Œå½“æˆ‘ä»¬åœ¨Wordæ–‡æ¡£ä¸­ç©æ¸¸æˆå’ŒèŠå¤©æ—¶ï¼Œæ˜¯å¦ä¹Ÿä¼šæƒ³èµ·è¿‡ç¬¬ä¸€æ¬¡æ‰“å¼€Officeæ—¶æ‡µæ‡‚ã€æ¿€åŠ¨ã€å¥½å¥‡çš„é‚£ä¸ªé¥è¿œçš„ä¸‹åˆï¼Œä»¥åŠä»ä¸ä¼šå®‰åˆ†åœ°è¹²åœ¨å±å¹•æ—è¾¹ï¼Œæ—¶ä¸æ—¶å¸å¼•ä½ æ³¨æ„åŠ›çš„é‚£ä¸ªå°å°çš„æ›²åˆ«é’ˆã€‚ ä¸Šä¸€ç¯‡æ–‡ç« æˆ‘ä»¬ä»‹ç»äº†Linuxçš„å†å²å’Œä¼˜åŠ¿ï¼Œç¬”è€…çš„å¾ˆå¤šæ–‡ç« ä¹Ÿéƒ½æ˜¯åœ¨Ubuntuç³»ç»Ÿä¸Šå®Œæˆçš„ï¼›ä½†æ˜¯ä¹Ÿæœ‰å°ä¼™ä¼´åœ¨è¯„è®ºåŒºè¯´Linuxä¸‹çš„åŠå…¬è½¯ä»¶æ¯”è¾ƒåŒ®ä¹ï¼Œæˆ‘ä»¬ä»Šå¤©å°±æ¥çœ‹ä¸‹Linuxä¸‹é‚£äº›å¥½ç”¨çš„OfficeåŠå…¬è½¯ä»¶ã€‚ ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´ä½œä¸ºæ‰“å·¥äººï¼Œéƒ½è¢«Officeè½¯ä»¶æŠ˜ç£¨è¿‡ï¼Œå„ç§å¼€ä¼šéœ€è¦å†™ä¸å®Œçš„PPTï¼Œæ•´ç†å„ç§Wordæ–‡æ¡£èµ„æ–™ç­‰ï¼›æœ‰æ—¶å€™ä¸€ä¸ç•™ç¥ï¼Œå¯èƒ½æ–‡æ¡£å°±å‡ºç‚¹å¹ºè›¾å­ï¼Œä¸€å¤©çš„å·¥ä½œå°±ç™½å¹²äº†ï¼Œç”šè‡³åŠå¤œè¿˜åœ¨æ”¹æ–‡æ¡£ï¼›æ˜æ˜Officeè½¯ä»¶çš„åˆè¡·æ˜¯è®©æˆ‘ä»¬çš„å·¥ä½œæ›´æ–¹ä¾¿ï¼Œå¯æ˜¯å¾€å¾€äº‹ä¸æ„¿è¿ã€‚ Officeæ˜¯æˆ‘ä»¬æ—¥å¸¸åŠå…¬ä¸­å¿…ä¸å¯å°‘çš„è½¯ä»¶ï¼Œä¸€æ¬¾å¥½ç”¨çš„Officeè½¯ä»¶èƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨å·¥ä½œä¸Šäº‹åŠåŠŸå€ã€‚ å¯¹äºå¾ˆå¤šç”¨æˆ·æ¥è¯´ï¼Œæ²¡æœ‰å¾®è½¯Officeï¼ˆä¸‹é¢ç®€ç§°MS Officeï¼‰çš„æ”¯æŒæ˜¯ä»–ä»¬è¿Ÿè¿Ÿä¸æ„¿æ„åˆ‡æ¢åˆ°Linuxçš„ä¸»è¦åŸå› ï¼Œç”šè‡³æ˜¯å”¯ä¸€åŸå› ï¼›æ˜¯çš„ï¼ŒLinuxä¸æ”¯æŒMS Officeï¼Œä½†æ˜¯è¿™ä¸å½±å“æˆ‘ä»¬åœ¨Linuxä¸‹è¿›è¡ŒåŠå…¬ã€‚ ç¬”è€…å®‰è£…äº†Linuxç³»ç»Ÿä¸‹ï¼Œå¸‚é¢å¸¸è§çš„ä¸‰æ¬¾åŠå…¬è½¯ä»¶ï¼Œä»Šå¤©æˆ‘ä»¬ä»ç•Œé¢å®ç”¨ã€åŠŸèƒ½ä¸°å¯Œã€ä¸Officeå…¼å®¹ä»¥åŠåœ¨çº¿åä½œç­‰å‡ ä¸ªæ–¹é¢æ¥ä½“éªŒä»¥ä¸‹è¿™ä¸‰æ¬¾åŠå…¬è½¯ä»¶ã€‚ WPS é¦–å…ˆå‡ºæˆ˜çš„æ˜¯æˆ‘ä»¬çš„è€ç‰Œç©å®¶WPSï¼ŒWPSä¸MS Officeçš„æ¸Šæºä¹Ÿææ·±ï¼Œä¸¤è€…åœ¨ç•Œé¢ä¸Šä¹Ÿæä¸ºç›¸ä¼¼ï¼Œå¾ˆå¤šäººå¯èƒ½ä¼šè§‰å¾—WPSæ˜¯æŠ„è¢­çš„ï¼Œå…¶å®WPSæ‰æ˜¯å›½å†…åŠå…¬è½¯ä»¶å…ƒè€ï¼ŒMS Officeæ˜¯åæ¥è€…ï¼Œè¿™é‡Œèƒ½å†™ä¸€é•¿ç¯‡å†å²æ–‡ç« æ¥æ¢è®¨ï¼Œå°±ä¸å†å±•å¼€äº†ã€‚è¿™é‡Œé¡ºä¾¿é—®å¤§å®¶ä¸€ä¸ªé—®é¢˜ï¼š é‡‘å±±æ–‡æ¡£å’Œwpsåˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½åˆ†ä¸æ¸…ä¸¤è€…çš„å…³ç³»ï¼Œåœ¨ç¤¾äº¤Appå³åˆ»ä¸­ï¼Œé‡‘å±±æ–‡æ¡£è¿˜å’ŒWPSè¿›è¡Œäº’åŠ¨ï¼Œç½®é¡¶äº†ä¸¤è€…å…³ç³»çš„åŠ¨æ€ã€‚ ç®€å•æ¥è¯´WPSå¯¹æ ‡çš„æ˜¯å¾®è½¯çš„Officeä¸‰ä»¶å¥—åŠå…¬è½¯ä»¶ï¼Œä¸»æ‰“æœ¬åœ°æ–‡æ¡£ã€æ·±åº¦ç¼–è¾‘ï¼Œéœ€è¦ä¸‹è½½å®‰è£…WPSè½¯ä»¶çš„ï¼›è€Œé‡‘å±±æ–‡æ¡£å¯¹æ ‡çš„åˆ™æ˜¯è°·æ­Œæ–‡æ¡£ï¼Œä»å®ƒçš„sloganï¼šä¸€èµ·åŠå…¬æ‰é«˜æ•ˆï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œä¸»æ‰“ååŒåŠå…¬ã€å¤šäººåœ¨çº¿ç¼–è¾‘ï¼Œå› æ­¤å®ƒæ˜¯ä¸éœ€è¦å®‰è£…è½¯ä»¶çš„ï¼Œç›´æ¥åœ¨webç«¯æ“ä½œï¼Œä¸è¿‡åœ¨ä¸€äº›åŠŸèƒ½ä¸Šç›¸è¾ƒæœ¬åœ°çš„WPSè¿˜æ˜¯å°‘äº†ä¸å°‘ã€‚ ç”±äºWPSå’Œé‡‘å±±æ–‡æ¡£éƒ½æ˜¯è‡ªå®¶äº§å“ï¼Œä¸¤è€…åœ¨è´¦å·ä¸Šæ˜¯æ‰“é€šçš„ï¼Œå› æ­¤æˆ‘è§‰å¾—ä¸¤è€…æ›´åƒæ˜¯å¾®è½¯è‡ªå®¶çš„Officeå’ŒOffice Onlineçš„å…³ç³»ã€‚WPSç¼–è¾‘çš„æœ¬åœ°æ–‡æ¡£ä¸Šä¼ åï¼Œéœ€è¦å¤šäººç¼–è¾‘çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨webç«¯çš„é‡‘å±±æ–‡æ¡£ä¸Šæ‰“å¼€ï¼ŒåŒæ—¶åˆ†äº«ç»™å¥½å‹ã€‚ å¹³å°æ”¯æŒä¸Šï¼ŒWPSæ›´æ˜¯åšåˆ°äº†å…¨å¹³å°æ”¯æŒï¼Œä¸ä»…æ”¯æŒäº†å¸¸è§çš„Windowså’ŒMacå¹³å°ï¼Œè¿Linuxå¹³å°ä¹Ÿèƒ½ç…§é¡¾ï¼Œè¿˜æœ‰ç§»åŠ¨ç«¯çš„å®‰å“å’ŒiOSï¼Œæ›´æ˜¯æ–¹ä¾¿äº†ç§»åŠ¨åŠå…¬çš„åœºæ™¯ã€‚ ä¸è¿‡è¿™é‡Œè¦åæ§½ä¸€ä¸‹æˆ‘è£…çš„Ubuntuä¸‹çš„WPSï¼Œæ–°å»ºæ–‡æ¡£é€‰æ‹©æ¨¡æ¿æ—¶ï¼Œæœ¬åœ°çš„æ¨¡æ¿æ•°é‡è¿˜æ˜¯æ¯”è¾ƒå°‘çš„ï¼Œæ²¡æœ‰Windowså¹³å°ä¸‹é‚£ä¹ˆå¤šï¼Œæƒ³è¦æ›´å¤šçš„æ¨¡æ¿è¦æ‰“å¼€ç¨»å£³å®˜ç½‘ä¸‹è½½ï¼›ä¸è¿‡çœ‹åˆ°è¿™ä¹ˆå¤šå…è´¹çš„æ¨¡æ¿ï¼Œç¬”è€…ä¹Ÿå°±å¿äº†æŠŠã€‚ åœ¨å¼€å§‹çš„ä¸»ç•Œé¢ï¼Œæˆ‘ä»¬çœ‹åˆ°æ•´ä¸ªå·¥å…·æ ï¼ŒWPSå’ŒMS Officeè¿˜æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ï¼Œå‡å°‘äº†ä¸Šæ‰‹çš„æˆæœ¬ï¼›ä¸ä»…æ˜¯Wordï¼ŒExcelå’ŒPPTåŸºæœ¬éƒ½æ˜¯ç›¸ä¼¼çš„ï¼Œè¿™é‡Œå°±ä¸å†ä¸€ä¸€æˆªå›¾ã€‚ åœ¨æ—¥å¸¸ä½¿ç”¨ä¹ æƒ¯ä¸Šï¼ŒWPSä¹Ÿåœ¨Officeçš„åŸºç¡€ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ›´ç¬¦åˆå›½äººçš„å·¥ä½œåœºæ™¯ã€‚ ä¸¾ä¸€ä¸ªå°æ —å­ï¼Œæ¯”å¦‚åœ¨Excelä¸­å±•ç¤ºä¸‡å…ƒçš„å•ä½ï¼ŒOfficeéœ€è¦äº†è§£å„ç§å ä¸ºç¬¦ã€è½¬ä¹‰ç¬¦ï¼Œæœ€åå®šä¹‰ä¸€ä¸ªæ ¼å¼ï¼›ä½†æ˜¯åœ¨WPSä¸­ï¼Œä½ åªè¦èƒ½çœ‹å¾—æ‡‚æ±‰å­—å°±å¯ä»¥äº†ï¼Œç›´æ¥åœ¨å•å…ƒæ ¼æ ¼å¼è®¾ç½®å³å¯ã€‚ åœ¨Wordä¸­æ¸…ç†ç©ºè¡Œæ¯”è¾ƒéº»çƒ¦ï¼Œéœ€è¦ä¸æ–­çš„è¿›è¡ŒæŸ¥æ‰¾å’Œæ›¿æ¢æ“ä½œï¼›è€Œåœ¨WPSä¸­ï¼Œä½ ä¹Ÿåªè¦ä¼šæ“ä½œé¼ æ ‡å°±å¯ä»¥äº†ï¼Œç‚¹å‡»æ–‡å­—æ’ç‰ˆï¼Œå…¶ä¸­æœ‰åˆ é™¤ç©ºæ®µå’Œåˆ é™¤ç©ºæ ¼ä¸¤é¡¹ï¼›ç›´æ¥ç‚¹å‡»åˆ é™¤ç©ºæ®µï¼Œç©ºè¡Œå°±æ²¡æœ‰äº†ï¼›æ­¤å¤–è¿˜æœ‰ä¸€ä¸ªæ™ºèƒ½æ ¼å¼æ•´ç†ï¼Œç‚¹å‡»åä¼šä¸€é”®å¸®ä½ å®Œæˆæ–‡ç« çš„æ’ç‰ˆï¼ˆé¦–è¡Œç¼©è¿›ã€ç©ºè¡Œåˆ é™¤ç­‰ï¼‰ï¼Œä¸€ä¸‹å­çœä¸å°‘äº‹ã€‚ è¿˜æœ‰å°ä¼™ä¼´åæ§½WPSå¡ã€æ…¢ï¼Œå°¤å…¶æ˜¯æ‰“å¼€å¤§æ–‡ä»¶çš„æ—¶å€™ï¼š æŸç½‘å‹è¯„è®ºï¼šæˆ‘ç”¨äº†åå‡ å¹´çš„MS office,åˆå¼€å§‹ç”¨WPSï¼Œå·®è·è¿˜æ˜¯ç›¸å½“æ˜æ˜¾çš„ã€‚æ¯”å¦‚æ‰“å¼€å¤§æ–‡ä»¶ï¼Œå­˜å‚¨è¶…è¿‡1000è¡Œçš„ï¼ŒWPSæ˜æ˜¾æ…¢ï¼Œè¿˜ç»å¸¸å¡ã€‚æ–‡ä»¶è¶Šå¤§è¶Šæ˜æ˜¾ï¼Œæ‰“å¼€çš„æ–‡ä»¶è¶Šå¤šè¶Šæ˜æ˜¾ã€‚è¿™æ˜¯æœ€å¤§çš„ç¼ºç‚¹ã€‚ è¿™é‡Œç¬”è€…å‡†å¤‡äº†ä¸€ä¸ª50å¤šMBçš„ã€ä¸¤åƒå¤šé¡µçš„ä¸€ä¸ªPPTï¼›ç›¸ä¿¡ä¸¤åƒå¤šé¡µåº”è¯¥å·²ç»ä¸å°äº†ï¼Œä¸€èˆ¬å†™PPTä¹Ÿä¸ä¼šå†™è¿™ä¹ˆå¤šé¡µã€‚ è¿™é‡Œç¬”è€…çš„ç”µè„‘æ˜¯8GBå†…å­˜ï¼Œå±äºä¸€èˆ¬çš„å®¶ç”¨ç”µè„‘ï¼Œåœ¨åˆšæ‰“å¼€çš„æ—¶å€™ä¼šæœ‰ä¸€ä¸ªåŠ è½½çš„è¿‡ç¨‹ï¼Œæœ‰ä¸€ä¸ªå¡é¡¿çš„æ—¶é—´ï¼›åŠ è½½å®Œæˆåï¼Œå°±å¯ä»¥æ­£å¸¸ç¼–è¾‘ã€æ“ä½œäº†ï¼Œä¸å½±å“ä½¿ç”¨ã€‚ è¿˜æœ‰è¢«å¾ˆå¤šå°ä¼™ä¼´åæ§½çš„æœ€å¤šçš„å°±æ˜¯WPSçš„å…¼å®¹æ€§é—®é¢˜äº†ï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šå°ä¼™ä¼´æ‹…å¿ƒçš„ï¼Œä½†æ˜¯åœ¨ç¬”è€…åŒæ—¶æ‰“å¼€å¤šä»½æ–‡æ¡£åï¼Œå¹¶æ²¡æœ‰å‡ºç°ä¹±ç çš„æƒ…å†µï¼›WPSæ˜¯å…¨é¢å…¼å®¹MS Office2003-2010ç‰ˆæœ¬ï¼Œæ‰“å¼€å¼€å§‹=&gt;WPS=&gt;é…ç½®å·¥å…·=&gt;é«˜çº§=&gt;å…¼å®¹è®¾ç½®ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¯¹åº”çš„Officeç‰ˆæœ¬æ¥å…¼å®¹ã€‚ ç¬”è€…è®¤ä¸ºï¼Œä¸»è¦æ˜¯ä¸€äº›é«˜çº§çš„åŠŸèƒ½ï¼ŒåŒæ–¹åœ¨äº‰å¤ºç”¨æˆ·ä¸Šéƒ½åœ¨æš—è‡ªå‘åŠ›ï¼Œå› æ­¤é«˜çº§åŠŸèƒ½çš„å…¼å®¹è¾ƒå·®ï¼›æ¯”å¦‚Office 2019æ–°å¢çš„3Dæ¨¡å‹ï¼Œåœ¨WPSä¸Šæ‰“å¼€åˆ™æ˜¾ç¤ºä¸ºé™æ€çš„å›¾ç‰‡ï¼›PPTçš„ä¸€äº›é«˜çº§åŠ¨ç”»ä¹Ÿæ˜¯é‡ç¾åŒºï¼Œå¾ˆå¤šVIPé…·ç‚«çš„åŠ¨ç”»åœ¨Officeä¸Šç›´æ¥æ²¡æœ‰æ•ˆæœã€‚ æ€»ç»“ä¸€ä¸‹ï¼ŒWPSé€‚åˆé‚£äº›å¯¹äºé«˜ç«¯å•†åŠ¡åŠå…¬æ²¡æœ‰å¤ªå¤šçš„éœ€æ±‚ï¼Œä¹Ÿä¸æ„¿æ„åœ¨åŠå…¬è½¯ä»¶ä¸ŠæŠ•å…¥å¤ªå¤šçš„å°ç™½ç”¨æˆ·ï¼Œä¸ä¼šç ´è§£Officeä¹Ÿä¸æƒ³ä»˜è´¹ä½¿ç”¨ï¼›ä»–ä»¬è¦çš„åªæ˜¯ä¸€æ¬¾èƒ½å¤Ÿæ‰“å¼€å’Œç®€å•ç¼–è¾‘æ–‡æ¡£çš„è½¯ä»¶ï¼Œåšåˆ°æ‹¿æ¥å°±ç”¨ï¼ŒåŒæ—¶ä¹Ÿæ²¡æœ‰å¤ªå¤šçš„å­¦ä¹ æˆæœ¬ã€‚è€Œä¸”éšç€WPSå½»åº•å…³é—­å¹¿å‘Šï¼Œç›¸ä¿¡è®©å¤§å®¶ä¸€ç›´åæ§½çš„å¡æ…¢ç­‰é—®é¢˜ä¹Ÿä¼šå¾—åˆ°ç¼“è§£ï¼Œä»è€Œè¿›ä¸€æ­¥æé«˜ç”¨æˆ·ä½“éªŒã€‚ æ˜¯å¦å¼€æºï¼šå¦ç•Œé¢æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†åŠŸèƒ½æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…ååŒæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†å…¼å®¹æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜† LibreOffice LibreOfficeæ˜¯Linuxé»˜è®¤å®‰è£…çš„ä¸€æ¬¾å¼€æºçš„åŠå…¬å¥—ä»¶ï¼Œè‡³äºè¯´å®ƒæ˜¯å¥—ä»¶ï¼Œå› ä¸ºå®ƒåŒ…å«äº†Writer,Calc,Impress,Draw,Baseä»¥åŠMathç­‰å¤šä¸ªç»„ä»¶ã€‚ ç›®å‰ï¼Œæˆªè‡³æœ¬æ–‡å‘ç¨¿æ—¶ï¼ŒLibreOfficeæœ€æ–°ç‰ˆæœ¬æ˜¯7.4.4ï¼Œé•¿æœŸæ”¯æŒç‰ˆæœ¬åˆ™æ˜¯7.3.7ï¼Œæ”¯æŒWindowsã€Linuxå’ŒmacOSä¸‰å¤§æ“ä½œç³»ç»Ÿå¹³å°ã€‚ç›¸è¾ƒäºMS Officeçš„é«˜æ˜‚ä»·æ ¼ï¼ŒLibreOfficeæ˜¾å¾—ååˆ†äº²æ°‘äº†ï¼Œå¯¹äºä¸ªäººå’Œä¼ä¸šç”¨æˆ·ï¼Œå‡ä¸ç”¨æ”¯ä»˜ä»»ä½•è´¹ç”¨å³å¯ä½¿ç”¨ã€‚ LibreOfficeæ˜¯å¼€æºç¤¾åŒºåˆ›é€ çš„é¡¹ç›®ï¼Œä»»ä½•äººéƒ½å¯ä»¥å‚ä¸ï¼Œæˆ‘ä»¬å¯ä»¥ä»å®˜ç½‘æˆ–è€…Githubä¸‹è½½åˆ°æºç ã€‚ ä¸WPSå…¼å®¹Officeä¸åŒï¼ŒLibreOfficeä½¿ç”¨çš„æ˜¯ä¸€ç§å«å¼€æ”¾æ–‡æ¡£çš„æ ¼å¼(OpenDocument Format, ODF)ï¼›å®ƒæ˜¯ç”±Sunå…¬å¸æœ€å…ˆæå‡ºæ¥çš„è§„èŒƒï¼›æ ¹æ®ç¬”è€…æŸ¥åˆ°çš„èµ„æ–™ï¼Œè¯¥æ ¼å¼ä¸»è¦æ˜¯ç”±OpenOfficeå’ŒLibreOfficeæ”¯æŒï¼ŒGoogle Docså…è®¸å°† ODTæ–‡ä»¶ä½œä¸ºGoogle Docsæ–‡æ¡£æ‰“å¼€å¹¶ç›´æ¥è¿›è¡Œç¼–è¾‘ã€‚ å®ƒåŒ…å«äº†ä»¥ä¸‹ä¸‰ç§ä¸»è¦çš„æ–‡ä»¶æ ¼å¼ï¼Œå’Œæˆ‘ä»¬å¸¸è§çš„Wordã€Excelå’ŒPPTç›¸å¯¹åº”ã€‚ .odt â€“ OpenDocument Text(ODT) .ods â€“ OpenDocument Sheets(ODS) .odp â€“ OpenDocument Presentations(ODP) å’Œå¤§å®¶å°è±¡ä¸­å¾ˆç«çš„å¼€æºè½¯ä»¶ä¸åŒï¼Œæ¯”å¦‚Linuxã€VLCã€Termuxã€VS Codeç­‰ç­‰ï¼ŒLibreOfficeæ˜¾å¾—é‚£ä¹ˆçš„ä½è°ƒå¹³å‡¡ï¼Œç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´ä¹Ÿæ²¡æœ‰å¬è¿‡å®ƒï¼Œç¬”è€…åªæ˜¯åœ¨è£…å®ŒUbuntuç³»ç»Ÿåï¼Œåœ¨ç¨‹åºèœå•é‡Œçœ‹åˆ°ä¸€ç³»åˆ—å›¾æ ‡ï¼Œå¤§æ¦‚çŒœåˆ°è¿™æ˜¯ä¸€ä¸ªåŠå…¬è½¯ä»¶ï¼Œç„¶åã€‚ã€‚ã€‚ã€‚ã€‚å°±æ²¡æœ‰ç„¶åäº†ã€‚ é€ æˆLibreOfficeä¸æ¸©ä¸ç«çš„ä¸»è¦åŸå› ä¸ªäººæ„Ÿè§‰æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼›é¦–å…ˆå°±æ˜¯ç»å…¸çš„è€ä¸€è€äºŒæ‰“æ¶å¯¼è‡´è€ä¸‰æ¶ˆå¤±æ¡ˆä¾‹ï¼Œå›½å†…åŠå…¬è½¯ä»¶é˜µè¥åŸºæœ¬åˆ†ä¸ºOfficeå’ŒWPSï¼Œä¸¤å¤§é˜µè¥äº’ç›¸ç«äº‰ï¼ŒåŒæ—¶åˆäº’ç›¸åˆä½œï¼Œåˆ©ç”¨.docã€.xlsã€.pptã€.docxã€.xlsxã€.pptxã€.pdfä¸ƒä¸ªæ–‡ä»¶æ ¼å¼å„æ–­åŠå…¬é¢†åŸŸã€‚åŒæ—¶Officeå’ŒWPSéƒ½æœ‰å•†ä¸šå…¬å¸æ¥è¿è¥æ¨å¹¿ï¼ŒLibreOfficeå¼€æºè‡ªå¸¦ä½è°ƒç‰¹æ€§ï¼ŒåŠ ä¸ŠODFæ ¼å¼çš„ä¸æµè¡Œï¼Œä¸»è¦ä¾é Linuxé¢„è£…æ¥å‘å±•ï¼Œé€ æˆçŸ¥ååº¦ä¸é«˜ã€‚ å…¶æ¬¡æ˜¯ä¸ç¬¦åˆç”¨æˆ·ä¹ æƒ¯ï¼ˆä¸»è¦æ˜¯å›½å†…ç”¨æˆ·ï¼‰ï¼Œä¹ æƒ¯äº†Officeèœå•å’Œå·¥å…·çš„å¸ƒå±€æ–¹å¼ï¼Œå†æ¥ä½¿ç”¨LibreOfficeï¼Œéœ€è¦ä¸€å®šçš„ä¸Šæ‰‹æˆæœ¬ï¼Œå¾ˆå¤šæ“ä½œæŒ‰é’®éœ€è¦è¦å»ä¹ æƒ¯ï¼›å’ŒWPSåœ¨æŒ‰é’®æ—è¾¹å±•ç¤ºæŒ‰é’®ä¸­æ–‡è¯´æ˜ä¸åŒï¼ŒLibreOfficeéœ€è¦åœ¨æŒ‰é’®ä¸Šæ‚¬æµ®æ‰èƒ½å±•ç¤ºè¯´æ˜æ–‡å­—ï¼Œè¿™å¯¹ç¬”è€…è¿™æ ·çš„æ‡’ç™Œç”¨æˆ·å°±ä¸æ˜¯é‚£ä¹ˆçš„å‹å¥½ã€‚å°¤å…¶æ˜¯Impressï¼ˆå³PPTï¼‰çš„åˆ¶ä½œä¸Šï¼Œæ“ä½œæŒ‰é’®è®©äººçœ‹äº†ä¸€å¤´çš„é›¾æ°´ï¼Œä¸çŸ¥é“æ˜¯å¹²å˜›ç”¨çš„ï¼Œè¿™ä¸€ç‚¹ç›¸ä¿¡å°±åŠé€€äº†å¾ˆå¤šç”¨æˆ·ã€‚ æœ€åæ˜¯å…¼å®¹æ€§é—®é¢˜ï¼ŒLibreOfficeä½¿ç”¨çš„ODFæ ¼å¼å’ŒMS Officeå…¼å®¹æ€§è¾ƒå·®ï¼Œåœ¨æ‰“å¼€æ–‡æ¡£æ—¶å®¹æ˜“å‡ºç°æ ¼å¼é—®é¢˜ï¼›æ¯”å¦‚åœ¨.docxä¸­è¡Œè·ä¼šæœ‰åå·®ï¼Œåœ¨.pptxä¸­çš„æ¸å˜èƒŒæ™¯ã€æ¸å˜æ–‡æœ¬å¡«å……ã€å‘å…‰æ–‡æœ¬ã€åˆ‡æ¢åŠ¨ç”»å‡ ä¹å…¨éƒ¨æŠ¥åºŸï¼Œå…¼å®¹æ€§æ²¡æœ‰WPSæ¥çš„å¥½ã€‚ å‚è€ƒé“¾æ¥ä¸­é™„å½•äº†å¾®è½¯æ•´ç†OpenDocumentå’ŒOfficeæ ¼å¼çš„å·®å¼‚ã€‚ æ€»ç»“ä¸€ä¸‹ï¼ŒLibreOfficeé€‚åˆäºé‚£äº›é‡åº¦çš„å¼€æºçˆ±å¥½è€…ï¼Œç»å¸¸ä½¿ç”¨Linuxå¹³å°ï¼Œæœ‰ä¸€å®šçš„æŠ€æœ¯åŸºç¡€åŠå…´è¶£çˆ±å¥½ï¼Œæ„¿æ„èŠ±è´¹ä¸€å®šçš„æ—¶é—´æ¥æŠ˜è…¾å­¦ä¹ ï¼›åŒæ—¶èº«è¾¹æœ€å¥½æœ‰ä¸€å®šçš„ä½¿ç”¨æ°›å›´ï¼Œæ¯”å¦‚è€æ¿å’ŒåŒäº‹ä¹Ÿéƒ½åœ¨ä½¿ç”¨ï¼ˆä¸ç„¶å®¹æ˜“è¢«å–·ï¼‰ã€‚ æ˜¯å¦å¼€æºï¼šæ˜¯ç•Œé¢æŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜†åŠŸèƒ½æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†ååŒæŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†å…¼å®¹æŒ‡æ•°ï¼šâ˜…â˜†â˜†â˜†â˜†æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜†â˜†â˜† OnlyOffice OnlyOfficeæ˜¯ä¸€æ¬¾å…è´¹å¼€æºã€æ— å¹¿å‘Šçš„åœ¨çº¿æ–‡æ¡£ç¼–è¾‘å¥—ä»¶ï¼Œè™½ç„¶ä¸»æ‰“åœ¨çº¿ç¼–è¾‘ï¼ŒOnlyOfficeä¹Ÿæä¾›äº†Windowsã€Linuxå’ŒmacOSå¤šå¹³å°çš„æ¡Œé¢ç¼–è¾‘å™¨ä»¥åŠç§»åŠ¨ç«¯çš„å®‰å“å’ŒiOSç‰ˆã€‚è¯¥å¥—ä»¶åŒ…æ‹¬ä¸»è¦ä¸‰ä¸ªåŠå…¬è½¯ä»¶ï¼šWordã€Excelå’ŒPPTï¼Œä»¥åŠè¡¨å•æ¨¡æ¿ï¼ŒPDFæŸ¥çœ‹å™¨å’Œæ–‡ä»¶è½¬æ¢å™¨ã€‚ OnlyOfficeæ–‡æ¡£æ˜¯ä¸€æ¬¾å¼ºå¤§çš„åœ¨çº¿ç¼–è¾‘å™¨ï¼Œä¸ºæ‚¨ä½¿ç”¨çš„å¹³å°æä¾›æ–‡æœ¬æ–‡æ¡£ã€ç”µå­è¡¨æ ¼ã€æ¼”ç¤ºæ–‡ç¨¿ã€è¡¨å•å’ŒPDFæŸ¥çœ‹å™¨ã€‚ OnlyOfficeä¸»è¦åˆ†ä¸ºæ¡Œé¢ç¼–è¾‘å™¨ã€æ–‡æ¡£æœåŠ¡å™¨å’Œè¿æ¥å™¨ä¸‰æ¬¾è½¯ä»¶ï¼Œæ¡Œé¢ç¼–è¾‘å™¨å°±æ˜¯æ–‡æ¡£çš„æœ¬åœ°ç¼–è¾‘è½¯ä»¶ï¼Œå’ŒWPSä¸€æ ·ã€‚ æ–‡æ¡£æœåŠ¡å™¨åˆ™æ¯”è¾ƒç‹¬ç‰¹ï¼Œè¿™æ˜¯åœ¨å…¶ä»–çš„åŠå…¬è½¯ä»¶ä¸­æ²¡æœ‰çš„ï¼Œæ˜¯ä¸€æ¬¾å¯ä»¥éƒ¨ç½²åœ¨æœ¬åœ°æœåŠ¡å™¨çš„è½¯ä»¶ï¼Œåœ¨æµè§ˆå™¨ä¸­å¤„ç†Officeæ–‡æ¡£çš„å…¨åŠŸèƒ½åœ¨çº¿åŠå…¬å¥—ä»¶ï¼Œæä¾›äº†ä¼ä¸šç‰ˆã€å¼€å‘è€…ç‰ˆå’Œç¤¾åŒºç‰ˆä¸‰ç§ä¸åŒç‰ˆæœ¬ï¼Œæ¯ç§ç‰ˆæœ¬é’ˆå¯¹çš„ç”¨æˆ·ç¾¤ä½“ä¸åŒï¼›å¦‚æœæ²¡æœ‰æœ¬åœ°æœåŠ¡å™¨ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„äº‘æœåŠ¡å™¨ã€‚ æ–‡æ¡£æœåŠ¡å™¨æä¾›äº†å¤šç§å®‰è£…æ–¹å¼ï¼ŒWindows Serverã€Linuxã€Snapæˆ–Dockeré•œåƒç­‰éƒ½å¯ä»¥ä¸‹è½½éƒ¨ç½²ã€‚ è¿æ¥å™¨å…¶å®å°±æ˜¯é’ˆå¯¹å…¶ä»–åº”ç”¨å¹³å°å¼€å‘çš„ä¸€ä¸ªæ’ä»¶ï¼Œå¯ä»¥å°†æ–‡æ¡£æœåŠ¡å™¨é›†æˆè¿›å»ï¼Œæ–¹ä¾¿ååŒåŠå…¬ï¼›æ¯”å¦‚å¸¸è§çš„Nextcloudã€Confluenceå’ŒownCloudéƒ½æœ‰å¯¹åº”çš„è¿æ¥å™¨ä¸‹è½½ã€‚ ä¸‹è½½å®‰è£… æˆ‘ä»¬ä»å®˜ç½‘æ‰¾åˆ°Linuxç‰ˆæœ¬çš„æ¡Œé¢ç¼–è¾‘å™¨æ¥ä¸‹è½½ï¼Œå®˜æ–¹æä¾›äº†DEBå’ŒRPMç­‰å¸¸è§çš„Linuxå‘è¡Œç‰ˆä¸‹è½½ã€‚ æ‰¾åˆ°é€‚åˆè‡ªå·±ç”µè„‘çš„å®‰è£…åŒ…ï¼Œè¿™é‡Œç¬”è€…ä½¿ç”¨dpkgæ¥å®‰è£…ï¼š 1sudo dpkg -i onlyoffice-desktopeditors_amd64.deb ä¸å‡ºæ„å¤–çš„è¯å°±è¦å‡ºæ„å¤–äº†ï¼Œæœ‰äº›åŒå­¦ç”µè„‘ä¸Šå¯èƒ½ä¼šå‡ºç°å’Œç¬”è€…ç”µè„‘ä¸€æ ·çš„é”™è¯¯ä¿¡æ¯ã€‚ è¿™æ˜¯ç”±äºå®‰è£…æ—¶ç¼ºå°‘ä¸€äº›ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ç¼ºå¤±çš„ä¾èµ–ã€‚ 1234# æ›´æ–°ä¾èµ–çš„è½¯ä»¶åˆ—è¡¨sudo apt-get update# å®‰è£…ç¼ºå¤±ä¾èµ–sudo apt-get --fix-broken install å¦‚æœè¿˜æ˜¯å¤±è´¥å¯ä»¥å°†æœåŠ¡å™¨æºæ›´æ”¹ä¸ºå›½å†…çš„æºï¼Œä¾‹å¦‚ï¼šé˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ç­‰ï¼›å†æ¬¡dpkgæ²¡æœ‰æŠ¥é”™ä¿¡æ¯å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºåˆ—è¡¨å°±å¯ä»¥æ‰¾åˆ°å¹¶æ‰“å¼€ã€‚ æˆ‘ä»¬çœ‹åˆ°æ¬¢è¿ç•Œé¢ä¸Šæœ‰ä¸€ä¸ªOnlyOfficeäº‘ï¼Œè¿™å°±æ˜¯å®ƒçš„åœ¨çº¿ç¼–è¾‘åŠŸèƒ½ï¼Œç•™ä¸ªå°å½©è›‹ï¼Œæˆ‘ä»¬åé¢ä¼šä»‹ç»åˆ°ã€‚ ä¸»è¦åŠŸèƒ½ å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸‹OnlyOfficeçš„æœ‰å“ªäº›åŠŸèƒ½ï¼›é¦–å…ˆæ‰“å¼€å¸¸ç”¨çš„åŠå…¬ä¸‰ä»¶å¥—ï¼Œæˆ‘ä»¬å‘ç°æ•´ä½“çš„ç•Œé¢å‘ˆæ‰å¹³åŒ–é£æ ¼ï¼Œå’ŒOfficeè¿˜æ˜¯ç›¸ä¼¼çš„ã€‚ åœ¨åŸºç¡€ç¼–è¾‘åŠŸèƒ½æ–¹é¢ï¼ŒOnlyOfficeèƒ½å¤Ÿæ»¡è¶³ç»å¤§å¤šæ•°çš„åŠå…¬åœºæ™¯äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒæœ‰å“ªäº›ç‰¹ç‚¹ã€‚ é¦–å…ˆå®ƒæœ¬èº«æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ï¼Œæ–‡ä»¶å¦å­˜ä¸ºï¼Œé€‰æ‹©å³ä¸‹è§’çš„æ ¼å¼ï¼›æˆ‘ä»¬çœ‹åˆ°å®ƒæ”¯æŒä¸‹é¢çš„æ ¼å¼ï¼Œé™¤äº†docxã€è¡¨å•æ ¼å¼ã€OpenDocumentæ ¼å¼ä»¥åŠpdfã€epubï¼›æ˜¯çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†æ–‡æ¡£å¯¼å‡ºåˆ°ç”µå­ä¹¦ä¸Šè¿›è¡ŒæŸ¥çœ‹ã€‚ ç„¶åä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½å°±æ˜¯å®ƒçš„æ–‡æ¡£æ¯”å¯¹å·¥å…·ï¼Œç›¸ä¿¡å†™è¿‡å¤§å­¦è®ºæ–‡çš„å°ä¼™ä¼´éƒ½ä¼šç»å†è¿‡å¥½å‡ ä¸ªç‰ˆæœ¬çš„è®ºæ–‡è¿­ä»£ï¼Œ1.0ã€2.0ã€2.1ç­‰ç­‰ï¼Œæœ€åå¯èƒ½è¿è‡ªå·±éƒ½å‚»å‚»åˆ†ä¸æ¸…å“ªä¸ªç‰ˆæœ¬ä¿®æ”¹äº†å“ªäº›å†…å®¹ã€‚ è€ŒBeyond Compareåªèƒ½å¯¹æ¯”æ–‡æœ¬æ–‡ä»¶çš„å·®å¼‚ï¼Œå¯¹äºŒè¿›åˆ¶çš„Wordæ–‡ä»¶å°±æ— èƒ½ä¸ºåŠ›äº†ï¼›ä½†æ˜¯åœ¨OnlyOfficeä¸­æä¾›äº†æ¯”è¾ƒçš„åŠŸèƒ½ï¼Œç‚¹å‡»åä½œ=&gt;æ¯”è¾ƒï¼Œå¯ä»¥é€‰æ‹©æ–‡ä»¶ä¸­çš„æ–‡æ¡£å’Œurlä¸­çš„æ–‡æ¡£ï¼›è¿™é‡Œç¬”è€…åœ¨æ±‚èŒæ„å‘åé¢åŠ äº†1ï¼Œæ¯”å¯¹å·¥å…·ç«‹åˆ»å‡ºç°å¼¹æ¡†æç¤ºäº†ã€‚ è¡¨å• OnlyOfficeå¦å¤–ä¸€ä¸ªéå¸¸å¥½ç”¨çš„åŠŸèƒ½å°±æ˜¯è¡¨å•äº†ï¼Œè¿™ä¹Ÿæ˜¯å®ƒç‰¹æœ‰çš„åŠŸèƒ½ï¼›è¯´èµ·è¡¨å•ï¼Œå¾ˆå¤šå°ä¼™ä¼´è‚¯å®šéƒ½ä¼šæƒ³åˆ°åœ¨ç½‘é¡µä¸Šå¡«å†™è¡¨å•ï¼›æ˜¯çš„ï¼ŒOnlyOfficeçš„è¡¨å•å°±æ˜¯å°†ç°æœ‰çš„Wordæ–‡æ¡£å˜æˆå¯å¡«å†™çš„è¡¨å•ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€åhråŒå­¦ï¼Œä»Šå¤©ä½ è”ç³»äº†20ä¸ªæ¥åº”è˜ä½ ä»¬å…¬å¸å²—ä½çš„åº”è˜è€…ï¼Œä½ è¦ç»™ä»–ä»¬æ¯äººå‘ä¸€ä»½æ–‡æ¡£å¡«å†™ä¸ªäººä¿¡æ¯ï¼›ä½†æ˜¯æ¯ä¸ªäººå¡«å†™çš„ä¿¡æ¯å¯èƒ½éƒ½ä¸å¤ªå¯¹ï¼Œæœ‰äº›äººå¯èƒ½ç²—å¿ƒï¼Œæ‰‹æœºå·å¤šå¡«ä¸€ä½æˆ–å°‘å¡«ä¸€ä½ï¼Œæ¯ä¸ªäººå‡ºç”Ÿæ—¥æœŸçš„æ ¼å¼å¯èƒ½ä¹Ÿä¼šå¡«å¾—äº”èŠ±å…«é—¨ï¼Œå­¦å†çš„å†…å®¹ä½ å¯èƒ½ä¹Ÿä¼šçœ‹åˆ°å¡«å†™ç¡•å£«æˆ–å¡«ç ”ç©¶ç”Ÿçš„ã€‚ é¢å¯¹è¿™æ ·çš„æƒ…å†µï¼ŒhråŒå­¦å°±éœ€è¦å»å’Œæ¯ä¸ªäººæ²Ÿé€šï¼Œé‡æ–°å¡«å†™æˆ–è€…å¸®ä»–ä»¬æ”¹ï¼›å¾ˆå¤šçš„è®¡åˆ’ä¹¦ã€å•†ä¸šåè®®æˆ–è€…å„ç§åˆåŒç­‰ä¹Ÿéƒ½ä¼šé‡åˆ°ç±»ä¼¼çš„æƒ…å†µï¼›OnlyOfficeçš„è¡¨å•å°±å¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºè¿™æ ·çš„è¡¨å•æ–‡ä»¶ï¼Œåˆ†äº«ç»™å…¶ä»–ç”¨æˆ·å¡«å†™ï¼ŒåŒæ—¶åœ¨æ–‡æ¡£ä¸­å°±è¿›è¡Œæ ¡éªŒã€‚ è¿˜è®°å¾—ä¸Šé¢å¯¼å‡ºå¤šç§æ ¼å¼ä¸­çš„è¡¨å•æ ¼å¼å—ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†è‡ªå·±ç”µè„‘ä¸­çš„Wordæ–‡æ¡£è½¬ä¸ºdocxfçš„è¡¨å•æ–‡ä»¶ï¼Œç„¶åæ·»åŠ æˆ‘ä»¬æ‰€éœ€è¦çš„å­—æ®µï¼šæ–‡æœ¬å­—æ®µã€å›¾åƒã€ç»„åˆæ¡†ã€ä¸‹æ‹‰åˆ—è¡¨ã€å¤é€‰æ¡†ã€å•é€‰æŒ‰é’®ã€ç”µå­é‚®ä»¶ã€ç”µè¯å·ç ç­‰ç­‰ã€‚ åœ¨å³ä¾§çš„æ–‡å­—å­—æ®µæµ®æ¡†ä¸­ï¼Œæˆ‘ä»¬ç”šè‡³è¿˜å¯ä»¥ç¼–å†™æ ¡éªŒçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œdocxfå†…ç½®äº†é‚®ç®±å’Œæ‰‹æœºçš„æ­£åˆ™ï¼›åƒå­¦å†è¿™æ ·çš„å¤šå­—æ®µåˆ—è¡¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä¸‹æ‹‰åˆ—è¡¨ï¼Œè®¾ç½®å¥½å¤šä¸ªæ•°å€¼ï¼Œå°±å¯ä»¥åƒç½‘é¡µä¸Šä¸€æ ·ä½¿ç”¨ä¸‹æ‹‰åˆ—è¡¨äº†ã€‚ ä»€ä¹ˆï¼Ÿä½ è¯´ä½ è¿˜æ˜¯ä¸ä¼šä½¿ç”¨è¡¨å•ï¼Ÿæ²¡å…³ç³»ï¼ŒOnlyOfficeä¹Ÿæä¾›äº†ä¸°å¯Œçš„åœ¨çº¿æ¨¡æ¿åº“ï¼Œå¯ä»¥ç›´æ¥ä¸‹è½½ç„¶åä¿®æ”¹ï¼Œæ¨¡æ¿å…¨éƒ¨éƒ½æ˜¯å…è´¹çš„ã€‚ èªæ˜çš„å°æ˜åŒå­¦å¯èƒ½é©¬ä¸Šå°±ä¼šæƒ³äº†ï¼Œè¿™å‘docxfæ ¼å¼çš„æ–‡ä»¶ï¼Œäººå®¶åº”è˜è€…ä¹Ÿæ‰“ä¸å¼€å•Šï¼Ÿè¯¶ï¼ŒåŒå­¦ï¼Œè¿™ä½ å°±å°çœ‹äº†docxfæ ¼å¼äº†ï¼Œç»è¿‡ç¬”è€…åœ¨ç”µè„‘ä¸Šæµ‹è¯•ï¼Œdocxfä½¿ç”¨WPSå’ŒMS Officeå‡èƒ½æ­£å¸¸æ‰“å¼€ï¼Œæ‰“å¼€æ–¹å¼é€‰æ‹©Wordå³å¯ï¼Œæ ·å¼ä¹Ÿå¹¶æ²¡æœ‰ä»»ä½•çš„é”™ä¹±ï¼Œä¿å­˜æ—¶ä¹Ÿå¯ä»¥æ­£å¸¸ä¿å­˜ä¸ºdocxæ–‡ä»¶ã€‚ æœ€æœ€æœ€å‰å®³çš„åœ°æ–¹æ¥äº†ï¼ï¼ï¼é€šè¿‡OnlyOfficeçš„åœ¨çº¿åä½œåŠŸèƒ½ï¼Œæˆ‘ä»¬ç”šè‡³éƒ½ä¸ç”¨å‘æ–‡ä»¶äº†ï¼Œç›´æ¥å‘ä¸€ä¸ªæ–‡æ¡£çš„é“¾æ¥ï¼Œè®©å¯¹æ–¹ç›´æ¥åœ¨çº¿å¡«å†™ï¼›åœ¨docxfæ–‡ä»¶ä¸­ï¼Œé€‰æ‹©è¡¨å•=&gt;ä¸‹è½½ä¸ºoformï¼Œå°†è¡¨å•å¯¼å‡ºä¸ºä¸€ä¸ªoformæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªæ–‡ä»¶æ”¾åˆ°è‡ªå·±çš„æ–‡æ¡£æœåŠ¡å™¨ï¼ˆä¸‹é¢ä¼šä»‹ç»æ–‡æ¡£æœåŠ¡å™¨ï¼‰æˆ–è€…äº‘æœåŠ¡å™¨ï¼Œç„¶åå°†é“¾æ¥ç›´æ¥å‘é€å³å¯ã€‚ èªæ˜çš„å°æ˜åŒå­¦è¿™æ—¶å€™å¯èƒ½åˆè¦è¯´äº†ï¼Œé‚£åˆ†äº«å‡ºå»çš„é“¾æ¥å²‚ä¸æ˜¯ä»»ä½•äººéƒ½èƒ½å¡«å†™å’ŒæŸ¥çœ‹å—ï¼Ÿè¿˜ä¼šé€ æˆä¿¡æ¯æ³„éœ²ã€‚ä¸ç”¨æ‹…å¿ƒï¼Œåˆ†äº«çš„é“¾æ¥ä¹Ÿä¸ç”¨æ‹…å¿ƒæƒé™é—®é¢˜ï¼Œæ•°å­—è¡¨å•æƒé™ç®¡ç†ä¸Šé¢éå¸¸çš„é«˜æ•ˆï¼Œæˆ‘ä»¬å¯ä¸ºéœ€è¦å¡«å†™è¡¨å•çš„ç”¨æˆ·åˆ†é…å„ç§è§’è‰²ï¼Œç®€åŒ–æ–‡æ¡£å·¥ä½œæµã€‚è¿™æ ·ï¼Œç”¨æˆ·å°±èƒ½æ ¹æ®è§’è‰²åŒ¹é…çš„é¢œè‰²ï¼Œç›´è§‚åœ°è¯†åˆ«ä»–ä»¬åº”è¯¥å¡«å†™å“ªäº›å­—æ®µã€‚ åœ¨å…¼å®¹æ€§æ–¹é¢ï¼Œç¬”è€…åœ¨ç½‘ä¸Šä¸‹è½½å‡ ä¸ªæ¨¡æ¿åï¼Œä½¿ç”¨OnlyOfficeæ‰“å¼€ï¼Œæ ¼å¼ä¸Šä¹Ÿæ²¡æœ‰é”™ä¹±ã€‚ åœ¨çº¿ååŒç¼–è¾‘ æ—¢ç„¶OnlyOfficeä¸»æ‰“çš„æ˜¯åœ¨çº¿ç¼–è¾‘åŠŸèƒ½ï¼Œé‚£ä¹ˆåœ¨ç½‘é¡µä¸ŠååŒç¼–è¾‘è‚¯å®šæ˜¯æœ‰è¿‡äººçš„ç‰¹ç‚¹äº†ï¼›ä¸é”™ï¼Œåœ¨çº¿åä½œç¡®å®æ˜¯å®ƒçš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬æ‰“å¼€å…±äº«è®¾ç½®ï¼Œè®¾ç½®åˆ†äº«æƒé™ï¼›å¯ä»¥è®©æœ‹å‹å’ŒåŒäº‹å®Œå…¨è®¿é—®æƒé™ï¼Œæ¥å’Œä½ ä¸€èµ·ç¼–è¾‘æ–‡æ¡£ï¼Œä¹Ÿå¯ä»¥è®¾ç½®å®¡é˜…å’Œè¯„è®ºæƒé™ç»™ç”²æ–¹ã€‚ å…±äº«ç¼–è¾‘æ˜¯å³æ—¶åŒæ­¥çš„ï¼Œå¯¹æ–¹çš„ä¿®æ”¹èƒ½ç«‹åˆ»åŒæ­¥åˆ°ä½ æ–‡æ¡£ç•Œé¢ä¸Šï¼ŒåŒæ—¶ä½ ä¹Ÿèƒ½çœ‹åˆ°è°ä¿®æ”¹äº†å“ªä¸ªåœ°æ–¹ï¼›ä½†è¿™æ—¶å¦‚æœæœ‰ä¸é è°±çš„åŒäº‹ï¼Œæ‰‹æ®‹åˆ é™¤äº†ä½ è‹¦å¿ƒç¼–è¾‘çš„æ–‡æ¡ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ é‚£ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œåä½œç¼–è¾‘å‰æ‰“å¼€åä½œ=&gt;è·Ÿè¸ªå˜åŒ–=&gt;å¯¹æ‰€æœ‰äººå¯åŠ¨ï¼Œè¿™æ ·å°±ä¼šæŠŠæ‰€æœ‰äººç¼–è¾‘çš„å†å²éƒ½è®°å½•ä¸‹æ¥ï¼›æƒ³è¦å›é€€åˆ°ä»»æ„å†å²æ—¶åˆ»çš„ç‰ˆæœ¬ï¼Œç‚¹å‡»å¯¹åº”ç‰ˆæœ¬ä¸‹æ–¹çš„è¿˜åŸæŒ‰é’®å³å¯ã€‚ æˆ‘ä»¬åœ¨åˆä½œç¼–è¾‘æ—¶ï¼Œç»å¸¸éœ€è¦æ¥æ²Ÿé€šäº¤æµï¼Œåˆ†é…ä»»åŠ¡ã€ä¿®æ”¹æ–‡æ¡ˆç­‰ç­‰ï¼ŒOnlyOfficeæä¾›äº†ç›´æ¥æ²Ÿé€šèŠå¤©çš„æ¸ é“ï¼›ç‚¹å‡»å·¦ä¾§çš„èŠå¤©æŒ‰é’®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨é¡µé¢é‡Œè¿›è¡Œæ²Ÿé€šï¼Œçœå»äº†åœ¨åŠå…¬è½¯ä»¶å’ŒèŠå¤©è½¯ä»¶ä¹‹é—´é¢‘ç¹åˆ‡æ¢çš„éº»çƒ¦ï¼Œæé«˜äº†ç”Ÿäº§åŠ›ã€‚ OnlyOfficeè¿˜æ”¯æŒæ’ä»¶æ‰©å±•ï¼Œå…·æœ‰éå¸¸é«˜çš„å¯æ‰©å±•æ€§ï¼Œå¹¶ä¸”æ’ä»¶çš„åŠŸèƒ½ä¹Ÿéå¸¸å¼ºå¤§ï¼›ç‚¹å‡»æ’ä»¶=&gt;Plugin Manageræˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ’ä»¶åº“ä¸­æ‰€æœ‰çš„æ’ä»¶ï¼Œåƒdraw.ioæ’ä»¶èƒ½å¤Ÿç¼–è¾‘å›¾å½¢ã€OCRå›¾åƒè¯†åˆ«æ’ä»¶ã€Photo Editorå›¾ç‰‡ç¼–è¾‘æ’ä»¶å’Œå®æ—¶èŠå¤©æ’ä»¶Telegramç­‰ï¼›ç”šè‡³è¿˜æœ‰Chessè±¡æ£‹æ’ä»¶ï¼Œè®©æˆ‘ä»¬åœ¨å·¥ä½œä¹‹ä½™ï¼Œèƒ½å¤Ÿå’Œå…¶ä»–çš„åˆä½œè€…ä¸€èµ·æ¥ä¸€å±€è±¡æ£‹æ¯”èµ›ã€‚ å¤šå¹´ä¹‹åï¼Œå½“æˆ‘ä»¬åœ¨Wordæ–‡æ¡£ä¸­ç©æ¸¸æˆå’ŒèŠå¤©æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦ä¹Ÿä¼šæƒ³èµ·è¿‡ç¬¬ä¸€æ¬¡æ‰“å¼€Officeæ—¶æ‡µæ‡‚ã€æ¿€åŠ¨ã€å¥½å¥‡çš„é‚£ä¸ªé¥è¿œçš„ä¸‹åˆï¼Œä»¥åŠä»ä¸ä¼šå®‰åˆ†åœ°è¹²åœ¨å±å¹•æ—è¾¹ï¼Œæ—¶ä¸æ—¶å¸å¼•ä½ æ³¨æ„åŠ›çš„é‚£ä¸ªå°æ›²åˆ«é’ˆã€‚ ç¬”è€…è§‰å¾—æœ€å®ç”¨çš„æ’ä»¶è¿˜æ˜¯Googleç¿»è¯‘æ’ä»¶ï¼›æ‰“å¼€æ’ä»¶ï¼Œé€‰æ‹©å®ƒè®¤è¯†ä½ è€Œä½ ä¸è®¤è¯†å®ƒçš„è‹±æ–‡å•è¯ï¼Œç¿»è¯‘ç»“æœä¹Ÿç«‹åˆ»å°±å‡ºæ¥äº†ï¼Œçœå»äº†é¢‘ç¹åˆ‡æ¢ç¿»è¯‘è½¯ä»¶ï¼ŒåŒæ—¶æˆ‘ä»¬ç‚¹å‡»InsertæŒ‰é’®ï¼Œè¿˜èƒ½ç›´æ¥å°†ç¿»è¯‘çš„ç»“æœæ’å…¥åˆ°æ–‡æ¡£ä¸­å»ï¼Œéå¸¸çš„æ–¹ä¾¿ã€‚ æœ€è¿‘OnlyOfficeå‘å¸ƒäº†æ–°ç‰ˆæœ¬ï¼ˆ7.3ï¼‰ï¼Œå¢åŠ äº†é«˜çº§è¡¨å•ã€SmartArtå›¾å½¢æ’å…¥ã€å¢å¼ºå¯†ç ä¿æŠ¤å’Œå…¬å¼è®¡ç®—ã€å¹»ç¯ç‰‡ç‰¹æ®Šç²˜è´´é¡¹ç­‰å¤šé¡¹åŠŸèƒ½ï¼Œå¯ä»¥å‚è€ƒå®˜ç½‘è¿™ç¯‡æ–‡ç« ï¼Œäº†è§£ä¸€ä¸‹ã€‚ æœ¬åœ°éƒ¨ç½²æ–‡æ¡£æœåŠ¡å™¨ é¦–å…ˆæˆ‘ä»¬æ¥å®‰è£…OnlyOfficeçš„æ–‡æ¡£æœåŠ¡å™¨ï¼ˆDocument Serverï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„åœ¨çº¿åä½œåŠå…¬å¥—ä»¶ï¼›è¿™é‡Œç¬”è€…é€šè¿‡dockerä¸€é”®å®‰è£…ï¼š 1sudo docker run --restart=always -itd -p 13300:80 onlyoffice/documentserver å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬è®¿é—®13300ç«¯å£ï¼Œçœ‹åˆ°æˆ‘ä»¬å®‰è£…çš„æ˜¯ä¸€ä¸ªç¤¾åŒºç‰ˆæœ¬ã€‚ åœ¨å®‰è£…æ—¶ï¼Œæˆ‘ä»¬æ²¡æœ‰æ·»åŠ è‡ªå®šä¹‰ç§˜é’¥ï¼Œå› æ­¤ç”Ÿæˆäº†ä¸€ä¸ªéšæœºçš„ï¼Œæˆ‘ä»¬æ‰§è¡ŒStartingä¸‹é¢çš„dockerå‘½ä»¤ï¼Œç”Ÿæˆä¸€æ®µç§˜é’¥ï¼Œè¿™é‡Œè®°ä¸‹è¿™ä¸ªç§˜é’¥ã€1ã€‘ï¼Œåœ¨åé¢é›†æˆåˆ°å…¶ä»–å¹³å°æ—¶ä¼šä½œä¸ºtokenä½¿ç”¨ã€‚ åœ¨é›†æˆå‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è¿™ä¸ªå®¹å™¨è¿›è¡Œæµ‹è¯•ï¼Œæ‰§è¡ŒTestingä¸‹é¢çš„ä¸¤ä¸ªå‘½ä»¤ï¼Œç‚¹å‡»GO To TEST EXAMPLEï¼Œè·³åˆ°ä¸‹é¢çš„welcomeé¡µé¢ï¼Œæˆ‘ä»¬çš„æ–‡æ¡£æœåŠ¡å™¨å°±å®‰è£…æˆåŠŸäº†ã€‚ åœ¨å·¦ä¾§ï¼Œæˆ‘ä»¬çœ‹åˆ°å¯ä»¥åˆ›å»ºwordï¼Œexcelï¼Œpptå’Œè¡¨å•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Upload fileå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ æˆ‘ä»¬çš„æ–‡æ¡£æœåŠ¡å™¨å°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä½†æ˜¯åªèƒ½å¯¹Officeæ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œç•Œé¢ä¹Ÿæ¯”è¾ƒç®€å•ï¼›æˆ‘ä»¬å¯ä»¥å»å®˜æ–¹ä¸‹è½½è¿æ¥å™¨ã€‚ è¿™é‡Œæˆ‘ä»¬ä»¥æˆ‘ä»¬ç†Ÿæ‚‰çš„Nextcloudç½‘ç›˜ä¸ºä¾‹ï¼Œè¿˜æ˜¯é€šè¿‡dockeræ¥ä¸€é”®å®‰è£…ï¼š 1docker run -d --restart=always --name nextcloud -p 13200:80 nextcloud ç‚¹å‡»å¤´åƒï¼Œæ‰¾åˆ°+åº”ç”¨ï¼Œæœç´¢ONLYOFFICEï¼Œç‚¹å‡»ä¸‹è½½å¹¶å¯ç”¨ã€‚ è¿æ¥å™¨å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬æ¥é…ç½®æ–‡æ¡£æœåŠ¡å™¨çš„åœ°å€ï¼Œç‚¹å‡»å¤´åƒ=&gt;ç®¡ç†è®¾ç½®=&gt;ONLYOFFICEï¼Œå¡«å†™æ–‡æ¡£æœåŠ¡å™¨çš„ipåœ°å€ï¼Œç§˜é’¥å¤„å¡«å†™ä¸Šé¢å®‰è£…æ–‡æ¡£æœåŠ¡å™¨æ—¶ç”Ÿæˆçš„ç§˜é’¥ã€1ã€‘ï¼Œç‚¹å‡»ä¿å­˜ï¼Œå¦‚æœæ²¡æœ‰æŠ¥é”™ä¿¡æ¯å¹¶æç¤ºå·²ä¿å­˜å°±å®‰è£…å®Œæˆäº†ã€‚ æˆ‘ä»¬å›åˆ°é¦–é¡µï¼Œç‚¹å‡»+æŒ‰é’®ï¼Œå¯ä»¥çœ‹åˆ°å‡ºç°äº†å¤šä¸ªæ–°å»ºOfficeæ–‡æ¡£çš„æŒ‰é’®ï¼Œè¯´æ˜æ–‡æ¡£æœåŠ¡å™¨å·²ç»é›†æˆåˆ°æˆ‘ä»¬çš„Nextcloudäº†ã€‚è¿™é‡Œæˆ‘ä»¬å†æ¬¡æ¥æ‰“å¼€ä¸€ä¸ªæ–‡æ¡£æŸ¥çœ‹ï¼Œä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ç¼–è¾‘çš„ï¼Œåœ¨çº¿åä½œå’Œæ’ä»¶åŠŸèƒ½ä¹Ÿéƒ½èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äºä¸ªäººç”¨æˆ·æ¥è¯´ï¼ŒOnlyOfficeæä¾›äº†å…¨å¹³å°æ”¯æŒçš„å…è´¹å¼€æºä¸”æ— å¹¿å‘Šçš„ç¼–è¾‘å™¨ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬æ–¹ä¾¿çš„ç¼–è¾‘æ–‡æ¡£ï¼Œæé«˜å·¥ä½œæ•ˆç‡ï¼›å¯¹äºä¼ä¸šç”¨æˆ·æ¥è¯´ï¼Œå¯ä»¥åœ¨äº‘ç«¯æˆ–è€…æœ¬åœ°éƒ¨ç½²æœåŠ¡ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œï¼Œç»™è‡ªå·±çš„å›¢é˜Ÿå’Œä¼ä¸šèµ‹èƒ½ï¼›å¯¹äºå¼€å‘è€…æ¥è¯´ï¼Œå¯ä»¥å°†å®ƒé›†æˆåˆ°æœåŠ¡å™¨æˆ–è€…Appä¸­ï¼Œä¸ºå…¶ä»–ç”¨æˆ·æä¾›æ–‡æ¡£æœåŠ¡ã€‚ æ˜¯å¦å¼€æºï¼šæ˜¯ç•Œé¢æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†åŠŸèƒ½æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†ååŒæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜…å…¼å®¹æŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜†æ¨èæŒ‡æ•°ï¼šâ˜…â˜…â˜…â˜…â˜… æ€»ç»“ é€šè¿‡å¯¹ä¸‰æ¬¾åŠå…¬è½¯ä»¶çš„æµ‹è¯•å’Œä½¿ç”¨ï¼Œå¯¹äºæ™®é€šä¸ªäººç”¨æˆ·æ¥è¯´ï¼ŒWPSå’ŒOnlyOfficeæ— è®ºæ˜¯åœ¨ç•Œé¢ã€å…¼å®¹æ€§è¿˜æ˜¯åœ¨çº¿åä½œæ–¹é¢ï¼Œåšçš„éƒ½è¿˜ä¸é”™ï¼›å¯¹äºLinuxçˆ±å¥½è€…ï¼ŒLibreOfficeè‡ªç”±å¼€æºï¼ŒåŒæ—¶åˆç®€å•å®ç”¨çš„ç‰¹æ€§æ·±æ·±åœ°å¸å¼•ç€ä»–ä»¬ï¼›å¯¹äºä¼ä¸šç”¨æˆ·ï¼ŒOnlyOfficeçš„åœ¨çº¿åä½œèµ‹èƒ½èƒ½å¤Ÿå¸¦æ¥æ›´å¤šçš„ä¾¿åˆ©ï¼Œå®ä¸ºä¸é”™çš„é€‰æ‹©ï¼›ä¸€æ¬¾å¥½ç”¨çš„åŠå…¬è½¯ä»¶èƒ½å¤Ÿè®©æˆ‘ä»¬åœ¨å·¥ä½œä¸Šäº‹åŠåŠŸå€ï¼Œåˆ°åº•å“ªæ¬¾è½¯ä»¶é€‚åˆè‡ªå·±ï¼Œç»è¿‡ä¸€æ®µæ—¶é—´çš„ç£¨åˆä½¿ç”¨ï¼Œç›¸ä¿¡ä½ ä¼šæœ‰ç­”æ¡ˆçš„ã€‚ å‚è€ƒ2020 å¹´äº†ï¼Œç°åœ¨ WPS å’Œ Office å“ªä¸ªå¥½ç”¨ï¼Ÿä¸ºä»€ä¹ˆä¼šæœ‰å¾ˆå¤šäººã€è§‰å¾—å›½äº§WPSã€‘æ¯”ä¸ä¸Šå¾®è½¯çš„officeï¼ŸOpenDocument æ–‡æœ¬ (.odt) æ ¼å¼ä¸ Word (.docx) æ ¼å¼ä¹‹é—´çš„å·®å¼‚OpenDocument ç”µå­è¡¨æ ¼ (.ods) æ ¼å¼ä¸ Excel for Windows (.xlsx) æ ¼å¼ä¹‹é—´çš„å·®å¼‚ä½¿ç”¨PowerPointä»¥ OpenDocument æ¼”ç¤ºæ–‡ç¨¿æ ¼å¼ä¿å­˜æˆ–æ‰“å¼€æ¼”ç¤ºæ–‡ç¨¿ (.odp) æ ¼å¼","tags":[{"name":"Linux","slug":"Linux","permalink":"https://xieyufei.com/tags/Linux/"}]},{"title":"ä¸ºä»€ä¹ˆå¾ˆå¤šç¨‹åºå‘˜éƒ½å»ºè®®ä½¿ç”¨Linuxï¼Ÿ","date":"2022-12-10T03:00:00.000Z","path":"2022/12/10/Recommend-Linux.html","text":"åœ¨çŸ¥ä¹ä¸Šæœ‰è¿™ä¹ˆä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆå¾ˆå¤šç¨‹åºå‘˜éƒ½å»ºè®®ä½¿ç”¨Linuxï¼Ÿåœ¨è¿™ä¸ªé—®é¢˜ä¸Šæˆ‘å…¶å®æœ‰æŒºå¤šæƒ³èŠçš„ï¼Œè™½ç„¶æ¯”ä¸ä¸Šä¸“é—¨ç”¨C/C++ç¼–è¯‘çš„å·¥ç¨‹å¸ˆäº†è§£çš„é‚£ä¹ˆåº•å±‚ï¼Œä¹Ÿæ¯”ä¸ä¸Šè¿ç»´å·¥ç¨‹å¸ˆæ¯å¤©æ¥è§¦Linuxï¼Œä½†æ˜¯æˆ‘ä»¬çš„å·¥ä½œä¸­è¿˜æ˜¯ä¼šæ¥è§¦åˆ°ä¸å°‘Linuxçš„ï¼Œä»Šå¤©æˆ‘ä»¬æ¥è®¨è®ºä¸€ä¸‹å­¦ä¹ Linuxçš„å¿…è¦æ€§ä»¥åŠå¸¦æ¥çš„ä»·å€¼ã€‚ å‘å±•å†ç¨‹ ç›¸ä¿¡å¯¹Linuxç³»ç»Ÿæœ‰ä¸€äº›äº†è§£çš„ç«¥é‹éƒ½å¬è¿‡è¿™ä¹ˆä¸€ä¸ªæ•…äº‹ï¼ŒLinuxæ˜¯ä¸€åèŠ¬å…°çš„å­¦ç”ŸLinus Torvaldsåœ¨Unixç³»ç»Ÿçš„åŸºç¡€ä¸Šå¼€å‘çš„ï¼Œå¹¶å‘å¸ƒåœ¨å­¦æ ¡è®ºå›ï¼Œæœ€åç«äº†èµ·æ¥ã€‚ä½†æ˜¯è¿™ä¹ˆè¯´å¹¶ä¸ååˆ†çš„å‡†ç¡®ï¼ŒLinuxçš„æ•…äº‹ç¼˜èµ·äºæ›´æ—©çš„UNIXç³»ç»Ÿã€‚ UNIX è¯´åˆ°Linuxï¼Œå°±ä¸èƒ½æåˆ°å¤§åé¼é¼çš„UNIXç³»ç»Ÿï¼Œåœ¨ä¸Šä¸–çºª60å¹´ä»£æœ«çš„æ—¶å€™ï¼Œé‚£æ—¶å€™è®¡ç®—æœºç³»ç»Ÿè¿˜æ˜¯æ‰¹å¤„ç†çš„ï¼Œåœ¨åˆå¤§åˆç¬¨çš„å¤§å‹æœºå™¨ä¸Šè¿è¡Œï¼Œè¦å…ˆå°†ç¨‹åºå¡ç‰‡è£…å…¥è®¾å¤‡ï¼Œç„¶åç­‰1ä¸ªå°æ—¶åæ‰èƒ½å–è¿ç®—çš„ç»“æœã€‚ä¸ä»…æ…¢ï¼Œè¿˜å¾ˆåºŸçº¸ã€‚ äºæ˜¯ç¾å›½ç”µè¯ç”µæŠ¥å…¬å¸(ä¸‹é¢ç®€ç§°AT&amp;Tå…¬å¸)ä¸‹é¢çš„è´å°”å®éªŒå®¤è”åˆéº»çœç†å·¥å­¦é™¢åŠç¾å›½é€šç”¨ç”µæ°”å…¬å¸æœ¬æ¥æ˜¯æ‰“ç®—å¼€å‘ä¸€ä¸ªå¤§å‹æœºä¸Šçš„å¤šäººä½¿ç”¨ã€å¤šä»»åŠ¡ã€å¤šå±‚æ¬¡çš„æ“ä½œç³»ç»Ÿmulticsã€‚ä½†æ˜¯multicsè¿™ä¸ªç³»ç»Ÿæ­¥å­è¿ˆå¾—å¤ªå¤§äº†ï¼Œè´å°”å®éªŒå®¤è®¤ä¸ºè¿™ä¸ªé¡¹ç›®å‘¨æœŸé•¿ã€æˆæœ¬é«˜ï¼Œä¸ä¹…å°±æ’¤èµ„äº†ï¼Œå„æ–¹ä¹Ÿé™†ç»­é€€å‡ºï¼Œé¡¹ç›®äºæ˜¯å‡‰å‡‰äº†ã€‚ ä½†æ˜¯è´å°”å®éªŒå®¤ä¸‹é¢çš„ä¸¤ä¸ªç ”ç©¶å‘˜è‚¯Â·æ±¤æ™®æ£®ï¼ˆKen Thompsonï¼‰å’Œä¸¹å°¼æ–¯Â·é‡Œå¥‡ï¼ˆDennis Ritchieï¼‰å¯¹é¡¹ç›®å…³é—­å¾ˆå¤±æœ›ï¼Œå› ä¸ºä»–ä»¬åœ¨è¿™ä¸ªç³»ç»Ÿä¸Šå¼€å‘äº†ä¸€ä¸ªæ¸¸æˆå¤ªç©ºæ—…è¡Œ(Space Travel)ï¼Œå®éªŒå®¤çš„å…¶ä»–äººå‘˜å¯¹è¿™ä¸ªæ¸¸æˆç©å¾—ä¹Ÿå¾ˆä¸Šå¤´ã€‚ äºæ˜¯ï¼Œä¸ºäº†èƒ½å¤Ÿç»§ç»­ç©æ¸¸æˆï¼Œè‚¯Â·æ±¤æ™®æ£®å’Œä¸¹å°¼æ–¯Â·é‡Œå¥‡å†³å®šè‡ªå·±å¼€å‘ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼›æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œå¤§ç¥å°±æ˜¯å¤§ç¥ï¼Œå‡ºå‘ç‚¹éƒ½å¼‚äºå¸¸äººã€‚è‚¯Â·æ±¤æ™®æ£®æ‰¾æ¥äº†ä¸€å°äº”å¹´å‰è€æ—§çš„PDP-7å°å‹æœºï¼Œè™½ç„¶ç§°ä¸ºå°å‹æœºï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€é—´å±‹å­é‚£ä¹ˆå¤§ï¼ æ­£å¥½åœ¨è¿™æ®µæ—¶é—´ï¼Œä»–è€å©†å¸¦ç€å­©å­å›å¨˜å®¶ä½äº†3ä¸ªç¤¼æ‹œï¼Œä¹Ÿå°±æ˜¯è¯´ä»–æœ‰æ•´æ•´3ä¸ªç¤¼æ‹œæ²¡æœ‰äººæ‰“æ‰°ä»–çš„å·¥ä½œã€‚ è¿™ä»¶äº‹å‘Šè¯‰äº†æˆ‘ä»¬,ä¸€ä¸ªç”·äººæƒ³è¦æå¤§äº‹ï¼Œè€å©†ä¸åœ¨å®¶æ˜¯å¤šä¹ˆçš„é‡è¦ï¼ åœ¨è¿™å°æœºå™¨ä¸Šï¼Œä»–é¦–å…ˆé‡å†™äº†æ¸¸æˆï¼Œç„¶åæƒ³è¦å¼€å‘ä¸€ä¸ªå…¨æ–°çš„æ“ä½œç³»ç»Ÿï¼Œç”±äºæœ‰ä¹‹å‰multicsç³»ç»Ÿçš„ç»éªŒï¼Œåœ¨ä¸€ä¸ªæœˆå†…ä»–å¾ˆå¿«å®Œæˆäº†å†…æ ¸ç³»ç»Ÿã€æ–‡ä»¶ç³»ç»Ÿã€ç¼–è¾‘å™¨ã€ç¼–è¯‘ç³»ç»Ÿçš„å·¥ä½œã€‚1969å¹´ç¬¬ä¸€ç‰ˆçš„UNIXç³»ç»Ÿæ­£å¼è¯ç”Ÿäº†ã€‚ åœ¨ã€ŠUNIXä¼ å¥‡ã€‹ä¸€ä¹¦ä¸­ï¼ŒæåŠäº†UNIXç³»ç»Ÿçš„é«˜å…‰æ—¶åˆ»ï¼Œä¸Šæ˜ äº1993å¹´çš„ç§‘å¹»å†’é™©ç”µå½±ã€Šä¾ç½—çºªå…¬å›­ã€‹ç›¸ä¿¡ä¸å°‘åŒå­¦è‚¯å®šå¯¹è¿™éƒ¨è€ç”µå½±ä»æ—§å°è±¡æ·±åˆ»ï¼›å…¶ä¸­ä¸€ä¸ªååœºé¢ï¼Œå“ˆè’™å¾·æ•™æˆçš„å­™å¥³å°±æ˜¯æ“ä½œUNIXç³»ç»Ÿï¼Œå…³é—­äº†é—¸é—¨ï¼Œä»è€Œæ‹¯æ•‘äº†ä¸€è¡Œäººï¼Œæœ‰å…´è¶£å¯ä»¥é‡æ¸©Bç«™è§†é¢‘ç‰‡æ®µã€‚ è¿™ä¸ªæ•…äº‹å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œå¤šå­¦ä¸€é—¨æ“ä½œç³»ç»Ÿï¼Œåœ¨å…³é”®æ—¶åˆ»è¯´ä¸å®šèƒ½å¤Ÿä¿å‘½ã€‚ ä½†æ˜¯UNIXæ˜¯ç”±ä¸å°‘ä½¿ç”¨æ±‡ç¼–è¯­è¨€å®Œæˆçš„ï¼Œæ±‡ç¼–è¯­è¨€ç”¨æ¥ç¼–ç¨‹ä¸å¤Ÿå¼ºå¤§ï¼Œä¹Ÿä¸å…·å¤‡å¾ˆå¥½çš„å¯ç§»æ¤æ€§ï¼Œäºæ˜¯1971å¹´ä¸¹å°¼æ–¯Â·é‡Œå¥‡åœ¨Bè¯­è¨€çš„åŸºç¡€ä¸Šå¼€å‘å‡ºäº†Cè¯­è¨€ï¼Œ1973å¹´UNIXä¹Ÿç”¨Cè¯­è¨€è¿›è¡Œäº†é‡å†™ï¼Œéšåå‘å¸ƒäº†4ã€5ã€6å‡ ä¸ªç‰ˆæœ¬çš„UNIXã€‚æ­¤åï¼ŒUNIXè¢«æ”¿åºœæœºå…³ã€ç ”ç©¶æœºæ„ã€ä¼ä¸šã€å¤§å­¦çº·çº·æ³¨æ„ï¼Œå¹¶é€æ­¥æµè¡Œï¼›éšç€UNIXç³»ç»Ÿçš„å¹¿æ³›æµè¡Œï¼ŒCè¯­è¨€ä¹Ÿæˆä¸ºäº†æœ€å—æ¬¢è¿çš„è¯­è¨€ä¹‹ä¸€ï¼Œä¸€ç›´å»¶ç»­è‡³ä»Šã€‚ ä¸€å¼€å§‹AT&amp;Tå…¬å¸ä¹Ÿæ²¡æœ‰æŠŠUNIXå½“å›äº‹ï¼Œæ¯•ç«Ÿä¸æ˜¯æ­£å¼çš„é¡¹ç›®ï¼Œå†µä¸”åœ¨æ“ä½œç³»ç»Ÿä¸Šï¼ˆmulticsï¼‰è¿˜åƒè¿‡å¤§äºï¼Œä¹Ÿå°±æ²¡æƒ³æ‹¿å®ƒå–é’±ï¼Œå› æ­¤è¢«å…è´¹æä¾›ç»™å¤§å­¦ä½¿ç”¨ï¼Œç”šè‡³ç›´æ¥ç»™V7ç‰ˆæœ¬çš„æºç ä»¥åšç ”ç©¶ã€‚ å› æ­¤åœ¨åé¢çš„10å¹´ï¼ŒUNIXåœ¨å„ä¸ªå­¦æœ¯æœºæ„å¾—åˆ°å¹¿æ³›åº”ç”¨ï¼Œç”šè‡³è®¸å¤šæœºæ„åœ¨æ­¤æºç åŸºç¡€ä¸ŠåŠ ä»¥æ”¹è¿›ï¼Œå…¶ä¸­æœ€è‘—åçš„å˜ç§ä¹‹ä¸€æ˜¯ç”±åŠ å·å¤§å­¦æŸå…‹è±åˆ†æ ¡å¼€å‘çš„BSDäº§å“(Berkeley Software Distribution)ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šåˆè¯ç”Ÿäº†ä¸‰æ¡åˆ†æ”¯ï¼šFreeBSDã€OpenBSDå’ŒNetBSDï¼Œå°±è¿è‹¹æœç”µè„‘çš„å†…æ ¸Darwinæ‰€ä½¿ç”¨çš„NextSETPä¹Ÿæ˜¯BSDçš„è¡ç”Ÿç‰ˆæœ¬ã€‚ AT&amp;Tå…¬å¸ä¸€çœ‹ï¼Œå“Ÿå‘µï¼ŒUNIXå±…ç„¶è¿™ä¹ˆç«ï¼Œäºæ˜¯æ„è¯†åˆ°äº†UNIXå·¨å¤§çš„å•†ä¸šä»·å€¼ï¼Œä¸å†å°†UNIXæºç æˆæƒç»™å­¦æœ¯æœºæ„ï¼Œå¹¶å¯¹ä¹‹å‰çš„UNIXåŠå…¶å˜ç§å£°æ˜äº†ç‰ˆæƒï¼Œåé¢å¼•å‘äº†å„ç§æ—·æ—¥æŒä¹…çš„ç‰ˆæƒçº çº·ï¼Œè¿™æ˜¯UNIXçš„åè¯ã€‚ Linux æ—¶é—´æ¥åˆ°äº†80å¹´ä»£ï¼Œéšç€AT&amp;Tå…¬å¸é—­æºUNIXç³»ç»Ÿï¼Œåœ¨å­¦æ ¡é‡Œç»™å­¦ç”Ÿç”¨çš„æ“ä½œç³»ç»Ÿå¾ˆå°‘ï¼›å½“æ—¶è®¡ç®—æœºä¸»è¦ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿæœ‰UNIXã€MS-DOSå’ŒMacOSè¿™å‡ ç§ï¼ŒUNIXå·²ç»å¼€å§‹å•†ç”¨ï¼Œæ¯”è¾ƒæ˜‚è´µï¼Œä»…å±€é™äºå¤§å‹æœºï¼›MS-DOSç³»ç»Ÿæ¯”è¾ƒç®€é™‹ï¼Œä¸”æºä»£ç è¢«è½¯ä»¶å‚å•†ä¸¥æ ¼ä¿å¯†ï¼›è€ŒMacOSå¤§å®¶è‚¯å®šä¹Ÿéƒ½çŸ¥é“ï¼Œæ˜¯ä¸“é—¨ç”¨åœ¨è‹¹æœè®¡ç®—æœºä¸Šçš„ç³»ç»Ÿï¼Œè€Œä¸”å½“æ—¶åº”è¯¥æ²¡æœ‰é»‘è‹¹æœä¸€è¯´ã€‚ 1987å¹´å½“æ—¶åœ¨è·å…°é˜¿å§†æ–¯ç‰¹ä¸¹Vrijeå¤§å­¦å½“æ•™æˆçš„ç¾å›½äººå®‰è¿ªÂ·å¡”å†…é²å§†ï¼ˆAndrewS.Tanenbaumï¼‰ä¸ºäº†è®©å­¦ç”Ÿæ›´å¥½çš„ç†è§£æ“ä½œç³»ç»Ÿçš„åŸç†ï¼Œå°±ä»¿ç…§BSDçš„æºä»£ç ï¼Œç¼–å†™äº†ä¸€ä¸ªç±»UNIXç³»ç»Ÿï¼Œå–åä¸ºMINIXï¼Œæ„ä¸ºè¿·ä½ çš„UNIXï¼Œå¹¶ä¸”å¼€æ”¾å…¨éƒ¨ä»£ç ç»™å¤§å­¦æ•™å­¦å’Œç ”ç©¶ç”¨ï¼›æ—¢ç„¶æ˜¯MINIï¼Œå®ƒçš„ä»£ç ä½“é‡ä¹Ÿæ˜¯æ¯”è¾ƒå°çš„ï¼Œå…¨éƒ¨ä»£ç å…±çº¦12000è¡Œï¼Œè€Œä¸”åªæ˜¯ä¸€ä¸ªæ•™å­¦å·¥å…·ï¼Œæ²¡æœ‰ä»€ä¹ˆå®é™…çš„åº”ç”¨ä»·å€¼ã€‚ 1991å¹´ï¼Œæˆ‘ä»¬çš„ä¸»äººå…¬Linus Torvaldsï¼ˆç®€ç§°Linusï¼‰åœ¨èŠ¬å…°èµ«å°”è¾›åŸºå¤§å­¦æœŸé—´ï¼Œå¼€å§‹å¯¹UNIXäº§ç”Ÿäº†æµ“åšçš„å…´è¶£ï¼›åœ¨æ ¡æœŸé—´ï¼Œç”±äºLinusç»å¸¸è¦ç”¨ä»–çš„ç»ˆç«¯ä»¿çœŸå™¨ï¼ˆTerminal Emulatorï¼‰å»è®¿é—®å¤§å­¦ä¸»æœºä¸Šçš„æ–°é—»ç»„å’Œé‚®ä»¶ï¼Œä»–å¯¹MINIXåªå…è®¸åœ¨æ•™è‚²ä¸Šä½¿ç”¨å¾ˆä¸æ»¡ï¼ŒåŒæ—¶ä¹Ÿä¸ºäº†æ–¹ä¾¿è¯»å†™å’Œä¸‹è½½æ–‡ä»¶ï¼Œä»–å¼€å§‹å†™å±äºè‡ªå·±çš„ç±»UNIXç³»ç»Ÿï¼›åœ¨ä¸€ä¸ªæš‘å‡æ²¡æ—¥æ²¡å¤œçš„å¼€å‘ä¸­ï¼Œæœ€ç»ˆå¼€å‘å‡ºäº†Linuxçš„ç¬¬ä¸€ä¸ªå†…æ ¸ï¼ˆ0.02ç‰ˆï¼‰ï¼Œå¹¶å–åLinus&#39; Minixï¼Œåæ¥æ”¹åä¸ºLinuxã€‚ 1991å¹´10æœˆLinusåœ¨Minixæ–°é—»ç»„å‘å¸ƒæ¶ˆæ¯ï¼Œå¯¹å¤–å®£å¸ƒLinuxå†…æ ¸çš„è¯ç”Ÿï¼Œå¹¶å…¬å¼€äº†å†…æ ¸æºç ï¼›å…¬å¼€åLinuxå› ä¸ºç»“æ„æ¸…æ™°ã€åŠŸèƒ½ç®€æ´ï¼Œä¸€ç»å‘å¸ƒç«‹å³æ”¶å—å¥½è¯„ï¼›åæ¥åœ¨å¾ˆå¤šçƒ­å¿ƒæ”¯æŒè€…çš„å¸®åŠ©ä¸‹ï¼Œç»è¿‡å¤šæ¬¡ç‰ˆæœ¬å‡çº§è¿­ä»£ï¼Œç»ˆäºåœ¨1994å¹´3æœˆï¼ŒLinux1.0æ­£å¼å‘å¸ƒã€‚ Linuxçš„æ ‡å¿—å’Œå‰ç¥¥ç‰©æ˜¯ä¸€åªå«åšTuxçš„ä¼é¹…ï¼Œå®ƒçš„ç”±æ¥æ˜¯å› ä¸ºLinusä¹‹å‰åœ¨æ¾³æ´²æ—¶ï¼Œåœ¨åŠ¨ç‰©å›­é‡Œæ›¾è¢«ä¸€åªä¼é¹…å’¬äº†ä¸€å£ï¼Œä¾¿é€‰æ‹©äº†ä¼é¹…ä½œä¸ºLinuxçš„æ ‡å¿—ã€‚ å¦‚åŒå½“åˆæ±¤æ™®æ£®å’Œé‡Œå¥‡æ²¡æœ‰æƒ³åˆ°UNIXç³»ç»Ÿçš„æˆåŠŸä¸€æ ·ï¼ŒLinusä¹Ÿæ²¡æœ‰æƒ³åˆ°è‡ªå·±èŠ±äº†ä¸€ä¸ªæš‘å‡åšç€ç©çš„å†…æ ¸ç³»ç»Ÿï¼Œç«Ÿç„¶èƒ½ä»¥å•†å“åŒ–æ“ä½œç³»ç»Ÿçš„å½¢æ€ï¼Œè¿è¡Œåœ¨ä»Šå¤©å…¨çƒæ•°åäº¿å°è®¾å¤‡ä¸Šã€‚ åœ¨Linuxçš„å®˜ç½‘ï¼Œæœ‰è¿™ä¹ˆä¸€ç¯‡æ–‡ç« ï¼Œä»€ä¹ˆæ˜¯Linuxï¼Œè¯¦ç»†çš„ä»‹ç»äº†Linuxçš„åŠŸèƒ½ã€å†…æ ¸æ¯ä¸ªéƒ¨åˆ†ä½œç”¨ï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨Linuxï¼Œæ„Ÿå…´è¶£çš„ç«¥é‹å¯ä»¥çœ‹çœ‹ã€‚ Linuxä¸UNIXçš„åŒºåˆ«å’Œè”ç³» æˆ‘ä»¬ä¸Šé¢æåˆ°äº†ä¸€ä¸ªè¯ï¼šç±»UNIXç³»ç»Ÿï¼Œé‚£ä»€ä¹ˆæ˜¯ç±»UNIXç³»ç»Ÿå‘¢ï¼Ÿ ç±»UNIXç³»ç»Ÿæ˜¯æŒ‡ç»§æ‰¿UNIXçš„è®¾è®¡é£æ ¼æ¼”å˜å‡ºæ¥çš„ç³»ç»Ÿã€‚ ç±»UNIXç³»ç»Ÿå°±æ˜¯é•¿å¾—åƒUNIXã€ä½†å®é™…ä¸æ˜¯UNIXçš„ç³»ç»Ÿï¼›å…¶å®æœ¬è´¨ä¸Šå°±æ˜¯å€Ÿé‰´äº†UNIXç³»ç»Ÿçš„ç•Œé¢ã€ç‰¹æ€§ï¼ˆå¤šç”¨æˆ·ã€å¤šä»»åŠ¡ç­‰ï¼‰ï¼Œä½†æ˜¯æ²¡æœ‰ç›´æ¥æŠ„äººå®¶çš„æºä»£ç ï¼Œæ¯•ç«Ÿäººå®¶æ˜¯æœ‰ç‰ˆæƒé™åˆ¶çš„ï¼Œå› æ­¤æ›´å¤šæ˜¯æ€æƒ³ç†å¿µä¸Šçš„ä¼ æ‰¿ã€‚ä¸Šé¢æåˆ°çš„BSDã€MINIXç³»ç»Ÿï¼Œä»¥åŠLinuxç³»ç»Ÿéƒ½å±äºç±»UNIXç³»ç»Ÿã€‚ç”±äºUNIXæ ‡å‡†è®¤å®šä»·æ ¼æ˜‚è´µï¼Œæ‰€ä»¥ç›®å‰å”¯ä¸€è·å¾—UNIXæ ‡å‡†è®¤å®šçš„ä¸ºè‹¹æœçš„MACOSç³»ç»Ÿã€‚ Linuxç³»ç»Ÿå’ŒUNIXç³»ç»Ÿä¸»è¦æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š å¼€æºæ€§ï¼šUNIXæ˜¯é—­æºçš„ï¼ŒLinuxæ˜¯å¼€æºçš„ã€‚ è·¨å¹³å°æ€§ï¼šUNIXç³»ç»Ÿå¤§å¤šæ˜¯ä¸ç¡¬ä»¶é…å¥—çš„ï¼Œåªèƒ½åœ¨å·¥ä½œç«™æˆ–å°å‹æœºä¸Šè¿è¡Œï¼Œä¸”ä»·æ ¼æ˜‚è´µï¼›è€ŒLinuxåˆ™å¯è¿è¡Œåœ¨å¤šç§ç¡¬ä»¶å¹³å°ä¸Šã€‚ Linuxå‘è¡Œç‰ˆ æˆ‘ä»¬å¾ˆå¤šæ—¶å€™éƒ½èƒ½çœ‹åˆ°Linuxå‘è¡Œç‰ˆè¿™ä¸ªè¯ï¼Œæˆ–è€…åˆçœ‹åˆ°è¯´Linuxå†…æ ¸æ€ä¹ˆæ ·ï¼Œå¾ˆå¤šåŒå­¦å®¹æ˜“æ··æ·†è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚å…¶å®å½“åˆLinuså¼€å‘çš„Linuxåªæ˜¯ä¸€ä¸ªå†…æ ¸ï¼Œæ˜¯ä¸€ä¸ªæä¾›è®¾å¤‡é©±åŠ¨ã€æ–‡ä»¶ç³»ç»Ÿã€è¿›ç¨‹ç®¡ç†ã€ç½‘ç»œé€šä¿¡ç­‰åŠŸèƒ½çš„ç³»ç»Ÿè½¯ä»¶ï¼Œæ˜¯ç¡¬ä»¶å’Œè½¯ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡çš„æ¡¥æ¢ï¼Œå†…æ ¸å¹¶ä¸æ˜¯ä¸€å¥—å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼›æˆ‘ä»¬å¯ä»¥æŠŠå†…æ ¸ç†è§£ä¸ºæ‰‹æœºçš„èŠ¯ç‰‡ï¼Œæœ‰äº†èŠ¯ç‰‡ï¼Œæ‰‹æœºçš„å„ä¸ªåŠŸèƒ½æ‰èƒ½è¿è¡Œèµ·æ¥ï¼Œå› æ­¤å†…æ ¸æ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒã€‚æˆ‘ä»¬åœ¨The Linux Kernel Archivesç½‘ç«™å¯ä»¥ä¸‹è½½åˆ°å„ç§ç‰ˆæœ¬çš„Linuxå†…æ ¸ï¼Œå¹¶ä¸”å¯¹å…¶è¿›è¡Œç¼–è¯‘ã€‚ å†…æ ¸æ˜¯æ“ä½œç³»ç»Ÿé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ¥è¿‘äºç‰©ç†ç¡¬ä»¶ï¼Œä¸æ˜¯æ“ä½œç³»ç»Ÿã€‚ æˆ‘ä»¬å¸¸è¯´çš„Linuxç³»ç»Ÿï¼Œå…¶å®æ›´å¤šè¯´çš„æ˜¯å¹¿ä¹‰ä¸ŠLinuxä¼—å¤šçš„å‘è¡Œç‰ˆï¼Œå› ä¸ºä½ å¹¶ä¸ä¼šç›´æ¥å»æ“ä½œç³»ç»Ÿçš„å†…æ ¸ã€‚å‘è¡Œç‰ˆæ˜¯æŒ‡ä¸€äº›ç»„ç»‡æˆ–å‚å•†å°†Linuxçš„å†…æ ¸ä¸å„ç§è½¯ä»¶ã€è½¯ä»¶åŒ…ç®¡ç†å™¨ç­‰å°è£…èµ·æ¥ï¼Œå¹¶æä¾›ç³»ç»Ÿå®‰è£…ç•Œé¢ã€ç³»ç»Ÿé…ç½®å’Œæ¡Œé¢ç¯å¢ƒç­‰ï¼Œæ„æˆäº†Linuxçš„å‘è¡Œç‰ˆã€‚ç›¸å½“äºå°ç±³ã€VIVOçš„æ‰‹æœºå‚å•†ï¼Œå°†èŠ¯ç‰‡é›†æˆåˆ°æ‰‹æœºé‡Œï¼Œè£…ä¸Šå±å¹•ã€å¤–å£³ã€æ‰¬å£°å™¨ã€ç”µæ± ç­‰ç­‰éƒ¨ä»¶ï¼Œç„¶åæŠŠæ‰‹æœºæ•´ä¸ªçš„å–ç»™ä½ ã€‚ Linuxçš„å„ä¸ªå‘è¡Œç‰ˆä½¿ç”¨çš„æ˜¯åŒä¸€ä¸ªLinuxå†…æ ¸ï¼ˆå†…æ ¸ç‰ˆæœ¬å¯èƒ½æœ‰å·®å¼‚ï¼‰ï¼Œå› æ­¤åœ¨å†…æ ¸å±‚ä¸å­˜åœ¨ä»€ä¹ˆå…¼å®¹æ€§é—®é¢˜ï¼›æ¯ä¸ªå‘è¡Œç‰ˆæœ‰ä¸ä¸€æ ·çš„æ„Ÿè§‰ï¼Œåªæ˜¯åœ¨å‘è¡Œç‰ˆçš„æœ€å¤–å±‚ï¼ˆæ¯”å¦‚ç•Œé¢ã€åŒ…ç®¡ç†å™¨ï¼‰æ‰æœ‰æ‰€ä½“ç°ã€‚ uname -srmå‘½ä»¤å¯ä»¥æŸ¥çœ‹Linuxç³»ç»Ÿçš„å†…æ ¸ç‰ˆæœ¬å·ã€‚ Linuxçš„å‘è¡Œç‰ˆæœ¬æœ‰å¾ˆå¤šï¼Œå…¶å¤§ä½“å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š å•†ä¸šå…¬å¸ç»´æŠ¤çš„å•†ä¸šç‰ˆæœ¬ï¼Œä»¥è‘—åçš„Red Hatä¸ºä»£è¡¨ï¼› ç¤¾åŒºç»„ç»‡ç»´æŠ¤çš„å…è´¹ç‰ˆæœ¬ï¼Œä»¥Debianã€Ubuntuä¸ºä»£è¡¨ã€‚ æœ‰äº›åŒå­¦å¯èƒ½ä¼šå¼€å§‹ç–‘æƒ‘äº†ï¼Œä¸Šé¢ä¸æ˜¯è¯´Linuxæ˜¯å¼€æºçš„å—ï¼Ÿä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰å•†ä¸šç‰ˆï¼Ÿæ˜¯çš„ï¼ŒLinuxå†…æ ¸æ˜¯å¼€æºçš„ï¼Œä½†æ˜¯å¼€æºä¸ç­‰äºå…è´¹ï¼Œå•†ä¸šç‰ˆæ”¶è´¹çš„æ˜¯å®ƒçš„å•†ä¸šæœåŠ¡å’Œæ”¯æŒã€‚ æ¯”å¦‚Red Hatè™½ç„¶ä½¿ç”¨çš„éƒ½æ˜¯å¼€æºè½¯ä»¶ï¼Œä½†æ˜¯ä»˜å‡ºäº†å¾ˆå¤šäººå·¥å°†æˆåƒä¸Šä¸‡çš„å¼€æºè½¯ä»¶æ•´åˆæˆä¸€ä¸ªç³»ç»Ÿï¼Œå¹¶ä¸”ä¿è¯è½¯ä»¶é—´çš„å…¼å®¹æ€§ç¨³å®šæ€§ï¼Œæä¾›åç»­çš„æ”¯æŒã€ç»´æŠ¤ä»¥åŠå‡çº§æœåŠ¡ï¼Œå› æ­¤å®ƒæ˜¯æ”¶è´¹çš„ï¼›å¦‚æœä½ æ°ªé‡‘æ°ªäº†è¶³å¤Ÿå¤šï¼Œæ¯”å¦‚è´­ä¹°ä»–ä»¬çš„é«˜çº§æœåŠ¡ï¼Œä½ ç”šè‡³å¯ä»¥è®©Red Hatçš„å·¥ç¨‹å¸ˆç°åœºè¿‡æ¥ç»™ä½ è§£å†³é—®é¢˜ã€‚ å¾ˆå¤šåŒå­¦å¯èƒ½è¿˜æ˜¯è§‰å¾—å¼€æºæ”¶è´¹ä¸å¤ªèƒ½ç†è§£ï¼Œä½†å…¶å®å¦‚æœä½ å»å°è¯•ç¼–è¯‘å¤šä¸ªå¼€æºè½¯ä»¶ï¼Œæˆ–è€…åœ¨æ“ä½œç³»ç»Ÿæ—¶é‡åˆ°ä¸€äº›è«åå…¶å¦™çš„é”™è¯¯ï¼Œç„¶åä½ èŠ±è´¹å‡ å¤©æ‰¾égithubã€stackoverflowå’ŒGoogleä¹Ÿæ²¡æœ‰æ‰¾åˆ°é—®é¢˜è€Œè‹¦æ¼æ—¶ï¼Œä½ ä¼šè§‰å¾—å¦‚æœæœ‰äººèƒ½å¤Ÿå¸®ä½ è§£å†³é—®é¢˜æ˜¯ä¸€ä»¶éå¸¸é«˜å…´çš„äº‹ã€‚æ›´ä½•å†µä¼ä¸šé¡¹ç›®åœ¨è¿è¡Œæ—¶å¾€å¾€éƒ½ä¼šè¿½æ±‚å¿«é€Ÿä¸Šçº¿ï¼Œè®¡æ—¶æŒ‰ç…§å¤©ç”šè‡³å°æ—¶ï¼Œè¿™ä¸ªæ—¶å€™å¿«é€Ÿè§£å†³é—®é¢˜å°±æ˜¾å¾—éå¸¸çš„é‡è¦ï¼›è¿™ç‚¹è´¹ç”¨å¯¹äºä¼ä¸šæ¥è¯´æ˜¯éå¸¸åˆ’ç®—çš„ã€‚ è¿™ä»¶äº‹å‘Šè¯‰äº†æˆ‘ä»¬ï¼Œå¤©ä¸‹æ²¡æœ‰å…è´¹çš„åˆé¤ï¼Œå…è´¹å¾€å¾€æ˜¯æœ€è´µçš„ã€‚ ä¸‹é¢æˆ‘ä»¬ç®€å•ä»‹ç»å‡ ä¸ªå¸¸è§çš„Linuxå‘è¡Œç‰ˆæœ¬ã€‚ Red Hat Red Hatï¼ˆçº¢å¸½å…¬å¸ï¼‰åˆ›å»ºäº1993å¹´ï¼Œæ˜¯ä¸€å®¶å¼€æºè§£å†³æ–¹æ¡ˆä¾›åº”å•†ï¼Œéƒ¨ä½äºç¾å›½åŒ—å¡ç½—æ¥çº³å·çš„ç½—åˆ©å¸‚ã€‚ 1993å¹´ï¼ŒBob Young æˆç«‹äº†ACCå…¬å¸ï¼Œè¿™å®¶å…¬å¸ä¸»è¦æ˜¯åšé‚®è´­ä¸šåŠ¡ï¼Œä¸»è¥ä¸šåŠ¡æ˜¯å‡ºå”®Linuxå’ŒUnixçš„è½¯ä»¶é™„ä»¶ã€‚1994å¹´ï¼ŒMarc Ewingåˆ›å»ºäº†è‡ªå·±çš„Linuxå‘è¡Œç‰ˆï¼Œå¹¶å°†å…¶å‘½åä¸ºï¼šçº¢å¸½Linuxï¼ŒEwingåœ¨å°±è¯»å¡å†…åŸºÂ·æ¢…éš†å¤§å­¦æœŸé—´æ›¾ç»æˆ´ç€ä¸€é¡¶çº¢è‰²çš„åº·å¥ˆå°”å¤§å­¦é•¿æ›²æ£çƒå¸½å­ï¼Œè¿™æ˜¯ä»–çš„ç¥–çˆ¶èµ é€ç»™ä»–çš„ã€‚Youngåœ¨1995å¹´æ”¶è´­äº†Ewingçš„ä¼ä¸šï¼Œä¸¤è€…åˆå¹¶æˆä¸ºçº¢å¸½è½¯ä»¶å…¬å¸ï¼Œç”±Youngæ‹…ä»»é¦–å¸­æ‰§è¡Œå®˜ã€‚ Red Hatå…¬å¸çš„äº§å“ä¸»è¦åŒ…æ‹¬RHELï¼ˆRed Hat Enterprise Linuxï¼Œæ”¶è´¹ç‰ˆæœ¬ï¼‰å’Œ CentOSï¼ˆRHEL çš„ç¤¾åŒºå…‹éš†ç‰ˆæœ¬ï¼Œå…è´¹ç‰ˆæœ¬ï¼‰ã€Fedora Coreï¼ˆç”± Red Hat æ¡Œé¢ç‰ˆå‘å±•è€Œæ¥ï¼Œå…è´¹ç‰ˆæœ¬ï¼‰ã€‚ Fedora Fedora Linuxæ˜¯ç”±Fedoraé¡¹ç›®ç¤¾åŒºå¼€å‘ã€çº¢å¸½å…¬å¸èµåŠ©ï¼Œç›®æ ‡æ˜¯åˆ›å»ºä¸€å¥—æ–°é¢–ã€å¤šåŠŸèƒ½å¹¶ä¸”è‡ªç”±çš„æ“ä½œç³»ç»Ÿã€‚ Fedoraå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œæ˜¯ä¸€å¥—åŠŸèƒ½å®Œå¤‡ã€æ›´æ–°å¿«é€Ÿçš„å…è´¹æ“ä½œç³»ç»Ÿï¼›è€Œå¯¹èµåŠ©è€…Red Hatå…¬å¸è€Œè¨€ï¼Œå®ƒæ˜¯è®¸å¤šæ–°æŠ€æœ¯çš„æµ‹è¯•å¹³å°ï¼Œå› æ­¤å®ƒçš„ç¨³å®šæ€§ä¸å¦‚Centosã€‚ CentOS CentOSå¯ä»¥ç†è§£ä¸ºæ˜¯åŸºäºRed Hatå•†ä¸šç‰ˆç³»ç»Ÿçš„ç¤¾åŒºç¼–è¯‘é‡å‘å¸ƒç‰ˆï¼Œå®Œå…¨å¼€æºå…è´¹ï¼Œå› æ­¤ç›¸è¾ƒäºå…¶ä»–ä¸€äº›å…è´¹çš„Linuxå‘è¡Œç‰ˆä¼šæ›´åŠ ç¨³å®šï¼Œä¹Ÿå› æ­¤ä¸€èˆ¬ä¼ä¸šé‡Œå¸¸ç”¨ä½œæœåŠ¡å™¨æ“ä½œç³»ç»Ÿã€‚ Debian Debianæ˜¯ç›®å‰ä¸–ç•Œæœ€å¤§çš„éå•†ä¸šæ€§Linuxå‘è¡Œç‰ˆä¹‹ä¸€ï¼Œæ˜¯ç”±ä¸–ç•ŒèŒƒå›´1000å¤šåè®¡ç®—æœºä¸šä½™çˆ±å¥½è€…å’Œä¸“ä¸šäººå‘˜åœ¨ä¸šä½™æ—¶é—´åˆ¶åšã€‚ Ubuntu Ubuntuæ˜¯åŸºäºDebianå‘å±•è€Œæ¥ï¼Œç•Œé¢å‹å¥½ï¼Œå®¹æ˜“ä¸Šæ‰‹ï¼Œå¯¹ç¡¬ä»¶çš„æ”¯æŒéå¸¸å…¨é¢ï¼Œæ˜¯ç›®å‰æœ€é€‚åˆåšæ¡Œé¢ç³»ç»Ÿçš„Linuxå‘è¡Œç‰ˆï¼Œè€Œä¸”Ubuntuçš„æ‰€æœ‰å‘è¡Œç‰ˆéƒ½å…è´¹æä¾›ï¼Œä¹Ÿæ˜¯ç¬”è€…ä¸ªäººéå¸¸å–œæ¬¢çš„ä¸€ä¸ªLinuxå‘è¡Œç‰ˆã€‚ Ubuntuçš„åˆ›å§‹äººé©¬å…‹Â·æ²™ç‰¹å°”æ²ƒæ€(Mark Shuttleworth)æ˜¯ä¸€åæœ‰ä¼ å¥‡è‰²å½©çš„å—éäººï¼Œä»–åœ¨å¤§å­¦æ¯•ä¸šååˆ›å»ºäº†ä¸€å®¶å®‰å…¨å’¨è¯¢å…¬å¸ï¼Œåä»¥5.75äº¿ç¾å…ƒè¢«æ”¶è´­ï¼Œä¸€è·ƒæˆä¸ºå—éæœ¬åœ°çš„å¯Œç¿ã€‚2002å¹´é©¬å…‹è‡ªè´¹ä¹˜åç½—æ–¯è”ç›Ÿå·é£èˆ¹ï¼Œåœ¨å›½é™…ç©ºé—´ç«™ä¸­åº¦è¿‡äº†8å¤©çš„æ—¶å…‰ï¼Œä¹‹ååˆ›ç«‹äº†Ubuntuç¤¾åŒºã€‚ä»–è¯´å¤ªç©ºçš„æ‰€è§æ­£æ˜¯ä»–åˆ›ç«‹Ubuntuçš„ç²¾ç¥æ‰€åœ¨ã€‚Ubuntuè¿™ä¸ªè¯ä¹Ÿæ˜¯æ¥æºè‡ªéæ´²ä¸€ä¸ªéƒ¨è½ï¼Œæ„æ€æ˜¯â€äººæ€§â€â€æˆ‘çš„å­˜åœ¨æ˜¯å› ä¸ºå¤§å®¶çš„å­˜åœ¨â€ï¼Œæ˜¯éæ´²ä¼ ç»Ÿçš„ä¸€ç§ä»·å€¼è§‚ã€‚ ä½œä¸ºLinuxå‘è¡Œç‰ˆä¸­çš„åèµ·ä¹‹ç§€ï¼ŒUbuntuåœ¨çŸ­çŸ­å‡ å¹´æ—¶é—´é‡Œä¾¿è¿…é€Ÿæˆé•¿ä¸ºä»Linuxåˆå­¦è€…åˆ°å®éªŒå®¤ç”¨è®¡ç®—æœº/æœåŠ¡å™¨éƒ½é€‚åˆä½¿ç”¨çš„å‘è¡Œç‰ˆã€‚ å¦‚ä½•é€‰æ‹© Linuxç³»ç»Ÿçš„å‘è¡Œç‰ˆæœ‰å¾ˆå¤šï¼Œå°±ä¸é€ä¸€ä»‹ç»äº†ï¼Œåœ¨ã€ŠLinuxä»å…¥é—¨åˆ°ç²¾é€šã€‹ä¸€ä¹¦ä¸­æ•´ç†äº†ä¸åŒçš„å‘è¡Œç‰ˆï¼›æˆ‘ä»¬å¦‚ä½•æ¥é€‰æ‹©ä¸åŒç‰¹æ€§çš„ç‰ˆæœ¬å‘¢ï¼Ÿ å¦‚æœä½ éœ€è¦ä¸€ä¸ªæœåŠ¡å™¨ç³»ç»Ÿï¼Œæƒ³è¦ä¸€ä¸ªæ¯”è¾ƒç¨³å®šçš„æœåŠ¡å™¨ï¼Œå¯ä»¥é€‰æ‹©CentOSæˆ–è€…RHELã€‚ å¦‚æœä½ éœ€è¦æ¡Œé¢ç³»ç»Ÿï¼Œæ—¢ä¸æƒ³ç”¨ç›—ç‰ˆï¼Œä¹Ÿä¸æƒ³åœ¨ç³»ç»Ÿé…ç½®ä¸Šæµªè´¹å¤ªå¤šæ—¶é—´ï¼Œå¯ä»¥é€‰æ‹©Ubuntuã€‚ å¦‚æœä½ å–œæ¬¢æŠ˜è…¾æ–°åŠŸèƒ½ç‰¹æ€§å¯é€‰Fedoraã€‚ Linuxçš„ä¼˜åŠ¿ ç›¸ä¿¡è®¡ç®—æœºç§‘ç­å‡ºèº«çš„åŒå­¦åœ¨å¤§å­¦é‡Œéƒ½ä¼šæ¥è§¦ä¸€é—¨è¯¾ç¨‹ï¼šè®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼Œç¬”è€…åœ¨å¤§å­¦é‡Œï¼Œè¿™é—¨è¯¾è€å¸ˆè®©ç”¨è¿‡ä¸€æ®µçš„æ—¶é—´çš„Ubuntuå¼€å‘ï¼Œåšåšä½œä¸šï¼Œå½“æ—¶è§‰å¾—å‘½ä»¤è¡Œshellå°±åƒæ·±ä¸è§åº•çš„é»‘æ´ï¼Œå¤ªéº»çƒ¦äº†ï¼Œå®Œå…¨æ²¡æœ‰å›¾å½¢åŒ–ç•Œé¢æ¥çš„æ–¹ä¾¿å¿«æ·ï¼›ä½†æ˜¯å·¥ä½œäº†ä¸€æ®µæ—¶é—´ï¼Œæ¥è§¦äº†ä¸€ä¸‹Linuxç³»ç»Ÿï¼Œç†Ÿæ‚‰å‘½ä»¤è¡Œä¹‹åï¼Œå“ï¼ŒçœŸé¦™ï¼Œæ¯”Windowså¥½ç”¨å¤šäº†ã€‚ ç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œç¬”è€…ä¹Ÿç®—æ˜¯Linuxç³»ç»Ÿä¸­åº¦ç”¨æˆ·å§ï¼Œä¸ªäººæ¡Œé¢ç³»ç»Ÿä¸»åŠ›è™½ç„¶æ˜¯Windows 10ï¼Œä¸»è¦æ˜¯ç”±äºä¹‹å‰ç³»ç»Ÿå­˜äº†å¾ˆå¤šæ–‡ä»¶èµ„æ–™ç­‰ï¼›ç›®å‰è½¬å‘ä½¿ç”¨Ubuntu 22.04ç³»ç»Ÿï¼›è‡ªå·±å°†å®¶ç”¨é—²ç½®çš„ä¸€å°ç”µè„‘æ”¹é€ æˆä¸ºå®¶ç”¨nasç³»ç»Ÿï¼Œæ­è½½CentOS 7ï¼Œå› æ­¤æ”¹é€ çš„è¿‡ç¨‹ä¸­æ¥è§¦äº†ä¸å°‘Linuxç³»ç»Ÿçš„å‘½ä»¤ï¼Œäºæ˜¯å°±å¼€å§‹è‡ªå­¦å¹¶å–œæ¬¢ä¸Šã€‚ æˆ‘ç›¸ä¿¡å¾ˆå¤šç«¥é‹å¼€å§‹å­¦ä¹ å’Œä½¿ç”¨Linuxç³»ç»Ÿåº”è¯¥å’Œæˆ‘ä¸€æ ·ï¼Œä¸»è¦æ˜¯åœ¨å·¥ä½œä¸­å¼€å§‹çš„ï¼Œå› ä¸ºæ¯•ç«ŸLinuxç³»ç»Ÿä¸‹å¨±ä¹ã€æ¸¸æˆã€ç¤¾äº¤åŠŸèƒ½æœ‰é™ï¼Œå…¨é¢ä½¿ç”¨Linuxç³»ç»Ÿä¼šå¸¦æ¥ä¸€å®šçš„é™åˆ¶ï¼ˆä¸»è¦æ˜¯æ²¡æœ‰å¾®ä¿¡ï¼‰ï¼Œæˆ‘å¹³æ—¶ä¹Ÿæ˜¯å°†Linuxç³»ç»Ÿä½œä¸ºæ—¥å¸¸å·¥ä½œå’Œç¼–ç¨‹å¼€å‘çš„ä¸€ä¸ªè¡¥å……ã€‚ PSï¼šsteamå¹³å°ä¹Ÿæ”¯æŒUbuntuäº†ï¼ŒQQæ¨å‡ºäº†å…¨æ–°çš„Linux3.0ç‰ˆæœ¬ã€‚ ä¸‹é¢ç®€å•çš„ä»‹ç»å‡ ä¸ªè§‰å¾—ä½¿ç”¨Linuxç³»ç»Ÿçš„ä¸ªäººæ¨èçœ‹æ³•å§ï¼Œä»…ä¾›å‚è€ƒã€‚ ç•Œé¢ä¼˜é›…ç¾è§‚ å¸¸è¨€é“ï¼šå§‹äºé¢œå€¼ï¼Œé™·äºæ‰åï¼›çœ‹æƒ¯äº†Windowsä¸‹åƒç¯‡ä¸€å¾‹çš„å›¾æ ‡ï¼Œè¯´å®è¯ï¼Œä½¿ç”¨Ubuntu 22æœ‰ä¸€éƒ¨åˆ†åŸå› ç¡®å®æ˜¯è¢«å®ƒçš„ç•Œé¢æ‰€å¸å¼•çš„ã€‚ æ‰“å¼€Ubuntuç³»ç»Ÿï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œæ•´ä½“çš„é£æ ¼éå¸¸ç®€æ´ä¼˜é›…ã€‚ å¾ˆå¤šåˆšä»Windowsè½¬è¿‡æ¥çš„å°ä¼™ä¼´ï¼ˆåŒ…æ‹¬æˆ‘è‡ªå·±ï¼‰ï¼Œä¸€å¼€å§‹æ¥è§¦Ubuntuæ¡Œé¢ï¼Œä¼šå¸¸å¸¸æ„Ÿè§‰ä¸ä¹ æƒ¯ï¼Œç»å¸¸ä¼šç–‘æƒ‘ï¼š æ¡Œé¢çš„é‚£äº›æˆ‘çš„ç”µè„‘ã€å›æ”¶ç«™ç­‰å›¾æ ‡éƒ½å»å“ªäº†ï¼Ÿ åŒ…æ‹¬åœ¨å®‰è£…å®Œå¾ˆå¤šåº”ç”¨åï¼Œæˆ‘ä»¬å‘ç°è¿™äº›åº”ç”¨ä¹Ÿä¸ä¼šåœ¨æ¡Œé¢ç•™ä¸‹ä»»ä½•ç—•è¿¹ï¼Œæ²¡æœ‰Windowsè½¯ä»¶é‚£ç§å®‰è£…å®Œåï¼Œè¿˜è¦æ­»çš®èµ–è„¸çš„è¯·æ±‚ä½ åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ï¼Œè¿˜ç»™ä½ é»˜è®¤å‹¾é€‰ï¼›åªè¦ä¸€ä¸ç•™ç¥ï¼Œä½ çš„æ¡Œé¢è¯´ä¸å®šå°±å¤šäº†ä¸‰å››ä¸ªä¸å¸¸ç”¨çš„å›¾æ ‡ã€‚ å› æ­¤åœ¨Windowsç³»ç»Ÿï¼Œæˆ‘ä»¬ç”¨è¿‡ä¸€æ®µæ—¶é—´åä¼šæœ‰å„å¼å„æ ·ç¹æ‚çš„å›¾æ ‡å­˜åœ¨ï¼›ä½†æ˜¯Ubuntuå°±ä¸ä¼šæœ‰è¿™æ ·çš„çƒ¦æ¼ï¼Œç”¨äº†å‡ ä¸ªæœˆï¼Œæˆ‘çš„æ¡Œé¢ä¹Ÿä»…ä»…åªæœ‰åˆšå¼€å§‹çš„ä¸»ç›®å½•æ–‡ä»¶å¤¹å­˜åœ¨ï¼ŒåŠ ä¸ŠFoxit Readeråˆ›å»ºçš„ä¸€ä¸ªå›¾æ ‡ï¼Œä»…æ­¤è€Œå·²ã€‚ Ubuntuç•Œé¢çš„è®¾è®¡è€…è€ƒè™‘åˆ°ï¼Œå¤§éƒ¨åˆ†ç”¨æˆ·åœ¨å·¥ä½œæ—¶ï¼Œæ¡Œé¢ä¸Šçš„å›¾æ ‡å‡ ä¹éƒ½æ˜¯è¢«åº”ç”¨çª—å£é®ä½ï¼ŒæŠŠçª—å£ç§»å¼€æ¥æŸ¥æ‰¾æƒ³è¦çš„åº”ç”¨æ˜¯ä¸€ä»¶éå¸¸ç—›è‹¦çš„äº‹ï¼Œå› æ­¤åœç”¨äº†æ¡Œé¢å›¾æ ‡ï¼Œæ”¹ç”¨åœ¨åº”ç”¨ç¨‹åºä¸­æä¾›äº†å…¥å£ï¼›ç‚¹å‡»å³ä¸‹è§’çš„æŒ‰é’®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ç¨‹åºã€‚ å¯¹äºä¸€äº›å¸¸ç”¨çš„ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒå›ºå®šåˆ°ä¸‹æ–¹çš„ç¨‹åºåä¸­ï¼Œæ–¹ä¾¿éšæ—¶è®¿é—®ã€‚Ubuntuç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¹²å‡€çš„ç¯å¢ƒï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿæ›´ä¸“æ³¨äºå½“å‰çš„å·¥ä½œç¯å¢ƒï¼Œæ›´å°‘è¢«å…¶ä»–å¼¹æ¡†æ‰“æ‰°ï¼›å› æ­¤æ›´é€‚åˆç”¨æ¥å¹²æ´»ã€‚ å¼€æº å¼€æºå¸¦æ¥çš„ä¸€å¤§æ˜¾è€Œæ˜“è§çš„å¥½å¤„å°±æ˜¯ï¼Œä½ ä¸ç”¨æ¯æ¬¡å®‰è£…å®Œç³»ç»Ÿå»æ‰¾å„ç§Windowsæ¿€æ´»å·¥å…·äº†ï¼Œç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´éƒ½æœ‰è£…å®Œç³»ç»Ÿè¢«ä¸‹é¢å„ç§è½¯ä»¶æ”¯é…çš„ææƒ§ï¼Œä¸è£…çš„è¯ç³»ç»Ÿå„ç§æç¤ºï¼Œè£…äº†åˆæ€•æœ‰é£é™©ã€‚ å¼€æºæ„å‘³ç€ä½¿ç”¨è€…å¯ä»¥å…è´¹è‡ªç”±ä½¿ç”¨ã€æŸ¥çœ‹å’Œä¿®æ”¹ç³»ç»Ÿçš„æºä»£ç ï¼Œè¿™ç§å®Œå…¨å¼€æ”¾é€æ˜çš„æ¶æ„å¯¹äºæ”¿åºœæœºæ„æˆ–è€…ç‰¹æ®Šéœ€æ±‚çš„ç»„ç»‡ç­‰æ¥è¯´æ˜¯éå¸¸é‡è¦çš„ã€‚ åŒæ—¶ä½ ä¼šå‘ç°Linuxç³»ç»Ÿæœ‰å¹¿æ³›çš„ç¡¬ä»¶æ”¯æŒï¼Œç”šè‡³å¯ä»¥æ‹¿å‡ºä¸€å°ä¸Šä¸ªä¸–çºªè€æ—§çš„intelå¥”è…¾3å¤„ç†å™¨æ¥è¿è¡Œä¹Ÿèƒ½å¾ˆæµç•…ï¼›æ­£æ˜¯å¾—ç›Šäºå¼€æºçš„ç‰¹ç‚¹ï¼Œå¾ˆå¤šç¨‹åºå‘˜ä¸æ–­åœ°å‘Linuxç¤¾åŒºæä¾›ä»£ç ï¼Œä½¿å¾—Linuxæœ‰ç€ä¸°å¯Œçš„è®¾å¤‡é©±åŠ¨èµ„æºï¼Œå¯¹ä¸»æµç¡¬ä»¶æœ‰ç€å¾ˆå¥½çš„æ”¯æŒï¼Œå‡ ä¹èƒ½è¿è¡Œåœ¨æ‰€æœ‰ä¸»æµçš„å¤„ç†å™¨ä¸Šã€‚ åœ¨è¶…èµçš„Linuxè½¯ä»¶è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä½œè€…æ•´ç†äº†éå¸¸å¤šLinuxä¸­å¼€æºçš„è½¯ä»¶ï¼Œä¹Ÿéƒ½æ˜¯æ—¥å¸¸å¾ˆå®ç”¨çš„è½¯ä»¶ã€‚ ç³»ç»Ÿå®‰å…¨ç¨³å®š ç³»ç»Ÿå®‰å…¨ç¨³å®šä¹‹äºç”µè„‘ï¼Œå¦‚åŒæ³•å¾‹å¯¹äºäººä»¬ï¼Œæ˜¯æœ€åŸºæœ¬çš„è¦æ±‚å’Œå‡†åˆ™ã€‚å¤§å¤šæ•°å°ä¼™ä¼´åº”è¯¥ä¹Ÿæ˜¯ä»Windowså¼€å§‹æ¥è§¦è®¡ç®—æœºå’Œç½‘ç»œçš„ï¼Œå› æ­¤è§‰å¾—Windowsä¹Ÿèƒ½æ»¡è¶³æ—¥ä»çš„å·¥ä½œéœ€æ±‚ã€‚ä½†å®¢è§‚æ¥è¯´ï¼Œåœ¨å®‰å…¨æ€§ã€é«˜æ€§èƒ½æ–¹é¢ï¼ŒWindowsç›¸æ¯”Linuxä¾ç„¶æœ‰ä¸å°çš„å·®è·ã€‚ ä½¿ç”¨Windowsè¿‡ç¨‹ä¸­ç›¸ä¿¡å¤§å®¶åœ¨æ—¥å¸¸ä¸­ä¼šé‡åˆ°ä¸å°‘å¡é¡¿ã€è“å±çš„æƒ…å†µå‘ç”Ÿï¼›ç¬”è€…åœ¨ä¹‹å‰çš„å…¬å¸å°±é‡åˆ°ITè£…å®Œç³»ç»Ÿï¼Œä¸€æ®µæ—¶é—´ç»å¸¸è“å±æ­»æœºçš„æƒ…å†µå‘ç”Ÿï¼Œç„¶åæ•°æ¬¡é‡è£…ç³»ç»Ÿï¼Œè¿™åœ¨åŠå…¬æ—¶æ˜¯åŠå…¶ç—›è‹¦çš„ã€‚ ä½†æ˜¯Linuxç³»ç»Ÿæå°‘å‡ºç°å¡é¡¿æƒ…å†µï¼Œé™¤éä½ è¿è¡Œå¤šä¸ªå¤§å‹çš„è½¯ä»¶ã€‚åœ¨æˆ‘å®é™…çš„ä½“éªŒä¸­ï¼Œåœ¨åŒä¸€é…ç½®çš„ç”µè„‘ä¸­ï¼Œè¿è¡Œç›¸åŒå¤šè½¯ä»¶çš„æƒ…å†µä¸‹ï¼ŒLinuxç³»ç»Ÿçš„æµç•…åº¦æ˜¯æ˜æ˜¾ä¼˜äºWindowsç”µè„‘çš„ã€‚ åœ¨Windowsä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ç£ç›˜ç©ºé—´ä¸å¤Ÿçš„æƒ…å†µï¼Œå°¤å…¶æ˜¯Cç›˜ç©ºé—´ï¼Œå¾ˆå¤šè½¯ä»¶éƒ½ä¼šé»˜è®¤å®‰è£…åˆ°Cç›˜ï¼ˆæ¯”å¦‚Chromeï¼‰ï¼Œæˆ–è€…å°†ç¼“å­˜æ–‡ä»¶æ”¾åˆ°Cç›˜ï¼Œè¿‡ä¸€æ®µæ—¶é—´å°±éœ€è¦æ¸…ç†ï¼›ä½†åœ¨Linuxç³»ç»Ÿä¸­ä¸éœ€è¦ã€‚ é¦–å…ˆLinuxç³»ç»Ÿå®‰è£…å®Œæˆåï¼Œæœ¬èº«ä¸ä¼šå ç”¨å¤ªå¤šçš„ç£ç›˜ç©ºé—´ï¼Œå ç”¨è¾ƒå°‘çš„èµ„æºï¼›å…¶æ¬¡Linuxç³»ç»Ÿè‡ªèº«çš„æ ‘å½¢ç›®å½•ç»“æ„å·²ç»å°†æ¯ä¸ªæ–‡ä»¶çš„ä½ç½®è§„èŒƒäº†ï¼Œ/homeæ˜¯ç”¨æˆ·ç›®å½•ï¼Œ/usrè½¯ä»¶ç›®å½•ç­‰ç­‰è¿›è¡Œåˆ’åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¡¬ç›˜æ ¼å¼æˆä¸€ä¸ªåŒºï¼Œç„¶åç›´æ¥æŒ‚è½½æ ¹ç›®å½•ã€‚ æ­£æ˜¯ç”±äºLinuxç³»ç»Ÿçš„å®‰å…¨ç¨³å®šé«˜æ•ˆï¼Œå› æ­¤Linuxå¤©ç„¶é€‚åˆç”¨æ¥åšæœåŠ¡å™¨ï¼›æ— è®ºæ˜¯ä¼ä¸šçº§çš„å¤§å‹æœåŠ¡å™¨ï¼Œè¿˜æ˜¯æœ€è¿‘æµè¡Œçš„å®¶ç”¨nasç³»ç»Ÿï¼›æ— è®ºæ˜¯ä½ ç”¨çš„æ‰‹æœºæ“ä½œç³»ç»Ÿï¼Œè¿˜æ˜¯çœ‹å®¶ç”¨å¤§å±ç”µè§†æœºï¼Œäº¦æˆ–æ˜¯å°å·§çš„æœºé¡¶ç›’ï¼ŒLinuxç³»ç»Ÿå‡ºç°åœ¨ç”Ÿæ´»ä¸­çš„å„ä¸ªè§’è½ã€‚ æ€»ç»“ è¦æƒ³å­¦å¥½Linuxï¼Œä¸èƒ½åªè®°ä½å‡ ä¸ªå‘½ä»¤ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯ä¸ºè‡ªå·±æ­å»ºä¸€ä¸ªLinuxçš„ç¯å¢ƒï¼Œåœ¨çœŸå®çš„ç¯å¢ƒä¸‹è¿›è¡Œå­¦ä¹ ï¼›Ubuntuå°±æ˜¯ä¸€ä¸ªæ¯”è¾ƒé€‚åˆåˆå­¦è€…çš„å‘è¡Œç‰ˆï¼›å¦‚æœæ€•è£…ç³»ç»Ÿéº»çƒ¦ï¼Œæœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨Windows10ä¸‹å®‰è£…Ubuntuå­ç³»ç»Ÿä½“éªŒï¼Œå‚è€ƒå®‰è£…æ•™ç¨‹ï¼Œä¸è¿‡æœ‰ä¸€äº›å‘½ä»¤ä¼šè¢«é˜‰å‰²ã€‚ å¦‚æœæ‰‹å¤´æœ‰é—²ç½®ç§»åŠ¨ç¡¬ç›˜ï¼Œæƒ³è¦çœŸå®ä½“éªŒä¸€ä¸‹Ubuntuç³»ç»Ÿï¼ˆè™šæ‹Ÿæœºä½“éªŒä¸å¥½ï¼‰ï¼Œåˆä¸æƒ³èˆå¼ƒWindowsç³»ç»Ÿï¼Œå¯ä»¥å°†Ubuntuç¯å¢ƒå®‰è£…åˆ°ç§»åŠ¨ç¡¬ç›˜ï¼Œæ‰“é€ è‡ªå·±çš„ä¸ªäººç§»åŠ¨å·¥ä½œå¹³å°ï¼›è¿™æ ·ä½ ä¸ç®¡æ˜¯åœ¨åŠå…¬å®¤è¿˜æ˜¯å›å®¶å¹²æ´»ï¼Œåªéœ€è¦éšèº«æºå¸¦ä¸€å—å°å°çš„ç¡¬ç›˜å°±èƒ½è½»æ¾å°†å·¥ä½œç”¨åˆ°çš„æ‰€æœ‰èµ„æ–™æ‰“åŒ…å¸¦èµ°ï¼Œä¿æŒå·¥ä½œçš„è¿›åº¦å’Œç¯å¢ƒã€‚è¿™é‡Œæ¨èç¬”è€…è‡ªç”¨çš„å›½äº§çš„è‡´æ€1TB SSDå›ºæ€å’Œç»¿è”M2ç§»åŠ¨ç¡¬ç›˜ç›’ç»„åˆï¼Œæ–¹ä¾¿æ‰“é€ è‡ªå·±çš„Ubuntu To Goç¯å¢ƒã€‚ åˆšè£…å®Œç³»ç»Ÿï¼Œçœ‹ç€ç©ºè¡è¡çš„æ¡Œé¢ï¼Œä½ å¯èƒ½ä¼šä¸çŸ¥æ‰€æªï¼Œå¯èƒ½ä¼šè¿·èŒ«Ubuntuç³»ç»Ÿä¸‹å¯ä»¥åšä»€ä¹ˆï¼Ÿï¼›åŒå‡»å®‰è£…exeä¸å†å­˜åœ¨äº†ï¼Œè€Œæ˜¯é€šè¿‡å‘½ä»¤è¡Œæ¥å®‰è£…ï¼Œç”šè‡³è¿æ¥ç½‘ç»œä¹Ÿè¦æ•²å‘½ä»¤ï¼Œå½“ä½ ç†Ÿæ‚‰å‘½ä»¤è¡Œçš„ç¯å¢ƒåï¼Œä½ ä¼šå‘ç°è¿™æ˜¯ä¸€ç§é«˜æ•ˆçš„æ–¹å¼ï¼Œä¹Ÿæ˜¯å¦ä¸€ç§çš„ä½“éªŒã€‚å€Ÿç”¨ä¸€ä½çŸ¥ä¹å‰è¾ˆçš„è¯ï¼š Windowsä¸ºä¸çŸ¥é“è‡ªå·±æ­£åœ¨åšä»€ä¹ˆçš„äººè®¾è®¡ï¼ŒLinuxä¸ºçŸ¥é“è‡ªå·±è¦åšä»€ä¹ˆï¼Œæ­£åœ¨åšä»€ä¹ˆçš„äººè®¾è®¡ã€‚ åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥åšä»»ä½•äº‹ï¼Œä½ å¯ä»¥çƒ­è¡·äºæ›´æ¢å„ç§é…·ç‚«çš„æ¡Œé¢å’Œä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥äº«å—å­¦ä¹ å¸¦æ¥çš„æ— ç©·ä¹è¶£ï¼›å…ˆæ˜¯å‘½ä»¤ï¼Œå†æ˜¯shellè„šæœ¬ï¼Œæ­å»ºæœåŠ¡å™¨ï¼Œå­¦ä¹ æ•°æ®åº“ï¼Œéƒ¨ç½²è‡ªå·±çš„ç½‘ç«™ç­‰ç­‰ï¼›æˆ‘ç›¸ä¿¡ï¼Œä½ ä¹Ÿä¼šå–œæ¬¢ä¸Šè¿™ä¸ªç®€æ´è€Œä¼˜é›…çš„å¼€æºä¸–ç•Œã€‚","tags":[{"name":"äº’è”ç½‘ç§‘æŠ€","slug":"Internet","permalink":"https://xieyufei.com/tags/Internet/"},{"name":"Linux","slug":"Linux","permalink":"https://xieyufei.com/tags/Linux/"},{"name":"å¼€æº","slug":"OpenSource","permalink":"https://xieyufei.com/tags/OpenSource/"},{"name":"å†å²","slug":"History","permalink":"https://xieyufei.com/tags/History/"}]},{"title":"èŠä¸€ä¸‹æœ€è¿‘åšçš„å‰¯ä¸šé¡¹ç›®","date":"2022-11-15T04:00:00.000Z","path":"2022/11/15/FrontEnd-Sideline.html","text":"æœ€è¿‘æœ‰æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°åšå®¢äº†ï¼Œæ­£å¥½æœ€è¿‘å…¬å¸å’Œæ‰‹ä¸Šéƒ½æœ‰å¥½å‡ ä¸ªé¡¹ç›®ï¼Œå› æ­¤æ¯”è¾ƒå¿™ï¼Œéš¾å¾—æŠ½å‡ºç‚¹æ—¶é—´ï¼Œç®€å•çš„èŠä¸‹æœ€è¿‘åšçš„å‡ ä¸ªå‰¯ä¸šé¡¹ç›®çš„ä¸€ç‚¹ç‚¹æ„Ÿè§¦ã€‚ å°å°çš„æ„Ÿè§¦ å¾ˆå¤šäººå¯èƒ½ä¼šè§‰å¾—åšä¸ªå‰¯ä¸šå°±æ˜¯å°æ‰“å°é—¹ï¼Œæˆ–è€…ä¼šè€½è¯¯å·¥ä½œï¼Œæˆ–è€…å¹³æ—¶å·¥ä½œå¿™å¥½ä¸å®¹æ˜“æœ‰ä¸ªä¼‘æ¯çš„æ—¶é—´ï¼Œè¿˜è¦å¹²æ´»ï¼Œæ¯”è¾ƒç´¯ã€‚æˆ‘é—®äº†ä¸‹æˆ‘å‘¨å›´çš„æœ‹å‹ï¼Œæ€»ç»“äº†å¯èƒ½å°±æ˜¯ä¸‹é¢å‡ ä¸ªåŸå› è®©å¤§å®¶æœ›è€Œå´æ­¥ï¼š 1ã€æ²¡æœ‰åˆé€‚çš„æ¸ é“æ¥è§¦åˆ°å‰¯ä¸š2ã€éœ€è¦å„ç§å¯¹æ¥æˆ–è€…å¤„ç†äººé™…å…³ç³»ï¼Œä¸æ“…é•¿3ã€è€½è¯¯å·¥ä½œï¼Œæ²¡æœ‰æ—¶é—´4ã€æŠ€æœ¯ä¸åŒ¹é… é¦–å…ˆè¯´è¯´å‰¯ä¸šçš„å¯èƒ½æ€§ï¼Œç»è¥å‰¯ä¸šå’Œä½ ä¸Šç­æ‰“å·¥ä¼šæ˜¯ä¸¤ç§å®Œå…¨ä¸åŒçš„æ€è€ƒæ–¹å¼ã€‚å¼•å…¥å‰¯ä¸šåï¼Œæœ€ç›´è§‚çš„å°±æ˜¯æ˜æ˜¾å¯¹ä¸ªäººçš„è´¢åŠ¡çŠ¶å†µå¸¦äº†å¾ˆå¤§çš„æå‡ï¼Œé™ä½äº†ç”Ÿæ´»ä¸­çš„æˆ¿è´·è½¦è´·çš„é£é™©ï¼Œæé«˜äº†ç”Ÿæ´»çš„è´¨é‡ï¼›ä¸€æ–¹é¢æ‹“å±•å®¢æˆ·ï¼Œé”»ç‚¼äº†è‡ªå·±çš„èƒ½åŠ›å’ŒæŠ€æœ¯ï¼Œå¦ä¸€æ–¹é¢å¯ä»¥äº†è§£å¸‚åœºéœ€è¦çš„æŠ€æœ¯è¦æ±‚ï¼Œä»å®¢æˆ·çš„æ¡ˆä¾‹ä¸­æå–é‡å¤çš„éœ€æ±‚ï¼Œå°†å…¶æ¨¡å—åŒ–ã€äº§å“åŒ–ï¼Œä»è€Œæé«˜è‡ªå·±çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚ ç„¶åè¯´è¯´å‰¯ä¸šçš„æ¸ é“ï¼Œç¡®å®ï¼Œä½œä¸ºä¸€åç¨‹åºçŒ¿ï¼Œèº«è¾¹è®¤è¯†çš„äººæœ‰é™ï¼Œç¤¾äº¤ç½‘ç»œæ— å¤–ä¹äº²æˆšã€æœ‹å‹ã€åŒå­¦ã€åŒäº‹ï¼Œæˆ–è€…å¤–åŠ ä¸Šå¯¹è±¡çš„äº²æˆšã€æœ‹å‹ã€åŒå­¦ã€åŒäº‹ã€‚å› æ­¤èƒ½å¤Ÿé¢å¤–çš„æ‹“å±•ä¸€äº›å…³ç³»äººè„‰ï¼Œå¯¹æˆ‘ä»¬æ˜¯æœ‰å¾ˆå¤§çš„å¸®åŠ©çš„ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæœ‰å¾ˆå¤šçš„æŠ€æœ¯ç¾¤ï¼Œå¯ä»¥åœ¨æŠ€æœ¯ç¾¤é‡Œé¢å’¨è¯¢ä¸€äº›å¤§ä½¬ï¼Œæˆ–è€…åŠ ä¸€äº›å¿—åŒé“åˆçš„æœ‹å‹ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰å¯ä»¥ä¸€èµ·åˆä½œçš„é¡¹ç›®ç­‰ã€‚ è¿™é‡Œæ¨èå¤§å®¶å¯ä»¥é˜…è¯»å‡ æœ¬éå¸¸ä¸é”™çš„ä¹¦ï¼Œå¸®åŠ©å¤§å®¶æé«˜æ²Ÿé€šçš„æŠ€å·§ï¼Œã€Šæ²Ÿé€šçš„è‰ºæœ¯ã€‹å’Œã€Šå…³é”®å¯¹è¯ã€‹ã€‚ å…¶æ¬¡æ˜¯å¯¹æ¥ä¸­çš„æ”¶æ¬¾æ–¹æ¡ˆï¼Œä¸€èˆ¬ç¬”è€…æ¥è§¦åˆ°çš„é¡¹ç›®éƒ½æ˜¯æŒ‰ç…§é¡¹ç›®çš„ç»“ç®—çš„ï¼Œå› æ­¤å¯ä»¥è®¾å®šæŒ‰ç…§é¡¹ç›®çš„å®Œæˆæ—¶é—´èŠ‚ç‚¹æ”¶å–è´¹ç”¨ã€‚ ä¸€èˆ¬ç¬¬ä¸€æ¬¡åˆä½œçš„é¡¹ç›®ï¼Œç¬”è€…ä¼šé¢„æ”¶10%ï½20%çš„è´¹ç”¨ä½œä¸ºé¡¹ç›®è®¢é‡‘ï¼Œé¡¹ç›®å®Œæˆåï¼Œå¯ä»¥ç»™ç”¨æˆ·éƒ¨ç½²åˆ°æˆ‘ä»¬çš„æµ‹è¯•æœåŠ¡å™¨è¿›è¡Œé¡¹ç›®çš„æ¼”ç¤ºï¼Œè¿™æ—¶å€™å¯ä»¥æ”¶å–åˆ°æ€»è´¹ç”¨çš„80%-90%ï¼Œæœ€åå®¢æˆ·æå‡ºä¿®æ”¹è¦æ±‚åå¯ä»¥æ”¶å–æœ€åçš„å°¾æ¬¾ã€‚è¿™æ ·æ—¢å¸®åŠ©æˆ‘ä»¬è§„é¿äº†æ¬¾é¡¹æ”¶ä¸å›æ¥çš„é£é™©ï¼Œåˆèµ¢å¾—å®¢æˆ·çš„ä¿¡ä»»ã€‚ ä¸€èˆ¬å‰æœŸå°†ä»·æ ¼è°ˆå¦¥åï¼Œå¯ä»¥å°†è¿™å¥—ä»˜æ¬¾æ–¹æ¡ˆå’Œå®¢æˆ·æ²Ÿé€šåå•†ï¼ŒåŸºæœ¬éƒ½ä¼šè®¤å¯çš„ã€‚åæœŸåˆä½œæ¬¡æ•°å¢åŠ ï¼Œæœ‰ä¸€å®šä¿¡ä»»åŸºç¡€åï¼Œå¯ä»¥é€‚å½“çš„æ”¾å®½æ–¹æ¡ˆã€‚ æ˜¯çš„ï¼Œå¦‚æœæ‰‹å¤´æœ‰ä¸€å°å…¬ç½‘IPçš„æœåŠ¡å™¨ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬åšå¾ˆå¤šçš„äº‹æƒ…ã€‚æ‰‹å¤´å®½è£•ä¸€äº›çš„åŒå­¦ï¼Œå¯ä»¥ç›´æ¥ä¸Šé˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œæ–°ç”¨æˆ·è½»é‡çº§æœåŠ¡å™¨50å…ƒ/å¹´ï¼›æƒ³è¦ç™½å«–çš„å¯ä»¥ä½¿ç”¨å…è´¹çš„NATAPPè¿›è¡Œå†…ç½‘ç©¿é€ï¼Œå…è´¹éš§é“1Mçš„å°æ°´ç®¡å‹‰å¼ºå‡‘åˆï¼›åŠ¨æ‰‹èƒ½åŠ›å¼ºçš„çš„ç«¥é‹å¯ä»¥è‡ªå·±è·Ÿç”µä¿¡è¿è¥å•†ç”³è¯·å…¬ç½‘IPï¼Œå®¶é‡Œéƒ¨ç½²ä¸€å°æœåŠ¡å™¨ï¼Œä¸è¿‡éœ€è¦ä¸€å®šçš„Linuxè¿ç»´èƒ½åŠ›ã€‚ é¡¹ç›®å…ä¸äº†ä¼šæœ‰æ”¹åŠ¨ï¼Œå‰æœŸå†æ€ä¹ˆå®¹æ˜“ï¼Œå®¢æˆ·å½¢å®¹å¾—å¤šä¹ˆç®€å•çš„é¡¹ç›®ï¼Œåé¢å°±è¶Šæ˜¯ä¼šæœ‰æ”¹åŠ¨ï¼›å¦‚æœå®¢æˆ·æœ‰å¥½è¯´è¯ä¸€ç‚¹ï¼Œåå•†ä¸€ä¸‹å°±èƒ½åŠ ç‚¹é’±ã€‚ å¦‚æœåå•†ä¸å¥½å°±å®¹æ˜“è°ˆå´©ï¼Œè€Œä¸”å¤§éƒ¨åˆ†å®¢æˆ·å¯¹è‡ªå·±çš„é¡¹ç›®éœ€æ±‚å…¶å®éƒ½åªæ˜¯ä¸€ä¸ªå¤§æ¦‚çš„æè¿°ï¼Œå¾ˆå¤šéƒ½æ˜¯æè¿°ä¸€ä¸ªç®€å•çš„ç›®æ ‡ï¼Œä½†å…¶ä¸­éœ€è¦ä½ å¯¹å†…éƒ¨çš„æŠ€æœ¯ç»†èŠ‚å’Œå„ç§å¯èƒ½çš„å‘éƒ½èƒ½äº†å¦‚æŒ‡æŒã€‚å› æ­¤è¿™ä¸ªæ—¶å€™å°±éœ€è¦æˆ‘ä»¬æ—¢èƒ½åšç¨‹åºå‘˜åˆèƒ½åšäº§å“ç»ç†äº†ï¼Œå‰æœŸæ ¹æ®å®¢æˆ·çš„éœ€æ±‚åˆ¶å®šä¸€ä¸ªè¯¦ç»†çš„äº§å“è§„åˆ’ï¼Œæœ‰å“ªäº›é¡µé¢ï¼Œæ¯ä¸ªé¡µé¢éœ€è¦ä»€ä¹ˆåŠŸèƒ½ï¼›è¿™æ ·åšçš„ç›®çš„æ—¢æ˜¯å¸®åŠ©å®¢æˆ·å°†éœ€æ±‚å…·ä½“åŒ–ï¼Œæ˜ç¡®ä¸‹æ¥ï¼Œå°¤å…¶æ˜¯é¿å…åç»­çš„çº çº·ï¼›åˆèƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬è¯„ä¼°é¡¹ç›®ï¼Œä¸‹é¢ç»™é¡¹ç›®è¿›è¡ŒæŠ¥ä»·ã€‚ æœ€åæˆ‘æƒ³èŠä¸€ä¸‹å¦‚ä½•ç»™é¡¹ç›®æŠ¥ä»·ï¼Œç›¸ä¿¡è¿™ä¹Ÿæ˜¯è®©å¾ˆå¤šæ–°æ‰‹åŒå­¦ååˆ†å¤´ç–¼çš„é—®é¢˜ï¼Œå¸¸å¸¸ä¸çŸ¥é“å¦‚ä½•å®šä»·ï¼›æŠ¥é«˜äº†æ€•å“è·‘å®¢æˆ·ï¼Œä¹Ÿæ²¡æœ‰åº•æ°”ï¼›æŠ¥ä½äº†å§åˆæ€•è‡ªå·±åƒäºï¼Œä¸åˆ’ç®—ï¼›å› æ­¤å¦‚ä½•æ¥æŠ¥ä»·å°±æ˜¯ä¸€é—¨å¹³è¡¡çš„è‰ºæœ¯ï¼Œéœ€è¦ç»è¿‡å¤šæ¬¡å®è·µä¹‹åæ‰èƒ½å¯¹è¿™é—¨æŠ€è‰ºç†Ÿç»ƒæŒæ¡ã€‚ æˆ‘ä»¬æ ¹æ®é¡¹ç›®çš„å·¥ä½œç¹æ‚ç¨‹åº¦è¿›è¡Œä¸€ä¸ªç®€å•çš„åˆ’åˆ†ï¼Œå½“ç„¶æ¯ä¸ªäººå¯èƒ½ä¼šæœ‰ä¸åŒçš„é€‚ç”¨èŒƒå›´ï¼ˆå¤§ç¥å¯ä»¥å¿½ç•¥ï¼‰ï¼š ç®€å•çš„é¡¹ç›®ï¼šä½äº6K ä¸­ç­‰å¤æ‚çš„é¡¹ç›®ï¼š6K~1.2W å¤æ‚çš„é¡¹ç›®ï¼šå¤§äº1.2W å†ç¹æ‚çš„é¡¹ç›®ï¼Œå¤§äº2Wã€3Wçš„ï¼Œé™¤éäººå®¶å¯¹ä½ æœ‰å¾ˆæ·±åšçš„åˆä½œåŸºç¡€å’Œä¿¡ä»»äº†è§£ï¼Œä¸ç„¶ä¸€èˆ¬ä¸ä¼šåå‘æ‰¾ä¸ªäººå¼€å‘è€…äº†ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„å…¬å¼è¿›è¡Œç²—ç•¥ä¼°ç®—ï¼š é¢„ä¼°å·¥æ—¶(å¤©) * è‡ªå·±æ¯å¤©çš„å·¥èµ„ + é¢„ç•™ä¿®æ”¹è´¹ç”¨ ä¸€ä¸ªé¡¹ç›®çš„å¼€å‘å¾€å¾€ä¸æ˜¯ä¸€ä¸ªäººå¯ä»¥ç‹¬ç«‹å®Œæˆçš„ï¼Œæ¶‰åŠåˆ°UIã€åå°ç­‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è®©åˆä½œçš„å°ä¼™ä¼´æŠ¥ä»·åç®—ä¸Šè¿™äº›è´¹ç”¨ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›é¢å¤–éšå½¢çš„è´¹ç”¨æˆ‘ä»¬åœ¨å……åˆ†è°ƒç ”åï¼Œéœ€è¦å’Œå®¢æˆ·åœ¨æŠ¥ä»·ä¸­è¿›è¡Œè¯¦ç»†çš„è¯´æ˜ï¼Œè®©å®¢æˆ·äº†è§£ï¼›æ¯”å¦‚å®¢æˆ·éœ€è¦æˆ‘ä»¬éƒ¨ç½²ç½‘ç«™å’ŒåŸŸåï¼Œé‚£æ¯å¹´çš„æœåŠ¡å™¨è´¹ç”¨å°±éœ€è¦é¢å¤–åˆ—å‡ºã€‚ å†æˆ–è€…åœ¨å®¢æˆ·çš„éœ€æ±‚ä¸­ï¼Œæœ‰è¯­éŸ³ä¼šè®®æˆ–è€…å‘é€çŸ­ä¿¡éªŒè¯ç ç­‰åŠŸèƒ½ï¼Œè¿™ä¸ªæˆ‘ä»¬è‡ªå·±è‚¯å®šæ˜¯ä¸èƒ½å¼€å‘çš„ï¼Œä¹Ÿéœ€è¦æ‰¾é¢å¤–çš„ä¼ä¸šè§£å†³æ–¹æ¡ˆï¼›å¥½åœ¨å¾ˆå¤šçš„å¹³å°ï¼Œé˜¿é‡Œäº‘è…¾è®¯äº‘åä¸ºäº‘ç­‰ï¼Œéƒ½ä¼šæœ‰ç›¸åº”çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å»è¿™äº›å¹³å°è°ƒç ”ï¼Œæ ¹æ®æ–‡æ¡£APIæ¥æ‰¾åˆ°é€‚åˆè‡ªå·±çš„æ–¹æ¡ˆã€‚ ä¸‹é¢å°±è°ˆè°ˆæˆ‘æ¥è§¦çš„å‡ ä¸ªé¡¹ç›®ã€‚ Chromeæ’ä»¶ Chromeæ’ä»¶çš„é¡¹ç›®ä¹Ÿæ˜¯ç¬”è€…ç¬¬ä¸€æ¬¡æ¥è§¦çš„è¿™æ ·çš„éœ€æ±‚ï¼Œå¼€å‘ç½‘ç«™å¼€å‘APPéƒ½æ™®éï¼Œå¼€å‘æ’ä»¶ç¡®å®ä¸å¤ªå¸¸è§ï¼Œè¿™æ ·çš„éœ€æ±‚ä¹Ÿæ˜¯å°‘ä¹‹åˆå°‘ã€‚å®¢æˆ·çš„éœ€æ±‚æè¿°ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•ï¼ŒæŠ“å–æŸç½‘ç«™çš„æ•°æ®ï¼Œé€šè¿‡æ’ä»¶ä¸Šä¼ åå…³é—­ç½‘ç«™ã€‚ å½“æ—¶æœ€æœ€ä¸»è¦çš„éš¾ç‚¹å°±åœ¨äºå¦‚ä½•é€šè¿‡æ’ä»¶æ¥å…³é—­tabé¡µï¼Œé¦–å…ˆç¬¬ä¸€ååº”è‚¯å®šæ˜¯é€šè¿‡window.close()æ–¹æ³•æ¥å…³é—­ï¼Œä½†æ˜¯æµ‹è¯•åå¤±æ•ˆäº†ï¼Œæ ¹æœ¬æ²¡æœ‰ååº”ï¼Œæ§åˆ¶å°è¿˜ç»™å‡ºä»¥ä¸‹è­¦å‘Šï¼š Scripts may close only the windows that were opened by them. ç½‘ä¸Šæ‰¾äº†ç›¸å…³èµ„æ–™åï¼Œæµè§ˆå™¨æœ‰ç›¸å…³è§„å®šï¼šåªæœ‰é€šè¿‡window.open(url)æ‰“å¼€çš„çª—å£ï¼Œæ‰èƒ½å¤Ÿç”±window.close()å…³é—­ï¼Œä¸ºçš„æ˜¯é˜»æ­¢æ¶æ„çš„è„šæœ¬ç»ˆæ­¢ç”¨æˆ·çš„æµè§ˆå™¨ã€‚ åˆæŸ¥äº†èµ„æ–™ï¼Œå¯ä»¥å…ˆå»ä¸€ä¸ªç©ºç™½çš„é¡µé¢ï¼š 12window.location.href = &#x27;about:blank&#x27;window.close() è¿™æ ·é¡µé¢ç¡®å®æ˜¯æ²¡æœ‰äº†ï¼Œä½†æ˜¯è·³è½¬åˆ°äº†ä¸€ä¸ªç©ºç™½çš„é¡µé¢ï¼Œå¥½åƒå’Œå®¢æˆ·çš„éœ€æ±‚ä¸å¤ªç¬¦åˆå•Šã€‚äºæ˜¯æˆ‘å°±æ”¾å¼ƒäº†window.closeè¿™æ¡è·¯ï¼Œè½¬è€ŒæŸ¥æ‰¾Chromeæ’ä»¶çš„APIã€‚ ç»ˆäºï¼Œåœ¨æ–‡æ¡£ä¸­æ‰¾åˆ°äº†chrome.tabs.removeï¼Œå¯ä»¥ç§»é™¤tabæ ‡ç­¾é¡µï¼Œä½¿ç”¨chrome.tabs.queryæŸ¥æ‰¾æ‰€æœ‰çš„æ ‡ç­¾é¡µï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯é€‰ä¸­æ¿€æ´»çš„æ ‡ç­¾é¡µï¼š 123456// background.jschrome.tabs.query(&#123;&#125;, function (tabs) &#123; if(tabs.length)&#123; chrome.tabs.remove(tabs[0].id); &#125;&#125;); åœ¨å¼€å‘ä¸­è¿˜æœ‰æ¯”è¾ƒå‘çš„å°±æ˜¯è°·æ­Œå‡çº§äº†æ’ä»¶çš„ç‰ˆæœ¬ï¼ŒV2ç‰ˆæœ¬çš„æ’ä»¶ä¸å†æ”¯æŒï¼Œå»ºè®®å‡çº§åˆ°V3ç‰ˆæœ¬ï¼š åœ¨V2ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨backgroundå‚æ•°é…ç½®background.jsåœ¨åå°è¿è¡Œï¼Œå¹¶ä¸”è®¾ç½®persistentæ¥è®©è„šæœ¬ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œä½†æ˜¯è¿™æ ·ä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼›æ‰€ä»¥åœ¨V3ä¸­ï¼Œæ”¹ç”¨service_workeræ¥æ™ºèƒ½åŒ–å¯åŠ¨è„šæœ¬ã€‚ V3ä¸­ä¸èƒ½ä½¿ç”¨å…³é”®å­—persistentã€‚ ç”±äºbackgroundçš„è¿™äº›æ”¹åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬çš„background.jsè„šæœ¬å˜å¾—ä¸å¯é äº†ï¼Œå¯¹äºä¸€äº›å®šåˆ¶ä»»åŠ¡ï¼Œåªèƒ½ä½¿ç”¨alarmsæ¥å®ç°ã€‚ å°ç¨‹åº å°ç¨‹åºæ˜¯å½“å‰è¢«å¤§å®¶å¹¿æ³›æ¥å—å’Œéœ€è¦çš„ï¼Œå› æ­¤åœ¨åšå‰¯ä¸šé¡¹ç›®æ—¶ä¹Ÿæ˜¯æ¥è§¦æ¯”è¾ƒå¤šçš„ã€‚ä¸ªäººæ„Ÿè§‰å°ç¨‹åºå…¶å®æŠ€æœ¯ä¸Šæ²¡æœ‰ä»€ä¹ˆå¤æ‚çš„ï¼Œæ£˜æ‰‹çš„å°±æ˜¯éœ€è¦æŸ¥æ‰¾å„ç§æ–‡æ¡£ä»¥åŠå°ç¨‹åºå…¼å®¹æ€§é—®é¢˜ã€‚ å°ç¨‹åºä¸€èˆ¬éƒ½éœ€è¦ç”¨æˆ·ç™»å½•å’Œæˆæƒï¼Œç™»å½•å’Œæˆæƒå…¶å®æ˜¯ä¸¤ä¸ªä¸åŒçš„æµç¨‹ã€‚æ•´ä¸ªæŠ€æœ¯éš¾ç‚¹åœ¨äºæ•´ä¸ªæµç¨‹æ­¥éª¤æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬é¦–å…ˆè·Ÿéšå®˜æ–¹ç»™å‡ºçš„æµç¨‹å›¾ï¼Œç®€å•çœ‹ä¸‹æ­¥éª¤ï¼ˆæµç¨‹å›¾ä¼šåœ¨ä¸‹é¢åå¤è¢«ç”¨åˆ°ï¼Œå¤§å®¶å¯ä»¥åœ¨å¿ƒé‡Œé»˜è®°ä¸‹æ¥ï¼‰ï¼š è¯´åˆ°å°ç¨‹åºçš„ç™»å½•ï¼Œç»•ä¸å¼€çš„å°±æ˜¯openidå’Œunionidï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«ä¹Ÿæ˜¯é¢è¯•æ—¶å–œæ¬¢é—®çš„ï¼Œç®€å•æ¥å½¢å®¹ä¸€ä¸‹å°±æ˜¯ï¼Œunionidç›¸å½“äºä½ çš„èº«ä»½è¯ï¼Œåœ¨ä¸åŒåœ°æ–¹éƒ½æ˜¯å”¯ä¸€çš„ï¼Œè€Œopenidç›¸å½“äºä½ åœ¨å…¬å¸å’Œå°åŒºçš„å”¯ä¸€é€šè¡Œè¯ï¼Œå‡­å€Ÿè¿™ä¸ªæ‰èƒ½è¿›å‡ºã€‚ openid é¦–å…ˆæ¥çœ‹ä¸‹openidï¼Œå®ƒæ˜¯å¾®ä¿¡æä¾›ç»™å¼€å‘è€…çš„ç”¨æˆ·å”¯ä¸€æ ‡è¯†ï¼Œè™½ç„¶ç§°ä¸ºå”¯ä¸€ï¼Œä½†å®ƒåœ¨ä¸åŒåº”ç”¨ä¸‹æ˜¯ä¸ä¸€æ ·çš„ã€‚ åŒä¸€ä¸ªç”¨æˆ·åœ¨ä¸åŒçš„å…¬ä¼—å·æˆ–å°ç¨‹åºä¸‹çš„openidæ˜¯ä¸åŒçš„ã€‚ æ¯”å¦‚æˆ‘åœ¨åŒä¸€ä¸ªå…¬ä¼—å¹³å°çš„è´¦å·ä¸‹é¢æ—¢å¼€å‘äº†ä¸€ä¸ªå…¬ä¼—å·ï¼Œåˆç»´æŠ¤äº†ä¸€ä¸ªå°ç¨‹åºï¼Œä»Šå¤©æœ‰ä¸€ä¸ªäººåˆ†åˆ«æ‰“å¼€äº†è¿™ä¸¤ä¸ªåº”ç”¨ï¼Œä½†æ˜¯æˆ‘åœ¨ä¸¤ä¸ªåº”ç”¨çš„åç«¯è·å–åˆ°è¿™ä¸ªäººå¯¹åº”çš„openidæ˜¯ä¸¤ä¸ªä¸åŒçš„å€¼ã€‚ é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•æ¥è·å–openidå‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜çš„å›ç­”å°±éœ€è¦ç”¨åˆ°ä¸Šé¢çš„ç™»å½•æˆæƒæµç¨‹å›¾äº†ï¼Œæ•´ä¸ªæµç¨‹å›¾å…¶å®å°±æ˜¯è·å–openidçš„è¿‡ç¨‹ï¼Œæ²¡æœ‰è®°ä¸‹æ¥çš„å°ä¼™ä¼´å¯ä»¥å†å›å»çœ‹ä¸‹ã€‚ æˆ‘ä»¬ç»“åˆåå°æ¥å£æ¥çœ‹ä¸‹æ•´ä¸ªè¿‡ç¨‹ï¼Œé¦–å…ˆåœ¨å°ç¨‹åºä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨wx.loginè·å–åˆ°ä¸€ä¸ªä¸´æ—¶çš„codeï¼Œè¿™ä¸ªæ­¥éª¤ä¸€èˆ¬æ”¾åˆ°app.jsçš„onLaunchä¸­ï¼Œåˆ¤æ–­æ²¡æœ‰tokençš„æƒ…å†µä¸‹å»è¿›è¡Œç™»å½•æ“ä½œï¼š 1234567891011121314onLaunch() &#123; const _this = this; const &#123; hasLogin &#125; = this.globalData; if (!hasLogin) &#123; wx.login(&#123; success(res) &#123; const &#123; errMsg, code &#125; = res; if (errMsg === &quot;login:ok&quot;) &#123; // code todo &#125; &#125;, &#125;); &#125;&#125; ä¸´æ—¶ç™»å½•å‡­è¯codeåªèƒ½ä½¿ç”¨ä¸€æ¬¡ æ‹¿åˆ°è¿™ä¸ªä¸´æ—¶codeåï¼Œæˆ‘ä»¬å°±è¦å‘é€ç»™åç«¯ï¼Œè®©åç«¯å»è°ƒç”¨å¾®ä¿¡çš„æ¥å£äº†ï¼š 12345if (errMsg === &quot;login:ok&quot;) &#123; fetchUserLogin(&#123; code &#125;).then((res) =&gt; &#123; // todo å¤„ç†æ¥å£è¿”å›çš„tokenæ•°æ® &#125;);&#125; åç«¯æ‹¿åˆ°codeåï¼Œæ¥åˆ°äº†ç¬¬äºŒæ­¥ï¼Œéœ€è¦æ‰¾å¾®ä¿¡æœåŠ¡å™¨æ¢å–openidï¼Œæˆ‘ä»¬çœ‹ä¸‹nodeçš„ç®€å•å®ç°ï¼š 1234567891011121314const APP_ID = &quot;APP_ID&quot;const APP_SCRET = &quot;APP_SCRET&quot;const &#123; code &#125; = req.body;const resp = await axios.get( `https://api.weixin.qq.com/sns/jscode2session`, &#123; params: &#123; appid: APP_ID, secret: APP_SCRET, js_code: code, grant_type: &quot;authorization_code&quot;, &#125;,&#125;);const &#123; session_key, openid &#125; = resp.data; åç«¯æ‹¿åˆ°openidï¼Œå­˜å…¥æ•°æ®åº“ï¼Œå”¯ä¸€ç»‘å®šç”¨æˆ·ï¼Œç„¶åè¿”å›ä¸€ä¸ªtokenç»™å°ç¨‹åºï¼Œå°ç¨‹åºæ‹¿åˆ°tokenåå­˜å…¥storageï¼Œå‘èµ·ä¸šåŠ¡åœ¨è¯·æ±‚å¤´æºå¸¦å°±å¯ä»¥äº†ã€‚ unionid è¯´å®Œäº†openidï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹unionidï¼Œæˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£å¯¹unionidæœºåˆ¶çš„æè¿°ï¼š å¦‚æœå¼€å‘è€…æ‹¥æœ‰å¤šä¸ªç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨ã€å’Œå…¬ä¼—å¸å·ï¼ˆåŒ…æ‹¬å°ç¨‹åºï¼‰ï¼Œå¯é€šè¿‡ UnionID æ¥åŒºåˆ†ç”¨æˆ·çš„å”¯ä¸€æ€§ï¼Œå› ä¸ºåªè¦æ˜¯åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ä¸‹çš„ç§»åŠ¨åº”ç”¨ã€ç½‘ç«™åº”ç”¨å’Œå…¬ä¼—å¸å·ï¼ˆåŒ…æ‹¬å°ç¨‹åºï¼‰ï¼Œç”¨æˆ·çš„ UnionID æ˜¯å”¯ä¸€çš„ã€‚æ¢å¥è¯è¯´ï¼ŒåŒä¸€ç”¨æˆ·ï¼Œå¯¹åŒä¸€ä¸ªå¾®ä¿¡å¼€æ”¾å¹³å°ä¸‹çš„ä¸åŒåº”ç”¨ï¼ŒUnionIDæ˜¯ç›¸åŒçš„ã€‚ ç®€å•æ¥è¯´ï¼Œunionidå¯ä»¥å”¯ä¸€ç¡®å®šä¸€ä¸ªç”¨æˆ·çš„èº«ä»½ï¼Œç›¸å½“äºç”¨æˆ·çš„èº«ä»½è¯ä¿¡æ¯ã€‚ åŒä¸€ä¸ªç”¨æˆ·åœ¨ä¸åŒçš„å…¬ä¼—å·æˆ–å°ç¨‹åºä¸‹çš„unionidæ˜¯ç›¸åŒçš„ã€‚ å¦‚æœåº”ç”¨åªé™äºå°ç¨‹åºå†…ï¼Œåˆ™ä¸éœ€è¦unionidï¼Œç›´æ¥é€šè¿‡openidï¼Œå¦‚æœè¦è·¨åº”ç”¨ï¼Œåˆ™éœ€è¦unionidä½œä¸ºèº«ä»½æ ‡è¯†ã€‚é‚£ä¹ˆunionidå¦‚ä½•æ¥è·å–å‘¢ï¼Ÿè‹¥å½“å‰å°ç¨‹åºå·²ç»‘å®šåˆ°å¾®ä¿¡å¼€æ”¾å¹³å°å¸å·ä¸‹ï¼Œåå°è°ƒç”¨jscode2sessionæ¥å£æ—¶å°±èƒ½è·å–åˆ°unionidï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š å…¬ä¼—å·å¼€å‘æ—¶åªæœ‰ç”¨æˆ·å…³æ³¨äº†å…¬ä¼—å·ï¼Œæ‰å¯ä»¥è·å–åˆ°unionidã€‚å¦‚æœç”¨æˆ·ä¸å…³æ³¨æˆ–å–æ¶ˆå…³æ³¨å…¬ä¼—å·ï¼Œæ˜¯æ— æ³•è·å–unionidçš„ã€‚ å¿…é¡»å°†å…¬ä¼—å·æˆ–å°ç¨‹åºç»‘å®šåˆ°å¼€æ”¾å¹³å°æ‰å¯ä»¥è·å–unionid å¾ˆå¤šå°ä¼™ä¼´å°±ä¼šæœ‰ç–‘é—®äº†ï¼Œæ—¢ç„¶unionidæ¯”openidæ›´å…·æœ‰å”¯ä¸€æ€§ï¼Œé‚£æˆ‘ç›´æ¥ç”¨unionidä¸å°±å®Œäº†ï¼Œè¿˜è¦openidå¹²å˜›å‘¢ï¼Ÿ æˆ‘ä»¬çœ‹å®Œè¿™ä¸¤è€…çš„è·å–æ–¹å¼åä¼šå‘ç°ï¼Œunionidçš„è·å–å…¶å®æœ‰æ›´å¤šçš„æ¡ä»¶ï¼Œéœ€è¦ç»‘å®šå¾®ä¿¡å¼€æ”¾å¹³å°ï¼Œå¦‚æœç”¨æˆ·å–æ¶ˆç»‘å®šäº†å°±è·å–ä¸åˆ°äº†ï¼Œå¤šç”¨äºå¤šä¸ªç»ˆç«¯åº”ç”¨è´¦å·çš„æ‰“é€šã€‚è€Œopenidä¸ç”¨æˆæƒå¼¹æ¡†ï¼Œé™é»˜çš„æ–¹å¼å°±è·å–äº†ï¼Œæ›´å¤šå¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼šopenidæœ‰ä»€ä¹ˆç”¨ï¼Ÿä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨unionidï¼Ÿ ç”¨æˆ·æˆæƒ ä¸Šé¢æˆ‘ä»¬æ‹¿åˆ°äº†ç”¨æˆ·çš„openidå’Œunionidå¯ä»¥ç¡®å®šç”¨æˆ·çš„èº«ä»½äº†ï¼Œä½†æ˜¯ä¸ºäº†ç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬æƒ³è¦æ‹¿åˆ°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ï¼Œæ¯”å¦‚æ˜µç§°ã€å¤´åƒï¼Œåœ¨ç”¨æˆ·è¯¦æƒ…é¡µå±•ç¤ºï¼Œæˆ–è€…æ‹¿åˆ°ç”¨æˆ·çš„æ‰‹æœºå·ï¼Œé¿å…ç”¨æˆ·éªŒè¯æ—¶é‡å¤å¡«å†™æ‰‹æœºå·ï¼Œç›´æ¥å¸¦å…¥å³å¯ã€‚ ç”¨æˆ·æˆæƒæœ€é‡è¦çš„å°±æ˜¯wx.getUserInfoapiäº†ï¼Œåœ¨å°ç¨‹åºç™»å½•ã€ç”¨æˆ·ä¿¡æ¯ç›¸å…³æ¥å£è°ƒæ•´è¯´æ˜è¿™ç¯‡å®˜æ–¹å…¬å‘Šä¸­ï¼Œå¯¹getUserInfoè¿›è¡Œäº†è°ƒæ•´ï¼Œå¾ˆå¤šå¼€å‘è€…ä¸€è¿›å…¥å°ç¨‹åºå°±ç›´æ¥è°ƒç”¨getUserInfoå”¤èµ·å¼¹æ¡†ï¼Œè¿™ç§æ–¹å¼è®©å¾®ä¿¡å®˜æ–¹å¾ˆæ¼ç«ï¼Œå› æ­¤å¯¹è¿™ä¸ªapiè¿›è¡Œäº†è°ƒæ•´ã€‚ è°ƒæ•´åï¼Œå¦‚æœæˆ‘ä»¬åªæ˜¯ç®€å•çš„å±•ç¤ºç”¨æˆ·å¤´åƒæ˜µç§°ï¼Œå¯ä»¥ä½¿ç”¨&lt;open-data /&gt;ç»„ä»¶ï¼š 12345678&lt;open-data class=&quot;avatar&quot; type=&quot;userAvatarUrl&quot;&gt;&lt;/open-data&gt;&lt;open-data class=&quot;nick-name&quot; type=&quot;userNickName&quot;&gt;&lt;/open-data&gt; æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™è¿™ä¸ªç»„ä»¶åŠ ä¸ªç±»åï¼Œæ§åˆ¶æ ·å¼ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œä½¿ç”¨buttonè®©ç”¨æˆ·ä¸»åŠ¨è§¦å‘å¼¹æ¡†æˆæƒæ¥è·å–ï¼š 12345&lt;button open-type=&quot;getUserInfo&quot; bindgetuserinfo=&quot;bindGetUserInfo&quot;&gt; æˆæƒç™»å½•&lt;/button&gt; 12345678bindGetUserInfo(e) &#123; const &#123; userInfo &#125; = e.detail; const &#123; nickName, avatarUrl, gender &#125; = userInfo;&#125; åœ¨è°ƒç”¨wx.getUserInfoå‰éœ€è¦è¿›è¡Œæˆæƒä¿¡æ¯çš„åˆ¤æ–­ï¼š 1234567891011121314onLoad() &#123; wx.getSetting(&#123; success(res) &#123; if (res.authSetting[&quot;scope.userInfo&quot;]) &#123; // å·²ç»æˆæƒï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ getUserInfo è·å–å¤´åƒæ˜µç§° wx.getUserInfo(&#123; success: function (res) &#123; const &#123; userInfo &#125; = res; &#125;, &#125;); &#125; &#125;, &#125;);&#125;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"}]},{"title":"React Nativeå®æˆ˜ä¹‹å®‰å…¨å¯†ç ç®±","date":"2022-08-28T05:14:15.000Z","path":"2022/08/28/React-Native-Safebox.html","text":"åœ¨å­¦ä¹ äº†RNçš„æ ·å¼ã€ç»„ä»¶å’Œè·¯ç”±ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥å°è¯•è‡ªå·±å¼€å‘ä¸€æ¬¾æˆ‘ä»¬è‡ªå·±çš„Appï¼Œæœ¬æ–‡æˆ‘ä»¬ç»“åˆå®é™…ç”Ÿæ´»ä¸­çš„éœ€è¦ï¼Œä»é›¶å¼€å§‹å®æˆ˜å¼€å‘ä¸€ä¸ªAppï¼Œå¼€å‘æœŸé—´ä¹Ÿé‡åˆ°äº†å¤§å¤§å°å°çš„å‘ï¼Œåˆ†äº«ç»™å¤§å®¶å¸Œæœ›å¸®åŠ©å¤§å®¶è§„é¿ã€‚ é¡¹ç›®æºèµ· æˆ‘ä»¬åœ¨æµè§ˆç½‘ç«™æˆ–è€…Appæ—¶ç»å¸¸ä¼šæ³¨å†Œå„ç§å„æ ·çš„è´¦å·ï¼Œæ‰‹æœºè‡ªå¸¦çš„çš„å¯†ç ä¿é™©ç®±åŠŸèƒ½åªèƒ½ä¿å­˜Appçš„å¯†ç ï¼Œä¸èƒ½ä¿å­˜ç½‘é¡µçš„ï¼›ä¸åŒç½‘ç«™çš„æ³¨å†Œè´¦å·å’Œå¯†ç çš„è§„åˆ™è¿˜ä¸ä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬çš„éœ€æ±‚ä¹Ÿå¾ˆç®€å•ï¼Œè®°å½•ä¸‹æ¯ä¸ªç½‘ç«™æˆ–Appæ³¨å†Œçš„è´¦å·å¯†ç å³å¯ï¼›ç¬”è€…ä¹‹å‰åœ¨åº”ç”¨å¸‚åœºä¸‹è½½è¿‡æŸå¯†ç ç®±çš„Appï¼Œå¦‚ä¸‹ï¼š ä½†æ˜¯å°†é‡è¦çš„å¯†ç ä¿å­˜åœ¨åˆ«äººçš„Appä¸Šï¼Œå°¤å…¶æ˜¯æ¶‰åŠåˆ°è‡ªå·±éšç§çš„å¯†ç ï¼Œæ€»è§‰å¾—æœ‰äº›ä¸æ”¾å¿ƒï¼Œå…¶å®ä¸»è¦æ˜¯è¿™ç ´Appè¿˜å¼€å§‹æ”¶è´¹äº†ï¼›å› æ­¤æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¹‹å‰å­¦ä¹ çš„RNçŸ¥è¯†æ¥å¼€å‘ä¸€æ¬¾è‡ªç”¨çš„å¯†ç ä¿é™©ç®±ï¼Œæ—¢å®‰å…¨å¯é åˆç‰©ç¾ä»·å»‰ï¼Œè¯´å¹²å°±å¹²ã€‚ é¡¹ç›®æ­å»º æˆ‘ä»¬é¦–å…ˆæ¥æ­å»ºé¡¹ç›®ï¼š 1react-native init rnSafeBox è¿™é‡ŒRNçš„ç¬¬ä¸€ä¸ªå°å‘æ¥äº†ï¼ŒRNçš„ç‰ˆæœ¬å·²ç»åˆ°äº†0.68ä»¥ä¸Šï¼Œå®ƒå¼ºåˆ¶ä½¿ç”¨JDK 11è¿›è¡ŒAndroid buildï¼›æˆ‘ä»¬çœ‹ä¸‹0.68ç‰ˆæœ¬æœ€ä½è¦æ±‚ï¼š Node &gt;= 14ç‰ˆæœ¬ java jdk &gt;= 11ç‰ˆæœ¬ ä½†ç¬”è€…è£…çš„ç‰ˆæœ¬æ¯”è¾ƒæ—©ï¼Œæ˜¯JDK1.8ï¼Œå› æ­¤æˆ‘ä»¬æ­å»ºé¡¹ç›®æ—¶éœ€è¦ç•™æ„è‡ªå·±çš„JDKç‰ˆæœ¬ï¼›æˆ‘ä»¬å¯ä»¥åŠ ä¸Š--versionæ¥æŒ‡å®šRNçš„ç‰ˆæœ¬ 1react-native init rnSafeBox --version 0.67.0 æ­å»ºåï¼Œæˆ‘ä»¬åŠ å…¥å¸¸ç”¨çš„ä¸€äº›ä¾èµ–ï¼Œå¦‚å›¾æ ‡å’Œè·¯ç”±å¯¼èˆªï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ï¼Œéœ€è¦çš„å°ä¼™ä¼´å¯ä»¥çœ‹ä¸‹è¿™ç¯‡æ–‡ç« ï¼šæ·±å…¥å­¦ä¹ React Nativeä¹‹è·¯ç”±å¯¼èˆªã€‚ç»„ä»¶åº“çš„è¯ï¼Œæˆ‘ä»¬é€‰æ‹©äº†&#x4e;&#x61;&#x74;&#105;&#x76;&#x65;&#x42;&#x61;&#x73;&#x65;&#64;&#x33;&#46;&#x34;&#x2e;&#x78;ï¼Œå®ƒçš„ç»„ä»¶è¾ƒä¸ºä¸°å¯Œä¸”å…¨é¢ï¼š 1yarn add native-base react-native-svg@12.1.1 react-native-safe-area-context@3.3.2 æˆ‘ä»¬åœ¨é¡¹ç›®ä¸‹æ–°å»ºsrcç›®å½•ä½œä¸ºæˆ‘ä»¬ä»£ç çš„ä¸»è¦ç›®å½•ï¼Œç„¶åå»ºç«‹ä»¥ä¸‹ç»“æ„ï¼š 1234567891011|- src |- router |- index.js |- utils |- index.js |- storage.js |- views |- Login |- Home |- Passwd |- Change routerå­˜æ”¾æˆ‘ä»¬çš„è·¯ç”±ç»„ä»¶ï¼Œè¿™é‡Œç”±äºä¸éœ€è¦å¤æ‚çš„é€‰é¡¹å¡å¯¼èˆªï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å †æ ˆå¯¼èˆªå³å¯ï¼›æˆ‘ä»¬é¦–å…ˆæ”¹é€ å…¥å£çš„App.jsï¼ŒåŠ å…¥NativeBaseå’Œå¯¼èˆªçš„Providerå®¹å™¨ï¼š 123456789101112131415import &#123;NativeBaseProvider&#125; from &#x27;native-base&#x27;;import &#123;NavigationContainer&#125; from &#x27;@react-navigation/native&#x27;;import Router from &#x27;./src/router/index&#x27;;const App = () =&gt; &#123; return ( &lt;SafeAreaProvider&gt; &lt;NavigationContainer&gt; &lt;NativeBaseProvider&gt; &lt;Router&gt;&lt;/Router&gt; &lt;/NativeBaseProvider&gt; &lt;/NavigationContainer&gt; &lt;/SafeAreaProvider&gt; );&#125;; ç»™æˆ‘ä»¬çš„è·¯ç”±router/index.jså¯¼å…¥é¡µé¢ï¼š 12345678910111213141516171819202122232425262728class Router extends Component &#123; render() &#123; return ( &lt;Stack.Navigator&gt; &lt;Stack.Screen name=&quot;Login&quot; component=&#123;Login&#125; options=&#123;&#123;headerShown: false&#125;&#125; /&gt; &lt;Stack.Screen name=&quot;Home&quot; component=&#123;Home&#125; options=&#123;&#123;title: &#x27;é¦–é¡µ&#x27;&#125;&#125; /&gt; &lt;Stack.Screen name=&quot;Passwd&quot; component=&#123;Passwd&#125; options=&#123;&#123;title: &#x27;å¯†ç &#x27;&#125;&#125; /&gt; &lt;Stack.Screen name=&quot;Change&quot; component=&#123;Change&#125; options=&#123;&#123;title: &#x27;ä¿®æ”¹å…¥å£å¯†ç &#x27;&#125;&#125; /&gt; &lt;/Stack.Navigator&gt; ); &#125;&#125; ä¸»è¦é¡µé¢ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹ç™»å½•é¡µé¢ï¼Œç™»å½•é¡µé¢æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªè¾“å…¥æ¡†å’Œç¡®å®šæŒ‰é’®ï¼ˆçœç•¥å…¶ä»–ç»„ä»¶ä»£ç ï¼‰ï¼š 123456789101112131415161718192021222324252627import &#123;Sae&#125; from &#x27;react-native-textinput-effects&#x27;;class Login extends Component &#123; constructor(props) &#123; super(props); this.state = &#123; now: &#x27;&#x27;, // storageä¸­çš„å¯†ç  pwd: &#x27;&#x27;,// ç”¨æˆ·è¾“å…¥çš„å¯†ç  &#125;; &#125; clickSubmit() &#123;&#125; render() &#123; const &#123;pwd&#125; = this.state; return ( &lt;Sae value=&#123;pwd&#125; label=&#123;&#x27;å…¥å£å¯†ç &#x27;&#125; secureTextEntry=&#123;true&#125; iconClass=&#123;FontAwesomeIcon&#125; iconName=&#123;&#x27;lock&#x27;&#125; onChangeText=&#123;value =&gt; this.setState(&#123;pwd: value&#125;)&#125; /&gt; &lt;View&gt; &lt;Button onPress=&#123;() =&gt; this.clickSubmit()&#125;&gt;ç¡®å®š&lt;/Button&gt; &lt;/View&gt; ) &#125;&#125; è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°react-native-textinput-effectsç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨çº¯jså®ç°ä¸åŒçš„ç‚«é…·æ•ˆæœçš„textinputç»„ä»¶åº“ï¼Œå®ç°çš„è¾“å…¥æ¡†æ•ˆæœå¦‚ä¸‹ï¼š å…¶æ¬¡æ˜¯æˆ‘ä»¬çš„é¦–é¡µï¼Œç”¨æ¥å±•ç¤ºè´¦å·å¯†ç çš„åˆ—è¡¨ï¼š 12345678910111213141516171819202122class Home extends Component &#123; constructor() &#123; super(); this.state = &#123; list: [], &#125;; &#125; render() &#123; return ( &lt;View style=&#123;styles.box&#125;&gt; &lt;ScrollView&gt; &#123;list.map((item, index) =&gt; &#123; return &lt;ListItem item=&#123;item&#125; index=&#123;index&#125;&gt;&lt;/ListItem&gt;; &#125;)&#125; &lt;/ScrollView&gt; &lt;View style=&#123;styles.fixedAddBtn&#125;&gt; &lt;Icon name=&#123;&quot;plus&quot;&#125; size=&#123;30&#125; color=&quot;#fff&quot; /&gt; &lt;/View&gt; &lt;/View&gt; ); &#125;&#125; fixedAddBtnæŒ‰é’®ç”¨æ¥ç‚¹å‡»è·³è½¬åˆ°æ–°å¢è´¦å·å¯†ç çš„é¡µé¢ï¼›æˆ‘ä»¬å°†listä¸­çš„æ¯ä¸ªæ•°æ®å°è£…æˆListItemç»„ä»¶ï¼Œæ–¹ä¾¿åé¢è¿›è¡ŒåŠ¨ç”»æ•ˆæœçš„å±•ç¤ºã€‚æ•ˆæœå¦‚ä¸‹ï¼š ç„¶åæ˜¯ä¿®æ”¹å…¥å£å¯†ç é¡µé¢Changeï¼Œå®ƒåˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œå¦‚æœå·²ç»è®¾ç½®è¿‡äº†ï¼Œå°±è¿›è¡Œä¿®æ”¹ï¼›å¦‚æœæ²¡æœ‰è®¾ç½®ï¼Œåˆ™å¯ä»¥è®¾ç½®æ–°çš„å¯†ç ã€‚ 123456789101112131415161718192021222324class Change extends Component &#123; render() &#123; const &#123; showOldPwd &#125; = this.state; return ( &lt;View&gt; &#123;showOldPwd &amp;&amp; ( &lt;Sae label=&#123;&quot;è¯·è¾“å…¥æ—§å…¥å£å¯†ç &quot;&#125; onChangeText=&#123;(value) =&gt; this.setState(&#123; oldPwd: value &#125;)&#125; /&gt; )&#125; &lt;Sae label=&#123;&quot;æ–°çš„å…¥å£å¯†ç &quot;&#125; onChangeText=&#123;(value) =&gt; this.setState(&#123; newPwd: value &#125;)&#125; /&gt; &lt;Sae label=&#123;&quot;è¯·å†æ¬¡è¾“å…¥å¯†ç &quot;&#125; onChangeText=&#123;(value) =&gt; this.setState(&#123; repeatPwd: value &#125;)&#125; /&gt; &lt;Button&gt;ç¡®å®š&lt;/Button&gt; &lt;/View&gt; ); &#125;&#125; æœ€åæ˜¯æ–°å¢å’Œç¼–è¾‘è´¦å·å¯†ç é¡µé¢Passwdï¼Œå®ƒçš„éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132333435class Passwd extends Component &#123; showSheet() &#123; this.setState(&#123; isVisible: true, &#125;); &#125; render() &#123; return ( &lt;View style=&#123;styles.box&#125;&gt; &lt;TouchableWithoutFeedback onPress=&#123;() =&gt; this.showSheet()&#125;&gt; &lt;View&gt; &lt;Text&gt;å¯†ç ç±»å‹&lt;/Text&gt; &lt;Input isDisabled=&#123;true&#125; value=&#123;pwdType&#125; placeholder=&quot;è¯·é€‰æ‹©å¯†ç ç±»å‹&quot; /&gt; &lt;/View&gt; &lt;/TouchableWithoutFeedback&gt; &lt;View&gt; &lt;Text&gt;ç”¨æˆ·å&lt;/Text&gt; &lt;Input value=&#123;username&#125; placeholder=&quot;è¯·è¾“å…¥ç”¨æˆ·å&quot; onChangeText=&#123;(value) =&gt; this.setState(&#123; username: value &#125;)&#125; /&gt; &lt;/View&gt; &lt;View&gt; &lt;Text&gt;å¯†ç &lt;/Text&gt; &lt;Input value=&#123;password&#125; placeholder=&quot;è¯·è¾“å…¥å¯†ç &quot; onChangeText=&#123;(value) =&gt; this.setState(&#123; password: value &#125;)&#125; /&gt; &lt;/View&gt; &lt;/View&gt; ); &#125;&#125; è¿™é‡Œé™¤äº†å¯†ç ç±»å‹ï¼Œå…¶ä»–å­—æ®µï¼ˆç”¨æˆ·åã€å¯†ç ã€æ ‡é¢˜ã€ç½‘å€ï¼‰ç­‰éƒ½æ˜¯è¾“å…¥æ¡†ï¼Œç›´æ¥è¾“å…¥å³å¯ï¼›å¯†ç ç±»å‹ç‚¹å‡»åå‘ˆç°ä¸‹æ‹‰æ¡†ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨native-baseçš„Actionsheetç»„ä»¶ï¼š 1234567891011121314&lt;Actionsheet isOpen=&#123;isVisible&#125; onClose=&#123;() =&gt; this.closeSheet()&#125;&gt; &lt;Actionsheet.Content&gt; &#123;list.map((el, index) =&gt; &#123; return ( &lt;Actionsheet.Item key=&#123;index&#125; onPress=&#123;() =&gt; this.clickTypeItem(el, index)&#125; &gt; &#123;el.name&#125; &lt;/Actionsheet.Item&gt; ); &#125;)&#125; &lt;/Actionsheet.Content&gt;&lt;/Actionsheet&gt;; Actionsheetæ•ˆæœå¦‚ä¸‹ï¼š è·¯ç”±æ”¹é€  æˆ‘ä»¬çš„é¡µé¢æ¡†æ¶å·²ç»åŸºæœ¬æ­å»ºå®Œæˆäº†ï¼Œæˆ‘ä»¬å¯¹è·¯ç”±ç»„ä»¶è¿›è¡Œä¸€äº›æ”¹é€ ï¼Œå¯¹ç™»å½•çŠ¶æ€è¿›è¡ŒåŒºåˆ†ï¼›åœ¨ç™»å½•æˆåŠŸåæ‰èƒ½è¿›å…¥é¦–é¡µåŠåç»­é¡µé¢ï¼Œå¦åˆ™åªèƒ½å±•ç¤ºç™»å½•é¡µé¢ï¼š 1234567891011121314&lt;Stack.Navigator&gt; &#123;isLogin ? ( &lt;&gt; &lt;Stack.Screen name=&quot;Home&quot; component=&#123;Home&#125; options=&#123;&#123; title: &quot;é¦–é¡µ&quot; &#125;&#125; /&gt; &#123;/* ä»¥åŠå…¶ä»–é¡µé¢ */&#125; &lt;/&gt; ) : ( &lt;Stack.Screen name=&quot;Login&quot; component=&#123;Login&#125; options=&#123;&#123; headerShown: false &#125;&#125; /&gt; )&#125;&lt;/Stack.Navigator&gt; æˆ‘ä»¬è®¾ç½®åˆå§‹åŒ–é¡µé¢ä¸ºç™»å½•é¡µï¼ŒåŒæ—¶ç™»å½•é¡µä¸éœ€è¦å±•ç¤ºheaderï¼›å†ç»™å…¶ä»–é¡µé¢çš„headerè®¾ç½®ç»Ÿä¸€çš„èƒŒæ™¯é¢œè‰²å’Œå­—ä½“é¢œè‰²ï¼š 123456789101112&lt;Stack.Navigator initialRouteName=&quot;Login&quot; screenOptions=&#123;&#123; headerStyle: &#123; backgroundColor: &#x27;#128574&#x27;, &#125;, headerTintColor: &#x27;#fff&#x27;, headerTitleStyle: &#123; fontWeight: &#x27;normal&#x27;, &#125;, &#125;&#125;&gt;&lt;/Stack.Navigator&gt; ç°åœ¨æˆ‘ä»¬éœ€è¦é€šè¿‡isLoginå˜é‡æ¥æ§åˆ¶è·¯ç”±çš„å˜åŒ–ï¼Œç”±äºç™»å½•æ“ä½œæ—¶åœ¨ç™»å½•é¡µé¢åˆ¤æ–­çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å…¨å±€çš„event busæ¥è¿›è¡Œç›‘å¬ï¼Œåœ¨é¡µé¢é”€æ¯æ—¶ä¸è¦å¿˜è®°ç§»é™¤ç›‘å¬äº‹ä»¶ï¼š 1234567891011121314151617import bus from &#x27;../utils/bus.js&#x27;;class Router extends Component &#123; constructor(props) &#123; this.getLogin = this.getLogin.bind(this); &#125; getLogin() &#123; this.setState(&#123; isLogin: true, &#125;); &#125; componentDidMount() &#123; bus.addListener(&quot;login&quot;, this.getLogin); &#125; componentWillUnmount() &#123; bus.removeListener(&quot;login&quot;, this.getLogin); &#125;&#125; bus.jsçš„ä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥è°ƒç”¨eventsåº“ï¼š 123import &#123;EventEmitter&#125; from &#x27;events&#x27;;const eventBus = new EventEmitter();export default eventBus; å­˜å–æ•°æ® æ•°æ®çš„å­˜å’Œå–æ˜¯æˆ‘ä»¬è¿™ä¸ªAppçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œæˆ‘ä»¬ç”¨åˆ°Async Storageè¿™ä¸ªåº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªç»™RNè¿›è¡Œæ•°æ®å­˜å‚¨çš„ä¾èµ–åº“ï¼Œé¦–å…ˆè¿›è¡Œå®‰è£…ï¼š 123npm install @react-native-async-storage/async-storage# oryarn add @react-native-async-storage/async-storage å®ƒçš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå’ŒLocalStorageçš„APIæœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½æ˜¯ä»¥å­—ç¬¦ä¸²å½¢å¼å­˜å‚¨é”®å’Œå€¼ï¼Œæˆ‘ä»¬æŠŠå®ƒå°è£…åˆ°utils/storage.jsï¼Œæ–¹ä¾¿è°ƒç”¨ï¼š 123456789101112131415161718192021222324252627282930313233import AsyncStorage from &#x27;@react-native-async-storage/async-storage&#x27;;const getData = async (key = &#x27;&#x27;) =&gt; &#123; try &#123; return await AsyncStorage.getItem(`@storage_$&#123;key&#125;`); &#125; catch (e) &#123;return &#x27;&#x27;; &#125;&#125;;const storeData = async (key = &#x27;&#x27;, value = &#x27;&#x27;) =&gt; &#123; try &#123; await AsyncStorage.setItem(`@storage_$&#123;key&#125;`, value); &#125; catch (e) &#123;&#125;&#125;;const storeObjectData = async (key, obj) =&gt; &#123; if (typeof obj !== &#x27;object&#x27;) &#123; console.warn(&#x27;obj is not a object&#x27;); return; &#125; try &#123; await AsyncStorage.setItem(`@storage_$&#123;key&#125;`, JSON.stringify(obj)); &#125; catch (e) &#123;&#125;&#125;;const getObjectData = async (key = &#x27;&#x27;) =&gt; &#123; let res = await AsyncStorage.getItem(`@storage_$&#123;key&#125;`); if (res) &#123; try &#123; return JSON.parse(res); &#125; catch (error) &#123; return &#123;&#125;; &#125; &#125; else &#123; return &#123;&#125;; &#125;&#125;; æˆ‘ä»¬å°è£…äº†ä¸¤ç»„APiï¼Œä¸€ç»„æ˜¯ç›´æ¥å­˜å–å€¼çš„ï¼Œå¦ä¸€ç»„æ˜¯å¯ä»¥å­˜å–å¯¹è±¡çš„ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬åœ¨ç™»å½•é¡µæ—¶ï¼Œå…ˆæŠŠå­˜å‚¨çš„å…¥å£å¯†ç entranceå–å‡ºæ¥ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿›å…¥é¦–é¡µï¼›å¦‚æœå­˜åœ¨ï¼Œåœ¨ä¸‹é¢ç‚¹å‡»ç™»å½•æŒ‰é’®æ—¶å°±å°†ç”¨æˆ·è¾“å…¥çš„å€¼è¿›è¡Œæ¯”è¾ƒå³å¯ï¼š 12345678910111213141516171819202122232425262728import &#123; getData &#125; from &quot;../../utils/storage&quot;;class Login extends Component &#123; async componentDidMount() &#123; await this.getStorage(); &#125; async getStorage() &#123; let now = await getData(&quot;entrance&quot;); if (typeof now === &quot;string&quot; &amp;&amp; now) &#123; this.setState(&#123; now &#125;); &#125; else &#123; // æ²¡æœ‰è®¾ç½®å…¥å£å¯†ç ï¼Œç›´æ¥è¿›å…¥ bus.emit(&quot;login&quot;); &#125; &#125; clickSubmit() &#123; const &#123; pwd, now &#125; = this.state; if (!pwd) &#123; showToast(&quot;è¯·è¾“å…¥å…¥å£å¯†ç &quot;); return; &#125; if (pwd !== now) &#123; showToast(&quot;å…¥å£å¯†ç ä¸æ­£ç¡®&quot;); return; &#125; // ç™»å½•æˆåŠŸ bus.emit(&quot;login&quot;); &#125;&#125; åœ¨è®¾ç½®å…¥å£å¯†ç çš„Changeé¡µé¢ï¼Œæˆ‘ä»¬å¯¹æ–°æ—§å¯†ç è¿›è¡Œä¸€ç³»åˆ—æ ¡éªŒï¼Œç„¶åç›´æ¥ä¿å­˜åˆ°storageä¸­å³å¯ï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ã€‚ åœ¨é¦–é¡µï¼Œæˆ‘ä»¬åœ¨updateListå‡½æ•°ä¸­å°†storageä¸­ä¿å­˜çš„æ¯ä¸€æ¡å¯†ç å–å‡ºæ¥æ”¾åˆ°listä¸­è¿›è¡Œå±•ç¤ºï¼Œä½†æ˜¯åœ¨æ–°å¢æˆ–è€…ç¼–è¾‘storageä¸­çš„å¯†ç ä¹‹åï¼Œéœ€è¦åŠæ—¶é‡æ–°è°ƒç”¨è¿™ä¸ªå‡½æ•°æ›´æ–°listæ•°ç»„ï¼Œæˆ‘ä»¬åœ¨RNè·¯ç”±å¯¼èˆªä¸­çš„å¯¼èˆªçš„ç”Ÿå‘½å‘¨æœŸä¸­è¯´è¿‡ï¼Œå¯ä»¥ç›‘å¬focusäº‹ä»¶æ¥åˆ¤æ–­é¡µé¢æ˜¯å¦é‡æ–°èšç„¦ï¼š 1234567891011121314class Home extends Component &#123; // æ›´æ–°listæ•°ç»„ async updateList() &#123;&#125; async componentDidMount() &#123; await this.updateList(); this._focus = this.props.navigation.addListener(&quot;focus&quot;, async () =&gt; &#123; await this.updateList(); &#125;); &#125; componentWillUnrmount() &#123; this._focus(); &#125;&#125; ä¼˜åŒ– æˆ‘ä»¬æ•´ä¸ªAppçš„å­˜å‚¨å’Œè¯»å–çš„åŠŸèƒ½å·²ç»åŸºæœ¬å®Œæˆï¼ŒåŸºæœ¬åŠŸèƒ½ä¹Ÿèƒ½å¤Ÿä½¿ç”¨äº†ï¼Œä¸‹é¢å¯¹ç•Œé¢å’ŒåŠŸèƒ½è¿›è¡Œä¸€äº›ä¼˜åŒ–ã€‚ æ–°å¢æŒ‰é’®åŠ é˜´å½± åœ¨åŸç‰ˆçš„Appä¸­ï¼Œæ–°å¢æŒ‰é’®æœ‰ä¸€ä¸ªé˜´å½±çš„æ•ˆæœï¼Œé˜´å½±æ•ˆæœä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼›åœ¨CSS3ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡box-shadowå±æ€§å®ç°ï¼Œåœ¨RNä¸­iOSå¹³å°æ”¯æŒä»¥ä¸‹shadowå±æ€§ï¼š 12345678910&lt;View style=&#123;&#123; shadowOffset: &#123; width: 10, height: 10, &#125;, shadowOpacity: 0.8, shadowRadius: 1.5, &#125;&#125;/&gt; åœ¨å®‰å“ç«¯å¯ä»¥é€šè¿‡elevationå±æ€§ï¼Œä½†æ˜¯ä¸¤è€…è¡¨ç°å½¢å¼å·®åˆ«å¾ˆå¤§ï¼›å› æ­¤æˆ‘ä»¬å¼•å…¥ç¬¬ä¸‰æ–¹çš„react-native-shadowï¼Œå®ƒæ˜¯åˆ©ç”¨react-native-svgç”»å‡ºsvgé˜´å½±ï¼Œå› æ­¤ä¸¤ç«¯æ•ˆæœæ¯”è¾ƒä¸€è‡´ï¼›æˆ‘ä»¬åŒæ—¶å®‰è£…è¿™ä¸¤ä¸ªä¾èµ–ï¼š 12yarn add react-native-shadowyarn add react-native-svg ç„¶åç»™fixedAddBtnå¥—ä¸€å±‚BoxShadowç»„ä»¶ï¼š 12345678910111213141516171819202122import &#123; BoxShadow &#125; from &quot;react-native-shadow&quot;;&lt;BoxShadow setting=&#123;&#123; width: 30, height: 30, color: &quot;#000&quot;, border: 20, radius: 15, opacity: 0.1, x: 0, y: 25, style: &#123; justifyContent: &quot;center&quot;, alignItems: &quot;center&quot;, flex: 1, &#125;, &#125;&#125;&gt; &lt;View style=&#123;styles.fixedAddBtn&#125;&gt; &lt;Icon name=&#123;&quot;plus&quot;&#125; size=&#123;30&#125; color=&quot;#fff&quot; /&gt; &lt;/View&gt;&lt;/BoxShadow&gt;; å¤åˆ¶åŠŸèƒ½ æˆ‘ä»¬ç‚¹å‡»å¤åˆ¶æŒ‰é’®å¯ä»¥ç›´æ¥å¤åˆ¶è´¦å·æˆ–è€…å¯†ç åˆ°å‰ªåˆ‡æ¿ï¼›RNå·²ç»å°†ClipboardåŠŸèƒ½ä»æ ¸å¿ƒä»£ç ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸‹ç¬¬ä¸‰æ–¹çš„æ¨¡å—ï¼š 1yarn add @react-native-clipboard/clipboard è°ƒç”¨Clipboard.setStringï¼Œå¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œè°ƒç”¨await Clipboard.getString()è·å–å‰ªåˆ‡æ¿çš„å†…å®¹ï¼›æˆ‘ä»¬è¿™è¾¹ä½¿ç”¨setStringå³å¯ï¼š 12345678910111213141516import Clipboard from &quot;@react-native-clipboard/clipboard&quot;;class Home extends Component &#123; clickCopy(text) &#123; Clipboard.setString(text); &#125; render() &#123; return ( &lt;view&gt; &lt;Text&gt;ç”¨æˆ·åï¼š&lt;/Text&gt; &lt;TouchableOpacity onPress=&#123;() =&gt; this.clickCopy(username)&#125;&gt; &lt;Text&gt;&#123;username&#125;&lt;/Text&gt; &lt;/TouchableOpacity&gt; &lt;/view&gt; ); &#125;&#125; æŒ‡çº¹è¯†åˆ«ç™»å½• ç°åœ¨çš„æ™ºèƒ½æ‰‹æœºä¸€èˆ¬éƒ½å¸¦æœ‰æŒ‡çº¹è¯†åˆ«çš„ä¼ æ„Ÿå™¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨æŒ‡çº¹æ¨¡å—æ¥æ–¹ä¾¿ç”¨æˆ·ç™»å½•ï¼›React Native Fingerprint Scanneræ˜¯ä¸€ä¸ªRNåº“ï¼Œç”¨äºä½¿ç”¨æŒ‡çº¹å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼›å®ƒæä¾›äº†ä¸€ä¸ªé»˜è®¤è§†å›¾ï¼Œæç¤ºç”¨æˆ·å°†æ‰‹æŒ‡æ”¾åœ¨ä¼ æ„Ÿå™¨ä¸Šè¿›è¡Œæ‰«æã€‚ æˆ‘ä»¬æ ¹æ®å®‰è£…æ•™ç¨‹å®‰è£…è¯¥ä¾èµ–åï¼Œå‘ç°å®ƒçš„æ–‡æ¡£çœ‹èµ·æ¥å¾ˆå¤šï¼Œå¾ˆå”¬äººï¼Œä½†æ˜¯æ ¸å¿ƒçš„APIåªæœ‰ä¸¤ä¸ªï¼Œé¦–å…ˆæ˜¯isSensorAvailableï¼Œç”¨æ¥åˆ¤æ–­ä¼ æ„Ÿå™¨æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœæ‰‹æœºæ²¡æœ‰è®¾ç½®æŒ‡çº¹åˆ™ä¸å¯ç”¨ï¼Œè¯¥å‡½æ•°ç›´æ¥æŠ¥é”™ï¼Œå› æ­¤é€šè¿‡try/catchè¿›è¡ŒåŒ…è£…ï¼š 1234567891011class Login extends Component &#123; // åˆ¤æ–­æŒ‡çº¹ä¼ æ„Ÿå™¨æ˜¯å¦å¯ç”¨ async checkSensorsAvailable() &#123; let flag = false; try &#123; let biometryType = await FingerprintScanner.isSensorAvailable(); flag = true; &#125; catch (error) &#123;&#125; return flag; &#125;&#125; åœ¨å®‰å“ç«¯biometryTypeå€¼å¦‚æœå¯ç”¨çš„è¯ä¸ºBiometricsï¼ŒiOSç«¯ä¸ºâ€™Touch IDâ€™å’Œâ€™Face IDâ€™ï¼Œç›®å‰æˆ‘ä»¬åªè€ƒè™‘å®‰å“ç«¯ï¼›åˆ¤æ–­åæˆ‘ä»¬å°±çœŸæ­£å¯ä»¥è°ƒç”¨æŒ‡çº¹æ¨¡å—äº†ï¼Œauthenticateå‡½æ•°è‡ªåŠ¨å”¤èµ·æŒ‡çº¹è¯†åˆ«æ¨¡å—çš„æ¨¡æ€æ¡†ï¼Œæˆ‘ä»¬å¡«å…¥titleå’Œdescriptionä¸€äº›æè¿°æ–‡æ¡ˆæ¥å¼•å¯¼ç”¨æˆ·ï¼š 12345678910111213141516class Login extends Component &#123; async scanAuth() &#123; let flag = false; try &#123; let res = await FingerprintScanner.authenticate(&#123; title: &quot;æŒ‡çº¹ç™»å½•&quot;, description: &quot;è¯·è§¦æ‘¸æŒ‡çº¹ä¼ æ„Ÿå™¨&quot;, cancelButton: &quot;å–æ¶ˆ&quot;, &#125;); if (res === true) &#123; flag = true; &#125; &#125; catch (error) &#123;&#125; return flag; &#125;&#125; æˆ‘ä»¬åœ¨é¡µé¢åˆå§‹åŒ–æ—¶ï¼Œå¦‚æœè®¾ç½®äº†å…¥å£å¯†ç ï¼Œåˆ™è¿›è¡ŒæŒ‡çº¹è¯†åˆ«æ ¡éªŒï¼Œè‡ªåŠ¨å¼¹å‡ºæ¨¡æ€æ¡†ï¼ŒéªŒè¯æˆåŠŸåè·³è½¬é¦–é¡µï¼ŒåŒæ—¶ä¸è¦å¿˜äº†åœ¨é¡µé¢é”€æ¯æ—¶è°ƒç”¨releaseé‡Šæ”¾æŒ‡çº¹æ¨¡å—çš„èµ„æºï¼š 123456789101112131415161718class Login extends Component &#123; async componentDidMount() &#123; // å½“å‰å·²ç»è®¾ç½®äº†å¯†ç  if (this.state.now) &#123; let available = await this.checkSensorsAvailable(); if (available) &#123; let auth = await this.scanAuth(); if (auth) &#123; bus.emit(&quot;login&quot;); &#125; &#125; &#125; &#125; // é‡Šæ”¾èµ„æº componentWillUnmount = () =&gt; &#123; FingerprintScanner.release(); &#125;;&#125; æŒ‡çº¹è¯†åˆ«æ•ˆæœå¦‚ä¸‹ï¼š æ”¾é”™å›¾äº†ï¼Œåº”è¯¥æ˜¯ä¸‹é¢è¿™å¼ ï¼š ç®­å¤´æ·»åŠ åŠ¨æ•ˆ æˆ‘ä»¬åœ¨é¦–é¡µçš„åˆ—è¡¨å±•å¼€æ—¶ï¼Œç»™å°ç®­å¤´ä¸€ä¸ªæ—‹è½¬çš„åŠ¨ç”»æ•ˆæœï¼›RNä¸­æä¾›äº†Animated APIæ¥å®ç°åŠ¨ç”»ï¼Œå¯ä»¥ç®€æ´çš„å®ç°å„ç§åŠ¨ç”»å’Œäº¤äº’æ–¹å¼ï¼Œå¹¶ä¸”å…·å¤‡æé«˜çš„æ€§èƒ½ï¼Œæˆ‘ä»¬ä»RNä¸­å¯¼å‡ºæ¨¡å—ï¼š 1234567891011121314151617181920212223import &#123; Animated &#125; from &quot;react-native&quot;;class ListItem &#123; constructor() &#123; const rotateDeg = new Animated.Value(0); this.state = &#123; rotateDeg: rotateDeg, &#125;; &#125; render() &#123; const &#123; rotateDeg &#125; = this.state; const rotate = rotateDeg.interpolate(&#123; inputRange: [0, 1], outputRange: [&quot;0deg&quot;, &quot;180deg&quot;], &#125;); return ( &lt;View&gt; &lt;Animated.View style=&#123;&#123; transform: [&#123; rotate: rotate &#125;] &#125;&#125;&gt; &lt;Icon name=&quot;up&quot; size=&#123;20&#125; color=&quot;#333&quot; /&gt; &lt;/Animated.View&gt; &lt;/View&gt; ); &#125;&#125; æˆ‘ä»¬é¦–å…ˆä½¿ç”¨new Animated.Valueåˆ›å»ºä¸€ä¸ªå€¼ï¼Œåœ¨renderå‡½æ•°ä¸­ä½¿ç”¨äº†ä¸€ä¸ªinterpolate()æ’å€¼å‡½æ•°ï¼Œç”¨äºå°†è¾“å…¥å€¼èŒƒå›´è½¬æ¢ä¸ºè¾“å‡ºå€¼èŒƒå›´ï¼Œè¿™é‡Œæ˜¯å°†[0, 1]è¾“å…¥è½¬ä¸º[â€œ0degâ€, â€œ180degâ€]è¾“å‡ºã€‚ 1234567891011121314151617181920const ANIMATE_DURATION = 200;class ListItem &#123; clickListItem(item, index) &#123; if (item.toggle) &#123; // å½“å‰æ˜¯æ‰“å¼€çŠ¶æ€ Animated.timing(this.state.rotateDeg, &#123; toValue: 0, duration: ANIMATE_DURATION, useNativeDriver: true, &#125;).start(); &#125; else &#123; // å½“å‰æ˜¯å…³é—­çŠ¶æ€ Animated.timing(this.state.rotateDeg, &#123; toValue: 1, duration: ANIMATE_DURATION, useNativeDriver: true, &#125;).start(); &#125; &#125;&#125; å½“ç‚¹å‡»å±•å¼€åˆ—è¡¨å…ƒç´ æ—¶ï¼Œè°ƒç”¨Animated.timingï¼Œä½¿å¾—å€¼æŒ‰ç…§è¿‡æ¸¡æ›²çº¿éšæ—¶é—´å˜åŒ–è€Œå˜åŒ–ï¼Œdurationè®¾ç½®åŠ¨ç”»çš„æ‰§è¡Œæ—¶é—´ï¼Œæœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š æ‰“åŒ…åŠä¸€äº›é—®é¢˜ æˆ‘ä»¬çš„Appå¼€å‘å®Œæˆåï¼Œå°±éœ€è¦è¿›è¡Œæ‰“åŒ…äº†ï¼Œè¿™é‡Œç®€å•çš„çœ‹ä¸‹ç¬”è€…é‡åˆ°çš„ä¸€äº›å‘ï¼Œå¸Œæœ›èƒ½å¤Ÿè®©å¤§å®¶åœ¨å¼€å‘æ—¶è§„é¿ç±»ä¼¼çš„å‘ã€‚ æ‰“åŒ…apkåè¿è¡Œé—ªé€€ æˆ‘ä»¬å¼€å‘æ—¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ‰“åŒ…æˆapkæ–‡ä»¶åï¼Œå…´å†²å†²çš„å®‰è£…ï¼Œç»“æœç°å®æ³¼äº†ä¸€ç›†å†·æ°´ï¼Œè¿è¡Œç›´æ¥é—ªé€€ï¼›æœç´¢ä¸€ç•ªåï¼Œè¯´æ˜¯index.android.bundleæ–‡ä»¶æ²¡æ­£å¸¸ç”Ÿæˆæ‰€è‡´ï¼Œæˆ‘ä»¬è¿è¡Œä¸€ä¸‹æ‰“åŒ…å‘½ä»¤ï¼Œé¦–å…ˆè¿›è¡Œjsæ–‡ä»¶çš„æ‰“åŒ…ï¼Œå†è¿è¡Œ./gradlew assembleReleaseæ‰“åŒ…ï¼š 1react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/app/src/main/assets/index.android.bundle --assets-dest android/app/src/main/res/ Duplicate resources æ‰“åŒ…æ—¶è¿˜ä¼šé‡åˆ°Duplicate resourcesæŠ¥é”™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯é‡å¤èµ„æºï¼š 12345:app:mergeReleaseResources FAILEDExecution failed for task &#x27;:app:mergeReleaseResources&#x27;./android/app/build/generated/res/react/release/drawable-XXXXï¼š Error: Duplicate resources ç½‘ä¸Šè¯´æ˜¯æ‰“åŒ…é—®é¢˜ï¼Œæ‰“å¼€node_modules/react-native/react.gradleæ–‡ä»¶ï¼Œåœ¨doFirstä»£ç æ®µåé¢æ–°å¢ä»¥ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526doFirst&#123; ... &#125;# æ–°å¢doLast &#123; def moveFunc = &#123; resSuffix -&gt; File originalDir = file(&quot;$&#123;resourcesDir&#125;/drawable-$&#123;resSuffix&#125;&quot;) if (originalDir.exists()) &#123; File destDir = file(&quot;$buildDir/../src/main/res/drawable-$&#123;resSuffix&#125;&quot;) ant.move(file: originalDir, tofile: destDir) &#125; &#125; def moveRawFunc = &#123; dir -&gt; File originalDir = file(&quot;$&#123;resourcesDir&#125;/$&#123;dir&#125;&quot;) if (originalDir.exists()) &#123; File destDir = file(&quot;$buildDir/../src/main/res/$&#123;dir&#125;&quot;) ant.move(file: originalDir, tofile: destDir) &#125; &#125; moveFunc.curry(&quot;ldpi&quot;).call() moveFunc.curry(&quot;mdpi&quot;).call() moveFunc.curry(&quot;hdpi&quot;).call() moveFunc.curry(&quot;xhdpi&quot;).call() moveFunc.curry(&quot;xxhdpi&quot;).call() moveFunc.curry(&quot;xxxhdpi&quot;).call() moveRawFunc.curry(&quot;raw&quot;).call()&#125; å‚è€ƒï¼š https://github.com/facebook/react-native/issues/22234 https://stackoverflow.com/questions/52668524/react-native-error-duplicate-resources-assets-coming-in-some-screens-and-not-c/52767101#52767101 https://stackoverflow.com/questions/47084810/react-native-android-duplicate-file-error-when-generating-apk ReanimatedæŠ¥é”™ react-native-reanimatedä¾èµ–æŠ¥é”™ï¼š 12345error: node_modules/react-native-reanimated/src/index.ts: /Users/tomekzaw/RNOS/Issue3397/node_modules/react-native-reanimated/src/index.ts: Export namespace should be first transformed by `@babel/plugin-proposal-export-namespace-from`. 5 | export * from &#x27;./reanimated1&#x27;; 6 | export * from &#x27;./reanimated2&#x27;;&gt; 7 | export * as default from &#x27;./Animated&#x27;; | ^^^^^^^^^^^^ æ‰“å¼€babelé…ç½®æ–‡ä»¶babel.config.jsï¼Œæ–°å¢å¦‚ä¸‹æ’ä»¶: 1234module.exports = &#123; presets: [&#x27;module:metro-react-native-babel-preset&#x27;],+ plugins: [&#x27;react-native-reanimated/plugin&#x27;],&#125;; å‚è€ƒï¼šhttps://github.com/software-mansion/react-native-reanimated/issues/3410 FingerprintScanner react-native-fingerprint-scanneræ‰“åŒ…æ—¶æŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12345678FAILURE: Build failed with an exception.* What went wrong:Execution failed for task &#x27;:app:checkDebugAarMetadata&#x27;.&gt; Could not resolve all files for configuration &#x27;:app:debugRuntimeClasspath&#x27;. &gt; Could not find com.wei.android.lib:fingerprintidentify:1.2.6. Required by: project :app &gt; project :react-native-fingerprint-scanner build.gradleæ–°å¢jcenter() å‚è€ƒï¼šhttps://github.com/hieuvp/react-native-fingerprint-scanner/issues/192 æ€»ç»“ æˆ‘ä»¬çš„è‡ªç ”Appåˆ°è¿™é‡ŒåŸºæœ¬å°±ç»“æŸäº†ï¼Œè¯¥æœ‰çš„åŠŸèƒ½ä¹Ÿéƒ½æœ‰äº†ï¼›å½“ç„¶åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¹Ÿé‡åˆ°äº†ä¸å°‘å‘ï¼Œå¥½å‡ ä¸ªä¾èµ–åŒ…å®‰è£…å’Œè¿è¡Œä¸­éƒ½å‡ºç°äº†å¤§å¤§å°å°ä¸åŒçš„é—®é¢˜ï¼Œä¸Šé¢çš„bugåˆ—è¡¨åªæ˜¯åˆ—ä¸¾äº†ä¸€äº›å…¸å‹çš„é—®é¢˜ï¼›åªè¦æˆ‘ä»¬åˆ©ç”¨å¥½Githubå’ŒStack Overflowï¼Œæ€»èƒ½æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚ æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åˆ°Githubç»™ä¸ªStarï¼Œæœ‰å¥½çš„æƒ³æ³•å’Œæ”¹è¿›å»ºè®®ä¹Ÿæ¬¢è¿æç»™æˆ‘ï¼›æœ¬Appåªå°†æ•°æ®ä¿å­˜åœ¨æœ¬åœ°ï¼Œæ²¡æœ‰ä¸Šä¼ æœåŠ¡å™¨ï¼Œå› æ­¤å¤§å®¶å¯ä»¥æ”¾å¿ƒä½¿ç”¨ï¼›å¦‚æœæƒ³è¦ä½“éªŒï¼Œè¯·åœ¨å…¬ä¼—å·ã€å‰ç«¯å£¹è¯»ã€‘åå°å›å¤å…³é”®è¯å®‰å…¨å¯†ç ç®±å³å¯è·å–Appçš„å®‰è£…åŒ…ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"ç§»åŠ¨ç«¯","slug":"Apps","permalink":"https://xieyufei.com/tags/Apps/"},{"name":"React","slug":"React","permalink":"https://xieyufei.com/tags/React/"},{"name":"ReactNative","slug":"ReactNative","permalink":"https://xieyufei.com/tags/ReactNative/"}]},{"title":"æ·±å…¥å­¦ä¹ React Nativeä¹‹è·¯ç”±å¯¼èˆª","date":"2022-07-22T05:14:15.000Z","path":"2022/07/22/React-Native-Router.html","text":"è·¯ç”±æ˜¯å‰ç«¯é¡¹ç›®ä¸€ä¸ªé‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå› ä¸ºæˆ‘ä»¬é¡¹ç›®éƒ½æ˜¯ç”±å¤šä¸ªé¡µé¢ç»„æˆï¼Œå³ä½¿å•é¡µé¢é¡¹ç›®ä¹Ÿä¼šæœ‰è·¯ç”±ï¼Œå¤šä¸ªé¡µé¢ä¹‹é—´è·³è½¬å°±æ˜¯é€šè¿‡è·¯ç”±æˆ–è€…å¯¼èˆªå™¨æ¥å®ç°çš„ã€‚åœ¨RN 0.44ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„Navigatorç»„ä»¶æ¥å®ç°è·³è½¬ï¼›ä»0.44ç‰ˆæœ¬å¼€å§‹ï¼ŒNavigatorè¢«å®˜æ–¹ä»RNçš„æ ¸å¿ƒç»„ä»¶åº“ä¸­å‰¥ç¦»å‡ºæ¥ï¼Œä¸»æ¨çš„ä¸€ä¸ªå¯¼èˆªåº“å°±æ˜¯React Navigationï¼Œå®ƒæ€§èƒ½ä¹Ÿå¾ˆæ¥è¿‘åŸç”Ÿï¼Œæˆ‘ä»¬ä»Šå¤©å°±æ¥å­¦ä¹ ä¸‹å®ƒçš„ç”¨æ³•ã€‚ è·¯ç”± React Navigationåº“æ¯ä¸ªç‰ˆæœ¬çš„æ”¹åŠ¨è¿˜æ˜¯æŒºå¤§çš„ï¼Œæ¯”å¦‚3.xåˆ›å»ºå †æ ˆå¯¼èˆªå’Œåˆ›å»ºé€‰é¡¹å¡å¯¼èˆªéƒ½æ˜¯ç›´æ¥åœ¨react-navigationåº“ä¸­å¯¼å‡ºcreateå‡½æ•°ï¼Œè€Œ4.xä¸­å †æ ˆè·¯ç”±æ˜¯ä»react-navigation-stackè¿™ä¸ªåº“å¯¼å‡ºï¼Œ5.xç‰ˆæœ¬åº“ååˆæ”¹æˆäº†@react-navigation/stackï¼Œ6.xç‰ˆæœ¬åˆåŒå’å•æ”¹æˆ@react-navigation/native-stackï¼Œå› æ­¤å¯¹æ–°æ‰‹åŠå…¶ä¸å‹å¥½ï¼Œå¾ˆå®¹æ˜“è®©äººçœ‹äº†å¤´å¤§ã€‚ ä¸è¿‡å¥½åœ¨å¯¼èˆªæ–¹å¼ä¸»è¦æ˜¯ä¸‰ç§ï¼šå †æ ˆå¯¼èˆªï¼ˆStackNavigatorï¼‰ã€é€‰é¡¹å¡å¯¼èˆªï¼ˆTabNavigatorï¼‰å’ŒæŠ½å±‰å¯¼èˆªï¼ˆDrawerNavigatorï¼‰ï¼Œè€Œä¸”å¯¼èˆªæ–¹å¼ã€ä¼ å‚éƒ½å¤§å·®ä¸å·®ï¼Œå› æ­¤æœ¬æ–‡ä¸»è¦ä»¥ç›®å‰æœ€æ–°çš„6.xä¸ºä¾‹ã€‚ å †æ ˆå¯¼èˆª å †æ ˆå¯¼èˆªæ˜¯æ¯”è¾ƒå¸¸è§çš„å¯¼èˆªæ–¹å¼ï¼Œä¸ºåº”ç”¨ç¨‹åºåœ¨ä¸åŒå±å¹•ä¹‹é—´è½¬æ¢æä¾›å¯¼èˆªå’Œç®¡ç†çš„æ–¹å¼ï¼›å…¶æœ‰äº›ç±»ä¼¼äºwebæµè§ˆå™¨å¤„ç†å¯¼èˆªçŠ¶æ€çš„æ–¹å¼ã€‚é¦–å…ˆæˆ‘ä»¬å®‰è£…ä¸€äº›ä¾èµ–ï¼š 12345678# å®‰è£…å¯¼èˆªçš„æ ¸å¿ƒåº“yarn add @react-navigation/native# å®‰è£…å¯¼èˆªçš„å¤–éƒ¨ä¾èµ–åº“yarn add react-native-screens react-native-safe-area-context# å®‰è£…å †æ ˆå¯¼èˆªçš„ä¸»è¦åº“yarn add @react-navigation/native-stack è¦åœ¨é¡¹ç›®é‡Œä½¿ç”¨å¯¼èˆªï¼Œæˆ‘ä»¬é¦–å…ˆè¦åœ¨é¡¹ç›®çš„æ ¹ç»„ä»¶åˆ›å»ºä¸€ä¸ªè·¯ç”±å¯¼èˆªå®¹å™¨ï¼Œå°†æˆ‘ä»¬çš„è·¯ç”±éƒ½åŒ…è£¹ï¼ˆä¸€èˆ¬æ˜¯åœ¨App.jsä¸­ï¼‰ï¼Œæœ‰ç‚¹ç±»ä¼¼äºVueçš„&lt;router-view /&gt;ï¼š 12345678910import * as React from &#x27;react&#x27;;import &#123; NavigationContainer &#125; from &#x27;@react-navigation/native&#x27;;export default function App() &#123; return ( &lt;NavigationContainer&gt; &#123;/* å¯¼èˆªç»„ä»¶ */&#125; &lt;/NavigationContainer&gt; );&#125; æˆ‘ä»¬å¯¼å‡ºcreateNativeStackNavigatorå‡½æ•°ï¼Œç”¨äºé…ç½®å †æ ˆè·¯ç”±çš„ç®¡ç†ï¼›å®ƒè¿”å›äº†åŒ…å«ä¸¤ä¸ªç»„ä»¶çš„å¯¹è±¡ï¼šScreenå’ŒNavigatorï¼Œä»–ä»¬éƒ½æ˜¯é…ç½®å¯¼èˆªå™¨æ‰€éœ€çš„Reactç»„ä»¶ï¼Œå…¶ä¸­Screenç»„ä»¶æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œä¼šå¢å¼ºpropsï¼›åœ¨ä½¿ç”¨çš„é¡µé¢ä¸­ï¼Œä¼šæºå¸¦navigationå¯¹è±¡å’Œrouteå¯¹è±¡ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šä»‹ç»è¿™ä¸¤ä¸ªå¯¹è±¡çš„ç”¨æ³•ã€‚ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªStackRouter.jsï¼Œå°†æ‰€æœ‰çš„å †æ ˆå¯¼èˆªé…ç½®ç»Ÿä¸€åœ¨è¿™ä¸ªæ–‡ä»¶é…ç½®ï¼š 1234567891011121314151617181920// StackRouter.jsimport &#123;createNativeStackNavigator&#125; from &#x27;@react-navigation/native-stack&#x27;;const Stack = createNativeStackNavigator();function HomeScreen() &#123; return ( &lt;View style=&#123;&#123; flex: 1, alignItems: &#x27;center&#x27;, justifyContent: &#x27;center&#x27; &#125;&#125;&gt; &lt;Text&gt;Home Screen&lt;/Text&gt; &lt;/View&gt; );&#125;export default function StackRouter() &#123; return ( &lt;Stack.Navigator&gt; &lt;Stack.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; /&gt; &lt;/Stack.Navigator&gt; );&#125; åœ¨æ ¹ç»„ä»¶ä¸­å¼•å…¥æˆ‘ä»¬çš„å †æ ˆå¯¼èˆªç»„ä»¶å³å¯ï¼š 123456789// App.jsimport StackRouter from &#x27;./src/StackRouter&#x27;;export default function App() &#123; return ( &lt;NavigationContainer&gt; &lt;StackRouter&gt;&lt;/StackRouter&gt; &lt;/NavigationContainer&gt; );&#125; æˆ‘ä»¬çš„ç¨‹åºå¾ˆå¤šæ—¶å€™éƒ½ä¸æ­¢ä¸€ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å †æ ˆå¯¼èˆªä¸­ç»§ç»­åŠ å…¥å…¶ä»–çš„åˆ—è¡¨é¡µã€è¯¦æƒ…é¡µç­‰ç­‰ï¼›initialRouteNameé…ç½®åˆå§‹åŒ–çš„è·¯ç”±ï¼Œå¯ä»¥è®¾ç½®æˆéç¬¬ä¸€ä¸ªScreené¡µé¢ï¼š 12345678910111213141516171819// StackRouter.jsexport default function StackRouter() &#123; return ( &lt;Stack.Navigator initialRouteName=&quot;Home&quot;&gt; &lt;Stack.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; /&gt; &lt;Stack.Screen name=&quot;List&quot; component=&#123;ListScreen&#125; /&gt; &lt;Stack.Screen name=&quot;Detail&quot; component=&#123;DetailScreen&#125; /&gt; &lt;/Stack.Navigator&gt; );&#125; æˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªè·¯ç”±ä¸Šé€šè¿‡optionsé…ç½®ä¸åŒå‚æ•°ï¼Œæ¯”å¦‚æ ‡é¢˜ã€å¯¼èˆªæ é¢œè‰²ç­‰ï¼š 1234567891011&lt;Stack.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; options=&#123;&#123; title: &#x27;é¦–é¡µ&#x27;, headerStyle: &#123; height: 80, backgroundColor: &#x27;#2196F3&#x27;, &#125;, &#125;&#125;/&gt; æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦ç»™ä¸€ä¸ªé¡µé¢ä¼ å…¥é¢å¤–çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé¡µé¢ç»„ä»¶æ”¾åˆ°ä¸Šä¸‹æ–‡ä¸­åŒ…è£¹ï¼Œå¹¶ä¼ å…¥propsï¼š 123&lt;Stack.Screen name=&quot;Home&quot;&gt; &#123;(props) =&gt; &lt;HomeScreen &#123;...props&#125; extraData=&#123;someData&#125; /&gt;&#125;&lt;/Stack.Screen&gt; ä¸Šé¢çš„ç”¨æ³•åœ¨é…ç½®åŒä¸€ä¸ªé¡µé¢ä¸åŒè·¯å¾„æ—¶ä¼šå¾ˆæœ‰ç”¨ï¼›æ¯”å¦‚æˆ‘ä»¬çš„æ–°å»ºå’Œç¼–è¾‘é¡µé¢å¯ä»¥åšæˆä¸€ä¸ªé¡µé¢ï¼Œé…ç½®ä¸åŒè·¯ç”±é€šè¿‡ä¼ å…¥é¢å¤–çš„å‚æ•°å¯¹ä¸¤ä¸ªé¡µé¢è¿›è¡ŒåŒºåˆ†ã€‚ è·¯ç”±è·³è½¬ åœ¨ä¸åŒé¡µé¢é—´ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œè·¯ç”±è·³è½¬ï¼›æˆ‘ä»¬ä¸Šé¢è¯´è¿‡ï¼Œåœ¨æ‰€æœ‰çš„é¡µé¢ç»„ä»¶ä¸­ï¼Œéƒ½ä¼šæºå¸¦ä¸€ä¸ªnavigationå¯¹è±¡ï¼Œå®ƒæ˜¯react-navigationæ³¨å…¥çš„è·¯ç”±å¯¹è±¡ï¼Œå®ƒä¸Šé¢æœ‰å¾ˆå¤šçš„å‡½æ•°ï¼Œå¯ä»¥è¿›è¡Œä¸åŒå½¢å¼çš„è·³è½¬ã€‚ å¦‚æœæˆ‘ä»¬è·³è½¬åˆ°æœªå®šä¹‰çš„è·¯ç”±ï¼Œåœ¨å¼€å‘ç‰ˆæœ¬ä¸­ä¼šæŠ¥é”™ï¼Œè€Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹ï¼Œ æˆ‘ä»¬è°ƒç”¨navigation.navigate()å‡½æ•°æ¥è·³è½¬ï¼Œç›´æ¥ä¼ å…¥Stack.Navigatorä¸­å®šä¹‰è·¯ç”±ånameï¼š 1234&lt;Button onPress=&#123;() =&gt; this.props.navigation.navigate(&#x27;List&#x27;)&#125; title=&quot;Go List&quot;&gt;&lt;/Button&gt; å¦‚æœæˆ‘ä»¬åœ¨Liståˆ—è¡¨é¡µä¹Ÿè°ƒç”¨navigate(&#39;List&#39;)ï¼Œæˆ‘ä»¬å‘ç°ä¸ä¼šäº§ç”Ÿä»»ä½•çš„æ•ˆæœï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨åˆ—è¡¨é¡µé¢äº†ã€‚navigateçš„å«ä¹‰æ˜¯è·³åˆ°è¿™ä¸ªé¡µé¢ï¼Œæœ‰ç‚¹ç±»ä¼¼vue-routerçš„router.replaceã€‚ å¦‚æœæˆ‘ä»¬ç¡®å®æƒ³è¦æ‰“å¼€å¤šä¸ªé¡µé¢ï¼Œå¯ä»¥å°†navigateæ”¹æˆpushï¼š 1234&lt;Button onPress=&#123;() =&gt; this.props.navigation.push(&#x27;List&#x27;)&#125; title=&quot;Go List Again&quot;&gt;&lt;/Button&gt; æ¯æ¬¡æˆ‘ä»¬è°ƒç”¨pushï¼Œéƒ½ä¼šåœ¨å†å²è®°å½•ä¸­æ–°å¢ä¸€æ¡è®°å½•ï¼Œè¿™ä¹Ÿå°±æ˜¯å †æ ˆå¯¼èˆªçš„ç”±æ¥ï¼›è€Œè°ƒç”¨navigateï¼Œå®ƒä¼šå°è¯•åœ¨ç°åœ¨çš„è·¯ç”±å †æ ˆä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ªè·¯ç”±ï¼Œæ²¡æœ‰çš„è¯æ‰ä¼šæ–°å¢ã€‚ åœ¨å †æ ˆå¯¼èˆªçš„é¡¶éƒ¨æœ‰ä¸€ä¸ªè¿”å›æŒ‰é’®ï¼Œç‚¹å‡»åå¯ä»¥è¿”å›ä¸Šä¸€ä¸ªé¡µé¢ï¼Œæˆ‘ä»¬ä¹Ÿè°ƒç”¨navigation.goBack()æ¥è§¦å‘è¿”å›ï¼š 1234&lt;Button onPress=&#123;() =&gt; this.props.navigation.goBack()&#125; title=&quot;Go Back&quot;&gt;&lt;/Button&gt; æœ‰æ—¶å€™å †æ ˆå¯¼èˆªçš„å±‚çº§å¾ˆæ·±ï¼Œæˆ‘ä»¬éœ€è¦ç©¿è¶Šå¥½å‡ ä¸ªé¡µé¢æ‰èƒ½è¿”å›åˆ°ç¬¬ä¸€ä¸ªé¡µé¢ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹å¦‚æœæˆ‘ä»¬æ˜ç¡®çš„çŸ¥é“æˆ‘ä»¬æƒ³è¦å›åˆ°çš„æ˜¯Homeé¡µï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨navigation.navigate(&#39;Home&#39;)ï¼Œæ¸…é™¤æ‰€æœ‰çš„è·¯ç”±å¹¶ä¸”å›åˆ°Homeã€‚ å¦ä¸€ç§æ–¹å¼æ˜¯è°ƒç”¨navigation.popToTop()ï¼Œè¿™æ ·å°†æ¸…é™¤è·¯ç”±å †æ ˆå¹¶å›åˆ°å †æ ˆçš„ç¬¬ä¸€ä¸ªé¡µé¢ã€‚ 1234567891011121314function ListScreen(&#123;navigation&#125;) &#123; return ( &lt;View style=&#123;&#123;flex: 1, alignItems: &#x27;center&#x27;, justifyContent: &#x27;center&#x27;&#125;&#125;&gt; &lt;Text&gt;List Screen&lt;/Text&gt; &lt;Button onPress=&#123;() =&gt; navigation.push(&#x27;List&#x27;)&#125; title=&quot;Push List&quot;&gt;&lt;/Button&gt; &lt;Button onPress=&#123;() =&gt; navigation.navigate(&#x27;Home&#x27;)&#125; title=&quot;Go Home&quot;&gt;&lt;/Button&gt; &lt;Button onPress=&#123;() =&gt; navigation.popToTop()&#125; title=&quot;Popup&quot;&gt;&lt;/Button&gt; &lt;/View&gt; );&#125; ä¼ é€’å‚æ•° æˆ‘ä»¬å·²ç»åˆ›å»ºäº†å¤šä¸ªé¡µé¢å¹¶ä¸”åœ¨é¡µé¢ä¹‹é—´è¿›è¡Œè·³è½¬ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¼ é€’ä¸åŒçš„å‚æ•°ï¼›ä¾‹å¦‚ä»åˆ—è¡¨é¡µåˆ°è¯¦æƒ…é¡µéœ€è¦ä¼ idï¼Œæˆ‘ä»¬å°†éœ€è¦ä¼ é€’çš„æ•°æ®ä½œä¸ºnavigateå‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚ 123456789101112131415function ListScreen(&#123;navigation&#125;) &#123; return ( &lt;View&gt; &lt;Button title=&quot;Go to Details&quot; onPress=&#123;() =&gt; &#123; navigation.navigate(&#x27;Details&#x27;, &#123; id: 86, otherParam: &#x27;anything you want here&#x27;, &#125;); &#125;&#125; /&gt; &lt;/View&gt; );&#125; routeå¯¹è±¡æ˜¯Screenç»„ä»¶å¢å¼ºçš„propsï¼Œå®ƒé‡Œé¢åŒ…å«ä¸€ä¸ªå±æ€§paramsï¼Œå°±æ˜¯ç”¨æ¥æ¥å—ä¼ é€’è¿‡æ¥çš„å‚æ•°ï¼š 12345678910function DetailsScreen(&#123;route, navigation&#125;) &#123; const &#123;id, otherParam&#125; = route.params; return ( &lt;View&gt; &lt;Text&gt;Details Screen&lt;/Text&gt; &lt;Text&gt;id: &#123;id&#125;&lt;/Text&gt; &lt;Text&gt;otherParam: &#123;otherParam&#125;&lt;/Text&gt; &lt;/View&gt; );&#125; é¡µé¢ä¹Ÿèƒ½æ›´æ–°è‡ªå·±çš„å‚æ•°ï¼Œå°±åƒæ›´æ–°stateçŠ¶æ€ä¸€æ ·ï¼›é€šè¿‡navigation.setParamsè¿›è¡Œæ›´æ–°ï¼š 123navigation.setParams(&#123; otherParam: &#x27;someText&#x27;,&#125;); åœ¨ä¼ é€’å‚æ•°æ—¶ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªæ•°æ®ä¼ è¿‡å»ï¼Œä¾‹å¦‚ä¸‹é¢çš„æ–¹å¼ï¼š 123456789// é¿å…è¿™æ ·çš„å†™æ³•navigation.navigate(&#x27;Detail&#x27;, &#123; user: &#123; id: &#x27;18&#x27;, firstName: &#x27;Jane&#x27;, lastName: &#x27;Done&#x27;, age: 25, &#125;,&#125;); æˆ‘ä»¬æ¥æ”¶çš„æ—¶å€™ä¹Ÿçœ‹ä¼¼å¾ˆæ–¹ä¾¿çš„å¯ä»¥é€šè¿‡route.params.userå°±èƒ½è·å–åˆ°æ•°æ®ï¼›ä½†æ˜¯è¿™æ˜¯ä¸€ç§åæ¨¡å¼ï¼Œä¾‹å¦‚ç”¨æˆ·æ•°æ®ç­‰ï¼Œåº”è¯¥é€šè¿‡æ¥å£è·å–ï¼Œæˆ–è€…æ”¾åœ¨å…¨å±€çš„ç”¨æˆ·åˆ—è¡¨ä¸­ï¼Œç„¶åé€šè¿‡idè¿›è¡Œè·å–ã€‚ 1navigation.navigate(&#x27;Profile&#x27;, &#123; userId: &#x27;18&#x27; &#125;); å¯¼èˆªæ é…ç½® æˆ‘ä»¬åœ¨ä¸Šé¢ä»‹ç»äº†é…ç½®å¯¼èˆªæ çš„æ ‡é¢˜ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹ä¸‹optionsè¿˜æœ‰å“ªäº›ç”¨æ³•ï¼›å®ƒé™¤äº†æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿˜å¯ä»¥æ¥æ”¶ä¸€ä¸ªè¿”å›å¯¹è±¡çš„å‡½æ•°ï¼›å‡½æ•°çš„æ–¹å¼å¯ä»¥æ¥æ”¶navigationå’Œrouteä¸¤ä¸ªå‚æ•°ï¼Œè¿™ç§æ–¹å¼ä¼šå¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨è®¾ç½®å¯¼èˆªæ çš„ç»„ä»¶æ—¶ï¼Œè·å–è¿™ä¸¤ä¸ªå‚æ•°è¿›è¡Œè·³è½¬æ“ä½œã€‚ 12345678910111213141516171819&lt;Stack.Navigator&gt; &lt;Stack.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; options=&#123;(&#123;navigation, route&#125;) =&gt; &#123; return &#123; headerTitle: () =&gt; ( &lt;View&gt; &lt;Text&gt;æ ‡é¢˜ï¼š&#123;route.params.title&#125;&lt;/Text&gt; &lt;/View&gt; ), headerRight: () =&gt; ( &lt;Button title=&quot;Go List&quot; onPress=&#123;() =&gt; navigation.navigate(&#x27;List&#x27;)&#125;&gt;&lt;/Button&gt; ), &#125;; &#125;&#125;&gt;&lt;/Stack.Screen&gt;&lt;/Stack.Navigator&gt; headerTitleå¯ä»¥è¦†å†™æ ‡é¢˜ç»„ä»¶ï¼Œæ›¿æ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„ï¼›headerRightå®šä¹‰å¯¼èˆªæ å³ä¾§çš„ç»„ä»¶ï¼Œå¯ä»¥æ˜¯ä¸€äº›åŠŸèƒ½æ€§çš„ï¼Œæ¯”å¦‚è®¾ç½®ã€å¸®åŠ©ç­‰ç­‰ï¼Œå¯èƒ½ä¼šæ¶‰åŠè·¯ç”±çš„è·³è½¬ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†optionsè®¾ç½®æˆå‡½æ•°çš„å½¢å¼ã€‚ æˆ‘ä»¬å¯ä»¥è°ƒæ•´å¯¼èˆªæ æ ‡é¢˜çš„æ ·å¼ï¼Œé€šè¿‡ä¸‹é¢ä¸‰ä¸ªå‚æ•°ï¼š headerStyleï¼šæ•´ä¸ªæ ‡é¢˜çš„æ ·å¼ï¼Œå¯ä»¥è®¾ç½®backgroundColorèƒŒæ™¯é¢œè‰²ã€‚ headerTintColorï¼šè¿”å›æŒ‰é’®å’Œæ ‡é¢˜æ–‡å­—çš„é¢œè‰²ã€‚ headerTitleStyleï¼šæ ‡é¢˜æ–‡å­—çš„æ ·å¼ï¼Œå¯ä»¥è®¾ç½®fontFamilyå’ŒfontWeightã€‚ æˆ‘ä»¬è‚¯å®šå¸Œæœ›æˆ‘ä»¬çš„Appå¤§éƒ¨åˆ†çš„å¯¼èˆªæ éƒ½æ˜¯ç›¸åŒæ ·å¼ï¼Œæœ‰ä¸ªåˆ«æ ·å¼éœ€è¦å®šåˆ¶ï¼›æˆ‘ä»¬å°†Optionsç§»åŠ¨åˆ°Stack.Navigatorçš„screenOptionsä¸Šï¼š 123456789101112131415&lt;Stack.Navigator screenOptions=&#123;&#123; headerStyle: &#123; backgroundColor: &#x27;#f4511e&#x27;, &#125;, headerTintColor: &#x27;#fff&#x27;, headerTitleStyle: &#123; fontWeight: &#x27;bold&#x27;, &#125;, &#125;&#125;&gt; &lt;Stack.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; &gt;&lt;/Stack.Screen&gt;&lt;/Stack.Navigator&gt; è¿™æ ·ï¼Œæ‰€æœ‰çš„å¯¼èˆªæ çš„é…ç½®éƒ½æ˜¯ç›¸åŒçš„äº†ï¼›æœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦å’Œå¯¼èˆªæ äº’åŠ¨ï¼Œä¿®æ”¹å¯¼èˆªæ çš„é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨navigation.setOptionsæ¥é‡æ–°è®¾ç½®optionsã€‚ 123456789function HomeScreen(&#123; navigation &#125;)&#123; return ( &lt;View&gt; &lt;Button title=&quot;Update&quot; onPress=&#123;()=&gt; navigation.setOptions(&#123; title: &#x27;New Home&#x27;, headerRight: () =&gt; &lt;Button title=&quot;Setting&quot;&gt;&lt;/Button&gt;, &#125;)&#125;&gt;&lt;/Button&gt; &lt;/View&gt;)&#125; å¯¼èˆªçš„ç”Ÿå‘½å‘¨æœŸ åœ¨ä¸Šä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸åŒçš„é¡µé¢ä¸­è¿›è¡Œå¯¼èˆªè·³è½¬ï¼Œå½“æˆ‘ä»¬ä»aé¡µé¢å»bé¡µé¢æ—¶ï¼Œæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½çŸ¥é“å³å°†è¦ç¦»å¼€aé¡µé¢ï¼Ÿä»bé¡µé¢è¿”å›æ—¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ›´æ–°aé¡µé¢ä¸­çš„æ•°æ®ï¼Œé‚£æˆ‘ä»¬åœ¨aé¡µé¢å¦‚ä½•ç›‘å¬å‘¢ï¼Ÿ å¾ˆå¤šåŒå­¦ä¼šç†æ‰€å½“ç„¶çš„è®¤ä¸ºç¦»å¼€aé¡µé¢æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨componentWillUnmountå¤„ç†å¯ä»¥äº†ï¼›ä½†æ˜¯å®é™…ä¸Šï¼Œaé¡µé¢åªæ˜¯æš‚æ—¶çš„éšè—åˆ°åå°äº†ï¼Œå®ƒå¹¶æ²¡æœ‰è¢«é”€æ¯ï¼Œå§‹ç»ˆä¿æŒäº†æŒ‚è½½çŠ¶æ€ï¼Œå› æ­¤å®ƒçš„componentWillUnmountå¹¶ä¸ä¼šè¢«è°ƒç”¨ï¼›è€Œbé¡µé¢åˆ™æ˜¯ä¼šè¿›å…¥æ—¶åˆ›å»ºï¼Œè¿”å›æ—¶è¢«é”€æ¯ã€‚ é€‰é¡¹å¡å¯¼èˆªåœ¨æ“ä½œæ—¶ä¹Ÿä¼šè§‚å¯Ÿåˆ°ç±»ä¼¼çš„æƒ…å†µï¼Œç”±äºå®ƒæœ‰å¤šä¸ªtabé¡µï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæƒ³è±¡æˆå¤šä¸ªå †æ ˆå¯¼èˆªï¼Œå®ƒçš„æ¯ä¸ªtabåˆ‡æ¢æ—¶ä¹Ÿåªæ˜¯å°†é¡µé¢éšè—ï¼Œå¹¶ä¸ä¼šé”€æ¯ã€‚é‚£æˆ‘ä»¬æ€ä¹ˆå›åˆ°åˆšå¼€å§‹çš„é—®é¢˜ï¼Œå¦‚ä½•å‘ç°ç”¨æˆ·åœ¨è¿›å…¥å®ƒå’Œç¦»å¼€å®ƒå‘¢ï¼Ÿ æˆ‘ä»¬é€šè¿‡navigationå¯¼èˆªæ¥è®¢é˜…ç›¸å…³çš„äº‹ä»¶ï¼Œé€šè¿‡ç›‘å¬å¯¹åº”çš„äº‹ä»¶æ¥äº†è§£é¡µé¢ä½•æ—¶è¿›å…¥ä»¥åŠç¦»å¼€ã€‚ 12345678910111213export default class Screen extends Component &#123; constructor(props) &#123; super(props); &#125; componentDidMount()&#123; this.props.navigation.addListener(&#x27;focus&#x27;, () =&gt; &#123; console.log(&#x27;é¡µé¢è¿›å…¥&#x27;); &#125;); this.props.navigation.addListener(&#x27;blur&#x27;, () =&gt; &#123; console.log(&#x27;é¡µé¢ç¦»å¼€&#x27;); &#125;); &#125;&#125; navigationæ”¯æŒä»¥ä¸‹äº”ç§äº‹ä»¶ï¼š focusï¼šå½“å±å¹•èšç„¦æ—¶ã€‚ blurï¼šå½“å±å¹•å¤±å»ç„¦ç‚¹æ—¶ã€‚ stateï¼šå½“å¯¼èˆªå™¨çš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œé€šè¿‡eventæ¥æ”¶æ–°çš„çŠ¶æ€(event.data.state)ã€‚ beforeRemoveï¼šå½“ç”¨æˆ·è¦ç¦»å¼€é¡µé¢æ—¶ï¼Œå¯ä»¥é˜»æ­¢ç”¨æˆ·ç¦»å¼€ã€‚ tabPressï¼šç‚¹å‡»tabé¡µé¢åˆ‡æ¢ navigation.addListenerè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¯ä»¥åœ¨ç»„ä»¶é”€æ¯æ—¶è°ƒç”¨æ¥å–æ¶ˆè®¢é˜…çš„äº‹ä»¶ï¼š 12345678910111213export default class Screen extends Component &#123; constructor(props) &#123; super(props); &#125; componentDidMount()&#123; this._focus = this.props.navigation.addListener(&#x27;focus&#x27;, () =&gt; &#123; // .... &#125;); &#125; componentWillUnmount()&#123; this._focus() &#125;&#125; é€‰é¡¹å¡å¯¼èˆª æˆ‘ä»¬å†æ¥çœ‹ä¸‹å¦ä¸€ç§å¸¸è§çš„å¯¼èˆªæ–¹å¼ï¼šé€‰é¡¹å¡å¯¼èˆªï¼›æˆ‘ä»¬åœ¨å¸¸ç”¨çš„Appä¸­éƒ½èƒ½çœ‹åˆ°è¿™ç§å¯¼èˆªæ–¹å¼ï¼Œå¦‚å¾®ä¿¡ã€çŸ¥ä¹ã€æŸä¸œã€æŸçŒ«åº•éƒ¨å¯¼èˆªï¼Œåœ¨å±å¹•åº•éƒ¨æ˜¾ç¤ºä¸‰åˆ°äº”ä¸ªAppçš„ä¸»è¦æ¿å—ï¼Œèƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„è®©ç”¨æˆ·åœ¨ç›®æ ‡æ¿å—ä¹‹é—´è¿›è¡Œåˆ‡æ¢æ“ä½œï¼Œé¿å…è·¯ç”±å±‚æ¬¡è¿‡æ·±ã€‚ React Natigationä¸­ä¸»è¦ä½¿ç”¨çš„é€‰é¡¹å¡å¯¼èˆªå°±æ˜¯@react-navigation/bottom-tabsï¼Œå…¶ä»–çš„è¿˜æœ‰ä¸‹é¢è¿™ç§materialé£æ ¼çš„ï¼š materialé£æ ¼ä¸»è¦æ˜¯@react-navigation/material-bottom-tabså’Œ@react-navigation/material-top-tabsï¼Œä½¿ç”¨æ–¹æ³•éƒ½å¤§åŒå°å¼‚ï¼Œåªæ˜¯é£æ ¼ä¸åŒï¼Œéœ€è¦å’ŒAppæ•´ä½“çš„é£æ ¼åè°ƒã€‚æˆ‘ä»¬å›åˆ°bottom-tabsï¼Œé¦–å…ˆéœ€è¦è¿›è¡Œå®‰è£…ï¼š 123npm install @react-navigation/bottom-tabs# æˆ–è€…yarn add @react-navigation/bottom-tabs æˆ‘ä»¬çœ‹ä¸‹bottom-tabsçš„ç®€å•ä½¿ç”¨æ¡ˆä¾‹ï¼š 12345678910111213const Tab = createBottomTabNavigator();import &#123;createBottomTabNavigator&#125; from &#x27;@react-navigation/bottom-tabs&#x27;;class TabRouter extends Component &#123; render() &#123; return ( &lt;Tab.Navigator&gt; &lt;Tab.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; /&gt; &lt;Tab.Screen name=&quot;List&quot; component=&#123;ListScreen&#125; /&gt; &lt;/Tab.Navigator&gt; ) &#125;&#125; è¿™æ ·æˆ‘ä»¬çœ‹åˆ°åº•éƒ¨å¤šäº†ä¸¤ä¸ªtabæŒ‰é’®ï¼Œä½†æ˜¯æ²¡æœ‰iconï¼Œæ¯”è¾ƒç®€é™‹ï¼›è¿™é‡Œå¼•å…¥react-native-vector-iconsè¿™ä¸ªåº“ï¼ŒåŒ…å«å¾ˆå¤šiconå›¾æ ‡ã€‚éµå¾ªå®‰è£…æ•™ç¨‹å®‰è£…å¥½åï¼Œæˆ‘ä»¬åœ¨å®ƒçš„ä¸»é¡µä¸Šï¼Œæ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„iconï¼Œè¿™é‡ŒåŒ…å«äº†AntDesignã€FontAwesomeã€Ioniconsã€MaterialIconsç­‰ä¸€ä¼—ä¸°å¯Œçš„å›¾æ ‡ã€‚ æˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªtabè®¾ç½®å•ç‹¬çš„optionsï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ç»Ÿä¸€ï¼Œæˆ‘ä»¬åœ¨Tab.Navigatorä¸Šçš„screenOptionsé›†ä¸­é…ç½®ï¼š 1234567891011121314151617181920import Ionicons from &#x27;react-native-vector-icons/Ionicons&#x27;;&lt;Tab.Navigator screenOptions=&#123;(&#123;route&#125;) =&gt; (&#123; tabBarActiveTintColor: &#x27;tomato&#x27;, tabBarInactiveTintColor: &#x27;gray&#x27;, tabBarIcon: (&#123;focused, color, size&#125;) =&gt; &#123; let iconName; if (route.name === &#x27;Home&#x27;) &#123; iconName = focused ? &#x27;home&#x27;: &#x27;home-outline&#x27;; &#125; if (route.name === &#x27;List&#x27;) &#123; iconName = focused ? &#x27;list-circle&#x27;: &#x27;list-circle-outline&#x27;; &#125; return &lt;Ionicons name=&#123;iconName&#125; size=&#123;size&#125; color=&#123;color&#125; /&gt;; &#125;, &#125;)&#125;&gt; &lt;Tab.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; /&gt; &lt;Tab.Screen name=&quot;List&quot; component=&#123;ListScreen&#125; /&gt;&lt;/Tab.Navigator&gt; tabBarActiveTintColorå’ŒtabBarInactiveTintColorä»åå­—æˆ‘ä»¬å°±èƒ½çœ‹å‡ºï¼Œæ˜¯è®¾ç½®æ¿€æ´»çŠ¶æ€å’Œéæ¿€æ´»çš„iconå’Œlabelçš„é¢œè‰²ï¼ˆæ³¨æ„ï¼Œæ˜¯ä¸¤è€…çš„é¢œè‰²ï¼‰ï¼›tabBarIconç”¨æ¥è®¾ç½®iconå›¾æ ‡ï¼Œæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼šfocused(boolean)ã€color(string)å’Œsize(number)ã€‚ focusedç”¨æ¥è¡¨ç¤ºtabæ¿€æ´»æˆ–è€…éæ¿€æ´»ï¼Œå¾ˆå¥½ç†è§£ï¼Œä½†æ˜¯è¿™é‡Œçš„colorå’Œsizeå°±å¾ˆå¥‡æ€ªäº†ï¼Œæˆ‘ä»¬æ‰“å°colorçš„å€¼ï¼Œå‘ç°å’Œä¸Šé¢çš„active colorå’Œinactive colorç›¸åŒï¼›è¿™ä¸ªè‰²å€¼æ˜¯ä¸ºäº†å’Œiconä¸‹é¢çš„labelè‰²å€¼ä¿æŒç»Ÿä¸€è€Œä¼ å…¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒçš„è‰²å€¼ï¼Œä¹Ÿå¯ä»¥å’Œlabelä¸åŒï¼›sizeåˆ™æ˜¯å¯¼èˆªé¢„æœŸiconçš„å¤§å°ã€‚ å¦‚æœæˆ‘ä»¬åªéœ€è¦å±•ç¤ºå›¾æ ‡ï¼Œè€Œä¸è¦labelï¼Œå°†tabBarShowLabelé€‰é¡¹ç½®ä¸ºfalseå³å¯ã€‚ 123456&lt;Tab.Navigator screenOptions=&#123;(&#123;route&#125;) =&gt; (&#123; tabBarShowLabel: false, &#125;)&#125;&gt; ....&lt;/Tab.Navigator&gt; å¾½ç«  æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨tabæŒ‰é’®ä¸ŠåŠ ä¸€ä¸ªå¾½ç« ï¼ˆBadgeï¼‰ï¼Œæ¥æ ‡è¯†æœªè¯»ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨tabBarBadgeé€‰é¡¹ï¼š 1&lt;Tab.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; options=&#123;&#123; tabBarBadge: 3 &#125;&#125; /&gt; è·¯ç”±è·³è½¬å’ŒåµŒå¥— ä¸Šé¢å †æ ˆå¯¼èˆªæˆ‘ä»¬ä»‹ç»è¿‡navigateå’Œpushçš„ç”¨æ³•ï¼Œè€Œé€‰é¡¹å¡å¯¼èˆªå°±æ¯”è¾ƒç®€å•äº†ï¼Œç”±äºä¸¤ä¸ªtabæ˜¯åŒä¸€çº§å…³ç³»ï¼Œç›´æ¥è°ƒç”¨navigateå°±èƒ½å®ç°è·¯ç”±è·³è½¬ï¼š 1234567891011function HomeScreen(&#123; navigation &#125;) &#123; return ( &lt;View style=&#123;&#123; flex: 1, justifyContent: &#x27;center&#x27;, alignItems: &#x27;center&#x27; &#125;&#125;&gt; &lt;Text&gt;Home!&lt;/Text&gt; &lt;Button title=&quot;å»åˆ—è¡¨é¡µ&quot; onPress=&#123;() =&gt; navigation.navigate(&#x27;List&#x27;)&#125; /&gt; &lt;/View&gt; );&#125; é€‰é¡¹å¡å¯¼èˆªä¸­ä¸èƒ½è°ƒç”¨pushå‡½æ•°ã€‚ æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨é€‰é¡¹å¡å¯¼èˆªä¸­æˆ‘ä»¬ç»å¸¸ç”¨åˆ°ä¸æ­¢ä¸€ä¸ªè·¯ç”±ï¼Œåœ¨åˆ—è¡¨é¡µåé¢æˆ‘ä»¬éœ€è¦è·³è½¬åˆ°è¯¦æƒ…é¡µï¼›ä½†å¦‚æœç›´æ¥æŠŠè¯¦æƒ…é¡µé¢æ”¾åˆ°Tab.Screenä¸­è‚¯å®šæ˜¯ä¸è¡Œçš„ï¼Œè¿™æ ·åªä¼šå¢åŠ ä¸€ä¸ªtabæŒ‰é’®ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ä¸Šé¢çš„å †æ ˆå¯¼èˆªï¼Œå°†ä¸¤ç§å¯¼èˆªæ–¹å¼è¿›è¡ŒåµŒå¥—ä½¿ç”¨ã€‚ 12345678910111213141516171819202122232425262728293031const Tab = createBottomTabNavigator();const ListStack = createNativeStackNavigator();function ListStackScreen() &#123; return ( &lt;ListStack.Navigator&gt; &lt;ListStack.Screen name=&quot;List&quot; component=&#123;ListScreen&#125;&gt; &lt;/ListStack.Screen&gt; &lt;ListStack.Screen name=&quot;Detail&quot; component=&#123;DetailScreen&#125;&gt; &lt;/ListStack.Screen&gt; &lt;/ListStack.Navigator&gt; );&#125;function TabStackRouter(&#123; navigation &#125;) &#123; return ( &lt;Tab.Navigator&gt; &lt;Tab.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; /&gt; &lt;Tab.Screen name=&quot;ListStack&quot; component=&#123;ListStackScreen&#125; /&gt; &lt;/Tab.Navigator&gt; )&#125; æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªListStackå †æ ˆå¯¼èˆªï¼Œç›¸å½“äºåœ¨tabé¡µé¢ä¸­åµŒå¥—äº†ä¸€å±‚å †æ ˆå¯¼èˆªï¼›æˆ‘ä»¬å¾ˆæ˜æ˜¾å‘ç°Listé¡µé¢ä¼šæœ‰ä¸¤ä¸ªå¤´éƒ¨çš„å¯¼èˆªæ ï¼Œæˆ‘ä»¬å°†ListStackçš„headerShownç½®ä¸ºfalseå³å¯å°†å®ƒçš„å¯¼èˆªæ éšè—ï¼š 12345678910function TabStackRouter(&#123; navigation &#125;) &#123; &lt;Tab.Navigator&gt; &lt;Tab.Screen name=&quot;ListStack&quot; component=&#123;ListStackScreen&#125; options=&#123;&#123; headerShown: false, &#125;&#125; /&gt; &lt;/Tab.Navigator&gt;&#125; å®‰å…¨åŒºåŸŸ åœ¨iPhone Xã€iPhone XRç­‰è®¾å¤‡ä¸Šï¼Œé¡¶éƒ¨çš„åˆ˜æµ·è®¾è®¡å’Œåº•éƒ¨çš„å°é»‘æ¡éƒ½å¯èƒ½ä¼šé®ä½æˆ‘ä»¬çš„Appå†…å®¹ï¼Œå› æ­¤éœ€è¦è¿›è¡Œé€‚é…ï¼›å°½ç®¡RNæä¾›äº†SafeAreaViewï¼Œä½†å®ƒæœ‰ä¸€äº›é—®é¢˜ï¼ŒReact Navigationæä¾›äº†æ›´å¥½ç”¨çš„react-native-safe-area-contextï¼š é¦–å…ˆæˆ‘ä»¬yarnå®‰è£…ï¼Œåœ¨iOSå¹³å°å¤šä¸€æ­¥podå®‰è£…ï¼š 1234yarn add react-native-safe-area-context# iOS Platformnpx pod-install é¦–å…ˆåœ¨æ ¹ç»„ä»¶ä½¿ç”¨SafeAreaProviderï¼Œè¿™æ˜¯ä¸€ä¸ªæä¾›è€…ï¼Œæœ¬èº«ä¸ä¼šå¯¹å¸ƒå±€äº§ç”Ÿå½±å“ï¼Œåªæœ‰åœ¨è¯¥ç»„ä»¶åŒ…è£¹ä¸‹çš„å­ç»„ä»¶æ‰èƒ½ä½¿ç”¨react-native-safe-area-contextæä¾›çš„åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬é€šå¸¸æŠŠå®ƒåŒ…è£¹åœ¨Appç»„ä»¶ï¼š 1234567import &#123; SafeAreaProvider &#125; from &#x27;react-native-safe-area-context&#x27;;function App() &#123; return (&lt;SafeAreaProvider initialMetrics=&#123;null&#125;&gt; &lt;NavigationContainer&gt;&#123;/*(...) */&#125;&lt;/NavigationContainer&gt; &lt;/SafeAreaProvider&gt;);&#125; åœ¨æˆ‘ä»¬è¦é€‚é…çš„é¡µé¢å¼•å…¥SafeAreaViewè‡ªåŠ¨å¤„ç†ï¼š 123456789101112import &#123; SafeAreaView &#125; from &#x27;react-native-safe-area-context&#x27;;function HomeScreen() &#123; return ( &lt;SafeAreaView style=&#123;&#123; flex: 1, justifyContent: &#x27;space-between&#x27;, alignItems: &#x27;center&#x27; &#125;&#125; &gt; &lt;Text&gt;This is Top Text.&lt;/Text&gt; &lt;Text&gt;This is Bottom Text.&lt;/Text&gt; &lt;/SafeAreaView&gt; );&#125; React Navigationå†…ç½®äº†react-native-safe-area-contextï¼Œä¸€èˆ¬å¦‚æœä½¿ç”¨äº†å¯¼èˆªæ å’Œåº•éƒ¨çš„tabåˆ™æ— éœ€å¤„ç†ã€‚ æŠ½å±‰å¼å¯¼èˆª æŠ½å±‰å¼å¯¼èˆªæ˜¯ä»ä¾§è¾¹æ åˆ’å‡ºæŠ½å±‰ä¸€æ ·çš„æ•ˆæœï¼ŒæŠ½å±‰å¼å¯¼èˆªçš„æ ¸å¿ƒæ˜¯ã€Œéšè—ã€ï¼Œçªå‡ºæ ¸å¿ƒåŠŸèƒ½ï¼Œéšè—ä¸€äº›ä¸å¿…è¦çš„æ“ä½œï¼Œæ¯”å¦‚ä¸€äº›ç®€æŠ¥ã€æ–°é—»ã€æ ç›®ç­‰ç­‰ï¼›åœ¨å°å±å¹•æ—¶ä»£ï¼Œå†…å®¹ç¯‡å¹…å±•ç¤ºæœ‰é™ï¼Œä¼šæŠŠä¸€äº›è¾…åŠ©çš„åŠŸèƒ½æ”¾åˆ°ä¾§è¾¹æ é‡Œï¼›ä½†æ˜¯éšç€å±å¹•å°ºå¯¸è¶Šæ¥è¶Šå¤§ï¼Œé€šè¿‡æ–°çš„äº¤äº’æ–¹å¼ï¼Œæˆ‘ä»¬çš„Appå·²ç»èƒ½å¤Ÿå®¹çº³è¶³å¤Ÿå¤šçš„å†…å®¹ï¼ŒæŠ½å±‰å¼å¯¼èˆªçš„ç¼ºç‚¹ä¹Ÿé€æ¸æš´éœ²ï¼šäº¤äº’æ•ˆç‡ä½ä¸‹ï¼Œå¤„äºæ“ä½œç›²åŒºï¼Œå•æ‰‹æ“ä½œä¸ä¾¿ã€‚ å› æ­¤æŠ½å±‰å¼å¯¼èˆªä¹Ÿé€æ¸è¡°è½äº†ï¼Œæˆ‘ä»¬åœ¨å¤§å¤šAppä¸­ä¹Ÿå¾ˆéš¾çœ‹åˆ°è¿™ç§å¯¼èˆªæ–¹å¼ï¼Œä»…æœ‰å°‘æ•°è¿˜ä¿ç•™ï¼Œæˆ‘ä»¬çœ‹ä¸‹åœ¨è™å—…Appä¸Šä½¿ç”¨æŠ½å±‰å¼å¯¼èˆªçš„æ•ˆæœï¼š è¦åœ¨æˆ‘ä»¬çš„Appä¸­ä½¿ç”¨è¿™ç§å¯¼èˆªï¼Œæˆ‘ä»¬é¦–å…ˆå®‰è£…å‡ ä¸ªä¾èµ–ï¼š 12yarn add @react-navigation/draweryarn add react-native-gesture-handler react-native-reanimated å’Œå…¶ä»–ä¸¤ç§å¯¼èˆªæ–¹å¼ç›¸åŒï¼Œæˆ‘ä»¬éœ€è¦æŠŠåˆ›å»ºå‡½æ•°ä»ä¾èµ–ä¸­å¯¼å‡ºï¼š 123456789101112import &#123; createDrawerNavigator &#125; from &#x27;@react-navigation/drawer&#x27;;const Drawer = createDrawerNavigator();function DrawerRouter() &#123; return ( &lt;Drawer.Navigator&gt; &lt;Drawer.Screen name=&quot;Home&quot; component=&#123;HomeScreen&#125; /&gt; &lt;Drawer.Screen name=&quot;List&quot; component=&#123;ListScreen&#125; /&gt; &lt;/Drawer.Navigator&gt; );&#125; æˆ‘ä»¬å¯ä»¥ç‚¹å‡»å·¦ä¸Šè§’çš„æŒ‰é’®å±•å¼€æŠ½å±‰ï¼Œæˆ–è€…åœ¨é¡µé¢è°ƒç”¨å¦‚ä¸‹APIè¿›è¡Œæ‰‹åŠ¨æ‰“å¼€æˆ–å…³é—­ï¼š 123navigation.openDrawer();navigation.closeDrawer();navigation.toggleDrawer(); è¿˜å¯ä»¥å®šä¹‰drawerPositionï¼Œè®¾ç½®æ‰“å¼€æŠ½å±‰çš„ä½ç½®ï¼Œæ”¯æŒleftï¼ˆé»˜è®¤ï¼‰å’Œrightï¼š 123456&lt;Drawer.Navigator screenOptions=&#123;&#123; drawerPosition: &#x27;right&#x27;, &#125;&#125;&gt; ...&lt;/Drawer.Navigator&gt; æˆ‘ä»¬å¯ä»¥è®¾ç½®æ‰“å¼€æŠ½å±‰çš„å†…å®¹ï¼Œé€šè¿‡drawContentViewå¾ˆå®¹æ˜“çš„è¦†å†™å†…å®¹ã€‚é»˜è®¤æƒ…å†µä¸‹åœ¨ScrollViewä¸‹æ¸²æŸ“äº†ä¸€ä¸ªDrawerItemListå…ƒç´ ï¼Œåœ¨è¿™åŸºç¡€ä¸Šæˆ‘ä»¬å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨DrawerItemå…ƒç´ ï¼š 123456789101112131415161718192021222324import &#123; DrawerContentScrollView, DrawerItemList, DrawerItem,&#125; from &#x27;@react-navigation/drawer&#x27;;function drawContentView(props) &#123; return ( &lt;DrawerContentScrollView &#123;...props&#125;&gt; &lt;DrawerItemList &#123;...props&#125; /&gt; &#123;/* è¿™é‡ŒåŠ å…¥æƒ³è¦æ–°å¢çš„ä¸€äº›å…ƒç´  */&#125; &lt;DrawerItem label=&quot;Help&quot; onPress=&#123;...&#125; /&gt; &lt;/DrawerContentScrollView&gt; );&#125;function DrawerRouter() &#123; return ( &lt;Drawer.Navigator drawerContent=&#123;props =&gt; drawContentView(props)&#125;&gt; ... &lt;/Drawer.Navigator&gt; );&#125; å½©è›‹ ç»è¿‡å‰é¢å‡ ç¯‡å¯¹RNçš„å­¦ä¹ ï¼Œæˆ‘ä»¬åŸºæœ¬å·²ç»æŒæ¡äº†RNçš„ç›¸å…³å¼€å‘æŠ€å·§ï¼Œä¸‹é¢æˆ‘ä»¬å°±å¼€å§‹è¿›è¡Œå®æˆ˜ç¯èŠ‚ï¼Œä»é›¶å¼€å§‹å¼€å‘ä¸€æ¬¾å±äºæˆ‘ä»¬è‡ªå·±çš„Appï¼Œæ•¬è¯·æœŸå¾…ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"ç§»åŠ¨ç«¯","slug":"Apps","permalink":"https://xieyufei.com/tags/Apps/"},{"name":"React","slug":"React","permalink":"https://xieyufei.com/tags/React/"},{"name":"ReactNative","slug":"ReactNative","permalink":"https://xieyufei.com/tags/ReactNative/"}]},{"title":"å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹Dockerå®¹å™¨ç¼–æ’","date":"2022-06-08T14:22:22.000Z","path":"2022/06/08/FrontEnd-Docker-Compose.html","text":"æœ¬æ–‡æ˜¯Dockerçš„ç¬¬ä¸‰ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†ä¹‹å‰Dockerä¸­é—æ¼çš„ä¸€äº›é—®é¢˜è¿›è¡Œæ·±å…¥çš„æ¢è®¨ï¼Œæ¯”å¦‚è®¾ç½®å®¹å™¨çš„ç¯å¢ƒå˜é‡ã€é•œåƒçš„å¯¼å…¥å¯¼å‡ºç­‰ä¸€äº›å¸¸ç”¨çš„åŠŸèƒ½ï¼›ç„¶åæˆ‘ä»¬ä¼šæ­å»ºä¸€ä¸ªç§æœ‰çš„Registryä»“åº“ï¼Œä¸Šä¼ å’Œæ‹‰å–æˆ‘ä»¬è‡ªå·±çš„é•œåƒï¼›ä»¥åŠæœ€é‡è¦çš„éƒ¨åˆ†ï¼Œå®¹å™¨çš„ç¼–æ’ï¼Œè¿™æ¬¡æˆ‘ä»¬ä¸å†æ˜¯å•æ‰“ç‹¬æ–—åœ°æ“ä½œä¸€ä¸ªå®¹å™¨äº†ï¼Œæˆ‘è¦ä¸€æ¬¡æ‰“åä¸ªå®¹å™¨ï¼å¼€ç©ç¬‘å¼€ç©ç¬‘ï¼Œç¬”è€…åˆä¸æ˜¯å¶é—®ã€‚æœ€åç¬”è€…ä¼šåˆ†äº«ä¸€äº›å¸¸ç”¨çš„ã€æœ‰è¶£åˆå®ç”¨çš„é•œåƒï¼Œæ¯”å¦‚ç§æœ‰ç½‘ç›˜ã€çˆ¬è™«ã€å›¾åºŠã€ç§æœ‰ç¬”è®°ã€ç§æœ‰åª’ä½“åº“ä»¥åŠä¸‹è½½å·¥å…·ç­‰ç­‰ï¼Œå¯ä»¥æå‡æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œæ•ˆç‡ï¼Œè®°å¾—çœ‹å®Œå“¦ï¼›æœ¬æ–‡ä¾æ—§å¹²è´§æ»¡æ»¡ï¼Œæ–°æ¥çš„å°ä¼™ä¼´è®°å¾—ç‚¹èµå…³æ³¨å“¦ã€‚ å®¹å™¨çš„ç¯å¢ƒå˜é‡ æˆ‘ä»¬åœ¨å¯åŠ¨dockerå®¹å™¨çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦å‘å®¹å™¨ä¼ é€’ä¸€äº›å‚æ•°ï¼Œä»¥ä¾¿å®¹å™¨è¿›è¡Œä¸€äº›ç‰¹æ®Šçš„é…ç½®ï¼Œæ¯”å¦‚ç»™mysqlä¼ å…¥MYSQL_ROOT_PASSWORDçš„rootç”¨æˆ·å¯†ç ï¼Œæˆ–è€…æˆ‘ä»¬æƒ³åœ¨è‡ªå·±çš„å®¹å™¨ä¸­ä¼ å…¥ä¸€äº›æ•°æ®åº“çš„é…ç½®ç­‰ç­‰ã€‚ ç¬¬ä¸€ç§æ–¹å¼ä¹Ÿæœ€ç®€å•çš„ï¼Œä¹Ÿæ˜¯æœ€å¸¸è§çš„ï¼Œåœ¨runå®¹å™¨æ—¶ä½¿ç”¨--envï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨å„ä¸ªæ–‡æ¡£ä¸­ç»å¸¸è§åˆ°çš„ç®€å†™-eï¼š 1$ docker run -itd -e MYSQL_USER=root -e MYSQL_PASS=pass xxx:latest æˆ‘ä»¬åœ¨jsä»£ç ä¸­å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡process.envæ¥è·å– 1const &#123; MYSQL_USER, MYSQL_PASS &#125; = process.env; åœ¨pythonä»£ç ä¸­è°ƒç”¨os.getenvè·å–ï¼š 12MYSQL_USER = os.getenv(&quot;MYSQL_USER&quot;, &quot;&quot;)MYSQL_PASS = os.getenv(&quot;MYSQL_PASS&quot;, &quot;&quot;) ç¬¬äºŒç§æ–¹å¼ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åœ¨Dockerè¿›é˜¶éƒ¨ç½²ä¸­ä»‹ç»çš„ï¼Œé€šè¿‡Dockerfileæ–‡ä»¶çš„ENVæŒ‡ä»¤ï¼š 12ENV MYSQL_USER rootENV MYSQL_PASS pass ç¬¬ä¸‰ç§æ–¹å¼ï¼Œrunå®¹å™¨æ—¶ï¼Œé€šè¿‡--env-fileæŒ‡ä»¤åŠ è½½envæ–‡ä»¶ï¼Œé¦–å…ˆæˆ‘ä»¬æŠŠé…ç½®ä¿¡æ¯æ”¾åœ¨æ–‡ä»¶env.listä¸­ï¼š 123$ cat env.listMYSQL_USER=root3MYSQL_PASS=pass3 å¯åŠ¨å®¹å™¨æ—¶ä¼ å…¥æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨ä¼ å…¥ä¸€å¤§å †çš„-eå‘½ä»¤äº†ï¼š 1$ docker run -itd --env-file env.list xxx:latest ç»è¿‡æµ‹è¯•ï¼Œä¸‰ç§æ–¹å¼çš„ä¼˜å…ˆçº§å¦‚ä¸‹ï¼š -eæŒ‡ä»¤ å¤§äº&gt; â€“env-file å¤§äº&gt; ENVæŒ‡ä»¤ æˆ‘ä»¬æŸ¥çœ‹å®¹å™¨çš„ç¯å¢ƒå˜é‡ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡inspectå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥åŠ ä¸Šgrepè¿‡æ»¤æƒ³è¦çš„å­—æ®µï¼š 12$ docker inspect XXX $ docker inspect XXX | grep MYSQL_USER ä¹Ÿå¯ä»¥è§£æä¸€ä¸‹è¿”å›å†…å®¹ï¼š 1$ docker inspect -f &#x27;&#123;&#123;range $index, $value := .Config.Env&#125;&#125;&#123;&#123;println $value&#125;&#125;&#123;&#123;end&#125;&#125;&#x27; XXX é•œåƒä¸å®¹å™¨çš„å¯¼å…¥å¯¼å‡º æœ‰æ—¶å€™æˆ‘ä»¬éƒ¨ç½²dockerå®¹å™¨ä¼šé‡åˆ°é—®é¢˜ï¼Œæ¯”å¦‚æœåŠ¡å™¨åœ¨å†…ç½‘ï¼Œä¸èƒ½è¿æ¥å¤–ç½‘çš„æƒ…å†µï¼ˆä¸€äº›å…·æœ‰è¾ƒé«˜ä¿å¯†æ€§çš„ä¼ä¸šï¼‰ï¼Œæˆ–è€…ç½‘ç»œä¸‹è½½æ…¢ï¼Œä¸é€šç•…ï¼›æˆ‘ä»¬å°±å¯ä»¥ç¼–è¯‘ã€å¯¼å‡ºé•œåƒååœ¨å†…ç½‘æœåŠ¡å™¨å¯¼å…¥ï¼Œå°±å¯ä»¥å®ç°å†…ç½‘éƒ¨ç½²ã€‚ é•œåƒsaveå’Œload é•œåƒçš„å¯¼å…¥æˆ‘ä»¬é€šå¸¸ä½¿ç”¨docker saveå’Œ``docker load`å‘½ä»¤ï¼Œsaveå‘½ä»¤å°†é•œåƒæ‰“åŒ…æˆtaræ–‡ä»¶ï¼š 123$ docker save img:latest &gt; img.tar# æˆ–è€…$ docker save -o img.tar img:latest å¯¼å‡ºé•œåƒå°½é‡ä½¿ç”¨é•œåƒå:æ ‡ç­¾çš„å½¢å¼ï¼Œä½¿ç”¨é•œåƒidå®¹æ˜“å‡ºç°å¯¼å…¥åé•œåƒåå‡ºç°&lt;none&gt;çš„æƒ…å†µã€‚ æˆ‘ä»¬è¿˜å¯ä»¥å°†å¤šä¸ªé•œåƒæ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå¯¼å‡ºï¼š 1$ docker save img1:latest img2:latest &gt; img.tar ä½¿ç”¨loadå‘½ä»¤å°±å¯ä»¥å°†å¯¼å‡ºçš„é•œåƒåŒ…åŠ è½½è¿›æ¥ï¼š 1$ docker load &lt; img.tar saveå’Œloadçš„åº”ç”¨åœºæ™¯ï¼Œå°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„å†…ç½‘éƒ¨ç½²çš„æƒ…å†µï¼›åŒæ—¶å¦‚æœæˆ‘ä»¬çš„åº”ç”¨è¿˜æ˜¯ä½¿ç”¨docker composeç¼–æ’çš„å¤šä¸ªé•œåƒç»„åˆï¼Œå°±å¯ä»¥ä½¿ç”¨saveå°†ç”¨åˆ°çš„å¤šä¸ªé•œåƒæ‰“åŒ…ï¼Œç„¶åæ‹·è´åˆ°å®¢æˆ·æœåŠ¡å™¨ä¸Šä½¿ç”¨loadè½½å…¥ã€‚ å®¹å™¨exportå’Œimport é¦–å…ˆæˆ‘ä»¬æŸ¥çœ‹æœ¬æœºçš„æ‰€æœ‰å®¹å™¨ï¼Œä½¿ç”¨exportå‘½ä»¤å°†å®¹å™¨IDå¯¼å‡ºæˆæ–‡ä»¶ï¼š 1$ docker export 3e877a80b319 &gt; server.tar å¯¼å‡ºåˆ°æ–‡ä»¶åï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ç›®å½•å¯ä»¥çœ‹åˆ°è¯¥taråŒ…æ–‡ä»¶ï¼Œæˆ‘ä»¬å†ä½¿ç”¨importå‘½ä»¤å°†é•œåƒæ–‡ä»¶å¯¼å…¥è¿›æ¥ï¼š 1$ docker import server.tar my-server:latest å¯¼å…¥åçš„å®¹å™¨æ–‡ä»¶ä¼šæˆä¸ºä¸€ä¸ªé•œåƒï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå®ƒæŒ‡å®šæ–°çš„åç§°ï¼Œå¦‚æœå­˜åœ¨åŒåé•œåƒï¼ŒåŸæœ‰çš„åç§°ä¼šè¢«å‰¥å¤ºï¼Œèµ‹ç»™æ–°çš„é•œåƒã€‚ exportå’Œimportçš„åº”ç”¨åœºæ™¯ä¸»æ˜¯è¦ç”¨æ¥åˆ¶ä½œåŸºç¡€é•œåƒï¼Œæ¯”å¦‚æˆ‘ä»¬ä»ä¸€ä¸ªubuntué•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œç„¶åå®‰è£…ä¸€äº›è½¯ä»¶å’Œè¿›è¡Œä¸€äº›è®¾ç½®åï¼Œä½¿ç”¨docker exportä¿å­˜ä¸ºä¸€ä¸ªåŸºç¡€é•œåƒã€‚ç„¶åæŠŠè¿™ä¸ªé•œåƒåˆ†å‘ç»™å…¶ä»–äººä½¿ç”¨ï¼Œæ¯”å¦‚ä½œä¸ºåŸºç¡€çš„å¼€å‘ç¯å¢ƒã€‚ æ€»ç»“ä¸€ä¸‹docker saveå’Œdocker exportçš„åŒºåˆ«ï¼š docker saveä¿å­˜çš„æ˜¯é•œåƒï¼ˆimageï¼‰ï¼Œdocker exportä¿å­˜çš„æ˜¯å®¹å™¨ï¼ˆcontainerï¼‰ï¼› docker loadç”¨æ¥è½½å…¥é•œåƒåŒ…ï¼Œdocker importç”¨æ¥è½½å…¥å®¹å™¨åŒ…ï¼Œä½†ä¸¤è€…éƒ½ä¼šæ¢å¤ä¸ºé•œåƒï¼› docker loadä¸èƒ½å¯¹è½½å…¥çš„é•œåƒé‡å‘½åï¼Œè€Œdocker importå¯ä»¥ä¸ºé•œåƒæŒ‡å®šæ–°åç§°ã€‚ ç§æœ‰ä»“åº“ åœ¨Dockerä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œpull XXXæŸä¸ªé•œåƒçš„æ—¶å€™ï¼Œå®é™…ä¸Šå®ƒæ˜¯ä»registry.hub.docker.comå®˜æ–¹çš„é•œåƒä»“åº“å»æ‹‰å–çš„ï¼›åœ¨å®é™…å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¸ä¼šæŠŠä¼ä¸šçš„é¡¹ç›®pushåˆ°å…¬æœ‰ä»“åº“ä¸­ç®¡ç†ï¼›æ‰€ä»¥ä¸ºäº†æ›´å¥½çš„ç®¡ç†ï¼ŒDockerä¸ä»…æä¾›äº†å…¬æœ‰ä»“åº“ï¼Œä¹Ÿå…è®¸æˆ‘ä»¬æ­å»ºç§æœ‰ä»“åº“ã€‚ Docker Registryæ˜¯ä¸€ä¸ªæ— çŠ¶æ€ï¼Œé«˜åº¦å¯æ‰©å±•çš„æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºï¼Œå®ƒå­˜å‚¨å¹¶å…è®¸æ‚¨åˆ†å‘Dockeræ˜ åƒï¼›æˆ‘ä»¬é€šè¿‡runå‘½ä»¤å¯åŠ¨ï¼š 1$ docker run -d -p 5000:5000 -v $PWD:/var/lib/registry --restart=always --name registry registry:2 RegistryæœåŠ¡é»˜è®¤å°†ä¸Šä¼ çš„é•œåƒä¿å­˜åœ¨å®¹å™¨çš„/var/lib/registryï¼Œæˆ‘ä»¬å¯ä»¥å°†æœåŠ¡å™¨æœ¬åœ°çš„æ–‡ä»¶å¤¹æŒ‚è½½åˆ°è¯¥ç›®å½•ï¼Œå³å¯å®ç°ä¿å­˜é•œåƒï¼›é€šè¿‡ä»¥ä¸‹curlæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨ï¼Œä»¥åŠæœåŠ¡å™¨ä¸Šçš„é•œåƒã€‚ 123$ curl http://192.168.0.1:5000/v2/_catalog# è¿”å›æ•°æ®ï¼š&#123;&quot;repositories&quot;:[]&#125; æ­£å¸¸æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨æ¨é€é•œåƒåˆ°ä»“åº“é»˜è®¤ä½¿ç”¨çš„æ˜¯httpsï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼Œè¿™é‡Œå°±ä¸åŠ httpsï¼›éœ€è¦åœ¨å®¢æˆ·ç«¯é…ç½®å¯ä¿¡çš„ä»“åº“åœ°å€ä¸ºhttpï¼Œå¦åˆ™pushæ—¶ä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼š 12The push refers to repository [192.168.0.1:5000/server]Get &quot;https://192.168.0.1:5000/v2/&quot;: http: server gave HTTP response to HTTPS client åœ¨windowsçš„Dockerå®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹Desktopçš„é…ç½®ï¼Œåœ¨Settingä¸­é€‰æ‹©Docker Engineï¼Œæ·»åŠ insecure-registrieså­—æ®µï¼Œå®Œæˆåç‚¹å‡»Apply &amp; Restarté‡å¯å³å¯ï¼š åœ¨linuxå®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬ä¿®æ”¹/etc/docker/daemon.jsonæ–‡ä»¶ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿæ˜¯åŠ å…¥insecure-registriesï¼Œç„¶åæ‰§è¡Œå‘½ä»¤sudo service docker restarté‡å¯dockerï¼š 12345&#123; &quot;insecure-registries&quot;: [ &quot;192.168.0.1:5000&quot; ],&#125; ä¿®æ”¹è¯¥æ–‡ä»¶å¿…é¡»ç¬¦åˆJSONæ–‡ä»¶è§„èŒƒï¼Œå¦åˆ™ä¼šå¯åŠ¨å¤±è´¥ RegistryæœåŠ¡å¯åŠ¨åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æ¨é€é•œåƒåˆ°ä»“åº“ä¸­ï¼›æˆ‘ä»¬ä»Docker Hubä¸‹è½½ä¸€ä¸ªubuntu:18.04é•œåƒï¼Œç„¶åå°†å®ƒæ¨é€åˆ°ç§æœ‰ä»“åº“ï¼›é¦–å…ˆç»™è¿™ä¸ªé•œåƒé‡æ–°æ‰“ä¸ŠæœåŠ¡å™¨çš„æ ‡ç­¾ï¼š 1$ docker tag ubuntu:18.04 192.168.0.1:5000/my-ubuntu:latest ä½¿ç”¨pushå‘½ä»¤æ¨é€é•œåƒï¼š 1$ docker push 192.168.0.1:5000/my-ubuntu:latest æˆ‘ä»¬å¯ä»¥åœ¨å¦å¤–ä¸€å°æœºå™¨ä¸Šæ‹‰å–è¿™ä¸ªé•œåƒï¼Œä¹Ÿå¯ä»¥å°†æœ¬åœ°çš„192.168.0.1:5000/my-ubuntu:latestå’Œubuntu:18.04é•œåƒåˆ é™¤åï¼Œå†æ¬¡æ‹‰å–ï¼š 1$ docker pull 192.168.0.1:5000/my-ubuntu:latest å†æ¬¡curlæŸ¥çœ‹æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°è¯¥é•œåƒå·²ç»åœ¨æœåŠ¡å™¨ç”Ÿæ•ˆäº† 123$ curl http://192.168.0.1:5000/v2/_catalog# è¿”å›æ•°æ®ï¼š&#123;&quot;repositories&quot;:[&quot;my-ubuntu&quot;]&#125; å¼€å¯è®¤è¯ æˆ‘ä»¬ä¸Šé¢ä»“åº“æ­å»ºåï¼Œæ‰€æœ‰å®¢æˆ·ç«¯éƒ½å¯ä»¥pushã€pullï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬æƒ³è¦è®¤è¯çš„ç”¨æˆ·æ‰èƒ½å¤Ÿè®¿é—®ï¼›å°†åŸæœ‰å®¹å™¨åˆ é™¤ï¼Œåˆ›å»ºä¸€ä¸ªä¿å­˜è´¦å·å¯†ç çš„æ–‡ä»¶ï¼š 12$ mkdir -p ~/auth &amp;&amp; cd ~/auth$ docker run --rm --entrypoint htpasswd httpd:alpine -Bbn username password &gt; ./htpasswd å°†ä¸Šé¢çš„usernameå’Œpasswordæ›¿æ¢æˆè‡ªå·±çš„è´¦å·å¯†ç ï¼Œè¿è¡Œå®¹å™¨æ—¶æˆ‘ä»¬ç»‘å®šauthæ–‡ä»¶å¤¹ï¼š 1234567$ docker run -d -p 5000:5000 -v $PWD:/var/lib/registry \\ -v ~/auth:/auth \\ -e &quot;REGISTRY_AUTH=htpasswd&quot; \\ -e &quot;REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm&quot; \\ -e REGISTRY_AUTH_HTPASSWD_PATH=/auth/htpasswd \\ --restart always --name registry registry:2 æœåŠ¡å™¨å¼€å¯è®¤è¯åå®¢æˆ·ç«¯å†pullã€pushä¼šæç¤ºno basic auth credentialsï¼Œæˆ‘ä»¬éœ€è¦å…ˆè¿›è¡Œç™»å½•æ“ä½œï¼š 1234567# ç™»å½•$ docker login 192.168.0.1:5000# é€€å‡ºç™»å½•$ docker logout 192.168.0.1:5000# windowså®¢æˆ·ç«¯è¿è¡Œæ·»åŠ winpty$ winpty docker login 192.168.0.1:5000 Compose Docker Composeæ˜¯Dockerå®˜æ–¹çš„å¼€æºé¡¹ç›®ï¼Œè´Ÿè´£å®ç°å¯¹Dockerå®¹å™¨é›†ç¾¤çš„å¿«é€Ÿç¼–æ’ã€‚åœ¨å‰ä¸¤ç¯‡Dockerä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯ä»‹ç»äº†å•ä¸ªå®¹å™¨çš„æ„å»ºå’Œä½¿ç”¨æ–¹å¼ï¼›åœ¨æ—¥å¸¸å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°éœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆä½¿ç”¨çš„æƒ…å†µï¼Œæ¯”å¦‚é™¤äº†webé¡¹ç›®æœ¬èº«ï¼Œè¿˜è¦æ•°æ®åº“æ”¯æŒï¼Œnginxè´Ÿè½½å‡è¡¡ç­‰ç­‰ï¼›å¦‚æœæ‰€æœ‰å®¹å™¨éƒ½é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æ„å»ºã€å¯åŠ¨ã€åˆ é™¤ç­‰æ“ä½œä¼šååˆ†ç¹çï¼›å°±å¥½åƒä½ æ¯å¤©ä¸‹ç­å›åˆ°å®¶é‡Œï¼Œéƒ½éœ€è¦è¿›è¡Œå¼€ç¯ã€å…³é—­çª—å¸˜ã€æ‰“å¼€ç”µè§†ã€ç…®é¥­ç­‰ç­‰ä¸€ç³»åˆ—ç®€å•ä¸”é‡å¤çš„æ“ä½œã€‚ Composeçš„å‡ºç°å°±è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒé€šè¿‡å®šä¹‰ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶docker-compose.ymlæ¥ç®¡ç†ä¸€ç»„ç›¸å…³è”çš„å®¹å™¨ï¼Œæ‰€æœ‰å®¹å™¨çš„é…ç½®ã€ç¯å¢ƒç­‰éƒ½è®°å½•åˆ°æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ä¸€ä¸ªå‘½ä»¤å°±å¯ä»¥æ§åˆ¶æ‰€æœ‰çš„å®¹å™¨ï¼›Composeå°±åƒæ™ºèƒ½å®¶å±…çš„ç®¡å®¶ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å¼€ç¯ã€å…³é—­çª—å¸˜ã€æ‰“å¼€ç”µè§†ã€ç…®é¥­ç­‰æ“ä½œåœ¨Appä¸­è¿›è¡Œå®šä¹‰ï¼Œæˆ‘ä»¬ä¸‹ç­å›åˆ°å®¶é‡Œåªè¦å¯¹ç€å®ƒå‘å‡ºæŒ‡ä»¤ï¼šå›å®¶å•¦ï¼ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨å¸®ä½ æŠŠæ‰€æœ‰çš„äº‹æƒ…åšäº†ã€‚ å®‰è£…å¸è½½ Docker Composeæ”¯æŒWindowsã€macOSå’ŒLinuxå¹³å°ï¼Œåœ¨Windowså’ŒmacOSå¹³å°æˆ‘ä»¬ç›´æ¥ä¸‹è½½å®‰è£…åŒ…å®‰è£…åè‡ªå¸¦Composeï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»¬é€šè¿‡versionæŸ¥çœ‹å®‰è£…æƒ…å†µï¼š 12$ docker-compose --versiondocker-compose version 1.29.2, build 5becea4c Linuxçš„å®‰è£…ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥ä»å®˜ç½‘ä¸‹è½½ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶å¹¶èµ‹äºˆæ‰§è¡Œæƒé™å³å¯ï¼š 123456$ sudo curl -L https://github.com/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose# å›½å†…ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼åŠ å¿«ä¸‹è½½$ sudo curl -L https://download.fastgit.org/docker/compose/releases/download/1.27.4/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose$ sudo chmod +x /usr/local/bin/docker-compose nodejså’Œredisä½¿ç”¨ å¸¸è§çš„é¡¹ç›®å°±æ˜¯webç½‘ç«™ï¼ŒåŒ…æ‹¬webåº”ç”¨å’Œæ•°æ®åº“ï¼ˆmysqlã€mongodbæˆ–redisï¼‰ï¼Œæˆ‘ä»¬å°è¯•ä¸€ä¸ªèƒ½å¤Ÿç®€å•è®°å½•é¡µé¢è®¿é—®æ¬¡æ•°çš„webåº”ç”¨ã€‚æ–°å»ºä¸€ä¸ªexpressé¡¹ç›®ï¼Œç¼–å†™app.jsæ–‡ä»¶ï¼š 12345678910111213const express = require(&quot;express&quot;);const &#123; createClient &#125; = require(&quot;redis&quot;);const app = express();const client = createClient(&#123; url: &quot;redis://redis:6379&quot;,&#125;);app.get(&quot;/&quot;, async (req, res) =&gt; &#123; let counter = await client.incr(&quot;counter&quot;); res.send(`Hello World! è¯¥é¡µé¢å·²è¢«è®¿é—® $&#123;counter&#125; æ¬¡`);&#125;);app.listen(8000, async () =&gt; &#123; await client.connect();&#125;); è¿™é‡Œæˆ‘ä»¬è¿æ¥redisçš„æ—¶å€™ä½¿ç”¨äº†å®¹å™¨åç§°ï¼Œè€Œä¸æ˜¯ipï¼Œä¸‹é¢æˆ‘ä»¬ä¼šä½¿ç”¨å®¹å™¨åç§°å’Œé™æ€ä¸¤ç§è¿æ¥æ–¹å¼ã€‚å†ç¼–å†™æˆ‘ä»¬çš„Dockerfileï¼Œæ„å»ºé•œåƒï¼š 1234567FROM node:14.19-alpineWORKDIR /appCOPY package*.json ./RUN npm install --registry https://registry.npm.taobao.orgCOPY . .EXPOSE 8000CMD npm run start ç¼–å†™docker-compose.ymlæ–‡ä»¶ï¼Œè¿™æ˜¯Composeçš„æ¨¡æ¿æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨åˆ°2ä¸ªæœåŠ¡ï¼š 123456789101112version: &#x27;3&#x27;services: web: build: ./ depends_on: - redis ports: - &quot;8000:8000&quot; restart: always redis: image: &quot;redis:alpine&quot; restart: always åœ¨é¡¹ç›®ä¸­å…è®¸docker-compose up -då°±åœ¨åå°å¯åŠ¨äº†Composeé¡¹ç›®ï¼Œè®¿é—®8000ç«¯å£ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢ï¼Œè®¡æ•°å°±ä¼šåŠ 1ã€‚ å‘½ä»¤è¯´æ˜ps pså‘½ä»¤ï¼Œåˆ—å‡ºæ‰€æœ‰çš„å®¹å™¨ï¼Œä»¥åŠè¿è¡ŒçŠ¶æ€å’Œæ‰€æœ‰ç«¯å£ï¼š 12345$ docker-compose ps Name Command State Ports------------------------------------------------------------------------------demo_redis_1 docker-entrypoint.sh redis ... Up 6379/tcpdemo_web_1 docker-entrypoint.sh /bin/ ... Up 0.0.0.0:8080-&gt;8080/tcp å¦‚æœè¦æŸ¥çœ‹æŸä¸ªæœåŠ¡çš„ä¿¡æ¯ï¼Œpså‘½ä»¤å¸¦ä¸ŠæŸä¸ªæœåŠ¡çš„åç§°ï¼š 1$ docker-compose ps [service name] logs logså‘½ä»¤æŸ¥çœ‹æœåŠ¡å®¹å™¨çš„è¾“å‡ºã€‚ 123$ docker-compose logs$ docker-compose logs [service name] start å¯åŠ¨å·²ç»å­˜åœ¨çš„æœåŠ¡å®¹å™¨ã€‚ 1$ docker-compose start [service name] stop åœæ­¢å·²ç»å¤„äºè¿è¡ŒçŠ¶æ€çš„å®¹å™¨ï¼Œä½†ä¸åˆ é™¤å®ƒã€‚é€šè¿‡startå¯ä»¥å†æ¬¡å¯åŠ¨è¿™äº›å®¹å™¨ã€‚ 1$ docker-compose stop [service name] images åˆ—å‡ºComposeæ–‡ä»¶ä¸­åŒ…å«çš„é•œåƒã€‚ 1$ docker-compose images scale å¼¹æ€§è®¾ç½®æœåŠ¡è¿è¡Œçš„å®¹å™¨ä¸ªæ•°ï¼Œé€šè¿‡service=numï¼›éœ€è¦å»æ‰åœ¨yamlæ–‡ä»¶æŒ‡å®šçš„ç«¯å£å·ï¼Œå¦åˆ™ä¼šå¯¼è‡´ç«¯å£å ç”¨é—®é¢˜ 1$ docker-compose scale web=2 db=3 build æ„å»ºï¼ˆé‡æ–°æ„å»ºï¼‰é¡¹ç›®ä¸­çš„æœåŠ¡å®¹å™¨ã€‚ 1$ docker-compose build æˆ–è€…å•ç‹¬æ„å»ºæŸä¸ªæœåŠ¡çš„å®¹å™¨ã€‚ 1$ docker-compose build [service name] down æ­¤å‘½ä»¤å°†ä¼šåœæ­¢upå‘½ä»¤æ‰€å¯åŠ¨çš„å®¹å™¨ï¼Œå¹¶ç§»é™¤ç½‘ç»œã€‚ 1$ docker-compose down up æ­¤å‘½ä»¤å°†è‡ªåŠ¨å®ŒæˆåŒ…æ‹¬æ„å»ºé•œåƒï¼Œï¼ˆé‡æ–°ï¼‰åˆ›å»ºæœåŠ¡ï¼Œå¯åŠ¨æœåŠ¡ï¼Œå¹¶å…³è”æœåŠ¡ç›¸å…³å®¹å™¨çš„ä¸€ç³»åˆ—æ“ä½œï¼›å¯ä»¥ç›´æ¥é€šè¿‡è¯¥å‘½ä»¤æ¥å¯åŠ¨ä¸€ä¸ªé¡¹ç›®ã€‚ 1$ docker-compose up é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯åŠ¨çš„å®¹å™¨éƒ½åœ¨å‰å°è¿è¡Œï¼Œä½¿ç”¨-då‚æ•°ï¼Œå°†ä¼šåœ¨åå°å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰çš„å®¹å™¨ï¼Œä¸€èˆ¬åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ã€‚ 1$ docker-compose up -d Composeæ¨¡æ¿æ–‡ä»¶ Composeé€šè¿‡é…ç½®æ–‡ä»¶docker-compose.ymlæ¥ç®¡ç†å¤šä¸ªDockerå®¹å™¨ï¼Œæ¨¡æ¿æ–‡ä»¶ä¸»è¦åˆ†ä¸º3ä¸ªéƒ¨åˆ†ï¼š serviceï¼ˆæœåŠ¡ï¼‰:åœ¨å®ƒä¸‹é¢å¯ä»¥å®šä¹‰åº”ç”¨éœ€è¦çš„ä¸€äº›æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„åå­—ã€ä½¿ç”¨çš„é•œåƒã€æŒ‚è½½çš„æ•°æ®å·ã€æ‰€å±çš„ç½‘ç»œã€ä¾èµ–å“ªäº›å…¶ä»–æœåŠ¡ç­‰ç­‰ã€‚ volumesï¼ˆæ•°æ®å·ï¼‰ï¼šå®šä¹‰æ•°æ®å·ï¼Œç„¶åæŒ‚è½½åˆ°ä¸åŒçš„æœåŠ¡ä½¿ç”¨ã€‚ networks ï¼ˆåº”ç”¨ç½‘ç»œï¼‰ï¼šå®šä¹‰åº”ç”¨åå­—ï¼Œä½¿ç”¨çš„ç½‘ç»œç±»å‹ã€‚ ä¸‹é¢ä»‹ç»ä¸€äº›ä¸»è¦æŒ‡ä»¤çš„ä½¿ç”¨ã€‚ version yarmæ–‡ä»¶ä¸€èˆ¬å¼€å¤´å°±æ˜¯versionå­—æ®µï¼ŒversionæŒ‡å®šäº†ç‰ˆæœ¬ä¿¡æ¯ï¼Œå…³ä¹dockerçš„å…¼å®¹æ€§ï¼ŒComposeæ–‡ä»¶æ ¼å¼æœ‰3ä¸ªç‰ˆæœ¬ï¼Œåˆ†åˆ«ä¸º1ï¼Œ2.xå’Œ3.xã€‚ä¸¤è€…çš„ç‰ˆæœ¬è¦æ±‚å¦‚ä¸‹è¡¨ï¼š composeæ–‡ä»¶æ ¼å¼ç‰ˆæœ¬ dockerç‰ˆæœ¬ 3.4 17.09.0+ 3.3 17.06.0+ 3.2 17.04.0+ 3.1 1.13.1+ 3.0 1.13.0+ 2.3 17.06.0+ 2.2 1.13.0+ 2.1 1.12.0+ 2.0 1.10.0+ 1.0 1.9.1.+ image ä»æŒ‡å®šçš„é•œåƒä¸­å¯åŠ¨å®¹å™¨ï¼Œå¯ä»¥æ˜¯å­˜å‚¨ä»“åº“ã€æ ‡ç­¾ä»¥åŠé•œåƒIDã€‚ build æŒ‡å®šDockerfileæ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹docker-compose.ymlæ–‡ä»¶çš„è·¯å¾„ 1234version: &#x27;3&#x27;services: web: build: /path/to/build/dir å¦‚æœdockerfileæ–‡ä»¶åä¸æ˜¯é»˜è®¤åï¼Œéœ€è¦æŒ‡å®šï¼š 123456789version: &#x27;3&#x27;services: web: build: context: ./ dockerfile: Dockerfile-alternate args: var1: 1 var2: c ä½¿ç”¨argæŒ‡ä»¤æŒ‡å®šæ„å»ºé•œåƒæ—¶çš„å˜é‡ï¼Œè¿™é‡Œçš„var1å’Œvar2å°†è¢«å‘é€åˆ°æ„å»ºç¯å¢ƒã€‚ æ³¨æ„ï¼šä»»ä½•environmentä¸argså˜é‡åŒåçš„envå˜é‡ï¼ˆä½¿ç”¨å—æŒ‡å®šï¼‰å°†è¦†ç›–è¯¥å˜é‡ã€‚ command è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚ 12345version: &#x27;3&#x27;services: web: build: ./ command: echo &quot;hello world&quot; links å°†æŒ‡å®šå®¹å™¨è¿æ¥åˆ°å½“å‰è¿æ¥ï¼Œå¯ä»¥è®¾ç½®åˆ«åï¼Œé¿å…ipæ–¹å¼å¯¼è‡´çš„å®¹å™¨é‡å¯åŠ¨æ€æ”¹å˜çš„æ— æ³•è¿æ¥æƒ…å†µã€‚ 12345678version: &#x27;3&#x27;services: web: build: ./ links: - redis:rd redis: image: &quot;redis:alpine&quot; æˆ‘ä»¬åœ¨webå®¹å™¨ä¸­ä½¿ç”¨rdå°±èƒ½è®¿é—®redisï¼Œè€Œä¸ç”¨ipã€‚ external_links é“¾æ¥åˆ°docker-compose.ymlå¤–éƒ¨çš„å®¹å™¨ï¼Œç”šè‡³å¹¶éComposeç®¡ç†çš„å¤–éƒ¨å®¹å™¨ã€‚ 1234external_links: - redis_1 - project_db_1:mysql - project_db_1:postgresql depends_on è§£å†³å®¹å™¨çš„ä¾èµ–ã€å¯åŠ¨å…ˆåçš„é—®é¢˜ã€‚ä»¥ä¸‹ä¾‹å­ä¸­ä¼šå…ˆå¯åŠ¨rediså’Œdbå†å¯åŠ¨webã€‚ 1234567891011121314version: &#x27;3&#x27;services: web: build: . depends_on: - db - redis redis: image: redis db: image: postgres æ³¨æ„ï¼šwebæœåŠ¡ä¸ä¼šç­‰å¾…redis dbã€Œå®Œå…¨å¯åŠ¨ã€ä¹‹åæ‰å¯åŠ¨ã€‚ networks é»˜è®¤æƒ…å†µä¸‹ï¼ŒComposeä¼šä¸ºæˆ‘ä»¬çš„åº”ç”¨è®¾ç½®ä¸€ä¸ªç½‘ç»œï¼ŒæœåŠ¡çš„æ¯ä¸ªå®¹å™¨éƒ½åŠ å…¥é»˜è®¤ç½‘ç»œï¼Œå¹¶ä¸”å¯ä»¥è¢«è¯¥ç½‘ç»œä¸Šçš„å…¶ä»–å®¹å™¨è®¿é—®ã€‚ Composeåˆ›å»ºçš„ç½‘ç»œåç§°åŸºäºæˆ‘ä»¬æ‰€åœ¨é¡¹ç›®çš„ç›®å½•åç§°ï¼Œæ¯”å¦‚æˆ‘ä»¬é¡¹ç›®åœ¨myappç›®å½•ä¸‹ï¼Œé‚£Composeä¼šåˆ›å»ºä¸€ä¸ªmyapp_defaultç½‘ç»œã€‚ æœ‰äº›åœºæ™¯ä¸‹ï¼Œé»˜è®¤çš„ç½‘ç»œé…ç½®ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡networksæŒ‡ä»¤é…ç½®ç½‘ç»œï¼Œé€šè¿‡defaultå¯¹é»˜è®¤çš„ç½‘ç»œè¿›è¡Œé…ç½®ï¼š 12345678version: &#x27;3&#x27;services: web: build: .networks: default: driver: bridge æˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ç½‘ç»œï¼š 12345678910111213141516171819202122232425version: &#x27;3&#x27;services: web: build: . networks: - front - back redis: image: &quot;redis:alpine&quot; networks: - front db: image: postgres networks: - backnetworks: front: driver: bridge back: driver: bridge driver_opts: foo: &quot;1&quot; bar: &quot;2&quot; æˆ‘ä»¬è¿™é‡Œå®šä¹‰äº†frontå’Œbackä¸¤ä¸ªç½‘ç»œï¼Œwebåº”ç”¨åŒæ—¶åœ¨ä¸¤ä¸ªç½‘ç»œä¸­å‡èƒ½è®¿é—®rediså’Œdbï¼Œè€Œrediså’Œdbå®ç°äº†éš”ç¦»ã€‚driver_optså°†é€‰é¡¹åˆ—è¡¨æŒ‡å®šä¸ºé”®å€¼å¯¹ä»¥ä¼ é€’ç»™æ­¤ç½‘ç»œçš„é©±åŠ¨ç¨‹åºã€‚ æˆ‘ä»¬æœ‰æ—¶å€™ä¸éœ€è¦åˆ›å»ºæ–°çš„ç½‘ç»œï¼Œåªéœ€è¦åŠ å…¥å·²æœ‰ç½‘ç»œï¼Œå¯ä»¥ä½¿ç”¨externalé€‰é¡¹ï¼ŒæŒ‡å®šä¸€ä¸ªå·²ç»å­˜åœ¨çš„ç½‘ç»œåç§°ï¼š 1234567891011version: &#x27;3&#x27;services: web: build: . networks: - outsidenetworks: outside: external: name: &#x27;my-existing-network&#x27; åŠ å…¥ç½‘ç»œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå®¹å™¨çš„é™æ€ipåœ°å€ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨è¿›è¡Œæ•°æ®åº“è¿æ¥æ—¶ï¼Œå¯ä»¥ä¸ç”¨å®¹å™¨æœåŠ¡åç§°ï¼Œè€Œç›´æ¥ä½¿ç”¨ipåœ°å€ï¼š 1234567891011121314151617181920version: &#x27;3&#x27;services: web: build: . networks: mynet: ipv4_address: 172.19.0.3 redis: image: &quot;redis:alpine&quot; networks: mynet: ipv4_address: 172.19.0.4networks: mynet: ipam: driver: default config: - subnet: 172.19.0.0/16 network_mode è®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚ä½¿ç”¨å’Œdocker runçš„â€“networkå‚æ•°ä¸€æ ·çš„å€¼ã€‚ 12345network_mode: &quot;bridge&quot;network_mode: &quot;host&quot;network_mode: &quot;none&quot;network_mode: &quot;service:[service name]&quot;network_mode: &quot;container:[container name/id]&quot; environment åœ¨å®¹å™¨ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç­‰åŒäºdocker run -e VARIABLE=VALUE ... 123456789101112version: &#x27;3&#x27;services: web: build: . environment: MODE: development SHOW: &#x27;true&#x27; # ç­‰åŒäº environment: - MODE=development - SHOW=&#x27;true&#x27; env_file ä»æ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œç­‰åŒäºdocker run --env-file ...ã€‚ 123456env_file: .envenv_file: - ./common.env - ./apps/web.env - /opt/secrets.env ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸­æ¯ä¸€è¡Œå¿…é¡»ç¬¦åˆæ ¼å¼ï¼Œæ”¯æŒ#å¼€å¤´çš„æ³¨é‡Šè¡Œã€‚ 12# common.env: Set development environmentPROG_ENV=development å¦‚æœæœ‰å˜é‡åç§°ä¸environmentæŒ‡ä»¤å†²çªï¼Œä»¥environmentæŒ‡ä»¤ä¸ºå‡†ã€‚ volumes volumeså¯ä»¥è®¾ç½®æ•°æ®å·æ‰€æŒ‚è½½è·¯å¾„ï¼Œå®ƒæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ–¹å¼æ˜¯è®¾ç½®å®¿ä¸»æœºè·¯å¾„ï¼ˆHOST:CONTAINERï¼‰ï¼Œé€šè¿‡[SOURCE:]TARGET[:MODE]æ ¼å¼ï¼Œæœ€åçš„roç”¨äºåªè¯»ï¼Œrwç”¨äºè¯»å†™ï¼ˆé»˜è®¤ï¼‰ï¼š 12345678version: &#x27;3&#x27;services: web: build: . volumes: - /app/configs # éšæœºæ•°æ®å· - ./configs:/app/configs:ro - /path/to/logs:/app/logs å¦ä¸€ç§æ–¹å¼ç›´æ¥è®¾ç½®æ•°æ®å·çš„åç§°ï¼Œéœ€è¦åœ¨æ–‡ä»¶ä¸­é…ç½®æ•°æ®å·ï¼š 123456789version: &#x27;3&#x27;services: web: build: ./ volumes: - config_data:/app/configsvolumes: config_data: ports ç«¯å£æš´éœ²ç»™å®¿ä¸»æœºï¼Œå¦‚æœä»…ä»…æŒ‡å®šå®¹å™¨ç«¯å£ï¼Œå®¿ä¸»æœºå°†ä¼šéšæœºé€‰æ‹©ç«¯å£ã€‚ 1234ports: - &quot;3000&quot; # ç»‘å®šå®¹å™¨çš„3000ç«¯å£åˆ°ä¸»æœºä»»æ„ç«¯å£ - &quot;8000:8000&quot; - &quot;12222:22&quot; expose æš´éœ²ç«¯å£ï¼Œå’Œportsçš„åŒºåˆ«æ˜¯ï¼Œexposeä¸æ˜ å°„åˆ°å®¿ä¸»æœºï¼Œåªè¢«è¿æ¥çš„æœåŠ¡è®¿é—®ã€‚ 123expose: - &quot;3000&quot; - &quot;8000&quot; dns è‡ªå®šä¹‰DNSæœåŠ¡å™¨ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ 12345dns: 8.8.8.8dns: - 8.8.8.8 - 114.114.114.114 restart æŒ‡å®šå®¹å™¨é€€å‡ºåçš„é‡å¯ç­–ç•¥ä¸ºå§‹ç»ˆé‡å¯ã€‚è¯¥å‘½ä»¤å¯¹ä¿æŒæœåŠ¡å§‹ç»ˆè¿è¡Œååˆ†æœ‰æ•ˆï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ¨èé…ç½®ä¸ºalwaysæˆ–è€… unless-stoppedã€‚ 12345version: &#x27;3&#x27;services: web: build: ./ restart: always dockeré•œåƒæ¨è ä¸‹é¢æ¨èä¸€äº›ç¬”è€…å¸¸ç”¨çš„é•œåƒã€‚ gitbucket å¦‚æœæˆ‘ä»¬è‡ªå·±æƒ³è¦ä¸€ä¸ªç§æœ‰çš„gitå¼€å‘ä»“åº“ï¼Œæˆ–è€…å…¬å¸å°å›¢é˜Ÿä½¿ç”¨ï¼Œgitbucketæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼›ç›¸æ¯”äºgitlabåŠ¨è¾„å°±å ç”¨å†…å­˜3Gï¼Œgitbucketå‡ ç™¾mbçš„å¤§å°å·²ç»æ˜¯å¾ˆå°å·§è¿·ä½ äº†ï¼Œå†é…ä¸Šç›´ç”·èˆ¬çš„è“é»‘è‰²ï¼Œè®©äººç®€ç›´ã€‚ã€‚ã€‚ã€‚ä¸è¿‡å¥½åœ¨ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯æ•²çš„gitå‘½ä»¤ï¼Œæ‰€ä»¥ä¸ç”¨åœ¨æ„ä»–çš„ç•Œé¢ã€‚ 1$ docker run --name git -itd -v $PWD:/var/gitbucket -p 8080:8080 -p 29418:29418 gitbucket/gitbucket 8080ç«¯å£æ˜¯å®ƒçš„ç•Œé¢çš„åœ°å€ï¼Œ29418ç«¯å£æ˜¯ç»™gité€šè¿‡SSHå»é“¾æ¥ä»“åº“çš„ï¼Œå»ºè®®å¼€å¯ã€‚ filebrowser å¦‚æœä½ å—å¤Ÿäº†æŸç½‘ç›˜å‡ åKBçš„å°æ°´ç®¡é€Ÿåº¦ï¼Œé‚£ä¹ˆfilebrowseræ˜¯ä½ æ­å»ºä¸€ä¸ªè½»é‡çº§çš„ç§æœ‰äº‘ç›˜ä¸é”™çš„é€‰æ‹©ã€‚å¦ä¸€æ¬¾ç½‘ç›˜å·¥å…·nextcloudä¹Ÿååˆ†çš„ä¸é”™ï¼ŒåŠŸèƒ½ä¸°å¯Œä¸”å¼ºå¤§ï¼Œå¸¦æœ‰appåŠŸèƒ½ï¼Œä¸è¿‡éœ€è¦ç»“åˆæ•°æ®åº“ä½¿ç”¨ï¼Œé…ç½®ç•¥å¾®ç¹çï¼Œå–œæ¬¢æŠ˜è…¾çš„å°ä¼™ä¼´å¯ä»¥è‡ªå·±å°è¯•ã€‚ filebrowserä½¿ç”¨äº†goè¯­è¨€ç¼–å†™ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨å¯¹æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶è¿›è¡Œç®¡ç†ã€‚å¯ä»¥æ˜¯ä¿®æ”¹æ–‡ä»¶ï¼Œæˆ–è€…æ˜¯æ·»åŠ åˆ é™¤æ–‡ä»¶ï¼Œç”šè‡³å¯ä»¥åˆ†äº«æ–‡ä»¶ï¼Œæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ–‡ä»¶ç®¡ç†å™¨ï¼Œä½¿ç”¨éå¸¸ç®€å•æ–¹ä¾¿ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ã€‚ ä½¿ç”¨dockerå®‰è£…ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥åªæ˜ å°„/srvç›®å½•ä¸‹çš„æ–‡ä»¶ï¼š 1$ docker run -d --restart=always -v $PWD:/srv -p 8080:80 filebrowser/filebrowser å†é€šè¿‡nginxè½¬å‘8080ç«¯å£ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨å¤–ç½‘è®¿é—®äº†ï¼›nginxé…ç½®æ–‡ä»¶ä¸­è¿˜éœ€è¦ä¿®æ”¹ä¸Šä¼ æ–‡ä»¶çš„å¤§å°é™åˆ¶ï¼Œè¿™é‡Œæˆ‘ä»¬æ”¹åˆ°2GBï¼Œå¤§éƒ¨åˆ†çš„æ–‡ä»¶éƒ½èƒ½ä¸Šä¼ äº†ï¼š 1234http&#123; client_max_body_size 2000M; client_body_timeout 20m;&#125; scrapyd æˆ‘ä»¬èº«è¾¹æœ‰å¾ˆå¤šçš„çˆ¬è™«åº”ç”¨æ¡ˆä¾‹ï¼Œæ¯”å¦‚ç™¾åº¦ã€Googleã€å¿…åº”ç­‰æœç´¢å¼•æ“éƒ½æœ‰è‡ªå·±çš„çˆ¬è™«ï¼Œä¼šå®šæ—¶æ¥æŠ“å–ä½ çš„ç½‘ç«™ï¼›å†æ¯”å¦‚è¿‡å¹´å›å®¶éœ€è¦æŠ¢ç«è½¦ç¥¨ï¼Œæˆ‘ä»¬ç»å¸¸èƒ½å¤Ÿçœ‹åˆ°å¾ˆå¤šçš„æŠ¢ç¥¨è½¯ä»¶ç­‰ï¼Œä¹Ÿéƒ½æ˜¯çˆ¬è™«çš„åº”ç”¨ï¼›ä¸è¿‡æˆ‘ä»¬åœ¨ç½‘ç»œä¸Šè‚†æ„ä½¿ç”¨çˆ¬è™«çš„æ—¶å€™ä¹Ÿè¦æ³¨æ„ç›¸å…³æ³•å¾‹æ³•è§„ï¼Œæ¯•ç«Ÿä¿—è¯è¯´å¾—å¥½ï¼š çˆ¬è™«å†™å¾—å¥½ï¼Œç‰¢é¥­åƒå¾—é¥± Scrapyæ˜¯ç”±Pythonè¯­è¨€å¼€å‘çš„ä¸€ä¸ªå¿«é€Ÿã€é«˜å±‚æ¬¡çš„å±å¹•æŠ“å–å’ŒwebæŠ“å–æ¡†æ¶ï¼Œç”¨äºæŠ“å–webç«™ç‚¹å¹¶ä»é¡µé¢ä¸­æå–ç»“æ„åŒ–çš„æ•°æ®ï¼Œåªéœ€è¦å®ç°å°‘é‡çš„ä»£ç ï¼Œå°±èƒ½å¤Ÿå¿«é€Ÿçš„æŠ“å–ã€‚ Scrapyçˆ¬è™«éƒ¨ç½²éœ€è¦ä½¿ç”¨scrapydå’Œscrapydwebï¼Œscrapydæ˜¯ç”±scrapyå¼€å‘è€…å¼€å‘çš„ã€é€šè¿‡ç®€å•çš„JSON APIæ¥ç®¡ç†å¤šä¸ªé¡¹ç›®çš„åº”ç”¨ï¼›é€šè¿‡dockeræˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„å¯åŠ¨ä¸€ä¸ªscrapydæœåŠ¡å™¨ï¼š 1$ docker run -d -p 6800:6800 germey/scrapyd å®ƒçš„ç•Œé¢æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ç¹ççš„APIæ¥å£æ¥ä¸Šä¼ é¡¹ç›®ã€å¯åŠ¨æˆ–è€…åœæ­¢é¡¹ç›®ï¼š å› æ­¤Scrapyå¼€å‘è¿˜æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–ç®¡ç†çˆ¬è™«çš„webåº”ç”¨ï¼ŒåŒæ—¶æ”¯æŒScrapyæ—¥å¿—åˆ†æå’Œå¯è§†åŒ–ã€‚ 12345$ docker run --name scrapydweb -e USERNAME admin \\ -e PASSWORD admin \\ -e SCRAPYD_SERVERS 127.0.0.1:6800 \\ -v /etc/timezone:/etc/timezone \\ -d scrapydweb:latest æˆ‘ä»¬åœ¨webç•Œé¢ä¸Šå°±å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°æ¯ä¸ªæœåŠ¡å™¨è¿è¡Œçˆ¬è™«çš„çŠ¶æ€å’Œæ•°é‡ï¼Œä»¥åŠå®šæ—¶å¯åŠ¨çˆ¬è™«ã€‚ Scrapyæ˜¯ä¸€ä¸ªéå¸¸å¥½ç”¨çš„çˆ¬è™«æ¡†æ¶ï¼Œå¦‚æœæœ¬æ–‡çš„é˜…è¯»é‡çªç ´ä¸€ä¸‡ï¼Œåé¢ç¬”è€…å¯ä»¥èŠä¸€ä¸‹å®ƒçš„ä½¿ç”¨ã€‚ chevereto Cheveretoæ˜¯ç›®å‰æœ€å¥½çš„å›¾åºŠä¹‹ä¸€äº†ã€‚åŠŸèƒ½ä¹Ÿéå¸¸å¼ºå¤§ã€‚å…¶å…è´¹ç‰ˆå’Œæ”¶è´¹ç‰ˆçš„åŒºåˆ«ï¼Œåœ¨äºæ”¶è´¹ç‰ˆå¤šäº†ç¡¬ç›˜æ‰©å±•ï¼Œç¤¾äº¤åˆ†äº«åŠŸèƒ½å’ŒæŠ€æœ¯æ”¯æŒï¼Œå…è´¹ç‰ˆçš„åŠŸèƒ½ä¹Ÿå¤Ÿç”¨äº†ï¼›Cheveretoä¾èµ–çš„ç¯å¢ƒå¦‚ä¸‹ï¼š PHP 5.5+ MySQL 5.0+ ä½¿ç”¨dockerå®‰è£…çš„è¯PHPçš„ç¯å¢ƒæˆ‘ä»¬å°±å¯ä»¥çœå»å®‰è£…æ­¥éª¤äº†ï¼Œéœ€è¦å®‰è£…ä¸€ä¸ªMySQLçš„ç¯å¢ƒï¼Œç„¶åé€šè¿‡runå‘½ä»¤è®¾ç½®MYSQLçš„ç¯å¢ƒå˜é‡ï¼š 12345678$ docker run -it -d --name chevereto --restart=always -p 8080:80 \\ -v $PWD:/var/www/html/images \\ -e &quot;CHEVERETO_DB_HOST=127.0.0.1&quot; \\ -e &quot;CHEVERETO_DB_PORT=3306&quot; \\ -e &quot;CHEVERETO_DB_USERNAME=admin&quot; \\ -e &quot;CHEVERETO_DB_PASSWORD=admin&quot; \\ -e &quot;CHEVERETO_DB_NAME=chevereto&quot; \\ -e &quot;CHEVERETO_DB_PREFIX=chv_&quot; nmtan/chevereto Cheveretoè¿è¡Œèµ·æ¥åæˆ‘ä»¬åˆå§‹åŒ–è®¾ç½®ç®¡ç†å‘˜è´¦å·å¯†ç ï¼Œç„¶ååœ¨è®¾ç½®ä¸­ä¿®æ”¹ç•Œé¢ä¸ºä¸­æ–‡ï¼š PHPé»˜è®¤é™åˆ¶ä¸Šä¼ å¤§å°ä¸º2MBï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å®¹å™¨ä¸­çš„æ–‡ä»¶è§£é™¤æ­¤é™åˆ¶ï¼›é¦–å…ˆä½¿ç”¨cpå‘½ä»¤æŠŠå®¹å™¨ä¸­çš„.htaccessæ–‡ä»¶æ‹·è´å‡ºæ¥ï¼š 1$ docker cp XXXX:/var/www/html/.htaccess ./ ç„¶åç¼–è¾‘æ–‡ä»¶.htaccessï¼Œè®¾ç½®æœ€å¤§ä¸Šä¼ å¤§å°ä¸ºå¤§ä¸€ç‚¹çš„æ•°å€¼ï¼Œæ¯”å¦‚è¿™é‡Œè®¾ä¸º128MBï¼Œæ•°å€¼å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è°ƒæ•´ï¼š 12php_value post_max_size 128Mphp_value upload_max_filesize 128M æˆ‘ä»¬æŠŠæ–‡ä»¶æ‹·è´å›å®¹å™¨çš„åŸå¤„å³å¯ï¼š 1$ docker cp ./.htaccess XXXX:/var/www/html/ æœ€åä¸€æ­¥æˆ‘ä»¬åœ¨è®¾ç½®ä¸­ä¿®æ”¹ä¸Šä¼ é™åˆ¶ï¼Œè¿›å…¥Cheveretoï¼Œå•å‡»ç”¨æˆ·åå¼¹å‡ºä¸‹æ‹‰èœå•ï¼Œé€‰æ‹©ã€ä»ªè¡¨ç›˜ã€‘ï¼Œç„¶åç‚¹ã€è®¾ç½®ã€‘ï¼Œå¼¹å‡ºé¡µé¢ä¸­é€‰æ‹©ã€å›¾ç‰‡ä¸Šä¼ ã€‘ï¼Œæ‰¾åˆ°ã€æœ€å¤§ä¸Šä¼ æ–‡ä»¶å¤§å°ã€‘é€‰é¡¹ï¼Œä¿®æ”¹ä¸è¶…è¿‡128çš„æ•°å€¼å³å¯ï¼š å¦‚æœæ²¡æœ‰ä¿®æ”¹.htaccessæ–‡ä»¶ï¼Œæœ€åä¸€ä¸ªæ­¥éª¤çš„è®¾ç½®è°ƒæ•´æ˜¯ä¸èƒ½è¶…è¿‡2MBçš„ã€‚ è¿™æ ·æˆ‘ä»¬çš„å›¾åºŠå°±æ­å»ºä»¥åŠé…ç½®å®Œæ¯•äº†ï¼Œå…¶ä»–ä¸ªæ€§åŒ–éœ€è¦å¯ä»¥åœ¨è®¾ç½®ä¸­è‡ªè¡Œé…ç½®ï¼›æˆ‘ä»¬å»é¦–é¡µå°±èƒ½éšæ„ä¸Šä¼ å’ŒæŸ¥çœ‹å›¾ç‰‡äº†ï¼›é€šè¿‡nginxä»£ç†è½¬å‘æˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²åˆ°å¤–ç½‘ï¼Œå°†ä½ çš„ç¾ç…§åˆ†äº«ç»™å¥½å‹ï¼ˆå‰ææ˜¯æœ‰å…¬ç½‘IPæˆ–äº‘æœåŠ¡å™¨ï¼‰ã€‚ portainer Portaineræ˜¯ä¸€ä¸ªå¯è§†åŒ–çš„Dockeræ“ä½œç•Œé¢ï¼Œæä¾›çŠ¶æ€æ˜¾ç¤ºé¢æ¿ã€åº”ç”¨æ¨¡æ¿å¿«é€Ÿéƒ¨ç½²ã€å®¹å™¨é•œåƒç½‘ç»œæ•°æ®å·çš„åŸºæœ¬æ“ä½œï¼ˆåŒ…æ‹¬ä¸Šä¼ ä¸‹è½½é•œåƒï¼Œåˆ›å»ºå®¹å™¨ç­‰æ“ä½œï¼‰ã€äº‹ä»¶æ—¥å¿—æ˜¾ç¤ºã€å®¹å™¨æ§åˆ¶å°æ“ä½œã€Swarmé›†ç¾¤å’ŒæœåŠ¡ç­‰é›†ä¸­ç®¡ç†å’Œæ“ä½œã€ç™»å½•ç”¨æˆ·ç®¡ç†å’Œæ§åˆ¶ç­‰åŠŸèƒ½ã€‚åŠŸèƒ½ååˆ†å…¨é¢ï¼ŒåŸºæœ¬èƒ½æ»¡è¶³ä¸­å°å‹å•ä½å¯¹å®¹å™¨ç®¡ç†çš„å…¨éƒ¨éœ€æ±‚ã€‚ é€šè¿‡ä¸€ä¸ªrunå‘½ä»¤æˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨portainerï¼Œ/var/run/docker.sockæ˜¯ç»‘å®šå®¿ä¸»æœºçš„dockeræ–‡ä»¶ï¼Œåœ¨å®¹å™¨å†…éƒ¨ç›´æ¥ä¸dockerå®ˆæŠ¤è¿›ç¨‹é€šä¿¡è¿›è¡Œæ¥å£è°ƒç”¨ï¼š 1234$ docker run --name portainer -d -p 9000:9000 --restart=always \\ -v $PWD:/data -v /var/run/docker.sock:/var/run/docker.sock \\ portainer/portainer-ce å®¹å™¨å¯åŠ¨åï¼Œè®¾ç½®ç®¡ç†å‘˜è´¦å·å¯†ç ï¼Œè¿›å…¥Portaineråå°ç®¡ç†ç•Œé¢ï¼Œç‚¹å‡»Localç¯å¢ƒå°±èƒ½å¤Ÿä½¿ç”¨äº†ï¼š å®¹å™¨å’Œé•œåƒçš„ç®¡ç†ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œåœ¨ç®¡ç†ç•Œé¢ç›´æ¥å¢åˆ é•œåƒæˆ–å®¹å™¨å³å¯ï¼›åˆ›å»ºå®¹å™¨ä¹Ÿç›´æ¥å¯è§†åŒ–äº†ï¼Œæˆ‘ä»¬æ‰“å¼€ã€Containerã€‘=&gt;ã€Add containerã€‘ï¼Œç„¶åè®¾ç½®å®¹å™¨è¿è¡Œæ‰€éœ€è¦çš„å‚æ•°ï¼Œæˆ‘ä»¬è¿™é‡Œä»¥mysqlä¸ºä¾‹ï¼š Restart policyå»ºè®®é€‰æ‹©Alwaysï¼Œç›¸å½“äºè®¾ç½®--restart=alwaysï¼Œä¿è¯äº†å®¹å™¨åœ¨æœåŠ¡å™¨é‡å¯åæ€»ä¼šè‡ªåŠ¨é‡æ–°å¯åŠ¨ã€‚ webssh Websshæ˜¯æŒ‡é€šè¿‡æµè§ˆå™¨ä»¥ç½‘é¡µçš„å½¢å¼é€šè¿‡SSHåè®®è¿œç¨‹è®¿é—®ä»»ä½•å¼€å¯äº†SSHæœåŠ¡çš„è®¾å¤‡ï¼›websshå·¥ä½œçš„åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå¤§è‡´å¦‚ä¸‹ï¼š 123+---------+ http +--------+ ssh +-----------+| browser | &lt;==========&gt; | webssh | &lt;=======&gt; | ssh server|+---------+ websocket +--------+ ssh +-----------+ åœ¨åå°å¯åŠ¨ä¸€ä¸ªwebsshçš„åç«¯æœåŠ¡å™¨ï¼ˆpythonç¨‹åºæˆ–å…¶ä»–è¯­è¨€å¼€å‘çš„ï¼‰ï¼Œå‰ç«¯æµè§ˆå™¨é€šè¿‡websocketå’ŒæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ï¼Œå°†ä¸€äº›å‘½ä»¤å‘é€åˆ°websshæœåŠ¡å™¨ï¼ŒwebsshæœåŠ¡å™¨å†å°†æ¥æ”¶å‘½ä»¤å‘é€ç»™éœ€è¦é€šä¿¡ä¸”å¼€å¯äº†sshåŠŸèƒ½çš„æœåŠ¡å™¨ã€‚ ä½¿ç”¨Websshçš„å¥½å¤„æ˜¯ï¼šåœ¨å­˜åœ¨å ¡å’æœºï¼ˆå³è·³æ¿æœºï¼‰çš„ç¯å¢ƒä¸‹ï¼Œå¦‚æœå ¡å’æœºæœ¬èº«æœ‰å¼€å¯webæœåŠ¡çš„è¯ï¼Œé‚£å¯ä»¥åœ¨å ¡å’æœºä¸Šéƒ¨ç½²websshï¼Œè¿™æ—¶ä¸ç”¨é€šè¿‡SSHæˆ–è€…RDPè®¿é—®å ¡å’æœºï¼Œç›´æ¥æ‰“å¼€æµè§ˆå™¨å°±èƒ½ä»¥webå½¢å¼é€šè¿‡å ¡å’æœºæ¥SSHè¿œç¨‹è®¿é—®ç½‘ç»œè®¾å¤‡ï¼Œè¿™åœ¨ä¸€äº›å†…ç½‘é˜²ç«å¢™ä¸å…è®¸SSHï¼Œä½†æ˜¯å…è®¸HTTPå’ŒHTTPSçš„ç¯å¢ƒä¸­å¾ˆå®ç”¨ã€‚è€Œä¸”å…å»äº†å®‰è£…puttyã€secureCRTç­‰SSH clientè½¯ä»¶çš„å¿…è¦ã€‚ é€šè¿‡dockerè¿è¡ŒwebsshæœåŠ¡å™¨ä¹Ÿå¾ˆç®€å•ï¼š 1$ docker run -itd --name webssh --restart=always -p 8888:8888 webssh ç„¶åé€šè¿‡æµè§ˆå™¨è®¿é—®websshæœåŠ¡å™¨IP+8888ç«¯å£å·å°±å¯ä»¥è¿›å…¥å®ƒçš„ç•Œé¢äº†ï¼Œå®ƒçš„ç•Œé¢ä¹Ÿå¾ˆç®€æ´ï¼Œç”šè‡³æœ‰ç€ä¸€ä¸ä¸çš„ç®€é™‹ï¼Œä¸è¿‡éƒ¨ç½²åˆ°å ¡å’æœºèƒ½ç”¨å°±è¡Œï¼Œè¿˜è¦å•¥è‡ªè¡Œè½¦å•Šã€‚é€šè¿‡å¡«å†™å ¡å’æœºçš„hostnameã€ç«¯å£ç­‰å‚æ•°å°±èƒ½è¿æ¥å ¡å’æœºsshäº†ï¼š wizserver ä¸ºçŸ¥ç¬”è®°æ˜¯ä¸€æ¬¾è€ç‰Œç¬”è®°åº”ç”¨äº†ï¼Œæ”¯æŒmarkdownã€ç½‘é¡µç¬”è®°ã€ç½‘é¡µå‰ªè—å’Œåˆ†äº«ç­‰å¤šåŠŸèƒ½ï¼Œæœ€è¿‘æ¨å‡ºäº†dockerç§æœ‰åŒ–éƒ¨ç½²çš„åŠŸèƒ½ï¼ŒåŒæ—¶æ”¯æŒ5ä¸ªç”¨æˆ·ï¼Œé€‚åˆå°å›¢é˜Ÿä½¿ç”¨ã€‚ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªwiznoteç›®å½•ï¼Œç”¨äºä¿å­˜ç¬”è®°çš„å†…å®¹ï¼Œç„¶årunå¯åŠ¨æœåŠ¡ï¼š 123456$ docker run --name wiz \\ --restart=always -itd \\ -v $PWD/wiznote:/wiz/storage \\ -p 8080:80 \\ -p 9269:9269/udp \\ wiznote/wizserver ç¨ç­‰å‡ åˆ†é’Ÿå°±èƒ½çœ‹åˆ°æœåŠ¡å¯åŠ¨äº†ï¼Œåœ¨æœ¬åœ°æ‰“å¼€localhost:8080æ‰“å¼€ä¸»ç•Œé¢ï¼Œé»˜è®¤ç®¡ç†å‘˜è´¦å·ï¼š&#x61;&#100;&#x6d;&#105;&#x6e;&#64;&#119;&#105;&#x7a;&#46;&#99;&#110;å’Œå¯†ç 123456ã€‚ ä¸ºçŸ¥ç¬”è®°æ”¯æŒå¤šå¹³å°å®¢æˆ·ç«¯å’Œç§»åŠ¨ç«¯å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ç•Œé¢ç‚¹å‡»ã€åˆ‡æ¢æœåŠ¡å™¨ã€‘ï¼Œé€‰æ‹©ã€ä¼ä¸šç§æœ‰æœåŠ¡å™¨ã€‘ï¼Œè¾“å…¥æœåŠ¡å™¨çš„ipåœ°å€åŠç«¯å£å·å°±èƒ½ç™»å½•ç§æœ‰æœåŠ¡å™¨ï¼š jellyfin Jellyfinæ˜¯ä¸€ä¸ªè‡ªç”±çš„è½¯ä»¶åª’ä½“ç³»ç»Ÿï¼Œç”¨äºç®¡ç†åª’ä½“å’Œæä¾›åª’ä½“æœåŠ¡ï¼Œå±•ç¤ºä½ è‡ªå·±çš„ç”µå½±ã€ç”µè§†å‰§ã€éŸ³ä¹ç­‰å¤šåª’ä½“æ•°æ®ï¼Œå¹¶æä¾›å¤šå¹³å°è®¿é—®æ’­æ”¾æœåŠ¡ã€‚é€šè¿‡dockerï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å¯åŠ¨å®ƒçš„æœåŠ¡ï¼›åœ¨æœ¬åœ°åˆ›å»ºmediaå’Œconfigæ–‡ä»¶å¤¹ï¼Œmediaæ–‡ä»¶å¤¹æ˜¯åª’ä½“æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€æ±‚ç»§ç»­åˆ›å»ºmedia/movieã€media/musicç­‰æ–‡ä»¶å¤¹å­˜æ”¾ä¸åŒåª’ä½“èµ„æºï¼š 123456docker run -d --name jellyfin \\ -p 8096:8096 \\ -v $PWD/media:/media \\ -v $PWD/config:/config \\ --restart=always \\ jellyfin/jellyfin ç»‘å®šä¸åŒç«¯å£è¯´æ˜å¦‚ä¸‹ï¼š ç«¯å£ è¯´æ˜ 8096 WebUI è®¿é—®ç«¯å£ 7359/udp ï¼ˆå¯é€‰ï¼‰å…è®¸æœ¬åœ°ç½‘ç»œçš„å®¢æˆ·ç«¯å‘ç° Jellyfin 1900/udp ï¼ˆå¯é€‰ï¼‰DLNAæœåŠ¡ å®¹å™¨åˆ›å»ºåï¼Œæˆ‘ä»¬æ‰“å¼€localhost:8096å°±èƒ½æ‰“å¼€å®‰è£…å‘å¯¼é¡µé¢ï¼Œå®ƒçš„ç•Œé¢è¿˜æ˜¯ï¼š é€‰æ‹©ä¸€ç³»åˆ—çš„è¯­è¨€ã€å›½å®¶ï¼ˆå›½å®¶é€‰æ‹©People&#39;s Republic of Chinaï¼‰ä»¥åŠé…ç½®è´¦å·å¯†ç åæˆ‘ä»¬å°±è¿›å…¥å®ƒçš„é¦–é¡µäº†ï¼›æˆ‘ä»¬é€‰æ‹©ã€æ·»åŠ åª’ä½“åº“ã€‘ï¼Œé€‰æ‹©ä½ mediaæ–‡ä»¶å¤¹ä¸‹çš„å­æ–‡ä»¶å¤¹ï¼Œå°±èƒ½çœ‹åˆ°å…¶ä¸‹é¢çš„åª’ä½“æ–‡ä»¶äº†ï¼š aria2 Aria2æ˜¯ä¸€æ¬¾å¼€æºä¸‹è½½å·¥å…·ï¼Œå¯å¸®åŠ©ç®€åŒ–ä¸åŒè®¾å¤‡å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸‹è½½è¿‡ç¨‹ã€‚å®ƒæ”¯æŒç£åŠ›é“¾æ¥ã€BTç§å­ã€httpç­‰ç±»å‹çš„æ–‡ä»¶ä¸‹è½½ï¼Œä¸è¿…é›·åŠQQæ—‹é£ç›¸æ¯”ï¼ŒAria2æœ‰ç€ä¼˜ç§€çš„æ€§èƒ½åŠè¾ƒä½çš„èµ„æºå ç”¨ï¼Œæ¶æ„æœ¬èº«éå¸¸è½»å·§ï¼Œé€šå¸¸åªéœ€è¦4å…†å­—èŠ‚ï¼ˆHTTPä¸‹è½½ï¼‰åˆ°9å…†å­—èŠ‚ï¼ˆç”¨äºBitTorrentäº¤äº’ï¼‰ä¹‹é—´ã€‚ å¦å¤–ï¼Œaria2ç”±äºå®ƒçš„å¼€æºç‰¹æ€§ï¼Œå› æ­¤ä¹Ÿç”¨åœ¨å¾ˆå¤šç¦»çº¿ä¸‹è½½çš„åœºæ™¯ï¼Œæ¯”å¦‚å¾ˆå¤šè·¯ç”±å™¨éƒ½æ”¯æŒaria2ç¦»çº¿ä¸‹è½½åŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨è·¯ç”±å™¨çš„æ’ä»¶å¸‚åœºä¸­å®‰è£…aria2åï¼Œåœ¨è·¯ç”±å™¨æŒ‚è½½uç›˜ï¼Œä¸Šç­çš„æ—¶å€™æƒ³è¦ä¸‹è½½çš„ç”µå½±ã€è§†é¢‘ç­‰é“¾æ¥ä¸¢ç»™å®ƒï¼Œå›åˆ°å®¶å°±å¯ä»¥ç›´æ¥è§‚çœ‹äº†ï¼›é¡ºå¸¦æä¸€ä¸‹ï¼Œchromeæµè§ˆå™¨é…åˆæ²¹çŒ´æ’ä»¶ç›´æ¥æ„‰å¿«çš„ç¦»çº¿ä¸‹è½½ç™¾åº¦ç½‘ç›˜çš„æ–‡ä»¶ã€‚ æˆ‘ä»¬é€šè¿‡dockeræ¥å®‰è£…aria2ååˆ†æ–¹ä¾¿ï¼Œæ–°å»ºä¸€ä¸ªaria2-downloadsæ–‡ä»¶å¤¹æ˜ å°„ä¸‹è½½çš„ç›®å½•ï¼Œaria2-configæ–‡ä»¶å¤¹æ˜ å°„é…ç½®çš„ç›®å½•ã€‚è¿™é‡Œçš„p3terx/aria2-proé•œåƒå°±æ˜¯æˆ‘ä»¬aria2ä¸‹è½½çš„ä¸»ç¨‹åºï¼Œå®ƒæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œçš„ç¨‹åºï¼Œå› æ­¤æ­é…p3terx/ariangé•œåƒä½œä¸ºå®ƒçš„å¯è§†åŒ–ç®¡ç†ç•Œé¢ã€‚ç”¨åˆ°äº†å¤šä¸ªé•œåƒï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡docker composeæ¥è¿›è¡Œæ„å»ºï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152version: &quot;3&quot;services: aria2-pro: container_name: aria2-pro image: p3terx/aria2-pro environment: # uidï¼Œè¿™é‡Œé»˜è®¤æ˜¯nobody - PUID=65534 # gidï¼Œè¿™é‡Œé»˜è®¤æ˜¯nobody - PGID=65534 # æƒé™æ©ç  - UMASK_SET=022 # rpcå¯†é’¥token - RPC_SECRET=123456 # rpcç«¯å£ - RPC_PORT=6800 # BTç›‘å¬ç«¯å£ - LISTEN_PORT=6888 # ç¼“å­˜ - DISK_CACHE=64M - IPV6_MODE=false # è‡ªåŠ¨æ›´æ–°tracker - UPDATE_TRACKERS=true - CUSTOM_TRACKER_URL= - TZ=Asia/Shanghai network_mode: bridge volumes: # æ˜ å°„é…ç½®ç›®å½•ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•çš„aria2-confg - $&#123;PWD&#125;/aria2-config:/config # æ˜ å°„ä¸‹è½½ç›®å½•ï¼Œé»˜è®¤ä¸ºå½“å‰ç›®å½•çš„aria2-downloads - $&#123;PWD&#125;/aria2-downloads:/downloads ports: - 6800:6800 - 6888:6888 - 6888:6888/udp restart: unless-stopped logging: driver: json-file options: max-size: 1m ariang: container_name: ariang image: p3terx/ariang network_mode: bridge ports: # ç«¯å£æ˜ å°„ï¼Œé»˜è®¤6880ï¼Œåé¢é€šè¿‡æ­¤ç«¯å£è®¿é—®é¡µé¢ - 6880:6880 restart: unless-stopped logging: driver: json-file options: max-size: 1m é¡¹ç›®å¯åŠ¨åï¼Œæˆ‘ä»¬æ‰“å¼€AriaNgçš„ç®¡ç†ç•Œé¢ï¼Œåœ¨è®¾ç½®ä¸­é…ç½®yarmlæ–‡ä»¶ä¸­çš„RPCç«¯å£ï¼ˆé»˜è®¤6800ï¼‰å’ŒRPCå¯†é’¥ã€‚ é…ç½®å®Œæˆåï¼Œç‚¹å‡»ã€æ–°å»ºã€‘ï¼Œè¾“å…¥ä½ çš„ä¸‹è½½é“¾æ¥å°±å¯ä»¥æ„‰å¿«åœ°ç­‰å¾…äº†ã€‚ ä¸‹è½½é€Ÿåº¦å’Œä½ çš„å®é™…å¸¦å®½ä»¥åŠèµ„æºæƒ…å†µç­‰éƒ½æœ‰å…³ç³»ï¼Œä¸Šå›¾ä»…åšå±•ç¤ºã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"}]},{"title":"æ·±å…¥å­¦ä¹ React Nativeä¹‹ç»„ä»¶å…¥é—¨","date":"2022-04-28T05:14:15.000Z","path":"2022/04/28/React-Native-Component.html","text":"æˆ‘ä»¬åœ¨å‰é¢ä¸¤ç¯‡RNçš„æ–‡ç« ä¸­ä»‹ç»äº†RNçš„å¯åŠ¨é…ç½®å’Œæ ·å¼ç¼–å†™ï¼Œä¹Ÿç®€å•åœ°æ¶‰åŠäº†ä¸€äº›RNçš„ç»„ä»¶Viewã€Textå’ŒImageï¼Œæœ¬ç« æˆ‘ä»¬ç»§ç»­ç»“åˆå®˜æ–¹çš„æ¡ˆä¾‹ï¼Œæ·±å…¥æŒ–æ˜RNçš„ç»„ä»¶çš„ç”¨æ³•åŠé…ç½®ï¼Œä»¥ä¾¿åç»­åœ¨ä¸šåŠ¡ä¸­ä½¿ç”¨ç»„ä»¶ã€‚ æ ¸å¿ƒç»„ä»¶ RNæä¾›äº†ä¸€äº›æ ¸å¿ƒçš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥importåä½¿ç”¨ï¼Œå…¶ä¸­ä¹ŸåŒ…å«ä¸€äº›iOSæˆ–è€…Androidç‰¹æœ‰çš„ç»„ä»¶ï¼Œåªèƒ½é’ˆå¯¹å¯¹åº”çš„å¹³å°ä½¿ç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“ç”¨æ³•ã€‚ åŸºç¡€ç»„ä»¶ é¦–å…ˆæ˜¯RNçš„äº”å¤§åŸºç¡€ç»„ä»¶ï¼Œæ˜¯æˆ‘ä»¬åœ¨é¡µé¢ä¸Šæœ€å¸¸ç”¨çš„ç»„ä»¶ï¼Œæˆ‘ä»¬çœ‹ä¸‹å®ƒä»¬çš„çš„æè¿°ï¼š RNç»„ä»¶ å¯¹åº”Androidè§†å›¾ å¯¹åº”iOSè§†å›¾ å¯¹åº”Htmlè§†å›¾ View ViewGroup UIView éæ»šåŠ¨div Text TextView UITextView spanæˆ–p Image ImageView UIImageView img ScrollView ScrollView UIScrollView æ»šåŠ¨div TextInput EditText UITextField input View Viewç»„ä»¶æ˜¯æœ€åŸºç¡€çš„ç»„ä»¶ï¼Œç±»ä¼¼äºdivå¯ä»¥è¿›è¡ŒåµŒå¥—ä½¿ç”¨ï¼Œåœ¨RNæ ·å¼å¸ƒå±€ä¸­æˆ‘ä»¬ä»‹ç»äº†å®ƒç»“åˆFlexæ ·å¼è¿›è¡Œé¡µé¢å¸ƒå±€ï¼›Viewåœ¨å®šä½å¸ƒå±€å’Œdivæœ‰ä¸€äº›åŒºåˆ«ï¼Œæ”¯æŒabsoluteç»å¯¹å®šä½ï¼Œä¸æ”¯æŒfixedå’Œstickyå®šä½ã€‚ ç›´æ¥åœ¨Viewä¸Šç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œæ˜¯æ²¡æœ‰ç”¨çš„ï¼ŒViewä¸æ”¯æŒç‚¹å‡»äº‹ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ç›‘å¬å®ƒçš„ç‚¹å‡»ï¼Œéœ€è¦åœ¨å°†å®ƒæ”¾åˆ°TouchableHighlightç­‰å…ƒç´ ä¸­ï¼š 123&lt;TouchableHighlight onPress=&#123;this.onClickBox()&#125;&gt; &lt;View style=&#123;styles.box&#125;&gt;&lt;/View&gt;&lt;/TouchableHighlight&gt; åœ¨RNé¡µé¢å¼€å‘ä¸­ï¼Œå¦‚æœä½¿ç”¨ç»å¯¹å®šä½å¸ƒå±€ï¼ŒæŸä¸ªViewæœ‰å¯èƒ½ä¼šé®ä½å®ƒä¸‹æ–¹çš„æŸä¸ªç»„ä»¶ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨ä¸€ä¸ªåœ°å›¾ç»„ä»¶ä¸Šè¦†ç›–äº†ä¸€ä¸ªå›¾ç‰‡ç”¨æ¥å±•ç¤ºä¿¡æ¯ï¼Œåˆä¸æƒ³è®©å…¶å½±å“ä¸‹æ–¹ç»„ä»¶çš„ç‚¹å‡»ã€è§¦æ‘¸äº‹ä»¶ï¼Œå°±å¯ä»¥ç”¨åˆ°pointerEventså±æ€§ï¼Œå®ƒç”¨äºæ§åˆ¶å½“å‰è§†å›¾æ˜¯å¦å¯ä»¥ä½œä¸ºè§¦æ§äº‹ä»¶çš„ç›®æ ‡ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå€¼ï¼š autoï¼šè§†å›¾å¯ä»¥ä½œä¸ºè§¦æ§äº‹ä»¶çš„ç›®æ ‡ã€‚ï¼ˆé»˜è®¤ï¼‰ noneï¼šè§†å›¾ä¸èƒ½ä½œä¸ºè§¦æ§äº‹ä»¶çš„ç›®æ ‡ã€‚ box-noneï¼šè§†å›¾è‡ªèº«ä¸èƒ½ä½œä¸ºè§¦æ§äº‹ä»¶çš„ç›®æ ‡ï¼Œä½†å…¶å­è§†å›¾å¯ä»¥ã€‚ box-onlyï¼šè§†å›¾è‡ªèº«å¯ä»¥ä½œä¸ºè§¦æ§äº‹ä»¶çš„ç›®æ ‡ï¼Œä½†å…¶å­è§†å›¾ä¸èƒ½ã€‚ æˆ‘ä»¬ç”¨æ ·å¼æ„å»ºä¸‰ä¸ªé‡å çš„Viewï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748const styles = StyleSheet.create(&#123; box1: &#123; position: &#x27;absolute&#x27;, width: 200, height: 200, backgroundColor: &#x27;green&#x27;, left: 30, top: 90, &#125;, box2: &#123; position: &#x27;absolute&#x27;, width: 150, height: 150, backgroundColor: &#x27;red&#x27;, left: 30, top: 50, &#125;, box3: &#123; position: &#x27;absolute&#x27;, width: 90, height: 90, backgroundColor: &#x27;blue&#x27;, left: 30, top: 50, &#125;,&#125;);class Index extends Component &#123; clickBox(index) &#123; console.log(&#x27;box&#x27; + index); &#125; render() &#123; return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;TouchableHighlight onPress=&#123;() =&gt; this.clickBox(&#x27;1&#x27;)&#125;&gt; &lt;View style=&#123;styles.box1&#125;&gt; &lt;TouchableHighlight onPress=&#123;() =&gt; this.clickBox(&#x27;2&#x27;)&#125;&gt; &lt;View style=&#123;styles.box2&#125;&gt; &lt;TouchableHighlight onPress=&#123;() =&gt; this.clickBox(&#x27;3&#x27;)&#125;&gt; &lt;View style=&#123;styles.box3&#125;&gt;&lt;/View&gt; &lt;/TouchableHighlight&gt; &lt;/View&gt; &lt;/TouchableHighlight&gt; &lt;/View&gt; &lt;/TouchableHighlight&gt; &lt;/View&gt; ); &#125;&#125; æ­£å¸¸æˆ‘ä»¬ç‚¹å‡»æ¯ä¸ªboxéƒ½ä¼šè§¦å‘å¯¹åº”çš„onPressäº‹ä»¶ï¼›ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸æƒ³è§¦å‘å­å…ƒç´ box2å’Œbox3çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ pointerEvents:noneï¼š 12&lt;View style=&#123;styles.box2&#125; pointerEvents=&#123;&#x27;none&#x27;&#125;&gt;&lt;/View&gt; æˆ‘ä»¬çœ‹åˆ°å…ƒç´ pointerEventsè®¾ç½®ä¸ºnoneåï¼Œå…¶å…ƒç´ æœ¬èº«åŠå­å…ƒç´ å‡å·²ä¸èƒ½è§¦å‘äº‹ä»¶äº†ã€‚ Text Textç»„ä»¶ä¹‹å‰ä»‹ç»è¿‡ä¸»è¦ç”¨æ¥æ˜¾ç¤ºæ–‡å­—ï¼›æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹Textä¸­è¶…è¿‡å¤šå°‘è¡Œæ˜¾ç¤ºçœç•¥å·ï¼Œä¸èƒ½ä½¿ç”¨cssä¸­çš„text-overflow: ellipsisï¼Œè€Œæ˜¯ä½¿ç”¨Textçš„numberOfLineså±æ€§æ¥è¿›è¡Œæ–‡æœ¬è¡Œæ•°çš„é™åˆ¶æ˜¾ç¤ºï¼š 123&lt;Text numberOfLines=&#123;2&#125; ellipsizeMode=&#123;&#x27;tail&#x27;&#125;&gt; å¾ˆå¤šå¾ˆå¤šçš„æ–‡æœ¬å†…å®¹&lt;/Text&gt; Textç»„ä»¶çš„æ ·å¼å’Œwebç«¯ä¹Ÿæœ‰ä¸€å®šçš„åŒºåˆ«ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨htmlæŒ‡å®šæ•´ä¸ªæ–‡æ¡£é»˜è®¤çš„å­—ä½“ã€å­—å·åŠé¢œè‰²ï¼š 123456/* cssä»£ç  */html&#123; font-size: 14px; color: &#x27;#333&#x27;; font-family: Arial, SimSun, Helvetica, sans-serif;&#125; è¿™æ ·æˆ‘ä»¬å¯¹æŸäº›divã€spanä¸­çš„æ–‡å­—ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šé¢œè‰²å¤§å°ï¼Œæµè§ˆå™¨å°±ä¼šä¸€è·¯å‘ä¸ŠæŸ¥æ‰¾åˆ°æ ¹èŠ‚ç‚¹htmlï¼Œç„¶åç»§æ‰¿å®ƒçš„æ ·å¼ï¼›è¿™æ ·å¯¼è‡´çš„é—®é¢˜å°±æ˜¯ä»»ä½•èŠ‚ç‚¹éƒ½ä¼šæœ‰font-sizeå±æ€§ï¼ŒRNæ‘’å¼ƒäº†æ ·å¼ç»§æ‰¿ï¼Œæ¨èä½¿ç”¨åŒ…å«ç›¸å…³æ ·å¼çš„ç»„ä»¶ï¼Œç„¶åé‡å¤ä½¿ç”¨è¿™ä¸ªç»„ä»¶ï¼š 123456&lt;View&gt; &lt;MyNavHeaderText&gt;å¯¼èˆªæ ‡é¢˜&lt;/MyNavHeaderText&gt; &lt;MyBodyText&gt;æ–‡æœ¬å†…å®¹1&lt;/MyBodyText&gt; &lt;MyBodyText&gt;æ–‡æœ¬å†…å®¹2&lt;/MyBodyText&gt; &lt;MyFooterText&gt;é¡µè„šå†…å®¹&lt;/MyFooterText&gt;&lt;/View&gt; æˆ‘ä»¬åœ¨å®šä¹‰MyBodyTextç»„ä»¶æ—¶ï¼Œå¯ä»¥æŠŠå®ƒçš„å†…å®¹æ”¾åˆ°Textä¸­ï¼š 123456789class MyBodyText extends Component&#123; render() &#123; return ( &lt;Text style=&#123;&#123; fontSize: 20 &#125;&#125;&gt; &#123;this.props.children&#125; &lt;/Text&gt; ) &#125;&#125; åœ¨Textç»„ä»¶ä¸Šæˆ‘ä»¬å¯ä»¥ç»‘å®šç‚¹å‡»äº‹ä»¶onPress 12345678910class MyBodyText extends Component&#123; onClick = ()=&gt;&#123;&#125; render() &#123; return ( &lt;Text onPress=&#123;this.onClick&#125;&gt; &#123;this.props.children&#125; &lt;/Text&gt; ) &#125;&#125; Image åœ¨æ·±å…¥å­¦ä¹ RNæ ·å¼å¸ƒå±€æˆ‘ä»¬å·²ç»ä»‹ç»äº†Imageç»„ä»¶é€šè¿‡sourceå±æ€§æ¥åŠ è½½æœ¬åœ°å›¾ç‰‡æˆ–è€…ç½‘ç»œï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ã€‚ RNä¹Ÿæ”¯æŒå¯¹ç½‘ç»œå›¾ç‰‡è¿›è¡Œç¼“å­˜ï¼Œè®¿é—®è¿‡ä¸€æ¬¡çš„å›¾ç‰‡ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ä¼šç¼“å­˜åˆ°æ‰‹æœºä¸­ï¼Œå½“éœ€è¦å†æ¬¡æ˜¾ç¤ºçš„æ—¶å€™ï¼ŒRNä¼šç›´æ¥ä»ç¼“å­˜è¯»å–ï¼›åœ¨Androidå¹³å°ï¼Œå›¾ç‰‡ä¼šç¼“å­˜åˆ°æœ¬åœ°ï¼›å¯¹äºiOSå¹³å°ï¼Œå¯ä»¥é€šè¿‡cacheå±æ€§å®ç°ä¸åŒç¼“å­˜æ•ˆæœï¼š 1234567&lt;Image source=&#123;&#123; uri: &#x27;https://xieyufei.com/img/bg_small.jpg&#x27;, cache: &#x27;only-if-cached&#x27;, &#125;&#125; style=&#123;&#123;width: 400, height: 400&#125;&#125;/&gt; cacheå±æ€§å¯ä»¥å–ä»¥ä¸‹å€¼ï¼š defaultï¼šä½¿ç”¨åŸç”Ÿå¹³å°é»˜è®¤ç­–ç•¥ reloadï¼šä¸ä½¿ç”¨ç°æœ‰çš„ç¼“å­˜æ•°æ® force-cacheï¼šç°æœ‰çš„ç¼“å­˜æ•°æ®å°†ç”¨äºæ»¡è¶³è¯·æ±‚ï¼Œå¿½ç•¥å…¶æœŸé™æˆ–åˆ°æœŸæ—¥ã€‚å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å¯¹åº”è¯·æ±‚çš„æ•°æ®ï¼Œåˆ™ä»åŸå§‹åœ°å€åŠ è½½ã€‚ only-if-cachedï¼šç°æœ‰çš„ç¼“å­˜æ•°æ®å°†ç”¨äºæ»¡è¶³è¯·æ±‚ï¼Œå¿½ç•¥å…¶æœŸé™æˆ–åˆ°æœŸæ—¥ã€‚å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰å¯¹åº”è¯·æ±‚çš„æ•°æ®ï¼Œåˆ™ä¸å°è¯•ä»åŸå§‹åœ°å€åŠ è½½ï¼Œå¹¶ä¸”è®¤ä¸ºè¯·æ±‚æ˜¯å¤±è´¥çš„ã€‚ RNè¿˜æä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ–¹å¼æ¥ç®¡ç†iOSå’ŒAndroidä¸­çš„å›¾ç‰‡ï¼Œæˆ‘ä»¬é¦–å…ˆç»™ä¸¤ä¸ªå¹³å°åˆ†åˆ«åˆ›å»ºå¥½ä¸¤å¼ ä¸åŒçš„å›¾ç‰‡ï¼š 12345â”œâ”€â”€ button.jsâ””â”€â”€ img â”œâ”€â”€ logo.jpg â”œâ”€â”€ logo.android.jpg â””â”€â”€ logo.ios.jpg åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œåªéœ€è¦å¼•ç”¨logo.jpgå›¾ç‰‡ï¼ŒRNå°±ä¼šæ ¹æ®å¹³å°è€Œé€‰æ‹©ä¸åŒçš„å›¾ç‰‡æ–‡ä»¶ï¼š 123&lt;Image style=&#123;&#123;width: 360, height: 144&#125;&#125; source=&#123;require(&#x27;./img/logo.jpg&#x27;)&#125;&gt;&lt;/Image&gt; æˆ‘ä»¬çœ‹åˆ°ä¸åŒå¹³å°å±•ç¤ºäº†å¯¹åº”logoå›¾ç‰‡ï¼›é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨@2xï¼Œ@3xè¿™æ ·çš„æ–‡ä»¶ååç¼€ï¼Œæ¥ä¸ºä¸åŒçš„å±å¹•ç²¾åº¦æä¾›å›¾ç‰‡ã€‚ æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°æ–‡å­—åµŒå¥—èƒŒæ™¯å›¾ç‰‡çš„æƒ…å†µï¼Œé™¤äº†ä½¿ç”¨Imageç»„ä»¶è¿›è¡Œç»å¯¹å¸ƒå±€å¤–ï¼ŒRNè¿˜æä¾›äº†ImageBackgroundç»„ä»¶ï¼Œå®ƒçš„å‚æ•°å’ŒImageç»„ä»¶å®Œå…¨ç›¸åŒï¼Œåªéœ€è¦æŠŠå­ç»„ä»¶åµŒå¥—å³å¯ï¼š 12345&lt;ImageBackground style=&#123;&#123;width: 360, height: 144&#125;&#125; source=&#123;require(&#x27;./img/logo.jpg&#x27;)&#125;&gt; &lt;Text&gt;æˆ‘æ˜¯å›¾ç‰‡çš„æè¿°æ–‡æ¡ˆ&lt;/Text&gt;&lt;/ImageBackground&gt; TextInput TextInputç»„ä»¶æ˜¯ä¸€ä¸ªå…è®¸ç”¨æˆ·åœ¨åº”ç”¨ä¸­é€šè¿‡é”®ç›˜è¾“å…¥æ–‡æœ¬å†…å®¹çš„ç»„ä»¶ï¼›å®ƒæ¥æ”¶ä¸€ä¸ªvalueå±æ€§ä½œä¸ºè¾“å…¥çš„é»˜è®¤å€¼ï¼Œå½“æ–‡æœ¬æ¡†å†…å®¹å˜åŒ–æ—¶å›è°ƒonChangeå‡½æ•°ï¼š 1234567891011121314151617181920class Index extends Component &#123; constructor() &#123; super(); this.state = &#123; value: &#x27;&#x27;, &#125;; &#125; onChangeText = (value) =&gt; &#123; this.setState(&#123; value, &#125;); &#125;; render() &#123; return ( &lt;TextInput value=&#123;this.state.value&#125; onChange=&#123;val =&gt; this.onChangeText(val)&#125;&gt;&lt;/TextInput&gt; ) &#125;&#125; å’Œwebç«¯çš„inputä¸€æ ·ï¼ŒTextInputåŒæ ·ä¹Ÿæ”¯æŒè®¾ç½®å ä½ç¬¦çš„æ–‡å­—placeholderï¼ŒåŒæ—¶è¿˜èƒ½ç›´æ¥è®¾ç½®å ä½ç¬¦çš„è‰²å€¼ï¼š 123&lt;TextInput placeholder=&quot;è¯·è¾“å…¥&quot; placeholderTextColor=&quot;#999&quot;&gt;&lt;/TextInput&gt; æˆ‘ä»¬åœ¨ä¸åŒçš„åœºæ™¯ä¸‹ç»å¸¸èƒ½çœ‹åˆ°å¼¹å‡ºä¸åŒé”®ç›˜ç±»å‹ï¼Œæ¯”å¦‚è¾“å…¥å¯†ç ã€æ•°å­—ã€é‚®ç®±ç­‰ï¼Œæˆ‘ä»¬é€šè¿‡keyboardTypeå±æ€§æ¥è®¾ç½®: default number-pad decimal-pad numeric email-address phone-pad 1234&lt;View style=&#123;styles.container&#125;&gt; &lt;TextInput keyboardType=&quot;number-pad&quot;&gt;&lt;/TextInput&gt;&lt;/View&gt; ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºemail-addressï¼Œè¾“å…¥é‚®ç®±ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ•ˆæœï¼š æœ‰ä¸€äº›ç‰¹æ®Šçš„å€¼ä»…iOSä¸‹å¯ç”¨ï¼š ascii-capable numbers-and-punctuation url name-phone-pad twitter web-search æˆ‘ä»¬çœ‹ä¸‹urlçš„æ•ˆæœï¼š åœ¨ç”µå•†åº”ç”¨ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¡«å†™æ”¶è´§åœ°å€ã€è¯´æ˜ä¿¡æ¯ç­‰å¤šè¡Œæ–‡æœ¬ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®multilineä¸ºtrueï¼ŒåŒæ—¶å®‰å“ä¸Šæ–‡æœ¬é»˜è®¤ä¼šå‚ç›´å±…ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ textAlignVertical: &#39;top&#39;çš„æ ·å¼ï¼š 123456&lt;TextInput style=&#123;&#123; width: 300, height: 120, textAlignVertical: &#x27;top&#x27;&#125;&#125; multiline=&#123;true&#125;&gt;&lt;/TextInput&gt; åœ¨ç™»å½•é¡µé¢ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†è¾“å…¥åçš„å¯†ç è¿›è¡Œé®æŒ¡ï¼Œç¡®ä¿æˆ‘ä»¬å½•å…¥ä¿¡æ¯çš„å®‰å…¨ï¼Œå¯ä»¥ä½¿ç”¨secureTextEntryå±æ€§ï¼š 12&lt;TextInput secureTextEntry=&#123;true&#125;&gt;&lt;/TextInput&gt; è¯¥å±æ€§åœ¨multiline=&#123;true&#125;æ—¶ä¸å¯ä½¿ç”¨ï¼Œæˆ‘ä»¬çœ‹ä¸‹å¯†ç é®æŒ¡çš„æ•ˆæœï¼š æˆ‘ä»¬åœ¨iOSä¸Šç»å¸¸ä¼šé‡åˆ°è¾“å…¥æ¡†é¦–å­—ç¬¦å¤§å†™çš„æƒ…å†µï¼Œé€šè¿‡autoCapitalizeå±æ€§å¯ä»¥è‡ªåŠ¨å°†ç‰¹å®šå­—ç¬¦åˆ‡æ¢ä¸ºå¤§å†™ï¼š 12&lt;TextInput autoCapitalize=&quot;sentences&quot;&gt;&lt;/TextInput&gt; å®ƒæœ‰ä¸‹é¢å‡ ä¸ªæšä¸¾å€¼ï¼š sentencesï¼šæ¯å¥è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼ˆé»˜è®¤ï¼‰ã€‚ charactersï¼šæ‰€æœ‰çš„å­—ç¬¦ã€‚ wordsï¼šæ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ noneï¼šä¸åˆ‡æ¢ã€‚ æˆ‘ä»¬çœ‹ä¸‹ä¸åŒæšä¸¾å€¼çš„æ•ˆæœï¼š ScrollView ScrollViewç»„ä»¶æ˜¯ç”¨æ¥å½“å±å¹•å®½åº¦æˆ–è€…é«˜åº¦ä¸è¶³ä»¥å±•ç¤ºæ‰€æœ‰å†…å®¹æ—¶è¿›è¡Œæ»šåŠ¨å±•ç¤ºçš„ç»„ä»¶ï¼Œå®ƒçš„ç”¨æ³•å’ŒViewç±»ä¼¼ï¼Œä½†æ˜¯å¿…é¡»æœ‰ä¸€ä¸ªç¡®å®šçš„é«˜åº¦ï¼Œæˆ–è€…ä½¿ç”¨flex:1æ¥è®©å®ƒå¡«å……æ•´ä¸ªå±å¹•ï¼š 1234567891011&lt;View&gt; &lt;ScrollView style=&#123;&#123;flex: 1&#125;&#125;&gt; &#123;this.state.list.map((item, index) =&gt; &#123; return ( &lt;View key=&#123;index&#125; style=&#123;&#123;height: 50&#125;&#125;&gt; &lt;Text&gt;scroll view &#123;item&#125;&lt;/Text&gt; &lt;/View&gt; ); &#125;)&#125; &lt;/ScrollView&gt;&lt;/View&gt; ScrollViewæ‰€æœ‰çš„å­å…ƒç´ å°±å¯ä»¥åœ¨å‚ç›´æ–¹å‘ä¸Šæ»šåŠ¨ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ•ˆæœï¼š é€šè¿‡horizontalå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å­å…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šæ’æˆä¸€è¡Œè¿›è¡Œæ»šåŠ¨ï¼š 12345&lt;View&gt; &lt;ScrollView style=&#123;&#123;flex: 1&#125;&#125; horizontal=&#123;true&#125;&gt; // ... &lt;/ScrollView&gt;&lt;/View&gt; äº¤äº’ç»„ä»¶Button Buttonç»„ä»¶åœ¨å¾ˆå¤šUIåº“ä¸­ä¹Ÿéƒ½æœ‰å°è£…ï¼ŒåƒElementçš„el-buttonï¼ŒAntDesignçš„a-buttonï¼Œåœ¨ä¸€äº›è¡¨å•æäº¤æˆ–è€…éœ€è¦è§¦å‘äº‹ä»¶æ—¶ä½¿ç”¨ã€‚RNä¸­Buttonæœ‰ä¸¤ä¸ªé‡è¦çš„propsï¼Œtitleå±•ç¤ºæŒ‰é’®çš„æ–‡å­—å’ŒonPressè§¦å‘ç‚¹å‡»äº‹ä»¶ï¼š 1234567891011121314class Index extends Component &#123; onClick = () =&gt; &#123; console.log(&#x27;click&#x27;); &#125;; render() &#123; return ( &lt;View &gt; &lt;Button title=&quot;æˆ‘æ˜¯ä¸€ä¸ªæŒ‰é’®&quot; onPress=&#123;() =&gt; this.onClick()&#125;&gt;&lt;/Button&gt; &lt;/View&gt; ); &#125;&#125; æˆ‘ä»¬å‘ç°Buttonç»„ä»¶åœ¨Androidå’ŒiOSä¸Šçš„è¡¨ç°å½¢å¼æœ‰äº›åŒºåˆ«ï¼š Buttonçš„colorå±æ€§å¯ä»¥æ”¹å˜æŒ‰é’®çš„é¢œè‰²ï¼Œåœ¨Androidä¸‹æ”¹å˜èƒŒæ™¯è‰²ï¼ŒiOSæ”¹å˜æ–‡æœ¬é¢œè‰²ï¼š 1234&lt;Button color=&quot;red&quot; title=&quot;æˆ‘æ˜¯ä¸€ä¸ªæŒ‰é’®&quot; onPress=&#123;() =&gt; this.onClick()&#125;&gt;&lt;/Button&gt; ç”±äºButtonåœ¨ä¸åŒå¹³å°çš„è¡¨ç°å½¢å¼ä¸ä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨Viewå’ŒTextå°è£…è‡ªå·±çš„Buttonç»„ä»¶ï¼Œæˆ–è€…ä½¿ç”¨ç¤¾åŒºç»„ä»¶ï¼Œæ¯”å¦‚react-native-buttonæˆ–è€…react-native-elementsçš„Buttonã€‚ 12345678910111213141516171819202122232425import Button from &#x27;react-native-button&#x27;;class Index extends Component &#123; onClick = () =&gt; &#123; console.log(&#x27;click&#x27;); &#125;; render() &#123; return ( &lt;View &gt; &lt;Button style=&#123;&#123; fontSize: 20, color: &#x27;green&#x27;, width: 200, height: 300, backgroundColor: &#x27;red&#x27;, borderRadius: 4, &#125;&#125; onPress=&#123;() =&gt; this.onClick()&#125;&gt; Press Me! &lt;/Button&gt; &lt;/View&gt; ); &#125;&#125; Switch Switchç»„ä»¶æ˜¯ä¸€ä¸ªè·¨å¹³å°é€šç”¨çš„â€œå¼€å…³â€ç»„ä»¶ï¼Œåœ¨åº”ç”¨ä¸­å¾ˆå¤šæ—¶å€™ä¼šä½¿ç”¨ä¸€ä¸ªå¼€å…³ç»„ä»¶æ¥æ§åˆ¶æŸäº›åŠŸèƒ½æ˜¯å¦å¼€å¯ï¼›å®ƒæä¾›çš„å±æ€§ä¸å¤šï¼Œvalueå±æ€§ç”¨æ¥è®¾ç½®ç»„ä»¶å½“å‰çš„å€¼ï¼ŒonValueChangeæ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œå½“ç»„ä»¶çš„å€¼æ”¹å˜æ—¶è°ƒç”¨æ­¤å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°ä¸ºç»„ä»¶æ–°çš„å€¼ï¼š 1234567891011121314151617181920212223class Index extends Component &#123; constructor() &#123; super(); this.state = &#123; isEnabled: true, &#125;; &#125; onClickSwitch = (val) =&gt; &#123; this.setState(&#123; isEnabled: val, &#125;); &#125;; render() &#123; return ( &lt;View&gt; &lt;Switch value=&#123;this.state.isEnabled&#125; onValueChange=&#123;(val) =&gt; this.onClickSwitch(val)&#125;&gt;&lt;/Switch&gt; &lt;Text&gt;&#123;JSON.stringify(this.state.isEnabled)&#125;&lt;/Text&gt; &lt;/View&gt; ); &#125;&#125; æˆ‘ä»¬çœ‹ä¸‹switchç»„ä»¶çš„æ•ˆæœï¼š switchç»„ä»¶è¿˜å¯ä»¥æ”¹å˜é¢œè‰²ï¼Œæ”¯æŒä»¥ä¸‹ä¸‰ç§å±æ€§ï¼š thumbColorï¼šå¼€å…³ä¸Šåœ†å½¢æŒ‰é’®çš„èƒŒæ™¯é¢œè‰²ã€‚åœ¨ iOS ä¸Šè®¾ç½®æ­¤é¢œè‰²ä¼šä¸¢å¤±æŒ‰é’®çš„æŠ•å½±æ•ˆæœã€‚ trackColorï¼šå…³é—­çŠ¶æ€æ—¶çš„è¾¹æ¡†é¢œè‰²(iOS)æˆ–èƒŒæ™¯é¢œè‰²(Android)ã€‚ ios_backgroundColorï¼šiOSä¸‹ï¼Œè‡ªå®šä¹‰çš„èƒŒæ™¯é¢œè‰²ã€‚ æˆ‘ä»¬ç»™ä¸‰ä¸ªä¸åŒå±æ€§è®¾ç½®ä¸åŒé¢œè‰²ï¼Œä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆé€‰çº¢å’Œè“ï¼Œé—®å°±æ˜¯è‡ªå¤çº¢è“å‡ºCPï¼š 123456&lt;Switch thumbColor=&#123;&#x27;blue&#x27;&#125; trackColor=&#123;&#x27;red&#x27;&#125; ios_backgroundColor=&#123;&#x27;yellow&#x27;&#125; value=&#123;this.state.isEnabled&#125; onValueChange=&#123;val =&gt; this.onClickSwitch(val)&#125;&gt;&lt;/Switch&gt; æˆ‘ä»¬çœ‹åˆ°thumbColorå’Œios_backgroundColoråœ¨iOSå¹³å°èƒ½å¤Ÿæ”¯æŒï¼Œä½†æ˜¯trackColorè¡¨ç°çš„ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼š åœ¨å®‰å“å¹³å°å°±åªèƒ½çœ‹åˆ°thumbColorçš„æ•ˆæœï¼š Slider å®˜æ–¹çš„Sliderç»„ä»¶å·²ç»åºŸå¼ƒï¼Œæ¨èå®‰è£…ä½¿ç”¨ç¤¾åŒºçš„Sliderï¼š 123yarn add @react-native-community/slider# ornpm install @react-native-community/slider --save å¦‚æœåœ¨iOSï¼Œè¿˜éœ€è¦åœ¨iosç›®å½•ä¸‹è¿è¡Œpod installï¼›Sliderç»„ä»¶ä¹Ÿæ˜¯valueå±æ€§è®¾ç½®è¿›åº¦ï¼ŒonValueChangeå€¼çš„å›è°ƒå‡½æ•°ï¼š 1234567891011121314151617181920212223242526import Slider from &#x27;@react-native-community/slider&#x27;;class Index extends Component &#123; constructor() &#123; super(); this.state = &#123; slider: 0, &#125;; &#125; onChangeSlider1 = val =&gt; &#123; this.setState(&#123; slider: val, &#125;); &#125;; render()&#123; return ( &lt;Slider value=&#123;this.state.slider&#125; minimumValue=&#123;0&#125; maximumValue=&#123;1&#125; minimumTrackTintColor=&quot;#f0f0f0&quot; maximumTrackTintColor=&quot;#000000&quot; onValueChange=&#123;val =&gt; this.onChangeSlider(val)&#125; /&gt; ) &#125;&#125; å¦‚æœæˆ‘ä»¬éœ€è¦å›ºå®šçš„å‡ ä¸ªå€¼ï¼Œå¯ä»¥ä½¿ç”¨stepè¿›è¡Œæ­¥è¿›è®¾ç½®ï¼Œstepçš„å€¼å¿…é¡»æ˜¯åœ¨minimumValueå’ŒmaximumValueèŒƒå›´ä¹‹å†…çš„ï¼š 1234567&lt;Slider value=&#123;this.state.slider&#125; step=&#123;2&#125; minimumValue=&#123;0&#125; maximumValue=&#123;10&#125; onValueChange=&#123;val =&gt; this.onChangeSlider2(val)&#125;/&gt; Sliderè¿˜æ”¯æŒtapToSeekå±æ€§ï¼Œå…è®¸ç‚¹å‡»æ»‘å—è½¨è¿¹æ¥è®¾ç½®å€¼ï¼Œè¿™ä¸ªå€¼é»˜è®¤ä¸ºfalseï¼Œåœ¨å®‰å“ä¸Šæ²¡æœ‰å½±å“ï¼š 123456&lt;Slider tapToSeek=&#123;true&#125; step=&#123;2&#125; minimumValue=&#123;0&#125; maximumValue=&#123;10&#125;/&gt; æˆ‘ä»¬çœ‹ä¸‹Sliderå‡ ä¸ªå±æ€§çš„æ•ˆæœï¼š åˆ—è¡¨ç»„ä»¶FlatList FlatListç»„ä»¶æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„åˆ—è¡¨ç»„ä»¶ï¼›æˆ‘ä»¬å‰é¢è¯´åˆ°ï¼ŒScrollViewä¹Ÿæ˜¯ä¸€ä¸ªæ»šåŠ¨å±•ç¤ºçš„ç»„ä»¶ï¼Œé‚£ä¹ˆä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæˆ‘ä»¬é€šè¿‡ScrollViewçš„ç”¨æ³•ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œå®ƒä¼šç®€å•ç²—æš´åœ°æŠŠæ‰€æœ‰å­å…ƒç´ ä¸€æ¬¡æ€§å…¨éƒ¨æ¸²æŸ“å‡ºæ¥ï¼›å¦‚æœåˆ—è¡¨æ•°æ®é‡å°è¿›è¡Œå±•ç¤ºæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸€æ¬¡æ€§å±•ç¤ºå¥½å‡ å±çš„æ•°æ®ï¼Œé‚£ä¹ˆåˆ›å»ºå’Œæ¸²æŸ“éƒ½ä¼šé€ æˆæ€§èƒ½çš„æµªè´¹ã€‚ è€ŒFlatListä¼šæƒ°æ€§çš„æ¸²æŸ“å­å…ƒç´ ï¼Œåªåœ¨å®ƒä»¬å°†è¦å‡ºç°åœ¨å±å¹•ä¸­æ—¶å¼€å§‹æ¸²æŸ“ã€‚é™¤äº†é«˜æ€§èƒ½ï¼ŒFlatListè¿˜æ”¯æŒä»¥ä¸‹åŠŸèƒ½ï¼š å®Œå…¨è·¨å¹³å°ã€‚ æ”¯æŒæ°´å¹³å¸ƒå±€æ¨¡å¼ã€‚ è¡Œç»„ä»¶æ˜¾ç¤ºæˆ–éšè—æ—¶å¯é…ç½®å›è°ƒäº‹ä»¶ã€‚ æ”¯æŒå•ç‹¬çš„å¤´éƒ¨ç»„ä»¶ã€‚ æ”¯æŒå•ç‹¬çš„å°¾éƒ¨ç»„ä»¶ã€‚ æ”¯æŒè‡ªå®šä¹‰è¡Œé—´åˆ†éš”çº¿ã€‚ æ”¯æŒä¸‹æ‹‰åˆ·æ–°ã€‚ æ”¯æŒä¸Šæ‹‰åŠ è½½ã€‚ æ”¯æŒè·³è½¬åˆ°æŒ‡å®šè¡Œï¼ˆScrollToIndexï¼‰ã€‚ æ”¯æŒå¤šåˆ—å¸ƒå±€ã€‚ FlatListç»„ä»¶å¿…é¡»çš„ä¸¤ä¸ªå±æ€§æ˜¯dataå’ŒrenderItemï¼Œdataæ˜¯åˆ—è¡¨çš„æ•°æ®æºï¼Œæ¥æ”¶ä¸€ä¸ªæ•°ç»„æ•°æ®ï¼›renderItemåˆ™ä»æ•°æ®æºä¸­é€ä¸ªè§£ææ•°æ®ï¼Œç„¶åå›è°ƒä¸€ä¸ªæ¸²æŸ“ç»„ä»¶æ ¼å¼ç»™FlatListè¿›è¡Œæ¸²æŸ“ï¼š 12345678910111213141516171819class Index extends Component &#123; render() &#123; return ( &lt;View&gt; &lt;FlatList data=&#123;[ &#123;key: &#x27;Devin&#x27;&#125;, &#123;key: &#x27;Jackson&#x27;&#125;, &#123;key: &#x27;James&#x27;&#125;]&#125; keyExtractor=&#123;item =&gt; item.key&#125; renderItem=&#123;(&#123;item&#125;) =&gt; ( &lt;View style=&#123;&#123;height: 50&#125;&#125;&gt; &lt;Text&gt;&#123;item.key&#125;&lt;/Text&gt; &lt;/View&gt; )&#125;&gt;&lt;/FlatList&gt; &lt;/View&gt; ); &#125;&#125; ä¸ºäº†æ¸²æŸ“çš„å”¯ä¸€æ€§ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è®¾ç½®keyExtractorå±æ€§ï¼ŒæŒ‡å®šitemçš„keyä½œä¸ºåˆ—è¡¨æ¯ä¸€é¡¹çš„å”¯ä¸€æ ‡è¯†ï¼›ç„¶åæˆ‘ä»¬çœ‹ä¸‹å®ƒçš„ä¸‹æ‹‰åˆ·æ–°åŠŸèƒ½ï¼Œå¦‚æœè®¾ç½®äº†onRefreshäº‹ä»¶ï¼Œä¼šåœ¨åˆ—è¡¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªæ ‡å‡†çš„RefreshControlæ§ä»¶ï¼Œæˆ‘ä»¬ä¸‹æ‹‰æ—¶å°±ä¼šè§¦å‘onRefreshå›è°ƒï¼š 123456789101112131415161718192021222324252627282930313233class Index extends Component &#123; constructor() &#123; super(); this.state = &#123; isLoading: false, &#125;; &#125; // ä¸‹æ‹‰åˆ·æ–° loadData = () =&gt; &#123; this.setState(&#123; isLoading: true, &#125;); // æ¨¡æ‹Ÿè¯·æ±‚æ•°æ® setTimeout(() =&gt; &#123; this.setState(&#123; isLoading: false, &#125;); &#125;, 1500); &#125;; render() &#123; return ( &lt;View&gt; &lt;FlatList data=&#123;[...]&#125; refreshing=&#123;this.state.isLoading&#125; onRefresh=&#123;() =&gt; &#123; //ä¸‹æ‹‰åˆ·æ–°åŠ è½½æ•°æ® this.loadData(); &#125;&#125;&gt;&lt;/FlatList&gt; &lt;/View&gt; ); &#125;&#125; ä¸Šæ‹‰åŠ è½½çš„å¤„ç†ç›¸å¯¹æ¯”è¾ƒç®€å•äº†ï¼Œå½“åˆ—è¡¨è¢«æ»šåŠ¨åˆ°è·ç¦»å†…å®¹æœ€åº•éƒ¨ä¸è¶³onEndReachedThresholdå±æ€§çš„è·ç¦»æ—¶ï¼Œè°ƒç”¨onEndReachedå›è°ƒï¼š 12345678910111213141516171819class Index extends Component &#123; // åŠ è½½æ›´å¤šæ•°æ® loadMoreData = () =&gt; &#123; // è¯·æ±‚æ¥å£ï¼Œå‘dataä¸­æ·»åŠ æ•°æ® &#125;; render() &#123; return ( &lt;View&gt; &lt;FlatList data=&#123;[...]&#125; onEndReachedThreshold=&#123;10&#125; onEndReached=&#123;() =&gt; &#123; // ä¸Šæ‹‰åŠ è½½ this.loadMoreData() &#125;&#125;&gt;&lt;/FlatList&gt; &lt;/View&gt; ); &#125;&#125; è¿™æ ·ä¸Šæ‹‰åŠ è½½åï¼Œå¦‚æœæ•°æ®è¯·æ±‚å®Œæˆï¼Œåˆ—è¡¨åº•éƒ¨ä¼šçªç„¶ä¸€ä¸‹å¤šå‡ºå¾ˆå¤šæ•°æ®ï¼Œå°±å¾ˆçªç„¶ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨ListFooterComponentå±æ€§åœ¨åˆ—è¡¨åº•éƒ¨æ¸²æŸ“ä¸€ä¸ªåŠ è½½ä¸­çš„loadingè¿›è¡Œæç¤ºï¼š 123456789101112131415161718192021222324252627class Index extends Component &#123; constructor() &#123; super(); this.state = &#123; // æ­£åœ¨åŠ è½½æ›´å¤šæ•°æ® isMoreData: false, &#125;; &#125; renderLoadMoreView = () =&gt; &#123; return ( &lt;View&gt; &#123;this.state.isMoreData ? ( &lt;Text&gt;æ­£åœ¨åŠ è½½æ›´å¤š...&lt;/Text&gt; ) : (&lt;&gt;&lt;/&gt;)&#125; &lt;/View&gt; ); &#125;; render() &#123; return ( &lt;View&gt; &lt;FlatList data=&#123;[...]&#125; ListFooterComponent=&#123;() =&gt; this.renderLoadMoreView()&#125;&gt;&lt;/FlatList&gt; &lt;/View&gt; ); &#125;&#125; æˆ‘ä»¬çœ‹ä¸‹æ•´ä¸ªä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½çš„æ•ˆæœï¼š é€šè¿‡ItemSeparatorComponentå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¡Œä¸è¡Œä¹‹é—´æ¸²æŸ“åˆ†å‰²çº¿ï¼Œåˆ†å‰²çº¿ä¸ä¼šå‡ºç°åœ¨ç¬¬ä¸€è¡Œä¹‹å‰å’Œæœ€åä¸€è¡Œä¹‹åã€‚ 12345678&lt;FlatList ItemSeparatorComponent=&#123;() =&gt; ( &lt;View style=&#123;&#123; height: 1, backgroundColor: &#x27;red&#x27;, &#125;&#125;&gt;&lt;/View&gt; )&#125;&gt;&lt;/FlatList&gt; æˆ‘ä»¬çœ‹ä¸‹åˆ†å‰²çº¿çš„æ•ˆæœï¼š FlatListæä¾›äº†å¤šä¸ªscrollå‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥æ»šåŠ¨åˆ°å¯¹åº”çš„ä½ç½®ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹scrollToIndexçš„ç”¨æ³•ï¼Œè¿™ä¸ªå‡½æ•°ç”¨äºæ»šåŠ¨åˆ°å¯¹åº”çš„indexçš„ä½ç½®ï¼›é¦–å…ˆæˆ‘ä»¬éœ€è¦é€šè¿‡getItemLayoutå±æ€§å‘Šè¯‰Flatlistæ•´ä¸ªåˆ—è¡¨çš„ä¸€äº›ä¿¡æ¯ï¼š 1234567&lt;FlatList ref=&#123;this.flatListRef&#125; getItemLayout=&#123;(data, index) =&gt; (&#123; length: ITEM_HEIGHT, index, offset: ITEM_HEIGHT * index, &#125;)&#125;&gt;&lt;/FlatList&gt; getItemLayoutå±æ€§æ˜¯ä¸€ä¸ªå¯é€‰çš„ä¼˜åŒ–å±æ€§ï¼Œç”¨äºé¿å…åŠ¨æ€æµ‹é‡å†…å®¹å°ºå¯¸çš„å¼€é”€ï¼ŒscrollToIndexå‡½æ•°è°ƒç”¨æ—¶éœ€è¦è®¾ç½®è¿™ä¸ªå±æ€§ï¼›è¿™é‡Œçš„ITEM_HEIGHTè¡¨ç¤ºæ•´ä¸ªitemçš„è¡Œé«˜ï¼Œå¦‚æœæˆ‘ä»¬åƒä¸Šé¢ä¸€æ ·ä½¿ç”¨äº†ItemSeparatorComponentå±æ€§ï¼Œéœ€è¦æŠŠåˆ†å‰²çº¿çš„é«˜åº¦ä¹Ÿç®—åœ¨ITEM_HEIGHTé‡Œé¢ï¼Œå¦åˆ™æ»šåŠ¨çš„è·ç¦»ä¼šæœ‰åå·®ã€‚ 12345678910111213141516171819class Index extends Component &#123; constructor() &#123; super(); this.flatListRef = React.createRef(); &#125; componentDidMount() &#123; setTimeout(() =&gt; &#123; this.flatListRef.current.scrollToIndex(&#123; index: 6, animated: true, &#125;); &#125;, 1000); &#125; render() &#123; return ( &lt;FlatList ref=&#123;this.flatListRef&#125;&gt;&lt;/FlatList&gt; )&#125; æˆ‘ä»¬çœ‹ä¸‹scrollToIndexçš„æ•ˆæœï¼š SectionList SectionListç»„ä»¶å’ŒFlatListä¸€æ ·ï¼Œéƒ½æ˜¯åˆ—è¡¨ç»„ä»¶ï¼Œè€Œä¸”ä¸¤è€…éƒ½æ˜¯åŸºäºVirtualizedListè¿›è¡Œå°è£…çš„ï¼Œä¸åŒçš„æ˜¯SectionListæœ‰ä¸€ä¸ªåˆ†ç»„(section)çš„åŠŸèƒ½ï¼Œç±»ä¼¼äºé€šè®¯å½•çš„åŠŸèƒ½ï¼Œå®ƒæ”¯æŒä¸‹é¢åŠŸèƒ½ï¼š å®Œå…¨è·¨å¹³å°ã€‚ è¡Œç»„ä»¶æ˜¾ç¤ºæˆ–éšè—æ—¶å¯é…ç½®å›è°ƒäº‹ä»¶ã€‚ æ”¯æŒå•ç‹¬çš„å¤´éƒ¨ç»„ä»¶ã€‚ æ”¯æŒå•ç‹¬çš„å°¾éƒ¨ç»„ä»¶ã€‚ æ”¯æŒè‡ªå®šä¹‰è¡Œé—´åˆ†éš”çº¿ã€‚ æ”¯æŒåˆ†ç»„çš„å¤´éƒ¨ç»„ä»¶ã€‚ æ”¯æŒåˆ†ç»„çš„åˆ†éš”çº¿ã€‚ æ”¯æŒå¤šç§æ•°æ®æºç»“æ„ æ”¯æŒä¸‹æ‹‰åˆ·æ–°ã€‚ æ”¯æŒä¸Šæ‹‰åŠ è½½ã€‚ SectionListçš„æ•°æ®sectionsä¹Ÿæ˜¯éœ€è¦åˆ†ç»„çš„ï¼Œæ•°æ®åœ¨æ¯ä¸ªåˆ†ç±»çš„dataæ•°ç»„ä¸­ï¼›SectionListè¿˜å¤šäº†ä¸€ä¸ªrenderSectionHeaderå±æ€§å¯ä»¥ç”¨æ¥æ¸²æŸ“sectionçš„å¤´éƒ¨ï¼š 12345678910111213141516171819202122const DATA = [ &#123; title: &#x27;A&#x27;, data: [&#x27;A1&#x27;], &#125;, &#123; title: &#x27;B&#x27;, data: [&#x27;B1&#x27;, &#x27;B2&#x27;], &#125;,]&lt;SectionList sections=&#123;DATA&#125; renderItem=&#123;(&#123;item&#125;) =&gt; ( &lt;View&gt; &lt;Text&gt;&#123;item&#125;&lt;/Text&gt; &lt;/View&gt; )&#125; renderSectionHeader=&#123;(&#123;section: &#123;title&#125;&#125;) =&gt; ( &lt;Text&gt; &#123;title&#125; &lt;/Text&gt; )&#125;&gt;&lt;/SectionList&gt; åœ¨iOSä¸Šï¼Œæ¯ä¸ªsectionçš„å¤´éƒ¨ä¼šæœ‰å¸é¡¶çš„æ•ˆæœï¼ŒAndroidä¸Šåˆ™æ²¡æœ‰è¯¥æ•ˆæœï¼Œæˆ‘ä»¬çœ‹ä¸‹SectionListæ•ˆæœï¼š ä¸‹æ‹‰åˆ·æ–°å’Œä¸Šæ‹‰åŠ è½½çš„åŠŸèƒ½å’ŒFlatListç»„ä»¶ç›¸åŒï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚ VirtualizedList VirtualizedListç»„ä»¶æ˜¯FlatListå’ŒSectionListçš„åº•å±‚å®ç°ï¼›FlatListå’ŒSectionListä½¿ç”¨èµ·æ¥æ›´åŠ çš„æ–¹ä¾¿ï¼Œå¦‚æœè¿™ä¸¤ä¸ªç»„ä»¶æ»¡è¶³ä¸äº†æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘VirtualizedListã€‚ VirtualizedListåœ¨å±å¹•çª—å£ç»´æŠ¤äº†ä¸€ä¸ªå›ºå®šé«˜åº¦çš„æ¸²æŸ“çª—å£ï¼Œåœ¨æ¸²æŸ“çª—å£ä¹‹å¤–çš„å…ƒç´ ç”¨å›ºå®šé«˜åº¦çš„ç©ºç™½å…ƒç´ è¿›è¡Œæ¸²æŸ“ï¼ŒåŒæ—¶è®©è¿™ä¸ªçª—å£ç›‘å¬å†…éƒ¨çš„æ»šåŠ¨äº‹ä»¶ï¼Œå½“å…ƒç´ ç¦»æ¸²æŸ“çª—å£è·ç¦»å¤ªè¿œäº†ï¼Œä¼˜å…ˆçº§è¾ƒä½ï¼Œå½“å…ƒç´ è·ç¦»å¯è§†åŒºè¾ƒè¿‘æ—¶ï¼Œå°±è‡ªåŠ¨è·å¾—äº†ä¸€ä¸ªè¾ƒé«˜çš„æ¸²æŸ“ç­‰çº§ï¼Œé€šè¿‡è¿™ç§æ–¹å¼é€æ­¥æ¸²æŸ“ï¼›æå¤§æ”¹å–„äº†æ¸²æŸ“å¤§æ‰¹é‡æ•°æ®æ—¶çš„å†…å­˜æ¶ˆè€—å’Œä½¿ç”¨æ€§èƒ½ã€‚ å®ƒæœ‰ä¸‹é¢å‡ ä¸ªå¿…ä¼ çš„å±æ€§ï¼š dataï¼šæ¸²æŸ“æ•°æ® renderItemï¼šæ ¹æ®è¡Œæ•°æ® data æ¸²æŸ“æ¯ä¸€è¡Œçš„ç»„ä»¶ getItemï¼šé€šç”¨çš„è·å–å™¨ï¼Œç”¨æ¥ä»ä»»æ„ç±»å‹çš„æ•°æ®å—ä¸­è·å–ä¸€ä¸ªå…ƒç´ ã€‚ getItemCountï¼šç”¨æ¥å†³å®šæ•°æ®å—ä¸­ä¸€å…±æœ‰å¤šå°‘å…ƒç´ ã€‚ getItemå±æ€§æ˜¯VirtualizedListç‰¹æœ‰çš„å±æ€§ï¼Œå®ƒæ¥æ”¶åˆ—è¡¨æ•°æ®å’Œå¯¹åº”çš„indexï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åˆ—è¡¨ä¸­ç›¸åº”çš„æ•°æ®è¿›è¡Œå¤„ç†ç„¶åè¿”å›å‡ºä¸€ä¸ªå…ƒç´ ç»™åˆ°renderItemè¿›è¡Œæ¸²æŸ“ï¼š 12345678910111213141516171819202122232425262728const DATA = [];for (let index = 0; index &lt; 50; index++) &#123; DATA.push(&#123;key: &#x27;&#x27; + index, label: &#x27;&#x27; + index&#125;);&#125;const VirtualizedListComponent = () =&gt; &#123; return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;VirtualizedList data=&#123;DATA&#125; getItemCount=&#123;() =&gt; DATA.length&#125; renderItem=&#123;(&#123;item, index&#125;) =&gt; &#123; return ( &lt;View&gt; &lt;Text&gt;&#123;item.title&#125;&lt;/Text&gt; &lt;/View&gt; ); &#125;&#125; getItem=&#123;(list, index) =&gt; &#123; const item = list[index]; return &#123; id: item.key, title: item.label, &#125;; &#125;&#125; keyExtractor=&#123;item =&gt; item.key&#125;&gt;&lt;/VirtualizedList&gt; &lt;/View&gt; );&#125;; å…¶ä»–çš„å±æ€§å’ŒFlatListã€SectionListåŸºæœ¬ç›¸åŒï¼Œè¿™é‡Œä¸å†èµ˜è¿°äº†ã€‚ å…¶ä»–ç»„ä»¶ActivityIndicator ActivityIndicatorç»„ä»¶ç”¨äºæ˜¾ç¤ºä¸€ä¸ªåœ†å½¢çš„loadingæç¤ºç¬¦å·ï¼Œå®ƒæœ‰ä¸‹é¢å‡ ä¸ªå±æ€§ï¼š colorï¼šæç¤ºç¬¦çš„å‰æ™¯é¢œè‰²ï¼ŒiOSä¸Šé»˜è®¤æ˜¯#999 sizeï¼šæŒ‡ç¤ºå™¨çš„å¤§å°ï¼Œé»˜è®¤ä¸ºâ€™smallâ€™ï¼Œè¿˜å¯è®¾ä¸ºlargeã€‚ animatingï¼šæ˜¯å¦è¦æ˜¾ç¤ºæŒ‡ç¤ºå™¨åŠ¨ç”»ï¼Œé»˜è®¤ä¸º true è¡¨ç¤ºæ˜¾ç¤ºï¼Œfalse åˆ™éšè—ã€‚ hidesWhenStopped(iOS)ï¼šåœ¨animatingä¸ºfalseçš„æ—¶å€™ï¼Œæ˜¯å¦è¦éšè—æŒ‡ç¤ºå™¨ 123456&lt;ActivityIndicator /&gt;&lt;ActivityIndicator size=&quot;large&quot; /&gt;&lt;ActivityIndicator color=&quot;#0000ff&quot; /&gt;&lt;ActivityIndicator animating=&#123;false&#125; /&gt;&lt;ActivityIndicator animating=&#123;false&#125; hidesWhenStopped=&#123;false&#125; /&gt; æˆ‘ä»¬çœ‹ä¸‹å†iOSä¸Šçš„æ•ˆæœï¼š æˆ‘ä»¬çœ‹åˆ°å½“animatingä¸ºfalseæ—¶ï¼Œéšè—ActivityIndicatorçš„åŠ¨æ•ˆï¼Œæ•´ä¸ªæŒ‡ç¤ºå™¨åƒæ˜¯æ¶ˆå¤±äº†ä¸€æ ·ï¼›è¿™æ˜¯å› ä¸ºhidesWhenStoppedé»˜è®¤ä¸ºtrueï¼Œå°†æŒ‡ç¤ºå™¨éšè—äº†ï¼Œå¦‚æœæˆ‘ä»¬å°†è¯¥å±æ€§è®¾ä¸ºfalseï¼Œåˆ™ä¼šå±•ç¤ºä¸€ä¸ªé™æ­¢çŠ¶æ€çš„æŒ‡ç¤ºå™¨ã€‚æˆ‘ä»¬å†çœ‹ä¸‹å®‰å“ä¸‹çš„æŒ‡ç¤ºå™¨æ•ˆæœï¼š hidesWhenStoppedå±æ€§åœ¨å®‰å“ä¸‹æ²¡æœ‰èµ·åˆ°ä½œç”¨ã€‚ StatusBar StatusBarç»„ä»¶ç”¨äºæ§åˆ¶åº”ç”¨é¡¶éƒ¨çš„çŠ¶æ€æ ï¼ŒåŒ…å«æ—¶é—´ï¼Œè¿è¥å•†åç§°ï¼Œç½‘ç»œæƒ…å†µï¼Œç”µæ± æƒ…å†µç­‰ï¼›ç”±äºå®ƒå¯ä»¥åœ¨ä»»ä½•è§†å›¾åŠ è½½ï¼Œå½“æœ‰å¤šä¸ªStatusBarç»„ä»¶æ—¶ï¼ŒååŠ è½½çš„ç»„ä»¶ä¼šè¦†ç›–å‰é¢çš„ï¼Œå› æ­¤ä½¿ç”¨æ—¶éœ€è¦æ³¨æ„ï¼› 1234567&lt;View&gt; &lt;StatusBar backgroundColor=&quot;blue&quot; barStyle=&quot;light-content&quot; /&gt; &lt;View&gt; &lt;StatusBar hidden=&#123;route.statusBarHidden&#125; /&gt; ... &lt;/View&gt;&lt;/View&gt; æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸‹å®ƒæ”¯æŒçš„å±æ€§ã€‚ animatedè®¾ç½®å½“çŠ¶æ€æ çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ˜¯å¦éœ€è¦åŠ å…¥åŠ¨ç”»ï¼›åŠ¨ç”»æ”¯æŒbackgroundColorã€barStyleå’Œhiddenç­‰å±æ€§çš„å˜åŒ–ã€‚hiddenå±æ€§ç”¨äºè®¾ç½®çŠ¶æ€æ æ˜¯å¦éšè—ï¼š 1234&lt;View&gt; &lt;StatusBar animated=&#123;true&#125; hidden=&#123;this.state.hidden&#125;&gt;&lt;/StatusBar&gt; &lt;Text&gt;Status Bar hidden&lt;/Text&gt;&lt;/View&gt; æˆ‘ä»¬çœ‹ä¸‹æ”¹å˜hiddenå¸¦ä¸Šanimatedçš„æ•ˆæœï¼š å¦‚æœanimatedä¸ºfalseåˆ™æ²¡æœ‰åŠ¨ç”»æ•ˆæœï¼Œåˆ‡æ¢çš„æ¯”è¾ƒç”Ÿç¡¬äº†ï¼›backgroundColorå±æ€§è®¾ç½®çŠ¶æ€æ çš„èƒŒæ™¯é¢œè‰²ï¼Œä»…æ”¯æŒå®‰å“ï¼š 123&lt;View&gt; &lt;StatusBar backgroundColor=&quot;blue&quot; /&gt;&lt;/View&gt; barStyleç”¨äºè®¾ç½®çŠ¶æ€æ æ–‡å­—çš„é¢œè‰²ï¼Œå…¶å€¼æ˜¯æšä¸¾ç±»å‹enum(â€˜defaultâ€™, â€˜light-contentâ€™, â€˜dark-contentâ€™)ï¼Œä»…é’ˆå¯¹Android 6.0ä»¥ä¸Šç‰ˆæœ¬: networkActivityIndicatorVisibleå±æ€§æ˜¯ä¸€ä¸ªBooleanç±»å‹ï¼Œåœ¨iOSå¹³å°ä¸ŠæŒ‡å®šæ˜¾ç¤ºä¸€ä¸ªç½‘ç»œæ´»åŠ¨æç¤ºç¬¦ï¼š translucentå±æ€§é€‚ç”¨äºAndroidå¹³å°ï¼Œç”¨æ¥æŒ‡å®šçŠ¶æ€æ æ˜¯å¦é€æ˜ã€‚ 1&lt;StatusBar translucent=&#123; true &#125; backgroundColor=&quot;transparent&quot; /&gt; TouchableWithoutFeedback TouchableWithoutFeedbackç»„ä»¶æ˜¯Touchableç³»åˆ—ç»„ä»¶ä¸­æœ€åŸºæœ¬çš„ä¸€ä¸ªç»„ä»¶ï¼Œåªå“åº”ç”¨æˆ·çš„ç‚¹å‡»äº‹ä»¶ä¸ä¼šåšä»»ä½•UIä¸Šçš„æ”¹å˜ï¼Œè¿™å°±æ˜¯å®ƒçš„åå­—WithoutFeedbackï¼ŒåŒæ—¶å®ƒä¹Ÿä¸èƒ½è®¾ç½®styleæ ·å¼ï¼›å› æ­¤é™¤éæœ‰ç‰¹åˆ«çš„åŸå› ï¼Œå¦åˆ™ä¸€èˆ¬å¾ˆå°‘ç”¨è¿™ä¸ªç»„ä»¶ï¼Œå®ƒæ”¯æŒä»¥ä¸‹å±æ€§ï¼š onPressï¼šå½“è§¦æ‘¸æ“ä½œç»“æŸæ—¶è°ƒç”¨ onLongPressï¼šå½“ç”¨æˆ·é•¿æ—¶é—´æŒ‰å‹ç»„ä»¶(é•¿æŒ‰æ•ˆæœ)çš„æ—¶å€™è°ƒç”¨ onPressInï¼šå½“ç”¨æˆ·å¼€å§‹ç‚¹å‡»æŒ‰é’®æ—¶è°ƒç”¨ onPressOutï¼šå½“ç”¨æˆ·ç‚¹å‡»ç»“æŸæ—¶è°ƒç”¨ disabledï¼šboolå€¼é»˜è®¤falseï¼Œå¦‚æœè®¾ä¸º trueï¼Œåˆ™ç¦æ­¢æ­¤ç»„ä»¶çš„ä¸€åˆ‡äº¤äº’ã€‚ 123456789&lt;TouchableWithoutFeedback onPress=&#123;this._onPress&#125; onLongPress=&#123;this._onLongPress&#125; onPressIn=&#123;this._onPressIn&#125; onPressOut=&#123;this._onPressOut&#125;&gt; &lt;View&gt; &lt;Text&gt;ç‚¹å‡»æŒ‰é’®&lt;/Text&gt; &lt;/View&gt;&lt;/TouchableWithoutFeedback&gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTouchableç³»åˆ—ç»„ä»¶éƒ½åªæ”¯æŒä¸€ä¸ªå­å…ƒç´ ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªï¼‰ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦æ”¾ç½®å¤šä¸ªå…ƒç´ ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªViewåŒ…è£¹å®ƒä»¬ã€‚ TouchableOpacity TouchableHighlightç»„ä»¶æ˜¯Touchableç³»åˆ—ç»„ä»¶ä¸­æ¯”è¾ƒå¸¸ç”¨çš„ï¼Œå’Œå®ƒçš„åå­—Opacityä¸€æ ·ï¼Œå®ƒæ˜¯é€šè¿‡åœ¨æŒ‰ä¸‹å»æ”¹å˜è§†å›¾çš„ä¸é€æ˜åº¦æ¥è¡¨ç¤ºæŒ‰é’®è¢«ç‚¹å‡»çš„ï¼Œç›¸æ¯”TouchableHighlightå°‘äº†ä¸€ä¸ªé¢å¤–çš„é¢œè‰²å˜åŒ–ï¼Œå®ƒæ”¯æŒè®¾ç½®styleæ ·å¼ã€‚ å®ƒæœ€é‡è¦çš„ä¸€ä¸ªå±æ€§å°±æ˜¯activeOpacityï¼Œè¡¨ç¤ºæŒ‰é’®è¢«è§¦æ‘¸æ“ä½œæ¿€æ´»æ—¶ä»¥å¤šå°‘ä¸é€æ˜åº¦æ˜¾ç¤ºï¼ˆ0 åˆ° 1 ä¹‹é—´ï¼‰ï¼Œé»˜è®¤å€¼ä¸º 0.2ï¼Œæ•°å€¼è¶Šå°é€æ˜æ•ˆæœæ•ˆæœè¶Šæ˜æ˜¾ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸€ä¸ªå¤§ä¸€ç‚¹çš„æ•°å€¼ï¼š 12345&lt;TouchableOpacity activeOpacity=&#123;0.6&#125; style=&#123;&#123;marginTop: 40&#125;&#125;&gt; &lt;View&gt; &lt;Text&gt;ç‚¹å‡»TouchableOpacityæŒ‰é’®&lt;/Text&gt; &lt;/View&gt;&lt;/TouchableOpacity&gt; æˆ‘ä»¬çœ‹ä¸‹TouchableOpacityç‚¹å‡ºè§¦å‘çš„æ•ˆæœï¼š TouchableHighlight TouchableHighlightç»„ä»¶ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ç‚¹å‡»æŒ‰é’®ï¼Œå®ƒåœ¨TouchableWithoutFeedbackçš„åŸºç¡€ä¸Šæ·»åŠ äº†ä¸€äº›UIä¸Šçš„æ‰©å±•ï¼Œå½“æŒ‰é’®ç‚¹å‡»è§¦å‘æ—¶ï¼Œè¯¥è§†å›¾çš„ä¸é€æ˜åº¦ä¼šé™ä½ï¼ŒåŒæ—¶ä¼šçœ‹åˆ°ç›¸åº”çš„é¢œè‰²ï¼›å®ƒæ”¯æŒä»¥ä¸‹å±æ€§ï¼š activeOpacityï¼šè¢«è§¦æ‘¸æ“ä½œæ¿€æ´»æ—¶ä»¥å¤šå°‘ä¸é€æ˜åº¦æ˜¾ç¤º underlayColorï¼šæŒ‰é’®ç‚¹å‡»è§¦å‘æ—¶æ˜¾ç¤ºå‡ºæ¥çš„åº•å±‚çš„é¢œè‰² onHideUnderlayï¼šåº•å±‚çš„é¢œè‰²è¢«éšè—çš„æ—¶å€™è°ƒç”¨ã€‚ onShowUnderlayï¼šå½“åº•å±‚çš„é¢œè‰²è¢«æ˜¾ç¤ºçš„æ—¶å€™è°ƒç”¨ã€‚ 1234567891011&lt;TouchableHighlight underlayColor=&#123;&#x27;orange&#x27;&#125; activeOpacity=&#123;0.5&#125; onPress=&#123;this._onPress&#125; onHideUnderlay=&#123;this._hideUnderlay&#125; onShowUnderlay=&#123;this._showUnderlay&#125; style=&#123;&#123;backgroundColor: &#x27;#4E6EF2&#x27;&#125;&#125;&gt; &lt;View&gt; &lt;Text&gt;ç‚¹å‡»TouchableHighlightæŒ‰é’®&lt;/Text&gt; &lt;/View&gt;&lt;/TouchableHighlight&gt; æˆ‘ä»¬çœ‹ä¸‹TouchableHighlightçš„æ•ˆæœï¼š Modal Modalç»„ä»¶æ˜¯ä¸€ç§ç®€å•çš„è¦†ç›–åœ¨å±å¹•æœ€ä¸Šå±‚æ˜¾ç¤ºå†…å®¹çš„ç»„ä»¶ï¼Œä¸”ç”¨æˆ·æ— æ³•å¯¹ä¸‹å±‚çš„UIè¿›è¡Œæ“ä½œï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥éšæ„åœ¨Modalä¸Šè¿›è¡ŒUIæ“ä½œï¼Œå®ƒæœ‰ä»¥ä¸‹å±æ€§ï¼š visibleï¼šboolå€¼ï¼Œå†³å®šmodalæ˜¯å¦æ˜¾ç¤º transparentï¼šboolå€¼ï¼ŒæŒ‡èƒŒæ™¯æ˜¯å¦é€æ˜ï¼Œé»˜è®¤ä¸ºfalseï¼ŒèƒŒæ™¯ä¸ºç™½è‰² animationTypeï¼šæŒ‡å®šäº† modal çš„åŠ¨ç”»ç±»å‹ slideï¼šä»åº•éƒ¨æ»‘å…¥æ»‘å‡ºã€‚ fadeï¼šæ·¡å…¥æ·¡å‡ºã€‚ noneï¼šæ²¡æœ‰åŠ¨ç”»ï¼Œç›´æ¥è¹¦å‡ºæ¥ã€‚ onShowï¼šonShowå›è°ƒå‡½æ•°ä¼šåœ¨modalæ˜¾ç¤ºæ—¶è°ƒç”¨ã€‚ onDismissï¼šonDismisså›è°ƒä¼šåœ¨modalè¢«å…³é—­æ—¶è°ƒç”¨ Modalç»„ä»¶é€šè¿‡visibleå±æ€§æ¥æ§åˆ¶æ˜¯å¦å‡ºç°ï¼›transparentè®¾ç½®èƒŒæ™¯çš„é€æ˜åº¦ï¼Œå¦‚æœä¸ºfalseï¼Œåˆ™æ•´ä¸ªèƒŒæ™¯éƒ½ä¼šå˜æˆä¸é€æ˜çš„ç™½è‰²è¦†ç›–ï¼›å› æ­¤ä¸€èˆ¬è®¾ç½®ä¸ºtrueï¼Œå†åœ¨æ ¹ç»„ä»¶è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºrbga(0,0,0,0.5)å¢åŠ é»‘è‰²çš„è’™å±‚ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041class Index extends Component &#123; constructor() &#123; super(); this.state = &#123; visible: false, &#125;; &#125; onClick = () =&gt; &#123; this.setState(&#123; visible: !this.state.visible, &#125;); &#125;; render() &#123; return ( &lt;View&gt; &lt;Button title=&quot;æ˜¾ç¤ºModel&quot; onPress=&#123;this.onClick&#125;&gt;&lt;/Button&gt; &lt;Modal visible=&#123;this.state.visible&#125; animationType=&quot;none&quot; transparent=&#123;true&#125;&gt; &lt;View style=&#123;&#123; backgroundColor: &#x27;rgba(0,0,0,0.3)&#x27;, flex: 1, justifyContent: &#x27;center&#x27;, alignItems: &#x27;center&#x27;, &#125;&#125;&gt; &lt;View style=&#123;&#123;width: 200, height: 200, backgroundColor: &#x27;#fff&#x27;&#125;&#125;&gt; &lt;Text&gt;æ ‡é¢˜&lt;/Text&gt; &lt;View&gt; &lt;Button title=&quot;å…³é—­&quot; onPress=&#123;this.onClick&#125;&gt;&lt;/Button&gt; &lt;/View&gt; &lt;/View&gt; &lt;/View&gt; &lt;/Modal&gt; &lt;/View&gt; ) &#125;&#125; æˆ‘ä»¬çœ‹ä¸‹ä¸‰ç§åŠ¨ç”»çš„æ•ˆæœï¼š iOSç»„ä»¶SafeAreaView SafeAreaViewç»„ä»¶ç”¨äºåœ¨ä¸€ä¸ªå®‰å…¨çš„å¯è§†åŒºåŸŸå†…æ¸²æŸ“å†…å®¹ï¼›è¿™ä¸ªç»„ä»¶å­˜åœ¨çš„ç›®çš„å°±æ˜¯é’ˆå¯¹iPhone Xè¿™æ ·å¸¦æœ‰é½åˆ˜æµ·çš„å…¨é¢å±è®¾å¤‡ï¼Œä¸ºäº†é¿å…é¡µé¢å†…å®¹æ¸²æŸ“åˆ°åˆ˜æµ·èŒƒå›´å†…ã€‚æœ¬ç»„ä»¶ç›®å‰ä»…æ”¯æŒiOSè®¾å¤‡ä»¥åŠiOS 11æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ å®ƒçš„ç”¨æ³•ä¹Ÿéå¸¸ç®€å•ï¼Œåªè¦æŠŠæˆ‘ä»¬åŸæœ‰çš„é¡µé¢è§†å›¾é€šè¿‡SafeAreaViewç»„ä»¶åŒ…è£¹èµ·æ¥ï¼ŒåŒæ—¶è®¾ç½®flex: 1ï¼Œä¸€èˆ¬å¯ä»¥åœ¨æ ¹ç»„ä»¶ä¸Šè®¾ç½®ï¼š 1234567const SafeAreaViewComponent = () =&gt; &#123; return ( &lt;SafeAreaView style=&#123;&#123;flex: 1&#125;&#125;&gt; &lt;Text&gt;Page Content&lt;/Text&gt; &lt;/SafeAreaView&gt; );&#125;; æˆ‘ä»¬çœ‹ä¸‹SafeAreaViewç»„ä»¶ä¸ä½¿ç”¨å’Œä½¿ç”¨çš„ä¸¤ç§æ•ˆæœã€‚ ä¸ºäº†åœ¨æ ·å¼ä¸Šé€‚é…iPhone Xçš„å±å¹•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨utilsä¸­å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å•ç‹¬åˆ¤æ–­iPhone Xï¼š 123456789101112131415161718192021222324252627import &#123;Dimensions, Platform&#125; from &#x27;react-native&#x27;;export let screenW = Dimensions.get(&#x27;window&#x27;).width;export let screenH = Dimensions.get(&#x27;window&#x27;).height;// iPhoneXconst X_WIDTH = 375;const X_HEIGHT = 812;export function isIphoneX() &#123; return ( Platform.OS === &#x27;ios&#x27; &amp;&amp; ((screenH === X_HEIGHT &amp;&amp; screenW === X_WIDTH) || (screenH === X_WIDTH &amp;&amp; screenW === X_HEIGHT)) );&#125;export function ifIphoneX(iphoneXStyle, iosStyle, androidStyle) &#123; if (isIphoneX()) &#123; return iphoneXStyle; &#125; else if (Platform.OS === &#x27;ios&#x27;) &#123; return iosStyle; &#125; else &#123; if (androidStyle) return androidStyle; return iosStyle; &#125;&#125; æˆ‘ä»¬åœ¨æ ·å¼ä¸­å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ifIphoneXå‡½æ•°ï¼š 123456789101112const styles = StyleSheet.create(&#123; topBar: &#123; backgroundColor: &#x27;#ffffff&#x27;, ...ifIphoneX(&#123; // iPhone Xæ ·å¼ paddingTop: 44 &#125;, &#123; // iOSæ ·å¼ paddingTop: 20 &#125;) &#125;, &#125;) å®‰å“ç»„ä»¶TouchableNativeFeedback TouchableNativeFeedbackç»„ä»¶æ˜¯Touchableç³»åˆ—ç»„ä»¶ä¸­æœ€åä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥åœ¨Android 5.0ä»¥åè§¦æ‘¸å®ç°æ°´æ³¢çº¹çš„æ•ˆæœï¼Œå› æ­¤ä¹Ÿåªèƒ½åœ¨Androidå¹³å°ä½¿ç”¨ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡backgroundå±æ€§æ¥è‡ªå®šä¹‰åŸç”Ÿè§¦æ‘¸æ“ä½œåé¦ˆçš„èƒŒæ™¯ï¼Œå®ƒæ¥å—ä¸€ä¸ªæœ‰ç€typeå±æ€§å’Œä¸€äº›åŸºäºtypeå±æ€§çš„é¢å¤–æ•°æ®çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ¨èé€šè¿‡æœ¬ç»„ä»¶çš„å‡ ä¸ªé™æ€æ–¹æ³•æ¥åˆ›å»ºï¼š SelectableBackgroundï¼šä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå®‰å“ä¸»é¢˜é»˜è®¤çš„å¯¹äºè¢«é€‰ä¸­å¯¹è±¡çš„èƒŒæ™¯ SelectableBackgroundBorderlessï¼šä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºå®‰å“ä¸»é¢˜é»˜è®¤çš„å¯¹äºè¢«é€‰ä¸­çš„æ— è¾¹æ¡†å¯¹è±¡çš„èƒŒæ™¯ Rippleï¼šä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå½“æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶äº§ç”Ÿä¸€ä¸ªæ¶Ÿæ¼ªçŠ¶çš„èƒŒæ™¯ï¼Œä½ å¯ä»¥é€šè¿‡ color å‚æ•°æ¥æŒ‡å®šé¢œè‰² ä¸Šé¢çš„æ•ˆæœå¤ªç»•å£ï¼Œæˆ‘çœ‹ä¸‹SelectableBackgroundçš„ç”¨æ³•ï¼š 123456&lt;TouchableNativeFeedback background=&#123;TouchableNativeFeedback.SelectableBackground()&#125;&gt; &lt;View style=&#123;&#123;width: 300, height: 100, backgroundColor: &#x27;red&#x27;&#125;&#125;&gt; &lt;Text&gt;TouchableNativeFeedback&lt;/Text&gt; &lt;/View&gt;&lt;/TouchableNativeFeedback&gt; æˆ‘ä»¬çœ‹åˆ°åœ¨ViewæŒ‰é’®ç‚¹å‡»æ—¶ï¼Œæœ‰æ°´æ³¢çº¹çš„æ•ˆæœï¼š SelectableBackgroundBorderlessçš„æ•ˆæœåˆ™ä¼šè¶…è¿‡æ•´ä¸ªæŒ‰é’®çš„è¾¹æ¡†é™åˆ¶ï¼š 1234&lt;TouchableNativeFeedback background=&#123;TouchableNativeFeedback.SelectableBackgroundBorderless()&#125;&gt; // ...&lt;/TouchableNativeFeedback&gt; æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„æ³¢çº¹éƒ½æ˜¯é»˜è®¤çš„é»‘è‰²ï¼ŒRippleå‡½æ•°æ”¯æŒä¼ å…¥ä¸€ä¸ªcolorå‚æ•°æ¥æŒ‡å®šé¢œè‰²ï¼Œå®ƒçš„ç¬¬äºŒä¸ªå‚æ•°borderlessä¹Ÿèƒ½è®¾ç½®æ¶Ÿæ¼ªæ˜¯å¦æ‰©æ•£åˆ°æŒ‰é’®ä¹‹å¤–ï¼Œè¾¾åˆ°å’ŒSelectableBackgroundBorderlessä¸€æ ·çš„æ•ˆæœï¼š 1static Ripple(color: string, borderless: boolean, rippleRadius: ?number) 1234&lt;TouchableNativeFeedback background=&#123;TouchableNativeFeedback.Ripple(&#x27;blue&#x27;, false)&#125;&gt; // ...&lt;/TouchableNativeFeedback&gt; æ•ˆæœå¦‚ä¸‹ï¼š","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"ç§»åŠ¨ç«¯","slug":"Apps","permalink":"https://xieyufei.com/tags/Apps/"},{"name":"React","slug":"React","permalink":"https://xieyufei.com/tags/React/"},{"name":"ReactNative","slug":"ReactNative","permalink":"https://xieyufei.com/tags/ReactNative/"}]},{"title":"å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹Dockerè¿›é˜¶éƒ¨ç½²","date":"2022-03-22T14:22:22.000Z","path":"2022/03/22/FrontEnd-Docker-Advance.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬å¯¹å®¹å™¨ã€é•œåƒç­‰æ¦‚å¿µåšäº†è¯¦ç»†çš„ä»‹ç»ï¼Œæœ¬æ–‡ä»‹ç»ä¸€äº›å®¹å™¨çš„ç½‘ç»œè¿æ¥ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•é€šè¿‡Dockerfileæ¥æ„å»ºé•œåƒä½¿ç”¨ï¼ŒåŒæ—¶æˆ‘ä»¬å¦‚ä½•åœ¨å‰ç«¯é¡¹ç›®ä¸­ä½¿ç”¨dockeræ¥è¿›è¡Œå®¹å™¨éƒ¨ç½²ã€‚ ç½‘ç»œ æˆ‘ä»¬éƒ¨ç½²çš„å®¹å™¨ä¸­å¾ˆå¤šåº”ç”¨éƒ½æ˜¯éœ€è¦è®©å¤–éƒ¨é€šè¿‡ç½‘ç»œç«¯å£æ¥è¿›è¡Œè®¿é—®çš„ï¼Œæ¯”å¦‚æ¯”å¦‚mysqlçš„3306ç«¯å£ï¼Œmongodbçš„27017ç«¯å£å’Œredisçš„6379ç«¯å£ç­‰ç­‰ï¼›ä¸ä»…æ˜¯å¤–éƒ¨è®¿é—®ï¼Œä¸åŒçš„å®¹å™¨ä¹‹é—´å¯èƒ½è¿˜éœ€è¦è¿›è¡Œé€šä¿¡ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„webåº”ç”¨å®¹å™¨éœ€è¦æ¥è¿æ¥mysqlæˆ–è€…mongodbå®¹å™¨ï¼Œéƒ½æ¶‰åŠåˆ°äº†ç½‘ç»œé€šä¿¡ã€‚ ç«¯å£æ˜ å°„ å®¹å™¨è¦æƒ³è®©å¤–éƒ¨è®¿é—®åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡-Pæˆ–è€…-på‚æ•°æ¥æŒ‡å®šéœ€è¦å¯¹å¤–æš´éœ²çš„ç«¯å£ï¼š 12$ docker run -d -P nginx9226326c42067d282f80dbc18a8a36bf54335b61a84b191a29a5f59d25c9fbc3 ä½¿ç”¨-Pä¼šåœ¨ä¸»æœºç»‘å®šä¸€ä¸ªéšæœºç«¯å£ï¼Œæ˜ å°„åˆ°å®¹å™¨å†…éƒ¨çš„ç«¯å£ï¼›æˆ‘ä»¬æŸ¥çœ‹åˆšåˆšåˆ›å»ºçš„å®¹å™¨ï¼Œå¯ä»¥çœ‹åˆ°éšæœºç«¯å£49154æ˜ å°„åˆ°äº†å®¹å™¨å†…éƒ¨çš„80ç«¯å£ï¼š 123$ docker ps -lCONTAINER ID IMAGE CREATED STATUS PORTS 9226326c4206 nginx About a minute ago Up About a minute 0.0.0.0:49154-&gt;80/tcp, :::49154-&gt;80/tcp ä½¿ç”¨logså‘½ä»¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°nginxçš„è®¿é—®æ—¥å¿—ï¼š 12$ docker logs 9226326c420610.197.92.41 - - [16/Mar/2022:01:40:32 +0000] &quot;GET / HTTP/1.1&quot; 304 0 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Safari/537.36&quot; &quot;-&quot; docker portå¯ä»¥å¿«æ·åœ°è®©æˆ‘ä»¬æŸ¥çœ‹å®¹å™¨ç«¯å£çš„ç»‘å®šæƒ…å†µï¼š 12$ docker port 9226326c420680/tcp -&gt; 0.0.0.0:49154 ä½¿ç”¨-på‚æ•°å¯ä»¥æŒ‡å®šä¸€ä¸ªç«¯å£è¿›è¡Œæ˜ å°„ï¼š 1$ docker run -d -p 3000:80 nginx ä¹Ÿå¯ä»¥ä½¿ç”¨ip:hostPort:containerPortæ ¼å¼æŒ‡å®šæ˜ å°„ä¸€ä¸ªç‰¹å®šçš„ipï¼š 1$ docker run -d -p 127.0.0.1:3000:80 nginx çœç•¥hostPortå‚æ•°æœ¬åœ°ä¸»æœºä¼šè‡ªåŠ¨åˆ†é…ä¸€ä¸ªç«¯å£ï¼Œç±»ä¼¼-På‚æ•°çš„ä½œç”¨ï¼š 1$ docker run -d -p 127.0.0.1::80 nginx è¿˜å¯ä»¥ä½¿ç”¨udpæ¥æŒ‡å®šæ˜ å°„åˆ°udpç«¯å£ï¼š 1$ docker run -d -p 3000:80/udp nginx æœ‰æ—¶å€™æˆ‘ä»¬æƒ³è¦æ˜ å°„å®¹å™¨çš„å¤šä¸ªç«¯å£ï¼Œå¯ä»¥ä½¿ç”¨å¤šä¸ª-på‚æ•°ï¼š 1234$ docker run -d -p 8000:8000 \\ -p 8010:8010\\ nginx æˆ–è€…æ˜ å°„æŸä¸ªèŒƒå›´å†…çš„ç«¯å£åˆ—è¡¨ï¼š 1$ docker run -d -p 8080-8090:8080-8090 nginx dockerç½‘ç»œæ¨¡å¼ æˆ‘ä»¬æƒ³è¦å°†å¤šä¸ªå®¹å™¨è¿›è¡Œäº’è”äº’é€šï¼Œä¸ºäº†é¿å…ä¸åŒå®¹å™¨ä¹‹é—´äº’ç›¸å¹²æ‰°ï¼Œå¯ä»¥ç»™å¤šä¸ªå®¹å™¨å»ºç«‹ä¸åŒçš„å±€åŸŸç½‘ï¼Œè®©å±€åŸŸç½‘ç»œå†…çš„ç½‘ç»œå½¼æ­¤è”é€šã€‚ è¦ç†è§£dockerçš„ç½‘ç»œæ¨¡å¼ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹dockeræœ‰å“ªäº›ç½‘ç»œï¼›æˆ‘ä»¬å®‰è£…dockeråï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸‰ä¸ªç½‘ç»œnoneã€hostå’Œbrdgeï¼Œæˆ‘ä»¬ä½¿ç”¨network lså‘½ä»¤æŸ¥çœ‹ï¼š 12345$ docker network lsNETWORK ID NAME DRIVER SCOPEc64d7d519c22 bridge bridge local6306a0b1d150 host host locald058571d4197 none null local æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸‹è¿™å‡ ä¸ªç½‘ç»œçš„ç”¨é€”ï¼›é¦–å…ˆæ˜¯noneï¼Œnoneé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œè¯¥ç½‘ç»œå…³é—­äº†å®¹å™¨çš„ç½‘ç»œåŠŸèƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨--network=noneæŒ‡å®šä½¿ç”¨noneç½‘ç»œï¼š 123456789101112$ docker run -itd --name=busybox-none --network=none busybox49f88dd75ae774bea817b27c647506eda5ad581403bfbad0877e8333376ae3b0docker exec 49f88dd75ae7 ip a1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue qlen 1000 link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00 inet 127.0.0.1/8 scope host lo valid_lft forever preferred_lft forever2: tunl0@NONE: &lt;NOARP&gt; mtu 1480 qdisc noop qlen 1000 link/ipip 0.0.0.0 brd 0.0.0.03: ip6tnl0@NONE: &lt;NOARP&gt; mtu 1452 qdisc noop qlen 1000 link/tunnel6 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 brd 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00 æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†busyboxé•œåƒï¼Œå¯èƒ½æœ‰çš„ç«¥é‹å¯¹å®ƒä¸äº†è§£ï¼Œè¿™æ˜¯ä¸€ä¸ªé›†æˆå‹ç¼©äº†ä¸‰ç™¾å¤šä¸ªå¸¸ç”¨linuxå‘½ä»¤å’Œå·¥å…·çš„è½¯ä»¶ï¼Œå®ƒè¢«ç§°ä¸ºLinuxå·¥å…·é‡Œçš„ç‘å£«å†›åˆ€ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ç”¨å®ƒçš„ipå‘½ä»¤æŸ¥çœ‹å®¹å™¨çš„ç½‘ç»œè¯¦ç»†æƒ…å†µã€‚ æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªå®¹å™¨é™¤äº†loæœ¬åœ°ç¯å›ç½‘å¡ï¼Œæ²¡æœ‰å…¶ä»–çš„ç½‘å¡ä¿¡æ¯ï¼›ä¸ä»…ä¸èƒ½æ¥æ”¶ä¿¡æ¯ï¼Œä¹Ÿä¸èƒ½å¯¹å¤–å‘é€ä¿¡æ¯ï¼Œæˆ‘ä»¬ç”¨pingå‘½ä»¤æµ‹è¯•ç½‘ç»œæƒ…å†µï¼š 12$ docker exec 49f88dd75ae7 ping xieyufei.comping: bad address &#x27;xieyufei.com&#x27; è¿™ä¸ªç½‘ç»œç›¸å½“äºä¸€ä¸ªå°é—­çš„å­¤å²›ï¼Œé‚£æˆ‘ä»¬ä¸ç¦ä¼šæƒ³ï¼Œè¿™æ ·â€œè‡ªé—­â€çš„ç½‘ç»œæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ å°é—­æ„å‘³ç€éš”ç¦»ï¼Œä¸€äº›å¯¹å®‰å…¨æ€§è¦æ±‚é«˜å¹¶ä¸”ä¸éœ€è¦è”ç½‘çš„åº”ç”¨å¯ä»¥ä½¿ç”¨noneç½‘ç»œã€‚æ¯”å¦‚æŸä¸ªå®¹å™¨çš„å”¯ä¸€ç”¨é€”æ˜¯ç”Ÿæˆéšæœºå¯†ç ï¼Œå°±å¯ä»¥æ”¾åˆ°noneç½‘ç»œä¸­é¿å…å¯†ç è¢«çªƒå–ã€‚ å…¶æ¬¡æ˜¯bridgeç½‘ç»œæ¨¡å¼ï¼Œdockerå®‰è£…æ—¶ä¼šåœ¨å®¿ä¸»æœºä¸Šè™šæ‹Ÿä¸€ä¸ªåä¸ºdocker0çš„ç½‘æ¡¥ï¼Œå¦‚æœä¸æŒ‡å®šâ€“networkï¼Œåˆ›å»ºçš„å®¹å™¨é»˜è®¤éƒ½ä¼šæŒ‚è½½åˆ°docker0ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡å‘½ä»¤æŸ¥çœ‹å®¿ä¸»æœºä¸‹æ‰€æœ‰çš„ç½‘æ¡¥ï¼š 123$ brctl showbridge name bridge id STP enabled interfacesdocker0 8000.02426b8674a4 no è¿™é‡Œçš„ç½‘æ¡¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªè·¯ç”±å™¨ï¼Œå®ƒæŠŠä¸¤ä¸ªç›¸ä¼¼çš„ç½‘ç»œè¿æ¥èµ·æ¥ï¼Œå¹¶å¯¹ç½‘ç»œä¸­çš„æ•°æ®è¿›è¡Œç®¡ç†ï¼ŒåŒæ—¶ä¹Ÿéš”ç¦»å¤–ç•Œå¯¹ç½‘æ¡¥å†…éƒ¨çš„è®¿é—®ï¼›åŒä¸€ä¸ªç½‘æ¡¥ä¸‹çš„å®¹å™¨ä¹‹é—´å¯ä»¥ç›¸äº’é€šä¿¡ï¼›æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡busyboxæŸ¥çœ‹å®¹å™¨çš„ç½‘ç»œæƒ…å†µ 12345678$ docker run -itd --name=busybox-bridge --network=bridge busyboxf45e26e5bb6f94f50061f22937abb132fb9de968fdd59fe7ad524bd81eb2f1b0$ docker exec f45e26e5bb6f ip a181: eth0@if182: &lt;BROADCAST,MULTICAST,UP,LOWER_UP,M-DOWN&gt; mtu 1500 qdisc noqueue link/ether 02:42:ac:11:00:06 brd ff:ff:ff:ff:ff:ff inet 172.17.0.6/16 brd 172.17.255.255 scope global eth0 valid_lft forever preferred_lft forever æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œå®¹å™¨å¤šäº†ä¸€ä¸ªeth0çš„ç½‘å¡ï¼Œå®ƒçš„ipæ˜¯172.17.0.6ã€‚ æœ€åæ˜¯hostç½‘ç»œæ¨¡å¼ï¼Œè¿™ç§æ¨¡å¼ç¦ç”¨äº†Dockerçš„ç½‘ç»œéš”ç¦»ï¼Œå®¹å™¨å…±äº«äº†å®¿ä¸»æœºçš„ç½‘ç»œï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡busyboxæ¥æŸ¥çœ‹å®¹å™¨çš„ç½‘ç»œæƒ…å†µï¼š 12345678$ docker run -itd --name=busybox-host --network=host busybox2d1f6d7a01f1afe1e725cf53423de1d79d261a3b775f6f97f9e2a62de8f6bb74$ docker exec 2d1f6d7a01f1 ip a2: enp4s0f2: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast qlen 1000 link/ether 74:d0:2b:ec:96:8a brd ff:ff:ff:ff:ff:ff inet 192.168.0.100/24 brd 192.168.0.255 scope global dynamic noprefixroute enp4s0f2 valid_lft 37533sec preferred_lft 37533sec æˆ‘ä»¬å‘ç°è¿™é‡Œå®¹å™¨çš„ipåœ°å€æ˜¯192.168.0.100ï¼Œå’Œæˆ‘å®¿ä¸»æœºçš„ipåœ°å€æ˜¯ä¸€æ ·çš„ï¼›hostæ¨¡å¼å…¶å®ç±»ä¼¼äºVmwareçš„æ¡¥æ¥æ¨¡å¼ï¼Œå®¹å™¨æ²¡æœ‰ç‹¬ç«‹çš„ipã€ç«¯å£ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„ipã€ç«¯å£ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯hostæ¨¡å¼ä¸‹ï¼Œä¸éœ€è¦æ·»åŠ -på‚æ•°ï¼Œå› ä¸ºå®ƒä½¿ç”¨çš„å°±æ˜¯ä¸»æœºçš„IPå’Œç«¯å£ï¼Œæ·»åŠ -på‚æ•°åï¼Œåè€Œä¼šå‡ºç°ä»¥ä¸‹è­¦å‘Šï¼š 1WARNING: Published ports are discarded when using host network mode hostæ¨¡å¼ç”±äºå’Œå®¿ä¸»æœºå…±äº«ç½‘ç»œï¼Œå› æ­¤å®ƒçš„ç½‘ç»œæ¨¡å‹æ˜¯æœ€ç®€å•æœ€ä½å»¶è¿Ÿçš„æ¨¡å¼ï¼Œå®¹å™¨è¿›ç¨‹ç›´æ¥ä¸ä¸»æœºç½‘ç»œæ¥å£é€šä¿¡ï¼Œä¸ç‰©ç†æœºæ€§èƒ½ä¸€è‡´ã€‚ä¸è¿‡hostæ¨¡å¼ä¹Ÿä¸åˆ©äºç½‘ç»œè‡ªå®šä¹‰é…ç½®å’Œç®¡ç†ï¼Œæ‰€æœ‰å®¹å™¨ä½¿ç”¨ç›¸åŒçš„ipï¼Œä¸åˆ©äºä¸»æœºèµ„æºçš„åˆ©ç”¨ï¼Œä¸€äº›å¯¹ç½‘ç»œæ€§èƒ½è¦æ±‚æ¯”è¾ƒé«˜çš„å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚ å®¹å™¨äº’è” æˆ‘ä»¬é€šè¿‡å®¹å™¨äº’è”æ¥æµ‹è¯•ä¸¤ä¸ªå®¹å™¨åœ¨åŒä¸€ä¸ªç½‘æ¡¥ä¸‹é¢æ˜¯å¦‚ä½•è¿›è¡Œè¿æ¥äº’é€šçš„ï¼›é¦–å…ˆæˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ªç½‘æ¡¥ï¼š 1$ docker network create -d bridge my-net å¦‚æœå¯¹ç½‘æ¡¥ä¸æ»¡æ„ï¼Œå¯ä»¥é€šè¿‡rmå‘½ä»¤åˆ é™¤å®ƒï¼š 1$ docker network rm my-net æˆ‘ä»¬æ–°å»ºä¸¤ä¸ªå®¹å™¨ï¼Œå¹¶ä¸”æŠŠå®ƒä»¬è¿æ¥åˆ°my-netçš„ç½‘ç»œä¸­ï¼š 12$ docker run -itd --name busybox1 --network my-net busybox$ docker run -itd --name busybox2 --network my-net busybox æˆ‘ä»¬è®©ä¸¤ä¸ªå®¹å™¨ä¹‹é—´äº’ç›¸pingï¼Œå‘ç°ä»–ä»¬ä¹‹é—´èƒ½å¤Ÿpingé€šï¼š 123456789$ docker exec busybox1 ping busybox2PING busybox2 (172.23.0.3): 56 data bytes64 bytes from 172.23.0.3: seq=0 ttl=64 time=0.139 ms64 bytes from 172.23.0.3: seq=1 ttl=64 time=0.215 ms$ docker exec busybox2 ping busybox1PING busybox1 (172.23.0.2): 56 data bytes64 bytes from 172.23.0.2: seq=0 ttl=64 time=0.090 ms64 bytes from 172.23.0.2: seq=1 ttl=64 time=0.224 ms Dockerfile æˆ‘ä»¬åœ¨å‰ä¸€ç¯‡æ–‡ç« ä¸­ç®€å•æåˆ°äº†Dockerfileçš„ä¸¤ä¸ªå‘½ä»¤FROMå’ŒRUNï¼Œå…¶å®å®ƒè¿˜æä¾›äº†å…¶ä»–åŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯¹å®ƒçš„å‘½ä»¤æ·±å…¥è®²è§£ï¼›é¦–å…ˆæˆ‘ä»¬çŸ¥é“Dockerfileæ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ï¼›åœ¨docker buildå‘½ä»¤ä¸­æˆ‘ä»¬ä½¿ç”¨-få‚æ•°æ¥æŒ‡å‘æ–‡ä»¶ä¸­ä»»æ„ä½ç½®çš„Dockerfileï¼š 1$ docker build -f /path/to/Dockerfile FROMæŒ‡ä»¤ FROMæŒ‡ä»¤ç”¨æ¥æŒ‡å®šä¸€ä¸ªåŸºç¡€é•œåƒï¼Œå®ƒå†³å®šäº†Dockerfileæ„å»ºå‡ºçš„é•œåƒä¸ºä½•ç‰©ä»¥åŠæ€æ ·çš„ç¯å¢ƒï¼›å¤§å¤šæ•°çš„Dockerfileï¼Œéƒ½æ˜¯ä»¥FROMæŒ‡ä»¤å¼€å§‹ï¼›å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š 12FROM &lt;image&gt; [AS &lt;name&gt;]FROM &lt;image&gt;:&lt;tag&gt; [AS &lt;name&gt;] Dockerfileå¿…é¡»ä»¥FROMæŒ‡ä»¤å¼€å§‹ï¼Œä¸è¿‡å®ƒæ”¯æŒåœ¨FROMä¹‹å‰ç”±ARGæŒ‡ä»¤å®šä¹‰ä¸€ä¸ªå˜é‡ï¼š 123ARG NG_VERSION=1.19.3FROM nginx:$&#123;NG_VERSION&#125;CMD /bin/bash å¤šé˜¶æ®µæ„å»º æˆ‘ä»¬åœ¨æ„å»ºé•œåƒæ—¶é€šå¸¸ä¼šæœ‰å¤šä¸ªé˜¶æ®µçš„é•œåƒéœ€è¦æ¥è¿›è¡Œæ„å»ºï¼Œæ¯”å¦‚vueé¡¹ç›®æ„å»ºé•œåƒæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç¼–è¯‘é˜¶æ®µæ‰“åŒ…å‡ºdistæ–‡ä»¶ï¼Œè¿˜éœ€è¦åœ¨ç”Ÿäº§è¿è¡Œé˜¶æ®µä½¿ç”¨distæ–‡ä»¶ä½œä¸ºé™æ€èµ„æºï¼›å¦‚æœä¸ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸¤ä¸ªDockerfileæ–‡ä»¶ï¼Œæ„å»ºå‡ºä¸¤ä¸ªé•œåƒï¼Œè¿™æ ·æœ‰ä¸€ä¸ªé•œåƒè‚¯å®šæ˜¯æµªè´¹çš„ã€‚ Dockerä»17.05å¼€å§‹ï¼Œæ”¯æŒå¤šé˜¶æ®µæ„å»ºï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨Dockerfileä¸­å¯ä»¥ä½¿ç”¨å¤šä¸ªFROMæŒ‡ä»¤ï¼Œæ¯ä¸ªFROMæŒ‡ä»¤éƒ½å¯ä»¥ä½¿ç”¨ä¸åŒçš„åŸºç¡€é•œåƒï¼Œå¹¶ä¸”æ¯æ¡æŒ‡ä»¤éƒ½ä¼šå¼€å§‹æ–°é˜¶æ®µçš„æ„å»ºï¼›åœ¨å¤šé˜¶æ®µæ„å»ºä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†èµ„æºä»ä¸€ä¸ªé˜¶æ®µå¤åˆ¶åˆ°å¦ä¸€ä¸ªé˜¶æ®µï¼Œåœ¨æœ€ç»ˆé•œåƒä¸­åªä¿ç•™æˆ‘ä»¬æ‰€éœ€è¦çš„å†…å®¹ã€‚ 123456789FROM node# ...ä¸€äº›æ“ä½œFROM nginx# ...ä¸€äº›æ“ä½œCOPY --from=0 . . ç¬¬äºŒä¸ªFROMæŒ‡ä»¤å¼€å§‹ä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µï¼ŒCOPY --from=0ä»£è¡¨ä»ä¸Šä¸€ä¸ªé˜¶æ®µï¼ˆå³ç¬¬ä¸€é˜¶æ®µï¼‰æ‹·è´æ–‡ä»¶ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œæ„å»ºé˜¶æ®µæ²¡æœ‰å‘½åï¼Œå¯ä»¥ä½¿ç”¨ä»0å¼€å§‹çš„æ•´æ•°ç¼–å·å¼•ç”¨å®ƒï¼›æˆ‘ä»¬å¯ä»¥ç»™FROMæŒ‡ä»¤åŠ ä¸Šä¸€ä¸ªas &lt;Name&gt;ä½œä¸ºæ„å»ºé˜¶æ®µçš„å‘½åã€‚ 12345FROM node as compileFROM nginx as serveCOPY --from=compile . . åœ¨åé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼šæ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–æˆ‘ä»¬çš„æ„å»ºè¿‡ç¨‹ã€‚ åŸºç¡€é•œåƒé€‰æ‹© ç”±äºåŸºç¡€é•œåƒå†³å®šç€æ„å»ºå‡ºé•œåƒäº§ç‰©çš„å¤§å°ï¼Œå› æ­¤é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åŸºç¡€é•œåƒæ˜¾å¾—ååˆ†é‡è¦äº†ã€‚å¦‚æœæˆ‘ä»¬å»hub.docker.comæŸ¥çœ‹nodeçš„æ ‡ç­¾ï¼Œæˆ‘ä»¬ä¼šå‘ç°é™¤äº†ç‰ˆæœ¬å·ä¹‹å¤–ï¼Œåé¢è¿˜ä¼šå¸¦ç€ä¸€äº›çœ‹ä¸æ‡‚çš„å•è¯ï¼Œä»€ä¹ˆalpineï¼Œä»€ä¹ˆslimeäº†ï¼Œè¿™äº›ç‰ˆæœ¬å·éƒ½ä»£è¡¨ç€ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿæˆ‘ä»¬ç®€å•çš„äº†è§£ä¸€ä¸‹ã€‚ dockeré•œåƒä¹‹é—´çš„åŒºåˆ«åœ¨äºåº•å±‚çš„æ“ä½œç³»ç»Ÿ é¦–å…ˆå¦‚æœä»€ä¹ˆéƒ½ä¸å¸¦ï¼Œé»˜è®¤latestï¼Œé‚£å°±æ˜¯å®Œæ•´çš„é•œåƒç‰ˆæœ¬ï¼Œå¦‚æœä½ è¿˜æ˜¯ä¸€ä¸ªå°ç™½ï¼Œå¯¹å…¶ä»–ç‰ˆæœ¬æ²¡æœ‰ä»€ä¹ˆäº†è§£çš„è¯ï¼Œé‚£ä¹ˆé€‰å®ƒæ˜¯è‚¯å®šä¸ä¼šå‡ºé”™çš„ã€‚ å…¶æ¬¡æ˜¯slimç‰ˆæœ¬ï¼Œslimè¡¨ç¤ºæœ€å°å®‰è£…åŒ…ï¼Œä»…åŒ…å«éœ€è¦è¿è¡ŒæŒ‡å®šå®¹å™¨çš„ç‰¹å®šå·¥å…·é›†ã€‚é€šè¿‡çœå»è¾ƒå°‘ä½¿ç”¨çš„å·¥å…·ï¼Œé•œåƒä¼šæ›´å°ã€‚å¦‚æœæˆ‘ä»¬æœåŠ¡å™¨æœ‰ç©ºé—´é™åˆ¶ä¸”ä¸éœ€è¦å®Œæ•´ç‰ˆæœ¬ï¼Œå°±å¯ä»¥ä½¿ç”¨æ­¤é•œåƒã€‚ä¸è¿‡ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬æ—¶ï¼Œè¦è¿›è¡Œå½»åº•çš„æµ‹è¯•ã€‚ ç„¶åæ˜¯æˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°çš„alpineç‰ˆæœ¬ï¼Œalipineé•œåƒåŸºäºalpine linuxé¡¹ç›®ï¼Œè¿™æ˜¯ä¸€ä¸ªç¤¾åŒºå¼€å‘çš„é¢å‘å®‰å…¨åº”ç”¨çš„è½»é‡çº§Linuxå‘è¡Œç‰ˆã€‚å®ƒçš„ä¼˜ç‚¹å°±æ˜¯åŸºäºçš„linuxæ“ä½œç³»ç»Ÿéå¸¸è½»é‡ï¼Œå› æ­¤æ„å»ºå‡ºæ¥çš„é•œåƒä¹Ÿéå¸¸çš„è½»é‡ï¼›å®ƒçš„ç¼ºç‚¹ä¹Ÿååˆ†çš„æ˜æ˜¾ï¼Œå°±æ˜¯ä¸åŒ…å«ä¸€äº›æœ‰å¯èƒ½ä¼šç”¨åˆ°çš„åŒ…ï¼Œå¹¶ä¸”ä½¿ç”¨çš„glibcåŒ…ç­‰éƒ½æ˜¯é˜‰å‰²ç‰ˆï¼›å› æ­¤å¦‚æœæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œä¹Ÿéœ€è¦è¿›è¡Œå½»åº•çš„æµ‹è¯•ã€‚ æˆ‘ä»¬lsçœ‹ä¸‹è¿™ä¸‰ä¸ªç‰ˆæœ¬ï¼Œä¹Ÿèƒ½å‘ç°å®ƒä»¬çš„å¤§å°å­˜åœ¨ç€å·®å¼‚ï¼š 12345$ docker image ls nodeREPOSITORY TAG IMAGE ID CREATED SIZEnode slim ffedf4f28439 5 days ago 241MBnode alpine d2b383edbff9 3 months ago 170MBnode latest a283f62cb84b 3 months ago 993MB å…¶æ¬¡æ˜¯ä¸€äº›Debiançš„å‘è¡Œç‰ˆï¼ŒDebianæ˜¯ä¸€ä¸ªè‡ªç”±çš„ï¼Œç¨³å®šå¾—æ— ä¸ä¼¦æ¯”æ“ä½œç³»ç»Ÿï¼›å¸¦æœ‰ä¸‹é¢ä¸€äº›æ ‡ç­¾çš„é•œåƒå¯¹åº”Debianå‘è¡Œç‰ˆæœ¬å·ã€‚ bullseyeï¼šDebian 11 busterï¼šDebian 10 stretchï¼šDebian 9 jessieï¼šDebian 8 RUNæŒ‡ä»¤ RUNæŒ‡ä»¤ç”¨äºåœ¨é•œåƒå®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤ï¼Œå…¶æœ‰ä»¥ä¸‹ä¸¤ç§æ‰§è¡Œæ–¹å¼ï¼š 1234# shell æ‰§è¡ŒRUN &lt;command&gt;# exec æ ¼å¼RUN [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;] RUNæŒ‡ä»¤å¸¸è§çš„ç”¨æ³•å°±æ˜¯å®‰è£…åŒ…ç”¨apt-getï¼Œå‡è®¾æˆ‘ä»¬éœ€è¦åœ¨é•œåƒå®‰è£…curlï¼š 12345FROM ubuntu:18.04RUN apt-get updateRUN apt-get install -y curl æˆ‘ä»¬çŸ¥é“Dockerfileçš„æŒ‡ä»¤æ˜¯åˆ†å±‚æ„å»ºçš„ï¼Œæ¯ä¸€å±‚éƒ½æœ‰ç¼“å­˜ï¼Œå‡è®¾æˆ‘ä»¬ä¸‹æ¬¡æ·»åŠ äº†ä¸€ä¸ªåŒ…wgetï¼š 12345FROM ubuntu:18.04RUN apt-get updateRUN apt-get install -y curl wget å¦‚æœæˆ‘ä»¬ä¸‹æ¬¡å†æ¬¡æ„å»ºæ—¶ï¼Œapt-get updateæŒ‡ä»¤ä¹Ÿä¸ä¼šæ‰§è¡Œï¼Œä½¿ç”¨ä¹‹å‰ç¼“å­˜çš„é•œåƒï¼›è€Œinstallç”±äºupdateæŒ‡ä»¤æ²¡æœ‰æ‰§è¡Œï¼Œå¯èƒ½å®‰è£…è¿‡æ—¶çš„curlå’Œwgetç‰ˆæœ¬ã€‚ å› æ­¤æˆ‘ä»¬é€šå¸¸ä¼šæŠŠupdateå’Œinstallå†™åœ¨ä¸€æ¡æŒ‡ä»¤ï¼Œç¡®ä¿æˆ‘ä»¬çš„Dockerfilesæ¯æ¬¡å®‰è£…çš„éƒ½æ˜¯åŒ…çš„æœ€æ–°çš„ç‰ˆæœ¬ï¼›åŒæ—¶ä¹Ÿå¯ä»¥å‡å°‘é•œåƒå±‚æ•°ï¼Œå‡å°‘åŒ…çš„ä½“ç§¯ï¼š 1RUN apt-get update &amp;&amp; apt-get install -y curl wget WORKDIRå·¥ä½œç›®å½• WORKDIRæŒ‡ä»¤å¯ä»¥ç”¨æ¥æŒ‡å®šå·¥ä½œç›®å½•ï¼Œä»¥åå„å±‚çš„å½“å‰ç›®å½•å°±è¢«æ”¹ä¸ºæŒ‡å®šçš„å·¥ä½œç›®å½•ï¼›å¦‚æœè¯¥ç›®å½•ä¸å­˜åœ¨ï¼ŒWORKDIRä¼šè‡ªåŠ¨åˆ›å»ºç›®å½•ã€‚ å¾ˆå¤šç«¥é‹æŠŠDockerfileå½“æˆShellè„šæœ¬æ¥å†™ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´ä¸‹é¢çš„é”™è¯¯ï¼š 12345FROM node:10.15.3-alpineRUN mkdir /app &amp;&amp; cd /appRUN echo &quot;hello&quot; &gt; world.txt è¿™é‡Œechoçš„ä½œç”¨æ˜¯å°†å­—ç¬¦ä¸²hellé‡å®šå‘å†™å…¥åˆ°world.txtä¸­ï¼›å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªDockerfileæ„å»ºé•œåƒè¿è¡Œåï¼Œä¼šå‘ç°æ‰¾ä¸åˆ°/app/world.txtï¼›ç”±äºåœ¨Shellè„šæœ¬ä¸­ä¸¤æ¬¡è¿ç»­è¿è¡Œçš„å‘½ä»¤æ˜¯åŒä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œç¯å¢ƒï¼Œå‰ä¸€è¡Œå‘½ä»¤è¿è¡Œå½±å“åä¸€ä¸ªå‘½ä»¤ï¼›è€Œç”±äºDockerfileåˆ†å±‚æ„å»ºçš„åŸå› ï¼Œä¸¤ä¸ªRUNå‘½ä»¤æ‰§è¡Œçš„ç¯å¢ƒæ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„å®¹å™¨ã€‚ å› æ­¤å¦‚æœæˆ‘ä»¬éœ€è¦æ”¹å˜ä»¥åæ¯å±‚çš„å·¥ä½œç›®å½•çš„ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨WORKDIRæŒ‡ä»¤ï¼Œå»ºè®®åœ¨WORKDIRæŒ‡ä»¤ä¸­ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼š 12345FROM node:10.15.3-alpineWORKDIR /appRUN echo &quot;hello&quot; &gt; world.txt è¿™æ ·ç”Ÿæˆçš„world.txtå°±åœ¨/appç›®å½•ä¸‹é¢äº†ã€‚ COPYå¤åˆ¶ COPYæŒ‡ä»¤ç”¨äºä»æ„å»ºä¸Šä¸‹æ–‡ç›®å½•ä¸­å¤åˆ¶æ–‡ä»¶åˆ°é•œåƒå†…çš„ç›®æ ‡è·¯å¾„ä¸­ï¼Œç±»ä¼¼linuxçš„cpå‘½ä»¤ï¼Œå®ƒçš„è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 12COPY [--chown=&lt;user&gt;:&lt;group&gt;] &lt;æºè·¯å¾„&gt;... &lt;ç›®æ ‡è·¯å¾„&gt;COPY [--chown=&lt;user&gt;:&lt;group&gt;] [&quot;&lt;æºè·¯å¾„1&gt;&quot;,... &quot;&lt;ç›®æ ‡è·¯å¾„&gt;&quot;] å¤åˆ¶çš„æ–‡ä»¶å¯ä»¥æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€å¤šä¸ªæ–‡ä»¶æˆ–è€…é€šé…ç¬¦åŒ¹é…çš„æ–‡ä»¶ï¼š 12345COPY package.json /appCOPY package.json app.js /appCOPY src/*.js /app ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒCOPYæŒ‡ä»¤åªèƒ½å¤åˆ¶æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼Œè€Œä¸èƒ½å¤åˆ¶æ–‡ä»¶å¤¹æœ¬èº«ï¼Œå’Œlinuxçš„cpå‘½ä»¤æœ‰åŒºåˆ«ï¼›æ¯”å¦‚ä¸‹é¢å¤åˆ¶srcæ–‡ä»¶å¤¹ï¼š 1COPY src /app è¿è¡Œåæˆ‘ä»¬å‘ç°srcæ–‡ä»¶å¤¹ä¸‹é¢çš„æ–‡ä»¶éƒ½æ‹·è´åˆ°/appç›®å½•ä¸‹äº†ï¼Œæ²¡æœ‰æ‹·è´srcæ–‡ä»¶å¤¹æœ¬èº«ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿™æ ·æ¥å†™ï¼š 1COPY src /app/src CMDæŒ‡ä»¤ CMDæŒ‡ä»¤ç”¨äºæ‰§è¡Œç›®æ ‡é•œåƒä¸­åŒ…å«çš„è½¯ä»¶ï¼Œå¯ä»¥æŒ‡å®šå‚æ•°ï¼Œå®ƒä¹Ÿæœ‰ä¸¤ç§è¯­æ³•æ ¼å¼ï¼š 12CMD &lt;å‘½ä»¤&gt;CMD [&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;, &quot;å‚æ•°1&quot;, &quot;å‚æ•°2&quot;...] æˆ‘ä»¬å‘ç°CMDå’ŒRUNéƒ½å¯ä»¥ç”¨æ¥æ‰§è¡Œå‘½ä»¤çš„ï¼Œå¾ˆç›¸ä¼¼ï¼Œé‚£ä»–ä»¬ä¸¤è€…æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼Ÿé¦–å…ˆæˆ‘ä»¬å‘ç°RUNæ˜¯ç”¨æ¥æ‰§è¡Œdocker buildæ„å»ºé•œåƒè¿‡ç¨‹ä¸­è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯”å¦‚åˆ›å»ºæ–‡ä»¶å¤¹mkdirã€å®‰è£…ç¨‹åºapt-getç­‰ç­‰ã€‚ è€ŒCMDæŒ‡ä»¤åœ¨docker runæ—¶è¿è¡Œè€Œédocker buildï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼Œå®ƒçš„é¦–è¦ç›®çš„åœ¨äºä¸ºå¯åŠ¨çš„å®¹å™¨æŒ‡å®šé»˜è®¤è¦è¿è¡Œçš„ç¨‹åºï¼Œç¨‹åºè¿è¡Œç»“æŸï¼Œå®¹å™¨ä¹Ÿå°±ç»“æŸã€‚ è€Œå®¹å™¨åœ¨runçš„æ—¶å€™åªèƒ½åˆ›å»ºä¸€æ¬¡ï¼Œå› æ­¤ä¸€ä¸ªDockerfä¸­ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªCMDæŒ‡ä»¤ï¼›æ¯”å¦‚æˆ‘ä»¬çš„å®¹å™¨è¿è¡Œnodeç¨‹åºï¼Œæœ€åéœ€è¦å¯åŠ¨ç¨‹åºï¼š 123CMD [&quot;node&quot;, &quot;app.js&quot;]# æˆ–è€…CMD npm run start ENTRYPOINTå…¥å£ç‚¹ ENTRYPOINTæŒ‡ä»¤çš„ä½œç”¨å’ŒCMDä¸€æ ·ï¼Œä¹Ÿæ˜¯åœ¨æŒ‡å®šå®¹å™¨å¯åŠ¨ç¨‹åºå’Œå‚æ•°ï¼›ä¸€ä¸ªDockerfileåŒæ ·ä¹Ÿåªèƒ½æœ‰ä¸€ä¸ªENTRYPOINTæŒ‡ä»¤ï¼›å½“æŒ‡å®šäº†ENTRYPOINTåï¼ŒCMDæŒ‡ä»¤çš„å«ä¹‰å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸å†æ˜¯ç›´æ¥çš„è¿è¡Œå…¶å‘½ä»¤ï¼Œè€Œæ˜¯å°† CMD çš„å†…å®¹ä½œä¸ºå‚æ•°ä¼ ç»™ENTRYPOINTæŒ‡ä»¤ï¼Œç›¸å½“äºï¼š 1&lt;ENTRYPOINT&gt; &quot;&lt;CMD&gt;&quot; é‚£ä¹ˆè¿™æ ·çš„å¥½å¤„æ˜¯å•¥å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸€ä¸ªä½¿ç”¨çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨Dockerä¸­ä½¿ç”¨curlå‘½ä»¤æ¥è·å–å…¬ç½‘çš„IPåœ°å€ï¼š 1234567891011FROM ubuntu:18.04# åˆ‡æ¢ubuntuæºRUN sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.listRUN apt-get cleanRUN apt-get update \\ &amp;&amp; apt-get install -y curl \\ &amp;&amp; rm -rf /var/lib/apt/lists/* CMD [ &quot;curl&quot;, &quot;-s&quot;, &quot;http://myip.ipip.net&quot; ] ç„¶åä½¿ç”¨docker build -t myip .æ¥æ„å»ºmyipçš„é•œåƒï¼›å½“æˆ‘ä»¬æƒ³è¦æŸ¥è¯¢ipçš„æ—¶å€™ï¼Œåªéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š 12$ docker run --rm myipå½“å‰ IPï¼š218.4.251.37 æ¥è‡ªäºï¼šä¸­å›½ æ±Ÿè‹ è‹å· ç”µä¿¡ è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†æŠŠé•œåƒå½“æˆå‘½ä»¤ä½¿ç”¨ï¼Œä¸è¿‡å¦‚æœæˆ‘ä»¬æƒ³è¦åŒæ—¶æ˜¾ç¤ºHTTPå¤´ä¿¡æ¯ï¼Œå°±éœ€è¦åŠ ä¸Š-iå‚æ•°ï¼š 12$ docker run --rm myip -idocker: Error response from daemon: failed to create shim: OCI runtime create failed: container_linux.go:380: starting container process caused: exec: &quot;-i&quot;: executable file not found in $PATH: unknown. ä½†æ˜¯è¿™ä¸ª-iå‚æ•°åŠ ä¸Šåå¹¶ä¸ä¼šä¼ ç»™CMDæŒ‡ä»¤ï¼Œè€Œæ˜¯ä¼ ç»™äº†docker runï¼Œä½†æ˜¯docker runå¹¶æ²¡æœ‰-tå‚æ•°ï¼Œå› æ­¤æŠ¥é”™ï¼›å¦‚æœæˆ‘ä»¬æƒ³è¦åŠ å…¥-iï¼Œå°±éœ€è¦é‡æ–°å®Œæ•´çš„è¾“å…¥è¿™ä¸ªå‘½ä»¤ï¼›è€Œä½¿ç”¨ENTRYPOINTæŒ‡ä»¤å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š 12345678910FROM ubuntu:18.04RUN sed -i s@/archive.ubuntu.com/@/mirrors.aliyun.com/@g /etc/apt/sources.listRUN apt-get cleanRUN apt-get update \\ &amp;&amp; apt-get install -y curl \\ &amp;&amp; rm -rf /var/lib/apt/lists/* ENTRYPOINT [ &quot;curl&quot;, &quot;-s&quot;, &quot;http://myip.ipip.net&quot; ] æˆ‘ä»¬é‡æ–°å°è¯•åŠ å…¥-iå‚æ•°ï¼š 1234567891011$ docker run --rm myip -iHTTP/1.1 200 OKDate: Fri, 01 Apr 2022 07:24:21 GMTContent-Type: text/plain; charset=utf-8Content-Length: 67Connection: keep-aliveX-Via-JSL: fdc330b,-Set-Cookie: __jsluid_h=9f0775bbcb4cc97b161093b4c66dd766; max-age=31536000; path=/; HttpOnlyX-Cache: bypasså½“å‰ IPï¼š218.4.251.37 æ¥è‡ªäºï¼šä¸­å›½ æ±Ÿè‹ è‹å· ç”µä¿¡ å°±å¯ä»¥å‘ç°httpçš„å¤´éƒ¨ä¿¡æ¯ä¹Ÿå±•ç¤ºå‡ºæ¥äº†ã€‚ VOLUMEæ•°æ®å· VOLUMEæŒ‡ä»¤ç”¨äºæš´éœ²ä»»ä½•æ•°æ®åº“å­˜å‚¨æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶ï¼Œæˆ–å®¹å™¨åˆ›å»ºçš„æ–‡ä»¶å’Œç›®å½•ï¼›å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 12VOLUME [&quot;&lt;è·¯å¾„1&gt;&quot;, &quot;&lt;è·¯å¾„2&gt;&quot;...]VOLUME &lt;è·¯å¾„&gt; æˆ‘ä»¬å¯ä»¥äº‹å…ˆæŒ‡å®šæŸäº›ç›®å½•æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œè¿™æ ·åœ¨è¿è¡Œæ—¶å¦‚æœç”¨æˆ·ä¸æŒ‡å®šæŒ‚è½½ï¼Œå…¶åº”ç”¨ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå‘å®¹å™¨å­˜å‚¨å±‚å†™å…¥å¤§é‡æ•°æ®ï¼Œæ¯”å¦‚ï¼š 1VOLUME /data è¿™é‡Œçš„/dataç›®å½•å°±ä¼šåœ¨å®¹å™¨è¿è¡Œæ—¶è‡ªåŠ¨æŒ‚è½½ä¸ºåŒ¿åå·ï¼Œä»»ä½•å‘/dataä¸­å†™å…¥çš„ä¿¡æ¯éƒ½ä¸ä¼šè®°å½•è¿›å®¹å™¨å­˜å‚¨å±‚ï¼Œä»è€Œä¿è¯äº†å®¹å™¨å­˜å‚¨å±‚çš„æ— çŠ¶æ€åŒ–ã€‚ 1$ docker run -d -v mydata:/data xxxx æˆ‘ä»¬è¿è¡Œå®¹å™¨æ—¶å¯ä»¥æœ¬åœ°ç›®å½•è¦†ç›–æŒ‚è½½çš„åŒ¿åå·ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Windowsä¸‹æŒ‚è½½ç›®å½•å’ŒLinuxç¯å¢ƒï¼ˆä»¥åŠMacosï¼‰æŒ‚è½½ç›®å½•æœ‰ä¸€äº›åŒºåˆ«ï¼Œåœ¨Linuxç¯å¢ƒä¸‹ç”±äºæ˜¯æ ‘çŠ¶ç›®å½•ç»“æ„ï¼Œæˆ‘ä»¬æŒ‚è½½æ—¶ç›´æ¥æ‰¾åˆ°ç›®å½•å³å¯ï¼Œå¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œdockerè¿˜ä¼šè‡ªåŠ¨å¸®ä½ åˆ›å»ºï¼š 1$ docker run -d -v /home/root/docker-data:/data xxxx windowsç¯å¢ƒä¸‹åˆ™éœ€è¦å¯¹åº”ç›˜ç¬¦ä¸‹çš„ç›®å½•ï¼š 1$ docker run -d -v d:/docker-data:/data xxxx EXPOSEç«¯å£ EXPOSEæŒ‡ä»¤æ˜¯å£°æ˜å®¹å™¨è¿è¡Œæ—¶æä¾›æœåŠ¡çš„ç«¯å£ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå£°æ˜ï¼Œåœ¨å®¹å™¨è¿è¡Œæ—¶å¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå£°æ˜åº”ç”¨å°±ä¼šå¼€å¯è¿™ä¸ªç«¯å£çš„æœåŠ¡ï¼›å…¶è¯­æ³•å¦‚ä¸‹ï¼š 1EXPOSE &lt;ç«¯å£1&gt; [&lt;ç«¯å£2&gt;...] åœ¨Dockerfileä¸­å†™å…¥è¿™æ ·çš„å£°æ˜æœ‰ä¸¤ä¸ªå¥½å¤„ï¼Œä¸€ä¸ªæ˜¯å¸®åŠ©é•œåƒä½¿ç”¨è€…ç†è§£è¿™ä¸ªé•œåƒæœåŠ¡çš„å®ˆæŠ¤ç«¯å£ï¼Œä»¥æ–¹ä¾¿é…ç½®æ˜ å°„ï¼›å¦ä¸€ä¸ªå¥½å¤„åˆ™æ˜¯åœ¨è¿è¡Œæ—¶ä½¿ç”¨éšæœºç«¯å£æ˜ å°„æ—¶ï¼Œä¹Ÿå°±æ˜¯ docker run -P æ—¶ï¼Œä¼šè‡ªåŠ¨éšæœºæ˜ å°„ EXPOSE çš„ç«¯å£ã€‚ ENVæŒ‡ä»¤ ENVæŒ‡ä»¤ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå…¶è¯­æ³•æœ‰ä¸¤ç§ï¼Œæ”¯æŒå¤šç§å˜é‡çš„è®¾ç½®ï¼š 12ENV &lt;key&gt; &lt;value&gt;ENV &lt;key1&gt;=&lt;value1&gt; &lt;key2&gt;=&lt;value2&gt;... è¿™é‡Œçš„ç¯å¢ƒå˜é‡æ— è®ºæ˜¯åé¢çš„æŒ‡ä»¤ï¼Œå¦‚RUNæŒ‡ä»¤ï¼Œè¿˜æ˜¯è¿è¡Œæ—¶çš„åº”ç”¨ï¼Œéƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼š 1234ENV NODE_VERSION 7.2.0RUN curl -SLO &quot;https://nodejs.org/dist/v$NODE_VERSION/node-v$NODE_VERSION-linux-x64.tar.xz&quot; \\ &amp;&amp; curl -SLO &quot;https://nodejs.org/dist/v$NODE_VERSION/SHASUMS256.txt.asc&quot; è¿™é‡Œå®šä¹‰äº†ç¯å¢ƒå˜é‡NODE_VERSIONï¼Œåé¢çš„RUNæŒ‡ä»¤ä¸­å¯ä»¥å¤šæ¬¡ä½¿ç”¨å˜é‡è¿›è¡Œæ“ä½œï¼›å› æ­¤å¦‚æœæˆ‘ä»¬åç»­æƒ³è¦å‡çº§nodeç‰ˆæœ¬ï¼Œåªéœ€è¦æ›´æ–°7.2.0å³å¯ ARGæŒ‡ä»¤ ARGæŒ‡ä»¤å’ŒENVä¸€æ ·ï¼Œä¹Ÿæ˜¯è®¾ç½®ç¯å¢ƒå˜é‡çš„ï¼Œæ‰€ä¸åŒçš„æ˜¯ï¼ŒARGè®¾ç½®çš„æ˜¯æ„å»ºç¯å¢ƒçš„ç¯å¢ƒå˜é‡ï¼Œåœ¨ä»¥åå®¹å™¨è¿è¡Œæ—¶æ˜¯ä¸ä¼šå­˜åœ¨çš„ã€‚ éƒ¨ç½²å‰ç«¯é¡¹ç›®vueé¡¹ç›® å½“æˆ‘ä»¬åœ¨æœ¬åœ°å¼€å‘å®Œä¸€ä¸ªå‰ç«¯é¡¹ç›®åï¼Œè‚¯å®šè¦éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šè®©åˆ«äººæ¥è¿›è¡Œè®¿é—®é¡µé¢çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯è®©è¿ç»´åœ¨æœåŠ¡å™¨ä¸Šé…ç½®nginxæ¥å°†æˆ‘ä»¬çš„é¡¹ç›®æ‰“åŒ…åä½œä¸ºé™æ€èµ„æºï¼›åœ¨æ·±å…¥Nginxä¸€æ–‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨nginxå¦‚ä½•æ¥åšé™æ€æœåŠ¡å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬è‡ªå·±é…ç½®nginxæ–‡ä»¶ï¼Œç»“åˆdockeræ¥éƒ¨ç½²æˆ‘ä»¬çš„é¡¹ç›®ã€‚ é¦–å…ˆåœ¨æˆ‘ä»¬é¡¹ç›®ç›®å½•åˆ›å»ºnginxçš„é…ç½®æ–‡ä»¶default.confï¼š 12345678910111213server &#123; listen 80; server_name _; location / &#123; root /usr/share/nginx/html; index index.html inde.htm; try_files $uri $uri/ /index.html =404; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125;&#125; è¯¥é…ç½®æ–‡ä»¶å®šä¹‰äº†æˆ‘ä»¬æ‰“åŒ…åé™æ€èµ„æºçš„ç›®å½•ä¸º/usr/share/nginx/htmlï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†distæ–‡ä»¶å¤¹æ‹·è´åˆ°è¯¥ç›®å½•ï¼›åŒæ—¶ä½¿ç”¨äº†try_filesæ¥åŒ¹é…vueçš„historyè·¯ç”±æ¨¡å¼ã€‚ åœ¨é¡¹ç›®ç›®å½•å†åˆ›å»ºä¸€ä¸ªDockerfileæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š 1234567FROM nginx:latestCOPY default.conf /etc/nginx/conf.d/COPY dist/ /usr/share/nginx/html/EXPOSE 80 æˆ‘ä»¬åœ¨é¡¹ç›®æ‰“åŒ…ç”Ÿæˆdistæ–‡ä»¶åå°±å¯ä»¥æ„å»ºé•œåƒäº†ï¼š 1$ docker build -t vue-proj . æ¥ä¸‹æ¥åŸºäºè¯¥é•œåƒå¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼š 1$ docker run -itd -p 8080:80 vue-proj è¿™æ ·æˆ‘ä»¬çš„ç¨‹åºå°±èµ·æ¥äº†ï¼Œè®¿é—®http://localhost:8080ç«¯å£å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬éƒ¨ç½²çš„ç½‘ç«™äº†ã€‚ expressé¡¹ç›® æˆ‘ä»¬è¿˜æœ‰ä¸€äº›nodeé¡¹ç›®ï¼Œæ¯”å¦‚expreeã€eggjsæˆ–è€…nuxtï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨dockerè¿›è¡Œéƒ¨ç½²ï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦æŠŠæ‰€æœ‰çš„é¡¹ç›®æ–‡ä»¶éƒ½æ‹·è´åˆ°é•œåƒä¸­å»ã€‚ é¦–å…ˆæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„expressçš„å…¥å£æ–‡ä»¶app.js 123456789101112const express = require(&quot;express&quot;);const app = express();const PORT = 8080;app.get(&quot;/&quot;, (req, res) =&gt; &#123; res.send(&quot;hello express&quot;);&#125;);app.listen(PORT, () =&gt; &#123; console.log(`listen on port:$&#123;PORT&#125;`);&#125;); ç”±äºä¸‹é¢éœ€è¦æ‹·è´æ•´ä¸ªé¡¹ç›®çš„æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡.dockerignoreæ–‡ä»¶æ¥å¿½ç•¥æŸäº›æ–‡ä»¶ï¼š 12.gitnode_modules ç„¶åç¼–å†™æˆ‘ä»¬çš„Dockerfileï¼š 12345678910111213FROM node:10.15.3-alpineWORKDIR /appCOPY package*.json ./RUN npm install --registry https://registry.npm.taobao.orgCOPY . .EXPOSE 8080CMD npm run start æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„æµç¨‹æ˜¯å…ˆæ‹·è´package*.jsonæ–‡ä»¶ï¼Œå®‰è£…ä¾èµ–åå†æ‹·è´æ•´ä¸ªé¡¹ç›®ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿèªæ˜çš„ç«¥é‹å¤§æ¦‚å·²ç»çŒœåˆ°äº†ï¼Œå¤§æ¦‚ç‡åˆåŒå’å•æ˜¯è·Ÿdockerçš„åˆ†å±‚æ„å»ºå’Œç¼“å­˜æœ‰å…³ã€‚ ä¸é”™ï¼Œå¦‚æœæˆ‘ä»¬æŠŠpackage*.jsonå’Œä»£ç ç¨‹åºä¸€èµ·æ‹·è´ï¼Œå¦‚æœæˆ‘ä»¬åªæ›´æ”¹äº†ä»£ç è€Œæ²¡æœ‰æ–°å¢ä¾èµ–ï¼Œä½†dockerä»ç„¶ä¼šå®‰è£…ä¾èµ–ï¼›ä½†æ˜¯æˆ‘ä»¬å¦‚æœæŠŠå®ƒå•ç‹¬æ‹¿å‡ºæ¥çš„è¯ï¼Œå°±èƒ½å¤Ÿæé«˜ç¼“å­˜çš„å‘½ä¸­ç‡ã€‚åé¢çš„æ„å»ºé•œåƒå’Œå¯åŠ¨å®¹å™¨ä¹Ÿå°±ä¸å†èµ˜è¿°äº†ã€‚ vueé¡¹ç›®å¤šé˜¶æ®µæ„å»º ä¸Šé¢æˆ‘ä»¬åœ¨vueé¡¹ç›®ä¸­æ‰‹åŠ¨æ‰“åŒ…ç”Ÿæˆäº†distæ–‡ä»¶ï¼Œç„¶åå†é€šè¿‡dockerè¿›è¡Œéƒ¨ç½²ï¼›åœ¨FROMæŒ‡ä»¤ä¸­æˆ‘ä»¬ä¹Ÿæåˆ°äº†å¤šé˜¶æ®µæ„å»ºï¼Œé‚£ä¹ˆæ¥çœ‹ä¸‹å¦‚æœä½¿ç”¨å¤šé˜¶æ®µæ„å»ºå¦‚ä½•æ¥è¿›è¡Œä¼˜åŒ–ã€‚ æˆ‘ä»¬è¿˜æ˜¯åœ¨é¡¹ç›®ä¸­å‡†å¤‡å¥½nginxçš„é…ç½®æ–‡ä»¶default.confï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬ä¸å†æ‰‹åŠ¨ç”Ÿæˆdistæ–‡ä»¶ï¼Œè€Œæ˜¯å°†æ„å»ºçš„è¿‡ç¨‹æ”¾åˆ°Dockerfileä¸­ï¼š 12345678910111213141516171819FROM node:12 as compileWORKDIR /appCOPY package.json ./RUN npm i --registry=https://registry.npm.taobao.orgCOPY . .RUN npm run buildFROM nginx:latest as serveCOPY default.conf /etc/nginx/conf.d/COPY --from=compile /app/dist /usr/share/nginx/html/EXPOSE 80 æˆ‘ä»¬çœ‹åˆ°åœ¨ä¸Šé¢ç¬¬ä¸€ä¸ªcompileé˜¶æ®µï¼Œæˆ‘ä»¬é€šè¿‡npm run buildå‘½ä»¤ç”Ÿæˆäº†distæ–‡ä»¶ï¼›è€Œç¬¬äºŒä¸ªé˜¶æ®µä¸­å†æŠŠdistæ–‡ä»¶æ‹·è´åˆ°nginxçš„æ–‡ä»¶å¤¹ä¸­å³å¯ï¼›æœ€åæ„å»ºçš„äº§ç‰©ä¾ç„¶æ˜¯æœ€åFROMæŒ‡ä»¤çš„nginxæœåŠ¡å™¨ã€‚ å¤šé˜¶æ®µæ„å»ºç”¨åˆ°çš„å‘½ä»¤æ¯”è¾ƒå¤šï¼Œå¾ˆå¤šç«¥é‹ä¼šæƒ³æœ€åçš„é•œåƒä¼šä¸ä¼šå¾ˆå¤§ï¼›æˆ‘ä»¬é€šè¿‡lså‘½ä»¤æŸ¥çœ‹æ„å»ºåçš„é•œåƒï¼š 123$ docker imagesREPOSITORY TAG IMAGE ID CREATED SIZEmulti-compile latest a37e4d71562b 11 seconds ago 157MB å¯ä»¥çœ‹åˆ°å®ƒçš„å¤§å°å’Œå•ç‹¬ç”¨nginxæ„å»ºå·®ä¸å¤šã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://xieyufei.com/tags/Nodejs/"}]},{"title":"å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹åˆè¯†Dockerå®¹å™¨åŒ–éƒ¨ç½²","date":"2022-02-22T14:22:22.000Z","path":"2022/02/22/FrontEnd-Docker.html","text":"éšç€å®¹å™¨åŒ–æŠ€æœ¯ç››è¡Œï¼ŒDockeråœ¨å‰ç«¯é¢†åŸŸä¹Ÿæœ‰ç€è¶Šæ¥è¶Šå¹¿æ³›çš„åº”ç”¨ï¼›ä¼ ç»Ÿçš„å‰ç«¯éƒ¨ç½²æ–¹å¼éœ€è¦æˆ‘ä»¬å°†é¡¹ç›®æ‰“åŒ…ç”Ÿæˆä¸€ç³»åˆ—çš„é™æ€æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œé…ç½®nginxæ–‡ä»¶ï¼›å¦‚æœæˆ‘ä»¬ä½¿ç”¨å®¹å™¨åŒ–éƒ¨ç½²ï¼Œå°†éƒ¨ç½²æ“ä½œéƒ½å‘½ä»¤åŒ–ï¼Œé›†ä¸­æˆä¸€ä¸ªè„šæœ¬å°±å¯ä»¥å®ŒæˆåŸæ¥å¤æ‚çš„éƒ¨ç½²è¿‡ç¨‹ã€‚æœ¬æ–‡ä»DockeråŸºç¡€å¼€å§‹ï¼Œæ¥è®¤è¯†Dockerçš„å„ç§å‘½ä»¤æ“ä½œã€‚ dockerç®€ä»‹ Dockeræ˜¯ä¸€ä¸ªå¼€æºçš„å¼•æ“ï¼Œå¯ä»¥è½»æ¾çš„ä¸ºä»»ä½•åº”ç”¨åˆ›å»ºä¸€ä¸ªè½»é‡çº§çš„ã€å¯ç§»æ¤çš„ã€è‡ªç»™è‡ªè¶³çš„å®¹å™¨ã€‚ Dockerçš„è‹±æ–‡ç¿»è¯‘æ˜¯ç å¤´å·¥äººï¼Œç å¤´å·¥äººä¸€èˆ¬æ¬è¿çš„éƒ½æ˜¯é›†è£…ç®±ï¼ˆContainerï¼‰ï¼Œé›†è£…ç®±æœ€å¤§çš„æˆåŠŸåœ¨äºå…¶äº§å“çš„æ ‡å‡†åŒ–ä»¥åŠç”±æ­¤å»ºç«‹çš„ä¸€æ•´å¥—è¿è¾“ä½“ç³»ã€‚åœ¨ä¸€è‰˜å‡ åä¸‡å¨çš„å·¨è½®ä¸Šï¼Œè£…æ»¡äº†å„ç§å„æ ·æ»¡è½½çš„é›†è£…ç®±ï¼Œå½¼æ­¤ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼›å› æ­¤å…¶æœ¬èº«å°±æœ‰æ ‡å‡†åŒ–ã€é›†çº¦åŒ–çš„ç‰¹æ€§ã€‚ ä»Dockerçš„logoæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºï¼ŒDockerçš„æ€æƒ³æ¥è‡ªäºé›†è£…ç®±ï¼›å„ä¸ªåº”ç”¨ç¨‹åºç›¸å½“äºä¸åŒçš„é›†è£…ç®±ï¼Œæ¯ä¸ªåº”ç”¨ç¨‹åºæœ‰ç€ä¸åŒçš„åº”ç”¨ç¯å¢ƒï¼Œæ¯”å¦‚pythonå¼€å‘çš„åº”ç”¨éœ€è¦æœåŠ¡å™¨éƒ¨ç½²ä¸€å¥—pythonçš„å¼€å‘ç¯å¢ƒï¼Œnodejså¼€å‘çš„åº”ç”¨éœ€è¦æœåŠ¡å™¨éƒ¨ç½²nodejsçš„ç¯å¢ƒï¼Œä¸åŒç¯å¢ƒä¹‹é—´æœ‰å¯èƒ½è¿˜ä¼šå½¼æ­¤å†²çªï¼ŒDockerå¯ä»¥å¸®åŠ©æˆ‘ä»¬éš”ç¦»ä¸åŒçš„ç¯å¢ƒã€‚ æœ‰äº›åŒå­¦äºæ˜¯å°±æƒ³åˆ°äº†ï¼Œè¿™ä¸æ˜¯è™šæ‹Ÿæœºå¹²çš„æ´»ä¹ˆã€‚æ˜¯çš„ï¼Œè™šæ‹Ÿæœºå¯ä»¥å¾ˆå¥½çš„å¸®æˆ‘ä»¬éš”ç¦»å„ä¸ªç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥åœ¨windowsä¸Šè¿è¡Œmacosã€ubuntuç­‰è™šæ‹Ÿæœºï¼Œä¹Ÿå¯ä»¥åœ¨macosä¸Šå®‰è£…windowsçš„è™šæ‹Ÿæœºï¼›ä¸è¿‡ä¼ ç»Ÿçš„è™šæ‹ŸæœºæŠ€æœ¯æ˜¯è™šæ‹Ÿä¸€æ•´å¥—ç¡¬ä»¶åï¼Œåœ¨å…¶ä¸Šè¿è¡Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œåœ¨è¯¥ç³»ç»Ÿä¸Šå†è¿è¡Œæ‰€éœ€åº”ç”¨è¿›ç¨‹ï¼Œè¿™æ ·å¯¼è‡´ä¸€å°ç”µè„‘åªèƒ½è¿è¡Œæ•°é‡è¾ƒå°‘çš„è™šæ‹Ÿæœºã€‚ ä½†æ˜¯Dockerä½¿ç”¨çš„å®¹å™¨æŠ€æœ¯æ¯”è™šæ‹Ÿæœºæ›´åŠ çš„è½»ä¾¿å’Œå¿«æ·ã€‚å®¹å™¨å†…çš„åº”ç”¨è¿›ç¨‹ç›´æ¥è¿è¡Œäºå®¿ä¸»çš„å†…æ ¸ï¼Œå®¹å™¨å†…æ²¡æœ‰è‡ªå·±çš„å†…æ ¸ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰è¿›è¡Œç¡¬ä»¶è™šæ‹Ÿã€‚å› æ­¤å®¹å™¨è¦æ¯”ä¼ ç»Ÿè™šæ‹Ÿæœºæ›´ä¸ºè½»ä¾¿ï¼Œä¸‹å›¾æ¯”è¾ƒäº†ä¸¤è€…çš„åŒºåˆ«ï¼š å¯¹æ¯”æ€»ç»“ï¼š ç‰¹æ€§ å®¹å™¨ è™šæ‹Ÿæœº å¯åŠ¨ ç§’çº§ åˆ†é’Ÿçº§ ç¡¬ç›˜ä½¿ç”¨ ä¸€èˆ¬ä¸º MB ä¸€èˆ¬ä¸º GB ç³»ç»Ÿèµ„æº 0~5% 5~15% æ€§èƒ½ æ¥è¿‘åŸç”Ÿ å¼±äºåŸç”Ÿ ç³»ç»Ÿæ”¯æŒé‡ å•æœºæ”¯æŒä¸Šåƒä¸ªå®¹å™¨ ä¸€èˆ¬å‡ åä¸ª Dockerä¼˜åŠ¿ dockeræœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š æ›´é«˜æ•ˆçš„åˆ©ç”¨ç³»ç»Ÿèµ„æº æ›´å¿«é€Ÿçš„å¯åŠ¨æ—¶é—´ ä¸€è‡´çš„è¿è¡Œç¯å¢ƒ æŒç»­äº¤ä»˜å’Œéƒ¨ç½² æ›´è½»æ¾çš„è¿ç§» æ›´è½»æ¾çš„ç»´æŠ¤å’Œæ‰©å±• dockeré€šå¸¸ç”¨äºå¦‚ä¸‹åœºæ™¯ï¼š webåº”ç”¨çš„è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œå‘å¸ƒï¼› è‡ªåŠ¨åŒ–æµ‹è¯•å’ŒæŒç»­é›†æˆã€å‘å¸ƒï¼› åœ¨æœåŠ¡å‹ç¯å¢ƒä¸­éƒ¨ç½²å’Œè°ƒæ•´æ•°æ®åº“æˆ–å…¶ä»–çš„åå°åº”ç”¨ï¼› ä»å¤´ç¼–è¯‘æˆ–è€…æ‰©å±•ç°æœ‰çš„OpenShiftæˆ–Cloud Foundryå¹³å°æ¥æ­å»ºè‡ªå·±çš„PaaSç¯å¢ƒã€‚ åŸºæœ¬æ¦‚å¿µ åœ¨Dockerä¸­æœ‰ä¸‰ä¸ªåŸºæœ¬æ¦‚å¿µï¼š é•œåƒï¼ˆImageï¼‰ å®¹å™¨ï¼ˆContainerï¼‰ ä»“åº“ï¼ˆRepositoryï¼‰ ç†è§£äº†Dockerçš„åŸºæœ¬æ¦‚å¿µï¼Œæˆ‘ä»¬å°±ç†è§£äº†Dockerçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚ é¦–å…ˆæˆ‘ä»¬æ¥å¼„æ‡‚é•œåƒçš„æ¦‚å¿µï¼ŒDockeré•œåƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ç³»ç»Ÿï¼Œé™¤äº†æä¾›å®¹å™¨è¿è¡Œæ—¶æ‰€éœ€çš„ç¨‹åºã€åº“ã€èµ„æºã€é…ç½®ç­‰æ–‡ä»¶å¤–ï¼Œè¿˜åŒ…å«äº†ä¸€äº›ä¸ºè¿è¡Œæ—¶å‡†å¤‡çš„ä¸€äº›é…ç½®å‚æ•°ï¼ˆå¦‚åŒ¿åå·ã€ç¯å¢ƒå˜é‡ã€ç”¨æˆ·ç­‰ï¼‰ã€‚é•œåƒä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ï¼Œå…¶å†…å®¹åœ¨æ„å»ºä¹‹åä¹Ÿä¸ä¼šè¢«æ”¹å˜ã€‚ å¦‚æœæœ‰è£…ç³»ç»Ÿç»éªŒçš„ç«¥é‹ï¼Œå¯ä»¥æŠŠDockeré•œåƒç†è§£ä¸ºä¸€ä¸ªæ“ä½œç³»ç»Ÿçš„é•œåƒï¼ˆISOæ–‡ä»¶ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå›ºå®šçš„æ–‡ä»¶ï¼Œä»ä¸€ä¸ªé•œåƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è£…åˆ°å¾ˆå¤šç”µè„‘ä¸Šï¼Œå˜æˆä¸€ä¸ªä¸ªçš„æ“ä½œç³»ç»Ÿï¼ˆç›¸å½“äºå®¹å™¨ï¼‰ï¼Œæ¯ä¸ªç³»ç»Ÿéƒ½æ˜¯ç›¸åŒçš„ï¼Œä¸è¿‡å¯ä»¥é€‰æ‹©å®šåˆ¶åŒ–å®‰è£…ã€‚ å’Œç³»ç»Ÿé•œåƒä¸åŒçš„æ˜¯ï¼ŒDockeré•œåƒå¹¶ä¸æ˜¯åƒISOæ–‡ä»¶é‚£æ ·æ•´ä½“æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶çš„ï¼Œè€Œæ˜¯è®¾è®¡æˆäº†åˆ†å±‚å­˜å‚¨çš„æ¶æ„ï¼Œå®ƒå¹¶ä¸æ˜¯ç”±ä¸€ä¸ªæ–‡ä»¶ç»„æˆï¼Œè€Œæ˜¯ç”±å¤šå±‚æ–‡ä»¶è”åˆç»„æˆã€‚ æ„å»ºé•œåƒæ—¶ï¼Œä¼šä¸€å±‚å±‚çš„æ„å»ºï¼Œå‰é¢ä¸€å±‚æ˜¯åé¢ä¸€å±‚çš„åŸºç¡€ã€‚æ¯ä¸€å±‚æ„å»ºå®Œå°±ä¸ä¼šå†å‘ç”Ÿæ”¹å˜ï¼Œåä¸€å±‚ä¸Šçš„ä»»ä½•æ”¹å˜åªå‘ç”Ÿåœ¨è‡ªå·±è¿™ä¸€å±‚ã€‚ å…¶æ¬¡æ˜¯å®¹å™¨çš„æ¦‚å¿µï¼Œä»ç¼–ç¨‹çš„è§’åº¦çœ‹ï¼Œé•œåƒå’Œå®¹å™¨çš„å…³ç³»æ›´åƒæ˜¯ç±»å’Œå®ä¾‹çš„å…³ç³»ï¼›ä»ä¸€ä¸ªé•œåƒå¯ä»¥å¯åŠ¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ï¼›é•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚ å‰é¢è®²è¿‡é•œåƒä½¿ç”¨çš„æ˜¯åˆ†å±‚å­˜å‚¨ï¼Œå®¹å™¨ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ¯ä¸€ä¸ªå®¹å™¨è¿è¡Œæ—¶ï¼Œæ˜¯ä»¥é•œåƒä¸ºåŸºç¡€å±‚ï¼Œåœ¨å…¶ä¸Šåˆ›å»ºä¸€ä¸ªå½“å‰å®¹å™¨çš„å­˜å‚¨å±‚ï¼Œæˆ‘ä»¬å¯ä»¥ç§°è¿™ä¸ªä¸ºå®¹å™¨è¿è¡Œæ—¶è¯»å†™è€Œå‡†å¤‡çš„å­˜å‚¨å±‚ä¸ºå®¹å™¨å­˜å‚¨å±‚ã€‚ å®¹å™¨å­˜å‚¨å±‚çš„ç”Ÿå­˜å‘¨æœŸå’Œå®¹å™¨ä¸€æ ·ï¼Œå®¹å™¨æ¶ˆäº¡æ—¶ï¼Œå®¹å™¨å­˜å‚¨å±‚ä¹Ÿéšä¹‹æ¶ˆäº¡ã€‚å› æ­¤ï¼Œä»»ä½•ä¿å­˜äºå®¹å™¨å­˜å‚¨å±‚çš„ä¿¡æ¯éƒ½ä¼šéšå®¹å™¨åˆ é™¤è€Œä¸¢å¤±ã€‚ å› æ­¤å®¹å™¨ä¸åº”è¯¥å‘å…¶å­˜å‚¨å±‚å†…å†™å…¥ä»»ä½•æ•°æ®ï¼Œå®¹å™¨å­˜å‚¨å±‚è¦ä¿æŒæ— çŠ¶æ€åŒ–ã€‚æ‰€æœ‰çš„æ–‡ä»¶å†™å…¥æ“ä½œï¼Œéƒ½åº”è¯¥ä½¿ç”¨æ•°æ®å·ï¼ˆVolumeï¼‰ã€æˆ–è€…ç»‘å®šå®¿ä¸»ç›®å½•ï¼Œåœ¨è¿™äº›ä½ç½®çš„è¯»å†™ä¼šè·³è¿‡å®¹å™¨å­˜å‚¨å±‚ã€‚ æœ€åæ˜¯ä»“åº“ï¼ˆRepositoryï¼‰çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ„å»ºä¸€ä¸ªé•œåƒåï¼Œå¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦ç»™ç½‘ç»œä¸Šçš„å…¶ä»–ç”¨æˆ·ä½¿ç”¨ï¼Œå°±è¦ä¸€ä¸ªé›†ä¸­å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„æœåŠ¡å™¨ï¼Œä»“åº“å°±æ˜¯è¿™æ ·ä¸€ä¸ªå·¥å…·ï¼Œæœ‰ç‚¹ç±»ä¼¼Githubã€‚ é•œåƒä»“åº“Repositoryæ˜¯åŒä¸€ç±»é•œåƒçš„é›†åˆï¼ŒåŒ…å«äº†ä¸åŒtagï¼ˆæ ‡ç­¾ï¼‰çš„Dockeré•œåƒï¼Œæ¯”å¦‚ubuntuæ˜¯ä»“åº“çš„åç§°ï¼Œå®ƒé‡Œé¢æœ‰ä¸åŒçš„tagï¼Œæ¯”å¦‚16.04ã€18.04ï¼Œæˆ‘ä»¬ä»é•œåƒä»“åº“ä¸­æ¥è·å–é•œåƒæ—¶å¯ä»¥é€šè¿‡&lt;ä»“åº“å&gt;:&lt;æ ‡ç­¾&gt;çš„æ ¼å¼æ¥æŒ‡å®šå…·ä½“ç‰ˆæœ¬çš„é•œåƒï¼Œæ¯”å¦‚ubuntu18.04ï¼›å¦‚æœå¿½ç•¥æ ‡ç­¾ï¼Œç”¨latestä½œä¸ºé»˜è®¤æ ‡ç­¾ã€‚ é•œåƒ æˆ‘ä»¬ä¸Šé¢ä»‹ç»è¿‡ï¼Œé•œåƒæ˜¯Dockerçš„ä¸‰ä¸ªåŸºæœ¬ç»„ä»¶ä¹‹ä¸€ï¼›è¿è¡Œå®¹å™¨éœ€è¦æœ¬åœ°æœ‰ç›¸åº”çš„é•œåƒï¼Œå¦‚æœæ²¡æœ‰ä¼šä»è¿œç¨‹ä»“åº“ä¸‹è½½ï¼›é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æ“ä½œé•œåƒã€‚ æŸ¥æ‰¾é•œåƒ æˆ‘ä»¬å¯ä»¥ä»Docker Hubæ¥æœç´¢é•œåƒ 1docker search ubuntu æŸ¥æ‰¾ç»“æœï¼š æŸ¥æ‰¾çš„åˆ—è¡¨ä¸­åŒ…å«äº†ä»¥ä¸‹å‡ ä¸ªå­—æ®µï¼š NAME: é•œåƒä»“åº“æºçš„åç§° DESCRIPTION: é•œåƒçš„æè¿° STARS: ç±»ä¼¼Githubé‡Œé¢çš„ starã€‚ OFFICIAL: æ˜¯å¦dockerå®˜æ–¹å‘å¸ƒ AUTOMATED: è‡ªåŠ¨æ„å»ºã€‚ è·å–é•œåƒ æˆ‘ä»¬è¦è·å–é•œåƒï¼Œå¯ä»¥é€šè¿‡docker pullå‘½ä»¤ï¼Œå®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š 1docker pull &lt;repository&gt;:&lt;tag&gt; è¿˜æ˜¯ä»¥ubuntuä¸ºä¾‹ï¼š 12345678910$ docker pull ubuntu:16.0416.04: Pulling from library/ubuntu58690f9b18fc: Pull completeb51569e7c507: Pull completeda8ef40b9eca: Pull completefb15d46c38dc: Pull completeDigest: sha256:0f71fa8d4d2d4292c3c617fda2b36f6dabe5c8b6e34c3dc5b0d17d4e704bd39cStatus: Downloaded newer image for ubuntu:16.04docker.io/library/ubuntu:16.04 æˆ‘ä»¬çœ‹åˆ°æœ€åä¸€è¡Œdocker.ioæ˜¾ç¤ºè¿™æ˜¯ä»å®˜æ–¹ä»“åº“æ‹‰å–çš„ã€‚ ä»ä¸‹è½½è¿‡ç¨‹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæˆ‘ä»¬ä¸Šé¢è¯´çš„åˆ†å±‚å­˜å‚¨çš„æ¦‚å¿µï¼Œå³é•œåƒæ˜¯ç”±å¤šå±‚å­˜å‚¨æ„æˆï¼›ä¸‹è½½ä¹Ÿæ˜¯ä¸€å±‚å±‚çš„å»ä¸‹è½½ï¼Œè€Œä¸æ˜¯å•ç‹¬ä¸€ä¸ªæ–‡ä»¶ï¼›å› æ­¤å¦‚æœä¸‹è½½ä¸­æœ‰æŸä¸ªå±‚å·²ç»è¢«å…¶ä»–é•œåƒä¸‹è½½è¿‡ï¼Œåˆ™ä¼šæ˜¾ç¤ºAlready existsã€‚ä¸‹è½½è¿‡ç¨‹ä¸­ç»™å‡ºäº†æ¯ä¸€å±‚çš„IDçš„å‰12ä½ï¼Œä¸‹è½½ç»“æŸåç»™å‡ºé•œåƒå®Œæ•´çš„sha256æ‘˜è¦ã€‚ Dockerçš„é•œåƒä»“åº“åˆ†ä¸ºå®˜æ–¹ä»“åº“å’Œéå®˜æ–¹ï¼Œå®˜æ–¹çš„é•œåƒå°±æ˜¯ä»Docker Hubæ‹‰å–çš„ï¼›å¦‚æœæƒ³è¦ä»ç¬¬ä¸‰æ–¹çš„é•œåƒä»“åº“è·å–ï¼Œå¯ä»¥åœ¨ä»“åº“åç§°å‰åŠ ä¸Šä»“åº“çš„æœåŠ¡åœ°å€ï¼š 1docker pull &lt;Docker Registryåœ°å€:ç«¯å£å·&gt;&lt;repository&gt;:&lt;tag&gt; åˆ—å‡ºé•œåƒ é€šè¿‡ä¸‹é¢çš„å‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ—å‡ºæœ¬åœ°å·²ç»ä¸‹è½½çš„é•œåƒï¼š 1$ docker image ls è¿è¡Œå‘½ä»¤å‡ºç°ä»¥ä¸‹åˆ—è¡¨ï¼š åˆ—è¡¨åŒ…å«äº†ä»“åº“åã€æ ‡ç­¾ã€é•œåƒIDã€åˆ›å»ºæ—¶é—´å’Œæ‰€å ç”¨ç©ºé—´ï¼›æˆ‘ä»¬çœ‹åˆ°æœ‰ä¸¤ä¸ªmongoçš„é•œåƒï¼Œä¸è¿‡ä¸¤ä¸ªé•œåƒæœ‰ä¸åŒçš„æ ‡ç­¾ã€‚ lså‘½ä»¤é»˜è®¤ä¼šåˆ—å‡ºæ‰€æœ‰çš„é•œåƒï¼Œä½†æ˜¯å½“æœ¬åœ°é•œåƒæ¯”è¾ƒå¤šçš„æ—¶å€™ä¸æ–¹ä¾¿æŸ¥çœ‹ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›åˆ—å‡ºéƒ¨åˆ†çš„é•œåƒï¼Œé™¤äº†å¯ä»¥é€šè¿‡linuxçš„grepå‘½ä»¤ï¼Œè¿˜å¯ä»¥åœ¨lså‘½ä»¤åé¢è·Ÿä¸Šå‚æ•°ï¼š 12345$ docker image ls mongoREPOSITORY TAG IMAGE ID CREATED SIZEmongo latest dfda7a2cf273 2 months ago 693MBmongo 4.0 e305b5d51c0a 2 months ago 430MB åˆ é™¤é•œåƒ æˆ‘ä»¬å¯ä»¥é€šè¿‡rmå‘½ä»¤åˆ é™¤æœ¬åœ°é•œåƒï¼š 1$ docker image rm [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; ...] æˆ–è€…ç®€å†™ä¸ºrmiå‘½ä»¤ï¼š 1$ docker rmi [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; ...] è¿™é‡Œçš„&lt;é•œåƒ&gt;ï¼Œå¯ä»¥æ˜¯é•œåƒçŸ­IDã€é•œåƒé•¿IDã€é•œåƒåæˆ–è€…é•œåƒæ‘˜è¦ï¼›docker image lsåˆ—å‡ºæ¥çš„å·²ç»æ˜¯çŸ­IDäº†ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å–å‰ä¸‰ä¸ªå­—ç¬¦è¿›è¡Œåˆ é™¤ï¼›æ¯”å¦‚æˆ‘ä»¬æƒ³è¦åˆ é™¤ä¸Šé¢çš„mongo:4.0ï¼š 1$ docker rmi e30 æ„å»ºé•œåƒ é™¤äº†ä½¿ç”¨å®˜æ–¹çš„é•œåƒï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºè‡ªå·±çš„é•œåƒï¼›ä¸€èˆ¬éƒ½åœ¨å…¶ä»–çš„é•œåƒåŸºç¡€ä¸Šè¿›è¡Œæ„å»ºï¼Œæ¯”å¦‚nodeã€nginxç­‰ï¼›æ„å»ºé•œåƒéœ€è¦ç”¨åˆ°Dockerfileï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚ æˆ‘ä»¬åœ¨ä¸€ä¸ªç©ºç™½ç›®å½•æ–°å»ºä¸€ä¸ªDockerfileï¼š 123mkdir mynginxcd mynginx/touch Dockerfile æˆ‘ä»¬å‘Dockerfileå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š 12FROM nginxRUN echo &#x27;&lt;h1&gt;Hello, This is My Nginx&lt;/h1&gt;&#x27; &gt; /usr/share/nginx/html/index.html è¿™é‡Œçš„Dockerfileå¾ˆç®€å•ï¼Œå°±ä¸¤ä¸ªå‘½ä»¤ï¼šFROMå’ŒRUNï¼Œæˆ‘ä»¬åé¢ä¼šå¯¹Dockerfileçš„å‘½ä»¤è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼›æˆ‘ä»¬ä½¿ç”¨buildå‘½ä»¤æ„å»ºé•œåƒï¼Œå®ƒçš„æ ¼å¼ä¸ºï¼š 1docker build [é€‰é¡¹] &lt;ä¸Šä¸‹æ–‡è·¯å¾„/URL/-&gt; å› æ­¤ï¼Œæˆ‘ä»¬åœ¨Dockerfileæ‰€åœ¨çš„ç›®å½•æ‰§è¡Œå‘½ä»¤ï¼š 1$ docker build -t mynginx:v3 . è¿è¡Œå‘½ä»¤ï¼Œæˆ‘ä»¬çœ‹åˆ°é•œåƒä¹Ÿæ˜¯æŒ‰ç…§Dockerfileé‡Œé¢çš„æ­¥éª¤ï¼Œåˆ†å±‚è¿›è¡Œæ„å»ºçš„ï¼š æ„å»ºæˆåŠŸåï¼Œæˆ‘ä»¬åˆ—å‡ºæ‰€æœ‰çš„é•œåƒå°±èƒ½çœ‹åˆ°åˆšåˆšæ„å»ºçš„mynginxäº†ã€‚åœ¨ä¸Šé¢çš„å‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬å‘ç°æœ€åæœ‰ä¸€ä¸ª.ï¼Œå®ƒè¡¨ç¤ºäº†å½“å‰ç›®å½•ï¼Œå¦‚æœä¸å†™è¿™ä¸ªç›®å½•ä¼šæŠ¥é”™æç¤ºï¼›å¦‚æœå¯¹åº”ä¸Šé¢çš„æ ¼å¼ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸Šä¸‹æ–‡è·¯å¾„ï¼Œé‚£è¿™ä¸ªä¸Šä¸‹æ–‡è·¯å¾„æ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿè¦ç†è§£è¿™ä¸ªè·¯å¾„çš„ä½œç”¨ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ¥ç†è§£Dockerçš„æ¶æ„ã€‚ Dockeræ˜¯ä¸€ä¸ªå…¸å‹çš„C/Sæ¶æ„çš„åº”ç”¨ï¼Œå®ƒå¯ä»¥åˆ†ä¸ºDockerå®¢æˆ·ç«¯ï¼ˆå¹³æ—¶æ•²çš„Dockerå‘½ä»¤ï¼‰å’ŒDockeræœåŠ¡ç«¯ï¼ˆDockerå®ˆæŠ¤è¿›ç¨‹ï¼‰ã€‚Dockerå®¢æˆ·ç«¯é€šè¿‡REST APIå’ŒæœåŠ¡ç«¯è¿›è¡Œäº¤äº’ï¼Œdockerå®¢æˆ·ç«¯æ¯å‘é€ä¸€æ¡æŒ‡ä»¤ï¼Œåº•å±‚éƒ½ä¼šè½¬åŒ–æˆREST APIè°ƒç”¨çš„å½¢å¼å‘é€ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯å‘é€çš„è¯·æ±‚å¹¶ç»™å‡ºå“åº”ã€‚ å› æ­¤è¡¨é¢ä¸Šçœ‹æˆ‘ä»¬å¥½åƒåœ¨æœ¬æœºä¸Šæ‰§è¡Œå„ç§Dockerçš„åŠŸèƒ½ï¼Œå®é™…ä¸Šéƒ½æ˜¯éƒ½æ˜¯åœ¨DockeræœåŠ¡ç«¯å®Œæˆçš„ï¼ŒåŒ…æ‹¬Dockeré•œåƒçš„æ„å»ºã€å®¹å™¨åˆ›å»ºã€å®¹å™¨è¿è¡Œç­‰å·¥ä½œéƒ½æ˜¯DockeræœåŠ¡ç«¯æ¥å®Œæˆçš„ï¼ŒDockerå®¢æˆ·ç«¯åªæ˜¯æ‰¿æ‹…å‘é€æŒ‡ä»¤çš„è§’è‰²ã€‚ ç†è§£äº†Dockerçš„æ¶æ„å°±å¾ˆå®¹å™¨ç†è§£Dockeræ„å»ºé•œåƒçš„å·¥ä½œåŸç†äº†ï¼Œå®ƒçš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š æ‰§è¡Œbuildå‘½ä»¤ Dockerå®¢æˆ·ç«¯ä¼šå°†æ„å»ºå‘½ä»¤åé¢æŒ‡å®šçš„ä¸Šä¸‹æ–‡è·¯å¾„ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªtaråŒ…ï¼Œå‘é€ç»™DockeræœåŠ¡ç«¯; DockeræœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘é€çš„taråŒ…ï¼Œç„¶åè§£å‹ï¼Œæ ¹æ®Dockerfileé‡Œé¢çš„æŒ‡ä»¤è¿›è¡Œé•œåƒçš„åˆ†å±‚æ„å»ºï¼› å› æ­¤ä¸Šä¸‹æ–‡è·¯å¾„æœ¬è´¨ä¸Šå°±æ˜¯æŒ‡å®šæœåŠ¡ç«¯ä¸ŠDockerfileä¸­æŒ‡ä»¤å·¥ä½œçš„ç›®å½•ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨Dockerfileä¸­ç»å¸¸éœ€è¦æ‹·è´ä»£ç åˆ°é•œåƒä¸­å»ï¼Œå› æ­¤ä¼šè¿™ä¹ˆå†™ï¼š 1COPY ./package.json /app/ è¿™é‡Œè¦å¤åˆ¶çš„package.jsonæ–‡ä»¶ï¼Œå¹¶ä¸ä¸€å®šåœ¨docker buildå‘½ä»¤æ‰§è¡Œçš„ç›®å½•ä¸‹ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯åœ¨Dockerfileæ–‡ä»¶åŒçº§ç›®å½•ä¸‹ï¼Œè€Œæ˜¯docker buildå‘½ä»¤æŒ‡å®šçš„ä¸Šä¸‹æ–‡è·¯å¾„ç›®å½•ä¸‹çš„package.jsonã€‚ å®¹å™¨ ä»‹ç»äº†é•œåƒï¼Œæˆ‘ä»¬åˆ°äº†Dockerç¬¬ä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µäº†ï¼šå®¹å™¨ã€‚å®¹å™¨æ˜¯é•œåƒçš„è¿è¡Œæ—¶çš„å®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ä»ä¸€ä¸ªé•œåƒä¸Šå¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ã€‚ å¯¹å®¹å™¨çš„ç®¡ç†åŒ…æ‹¬åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€è¿›å…¥ã€å¯¼å…¥å¯¼å‡ºå’Œåˆ é™¤ç­‰ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸‹æ¯ä¸ªæ“ä½œçš„å…·ä½“å‘½ä»¤ä»¥åŠæ•ˆæœã€‚ åˆ›å»ºå¯åŠ¨å®¹å™¨ æ–°å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨ç”¨çš„å‘½ä»¤æ˜¯docker runï¼Œå®ƒåé¢æœ‰æ—¶å€™ä¼šå¸¦ä¸Šæœ‰å¾ˆé•¿å¾ˆé•¿çš„é€‰é¡¹ï¼Œä¸è¿‡å…¶åŸºæœ¬çš„è¯­æ³•å¦‚ä¸‹ï¼š 1$ docker run [é€‰é¡¹] é•œåƒåç§° [å‘½ä»¤] [å‚æ•°...] å®ƒå¯ä»¥å¸¦ä¸Šä¸€äº›å¸¸è§çš„é€‰é¡¹ï¼š -dï¼šå®¹å™¨åœ¨åå°è¿è¡Œ -tï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸-iåŒæ—¶ä½¿ç”¨ -iï¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸-tåŒæ—¶ä½¿ç”¨ -Pï¼šéšæœºç«¯å£æ˜ å°„ -pï¼šæŒ‡å®šç«¯å£æ˜ å°„ â€“nameï¼šä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§° -eï¼šè®¾ç½®ç¯å¢ƒå˜é‡ â€“dnsï¼šæŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ -mï¼šè®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ â€“net=â€bridgeâ€: æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼› â€“linkï¼šé“¾æ¥å¦ä¸€ä¸ªå®¹å™¨ -vï¼šç»‘å®šå· â€“rmï¼šé€€å‡ºå®¹å™¨ååˆ é™¤è¯¥å®¹å™¨ æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªhello worldå®¹å™¨ï¼š 1$ docker run hello-world ä½†æ˜¯è¿™æ ·åˆ›å»ºçš„å®¹å™¨åªèƒ½çœ‹åˆ°ä¸€å †çš„æ‰“å°è¯´æ˜ï¼Œæˆ‘ä»¬ä¸èƒ½å¯¹å®¹å™¨è¿›è¡Œä»»ä½•æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Š-ité€‰é¡¹ï¼ˆ-iå’Œ-tçš„ç®€å†™ï¼‰ï¼Œæ¥è®©Dockeråˆ†é…ä¸€ä¸ªç»ˆç«¯ç»™è¿™ä¸ªå®¹å™¨ï¼š 1234$ docker run -it ubuntu:18.04 /bin/bashroot@fdb133227c9a:/# pwdroot@fdb133227c9a:/# lsroot@fdb133227c9a:/# exit æˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨å†…éƒ¨è¿›è¡Œæ“ä½œäº†ï¼Œé€€å‡ºç»ˆç«¯å¯ä»¥ä½¿ç”¨exitå‘½ä»¤æˆ–è€…ctrl+dï¼›æˆ‘ä»¬é€€å‡ºå®¹å™¨åå¦‚æœæŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨ï¼Œå‘ç°å¹¶æ²¡æœ‰ä»»ä½•å®¹å™¨ä¿¡æ¯ã€‚ ä¸€èˆ¬æˆ‘ä»¬éƒ½æ˜¯éœ€è¦è®©å®¹å™¨åœ¨åå°è¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬åŠ ä¸Š-dï¼š 12$ docker run -itd ubuntu:18.04 /bin/bashad4d11b6d3b6a2a37fc702345a09fa0a5671f5b3943def7963994535e8600f7b å®¹å™¨ä¸å†ä»¥å‘½ä»¤è¡Œçš„æ–¹å¼å‘ˆç°äº†ï¼Œè€Œæ˜¯ç›´æ¥ä¸¢å‡ºä¸€é•¿ä¸²çš„æ•°å­—å­—æ¯ç»„åˆï¼Œè¿™æ˜¯å®¹å™¨çš„å”¯ä¸€idï¼›å†ç”¨pså‘½ä»¤æŸ¥çœ‹è¿è¡ŒçŠ¶æ€çš„å®¹å™¨ï¼Œçœ‹åˆ°æˆ‘ä»¬çš„å®¹å™¨å·²ç»åœ¨åå°é»˜é»˜è¿è¡Œäº†ï¼š å½“ä½¿ç”¨runå‘½ä»¤åˆ›å»ºå®¹å™¨æ—¶ï¼ŒDockeråœ¨åå°è¿›è¡Œäº†å¦‚ä¸‹çš„æ“ä½œï¼š æ£€æŸ¥æœ¬åœ°æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œä¸å­˜åœ¨å°±ä» registry ä¸‹è½½ åˆ©ç”¨é•œåƒåˆ›å»ºå¹¶å¯åŠ¨ä¸€ä¸ªå®¹å™¨ åˆ†é…ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œå¹¶åœ¨åªè¯»çš„é•œåƒå±‚å¤–é¢æŒ‚è½½ä¸€å±‚å¯è¯»å†™å±‚ ä»å®¿ä¸»ä¸»æœºé…ç½®çš„ç½‘æ¡¥æ¥å£ä¸­æ¡¥æ¥ä¸€ä¸ªè™šæ‹Ÿæ¥å£åˆ°å®¹å™¨ä¸­å» ä»åœ°å€æ± é…ç½®ä¸€ä¸ª ip åœ°å€ç»™å®¹å™¨ æ‰§è¡Œç”¨æˆ·æŒ‡å®šçš„åº”ç”¨ç¨‹åº æ‰§è¡Œå®Œæ¯•åå®¹å™¨è¢«ç»ˆæ­¢ ç»ˆæ­¢å®¹å™¨ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨stopå‘½ä»¤æ¥ç»ˆæ­¢å®¹å™¨çš„è¿è¡Œï¼›å¦‚æœå®¹å™¨ä¸­çš„åº”ç”¨ç»ˆç»“æˆ–è€…æŠ¥é”™æ—¶ï¼Œå®¹å™¨ä¹Ÿä¼šè‡ªåŠ¨ç»ˆæ­¢ï¼›æˆ‘ä»¬å¯ä»¥ä½¿ç”¨pså‘½ä»¤æŸ¥çœ‹åˆ°çš„å®¹å™¨çŸ­idæ¥ç»ˆæ­¢å¯¹åº”çš„å®¹å™¨ï¼š 1$ docker stop ad4d11b6d3b6 å¯¹äºç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨ï¼Œpså‘½ä»¤å·²ç»ä¸èƒ½çœ‹åˆ°å®ƒäº†ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Š-aé€‰é¡¹ï¼ˆè¡¨ç¤ºæ‰€æœ‰ï¼‰æ¥æŸ¥çœ‹ï¼Œå®ƒçš„STATUSå·²ç»å˜æˆäº†Exitedï¼š 123$ docker ps -aCONTAINER ID IMAGE COMMAND CREATED STATUS PORTS ad4d11b6d3b6 ubuntu:16.04 &quot;/bin/bash&quot; 2 hours ago Exited (0) 2 minutes ago ç»ˆæ­¢çŠ¶æ€çš„å®¹å™¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨docker start [å®¹å™¨id]æ¥è®©å®ƒé‡æ–°è¿›å…¥å¯åŠ¨çŠ¶æ€ï¼Œè¿è¡Œä¸­çš„å®¹å™¨æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨docker restart [å®¹å™¨id]è®©å®ƒé‡æ–°å¯åŠ¨ã€‚ è¿›å…¥å®¹å™¨ æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦è¿›å…¥å®¹å™¨è¿›è¡Œä¸€äº›æ“ä½œï¼Œæ¯”å¦‚è¿›å…¥nginxå®¹å™¨è¿›è¡Œå¹³æ»‘é‡å¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨docker attachæˆ–è€…docker execè¿›å…¥ï¼Œä¸è¿‡æ¨èä½¿ç”¨execå‘½ä»¤ã€‚ æˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹å¦‚æœä½¿ç”¨attachå‘½ä»¤ï¼š 12$ docker attach ad4d11b6d3b6root@ad4d11b6d3b6:/# exit å½“æˆ‘ä»¬ä»ç»ˆç«¯exitåï¼Œæ•´ä¸ªå®¹å™¨ä¼šåœæ­¢ï¼›è€Œä½¿ç”¨execå‘½ä»¤ä¸ä¼šå¯¼è‡´å®¹å™¨åœæ­¢ã€‚ å¦‚æœåªä½¿ç”¨-iå‚æ•°ï¼Œç”±äºæ²¡æœ‰åˆ†é…ä¼ªç»ˆç«¯ï¼Œç•Œé¢æ²¡æœ‰æˆ‘ä»¬ç†Ÿæ‚‰çš„Linuxå‘½ä»¤æç¤ºç¬¦ï¼Œä½†æ˜¯æ‰§è¡Œå‘½ä»¤ä»ç„¶å¯ä»¥çœ‹åˆ°è¿è¡Œç»“æœï¼›å½“ä½¿ç”¨-iå’Œ-tå‚æ•°æ—¶ï¼Œæ‰èƒ½çœ‹åˆ°æˆ‘ä»¬å¸¸è§çš„Linuxå‘½ä»¤æç¤ºç¬¦ã€‚ 12345678910111213$ docker exec -i ad4d11b6d3b6 bashlsbinbootdevetchomelibpwd/$ docker exec -it ad4d11b6d3b6 bashroot@ad4d11b6d3b6:/# exit éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬è¿›å…¥çš„å®¹å™¨éœ€è¦æ˜¯è¿è¡ŒçŠ¶æ€ï¼Œå¦‚æœä¸æ˜¯è¿è¡ŒçŠ¶æ€ï¼Œåˆ™ä¼šæŠ¥é”™ï¼š 1Error response from daemon: Container ad4d11b6d3b6 is not running æŸ¥çœ‹å®¹å™¨æ—¥å¿— æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹å®¹å™¨è¿è¡Œè¿‡ç¨‹è¿›è¡Œä¸€äº›ç›‘æµ‹ï¼ŒæŸ¥çœ‹å®ƒçš„è¿è¡Œè¿‡ç¨‹è®°å½•çš„æ—¥å¿—æƒ…å†µï¼Œä»¥åŠæ˜¯å¦æŠ¥é”™ç­‰ç­‰ï¼›ä½¿ç”¨logså‘½ä»¤è·å–å®¹å™¨çš„æ—¥å¿—ã€‚ 1$ docker logs ad4d11b6d3b6 å®ƒè¿˜æ”¯æŒä»¥ä¸‹å‡ ä¸ªå‚æ•°ï¼š -f : è·Ÿè¸ªæ—¥å¿—è¾“å‡º â€“since :æ˜¾ç¤ºæŸä¸ªå¼€å§‹æ—¶é—´çš„æ‰€æœ‰æ—¥å¿— -t : æ˜¾ç¤ºæ—¶é—´æˆ³ â€“tail :ä»…åˆ—å‡ºæœ€æ–°Næ¡å®¹å™¨æ—¥å¿— logså‘½ä»¤ä¼šå±•ç¤ºä»å®¹å™¨å¯åŠ¨ä»¥æ¥çš„æ‰€æœ‰æ—¥å¿—ï¼Œå¦‚æœå®¹å™¨è¿è¡Œæ—¶é—´ä¹…ï¼Œä¼šåˆ—å‡ºéå¸¸å¤šçš„æ—¥å¿—ï¼Œæˆ‘ä»¬å¯ä»¥åŠ tailå‚æ•°ä»…å±•ç¤ºæœ€æ–°çš„æ—¥å¿—è®°å½•ï¼š 12# åˆ—å‡ºæœ€æ–°çš„10æ¡æ—¥å¿—$ docker logs --tail=10 ad4d11b6d3b6 åˆ†æå®¹å™¨ å¯¹äºå·²ç»åˆ›å»ºçš„å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨inspectæ¥æŸ¥çœ‹å®¹å™¨çš„åº•å±‚åŸºç¡€ä¿¡æ¯ï¼ŒåŒ…æ‹¬å®¹å™¨çš„idã€åˆ›å»ºæ—¶é—´ã€è¿è¡ŒçŠ¶æ€ã€å¯åŠ¨å‚æ•°ã€ç›®å½•æŒ‚è½½ã€ç½‘è·¯é…ç½®ç­‰ç­‰ï¼›å¦å¤–ï¼Œè¯¥å‘½ä»¤ä¹Ÿèƒ½æŸ¥çœ‹dockeré•œåƒçš„ä¿¡æ¯ï¼Œå®ƒçš„æ ¼å¼å¦‚ä¸‹ï¼š 1docker inspect [é€‰é¡¹] &lt;é•œåƒ1&gt; [&lt;é•œåƒ2&gt; ...] inspectæ”¯æŒä»¥ä¸‹é€‰é¡¹ï¼š -f :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚ -s :æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚ â€“type :ä¸ºæŒ‡å®šç±»å‹è¿”å›JSONã€‚ è¿è¡Œåï¼Œä¼šé€šè¿‡JSONæ ¼å¼æ˜¾ç¤ºå®¹å™¨çš„åŸºæœ¬ä¿¡æ¯ï¼š ä½†æ˜¯è¿™ä¹ˆå¤§æ®µçš„æ–‡å­—ï¼Œæˆ‘ä»¬æƒ³è¦è·å–å¯¹æˆ‘ä»¬æœ‰ç”¨çš„ä¿¡æ¯ååˆ†çš„éº»çƒ¦ï¼›é™¤äº†ç”¨grepè¿›è¡Œè¿‡æ»¤å¤–ï¼ˆä¸‡ç‰©çš†å¯grepï¼‰ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡-få‚æ•°ï¼š 12345678# è·å–å®¹å™¨ådocker inspect -f &#123;&#123;.Name&#125;&#125; &lt;å®¹å™¨ID&gt;# è·å–å®¹å™¨ç›®å½•æŒ‚è½½ä¿¡æ¯docker inspect -f &#123;&#123;.NetworkSettings.Mounts&#125;&#125; &lt;å®¹å™¨ID&gt;# è·å–å®¹å™¨ç½‘ç»œè®¾ç½®çš„ç›¸å…³ä¿¡æ¯docker inspect -f &#123;&#123;.NetworkSettings&#125;&#125; &lt;å®¹å™¨ID&gt;# è·å–å®¹å™¨çš„ IP çš„ç›¸å…³ä¿¡æ¯docker inspect -f &#123;&#123;.NetworkSettings.IPAddress&#125;&#125; &lt;å®¹å™¨ID&gt; åˆ é™¤å®¹å™¨ å¦‚æœä¸€ä¸ªå®¹å™¨æˆ‘ä»¬ä¸æƒ³å†ä½¿ç”¨äº†ï¼Œå¯ä»¥ä½¿ç”¨rmå‘½ä»¤æ¥åˆ é™¤ï¼š 1$ docker rm ad4d11b6d3b6 å¦‚æœè¦åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼Œå¯ä»¥æ·»åŠ -få‚æ•°ï¼š 1$ docker rm -f ad4d11b6d3b6 æ•°æ®ç®¡ç† æˆ‘ä»¬ä¸Šé¢ä»‹ç»åˆ°å®¹å™¨æ˜¯ä¿æŒæ— çŠ¶æ€åŒ–çš„ï¼Œå°±æ˜¯éšç”¨éšåˆ ï¼Œå¹¶ä¸ä¼šä¿ç•™æ•°æ®è®°å½•ï¼›åœ¨ä½¿ç”¨dockerçš„æ—¶å€™ï¼Œç»å¸¸ä¼šç”¨åˆ°ä¸€äº›éœ€è¦ä¿ç•™æ•°æ®çš„å®¹å™¨ï¼Œæ¯”å¦‚mysqlã€mongodbï¼Œå¾€å¾€éœ€è¦å¯¹å®¹å™¨ä¸­çš„æ•°æ®è¿›è¡ŒæŒä¹…åŒ–ï¼›æˆ–è€…åœ¨å¤šä¸ªå®¹å™¨ä¹‹é—´è¿›è¡Œæ•°æ®å…±äº«ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†å®¹å™¨çš„æ•°æ®ç®¡ç†ï¼Œä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼š æ•°æ®å·ï¼ˆData Volumesï¼‰ æŒ‚è½½ä¸»æœºç›®å½• (Bind mounts) æ•°æ®å· æ•°æ®å·æ˜¯ä¸€ä¸ªå¯ä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ä½¿ç”¨çš„ç‰¹æ®Šç›®å½•ï¼Œå®ƒç»•è¿‡ UFSï¼Œå¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„ç‰¹æ€§ï¼š æ•°æ®å·å¯ä»¥åœ¨å®¹å™¨ä¹‹é—´å…±äº«å’Œé‡ç”¨ å¯¹æ•°æ®å·çš„ä¿®æ”¹ä¼šç«‹é©¬ç”Ÿæ•ˆ å¯¹æ•°æ®å·çš„æ›´æ–°ï¼Œä¸ä¼šå½±å“é•œåƒ æ•°æ®å·é»˜è®¤ä¼šä¸€ç›´å­˜åœ¨ï¼Œå³ä½¿å®¹å™¨è¢«åˆ é™¤ é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ•°æ®å·ï¼š 12$ docker volume create my-volmy-vol é€šè¿‡lså¯ä»¥åˆ—å‡ºæˆ‘ä»¬æœ¬åœ°æ‰€æœ‰çš„æ•°æ®å·ï¼š 123$ docker volume lsDRIVER VOLUME NAMElocal my-vol inspectå‘½ä»¤ä¹Ÿå¯ä»¥æŸ¥çœ‹æˆ‘ä»¬æ•°æ®å·çš„å…·ä½“ä¿¡æ¯ï¼š 123456789101112$ docker volume inspect my-vol[ &#123; &quot;CreatedAt&quot;: &quot;&quot;, &quot;Driver&quot;: &quot;local&quot;, &quot;Labels&quot;: &#123;&#125;, &quot;Mountpoint&quot;: &quot;/data/programs/docker/volumes/my-vol/_data&quot;, &quot;Name&quot;: &quot;my-vol&quot;, &quot;Options&quot;: &#123;&#125;, &quot;Scope&quot;: &quot;local&quot; &#125;] åœ¨å¯åŠ¨å®¹å™¨æ—¶ï¼Œä½¿ç”¨--mountå°†æ•°æ®å·æŒ‚è½½åœ¨å®¹å™¨çš„ç›®å½•é‡Œï¼ˆå¯ä»¥æœ‰å¤šä¸ªæŒ‚è½½ç‚¹ï¼‰ï¼š 123$ docker run -d -P --name web --mount source=my-vol,target=/usr/share/nginx/html nginx# é€šè¿‡-vç®€å†™å½¢å¼$ docker run -d -P --name web -v my-vol:/usr/share/nginx/html nginx æˆ‘ä»¬å€ŸåŠ©ä¸Šé¢çš„inspectå‘½ä»¤æŸ¥çœ‹å®¹å™¨çš„æŒ‚è½½ä¿¡æ¯ï¼š 12$ docker inspect -f &quot;&#123;&#123;.Mounts&#125;&#125;&quot; web[&#123;volume my-vol /data/programs/docker/volumes/my-vol/_data /usr/share/nginx/html local z true &#125;] æ•°æ®å·æ˜¯è¢«è®¾è®¡ç”¨æ¥æŒä¹…åŒ–æ•°æ®çš„ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸç‹¬ç«‹äºå®¹å™¨ï¼›å› æ­¤å³ä½¿æˆ‘ä»¬å°†å®¹å™¨åˆ é™¤äº†ï¼Œæ•°æ®å·çš„æ•°æ®ä¾ç„¶è¿˜æ˜¯å­˜åœ¨çš„ï¼Œå¹¶ä¸”ä¹Ÿä¸å­˜åœ¨åƒåœ¾å›æ”¶è¿™æ ·çš„æœºåˆ¶æ¥å¤„ç†æ²¡æœ‰ä»»ä½•å®¹å™¨å¼•ç”¨çš„æ•°æ®å·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ é™¤å®¹å™¨çš„æ—¶å€™ä½¿ç”¨docker rm -vå‘½ä»¤åŒæ—¶åˆ é™¤æ•°æ®å·ï¼Œæˆ–è€…æ‰‹åŠ¨æ¥åˆ é™¤ï¼š 1$ docker volume rm my-vol æ— ä¸»çš„æ•°æ®å·å¯èƒ½ä¼šå æ®å¾ˆå¤šç©ºé—´ï¼Œè¦æ¸…ç†è¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼ˆè°¨æ…ä½¿ç”¨ï¼ï¼‰ï¼š 1$ docker volume prune æŒ‚è½½ç›®å½• æˆ‘ä»¬å‘ç°ä¸Šé¢æ•°æ®å·æŒ‚è½½çš„ç›®å½•éƒ½æ˜¯åœ¨dockerçš„å®‰è£…è·¯å¾„ä¸‹ï¼Œä¸åˆ©äºæˆ‘ä»¬è¿›è¡Œç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŒ‚è½½è‡ªå®šä¹‰çš„ç›®å½•ã€‚ 123$ docker run -d -P --name web --mount source=/home/nginx,target=/usr/share/nginx/html nginx# é€šè¿‡-vç®€å†™å½¢å¼$ docker run -d -P --name web -v /home/nginx:/usr/share/nginx/html nginx æŒ‚è½½çš„æœ¬åœ°ç›®å½•çš„è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„ï¼Œä¸èƒ½æ˜¯ç›¸å¯¹è·¯å¾„ã€‚ æœ¬åœ°è·¯å¾„å¦‚æœä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€‚ é»˜è®¤æŒ‚è½½çš„ä¸»æœºç›®å½•çš„é»˜è®¤æƒé™æ˜¯è¯»å†™ï¼Œå¯ä»¥é€šè¿‡å¢åŠ readonlyæŒ‡å®šä¸ºåªè¯»ã€‚ 1$ docker run -d -P --name web -v /home/nginx:/usr/share/nginx/html:ro nginx åŠ readonlyåï¼Œå¦‚æœæˆ‘ä»¬åœ¨å®¹å™¨å†…çš„/usr/share/nginx/htmlç›®å½•ä¸‹ä¿®æ”¹æ–‡ä»¶æˆ–è€…æ–°å»ºæ–‡ä»¶å°±ä¼šæŠ¥é”™ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æŒ‚è½½æœ¬åœ°ç›®å½•ï¼Œéœ€è¦ä¿è¯æŒ‚è½½çš„ç›®å½•ä¸‹é¢æœ‰ç¨‹åºè¿è¡Œæ‰€éœ€è¦çš„æ–‡ä»¶ï¼Œæ¯”å¦‚è¿™é‡Œnginxå®¹å™¨éœ€è¦åœ¨æˆ‘ä»¬åœ¨æœ¬åœ°ç›®å½•/home/nginxä¸‹æœ‰index.htmlæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ä¼šæŠ¥403é”™è¯¯ã€‚ æœ¬ç« å®Œç»“ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://xieyufei.com/tags/Nodejs/"}]},{"title":"ä»é›¶å¼€å§‹å‘å¸ƒè‡ªå·±çš„NPMåŒ…","date":"2021-12-28T08:57:49.000Z","path":"2021/12/28/Npm-Package.html","text":"åœ¨Verdaccioæ­å»ºnpmç§æœ‰æœåŠ¡å™¨ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•æ­å»ºä¸€ä¸ªNpmç§æœ‰æœåŠ¡å™¨ï¼›æœåŠ¡å™¨æ­å»ºå®Œæˆåï¼Œæˆ‘ä»¬æœ¬ç« æ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ä¸Šä¼ æˆ‘ä»¬è‡ªå·±çš„npmåŒ…ã€‚ å‰ç«¯æ¨¡å—åŒ–ä½œä¸ºå‰ç«¯å¿…å¤‡çš„ä¸€ä¸ªæŠ€èƒ½ï¼Œå·²ç»åœ¨å‰ç«¯å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºï¼›è€Œæ¨¡å—åŒ–å¸¦æ¥é¡¹ç›®çš„è§„æ¨¡ä¸æ–­å˜å¤§ï¼Œé¡¹ç›®çš„ä¾èµ–è¶Šæ¥è¶Šå¤šï¼›éšç€é¡¹ç›®çš„å¢å¤šï¼Œå¦‚æœæ¯ä¸ªæ¨¡å—éƒ½é€šè¿‡æ‰‹åŠ¨æ‹·è´çš„æ–¹å¼æ— å¼‚äºé¥®é¸©æ­¢æ¸´ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåŠŸèƒ½ç›¸ä¼¼çš„æ¨¡å—æˆ–ç»„ä»¶æŠ½å–åˆ°ä¸€ä¸ªnpmåŒ…ä¸­ï¼›ç„¶åä¸Šä¼ åˆ°ç§æœ‰npmæœåŠ¡å™¨ï¼Œä¸æ–­è¿­ä»£npmåŒ…æ¥æ›´æ–°ç®¡ç†æ‰€æœ‰é¡¹ç›®çš„ä¾èµ–ã€‚ npmåŒ…çš„åŸºæœ¬äº†è§£ é¦–å…ˆæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹å®ç°ä¸€ä¸ªnpmåŒ…éœ€è¦åŒ…å«å“ªäº›å†…å®¹ã€‚ æ‰“åŒ… é€šå¸¸ï¼Œæˆ‘ä»¬æŠŠæ‰“åŒ…å¥½çš„ä¸€äº›æ¨¡å—æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹ï¼Œä¾¿äºç»Ÿä¸€è¿›è¡ŒåŠ è½½ï¼›æ˜¯çš„ï¼ŒnpmåŒ…ä¹Ÿæ˜¯éœ€è¦è¿›è¡Œæ‰“åŒ…çš„ï¼Œè™½ç„¶ä¹Ÿèƒ½ç›´æ¥å†™npmåŒ…æ¨¡å—çš„ä»£ç ï¼ˆå¹¶ä¸æ¨èï¼‰ï¼Œä½†æˆ‘ä»¬ç»å¸¸ä¼šåœ¨é¡¹ç›®ä¸­ç”¨åˆ°typescriptã€babelã€eslintã€ä»£ç å‹ç¼©ç­‰ç­‰åŠŸèƒ½ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹npmåŒ…è¿›è¡Œæ‰“åŒ…åå†è¿›è¡Œå‘å¸ƒã€‚ åœ¨æ·±å…¥å¯¹æ¯”Webpackã€Parcelã€Rollupæ‰“åŒ…å·¥å…·ä¸­ï¼Œæˆ‘ä»¬æ€»ç»“äº†ï¼Œrollupç›¸æ¯”äºwebpackæ›´é€‚åˆæ‰“åŒ…ä¸€äº›ç¬¬ä¸‰æ–¹çš„ç±»åº“ï¼Œå› æ­¤æœ¬æ–‡ä¸»è¦é€šè¿‡rollupæ¥è¿›è¡Œæ‰“åŒ…ã€‚ npmåŸŸçº§åŒ… éšç€npmåŒ…è¶Šæ¥è¶Šå¤šï¼Œè€Œä¸”åŒ…åä¹Ÿåªèƒ½æ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœä¸€ä¸ªåå­—è¢«åˆ«äººå äº†ï¼Œé‚£ä½ å°±ä¸èƒ½å†ä½¿ç”¨è¿™ä¸ªåå­—ï¼›å‡è®¾æˆ‘æƒ³è¦å¼€å‘ä¸€ä¸ªutilsåŒ…ï¼Œä½†æ˜¯å¼ ä¸‰å·²ç»å‘å¸ƒäº†ä¸€ä¸ªutilsåŒ…ï¼Œé‚£æˆ‘çš„åŒ…åå°±ä¸èƒ½å«utilsäº†ï¼›æ­¤æ—¶æˆ‘ä»¬å¯ä»¥åŠ ä¸€äº›è¿æ¥ç¬¦æˆ–è€…å…¶ä»–çš„å­—ç¬¦è¿›è¡ŒåŒºåˆ†ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šè®©åŒ…åä¸å…·å¤‡å¯è¯»æ€§ã€‚ åœ¨npmçš„åŒ…ç®¡ç†ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€ç§scoped packagesæœºåˆ¶ï¼Œç”¨äºå°†ä¸€äº›npmåŒ…ä»¥@scope/packageçš„å‘½åå½¢å¼é›†ä¸­åœ¨ä¸€ä¸ªå‘½åç©ºé—´ä¸‹é¢ï¼Œå®ç°åŸŸçº§çš„åŒ…ç®¡ç†ã€‚ åŸŸçº§åŒ…ä¸ä»…ä¸ç”¨æ‹…å¿ƒä¼šå’Œåˆ«äººçš„åŒ…åé‡å¤ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¯¹åŠŸèƒ½ç±»ä¼¼çš„åŒ…è¿›è¡Œç»Ÿä¸€çš„åˆ’åˆ†å’Œç®¡ç†ï¼›æ¯”å¦‚æˆ‘ä»¬ç”¨vueè„šæ‰‹æ¶æ­å»ºçš„é¡¹ç›®ï¼Œé‡Œé¢å°±æœ‰@vue/cli-plugin-babelã€@vue/cli-plugin-eslintç­‰ç­‰åŸŸçº§åŒ…ã€‚ æˆ‘ä»¬åœ¨åˆå§‹åŒ–é¡¹ç›®æ—¶å¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œæ¥æ·»åŠ scopeï¼š 1npm init --scope=username ç›¸åŒåŸŸçº§èŒƒå›´å†…çš„åŒ…ä¼šè¢«å®‰è£…åœ¨ç›¸åŒçš„æ–‡ä»¶è·¯å¾„ä¸‹ï¼Œæ¯”å¦‚node_modules/@username/ï¼Œå¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„ä½œç”¨åŸŸåŒ…ï¼›å®‰è£…åŸŸçº§åŒ…ä¹Ÿéœ€è¦æŒ‡æ˜å…¶ä½œç”¨åŸŸèŒƒå›´ï¼š 1npm install @username/package åœ¨ä»£ç ä¸­å¼•å…¥æ—¶åŒæ ·ä¹Ÿéœ€è¦ä½œç”¨åŸŸèŒƒå›´: 1require(&quot;@username/package&quot;) åŠ è½½è§„åˆ™ åœ¨npmåŒ…ä¸­çš„package.jsonæ–‡ä»¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°mainã€jsnext:mainã€moduleã€browserç­‰å­—æ®µï¼Œé‚£ä¹ˆè¿™äº›å­—æ®µéƒ½ä»£è¡¨äº†ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®è¿™è·ŸnpmåŒ…çš„å·¥ä½œç¯å¢ƒæœ‰å…³ç³»ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒnpmåŒ…åˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹çš„åŒ…ï¼š åªèƒ½åœ¨æµè§ˆå™¨ç«¯ä½¿ç”¨çš„ åªèƒ½åœ¨æœåŠ¡å™¨ç«¯ä½¿ç”¨çš„ æµè§ˆå™¨/æœåŠ¡å™¨ç«¯éƒ½å¯ä½¿ç”¨ å‡å¦‚æˆ‘ä»¬ç°åœ¨å¼€å‘ä¸€ä¸ªnpmåŒ…ï¼Œæ—¢è¦æ”¯æŒæµè§ˆå™¨ç«¯ï¼Œä¹Ÿè¦æ”¯æŒæœåŠ¡å™¨ç«¯ï¼ˆæ¯”å¦‚axiosã€lodashç­‰ï¼‰ï¼Œéœ€è¦åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹åŠ è½½npmåŒ…çš„ä¸åŒå…¥å£æ–‡ä»¶ï¼Œåªé€šè¿‡ä¸€ä¸ªå­—æ®µå·²ç»ä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚ é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹mainå­—æ®µï¼Œå®ƒæ˜¯nodejsé»˜è®¤æ–‡ä»¶å…¥å£, æ”¯æŒæœ€å¹¿æ³›ï¼Œä¸»è¦ä½¿ç”¨åœ¨å¼•ç”¨æŸä¸ªä¾èµ–åŒ…çš„æ—¶å€™éœ€è¦æ­¤å±æ€§çš„æ”¯æŒï¼›å¦‚æœä¸ä½¿ç”¨mainå­—æ®µçš„è¯ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è¿™æ ·æ¥å¼•ç”¨ä¾èµ–ï¼š 1import(&#x27;some-module/dist/bundle.js&#x27;) æ‰€ä»¥å®ƒçš„ä½œç”¨æ˜¯æ¥å‘Šè¯‰æ‰“åŒ…å·¥å…·ï¼ŒnpmåŒ…çš„å…¥å£æ–‡ä»¶æ˜¯å“ªä¸ªï¼Œæ‰“åŒ…æ—¶è®©æ‰“åŒ…å·¥å…·å¼•å…¥å“ªä¸ªæ–‡ä»¶ï¼›è¿™é‡Œçš„æ–‡ä»¶ä¸€èˆ¬æ˜¯commonjs(cjs)æ¨¡å—åŒ–çš„ã€‚ æœ‰ä¸€äº›æ‰“åŒ…å·¥å…·ï¼Œä¾‹å¦‚webpackæˆ–rollupï¼Œæœ¬èº«å°±èƒ½ç›´æ¥å¤„ç†importå¯¼å…¥çš„esmæ¨¡å—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å°†æ¨¡å—æ–‡ä»¶æ‰“åŒ…æˆesmæ¨¡å—ï¼Œç„¶åæŒ‡å®šmoduleå­—æ®µï¼›ç”±åŒ…çš„ä½¿ç”¨è€…æ¥å†³å®šå¦‚ä½•å¼•ç”¨ã€‚ jsnext:mainå’Œmoduleå­—æ®µçš„æ„ä¹‰æ˜¯ä¸€æ ·çš„ï¼Œéƒ½å¯ä»¥æŒ‡å®šesmæ¨¡å—çš„æ–‡ä»¶ï¼›ä½†æ˜¯jsnext:mainæ˜¯ç¤¾åŒºçº¦å®šçš„å­—æ®µï¼Œå¹¶éå®˜æ–¹ï¼Œè€Œmoduleåˆ™æ˜¯å®˜æ–¹çº¦å®šå­—æ®µï¼Œå› æ­¤æˆ‘ä»¬ç»å¸¸å°†ä¸¤ä¸ªå­—æ®µåŒæ—¶ä½¿ç”¨ã€‚ åœ¨Webpacké…ç½®å…¨è§£æä¸­æˆ‘ä»¬ä»‹ç»åˆ°ï¼ŒmainFieldså°±æ˜¯webpackç”¨æ¥è§£ææ¨¡å—çš„ï¼Œé»˜è®¤ä¼šæŒ‰ç…§é¡ºåºè§£æbrowserã€moduleã€mainå­—æ®µã€‚ æœ‰æ—¶å€™æˆ‘ä»¬è¿˜æƒ³è¦å†™ä¸€ä¸ªåŒæ—¶èƒ½å¤Ÿè·‘åœ¨æµè§ˆå™¨ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„npmåŒ…ï¼ˆæ¯”å¦‚axiosï¼‰ï¼Œä½†æ˜¯ä¸¤è€…åœ¨è¿è¡Œç¯å¢ƒä¸Šè¿˜æ˜¯æœ‰ç€ç»†å¾®çš„åŒºåˆ«ï¼Œæ¯”å¦‚æµè§ˆå™¨è¯·æ±‚æ•°æ®ç”¨çš„æ˜¯XMLHttpRequestï¼Œè€ŒæœåŠ¡å™¨ç«¯åˆ™æ˜¯httpæˆ–è€…httpsï¼›é‚£ä¹ˆæˆ‘ä»¬è¦æ€æ ·æ¥åŒºåˆ†ä¸åŒçš„ç¯å¢ƒå‘¢ï¼Ÿ é™¤äº†æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­å¯¹ç¯å¢ƒå‚æ•°è¿›è¡Œåˆ¤æ–­ï¼ˆæ¯”å¦‚åˆ¤æ–­XMLHttpRequestæ˜¯å¦ä¸ºundefinedï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨browserå­—æ®µï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒæ¥æ›¿æ¢mainå­—æ®µã€‚browserçš„ç”¨æ³•æœ‰ä»¥ä¸‹ä¸¤ç§ï¼Œå¦‚æœbrowserä¸ºå•ä¸ªçš„å­—ç¬¦ä¸²ï¼Œåˆ™æ›¿æ¢mainæˆä¸ºæµè§ˆå™¨ç¯å¢ƒçš„å…¥å£æ–‡ä»¶ï¼Œä¸€èˆ¬æ˜¯umdæ¨¡å—çš„ï¼š 123&#123; &quot;browser&quot;: &quot;./dist/bundle.umd.js&quot;&#125; browserè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¥å£°æ˜è¦æ›¿æ¢æˆ–è€…å¿½ç•¥çš„æ–‡ä»¶ï¼›è¿™ç§å½¢å¼æ¯”è¾ƒé€‚åˆæ›¿æ¢éƒ¨åˆ†æ–‡ä»¶ï¼Œä¸éœ€è¦åˆ›å»ºæ–°çš„å…¥å£ã€‚keyæ˜¯è¦æ›¿æ¢çš„moduleæˆ–è€…æ–‡ä»¶åï¼Œå³ä¾§æ˜¯æ›¿æ¢çš„æ–°çš„æ–‡ä»¶ï¼Œæ¯”å¦‚åœ¨axiosçš„packages.jsonä¸­å°±ç”¨åˆ°äº†è¿™ç§æ›¿æ¢ï¼š 12345&#123; &quot;browser&quot;: &#123; &quot;./lib/adapters/http.js&quot;: &quot;./lib/adapters/xhr.js&quot; &#125;&#125; æ‰“åŒ…å·¥å…·åœ¨æ‰“åŒ…åˆ°æµè§ˆå™¨ç¯å¢ƒæ—¶ï¼Œä¼šå°†å¼•å…¥æ¥è‡ª./lib/adapters/http.jsçš„æ–‡ä»¶å†…å®¹æ›¿æ¢æˆ./lib/adapters/xhr.jsçš„å†…å®¹ã€‚ åœ¨æœ‰ä¸€äº›åŒ…ä¸­æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°typeså­—æ®µï¼ŒæŒ‡å‘types/index.d.tsæ–‡ä»¶ï¼Œè¿™ä¸ªå­—æ®µæ˜¯ç”¨æ¥åŒ…å«äº†è¿™ä¸ªnpmåŒ…çš„å˜é‡å’Œå‡½æ•°çš„ç±»å‹ä¿¡æ¯ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨ä½¿ç”¨lodash-esåŒ…çš„æ—¶å€™ï¼Œæœ‰ä¸€äº›å‡½æ•°çš„åç§°æƒ³ä¸èµ·æ¥äº†ï¼Œåªè®°å¾—å¤§æ¦‚çš„åå­—ï¼›æ¯”å¦‚è¾“å…¥fiå°±èƒ½è‡ªåŠ¨åœ¨ç¼–è¯‘å™¨ä¸­è”æƒ³å‡ºfillæˆ–è€…findIndexç­‰å‡½æ•°åç§°ï¼Œè¿™å°±ä¸ºåŒ…çš„ä½¿ç”¨è€…æä¾›äº†æå¤§çš„ä¾¿åˆ©ï¼Œä¸éœ€è¦å»æŸ¥çœ‹åŒ…çš„å†…å®¹å°±èƒ½äº†è§£å…¶å¯¼å‡ºçš„å‚æ•°åç§°ï¼Œä¸ºç”¨æˆ·æä¾›äº†æ›´åŠ å¥½çš„IDEæ”¯æŒã€‚ å‘å¸ƒå“ªäº›æ–‡ä»¶ åœ¨npmåŒ…ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å“ªäº›æ–‡ä»¶å‘å¸ƒåˆ°æœåŠ¡å™¨ä¸­ï¼Œæ¯”å¦‚åªå‘å¸ƒå‹ç¼©åçš„ä»£ç ï¼Œè€Œè¿‡æ»¤æºä»£ç ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶æ¥è¿›è¡ŒæŒ‡å®šï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ç§æƒ…å†µï¼š å­˜åœ¨.npmignoreæ–‡ä»¶ï¼Œä»¥.npmignoreæ–‡ä»¶ä¸ºå‡†ï¼Œåœ¨æ–‡ä»¶ä¸­çš„å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥ï¼Œä¸ä¼šä¸Šä¼ ï¼›å³ä½¿æœ‰.gitignoreæ–‡ä»¶ï¼Œä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚ ä¸å­˜åœ¨.npmignoreæ–‡ä»¶ï¼Œä»¥.gitignoreæ–‡ä»¶ä¸ºå‡†ï¼Œä¸€èˆ¬æ˜¯æ— å…³å†…å®¹ï¼Œä¾‹å¦‚.vscodeç­‰ç¯å¢ƒé…ç½®ç›¸å…³çš„ã€‚ ä¸å­˜åœ¨.npmignoreä¹Ÿä¸å­˜åœ¨.gitignoreï¼Œæ‰€æœ‰æ–‡ä»¶éƒ½ä¼šä¸Šä¼ ã€‚ package.jsonä¸­å­˜åœ¨fileså­—æ®µï¼Œå¯ä»¥ç†è§£ä¸ºfilesä¸ºç™½åå•ã€‚ ignoreç›¸å½“äºé»‘åå•ï¼Œfileså­—æ®µå°±æ˜¯ç™½åå•ï¼Œé‚£ä¹ˆå½“ä¸¤è€…å†…å®¹å†²çªæ—¶ï¼Œä»¥è°ä¸ºå‡†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯filesä¸ºå‡†ï¼Œå®ƒçš„ä¼˜å…ˆçº§æœ€é«˜ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡npm packå‘½ä»¤è¿›è¡Œæœ¬åœ°æ¨¡æ‹Ÿæ‰“åŒ…æµ‹è¯•ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€ä¸ªtgzçš„å‹ç¼©åŒ…ï¼Œè¿™å°±æ˜¯å°†è¦ä¸Šä¼ çš„æ–‡ä»¶å†…å®¹ã€‚ é¡¹ç›®ä¾èµ– åœ¨package.jsonæ–‡ä»¶ä¸­ï¼Œæ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½ä¼šåœ¨dependencieså’ŒdevDependencieså­—æ®µä¸­è¿›è¡Œé…ç½®ç®¡ç†ï¼š dependenciesï¼šè¡¨ç¤ºç”Ÿäº§ç¯å¢ƒä¸‹çš„ä¾èµ–ç®¡ç†ï¼Œâ€“save ç®€å†™ -Sï¼› devDependenciesï¼šè¡¨ç¤ºå¼€å‘ç¯å¢ƒä¸‹çš„ä¾èµ–ç®¡ç†ï¼Œâ€“save-dev ç®€å†™ -Dï¼› dependencieså­—æ®µæŒ‡å®šäº†é¡¹ç›®ä¸Šçº¿åè¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å—ï¼Œå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬çš„é¡¹ç›®åœ¨ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸­è¦ç”¨åˆ°çš„ä¸œè¥¿ï¼›æ¯”å¦‚vueã€jqueryã€axiosç­‰ï¼Œé¡¹ç›®ä¸Šçº¿åè¿˜æ˜¯è¦ç»§ç»­ä½¿ç”¨çš„ä¾èµ–ã€‚ devDependencieså­—æ®µæŒ‡å®šäº†é¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—ï¼Œå¼€å‘ç¯å¢ƒä¼šç”¨åˆ°çš„ä¸œè¥¿ï¼›æ¯”å¦‚webpackã€eslintç­‰ç­‰ï¼Œæˆ‘ä»¬æ‰“åŒ…çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œä½†æ˜¯é¡¹ç›®ä¸Šçº¿è¿è¡Œæ—¶å°±ä¸éœ€è¦äº†ï¼Œæ‰€ä»¥æ”¾åˆ°devDependenciesä¸­å»å°±å¥½äº†ã€‚ é™¤äº†dependencieså’ŒdevDependencieså­—æ®µï¼Œæˆ‘ä»¬åœ¨ä¸€äº›npmåŒ…ä¸­è¿˜ä¼šçœ‹åˆ°peerDependencieså­—æ®µï¼Œæ²¡æœ‰å†™è¿‡npmæ’ä»¶çš„ç«¥é‹å¯èƒ½ä¼šå¯¹è¿™ä¸ªå­—æ®µæ¯”è¾ƒé™Œç”Ÿï¼Œå®ƒå’Œä¸Šé¢ä¸¤ä¸ªä¾èµ–æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ å‡è®¾æˆ‘ä»¬çš„é¡¹ç›®MyProjectï¼Œæœ‰ä¸€ä¸ªä¾èµ–PackageAï¼Œå®ƒçš„package.jsonä¸­åˆæŒ‡å®šäº†å¯¹PackageBçš„ä¾èµ–ï¼Œå› æ­¤æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„æ˜¯è¿™æ ·çš„ï¼š 12345MyProject|- node_modules |- PackageA |- node_modules |- PackageB é‚£ä¹ˆæˆ‘ä»¬åœ¨MyProjectä¸­æ˜¯å¯ä»¥ç›´æ¥å¼•ç”¨PackageAçš„ä¾èµ–çš„ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³ç›´æ¥ä½¿ç”¨PackageBï¼Œé‚£å¯¹ä¸èµ·ï¼Œæ˜¯ä¸è¡Œçš„ï¼›å³ä½¿PackageBå·²ç»è¢«å®‰è£…äº†ï¼Œä½†æ˜¯nodeåªä¼šåœ¨MyProject/node_modulesç›®å½•ä¸‹æŸ¥æ‰¾PackageBã€‚ ä¸ºäº†è§£å†³è¿™æ ·é—®é¢˜ï¼ŒpeerDependencieså­—æ®µå°±è¢«å¼•å…¥äº†ï¼Œé€šä¿—çš„è§£é‡Šå°±æ˜¯ï¼šå¦‚æœä½ å®‰è£…äº†æˆ‘ï¼Œä½ æœ€å¥½ä¹Ÿå®‰è£…ä»¥ä¸‹ä¾èµ–ã€‚æ¯”å¦‚ä¸Šé¢å¦‚æœæˆ‘ä»¬åœ¨PackageAçš„package.jsonä¸­åŠ å…¥ä¸‹é¢ä»£ç ï¼š 12345&#123; &quot;peerDependencies&quot;: &#123; &quot;PackageB&quot;: &quot;1.0.0&quot; &#125;&#125; è¿™æ ·å¦‚æœä½ å®‰è£…äº†PackageAï¼Œé‚£ä¼šè‡ªåŠ¨å®‰è£…PackageBï¼Œä¼šå½¢æˆå¦‚ä¸‹çš„ç›®å½•ç»“æ„ï¼š 1234MyProject|- node_modules |- PackageA |- PackageB æˆ‘ä»¬åœ¨MyProjecté¡¹ç›®ä¸­å°±èƒ½æ„‰å¿«çš„ä½¿ç”¨PackageAå’ŒPackageBä¸¤ä¸ªä¾èµ–äº†ã€‚ æ¯”å¦‚ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰çš„element-plusç»„ä»¶åº“ï¼Œå®ƒæœ¬èº«ä¸å¯èƒ½å•ç‹¬è¿è¡Œï¼Œå¿…é¡»ä¾èµ–äºvue3ç¯å¢ƒæ‰èƒ½è¿è¡Œï¼›å› æ­¤åœ¨å®ƒçš„package.jsonä¸­æˆ‘ä»¬çœ‹åˆ°å®ƒå¯¹å®¿ä¸»ç¯å¢ƒçš„è¦æ±‚ï¼š 12345&#123; &quot;peerDependencies&quot;: &#123; &quot;vue&quot;: &quot;^3.2.0&quot; &#125;,&#125; è¿™æ ·æˆ‘ä»¬çœ‹åˆ°å®ƒåœ¨ç»„ä»¶ä¸­å¼•å…¥çš„vueçš„ä¾èµ–ï¼Œå…¶å®éƒ½æ˜¯å®¿ä¸»ç¯å¢ƒæä¾›çš„vue3ä¾èµ–ï¼š 1import &#123; ref, watch, nextTick &#125; from &#x27;vue&#x27; è®¸å¯è¯ licenseå­—æ®µä½¿æˆ‘ä»¬å¯ä»¥å®šä¹‰é€‚ç”¨äºpackage.jsonæ‰€æè¿°ä»£ç çš„è®¸å¯è¯ã€‚åŒæ ·ï¼Œåœ¨å°†é¡¹ç›®å‘å¸ƒåˆ°npmæ³¨å†Œæ—¶ï¼Œè¿™éå¸¸é‡è¦ï¼Œå› ä¸ºè®¸å¯è¯å¯èƒ½ä¼šé™åˆ¶æŸäº›å¼€å‘äººå‘˜æˆ–ç»„ç»‡å¯¹è½¯ä»¶çš„ä½¿ç”¨ã€‚æ‹¥æœ‰æ¸…æ™°çš„è®¸å¯è¯æœ‰åŠ©äºæ˜ç¡®å®šä¹‰è¯¥è½¯ä»¶å¯ä»¥ä½¿ç”¨çš„æœ¯è¯­ã€‚ å€Ÿç”¨çŸ¥ä¹ä¸ŠMax Lawçš„ä¸€å¼ å›¾æ¥è§£é‡Šæ‰€æœ‰çš„è®¸å¯è¯ï¼š ç‰ˆæœ¬å· npmåŒ…çš„ç‰ˆæœ¬å·ä¹Ÿæ˜¯æœ‰è§„èŒƒè¦æ±‚çš„ï¼Œé€šç”¨çš„å°±æ˜¯éµå¾ªsemverè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒï¼Œç‰ˆæœ¬æ ¼å¼ä¸ºï¼šmajor.minor.patchï¼Œæ¯ä¸ªå­—æ¯ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹ï¼š ä¸»ç‰ˆæœ¬å·(major)ï¼šå½“ä½ åšäº†ä¸å…¼å®¹çš„APIä¿®æ”¹ æ¬¡ç‰ˆæœ¬å·(minor)ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ ä¿®è®¢å·(patch)ï¼šå½“ä½ åšäº†å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ å…ˆè¡Œç‰ˆæœ¬å·æ˜¯åŠ åˆ°ä¿®è®¢å·çš„åé¢ï¼Œä½œä¸ºç‰ˆæœ¬å·çš„å»¶ä¼¸ï¼›å½“è¦å‘è¡Œå¤§ç‰ˆæœ¬æˆ–æ ¸å¿ƒåŠŸèƒ½æ—¶ï¼Œä½†ä¸èƒ½ä¿è¯è¿™ä¸ªç‰ˆæœ¬å®Œå…¨æ­£å¸¸ï¼Œå°±è¦å…ˆå‘ä¸€ä¸ªå…ˆè¡Œç‰ˆæœ¬ã€‚ å…ˆè¡Œç‰ˆæœ¬å·çš„æ ¼å¼æ˜¯åœ¨ä¿®è®¢ç‰ˆæœ¬å·åé¢åŠ ä¸Šä¸€ä¸ªè¿æ¥å·ï¼ˆ-ï¼‰ï¼Œå†åŠ ä¸Šä¸€è¿ä¸²ä»¥ç‚¹ï¼ˆ.ï¼‰åˆ†å‰²çš„æ ‡è¯†ç¬¦ï¼Œæ ‡è¯†ç¬¦å¯ä»¥ç”±è‹±æ–‡ã€æ•°å­—å’Œè¿æ¥å·ï¼ˆ[0-9A-Za-z-]ï¼‰ç»„æˆã€‚ä¾‹å¦‚ï¼š 1231.0â€‹â€‹.0-alpha1.0.0-alpha.11.0.0-0.3.7 å¸¸è§çš„å…ˆè¡Œç‰ˆæœ¬å·æœ‰ï¼š alphaï¼šä¸ç¨³å®šç‰ˆæœ¬ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œè¯¥ç‰ˆæœ¬çš„Bugè¾ƒå¤šï¼Œéœ€è¦ç»§ç»­ä¿®æ”¹ï¼Œæ˜¯æµ‹è¯•ç‰ˆæœ¬ betaï¼šåŸºæœ¬ç¨³å®šï¼Œç›¸å¯¹äºAlphaç‰ˆå·²ç»æœ‰äº†å¾ˆå¤§çš„è¿›æ­¥ï¼Œæ¶ˆé™¤äº†ä¸¥é‡é”™è¯¯ rcï¼šå’Œæ­£å¼ç‰ˆåŸºæœ¬ç›¸åŒï¼ŒåŸºæœ¬ä¸Šä¸å­˜åœ¨å¯¼è‡´é”™è¯¯çš„Bug releaseï¼šæœ€ç»ˆç‰ˆæœ¬ æ¯ä¸ªnpmåŒ…çš„ç‰ˆæœ¬å·éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæˆ‘ä»¬æ¯æ¬¡æ›´æ–°npmåŒ…åï¼Œéƒ½æ˜¯éœ€è¦æ›´æ–°ç‰ˆæœ¬å·ï¼Œå¦åˆ™ä¼šæŠ¥é”™æé†’ï¼š å½“ä¸»ç‰ˆæœ¬å·å‡çº§åï¼Œæ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢å·éœ€è¦é‡ç½®ä¸º0ï¼Œæ¬¡ç‰ˆæœ¬å·è¿›è¡Œå‡çº§åï¼Œä¿®è®¢ç‰ˆæœ¬éœ€è¦é‡ç½®ä¸º0ã€‚ ä½†æ˜¯å¦‚æœæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ¥æ›´æ–°ç‰ˆæœ¬å·ï¼Œé‚£å¯å°±å¤ªéº»çƒ¦äº†ï¼›é‚£ä¹ˆæ˜¯å¦æœ‰å‘½ä»¤è¡Œèƒ½æ¥è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·å‘¢ï¼Ÿç”±äºç‰ˆæœ¬å·çš„ç¡®å®šä¾èµ–äºå†…å®¹å†³å®šçš„ä¸»è§‚æ€§çš„åŠ¨ä½œï¼Œå› æ­¤ä¸èƒ½å®Œå…¨åšåˆ°å…¨è‡ªåŠ¨åŒ–æ›´æ–°ï¼Œè°çŸ¥é“ä½ æ˜¯æ”¹äº†å¤§ç‰ˆæœ¬è¿˜æ˜¯å°ç‰ˆæœ¬ï¼Œå› æ­¤åªèƒ½é€šè¿‡å‘½ä»¤è¡Œå®ç°åŠè‡ªåŠ¨æ“ä½œï¼›å‘½ä»¤çš„å–å€¼å’Œè¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ˜¯å¯¹åº”çš„ï¼Œä¼šåœ¨ç›¸åº”çš„ç‰ˆæœ¬ä¸ŠåŠ 1ï¼š åœ¨package.jsonçš„ä¸€äº›ä¾èµ–çš„ç‰ˆæœ¬å·ä¸­ï¼Œæˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°^ã€~æˆ–è€…&gt;=è¿™æ ·çš„æ ‡è¯†ç¬¦ï¼Œæˆ–è€…ä¸å¸¦æ ‡è¯†ç¬¦çš„ï¼Œè¿™éƒ½ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ æ²¡æœ‰ä»»ä½•ç¬¦å·ï¼šå®Œå…¨ç™¾åˆ†ç™¾åŒ¹é…ï¼Œå¿…é¡»ä½¿ç”¨å½“å‰ç‰ˆæœ¬å· å¯¹æ¯”ç¬¦å·ç±»çš„ï¼š&gt;(å¤§äº) &gt;=(å¤§äºç­‰äº) &lt;(å°äº) &lt;=(å°äºç­‰äº) æ³¢æµªç¬¦å·~ï¼šå›ºå®šä¸»ç‰ˆæœ¬å·å’Œæ¬¡ç‰ˆæœ¬å·ï¼Œä¿®è®¢å·å¯ä»¥éšæ„æ›´æ”¹ï¼Œä¾‹å¦‚~2.0.0ï¼Œå¯ä»¥ä½¿ç”¨ 2.0.0ã€2.0.2 ã€2.0.9 çš„ç‰ˆæœ¬ã€‚ æ’å…¥ç¬¦å·^ï¼šå›ºå®šä¸»ç‰ˆæœ¬å·ï¼Œæ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢å·å¯ä»¥éšæ„æ›´æ”¹ï¼Œä¾‹å¦‚^2.0.0ï¼Œå¯ä»¥ä½¿ç”¨ 2.0.1ã€2.2.2 ã€2.9.9 çš„ç‰ˆæœ¬ã€‚ ä»»æ„ç‰ˆæœ¬*ï¼šå¯¹ç‰ˆæœ¬æ²¡æœ‰é™åˆ¶ï¼Œä¸€èˆ¬ä¸ç”¨ æˆ–ç¬¦å·ï¼š||å¯ä»¥ç”¨æ¥è®¾ç½®å¤šä¸ªç‰ˆæœ¬å·é™åˆ¶è§„åˆ™ï¼Œä¾‹å¦‚ &gt;= 3.0.0 || &lt;= 1.0.0 npmåŒ…å¼€å‘ é€šè¿‡ä¸Šé¢å¯¹package.jsonçš„ä»‹ç»ï¼Œç›¸ä¿¡å„ä½å°ä¼™ä¼´å·²ç»å¯¹npmåŒ…æœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œç°åœ¨æˆ‘ä»¬å°±è¿›å…¥ä»£ç å®æ“é˜¶æ®µï¼Œå¼€å‘å¹¶ä¸Šä¼ ä¸€ä¸ªnpmåŒ…ã€‚ å·¥å…·ç±»åŒ… ç›¸ä¿¡ä¸å°‘ç«¥é‹åœ¨ä¸šåŠ¡å¼€å‘æ—¶éƒ½ä¼šé‡åˆ°é‡å¤çš„åŠŸèƒ½ï¼Œæˆ–è€…å¼€å‘ç›¸åŒçš„å·¥å…·å‡½æ•°ï¼Œæ¯æ¬¡é‡åˆ°æ—¶éƒ½è¦å»å…¶ä»–é¡¹ç›®ä¸­æ‹·è´ä»£ç ï¼›å¦‚æœä¸€ä¸ªé¡¹ç›®çš„ä»£ç é€»è¾‘æœ‰ä¼˜åŒ–çš„åœ°æ–¹ï¼Œéœ€è¦åŒæ­¥åˆ°å…¶ä»–é¡¹ç›®ï¼Œåˆ™éœ€è¦å†æ¬¡æŒ¨ä¸ªé¡¹ç›®çš„æ‹·è´ä»£ç ï¼Œè¿™æ ·ä¸ä»…è´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”è¿˜é‡å¤é€ è½®å­ã€‚ æˆ‘ä»¬å¯ä»¥æ•´åˆå„ä¸ªé¡¹ç›®çš„éœ€æ±‚ï¼Œå¼€å‘ä¸€ä¸ªé€‚åˆè‡ªå·±é¡¹ç›®çš„å·¥å…·ç±»çš„npmåŒ…ï¼ŒåŒ…çš„ç»“æ„å¦‚ä¸‹ï¼š 123456789hello-npm|-- lib/ï¼ˆå­˜æ”¾æ‰“åŒ…åçš„æ–‡ä»¶ï¼‰|-- src/ï¼ˆæºç ï¼‰|-- package.json|-- rollup.config.base.jsï¼ˆrollupåŸºç¡€é…ç½®ï¼‰|-- rollup.config.dev.jsï¼ˆrollupå¼€å‘é…ç½®ï¼‰|-- rollup.config.jsï¼ˆrollupæ­£å¼é…ç½®ï¼‰|-- README.md|-- tsconfig.json é¦–å…ˆçœ‹ä¸‹package.jsonçš„é…ç½®ï¼Œrollupæ ¹æ®å¼€å‘ç¯å¢ƒåŒºåˆ†ä¸åŒçš„é…ç½®ï¼š 1234567891011121314151617&#123; &quot;name&quot;: &quot;hello-npm&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;æˆ‘æ˜¯npmåŒ…çš„æè¿°&quot;, &quot;main&quot;: &quot;lib/bundle.cjs.js&quot;, &quot;jsnext:main&quot;: &quot;lib/bundle.esm.js&quot;, &quot;module&quot;: &quot;lib/bundle.esm.js&quot;, &quot;browser&quot;: &quot;lib/bundle.browser.js&quot;, &quot;types&quot;: &quot;types/index.d.ts&quot;, &quot;author&quot;: &quot;&quot;, &quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;npx rollup -wc rollup.config.dev.js&quot;, &quot;build&quot;: &quot;npx rollup -c rollup.config.js &amp;&amp; npm run build:types&quot;, &quot;build:types&quot;: &quot;npx tsc&quot;, &#125;, &quot;license&quot;: &quot;ISC&quot;&#125; ç„¶åé…ç½®rollupçš„base configæ–‡ä»¶ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041import typescript from &quot;@rollup/plugin-typescript&quot;;import pkg from &quot;./package.json&quot;;import json from &quot;rollup-plugin-json&quot;;import resolve from &quot;rollup-plugin-node-resolve&quot;;import commonjs from &quot;@rollup/plugin-commonjs&quot;;import eslint from &quot;@rollup/plugin-eslint&quot;;import &#123; babel &#125; from &#x27;@rollup/plugin-babel&#x27;const formatName = &quot;hello&quot;;export default &#123; input: &quot;./src/index.ts&quot;, output: [ &#123; file: pkg.main, format: &quot;cjs&quot;, &#125;, &#123; file: pkg.module, format: &quot;esm&quot;, &#125;, &#123; file: pkg.browser, format: &quot;umd&quot;, name: formatName, &#125;, ], plugins: [ json(), commonjs(&#123; include: /node_modules/, &#125;), resolve(&#123; preferBuiltins: true, jsnext: true, main: true, brower: true, &#125;), typescript(), eslint(), babel(&#123; exclude: &quot;node_modules/**&quot; &#125;), ],&#125;; è¿™é‡Œæˆ‘ä»¬å°†æ‰“åŒ…æˆcommonjsã€esmå’Œumdä¸‰ç§æ¨¡å—è§„èŒƒçš„åŒ…ï¼Œç„¶åæ˜¯ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼ŒåŠ å…¥terserå’Œfilesizeåˆ†åˆ«è¿›è¡Œå‹ç¼©å’ŒæŸ¥çœ‹æ‰“åŒ…å¤§å°ï¼š 123456789import &#123; terser &#125; from &quot;rollup-plugin-terser&quot;;import filesize from &quot;rollup-plugin-filesize&quot;;import baseConfig from &quot;./rollup.config.base&quot;;export default &#123; ...baseConfig, plugins: [...baseConfig.plugins, terser(), filesize()],&#125;; ç„¶åæ˜¯å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼š 123456789101112131415import baseConfig from &quot;./rollup.config.base&quot;;import serve from &quot;rollup-plugin-serve&quot;;import livereload from &quot;rollup-plugin-livereload&quot;;export default &#123; ...baseConfig, plugins: [ ...baseConfig.plugins, serve(&#123; contentBase: &quot;&quot;, port: 8020, &#125;), livereload(&quot;src&quot;), ],&#125;; ç¯å¢ƒé…ç½®å¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰“åŒ…äº† 1234# æµ‹è¯•ç¯å¢ƒnpm run dev# ç”Ÿäº§ç¯å¢ƒnpm run build å…¨å±€åŒ… è¿˜æœ‰ä¸€ç±»npmåŒ…æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯é€šè¿‡npm i -g [pkg]è¿›è¡Œå…¨å±€å®‰è£…çš„ï¼Œæ¯”å¦‚å¸¸ç”¨çš„vue createã€static-serverã€pm2ç­‰å‘½ä»¤ï¼Œéƒ½æ˜¯é€šè¿‡å…¨å±€å‘½ä»¤å®‰è£…çš„ï¼›é‚£ä¹ˆå…¨å±€npmåŒ…å¦‚ä½•å¼€å‘å‘¢ï¼Ÿ æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå…¨å±€å‘½ä»¤çš„è®¡ç®—å™¨åŠŸèƒ½ï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ç„¶åè¿è¡Œï¼š 12cd my-calcnpm init -y åœ¨package.jsonä¸­æ·»åŠ binå±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®åæ˜¯å‘Šè¯‰nodeåœ¨å…¨å±€å®šä¹‰ä¸€ä¸ªå…¨å±€çš„å‘½ä»¤ï¼Œå€¼åˆ™æ˜¯æ‰§è¡Œå‘½ä»¤çš„è„šæœ¬æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥åŒæ—¶å®šä¹‰å¤šä¸ªå‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªcalcå‘½ä»¤ï¼š 12345678910111213&#123; &quot;name&quot;: &quot;my-calc&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot; &#125;, &quot;bin&quot;: &#123; &quot;calc&quot;: &quot;./src/calc.js&quot;, &#125;, &quot;license&quot;: &quot;ISC&quot;,&#125; å‘½ä»¤å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬æ¥å®ç°calc.jsä¸­çš„å†…å®¹ï¼š 12345678910111213141516171819#!/usr/bin/env nodeif (process.argv.length &lt;= 2) &#123; console.log(&quot;è¯·è¾“å…¥è¿ç®—çš„æ•°å­—&quot;); return;&#125;let total = process.argv .slice(2) .map((el) =&gt; &#123; let parseEl = parseFloat(el); return !isNaN(parseEl) ? parseEl : 0; &#125;) .reduce((total, num) =&gt; &#123; total += num; return total; &#125;, 0);console.log(`è¿ç®—ç»“æœï¼š$&#123;total&#125;`); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ–‡ä»¶å¤´éƒ¨çš„#!/usr/bin/env nodeæ˜¯å¿…é¡»çš„ï¼Œå‘Šè¯‰nodeè¿™æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„jsæ–‡ä»¶ï¼Œå¦‚æœä¸å†™ä¼šæŠ¥é”™ï¼›ç„¶åé€šè¿‡process.argv.slice(2)æ¥è·å–æ‰§è¡Œå‘½ä»¤çš„å‚æ•°ï¼Œå‰ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯nodeçš„è¿è¡Œè·¯å¾„å’Œå¯æ‰§è¡Œè„šæœ¬çš„è¿è¡Œè·¯å¾„ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¼€å§‹æ‰æ˜¯å‘½ä»¤è¡Œçš„å‚æ•°ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¿è¡Œæ¥çœ‹ç»“æœï¼š 1calc 1 2 3 -4 å¦‚æœæˆ‘ä»¬çš„è„šæœ¬æ¯”è¾ƒå¤æ‚ï¼Œæƒ³è°ƒè¯•ä¸€ä¸‹è„šæœ¬ï¼Œé‚£ä¹ˆæ¯æ¬¡éƒ½éœ€è¦å‘å¸ƒåˆ°npmæœåŠ¡å™¨ï¼Œç„¶åå…¨å±€å®‰è£…åæ‰èƒ½æµ‹è¯•ï¼Œè¿™æ ·æ¯”è¾ƒè´¹æ—¶è´¹åŠ›ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¤Ÿç›´æ¥è¿è¡Œè„šæœ¬å‘¢ï¼Ÿè¿™é‡Œå°±è¦ç”¨åˆ°npm linkå‘½ä»¤ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†è°ƒè¯•çš„npmæ¨¡å—é“¾æ¥åˆ°å¯¹åº”çš„è¿è¡Œé¡¹ç›®ä¸­å»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤æŠŠæ¨¡å—é“¾æ¥åˆ°å…¨å±€ã€‚ åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­è¿è¡Œå‘½ä»¤ï¼š 1npm link å¯ä»¥çœ‹åˆ°å…¨å±€npmç›®å½•ä¸‹æ–°å¢äº†calcæ–‡ä»¶ï¼Œcalcå‘½ä»¤å°±æŒ‡å‘äº†æœ¬åœ°é¡¹ç›®ä¸‹çš„calc.jsæ–‡ä»¶ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥å°½æƒ…çš„è¿è¡Œè°ƒè¯•ï¼›è°ƒè¯•å®Œæˆåï¼Œæˆ‘ä»¬åˆä¸éœ€è¦å°†å‘½ä»¤æŒ‡å‘æœ¬åœ°é¡¹ç›®äº†ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¸‹é¢çš„å‘½ä»¤è¿›è¡Œè§£ç»‘æ“ä½œï¼š 1npm unlink è§£ç»‘ånpmä¼šæŠŠå…¨å±€çš„calcæ–‡ä»¶åˆ é™¤ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥å»å‘å¸ƒnpmåŒ…ç„¶åè¿›è¡ŒçœŸæ­£çš„å…¨å±€å®‰è£…äº†ã€‚ vueç»„ä»¶åº“ åœ¨Vueé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬åœ¨å¾ˆå¤šé¡¹ç›®ä¸­ä¹Ÿä¼šç”¨åˆ°å…¬å…±ç»„ä»¶ï¼Œå¯ä»¥å°†è¿™äº›ç»„ä»¶æå–åˆ°ç»„ä»¶åº“ï¼Œæˆ‘ä»¬å¯ä»¥ä»¿ç…§element-uiæ¥å®ç°ä¸€ä¸ªæˆ‘ä»¬è‡ªå·±çš„uiç»„ä»¶åº“ï¼›é¦–å…ˆæ¥æ„å»ºæˆ‘ä»¬çš„é¡¹ç›®ç›®å½•ï¼š 123456789101112|- lib|- src |- MyButton |- index.js |- index.vue |- index.scss |- MyInput |- index.js |- index.vue |- index.scss |- main.js|- rollup.config.js æˆ‘ä»¬æ„å»ºMyButtonå’ŒMyInputä¸¤ä¸ªç»„ä»¶ï¼Œvueæ–‡ä»¶å’Œscssä¸å†èµ˜è¿°ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¯¼å‡ºç»„ä»¶çš„index.jsï¼š 123456import MyButton from &quot;./index.vue&quot;;MyButton.install = function (Vue) &#123; Vue.component(MyButton.name, MyButton);&#125;;export default MyButton; ç»„ä»¶å¯¼å‡ºååœ¨main.jsä¸­ç»Ÿä¸€ç»„ä»¶æ³¨å†Œï¼š 12345678910111213141516171819import MyButton from &quot;./MyButton/index.js&quot;;import MyInput from &quot;./MyInput/index&quot;;import &#123; version &#125; from &quot;../package.json&quot;;import &quot;./MyButton/index.scss&quot;;import &quot;./MyInput/index.scss&quot;;const components = [MyButton, MyInput];const install = function (Vue) &#123; components.forEach((component) =&gt; &#123; Vue.component(component.name, component); &#125;);&#125;;if (typeof window !== &quot;undefined&quot; &amp;&amp; window.Vue) &#123; install(window.Vue);&#125;export &#123; MyButton, MyInput, install &#125;;export default &#123; version, install &#125;; ç„¶åé…ç½®rollup.config.jsï¼š 123456789101112131415161718192021222324252627282930313233343536373839import resolve from &quot;rollup-plugin-node-resolve&quot;;import vue from &quot;rollup-plugin-vue&quot;;import babel from &quot;@rollup/plugin-babel&quot;;import commonjs from &quot;@rollup/plugin-commonjs&quot;;import scss from &quot;rollup-plugin-scss&quot;;import json from &quot;@rollup/plugin-json&quot;;const formatName = &quot;MyUI&quot;;const config = &#123; input: &quot;./src/main.js&quot;, output: [ &#123; file: &quot;./lib/bundle.cjs.js&quot;, format: &quot;cjs&quot;, name: formatName, exports: &quot;auto&quot;, &#125;, &#123; file: &quot;./lib/bundle.js&quot;, format: &quot;iife&quot;, name: formatName, exports: &quot;auto&quot;, &#125;, ], plugins: [ json(), resolve(), vue(&#123; css: true, compileTemplate: true, &#125;), babel(&#123; exclude: &quot;**/node_modules/**&quot;, &#125;), commonjs(), scss(), ],&#125;;export default config; è¿™é‡Œæˆ‘ä»¬æ‰“åŒ…å‡ºcommonjså’Œiifeä¸¤ä¸ªæ¨¡å—è§„èŒƒï¼Œä¸€ä¸ªå¯ä»¥é…åˆæ‰“åŒ…å·¥å…·ä½¿ç”¨ï¼Œå¦ä¸€ä¸ªå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­scriptå¼•å…¥ã€‚æˆ‘ä»¬é€šè¿‡rollup-plugin-vueæ’ä»¶æ¥è§£ævueæ–‡ä»¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯5.xç‰ˆæœ¬è§£ævue2ï¼Œæœ€æ–°çš„6.xç‰ˆæœ¬è§£ævue3ï¼Œé»˜è®¤å®‰è£…6.xç‰ˆæœ¬ï¼›å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯vue2ï¼Œåˆ™éœ€è¦åˆ‡æ¢è€ç‰ˆæœ¬çš„æ’ä»¶ï¼Œè¿˜éœ€è¦å®‰è£…ä»¥ä¸‹vueçš„ç¼–è¯‘å™¨ï¼š 1npm install --save-dev vue-template-compiler æ‰“åŒ…æˆåŠŸåæˆ‘ä»¬å°±èƒ½çœ‹åˆ°libç›®å½•ä¸‹çš„æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬å°±èƒ½åƒelement-uiä¸€æ ·ï¼Œæ„‰å¿«çš„ä½¿ç”¨è‡ªå·±çš„uiç»„ä»¶äº†ï¼Œåœ¨é¡¹ç›®ä¸­å¼•å…¥æˆ‘ä»¬çš„UIï¼š 123456789101112131415/* å…¨å±€å¼•å…¥ main.js */import MyUI from &quot;my-ui&quot;;// å¼•å…¥æ ·å¼import &quot;my-ui/lib/bundle.cjs.css&quot;;Vue.use(MyUI);/* åœ¨ç»„ä»¶ä¸­æŒ‰éœ€å¼•å…¥ */import &#123; MyButton &#125; from &quot;my-ui&quot;;export default &#123; components: &#123; MyButton &#125;&#125; å¦‚æœæƒ³è¦åœ¨æœ¬åœ°è¿›è¡Œè°ƒè¯•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨linkå‘½ä»¤åˆ›å»ºé“¾æ¥ï¼Œé¦–å…ˆåœ¨my-uiç›®å½•ä¸‹è¿è¡Œnpm linkå°†ç»„ä»¶æŒ‚è½½åˆ°å…¨å±€ï¼Œç„¶ååœ¨vueé¡¹ç›®ä¸­è¿è¡Œä¸‹é¢å‘½ä»¤æ¥å¼•å…¥å…¨å±€çš„my-uiï¼š 1npm link my-ui æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸‹é¢çš„è¾“å‡ºè¡¨ç¤ºvueé¡¹ç›®ä¸­my-uiæ¨¡å—å·²ç»é“¾æ¥åˆ°my-uié¡¹ç›®äº†ï¼š 12345D:\\project\\vue-demo\\node_modules\\my-ui -&gt; C:\\Users\\XXXX\\AppData\\Roaming\\npm\\node_modules\\my-ui-&gt; D:\\project\\my-ui npmåŒ…å‘å¸ƒ æˆ‘ä»¬çš„npmåŒ…å®Œæˆåå°±å¯ä»¥å‡†å¤‡å‘å¸ƒäº†ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªè´¦å·ï¼Œå¯ä»¥ä½¿ç”¨--registryæ¥æŒ‡å®šnpmæœåŠ¡å™¨ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨nrmæ¥ç®¡ç†ï¼š 12npm addusernpm adduser --registry=http://example.com ç„¶åè¿›è¡Œç™»å½•ï¼Œè¾“å…¥ä½ æ³¨å†Œçš„è´¦å·å¯†ç é‚®ç®±ï¼š 1npm login è¿˜å¯ä»¥ç”¨ä¸‹é¢å‘½ä»¤é€€å‡ºå½“å‰è´¦å· 1npm logout å¦‚æœä¸çŸ¥é“å½“å‰ç™»å½•çš„è´¦å·å¯ä»¥ç”¨whoå‘½ä»¤æŸ¥çœ‹èº«ä»½ï¼š 1npm who am i ç™»å½•æˆåŠŸå°±å¯ä»¥å°†æˆ‘ä»¬çš„åŒ…æ¨é€åˆ°æœåŠ¡å™¨ä¸Šå»äº†ï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤ï¼Œä¼šçœ‹åˆ°ä¸€å †çš„npm noticeï¼š 1npm publish å¦‚æœæŸç‰ˆæœ¬çš„åŒ…æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†å…¶æ’¤å› 1npm unpublish [pkg]@[version]","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"},{"name":"æ¨¡å—åŒ–","slug":"Modularization","permalink":"https://xieyufei.com/tags/Modularization/"},{"name":"ç»„ä»¶åŒ–","slug":"Componentization","permalink":"https://xieyufei.com/tags/Componentization/"},{"name":"Nodejs","slug":"Nodejs","permalink":"https://xieyufei.com/tags/Nodejs/"}]},{"title":"ä»é›¶æ·±å…¥Chromeæ’ä»¶å¼€å‘","date":"2021-11-09T08:12:00.000Z","path":"2021/11/09/Chrome-Plugin.html","text":"ä½¿ç”¨Chromeæ’ä»¶å¯ä»¥ä¸ºChromeæµè§ˆå™¨å¸¦æ¥ä¸€äº›åŠŸèƒ½æ€§çš„æ‰©å±•ï¼Œè¿›è€Œæé«˜ä½¿ç”¨ä½“éªŒï¼›ä¿—è¯è¯´çš„å¥½Chromeæ²¡æ’ä»¶ï¼Œé¦™å‘³å°‘ä¸€åŠï¼ŒChromeæœ€å¤§çš„ä¼˜åŠ¿è¿˜æ˜¯å…¶æ”¯æŒä¼—å¤šå¼ºå¤§å¥½ç”¨çš„æ‰©å±•ç¨‹åºï¼›ä»Šå¤©æˆ‘ä»¬å°±æ¥äº†è§£ä¸€ä¸‹æ’ä»¶æ˜¯å¦‚ä½•å¼€å‘çš„ï¼Œå’Œæˆ‘ä»¬æ™®é€šçš„æµè§ˆå™¨é¡µé¢å¼€å‘æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä»¥åŠå®‰åˆ©ä¸€äº›åŠŸèƒ½å¼ºå¤§çš„æ’ä»¶ã€‚ Chromeæ’ä»¶ç®€ä»‹ Chromeæ’ä»¶ï¼Œå®˜æ–¹åç§°extensionsï¼ˆæ‰©å±•ç¨‹åºï¼‰ï¼›ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä»¥ä¸‹éƒ½ç§°ä¸ºChromeæ’ä»¶ï¼Œæˆ–è€…ç®€ç§°æ’ä»¶ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯Chromeæ’ä»¶å‘¢ï¼Ÿ æ‰©å±•ç¨‹åºæ˜¯è‡ªå®šä¹‰æµè§ˆä½“éªŒçš„å°å‹è½¯ä»¶ç¨‹åºã€‚å®ƒä»¬è®©ç”¨æˆ·å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®šåˆ¶Chromeçš„åŠŸèƒ½å’Œè¡Œä¸ºã€‚ æ’ä»¶ç¨‹åºæä¾›äº†ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ï¼š ç”Ÿäº§åŠ›å·¥å…·ï¼š ç½‘é¡µå†…å®¹ä¸°å¯Œ ä¿¡æ¯èšåˆ ä¹è¶£å’Œæ¸¸æˆ æˆ‘ä»¬å¯ä»¥é€šè¿‡ç‚¹å‡»æ›´å¤šå·¥å…· -&gt; æ‰©å±•ç¨‹åºæ¥æŸ¥çœ‹æˆ‘ä»¬æ‰€æœ‰å®‰è£…çš„æ’ä»¶ï¼Œæˆ–è€…ç›´æ¥æ‰“å¼€æ’ä»¶æ ‡ç­¾é¡µã€‚ é‚£ä¹ˆå­¦ä¹ å¼€å‘æ’ä»¶æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿæˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æ¥å­¦ä¹ æ’ä»¶å¼€å‘å‘¢ï¼Ÿä¸ªäººæ€»ç»“ä¸‹ï¼Œæœ‰ä»¥ä¸‹å‡ æ–¹é¢çš„æ„ä¹‰ï¼š å¢å¼ºæµè§ˆå™¨åŠŸèƒ½ï¼Œå®ç°å±äºè‡ªå·±çš„å®šåˆ¶æ’ä»¶åŠŸèƒ½ äº†è§£ç°æœ‰çš„æ’ä»¶ï¼Œå¯¹å…¶åŠŸèƒ½è¿›è¡Œä¼˜åŒ–æ”¹è¿› è·å–æ’ä»¶ å¤§å¤šæ•°Chromeç”¨æˆ·ä»Chromeç½‘ä¸Šåº”ç”¨åº—è·å¾—æ’ä»¶ç¨‹åºã€‚ä¸–ç•Œå„åœ°çš„å¼€å‘äººå‘˜ä¼šåœ¨Chromeç½‘ä¸Šåº”ç”¨åº—ä¸­å‘å¸ƒä»–ä»¬çš„æ’ä»¶ï¼Œç»è¿‡Chromeçš„å®¡æŸ¥å¹¶å‘æœ€ç»ˆç”¨æˆ·æä¾›ã€‚ ä½†æ˜¯ç”±äºä¸€äº›ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½è®¿é—®ç½‘ä¸Šåº”ç”¨åº—ï¼Œä½†åŒæ—¶Chromeåˆè¦æ±‚æ’ä»¶å¿…é¡»ä»å®ƒçš„Chromeåº”ç”¨å•†åº—ä¸‹è½½å®‰è£…ï¼Œè¿™ä»¿ä½›æ˜¯ä¸€ä¸ªç»•ä¸å¼€çš„æ­»å¾ªç¯ï¼Œä¸è¿‡ä¿—è¯è¯´é­”é«˜ä¸€å°ºé“é«˜ä¸€å°ºä¸€ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šè®²è§£å¦‚ä½•ä»æœ¬åœ°åŠ è½½æ’ä»¶ï¼Œç»•å¼€ç½‘ä¸Šåº”ç”¨åº—çš„é™åˆ¶ã€‚ æ’ä»¶å¦‚ä½•å·¥ä½œï¼Ÿ æ’ä»¶æ˜¯åŸºäºWebæŠ€æœ¯æ„å»ºçš„ï¼Œä¾‹å¦‚HTMLã€JavaScriptå’ŒCSSã€‚å®ƒä»¬åœ¨å•ç‹¬çš„æ²™ç›’æ‰§è¡Œç¯å¢ƒä¸­è¿è¡Œå¹¶ä¸Chromeæµè§ˆå™¨è¿›è¡Œäº¤äº’ã€‚ æ’ä»¶å…è®¸æˆ‘ä»¬é€šè¿‡ä½¿ç”¨APIä¿®æ”¹æµè§ˆå™¨è¡Œä¸ºå’Œè®¿é—®Webå†…å®¹æ¥æ‰©å±•å’Œå¢å¼ºæµè§ˆå™¨çš„åŠŸèƒ½ã€‚æ’ä»¶é€šè¿‡æœ€ç»ˆç”¨æˆ·UIå’Œå¼€å‘äººå‘˜APIè¿›è¡Œæ“ä½œï¼š æ‰©å±•ç”¨æˆ·ç•Œé¢ï¼Œè¿™ä¸ºç”¨æˆ·æä¾›äº†ä¸€ç§ä¸€è‡´çš„æ–¹å¼æ¥ç®¡ç†ä»–ä»¬çš„æ‰©å±•ã€‚ æ‰©å±•çš„APIå…è®¸æµè§ˆå™¨æœ¬èº«çš„æ‰©å±•çš„ä»£ç è®¿é—®åŠŸèƒ½ï¼šæ¿€æ´»æ ‡ç­¾ï¼Œä¿®æ”¹ç½‘ç»œè¯·æ±‚ç­‰ç­‰ã€‚ è¦åˆ›å»ºæ’ä»¶ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ç»„åˆæ„æˆæ’ä»¶ç¨‹åºçš„ä¸€äº›èµ„æºæ¸…å•ï¼Œä¾‹å¦‚JSæ–‡ä»¶å’ŒHTMLæ–‡ä»¶ã€å›¾åƒç­‰ã€‚å¯¹äºå¼€å‘å’Œæµ‹è¯•ï¼Œå¯ä»¥ä½¿ç”¨æ‰©å±•å¼€å‘è€…æ¨¡å¼å°†è¿™äº›â€œè§£å‹â€åŠ è½½åˆ°Chromeä¸­ã€‚å¦‚æœæˆ‘ä»¬å¯¹è‡ªå·±å¼€å‘å‡ºæ¥çš„æ’ä»¶ç¨‹åºæ„Ÿåˆ°æ»¡æ„ï¼Œå°±å¯ä»¥é€šè¿‡ç½‘ä¸Šå•†åº—å°†å…¶æ‰“åŒ…å¹¶åˆ†äº«ç»™å…¶ä»–çš„ç”¨æˆ·ã€‚ æ’ä»¶çš„åŸåˆ™ æˆ‘ä»¬ç¼–å†™çš„æ’ä»¶æƒ³è¦å‘å¸ƒåˆ°Chromeç½‘ä¸Šåº”ç”¨åº—ä¸­ï¼Œå°±å¿…é¡»éµå®ˆç½‘ä¸Šåº”ç”¨åº—æ”¿ç­–ï¼Œå®ƒè§„å®šäº†ä»¥ä¸‹å‡ ç‚¹ï¼š æ’ä»¶å¿…é¡»æ»¡è¶³ä¸€ä¸ªå®šä¹‰ç‹­çª„ä¸”æ˜“äºç†è§£çš„å•ä¸€ç›®çš„ã€‚å•ä¸ªæ’ä»¶å¯ä»¥åŒ…å«å¤šä¸ªç»„ä»¶å’Œä¸€ç³»åˆ—åŠŸèƒ½ï¼Œåªè¦ä¸€åˆ‡éƒ½æœ‰åŠ©äºå®ç°ä¸€ä¸ªå…±åŒçš„ç›®çš„ã€‚ ç”¨æˆ·ç•Œé¢åº”è¯¥æ˜¯æœ€å°çš„å¹¶ä¸”æœ‰æ„å›¾ã€‚å®ƒä»¬çš„èŒƒå›´å¯ä»¥ä»ç®€å•çš„å›¾æ ‡åˆ°æ‰“å¼€ä¸€ä¸ªå¸¦æœ‰è¡¨å•çš„æ–°çª—å£ã€‚ ä¸€ä¸ªç®€å•çš„å°æ’ä»¶ Chromeæ’ä»¶å¹¶æ²¡æœ‰å¾ˆä¸¥æ ¼çš„é¡¹ç›®ç»“æ„è¦æ±‚ï¼Œæ¯”å¦‚srcã€publicã€componentsç­‰ç­‰ï¼Œå› æ­¤æˆ‘ä»¬å¦‚æœå»çœ‹å¾ˆå¤šæ’ä»¶çš„æºç ï¼Œä¼šå‘ç°æ¯ä¸ªæ’ä»¶çš„é¡¹ç›®ç»“æ„ï¼Œç”šè‡³é¡¹ç›®ä¸‹çš„æ–‡ä»¶åç§°éƒ½å¤§ç›¸å¾„åº­ï¼›ä½†æ˜¯åœ¨æ ¹ç›®å½•ä¸‹æˆ‘ä»¬éƒ½ä¼šæ‰¾åˆ°ä¸€ä¸ªmanifest.jsonæ–‡ä»¶ï¼Œè¿™æ˜¯æ’ä»¶çš„é…ç½®æ–‡ä»¶ï¼Œè¯´æ˜äº†æ’ä»¶çš„å„ç§ä¿¡æ¯ï¼›å®ƒçš„ä½œç”¨ç­‰åŒäºå°ç¨‹åºçš„app.jsonå’Œå‰ç«¯é¡¹ç›®çš„package.jsonã€‚ æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªæœ€ç®€å•çš„manifest.jsoné…ç½®æ–‡ä»¶ï¼š 12345678910&#123; // æ’ä»¶åç§° &quot;name&quot;: &quot;Hello Extensions&quot;, // æ’ä»¶çš„æè¿° &quot;description&quot; : &quot;Base Level Extension&quot;, // æ’ä»¶çš„ç‰ˆæœ¬ &quot;version&quot;: &quot;1.0&quot;, // é…ç½®æ’ä»¶ç¨‹åºçš„ç‰ˆæœ¬å·ï¼Œä¸»æµç‰ˆæœ¬æ˜¯2ï¼Œæœ€æ–°æ˜¯3 &quot;manifest_version&quot;: 2&#125; æˆ‘ä»¬ç»å¸¸ä¼šç‚¹å‡»å³ä¸Šè§’æ’ä»¶å›¾æ ‡æ—¶å¼¹å‡ºä¸€ä¸ªå°çª—å£çš„é¡µé¢ï¼Œç„¦ç‚¹ç¦»å¼€æ—¶å°±å…³é—­äº†ï¼Œä¸€èˆ¬åšä¸€äº›ä¸´æ—¶æ€§çš„äº¤äº’æ“ä½œï¼›åœ¨é…ç½®æ–‡ä»¶ä¸­æ–°å¢browser_actionå­—æ®µï¼Œé…ç½®popupå¼¹æ¡†ï¼š 1234567891011&#123; &quot;name&quot;: &quot;Hello Extensions&quot;, &quot;description&quot; : &quot;Base Level Extension&quot;, &quot;version&quot;: &quot;1.0&quot;, &quot;manifest_version&quot;: 2, // æ–°å¢popupå¼¹æ¡† &quot;browser_action&quot;: &#123; &quot;default_popup&quot;: &quot;popup.html&quot;, &quot;default_icon&quot;: &quot;popup.png&quot; &#125;&#125; ç„¶ååˆ›å»ºæˆ‘ä»¬çš„å¼¹æ¡†é¡µé¢popup.htmlï¼š 12345&lt;html&gt; &lt;body&gt; &lt;h1&gt;Hello Extensions&lt;/h1&gt; &lt;/body&gt;&lt;/html&gt; ç‚¹å‡»å›¾æ ‡åï¼Œæ’ä»¶æ˜¾ç¤ºpopup.htmlã€‚ ä¸ºäº†ç”¨æˆ·æ–¹ä¾¿ç‚¹å‡»ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨manifest.jsonä¸­è®¾ç½®ä¸€ä¸ªé”®ç›˜å¿«æ·é”®çš„å‘½ä»¤ï¼Œé€šè¿‡å¿«æ·é”®æ¥å¼¹å‡ºpopupé¡µé¢ï¼š 1234567891011121314151617181920&#123; &quot;name&quot;: &quot;Hello Extensions&quot;, &quot;description&quot; : &quot;Base Level Extension&quot;, &quot;version&quot;: &quot;1.0&quot;, &quot;manifest_version&quot;: 2, &quot;browser_action&quot;: &#123; &quot;default_popup&quot;: &quot;popup.html&quot;, &quot;default_icon&quot;: &quot;popup.png&quot; &#125;, // æ–°å¢å‘½ä»¤ &quot;commands&quot;: &#123; &quot;_execute_browser_action&quot;: &#123; &quot;suggested_key&quot;: &#123; &quot;default&quot;: &quot;Ctrl+Shift+F&quot;, &quot;mac&quot;: &quot;MacCtrl+Shift+F&quot; &#125;, &quot;description&quot;: &quot;Opens popup.html&quot; &#125; &#125;&#125; è¿™æ ·æˆ‘ä»¬çš„æ’ä»¶å°±å¯ä»¥é€šè¿‡æŒ‰é”®ç›˜ä¸Šçš„Ctrl+Shift+Fæ¥å¼¹å‡ºã€‚ åŠ è½½åŠè°ƒè¯•æ’ä»¶ æˆ‘ä»¬å¼€å‘çš„æ’ä»¶éœ€è¦åœ¨æµè§ˆå™¨é‡Œé¢è¿è¡Œï¼Œæ‰“å¼€æ’ä»¶æ ‡ç­¾é¡µï¼Œæ‰“å¼€å¼€å‘è€…æ¨¡å¼ï¼Œç‚¹å‡»åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼Œé€‰æ‹©é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå°±å¯å°†å¼€å‘ä¸­çš„æ’ä»¶åŠ è½½è¿›æ¥ã€‚ å¼€å‘ä¸­æ›´æ”¹äº†ä»£ç ï¼Œç‚¹å‡»æ’ä»¶å³ä¸‹è§’åˆ·æ–°æŒ‰é’®å³å¯é‡æ–°åŠ è½½ å¦‚æœæˆ‘ä»¬çš„ä»£ç ä¸­æœ‰é”™è¯¯ï¼ŒåŠ è½½æ’ä»¶åï¼Œä¼šæ˜¾ç¤ºçº¢è‰²çš„é”™è¯¯æŒ‰é’®ï¼š ç‚¹å‡»é”™è¯¯æŒ‰é’®ä»¥æŸ¥çœ‹é”™è¯¯çš„æ—¥å¿—ï¼š æˆ‘ä»¬ä¸Šé¢è¯´è¿‡Chromeæ’ä»¶åªèƒ½ä»ç½‘ä¸Šåº”ç”¨åº—ä¸­ä¸‹è½½å®‰è£…ï¼Œä½†æ˜¯ç¬¬ä¸‰æ–¹å¹³å°ä¹Ÿæä¾›äº†ä¸‹è½½çš„æ¸ é“ï¼Œä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶åç¼€æ˜¯.crxçš„å‹ç¼©åŒ…ï¼Œç°åœ¨çš„é—®é¢˜å°±æ˜¯å¦‚ä½•å°†crxæ–‡ä»¶è¿›è¡Œå®‰è£…äº†ã€‚ ä»Chrome 73ç‰ˆæœ¬å¼€å§‹ï¼Œè°·æ­Œä¿®æ”¹äº†æ’ä»¶ç­–ç•¥ï¼Œä¸å¯ä»¥éšæ„å®‰è£…crxæ–‡ä»¶ï¼šå¦‚æœç›´æ¥å°†crxæ–‡ä»¶æ‹–æ‹½å®‰è£…å¯èƒ½ä¼šæç¤ºä¸€ä¸‹æŠ¥é”™ï¼š 1ç¨‹åºåŒ…æ— æ•ˆï¼š&quot;CRX_HEADER_INVALID&quot; æˆ‘ä»¬å¯ä»¥å°è¯•ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼Œç¬¬ä¸€ç§æ–¹æ³•ï¼šå°†crxåç¼€æ”¹ä¸ºzipï¼Œè§£å‹ååŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºçš„æ–¹å¼ï¼Œå°†æ’ä»¶ç”¨å¼€å‘è€…æ¨¡å¼è¿›è¡ŒåŠ è½½ã€‚ ç¬¬äºŒç§åŠæ³•ï¼Œé€šè¿‡Chromeæ’ä»¶ä¼´ä¾£ï¼Œå°†crxæå–åˆ°æ¡Œé¢ï¼Œç„¶åè¿˜æ˜¯ç”¨å¼€å‘è€…æ¨¡å¼è¿›è¡ŒåŠ è½½ã€‚ ä½¿ç”¨æ’ä»¶ä¼´ä¾£æå–æ’ä»¶åï¼Œæ’ä»¶å†…å®¹é»˜è®¤ä¼šè¢«æ”¾åœ¨ä½ çš„ç”µè„‘æ¡Œé¢ä¸Šï¼Œå¯ä»¥æŠŠå®ƒå‰ªåˆ‡/å¤åˆ¶åˆ°ä»»æ„ä½ç½®ï¼›åŠ è½½æ’ä»¶é€‰æ‹©çš„æ–‡ä»¶å¤¹è·¯å¾„æ—¶ï¼Œä¸€å®šè¦åŒ…å«manifest.jsonæ–‡ä»¶ï¼›åŠ è½½åè¯·å‹¿åˆ é™¤æå–çš„æ–‡ä»¶å¤¹ã€‚ ç¬¬ä¸‰ç§æ–¹æ³•å°±æ˜¯ç”¨æ¢¯å­äº†ï¼Œç›´æ¥å»ç½‘ä¸Šåº”ç”¨åº—ä¸‹è½½ï¼Œæ²¡æœ‰æ¢¯å­çš„åŒå­¦å¯ä»¥ä½¿ç”¨æ’ä»¶ä¼´ä¾£è¿›è¡Œä»£ç†ï¼Œæ’ä»¶ä¼´ä¾£çš„è·å–æ–¹å¼ä¸‹æ–‡ä¼šç»™å‡ºã€‚ åå°background æˆ‘ä»¬çš„æ’ä»¶å®‰è£…åï¼Œpopupé¡µé¢ä¹Ÿè¿è¡Œäº†ï¼›ä½†æ˜¯æˆ‘ä»¬ä¹Ÿå‘ç°äº†ï¼Œpopupé¡µé¢åªèƒ½åšä¸´æ—¶æ€§çš„äº¤äº’æ“ä½œï¼Œç”¨å®Œå°±å…³äº†ï¼Œä¸èƒ½å­˜å‚¨ä¿¡æ¯æˆ–è€…å’Œå…¶ä»–æ ‡ç­¾é¡µè¿›è¡Œäº¤äº’ç­‰ç­‰ï¼›è¿™æ—¶å°±éœ€è¦ç”¨åˆ°backgroundï¼ˆåå°ï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸¸é©»çš„é¡µé¢ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ’ä»¶ä¸­æ‰€æœ‰ç±»å‹é¡µé¢ä¸­æœ€é•¿çš„ï¼›å®ƒéšç€æµè§ˆå™¨çš„æ‰“å¼€è€Œæ‰“å¼€ï¼Œéšç€æµè§ˆå™¨çš„å…³é—­è€Œå…³é—­ï¼Œæ‰€ä»¥é€šå¸¸æŠŠéœ€è¦ä¸€ç›´è¿è¡Œçš„ã€å¯åŠ¨å°±è¿è¡Œçš„ã€å…¨å±€çš„ä»£ç æ”¾åœ¨backgroundé‡Œé¢ã€‚ backgroundä¹Ÿæ˜¯éœ€è¦åœ¨manifest.jsonä¸­è¿›è¡Œé…ç½®ï¼Œå¯ä»¥é€šè¿‡pageæŒ‡å®šä¸€å¼ ç½‘é¡µï¼Œæˆ–è€…é€šè¿‡scriptsç›´æ¥æŒ‡å®šä¸€ä¸ªjsæ•°ç»„ï¼ŒChromeä¼šè‡ªåŠ¨ä¸ºjsç”Ÿæˆé»˜è®¤ç½‘é¡µï¼š 1234567&#123; &quot;background&quot;: &#123; // &quot;page&quot;: &quot;background.html&quot;, &quot;scripts&quot;: [&quot;background.js&quot;], &quot;persistent&quot;: true &#125;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œpageå±æ€§å’Œscriptså±æ€§åªéœ€è¦é…ç½®ä¸€ä¸ªå³å¯ï¼Œå¦‚æœä¸¤ä¸ªåŒæ—¶é…ç½®ï¼Œåˆ™ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š 1Only one of &#x27;background.page&#x27;, &#x27;background.scripts&#x27;, and &#x27;background.service_worker&#x27; can be specified. æˆ‘ä»¬ç»™backgroundè®¾ç½®ä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼Œå½“æ’ä»¶å®‰è£…æ—¶æ‰“å°æ—¥å¿—ï¼š 1234// background.jschrome.runtime.onInstalled.addListener(function () &#123; console.log(&quot;æ’ä»¶å·²è¢«å®‰è£…&quot;);&#125;); ç‚¹å‡»æŸ¥çœ‹è§†å›¾æ—è¾¹çš„èƒŒæ™¯é¡µï¼Œçœ‹åˆ°æˆ‘ä»¬è®¾ç½®çš„backgroundï¼š storageå­˜å‚¨ æˆ‘ä»¬åœ¨æ’ä»¶å®‰è£…æ—¶åœ¨storageä¸­è®¾ç½®ä¸€ä¸ªå€¼ï¼Œè¿™å°†å…è®¸å¤šä¸ªæ’ä»¶ç»„ä»¶è®¿é—®è¯¥å€¼å¹¶è¿›è¡Œæ›´æ–°æ“ä½œï¼š 1234567891011121314151617181920//background.jschrome.runtime.onInstalled.addListener(function () &#123; // storageä¸­è®¾ç½®å€¼ chrome.storage.sync.set(&#123; color: &quot;#3aa757&quot; &#125;, function () &#123; console.log(&quot;storage init color value&quot;); &#125;); // ä¸ºç‰¹å®šçš„ç½‘å€æ˜¾ç¤ºå›¾æ ‡ chrome.declarativeContent.onPageChanged.removeRules(undefined, function () &#123; chrome.declarativeContent.onPageChanged.addRules([ &#123; conditions: [ new chrome.declarativeContent.PageStateMatcher(&#123; pageUrl: &#123; hostEquals: &quot;baidu.com&quot; &#125;, &#125;), ], actions: [new chrome.declarativeContent.ShowPageAction()], &#125;, ]); &#125;);&#125;); chrome.declarativeContentç”¨äºç²¾ç¡®åœ°æ§åˆ¶ä»€ä¹ˆæ—¶å€™æ˜¾ç¤ºæˆ‘ä»¬çš„é¡µé¢æŒ‰é’®ï¼Œæˆ–è€…éœ€è¦åœ¨ç”¨æˆ·å•å‡»å®ƒä¹‹å‰æ›´æ”¹å®ƒçš„å¤–è§‚ä»¥åŒ¹é…å½“å‰æ ‡ç­¾é¡µã€‚ è¿™é‡Œè°ƒç”¨çš„chrome.storageå’Œæˆ‘ä»¬å¸¸ç”¨çš„localStorageå’ŒsessionStorageä¸æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼›ç”±äºè°ƒç”¨åˆ°äº†storageå’ŒdeclarativeContentçš„APIï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨manifestä¸­ç»™æ’ä»¶æ³¨å†Œä½¿ç”¨çš„æƒé™ï¼š 12345678&#123; // æ–°å¢ &quot;permissions&quot;: [&quot;storage&quot;, &quot;declarativeContent&quot;], &quot;background&quot;: &#123; &quot;scripts&quot;: [&quot;background.js&quot;], &quot;persistent&quot;: true &#125;&#125; å†æ¬¡æŸ¥çœ‹èƒŒæ™¯é¡µçš„è§†å›¾ï¼Œæˆ‘ä»¬å°±èƒ½çœ‹åˆ°æ‰“å°çš„æ—¥å¿—äº†ï¼›æ—¢ç„¶å¯ä»¥å­˜å‚¨ï¼Œé‚£ä¹Ÿèƒ½å–å‡ºæ¥ï¼Œæˆ‘ä»¬åœ¨popupä¸­æ·»åŠ äº‹ä»¶è¿›è¡Œè·å–ï¼Œé¦–å…ˆæˆ‘ä»¬æ–°å¢ä¸€ä¸ªè§¦å‘çš„buttonï¼š 12345678910111213141516&lt;!-- popup.html --&gt;&lt;html&gt; &lt;head&gt; &lt;style&gt; button &#123; width: 60px; height: 30px; outline: none; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;button id=&quot;changeColor&quot;&gt;change&lt;/button&gt; &lt;script src=&quot;popup.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å†åˆ›å»ºä¸€ä¸ªpopup.jsçš„æ–‡ä»¶ï¼Œç”¨æ¥ä»storageå­˜å‚¨ä¸­æ‹¿åˆ°é¢œè‰²å€¼ï¼Œå¹¶å°†æ­¤é¢œè‰²ä½œä¸ºæŒ‰é’®çš„èƒŒæ™¯è‰²ï¼š 1234567let changeColor = document.getElementById(&quot;changeColor&quot;);changeColor.onclick = function (el) &#123; chrome.storage.sync.get(&quot;color&quot;, function (data) &#123; changeColor.style.backgroundColor = data.color; &#125;);&#125;; å¦‚æœéœ€è¦è°ƒè¯•popupé¡µé¢ï¼Œå¯ä»¥åœ¨å¼¹æ¡†ä¸­å³å‡» =&gt; æ£€æŸ¥ï¼Œåœ¨DevToolsä¸­è¿›è¡Œè°ƒè¯•æŸ¥çœ‹ã€‚ æˆ‘ä»¬å¤šæ¬¡æ‰“å¼€popupé¡µé¢ï¼Œå‘ç°é¡µé¢æ¯æ¬¡ç‚¹å¼€æŒ‰é’®éƒ½ä¼šæ¢å¤æœ€å¼€å§‹çš„é»˜è®¤çŠ¶æ€ã€‚ è·å–æµè§ˆå™¨tabs ç°åœ¨ï¼Œæˆ‘ä»¬è·å–åˆ°äº†storageä¸­çš„å€¼ï¼Œéœ€è¦é€»è¾‘æ¥è¿›ä¸€æ­¥ä¸ç”¨æˆ·äº¤äº’ï¼›æ›´æ–°popup.jsä¸­çš„äº¤äº’ä»£ç ï¼š 1234567891011// popupjschangeColor.onclick = function (el) &#123; chrome.storage.sync.get(&quot;color&quot;, function (data) &#123; let &#123; color &#125; = data; chrome.tabs.query(&#123; active: true, currentWindow: true &#125;, function (tabs) &#123; chrome.tabs.executeScript(tabs[0].id, &#123; code: &#x27;document.body.style.backgroundColor = &quot;&#x27; + color + &#x27;&quot;;&#x27;, &#125;); &#125;); &#125;);&#125;; chrome.tabsçš„APIä¸»è¦æ˜¯å’Œæµè§ˆå™¨çš„æ ‡ç­¾é¡µè¿›è¡Œäº¤äº’ï¼Œé€šè¿‡queryæ‰¾åˆ°å½“å‰çš„æ¿€æ´»ä¸­çš„tabï¼Œç„¶åä½¿ç”¨executeScriptå‘æ ‡ç­¾é¡µæ³¨å…¥è„šæœ¬å†…å®¹ã€‚ manifeståŒæ ·éœ€è¦activeTabçš„æƒé™ï¼Œæ¥å…è®¸æˆ‘ä»¬çš„æ’ä»¶ä½¿ç”¨tabsçš„APIã€‚ 12345&#123; &quot;name&quot;: &quot;Hello Extensions&quot;, // ... &quot;permissions&quot;: [&quot;storage&quot;, &quot;declarativeContent&quot;, &quot;activeTab&quot;],&#125; é‡æ–°åŠ è½½æ’ä»¶ï¼Œæˆ‘ä»¬ç‚¹å‡»æŒ‰é’®ï¼Œä¼šå‘ç°å½“å‰é¡µé¢çš„èƒŒæ™¯é¢œè‰²å·²ç»å˜æˆstorageä¸­è®¾ç½®çš„è‰²å€¼äº†ï¼›ä½†æ˜¯æŸäº›ç”¨æˆ·å¯èƒ½å¸Œæœ›ä½¿ç”¨ä¸åŒçš„è‰²å€¼ï¼Œæˆ‘ä»¬ç»™ç”¨æˆ·æä¾›é€‰æ‹©çš„æœºä¼šã€‚ é¢œè‰²é€‰é¡¹é¡µé¢ ç°åœ¨æˆ‘ä»¬çš„æ’ä»¶åŠŸèƒ½è¿˜æ¯”è¾ƒå•ä¸€ï¼Œåªèƒ½è®©ç”¨æˆ·é€‰æ‹©å”¯ä¸€çš„é¢œè‰²ï¼›æˆ‘ä»¬å¯ä»¥åœ¨æ’ä»¶ä¸­åŠ å…¥é€‰é¡¹é¡µé¢ï¼Œä»¥ä¾¿ç”¨æˆ·æ›´å¥½çš„è‡ªå®šä¹‰æ’ä»¶çš„åŠŸèƒ½ã€‚ åœ¨ç¨‹åºç›®å½•æ–°å¢ä¸€ä¸ªoptions.htmlæ–‡ä»¶ï¼š 1234567891011121314151617181920&lt;!DOCTYPE html&gt;&lt;html&gt; &lt;head&gt; &lt;style&gt; button &#123; height: 30px; width: 30px; outline: none; margin: 10px; &#125; &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;buttonDiv&quot;&gt;&lt;/div&gt; &lt;div&gt; &lt;p&gt;é€‰æ‹©ä¸€ä¸ªä¸åŒçš„é¢œè‰²&lt;/p&gt; &lt;/div&gt; &lt;/body&gt; &lt;script src=&quot;options.js&quot;&gt;&lt;/script&gt;&lt;/html&gt; ç„¶åæ·»åŠ é€‰æ‹©é¡µé¢çš„é€»è¾‘ä»£ç options.jsï¼š 123456789101112131415let page = document.getElementById(&quot;buttonDiv&quot;);const kButtonColors = [&quot;#3aa757&quot;, &quot;#e8453c&quot;, &quot;#f9bb2d&quot;, &quot;#4688f1&quot;];function constructOptions(kButtonColors) &#123; for (let item of kButtonColors) &#123; let button = document.createElement(&quot;button&quot;); button.style.backgroundColor = item; button.addEventListener(&quot;click&quot;, function () &#123; chrome.storage.sync.set(&#123; color: item &#125;, function () &#123; console.log(&quot;color is &quot; + item); &#125;); &#125;); page.appendChild(button); &#125;&#125;constructOptions(kButtonColors); ä¸Šé¢ä»£ç ä¸­é¢„è®¾äº†å››ä¸ªé¢œè‰²é€‰é¡¹ï¼Œé€šè¿‡onclickäº‹ä»¶ç›‘å¬ï¼Œç”Ÿæˆé¡µé¢ä¸Šçš„æŒ‰é’®ï¼›å½“ç”¨æˆ·å•å‡»æŒ‰é’®æ—¶ï¼Œå°†æ›´æ–°storageä¸­å­˜å‚¨çš„é¢œè‰²å€¼ã€‚ optionsé¡µé¢å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åœ¨manifestçš„options_pageè¿›è¡Œæ³¨å†Œï¼š 1234567&#123; &quot;name&quot;: &quot;Hello Extensions&quot;, //... &quot;options_page&quot;: &quot;options.html&quot;, //... &quot;manifest_version&quot;: 2&#125; é‡æ–°åŠ è½½æˆ‘ä»¬çš„æ’ä»¶ï¼Œç‚¹å‡»è¯¦æƒ…ï¼Œæ»šåŠ¨åˆ°åº•éƒ¨ï¼Œç‚¹å‡»æ‰©å±•ç¨‹åºé€‰é¡¹æ¥æŸ¥çœ‹é€‰é¡¹é¡µé¢ã€‚ æˆ–è€…å¯ä»¥åœ¨æµè§ˆå™¨å³ä¸Šè§’æ’ä»¶å›¾æ ‡ä¸Šå³å‡» =&gt; é€‰é¡¹ã€‚ æ’ä»¶åŠŸèƒ½è¿›é˜¶ é€šè¿‡ä¸Šé¢ä¸€ä¸ªç®€å•çš„å°æ’ä»¶ï¼Œç›¸ä¿¡å¤§å®¶å¯¹æ’ä»¶çš„åŠŸèƒ½å’Œç»„ä»¶éƒ½æœ‰äº†ä¸€ä¸ªå¤§è‡´çš„äº†è§£ï¼ŒçŸ¥é“äº†æ¯ä¸ªç»„ä»¶åœ¨å…¶ä¸­å‘æŒ¥çš„ä½œç”¨ï¼›ä½†è¿™è¿˜åªæ˜¯æ’ä»¶çš„ä¸€å°éƒ¨åˆ†åŠŸèƒ½ï¼Œä¸‹é¢æˆ‘ä»¬å¯¹æ’ä»¶æ¯ä¸ªéƒ¨åˆ†çš„åŠŸèƒ½ä»¥åŠç»„ä»¶åšä¸€ä¸ªæ›´æ·±å…¥çš„äº†è§£ã€‚ ä½¿ç”¨backgroundç®¡ç†äº‹ä»¶ backgroundæ˜¯æ’ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå®ƒåŒ…å«å¯¹æ’ä»¶å¾ˆé‡è¦çš„æµè§ˆå™¨äº‹ä»¶çš„ç›‘å¬å™¨ã€‚backgroundå¤„äºä¼‘çœ çŠ¶æ€ï¼Œç›´åˆ°è§¦å‘äº‹ä»¶ï¼Œç„¶åæ‰§è¡ŒæŒ‡ç¤ºçš„é€»è¾‘ï¼›ä¸€ä¸ªå¥½çš„backgroundä»…åœ¨éœ€è¦æ—¶åŠ è½½ï¼Œå¹¶åœ¨ç©ºé—²æ—¶å¸è½½ã€‚ backgroundç›‘å¬çš„ä¸€äº›æµè§ˆå™¨äº‹ä»¶åŒ…æ‹¬ï¼š æ’ä»¶ç¨‹åºé¦–æ¬¡å®‰è£…æˆ–æ›´æ–°ä¸ºæ–°ç‰ˆæœ¬ã€‚ åå°é¡µé¢æ­£åœ¨ç›‘å¬äº‹ä»¶ï¼Œå¹¶ä¸”å·²è°ƒåº¦è¯¥äº‹ä»¶ å†…å®¹è„šæœ¬æˆ–å…¶ä»–æ’ä»¶å‘é€æ¶ˆæ¯ æ’ä»¶ä¸­çš„å¦ä¸€ä¸ªè§†å›¾ï¼ˆä¾‹å¦‚å¼¹å‡ºçª—å£ï¼‰è°ƒç”¨runtime.getBackgroundPage åŠ è½½å®Œæˆåï¼Œåªè¦è§¦å‘æŸä¸ªäº‹ä»¶ï¼Œbackgroundå°±ä¼šä¿æŒè¿è¡ŒçŠ¶æ€ï¼›åœ¨ä¸Šé¢manifestä¸­ï¼Œæˆ‘ä»¬è¿˜æŒ‡å®šäº†ä¸€ä¸ªpersistentå±æ€§ï¼š 123456&#123; &quot;background&quot;: &#123; &quot;scripts&quot;: [&quot;background.js&quot;], &quot;persistent&quot;: true &#125;&#125; persistentå±æ€§å®šä¹‰äº†æ’ä»¶å¸¸é©»åå°çš„æ–¹å¼ï¼›å½“å…¶å€¼ä¸ºtrueæ—¶ï¼Œè¡¨ç¤ºæ’ä»¶å°†ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œæ— è®ºå…¶æ˜¯å¦æ­£åœ¨å·¥ä½œï¼›å½“å…¶å€¼ä¸ºfalseæ—¶ï¼Œè¡¨ç¤ºæ’ä»¶åœ¨åå°æŒ‰éœ€è¿è¡Œï¼Œè¿™å°±æ˜¯Chromeåæ¥æå‡ºçš„Event Pageï¼ˆéæŒä¹…æ€§åå°ï¼‰ã€‚Event Pageæ˜¯åŸºäºäº‹ä»¶é©±åŠ¨è¿è¡Œçš„ï¼Œåªæœ‰åœ¨äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™æ‰å¯ä»¥è®¿é—®ï¼›è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†èƒ½å¤Ÿæœ‰æ•ˆå‡å°æ’ä»¶å¯¹å†…å­˜çš„æ¶ˆè€—ï¼Œå¦‚éå¿…è¦ï¼Œè¯·å°†persistentè®¾ç½®ä¸ºfalseã€‚ persistentå±æ€§çš„é»˜è®¤å€¼ä¸ºtrue alarms ä¸€äº›åŸºäºDOMé¡µé¢çš„è®¡æ—¶å™¨ï¼ˆä¾‹å¦‚window.setTimeoutæˆ–window.setIntervalï¼‰ï¼Œå¦‚æœåœ¨éæŒä¹…åå°ä¼‘çœ æ—¶è¿›è¡Œäº†è§¦å‘ï¼Œå¯èƒ½ä¸ä¼šæŒ‰ç…§é¢„å®šçš„æ—¶é—´è¿è¡Œï¼š 1234let timeout = 1000 * 60 * 3; // 3 minutes in millisecondswindow.setTimeout(function() &#123; alert(&#x27;Hello, world!&#x27;);&#125;, timeout); Chromeæä¾›äº†å¦å¤–çš„APIï¼Œalarmsï¼š 12345chrome.alarms.create(&#123;delayInMinutes: 3.0&#125;)chrome.alarms.onAlarm.addListener(function() &#123; alert(&quot;Hello, world!&quot;)&#125;); browserAction æˆ‘ä»¬çŸ¥é“äº†browser_actionå­—æ®µç”¨æ¥é…ç½®popupçš„é¡µé¢ï¼Œåœ¨å…¶ä»–çš„ä¸€äº›æ–‡æ¡£ä¸­è¿˜ç»™å‡ºäº†page_actionå­—æ®µçš„é…ç½®ï¼Œä¸è¿‡page_actionå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡µé¢éƒ½èƒ½å¤Ÿä½¿ç”¨ï¼›ä¸è¿‡éšç€Chromeçš„ç‰ˆæœ¬æ›´æ–°ï¼Œè¿™ä¸¤è€…çš„åŠŸèƒ½ä¹Ÿè¶Šæ¥è¶Šç›¸è¿‘ï¼›åœ¨Chrome 48ç‰ˆæœ¬ä¹‹åï¼Œpage_actionä¹Ÿä»åŸæ¥çš„åœ°å€æ ä¸­ç§»å‡ºæ¥ï¼Œå’Œæ’ä»¶æ”¾åœ¨ä¸€èµ·ï¼›ç¬”è€…åœ¨é…ç½®page_actionçš„æ—¶å€™æ²¡æœ‰å‘ç°æœ‰ä»€ä¹ˆæ¯”è¾ƒå¤§çš„åŒºåˆ«ï¼Œå› æ­¤ä¸‹é¢ä»¥browser_actionä¸ºä¸»ã€‚ åœ¨browserActionçš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›å¤šç§å°ºå¯¸çš„å›¾æ ‡ï¼ŒChromeä¼šé€‰æ‹©æœ€æ¥è¿‘çš„å›¾æ ‡å¹¶å°†å…¶ç¼©æ”¾åˆ°é€‚å½“çš„å¤§å°æ¥å¡«å……ï¼›å¦‚æœæ²¡æœ‰æä¾›ç¡®åˆ‡çš„å¤§å°ï¼Œè¿™ç§ç¼©æ”¾ä¼šå¯¼è‡´å›¾æ ‡ä¸¢å¤±ç»†èŠ‚æˆ–çœ‹èµ·æ¥æ¨¡ç³Šã€‚ 123456789101112&#123; // ... &quot;browser_action&quot;: &#123; &quot;default_icon&quot;: &#123; // optional &quot;16&quot;: &quot;images/icon16.png&quot;, // optional &quot;24&quot;: &quot;images/icon24.png&quot;, // optional &quot;32&quot;: &quot;images/icon32.png&quot; // optional &#125;, &quot;default_title&quot;: &quot;hello popup&quot;, // optional &quot;default_popup&quot;: &quot;popup.html&quot; // optional &#125;,&#125; ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨browserAction.setPopupåŠ¨æ€è®¾ç½®å¼¹å‡ºçª—å£ã€‚ 1chrome.browserAction.setPopup(&#123;popup: &#x27;popup_new.html&#x27;&#125;); Tooltip è¦è®¾ç½®æç¤ºæ–‡æ¡ˆï¼Œä½¿ç”¨default_titleå­—æ®µï¼Œæˆ–è€…è°ƒç”¨browserAction.setTitleå‡½æ•°ã€‚ 1chrome.browserAction.setTitle(&#123; title: &quot;New Tooltip&quot; &#125;); Badge Badgeï¼ˆå¾½ç« ï¼‰å°±æ˜¯åœ¨å›¾æ ‡ä¸Šæ˜¾ç¤ºçš„ä¸€äº›æ–‡æœ¬å†…å®¹ï¼Œç”¨æ¥è¯¦ç»†æ˜¾ç¤ºæ’ä»¶çš„æç¤ºä¿¡æ¯ï¼›ç”±äºBageçš„ç©ºé—´æœ‰é™ï¼Œå› æ­¤æœ€å¤šæ˜¾ç¤º4ä¸ªè‹±æ–‡å­—ç¬¦æˆ–è€…2ä¸ªå‡½æ•°ï¼›badgeæ— æ³•é€šè¿‡é…ç½®æ–‡ä»¶æ¥æŒ‡å®šï¼Œå¿…é¡»é€šè¿‡ä»£ç å®ç°ï¼Œè®¾ç½®badgeæ–‡å­—å’Œé¢œè‰²å¯ä»¥åˆ†åˆ«ä½¿ç”¨browserAction.setBadgeText()å’ŒbrowserAction.setBadgeBackgroundColor()ï¼š 1234chrome.browserAction.setBadgeText(&#123; text: &quot;new&quot; &#125;);chrome.browserAction.setBadgeBackgroundColor(&#123; color: [255, 0, 0, 255] &#125;);// or é¢œè‰²å­—ç¬¦ä¸²// chrome.action.setBadgeBackgroundColor(&#123;color: &#x27;#4688F1&#x27;&#125;); content-scripts content-scriptsï¼ˆå†…å®¹è„šæœ¬ï¼‰æ˜¯åœ¨ç½‘é¡µä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„æ–‡ä»¶ã€‚é€šè¿‡ä½¿ç”¨æ ‡å‡†çš„æ–‡æ¡£å¯¹è±¡æ¨¡å‹(DOM)ï¼Œå®ƒèƒ½å¤Ÿè¯»å–æµè§ˆå™¨è®¿é—®çš„ç½‘é¡µçš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯¹å…¶è¿›è¡Œæ›´æ”¹ï¼Œå¹¶å°†ä¿¡æ¯ä¼ é€’ç»™å…¶çˆ¶çº§æ’ä»¶ã€‚å†…å®¹è„šæœ¬ç›¸å¯¹äºbackgroundè¿˜æ˜¯æœ‰ä¸€äº›è®¿é—®APIä¸Šçš„é™åˆ¶ï¼Œå®ƒå¯ä»¥ç›´æ¥è®¿é—®ä»¥ä¸‹chromeçš„APIï¼š i18n storage runtime: connect getManifest getURL id onConnect onMessage sendMessage å†…å®¹è„šæœ¬è¿è¡Œäºä¸€ä¸ªç‹¬ç«‹ã€éš”ç¦»çš„ç¯å¢ƒï¼Œå®ƒä¸ä¼šå’Œä¸»é¡µé¢çš„è„šæœ¬æˆ–è€…å…¶ä»–æ’ä»¶çš„å†…å®¹è„šæœ¬å‘ç”Ÿå†²çªï¼Œå½“ç„¶ä¹Ÿä¸èƒ½è°ƒç”¨å…¶ä¸Šä¸‹æ–‡å’Œå˜é‡ã€‚å‡è®¾æˆ‘ä»¬åœ¨ä¸»é¡µé¢ä¸­å®šä¹‰äº†å˜é‡å’Œå‡½æ•°ï¼š 123456789101112&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;script&gt; const a = &#123; a: 1, b: &quot;2&quot; &#125;; const b = &#123; a: 1, b: &quot;2&quot;, c: [] &#125;; function add(a, b)&#123; return a + b &#125;; &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; ç”±äºéš”ç¦»çš„æœºåˆ¶ï¼Œåœ¨å†…å®¹è„šæœ¬ä¸­è°ƒç”¨addå‡½æ•°ä¼šæŠ¥é”™ï¼šUncaught ReferenceError: add is not definedã€‚ å†…å®¹è„šæœ¬åˆ†ä¸ºä»¥ä»£ç æ–¹å¼æˆ–å£°æ˜æ–¹å¼æ³¨å…¥ã€‚ ä»£ç æ–¹å¼æ³¨å…¥ å¯¹äºéœ€è¦åœ¨ç‰¹å®šæƒ…å†µä¸‹è¿è¡Œçš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»£ç æ³¨å…¥çš„æ–¹å¼ï¼›åœ¨ä¸Šé¢çš„popupé¡µé¢ä¸­ï¼Œæˆ‘ä»¬å°±æ˜¯å°†å†…å®¹è„šæœ¬ä»¥ä»£ç çš„æ–¹å¼è¿›è¡Œæ³¨å…¥åˆ°é¡µé¢ä¸­ï¼š 123chrome.tabs.executeScript(tabs[0].id, &#123; code: &#x27;document.body.style.backgroundColor = &quot;red&quot;;&#x27;,&#125;); æˆ–è€…å¯ä»¥æ³¨å…¥æ•´ä¸ªæ–‡ä»¶ã€‚ 123chrome.tabs.executeScript(tabs[0].id, &#123; file: &quot;contentScript.js&quot;,&#125;); å£°æ˜å¼æ³¨å…¥ åœ¨æŒ‡å®šé¡µé¢ä¸Šè‡ªåŠ¨è¿è¡Œçš„å†…å®¹è„šæœ¬ï¼Œæˆ‘ä»¬å¯ä½¿ç”¨å£°æ˜å¼æ³¨å…¥çš„æ–¹å¼ï¼›ä»¥å£°æ˜æ–¹å¼æ³¨å…¥çš„è„šæœ¬éœ€æ³¨å†Œåœ¨manifestæ–‡ä»¶çš„content_scriptså±æ€§ä¸‹ã€‚å®ƒä»¬å¯ä»¥åŒ…æ‹¬JSæ–‡ä»¶æˆ–CSSæ–‡ä»¶ã€‚ 12345678910&#123; &quot;content_scripts&quot;: [ &#123; // å¿…éœ€ã€‚æŒ‡å®šæ­¤å†…å®¹è„šæœ¬å°†è¢«æ³¨å…¥åˆ°å“ªäº›é¡µé¢ã€‚ &quot;matches&quot;: [&quot;https://*.xieyufei.com/*&quot;], &quot;css&quot;: [&quot;myStyles.css&quot;], &quot;js&quot;: [&quot;contentScript.js&quot;] &#125; ]&#125; å£°æ˜å¼æ³¨å…¥é™¤äº†matcheså¿…é¡»å¤–ï¼Œè¿˜å¯ä»¥åŒ…å«ä»¥ä¸‹å­—æ®µï¼Œæ¥è‡ªå®šä¹‰æŒ‡å®šé¡µé¢åŒ¹é…ï¼š Name Type Description exclude_matches å­—ç¬¦ä¸²æ•°ç»„ å¯é€‰ã€‚æ’é™¤æ­¤å†…å®¹è„šæœ¬å°†è¢«æ³¨å…¥çš„é¡µé¢ã€‚ include_globs å­—ç¬¦ä¸²æ•°ç»„ å¯é€‰ã€‚ åœ¨ matches ååº”ç”¨ï¼Œä»¥åŒ¹é…ä¸æ­¤ glob åŒ¹é…çš„URLã€‚æ—¨åœ¨æ¨¡æ‹Ÿ @exclude æ²¹çŒ´å…³é”®å­—ã€‚ exclude_globs å­—ç¬¦ä¸²æ•°ç»„ å¯é€‰ã€‚ åœ¨ matches ååº”ç”¨ï¼Œä»¥æ’é™¤ä¸æ­¤ glob åŒ¹é…çš„URLã€‚æ—¨åœ¨æ¨¡æ‹Ÿ @exclude æ²¹çŒ´å…³é”®å­—ã€‚ å£°æ˜åŒ¹é…URLå¯ä»¥ä½¿ç”¨Globå±æ€§ï¼ŒGlobå±æ€§éµå¾ªæ›´çµæ´»çš„è¯­æ³•ã€‚å¯æ¥å—çš„Globå­—ç¬¦ä¸²å¯èƒ½åŒ…å«â€œé€šé…ç¬¦â€æ˜Ÿå·å’Œé—®å·çš„URLã€‚æ˜Ÿå·*åŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ç©ºå­—ç¬¦ä¸²ï¼Œè€Œé—®å·ï¼ŸåŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚ 1234567891011&#123; &quot;content_scripts&quot;: [ &#123; &quot;matches&quot;: [&quot;https://*.xieyufei.com/*&quot;], &quot;exclude_matches&quot;: [&quot;*://*/*business*&quot;], &quot;include_globs&quot;: [&quot;*xieyufei.com/???s/*&quot;], &quot;exclude_globs&quot;: [&quot;*science*&quot;], &quot;js&quot;: [&quot;contentScript.js&quot;] &#125; ]&#125; å°†JSæ–‡ä»¶æ³¨å…¥ç½‘é¡µæ—¶ï¼Œè¿˜éœ€è¦æ§åˆ¶æ–‡ä»¶æ³¨å…¥çš„æ—¶æœºï¼Œç”±run_atå­—æ®µæ§åˆ¶ï¼›é¦–é€‰çš„é»˜è®¤å­—æ®µæ˜¯document_idleï¼Œä½†å¦‚æœéœ€è¦ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸º â€œdocument_startâ€ æˆ–â€œdocument_endâ€ã€‚ 123456789&#123; &quot;content_scripts&quot;: [ &#123; &quot;matches&quot;: [&quot;https://*.xieyufei.com/*&quot;], &quot;run_at&quot;: &quot;document_idle&quot;, &quot;js&quot;: [&quot;contentScript.js&quot;] &#125; ]&#125; ä¸‰ä¸ªå­—æ®µæ³¨å…¥çš„æ—¶æœºåŒºåˆ«å¦‚ä¸‹ï¼š Name Type Description document_idle string é¦–é€‰ã€‚ å°½å¯èƒ½ä½¿ç”¨ â€œdocument_idleâ€ã€‚æµè§ˆå™¨é€‰æ‹©ä¸€ä¸ªæ—¶é—´åœ¨ â€œdocument_endâ€ å’Œwindow.onload äº‹ä»¶è§¦å‘åç«‹å³æ³¨å…¥è„šæœ¬ã€‚ æ³¨å…¥çš„ç¡®åˆ‡æ—¶é—´å–å†³äºæ–‡æ¡£çš„å¤æ‚ç¨‹åº¦ä»¥åŠåŠ è½½æ‰€éœ€çš„æ—¶é—´ï¼Œå¹¶ä¸”å·²é’ˆå¯¹é¡µé¢åŠ è½½é€Ÿåº¦è¿›è¡Œäº†ä¼˜åŒ–ã€‚åœ¨ â€œdocument_idleâ€ ä¸Šè¿è¡Œçš„å†…å®¹è„šæœ¬ä¸éœ€è¦ç›‘å¬ window.onload äº‹ä»¶ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿å®ƒä»¬åœ¨ DOM å®Œæˆä¹‹åè¿è¡Œã€‚å¦‚æœç¡®å®éœ€è¦åœ¨window.onload ä¹‹åè¿è¡Œè„šæœ¬ï¼Œåˆ™æ‰©å±•å¯ä»¥ä½¿ç”¨ document.readyState å±æ€§æ£€æŸ¥ onload æ˜¯å¦å·²è§¦å‘ã€‚ document_start string åœ¨ css æ–‡ä»¶ä¹‹åï¼Œä½†åœ¨æ„é€ å…¶ä»– DOM æˆ–è¿è¡Œå…¶ä»–è„šæœ¬å‰æ³¨å…¥ã€‚ document_end string åœ¨ DOM åˆ›å»ºå®Œæˆåï¼Œä½†åœ¨åŠ è½½å­èµ„æºï¼ˆä¾‹å¦‚ images å’Œ frames ï¼‰ä¹‹å‰ï¼Œç«‹å³æ³¨å…¥è„šæœ¬ã€‚ æ¶ˆæ¯é€šä¿¡ å°½ç®¡å†…å®¹è„šæœ¬çš„æ‰§è¡Œç¯å¢ƒå’Œæ‰˜ç®¡å®ƒä»¬çš„é¡µé¢æ˜¯ç›¸äº’éš”ç¦»çš„ï¼Œä½†æ˜¯å®ƒä»¬å…±äº«å¯¹é¡µé¢DOMçš„è®¿é—®ï¼›å¦‚æœå†…å®¹è„šæœ¬æƒ³è¦å’Œæ’ä»¶é€šä¿¡ï¼Œå¯ä»¥é€šè¿‡onMessageå’ŒsendMessage 123456789101112// contentScript.jschrome.runtime.onMessage.addListener(function (message, sender, sendResponse) &#123; console.log(&quot;content-scriptæ”¶åˆ°çš„æ¶ˆæ¯&quot;, message); sendResponse(&quot;æˆ‘æ”¶åˆ°äº†ä½ çš„æ¶ˆæ¯ï¼&quot;);&#125;);chrome.runtime.sendMessage( &#123; greeting: &quot;æˆ‘æ˜¯content-scriptå‘€ï¼Œæˆ‘ä¸»åŠ¨å‘æ¶ˆæ¯ç»™åå°ï¼&quot; &#125;, function (response) &#123; console.log(&quot;æ”¶åˆ°æ¥è‡ªåå°çš„å›å¤ï¼š&quot; + response); &#125;); æ›´å¤šæ¶ˆæ¯é€šä¿¡çš„åœ¨åé¢æˆ‘ä»¬ä¼šè¿›è¡Œè¯¦ç»†çš„æ€»ç»“ã€‚ contextMenus contextMenuså¯ä»¥è‡ªå®šä¹‰æµè§ˆå™¨çš„å³é”®èœå•ï¼ˆä¹Ÿæœ‰å«ä¸Šä¸‹æ–‡èœå•çš„ï¼‰ï¼Œä¸»è¦æ˜¯é€šè¿‡chrome.contextMenusAPIå®ç°ï¼›åœ¨manifestä¸­æ·»åŠ æƒé™æ¥å¼€å¯èœå•æƒé™ï¼š 123456789&#123; // ... &quot;permissions&quot;: [&quot;contextMenus&quot;], &quot;icons&quot;: &#123; &quot;16&quot;: &quot;contextMenus16.png&quot;, &quot;48&quot;: &quot;contextMenus48.png&quot;, &quot;128&quot;: &quot;contextMenus128.png&quot; &#125;&#125; é€šè¿‡iconså­—æ®µé…ç½®contextMenusèœå•æ—è¾¹çš„å›¾æ ‡ï¼š æˆ‘ä»¬å¯ä»¥åœ¨backgroundä¸­è°ƒç”¨contextMenus.createæ¥åˆ›å»ºèœå•ï¼Œè¿™ä¸ªæ“ä½œåº”è¯¥åœ¨runtime.onInstalledç›‘å¬å›è°ƒæ‰§è¡Œï¼š 12345678910111213141516171819202122chrome.contextMenus.create(&#123; id: &quot;1&quot;, title: &quot;Test Context Menu&quot;, contexts: [&quot;all&quot;],&#125;);//åˆ†å‰²çº¿chrome.contextMenus.create(&#123; type: &quot;separator&quot;,&#125;);// çˆ¶çº§èœå•chrome.contextMenus.create(&#123; id: &quot;2&quot;, title: &quot;Parent Context Menu&quot;, contexts: [&quot;all&quot;],&#125;);chrome.contextMenus.create(&#123; id: &quot;21&quot;, parentId: &quot;2&quot;, title: &quot;Child Context Menu1&quot;, contexts: [&quot;all&quot;],&#125;);// ... å¦‚æœæˆ‘ä»¬çš„æ’ä»¶åˆ›å»ºå¤šä¸ªå³é”®èœå•ï¼Œåˆ™Chromeä¼šè‡ªåŠ¨å°†å…¶æŠ˜å ä¸ºä¸€ä¸ªçˆ¶èœå•ã€‚ contextMenusåˆ›å»ºå¯¹è±¡çš„å±æ€§å¯ä»¥åœ¨é™„å½•é‡Œé¢æ‰¾åˆ°ï¼›æˆ‘ä»¬çœ‹åˆ°åœ¨titleå±æ€§ä¸­æœ‰ä¸€ä¸ª%sçš„æ ‡è¯†ç¬¦ï¼Œå½“contextsä¸ºselectionï¼Œä½¿ç”¨%sæ¥è¡¨ç¤ºé€‰ä¸­çš„æ–‡å­—ï¼›æˆ‘ä»¬é€šè¿‡è¿™ä¸ªåŠŸèƒ½å¯ä»¥å®ç°ä¸€ä¸ªé€‰ä¸­æ–‡å­—è°ƒç”¨ç™¾åº¦æœç´¢çš„å°åŠŸèƒ½ï¼š 123456789101112chrome.contextMenus.create(&#123; id: &quot;1&quot;, title: &quot;ä½¿ç”¨ç™¾åº¦æœç´¢ï¼š%s&quot;, contexts: [&quot;selection&quot;], onclick: function (params) &#123; chrome.tabs.create(&#123; url: &quot;https://www.baidu.com/s?ie=utf-8&amp;wd=&quot; + encodeURI(params.selectionText), &#125;); &#125;,&#125;); æ•ˆæœå¦‚ä¸‹ï¼š contextMenusè¿˜æœ‰ä¸€äº›APIå¯ä»¥è°ƒç”¨ï¼š 12345678// åˆ é™¤æŸä¸€ä¸ªèœå•é¡¹chrome.contextMenus.remove(menuItemId)ï¼›// åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰å³é”®èœå•chrome.contextMenus.removeAll();// æ›´æ–°æŸä¸€ä¸ªèœå•é¡¹chrome.contextMenus.update(menuItemId, updateProperties);// ç›‘å¬èœå•é¡¹ç‚¹å‡»äº‹ä»¶chrome.contextMenus.onClicked.addListener(function(OnClickData info, tabs.Tab tab) &#123;...&#125;); override è¦†ç›–é¡µé¢ï¼ˆoverrideï¼‰æ˜¯ä¸€ç§å°†Chromeé»˜è®¤çš„ç‰¹å®šé¡µé¢æ›¿æ¢ä¸ºæ’ä»¶ç¨‹åºä¸­çš„HTMLæ–‡ä»¶ã€‚é™¤äº†HTMLä¹‹å¤–ï¼Œè¦†ç›–é¡µé¢é€šå¸¸è¿˜æœ‰CSSå’ŒJSä»£ç ï¼›æ’ä»¶å¯ä»¥æ›¿æ¢ä»¥ä¸‹Chromeçš„é¡µé¢ã€‚ ä¹¦ç­¾ç®¡ç†å™¨ å½“ç”¨æˆ·ä» Chrome èœå•ä¸­é€‰æ‹©ä¹¦ç­¾ç®¡ç†å™¨èœå•é¡¹æˆ–åœ¨ Mac ä¸Šä»ä¹¦ç­¾èœå•ä¸­é€‰æ‹©ä¹¦ç­¾ç®¡ç†å™¨é¡¹æ—¶å‡ºç°çš„é¡µé¢ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡è¾“å…¥ URL chrome://bookmarksæ¥è®¿é—®æ­¤é¡µé¢ã€‚ å†å²è®°å½• å½“ç”¨æˆ·ä» Chrome èœå•ä¸­é€‰æ‹©å†å²è®°å½•èœå•é¡¹æˆ–åœ¨ Mac ä¸Šä»å†å²è®°å½•èœå•ä¸­é€‰æ‹©æ˜¾ç¤ºå®Œæ•´å†å²è®°å½•é¡¹æ—¶å‡ºç°çš„é¡µé¢ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡è¾“å…¥URL chrome://historyæ¥è®¿é—®æ­¤é¡µé¢ã€‚ æ–°æ ‡ç­¾ å½“ç”¨æˆ·åˆ›å»ºæ–°æ ‡ç­¾æˆ–çª—å£æ—¶å‡ºç°çš„é¡µé¢ã€‚æ‚¨ä¹Ÿå¯ä»¥é€šè¿‡è¾“å…¥ URL chrome://newtabæ¥è®¿é—®æ­¤é¡µé¢ã€‚ PSï¼šåƒæˆ‘ä»¬ç†ŸçŸ¥çš„Momentumæ’ä»¶ï¼Œå°±æ˜¯è¦†ç›–äº†æ–°æ ‡ç­¾é¡µé¢ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå•ä¸ªæ’ä»¶åªèƒ½è¦†ç›–æŸä¸€ä¸ªé¡µé¢ã€‚ä¾‹å¦‚ï¼Œæ’ä»¶ç¨‹åºä¸èƒ½åŒæ—¶è¦†ç›–ä¹¦ç­¾ç®¡ç†å™¨å’Œå†å²è®°å½•é¡µé¢ã€‚ åœ¨manifestè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š 1234567&#123; &quot;chrome_url_overrides&quot;: &#123; &quot;newtab&quot;: &quot;newtab.html&quot;, // &quot;history&quot;: &quot;history.html&quot;, // &quot;bookmarks&quot;: &quot;bookmarks.html&quot; &#125;&#125; è¦†ç›–newtabæ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœæˆ‘ä»¬è¦†ç›–å¤šä¸ªç‰¹å®šé¡µé¢ï¼ŒChromeåŠ è½½æ’ä»¶æ—¶ä¼šç›´æ¥æŠ¥é”™ï¼š storage ç”¨æˆ·åœ¨æ“ä½œæ—¶ï¼Œä¼šäº§ç”Ÿä¸€äº›ç”¨æˆ·æ•°æ®ï¼Œæ’ä»¶éœ€è¦åœ¨æœ¬åœ°å­˜å‚¨è¿™äº›æ•°æ®ï¼Œåœ¨éœ€è¦è°ƒç”¨çš„æ—¶å€™å†æ‹¿å‡ºæ¥ï¼›Chromeæ¨èä½¿ç”¨chrome.storageçš„APIï¼Œè¯¥APIç»è¿‡ä¼˜åŒ–ï¼Œæä¾›å’ŒlocalStorageç›¸åŒçš„å­˜å‚¨åŠŸèƒ½ï¼›ä¸æ¨èç›´æ¥å­˜åœ¨localStorageä¸­ï¼Œä¸¤è€…ä¸»è¦æœ‰ä»¥ä¸‹åŒºåˆ«ï¼š ç”¨æˆ·æ•°æ®ä½¿ç”¨chrome.storageå­˜å‚¨å¯ä»¥å’ŒChromeçš„åŒæ­¥åŠŸèƒ½è‡ªåŠ¨åŒæ­¥ã€‚ æ’ä»¶çš„å†…å®¹è„šæœ¬å¯ä»¥ç›´æ¥è®¿é—®ç”¨æˆ·æ•°æ®ï¼Œè€Œæ— éœ€backgroundã€‚ chrome.storageå¯ä»¥ç›´æ¥å­˜å‚¨å¯¹è±¡ï¼Œè€ŒlocalStorageæ˜¯å­˜å‚¨å­—ç¬¦ä¸²ï¼Œéœ€è¦å†æ¬¡è½¬æ¢ å¦‚æœè¦ä½¿ç”¨storageçš„è‡ªåŠ¨åŒæ­¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨storage.syncï¼š 1234567chrome.storage.sync.set(&#123;key: value&#125;, function() &#123; console.log(&#x27;Value is set to &#x27; + value);&#125;);chrome.storage.sync.get([&#x27;key&#x27;], function(result) &#123; console.log(&#x27;Value currently is &#x27; + result.key);&#125;); å½“Chromeç¦»çº¿æ—¶ï¼ŒChromeä¼šå°†æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ã€‚ä¸‹æ¬¡æµè§ˆå™¨åœ¨çº¿æ—¶ï¼ŒChromeä¼šåŒæ­¥æ•°æ®ã€‚å³ä½¿ç”¨æˆ·ç¦ç”¨åŒæ­¥ï¼Œstorage.syncä»å°†å·¥ä½œã€‚ ä¸éœ€è¦åŒæ­¥çš„æ•°æ®å¯ä»¥ç”¨storage.localè¿›è¡Œå­˜å‚¨ï¼š 1234567chrome.storage.local.set(&#123;key: value&#125;, function() &#123; console.log(&#x27;Value is set to &#x27; + value);&#125;);chrome.storage.local.get([&#x27;key&#x27;], function(result) &#123; console.log(&#x27;Value currently is &#x27; + result.key);&#125;); å¦‚æœæˆ‘ä»¬æƒ³è¦ç›‘å¬storageä¸­çš„æ•°æ®å˜åŒ–ï¼Œå¯ä»¥ç”¨onChangedæ·»åŠ ç›‘å¬äº‹ä»¶ï¼›æ¯å½“å­˜å‚¨ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼š 12345678910// background.jschrome.storage.onChanged.addListener(function (changes, namespace) &#123; for (let [key, &#123; oldValue, newValue &#125;] of Object.entries(changes)) &#123; console.log( `Storage key &quot;$&#123;key&#125;&quot; in namespace &quot;$&#123;namespace&#125;&quot; changed.`, `Old value was &quot;$&#123;oldValue&#125;&quot;, new value is &quot;$&#123;newValue&#125;&quot;.` ); &#125;&#125;); devtools ç”¨è¿‡Vueæˆ–è€…Reactçš„devtoolsçš„ç«¥é‹åº”è¯¥è§è¿‡è¿™æ ·æ–°å¢çš„æ‰©å±•é¢æ¿ï¼š DevToolså¯ä»¥ä¸ºChromeçš„DevToolsæ·»åŠ åŠŸèƒ½ï¼Œå®ƒå¯ä»¥æ·»åŠ æ–°çš„UIé¢æ¿å’Œä¾§è¾¹æ ï¼Œä¸æ£€æŸ¥çš„é¡µé¢äº¤äº’ï¼Œè·å–æœ‰å…³ç½‘ç»œè¯·æ±‚çš„ä¿¡æ¯ç­‰ç­‰ï¼›å®ƒå¯ä»¥è®¿é—®ä»¥ä¸‹ç‰¹å®šçš„APIï¼š devtools.inspectedWindow devtools.network devtools.panels DevToolsæ‰©å±•çš„ç»“æ„ä¸ä»»ä½•å…¶ä»–æ‰©å±•ä¸€æ ·ï¼šå®ƒå¯ä»¥æœ‰ä¸€ä¸ªèƒŒæ™¯é¡µé¢ã€å†…å®¹è„šæœ¬å’Œå…¶ä»–é¡¹ç›®ã€‚æ­¤å¤–ï¼Œæ¯ä¸ªDevToolsæ‰©å±•éƒ½æœ‰ä¸€ä¸ªDevToolsé¡µé¢ï¼Œå¯ä»¥è®¿é—®DevToolsçš„APIã€‚ é…ç½®devtoolsä¸éœ€è¦æƒé™ï¼Œåªè¦åœ¨manifestä¸­é…ç½®ä¸€ä¸ªdevtools.htmlï¼š 123&#123; &quot;devtools_page&quot;: &quot;devtools.html&quot;,&#125; devtools.htmlä¸­åªå¼•ç”¨äº†devtools.jsï¼Œå¦‚æœå†™äº†å…¶ä»–å†…å®¹ä¹Ÿä¸ä¼šå±•ç¤ºï¼š 1234567&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;/head&gt; &lt;body&gt; &lt;script type=&quot;text/javascript&quot; src=&quot;./devtools.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; åœ¨é¡¹ç›®ä¸­æ–°å»ºdevtools.jsï¼š 123456789101112131415161718192021// devtools.js// åˆ›å»ºæ‰©å±•é¢æ¿chrome.devtools.panels.create( // æ‰©å±•é¢æ¿æ˜¾ç¤ºåç§° &quot;DevPanel&quot;, // æ‰©å±•é¢æ¿iconï¼Œå¹¶ä¸å±•ç¤º &quot;panel.png&quot;, // æ‰©å±•é¢æ¿é¡µé¢ &quot;Panel.html&quot;, function (panel) &#123; console.log(&quot;è‡ªå®šä¹‰é¢æ¿åˆ›å»ºæˆåŠŸï¼&quot;); &#125;);// åˆ›å»ºè‡ªå®šä¹‰ä¾§è¾¹æ chrome.devtools.panels.elements.createSidebarPane( &quot;Sidebar&quot;, function (sidebar) &#123; sidebar.setPage(&quot;sidebar.html&quot;); &#125;); è¿™é‡Œè°ƒç”¨createåˆ›å»ºæ‰©å±•é¢æ¿ï¼ŒcreateSidebarPaneåˆ›å»ºä¾§è¾¹æ ï¼Œæ¯ä¸ªæ‰©å±•é¢æ¿å’Œä¾§è¾¹æ éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„HTMLé¡µé¢ï¼Œå…¶ä¸­å¯ä»¥åŒ…å«å…¶ä»–èµ„æºï¼ˆJavaScriptã€CSSã€å›¾åƒç­‰ï¼‰ã€‚ DevPanel DevPanelé¢æ¿æ˜¯ä¸€ä¸ªé¡¶çº§æ ‡ç­¾ï¼Œå’ŒElementã€Sourceã€Networkç­‰æ˜¯åŒä¸€çº§ï¼Œåœ¨ä¸€ä¸ªdevtools.jså¯ä»¥åˆ›å»ºå¤šä¸ªï¼›åœ¨Panel.htmlä¸­æˆ‘ä»¬å…ˆè®¾ç½®2ä¸ªæŒ‰é’®ï¼š 12345678910&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt;&lt;/head&gt; &lt;body&gt; &lt;div&gt;dev panel&lt;/div&gt; &lt;button id=&quot;check_jquery&quot;&gt;æ£€æŸ¥jquery&lt;/button&gt; &lt;button id=&quot;get_all_resources&quot;&gt;è·å–æ‰€æœ‰èµ„æº&lt;/button&gt; &lt;script src=&quot;panel.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; panel.jsä¸­æˆ‘ä»¬ä½¿ç”¨devtools.inspectedWindowçš„APIæ¥å’Œè¢«æ£€æŸ¥çª—å£è¿›è¡Œäº¤äº’ï¼š 1234567891011121314151617181920document.getElementById(&quot;check_jquery&quot;).addEventListener(&quot;click&quot;, function () &#123; chrome.devtools.inspectedWindow.eval( &quot;jQuery.fn.jquery&quot;, function (result, isException) &#123; if (isException) &#123; console.log(&quot;the page is not using jQuery&quot;); &#125; else &#123; console.log(&quot;The page is using jQuery v&quot; + result); &#125; &#125; );&#125;);document .getElementById(&quot;get_all_resources&quot;) .addEventListener(&quot;click&quot;, function () &#123; chrome.devtools.inspectedWindow.getResources(function (resources) &#123; console.log(resources); &#125;); &#125;); evalå‡½æ•°ä¸ºæ’ä»¶æä¾›äº†åœ¨è¢«æ£€æŸ¥é¡µé¢çš„ä¸Šä¸‹æ–‡ä¸­æ‰§è¡ŒJSä»£ç çš„èƒ½åŠ›ï¼Œè€ŒgetResourcesè·å–é¡µé¢ä¸Šæ‰€æœ‰åŠ è½½çš„èµ„æºï¼›æˆ‘ä»¬æ‰¾åˆ°ä¸€ä¸ªé¡µé¢ï¼Œç„¶åå³å‡»æ£€æŸ¥æ‰“å¼€è°ƒè¯•å·¥å…·ï¼Œå‘ç°åœ¨æœ€å³ä¾§å¤šäº†ä¸€ä¸ªDevPanelçš„tabé¡µï¼Œç‚¹å‡»æˆ‘ä»¬çš„è°ƒè¯•æŒ‰é’®ï¼Œé‚£ä¹ˆæ—¥å¿—åœ¨å“ªé‡Œèƒ½çœ‹åˆ°å‘¢ï¼Ÿ æˆ‘ä»¬åœ¨è°ƒè¯•å·¥å…·ä¸Šå³å‡»æ£€æŸ¥ï¼Œå†å¼€ä¸€ä¸ªè°ƒè¯•å·¥å…·ï¼Œè¿™ä¸ªå°±æ˜¯è°ƒè¯•å·¥å…·çš„è°ƒè¯•å·¥å…·ã€‚ã€‚ã€‚ã€‚ æœ€ç»ˆä¸¤ä¸ªè°ƒè¯•å·¥å…·çš„æ•ˆæœå¦‚ä¸‹ï¼š Sidebar å›åˆ°devtools.jsï¼Œæˆ‘ä»¬ä½¿ç”¨createSidebarPaneåˆ›å»ºäº†ä¾§è¾¹æ é¢æ¿ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºsidebar.htmlï¼Œæœ€ç»ˆå‘ˆç°åœ¨Elementé¢æ¿çš„æœ€å³ä¾§ï¼š æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åœ¨ä¾§è¾¹æ ä¸­æ˜¾ç¤ºå†…å®¹ï¼š HTMLå†…å®¹ã€‚è°ƒç”¨setPageä»¥æŒ‡å®šè¦åœ¨çª—æ ¼ä¸­æ˜¾ç¤ºçš„ HTML é¡µé¢ã€‚ JSONæ•°æ®ã€‚å°†JSONå¯¹è±¡ä¼ é€’ç»™setObject. JavaScriptè¡¨è¾¾å¼ã€‚å°†è¡¨è¾¾å¼ä¼ é€’ç»™setExpression é€šè¿‡JSè¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿è¿›è¡Œé¡µé¢æŸ¥è¯¢ï¼Œæ¯”å¦‚ï¼ŒæŸ¥è¯¢é¡µé¢ä¸Šæ‰€æœ‰çš„imgå…ƒç´ ï¼š 123456chrome.devtools.panels.elements.createSidebarPane( &quot;All Images&quot;, function (sidebar) &#123; sidebar.setExpression(&#x27;document.querySelectorAll(&quot;img&quot;)&#x27;, &quot;All Images&quot;); &#125;); å¦å¤–ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡elements.onSelectionChangedç›‘å¬äº‹ä»¶ï¼Œåœ¨Elementé¢æ¿é€‰ä¸­å…ƒç´ æ›´æ”¹åï¼Œæ›´æ–°ä¾§è¾¹æ é¢æ¿çš„çŠ¶æ€ï¼›ä¾‹å¦‚ï¼Œå¯ä»¥å°†æˆ‘ä»¬å…³å¿ƒçš„ä¸€äº›å…ƒç´ çš„æ ·å¼è¿›è¡Œå®æ—¶å±•ç¤ºåœ¨ä¾§è¾¹é¢æ¿ï¼Œæ–¹é¢æŸ¥çœ‹ï¼š 1234567891011121314151617181920212223242526272829303132var page_getProperties = function () &#123; if ($0 instanceof HTMLElement) &#123; return &#123; tag: $0.tagName.toLocaleLowerCase(), class: $0.classList, width: window.getComputedStyle($0)[&quot;width&quot;], height: window.getComputedStyle($0)[&quot;height&quot;], margin: window.getComputedStyle($0)[&quot;margin&quot;], padding: window.getComputedStyle($0)[&quot;padding&quot;], color: window.getComputedStyle($0)[&quot;color&quot;], fontSize: window.getComputedStyle($0)[&quot;fontSize&quot;], &#125;; &#125; else &#123; return &#123;&#125;; &#125;&#125;;chrome.devtools.panels.elements.createSidebarPane( &quot;Select Element&quot;, function (sidebar) &#123; function updateElementProperties() &#123; sidebar.setExpression( &quot;(&quot; + page_getProperties.toString() + &quot;)()&quot;, &quot;select element&quot; ); &#125; updateElementProperties(); chrome.devtools.panels.elements.onSelectionChanged.addListener( updateElementProperties ); &#125;); notifications Chromeæä¾›chrome.notificationsçš„APIæ¥æ¨é€æ¡Œé¢é€šçŸ¥ï¼›åŒæ ·ä¹Ÿéœ€è¦ç°åœ¨manifestä¸­æ³¨å†Œæƒé™ï¼š 12345&#123; &quot;permissions&quot;: [ &quot;notifications&quot; ],&#125; åœ¨backgroundè°ƒç”¨åˆ›å»ºå³å¯ 1234567// background.jschrome.notifications.create(null, &#123; type: &quot;basic&quot;, iconUrl: &quot;drink.png&quot;, title: &quot;å–æ°´å°åŠ©æ‰‹&quot;, message: &quot;çœ‹åˆ°æ­¤æ¶ˆæ¯çš„äººå¯ä»¥å’Œæˆ‘ä¸€èµ·æ¥å–ä¸€æ¯æ°´&quot;,&#125;); æ•ˆæœå¦‚ä¸‹ï¼š æ ¹æ®chrome.notificationsçš„APIï¼Œç¬”è€…åšäº†ä¸€ä¸ªå–æ°´å°åŠ©æ‰‹ï¼Œå’Œæˆ‘ä¸€èµ·æˆä¸ºä¸€å¤©å…«æ¯æ°´çš„äººå§ï¼ chrome.notificationsæ”¯æŒæ›´å¤šçš„å±æ€§è¯¦è§é™„å½•ã€‚ webRequest é€šè¿‡webRequestçš„APIå¯ä»¥å¯¹æµè§ˆå™¨å‘å‡ºçš„ä»»ä½•HTTPè¯·æ±‚è¿›è¡Œæ‹¦æˆªã€ç»„ç»‡æˆ–è€…ä¿®æ”¹ï¼›å¯ä»¥æ‹¦æˆªçš„è¯·æ±‚è¿˜åŒ…æ‹¬è„šæœ¬ã€æ ·å¼çš„GETè¯·æ±‚ä»¥åŠå›¾ç‰‡çš„é“¾æ¥ï¼›æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨manifestä¸­é…ç½®æƒé™æ‰èƒ½ä½¿ç”¨APIï¼š 12345678&#123; //... &quot;permissions&quot;: [ &quot;webRequest&quot;, &quot;webRequestBlocking&quot;, &quot;*://*.xieyufei.com/&quot; ],&#125; æƒé™ä¸­è¿˜éœ€è¦å£°æ˜æ‹¦æˆªè¯·æ±‚çš„URLï¼Œå¦‚æœä½ æƒ³æ‹¦æˆªæ‰€æœ‰çš„URLï¼Œå¯ä»¥ä½¿ç”¨*://*/*ï¼ˆä¸è¿‡ä¸æ¨èè¿™ä¹ˆåšï¼Œæ•°æ®ä¼šéå¸¸å¤šï¼‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä»¥é˜»å¡æ–¹å¼ä½¿ç”¨Webè¯·æ±‚APIï¼Œåˆ™éœ€è¦ç”¨åˆ°webRequestBlockingæƒé™ã€‚ æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å¯¹æ‹¦æˆªçš„è¯·æ±‚è¿›è¡Œå–æ¶ˆï¼š 1234567chrome.webRequest.onBeforeRequest.addListener( function (detail) &#123; return &#123;cancel: details.url.indexOf(&quot;example.com&quot;) != -1&#125;;; &#125;, &#123; urls: [&quot;&lt;all_urls&gt;&quot;] &#125;, [&quot;blocking&quot;]); ç»„ä»¶æ¶ˆæ¯é€šä¿¡ ä¸åŒç»„ä»¶ä¹‹é—´ç»å¸¸éœ€è¦è¿›è¡Œæ¶ˆæ¯é€šä¿¡æ¥è¿›è¡Œæ•°æ®çš„ä¼ é€’ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä»–ä»¬ä¹‹é—´æ˜¯å¦‚ä½•è¿›è¡Œé€šä¿¡çš„ï¼š backgroundå’Œpopupé€šä¿¡ backgroundå’Œpopupä¹‹é—´çš„é€šä¿¡æ¯”è¾ƒç®€å•ï¼Œåœ¨popupä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡extension.getBackgroundPageç›´æ¥è·å–åˆ°backgroundå¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨å¯¹è±¡ä¸Šçš„æ–¹æ³•å³å¯ï¼š 123// popup.jsvar bg = chrome.extension.getBackgroundPage();bg.someMethods() è€Œbackgroundè®¿é—®popupä¸Šåˆ™é€šè¿‡extension.getViewsæ¥è®¿é—®ï¼Œä¸è¿‡å‰ææ˜¯popupå¼¹æ¡†å·²ç»å±•ç¤ºï¼Œå¦åˆ™è·å–åˆ°çš„viewsæ˜¯ç©ºæ•°ç»„ï¼š 123456//background.jsvar views = chrome.extension.getViews(&#123;type:&#x27;popup&#x27;&#125;);if(views.length &gt; 0) &#123; // ç›¸å½“äºpopupçš„windowså¯¹è±¡ console.log(views[0].location.href);&#125; backgroundå’Œå†…å®¹è„šæœ¬é€šä¿¡ åœ¨backgroundå’Œå†…å®¹è„šæœ¬é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç®€å•ç›´æ¥çš„runtime.sendMessageæˆ–è€…tabs.sendMessageå‘é€æ¶ˆæ¯ï¼Œæ¶ˆæ¯å†…å®¹å¯ä»¥æ˜¯JSONæ•°æ® ä»å†…å®¹è„šæœ¬å‘é€æ¶ˆæ¯å¦‚ä¸‹ï¼š 1234567// content-script.jschrome.runtime.sendMessage( &#123; greeting: &quot;helloï¼Œæˆ‘æ˜¯content-scriptï¼Œä¸»åŠ¨å‘æ¶ˆæ¯ç»™åå°ï¼&quot; &#125;, function (response) &#123; console.log(&quot;æ”¶åˆ°æ¥è‡ªåå°çš„å›å¤ï¼š&quot; + response); &#125;); è€Œä»åå°å‘é€æ¶ˆæ¯åˆ°å†…å®¹è„šæœ¬æ—¶ï¼Œç”±äºæœ‰å¤šä¸ªæ ‡ç­¾é¡µï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šå‘é€åˆ°æŸä¸ªæ ‡ç­¾é¡µï¼š 12345678910// background.jschrome.tabs.query(&#123; active: true, currentWindow: true &#125;, function (tabs) &#123; chrome.tabs.sendMessage( tabs[0].id, &#123; greeting: &quot;helloï¼Œæˆ‘æ˜¯åå°ï¼Œä¸»åŠ¨å‘æ¶ˆæ¯ç»™content-script&quot; &#125;, function (response) &#123; console.log(response.farewell); &#125; );&#125;); è€Œä¸ç®¡æ˜¯åœ¨åå°ï¼Œè¿˜æ˜¯åœ¨å†…å®¹è„šæœ¬ä¸­ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨runtime.onMessageç›‘å¬æ¶ˆæ¯çš„æ¥æ”¶äº‹ä»¶ï¼Œä¸åŒçš„æ˜¯å›è°ƒå‡½æ•°ä¸­çš„senderï¼Œæ ‡è¯†ä¸åŒçš„å‘é€æ–¹ï¼š 123456789chrome.runtime.onMessage.addListener( function(request, sender, sendResponse) &#123; console.log(sender.tab ? &quot;from a content script:&quot; + sender.tab.url : &quot;from the extension&quot;); if (request.greeting.indexOf(&quot;hello&quot;) !== -1)&#123; sendResponse(&#123;farewell: &quot;goodbye&quot;&#125;); &#125; &#125;); é•¿é“¾æ¥ ä¸Šé¢çš„runtime.sendMessageå’Œtabs.sendMessageéƒ½å±äºçŸ­é“¾æ¥ï¼Œæ‰€è°“çš„çŸ­è¿æ¥ï¼Œå°±æ˜¯ç±»ä¼¼äºHTTPè¯·æ±‚ï¼Œå¦‚æœæ¥æ”¶æ–¹ä¸åœ¨çº¿ï¼Œå°±ä¼šå‡ºç°è¯·æ±‚å¤±è´¥çš„æƒ…å†µï¼›ä½†æœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦æŒç»­å¯¹è¯ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°é•¿é“¾æ¥ï¼Œç±»ä¼¼äºwebsocketï¼Œå¯ä»¥åœ¨é€šä¿¡åŒæ–¹ä¹‹é—´è¿›è¡ŒæŒä¹…é“¾æ¥ã€‚ é•¿é“¾æ¥ä½¿ç”¨runtime.connectæˆ–tabs.connectæ¥æ‰“å¼€é•¿ç”Ÿå‘½å‘¨æœŸé€šé“ï¼Œé€šé“å¯ä»¥æœ‰ä¸€ä¸ªåç§°ï¼Œä»¥ä¾¿åŒºåˆ†ä¸åŒç±»å‹çš„è¿æ¥ã€‚ 12345678910// content-script.js// è®¾ç½®é€šé“åç§°var port = chrome.runtime.connect(&#123;name: &quot;knockknock&quot;&#125;);port.postMessage(&#123;joke: &quot;Knock knock&quot;&#125;);port.onMessage.addListener(function(msg) &#123; if (msg.question == &quot;Who&#x27;s there?&quot;) port.postMessage(&#123;answer: &quot;Madame&quot;&#125;); else if (msg.question == &quot;Madame who?&quot;) port.postMessage(&#123;answer: &quot;Madame... Bovary&quot;&#125;);&#125;); ä»backgroundå‘å†…å®¹è„šæœ¬å‘é€æ¶ˆæ¯ä¹Ÿç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºéœ€è¦æŒ‡å®šè¿æ¥çš„tabé¡µï¼Œå°†runtime.connectæ”¹ä¸ºtabs.connectã€‚ åœ¨æ¥æ”¶ç«¯ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®onConnectçš„äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“å‘é€ç«¯è°ƒç”¨connectè¿›è¡Œè¿æ¥æ—¶è§¦å‘è¯¥äº‹ä»¶ï¼Œä»¥åŠé€šè¿‡è¿æ¥å‘é€å’Œæ¥æ”¶æ¶ˆæ¯çš„portå¯¹è±¡ï¼š 123456789101112//background.jschrome.runtime.onConnect.addListener(function(port) &#123; console.assert(port.name == &quot;knockknock&quot;); port.onMessage.addListener(function(msg) &#123; if (msg.joke == &quot;Knock knock&quot;) port.postMessage(&#123;question: &quot;Who&#x27;s there?&quot;&#125;); else if (msg.answer == &quot;Madame&quot;) port.postMessage(&#123;question: &quot;Madame who?&quot;&#125;); else if (msg.answer == &quot;Madame... Bovary&quot;) port.postMessage(&#123;question: &quot;I don&#x27;t get it.&quot;&#125;); &#125;);&#125;); å®ç”¨æ’ä»¶æ¨è ä»‹ç»äº†è¿™ä¹ˆå¤šæ’ä»¶çš„å¼€å‘ï¼Œæˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹åº”ç”¨å¸‚åœºä¸Šçš„ä¼˜ç§€æ’ä»¶ï¼Œè¿™äº›æ’ä»¶èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åœ¨å¹³æ—¶çš„å¼€å‘ä¸­æé«˜ç”Ÿäº§æ•ˆç‡ã€‚ Adblock Plus Adblock Plusæ˜¯ä¸€æ¬¾å¯ä»¥å±è”½å¹¿å‘Šä»¥åŠä»»ä½•ä½ æƒ³å±è”½å…ƒç´ çš„è½¯ä»¶ï¼›å®ƒä¸ä»…å†…ç½®äº†ä¸€äº›è¿‡æ»¤è§„åˆ™ï¼Œå¯ä»¥è‡ªåŠ¨å±è”½å¹¿å‘Šï¼Œè¿˜å¯ä»¥è‡ªè¡Œæ·»åŠ å±è”½å†…å®¹ã€‚ é€‰æ‹©æ‹¦æˆªå…ƒç´ ï¼Œæ·¡é»„è‰²æ¡†ä½çš„å†…å®¹å°±æ˜¯æ‹¦æˆªçš„å†…å®¹ Axure RP Extension for Chrome Axure RP Extension for Chromeæ˜¯åŸå‹è®¾è®¡å·¥å…·Axure RPçš„Chromeæµè§ˆå™¨æ’ä»¶ï¼Œchromeæµè§ˆå™¨æ‰“å¼€axureç”Ÿæˆçš„HTMLé™æ€æ–‡ä»¶é¡µé¢é¢„è§ˆæ‰“å¼€å¦‚ä¸‹æŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºchromeæµè§ˆå™¨æ²¡æœ‰å®‰è£…Axureæ’ä»¶å¯¼è‡´çš„ã€‚ FeHelperå‰ç«¯åŠ©æ‰‹ FEåŠ©æ‰‹æ˜¯ç”±å›½äººå¼€å‘çš„ä¸€æ¬¾å‰ç«¯å·¥å…·é›†åˆçš„å°æ’ä»¶ï¼Œæ’ä»¶åŠŸèƒ½æ¯”è¾ƒå…¨é¢ï¼šåŒ…æ‹¬å­—ç¬¦ä¸²ç¼–è§£ç ã€ä»£ç å‹ç¼©ã€ç¾åŒ–ã€JSONæ ¼å¼åŒ–ã€æ­£åˆ™è¡¨è¾¾å¼ã€æ—¶é—´è½¬æ¢å·¥å…·ã€äºŒç»´ç ç”Ÿæˆä¸è§£ç ã€ç¼–ç è§„èŒƒæ£€æµ‹ã€é¡µé¢æ€§èƒ½æ£€æµ‹ã€é¡µé¢å–è‰²ã€Ajaxæ¥å£è°ƒè¯•ã€‚ Momentum Momentumæ’ä»¶æ˜¯ä¸€æ¬¾è‡ªåŠ¨æ›´æ¢å£çº¸ï¼Œè‡ªå¸¦æ—¶é’Ÿï¼Œä»»åŠ¡æ—¥å†å’Œå·¥ä½œæ¸…å•çš„chromeæµè§ˆå™¨æ’ä»¶ã€‚å®˜æ–¹çš„è§£é‡Šå°±æ˜¯ï¼šæ›¿æ¢ä½  Chrome æµè§ˆå™¨é»˜è®¤çš„â€œæ ‡ç­¾é¡µâ€ã€‚é‡Œé¢çš„å›¾ç‰‡å…¨éƒ¨æ¥è‡ª500PXé‡Œé¢çš„é«˜æ¸…å›¾ï¼Œæ— å¹¿å‘Šï¼Œæ— å¼¹çª—ï¼Œéå¸¸é€‚åˆç¬”è®°æœ¬ä½¿ç”¨ï¼Œè®©è£…é€¼å†ä¸Šæ–°å°é˜¶ã€‚è®©æˆ‘æ¥æ„Ÿå—ä¸‹å‡ºè‡ªç»†èŠ‚ï¼Œè§¦åŠå¿ƒçµçš„ç¾ã€‚ Octotree åœ¨Githubä¸ŠæŸ¥çœ‹æºä»£ç çš„ä½“éªŒååˆ†ç³Ÿç³•ï¼Œå°¤å…¶æ˜¯ä»ä¸€ä¸ªç›®å½•è·³è½¬åˆ°å¦ä¸€ä¸ªç›®å½•çš„æ—¶å€™ï¼Œéå¸¸éº»çƒ¦ã€‚Octotreeæ˜¯ä¸€æ¬¾chromeæ’ä»¶ï¼Œç”¨äºå°†Githubé¡¹ç›®ä»£ç ä»¥æ ‘å½¢æ ¼å¼å±•ç¤ºï¼Œè€Œä¸”åœ¨å±•ç¤ºçš„åˆ—è¡¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä¸‹è½½æŒ‡å®šçš„æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦ä¸‹è½½æ•´ä¸ªé¡¹ç›®ã€‚ OneTab Chromeæµè§ˆå™¨å¾ˆå¥½ç”¨ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¾—ä¸æ‰¿è®¤çš„ï¼›ä½†æ˜¯äººæ— å®Œäººï¼Œä½•å†µä¸€ä¸ªæµè§ˆå™¨å‘¢ï¼Ÿä¸€ç›´ä»¥æ¥ï¼ŒChromeå ç”¨å†…å­˜è¿™æ ·çš„â€œåƒç›¸â€å°±å¾ˆè®©äººå¤´ç–¼ã€‚ OneTabæ˜¯ä¸€æ¬¾å¯ä»¥åœ¨ç”¨æˆ·æ‰“å¼€è¿‡å¤šChromeæ ‡ç­¾é¡µè€Œâ€œä¸çŸ¥æ‰€æªâ€çš„æ—¶å€™ç‚¹å‡»OneTabæ’ä»¶ä¸€é”®é‡Šæ”¾Chromeæ ‡ç­¾é¡µå†…å­˜çš„è°·æ­Œæµè§ˆå™¨æ’ä»¶ï¼ŒOneTabæ’ä»¶å¹¶ä¸æ˜¯åƒå…³é—­æµè§ˆå™¨é‚£æ ·ç›´æ¥æŠŠæ‰€æœ‰çš„æ ‡ç­¾é¡µéƒ½å…³é—­æ‰ï¼Œå®ƒä¼šå…ˆæŠŠç°æœ‰çš„æ ‡ç­¾é¡µéƒ½ç¼“å­˜èµ·æ¥ï¼Œç„¶åä½¿ç”¨ä¸€é”®å…³é—­æ‰€æœ‰æ ‡ç­¾é¡µçš„åŠŸèƒ½å¼¹å‡ºåªæœ‰ä¸€ä¸ªæ¢å¤çª—å£çš„æ–°æ ‡ç­¾é¡µï¼Œåœ¨è¿™ä¸ªOneTabæ’ä»¶çš„æ ‡ç­¾é¡µä¸­ç”¨æˆ·å¯ä»¥é€‰æ‹©æ¢å¤å…¶ä¸­æœ‰ç”¨çš„Chromeæ ‡ç­¾é¡µè€Œæ”¾å¼ƒå…¶ä»–åº”è¯¥å…³é—­çš„æ ‡ç­¾é¡µã€‚ åœ¨æ¢å¤æ ‡ç­¾é¡µçš„æ—¶å€™ï¼ŒOneTabæ’ä»¶ä¼šä»¥æ–°æ ‡ç­¾é¡µçš„æ–¹å¼å»æ¢å¤ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥ç®€å•åœ°ç‚¹å‡»å‡ æ¬¡é¼ æ ‡éƒ½å¯ä»¥æŠŠæœ‰ç”¨çš„æ ‡ç­¾éƒ½æ‰¾å‡ºæ¥ä¸€èµ·æ¢å¤ï¼Œå½“ç”¨æˆ·æ‰“å¼€çš„Chromeæ ‡ç­¾é¡µè¿‡å¤šçš„æ—¶å€™ä½¿ç”¨OneTabæ’ä»¶å¤§çº¦èƒ½å¤ŸèŠ‚çœç”¨æˆ·95%çš„ç³»ç»Ÿå†…å­˜ï¼Œè¿˜å¯ä»¥è®©ç”¨æˆ·åœ¨æ ‡ç­¾é¡µå˜å°çš„æƒ…å†µä¸‹æ›´åŠ æ¸…æ™°åœ°å…³æ³¨è‡ªå·±åº”è¯¥å…³æ³¨çš„Chromeæ ‡ç­¾é¡µã€‚ Tampermonkey Tampermonkeyï¼ˆä¿—ç§°æ²¹çŒ´ï¼‰æ˜¯ä¸€æ¬¾å…è´¹çš„æµè§ˆå™¨æ‰©å±•å’Œæœ€ä¸ºæµè¡Œçš„ç”¨æˆ·è„šæœ¬ç®¡ç†å™¨ã€‚è™½ç„¶æœ‰äº›å—æ”¯æŒçš„æµè§ˆå™¨æ‹¥æœ‰åŸç”Ÿçš„ç”¨æˆ·è„šæœ¬æ”¯æŒï¼Œä½† Tampermonkeyå°†åœ¨æ‚¨çš„ç”¨æˆ·è„šæœ¬ç®¡ç†æ–¹é¢æä¾›æ›´å¤šçš„ä¾¿åˆ©ã€‚ å®ƒæä¾›äº†è¯¸å¦‚ä¾¿æ·è„šæœ¬å®‰è£…ã€è‡ªåŠ¨æ›´æ–°æ£€æŸ¥ã€æ ‡ç­¾ä¸­çš„è„šæœ¬è¿è¡ŒçŠ¶å†µé€Ÿè§ˆã€å†…ç½®çš„ç¼–è¾‘å™¨ç­‰ä¼—å¤šåŠŸèƒ½ï¼Œ åŒæ—¶Tampermonkeyè¿˜æœ‰å¯èƒ½æ­£å¸¸è¿è¡ŒåŸæœ¬å¹¶ä¸å…¼å®¹çš„è„šæœ¬ã€‚ é€šè¿‡ç»™ç®¡ç†å™¨å®‰è£…å„ç±»è„šæœ¬ï¼Œå¯ä»¥è®©å¤§éƒ¨åˆ† HTML ä¸ºä¸»çš„ç½‘é¡µæ›´æ–¹ä¾¿æ˜“ç”¨ï¼Œæ¯”å¦‚ï¼šå…¨é€Ÿä¸‹è½½ç½‘ç›˜æ–‡ä»¶ã€å»å¹¿å‘Šã€æ‚¬åœæ˜¾ç¤ºå¤§å›¾ã€Flash/HTML5 æ’­æ”¾å™¨è½¬æ¢ã€é˜…è¯»æ¨¡å¼ç­‰ã€‚æœ‰ç‚¹åƒç»™Chromeçš„æ’ä»¶è£…ä¸Šæ’ä»¶ï¼ˆè¿™é‡Œåˆæ˜¯ä¸€ä¸ªå¥—å¨ƒï¼‰ã€‚ Web Vitals å¤šå¹´æ¥ï¼ŒGoogle æä¾›äº†å¾ˆå¤šå·¥å…·ï¼šLighthouse, Chrome DevTools, PageSpeed Insights, Search Consoleâ€™s Speed Report ç­‰æ¥è¡¡é‡å’ŒæŠ¥å‘Šæ€§èƒ½ã€‚è€Œå…¶ä¸­çš„è¡¡é‡æ ‡å‡†éƒ½å¾ˆéš¾å­¦ä¹ å’Œä½¿ç”¨ï¼ŒWeb Vitalsè®¡åˆ’çš„ç›®çš„å°±æ˜¯ç®€åŒ–åœºæ™¯ï¼Œé™ä½å­¦ä¹ æˆæœ¬ï¼Œå¹¶å¸®åŠ©ç«™ç‚¹å…³æ³¨æœ€é‡è¦çš„æŒ‡æ ‡ Web Vitalsæ˜¯Googleå‘èµ·çš„ï¼Œæ—¨åœ¨æä¾›å„ç§è´¨é‡ä¿¡å·çš„ç»Ÿä¸€æŒ‡å—ï¼Œå…¶å¯è·å–ä¸‰ä¸ªå…³é”®æŒ‡æ ‡ï¼ˆCLSã€FIDã€LCPï¼‰ï¼š é€šè¿‡åœ¨æµè§ˆå™¨å®‰è£…Web Vitalsæ’ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨é¡µé¢åŠ è½½å®Œæˆåå¾ˆæ–¹ä¾¿çš„æŸ¥çœ‹è¿™ä¸‰ä¸ªæŒ‡æ ‡çš„æƒ…å†µã€‚ Allow CORS æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°æ¥å£è·¨åŸŸçš„é—®é¢˜ï¼Œé€šè¿‡Allow CORS: Access-Control-Allow-Originè¿™ä¸ªæ’ä»¶ï¼Œå¯ä»¥å…è®¸æˆ‘ä»¬åœ¨æ¥å£çš„å“åº”å¤´è½»æ¾æ‰§è¡Œè·¨åŸŸè¯·æ±‚ï¼Œåªéœ€è¦æ¿€æ´»æ’ä»¶å¹¶ä¸”æ‰§è¡Œã€‚ å®‰è£…æ’ä»¶åï¼Œé»˜è®¤æ˜¯ä¸ä¼šæ·»åŠ è·¨åŸŸå“åº”å¤´çš„ï¼Œç‚¹å‡»æ’ä»¶å¼¹æ¡†çš„Cå­—æ¯æŒ‰é’®ï¼ŒæŒ‰é’®å˜æˆæ©™è‰²æ’ä»¶æ¿€æ´»ã€‚ Window Resizer Window Resizeræ˜¯ä¸€æ¬¾å¯ä»¥è®¾ç½®æµè§ˆå™¨çª—å£å¤§å°çš„Chromeæ‰©å±•ï¼Œç”¨æˆ·å®‰è£…äº†window resizeræ’ä»¶åå¯ä»¥å¿«é€Ÿè°ƒèŠ‚chromeçš„çª—å£å¤§å°ï¼Œç”¨æˆ·å¯ä»¥å°†çª—å£è°ƒèŠ‚ä¸º320x480ã€480x800ã€1024x768ç­‰å¤§å°ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå®šä¹‰æµè§ˆå™¨çª—å£çš„å°ºå¯¸ã€‚ ä»¥ä¸Šæ‰€æœ‰æ’ä»¶å’Œå·¥å…·æ•¬è¯·å…³æ³¨å…¬ä¼—å·ï¼šå‰ç«¯å£¹è¯»åï¼Œå›å¤å…³é”®å­—Chromeæ’ä»¶å³å¯è·å–ã€‚ é™„å½•notificationså¯¹è±¡å±æ€§ Name Type Description type string æ˜¾ç¤ºçš„é€šçŸ¥ç±»å‹ï¼Œâ€basicâ€, â€œimageâ€, â€œlistâ€, or â€œprogressâ€ title string é€šçŸ¥çš„æ ‡é¢˜ message string é€šçŸ¥çš„ä¸»ä½“å†…å®¹ contextMessage string é€šçŸ¥çš„å¤‡é€‰å†…å®¹ buttons array of object æœ€å¤šä¸¤ä¸ªé€šçŸ¥æ“ä½œæŒ‰é’®çš„æ–‡æœ¬å’Œå›¾æ ‡ã€‚ iconUrl string å›¾æ ‡çš„URL imageUrl string â€œimageâ€ç±»å‹çš„é€šçŸ¥çš„å›¾ç‰‡çš„URL eventTime double é€šçŸ¥çš„æ—¶é—´æˆ³ï¼Œå•ä½ms items array of object å¤šé¡¹ç›®é€šçŸ¥çš„é¡¹ç›®ã€‚Mac OS Xä¸Šçš„ç”¨æˆ·åªèƒ½çœ‹åˆ°ç¬¬ä¸€é¡¹ã€‚ progress integer å½“å‰çš„è¿›åº¦ï¼Œæœ‰æ•ˆèŒƒå›´0~100 isClickable boolean é€šçŸ¥çª—å£æ˜¯å¦å“åº”ç‚¹å‡»äº‹ä»¶ contextMenuå¯¹è±¡å±æ€§ Name Type Description type string [â€œnormalâ€, â€œcheckboxâ€, â€œradioâ€, â€œseparatorâ€] èœå•é¡¹çš„ç±»å‹ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™é»˜è®¤ä¸ºâ€™normalâ€™ï¼ˆæ™®é€šï¼‰ id string å”¯ä¸€æ ‡å¿—ç¬¦ï¼Œå¯¹äºäº‹ä»¶é¡µé¢æ¥è¯´å¿…é¡»å­˜åœ¨ï¼Œä¸èƒ½ä¸åŒä¸€æ‰©å±•ç¨‹åºä¸­çš„å…¶å®ƒæ ‡å¿—ç¬¦ç›¸åŒã€‚ title string æ˜¾ç¤ºåœ¨èœå•é¡¹ä¸­çš„æ–‡å­—ï¼Œé™¤éç±»å‹æ˜¯â€™separatorâ€™ï¼ˆåˆ†éš”ç¬¦ï¼‰è¯¥å‚æ•°æ˜¯å¿…é€‰çš„ã€‚ å½“ä¸Šä¸‹æ–‡ä¸ºâ€™selectionâ€™ï¼ˆé€‰å®šå†…å®¹ï¼‰æ—¶ï¼Œæ‚¨å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨%sæ¥æ˜¾ç¤ºé€‰ä¸­çš„æ–‡æœ¬ã€‚ checked boolean å•é€‰æˆ–å¤é€‰èœå•é¡¹çš„åˆå§‹çŠ¶æ€ contexts enumerated string [â€œallâ€, â€œpageâ€, â€œframeâ€, â€œselectionâ€, â€œlinkâ€, â€œeditableâ€, â€œimageâ€, â€œvideoâ€, â€œaudioâ€] åˆ—å‡ºè¯¥èœå•é¡¹å°†ä¼šå‡ºç°åœ¨å“ªäº›ä¸Šä¸‹æ–‡ä¸­ï¼ŒåŒ…æ‹¬â€allâ€ï¼ˆå…¨éƒ¨ï¼‰ã€â€pageâ€ï¼ˆé¡µé¢ï¼‰ã€â€frameâ€ï¼ˆæ¡†æ¶ï¼‰ã€â€selectionâ€ï¼ˆé€‰å®šå†…å®¹ï¼‰ã€â€linkâ€ï¼ˆé“¾æ¥ï¼‰ã€â€editableâ€ï¼ˆå¯ç¼–è¾‘å†…å®¹ï¼‰ã€â€imageâ€ï¼ˆå›¾ç‰‡ï¼‰ã€â€videoâ€ï¼ˆè§†é¢‘ï¼‰ã€â€audioâ€ï¼ˆéŸ³é¢‘ï¼‰ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆ™é»˜è®¤ä¸ºpageï¼ˆé¡µé¢ï¼‰ onclick function èœå•é¡¹å•å‡»æ—¶çš„å›è°ƒå‡½æ•° parentId integer or string çˆ¶èœå•é¡¹æ ‡è¯†ç¬¦ documentUrlPatterns array of string å°†è¯¥èœå•é¡¹é™åˆ¶åœ¨URLåŒ¹é…ç»™å®šè¡¨è¾¾å¼çš„æ–‡æ¡£ä¸­æ˜¾ç¤º targetUrlPatterns array of string å…è®¸æ‚¨åŸºäºimg/audio/videoæ ‡ç­¾çš„srcå±æ€§ä»¥åŠ a æ ‡ç­¾çš„hrefå±æ€§è¿‡æ»¤ enabled boolean è¯¥å³é”®èœå•é¡¹æ˜¯å¦å¯ç”¨æˆ–ç¦ç”¨ æ’ä»¶æƒé™åˆ—è¡¨ æƒé™åç§° æè¿° activeTab è¯·æ±‚æ ¹æ®activeTabè§„èŒƒå‘æ‰©å±•æˆäºˆæƒé™ã€‚ alarms æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.alarms API çš„æƒé™ã€‚ background ä½¿ Chrome æ—©å¯åŠ¨æ™šå…³é—­ï¼Œä»è€Œå»¶é•¿æ‰©å±•ç¨‹åºçš„ä½¿ç”¨å¯¿å‘½ã€‚ bookmarks æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.bookmarks API çš„æƒé™ã€‚ browsingData æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.browsingData API çš„æƒé™ã€‚ certificateProvider æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.certificateProvider API çš„æƒé™ã€‚ clipboardRead å¦‚æœæ‰©å±•ä½¿ç”¨document.execCommand(â€˜pasteâ€™). clipboardWrite è¡¨ç¤ºæ‰©å±•ä½¿ç”¨document.execCommand(â€˜copyâ€™)æˆ–document.execCommand(â€˜cutâ€™)ã€‚ contentSettings æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.contentSettings API çš„æƒé™ã€‚ contextMenus ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.contextMenus APIã€‚ cookies å…è®¸æ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.cookies APIã€‚ debugger æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.debugger API çš„æƒé™ã€‚ declarativeContent æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.declarativeContent API çš„æƒé™ã€‚ declarativeNetRequest ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.declarativeNetRequest APIã€‚ declarativeNetRequestFeedback æˆäºˆæ‰©å±•è®¿é—®chrome.declarativeNetRequest API ä¸­çš„äº‹ä»¶å’Œæ–¹æ³•çš„æƒé™ï¼Œè¿™äº›äº‹ä»¶å’Œæ–¹æ³•è¿”å›æœ‰å…³åŒ¹é…çš„å£°æ˜æ€§è§„åˆ™çš„ä¿¡æ¯ã€‚ declarativeWebRequest æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.declarativeWebRequest API çš„æƒé™ã€‚ desktopCapture æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.desktopCapture API çš„æƒé™ã€‚ documentScan æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.documentScan API çš„æƒé™ã€‚ downloads æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.downloads API çš„æƒé™ã€‚ enterprise.deviceAttributes æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.enterprise.deviceAttributes API çš„æƒé™ã€‚ enterprise.hardwarePlatform ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.enterprise.hardwarePlatform APIã€‚ enterprise.networkingAttributes æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.enterprise.networkingAttributes API çš„æƒé™ã€‚ enterprise.platformKeys æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.enterprise.platformKeys API çš„æƒé™ã€‚ experimental å¦‚æœæ‰©å±•ç¨‹åºä½¿ç”¨ä»»ä½•chrome.experimental.* APIsåˆ™æ˜¯å¿…éœ€çš„ã€‚ fileBrowserHandler æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.fileBrowserHandler API çš„æƒé™ã€‚ fileSystemProvider æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.fileSystemProvider API çš„æƒé™ã€‚ fontSettings æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.fontSettings API çš„æƒé™ã€‚ gcm ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.gcm APIã€‚ geolocation å…è®¸æ‰©å±•ç¨‹åºåœ¨ä¸æç¤ºç”¨æˆ·è®¸å¯çš„æƒ…å†µä¸‹ä½¿ç”¨åœ°ç†å®šä½ APIã€‚ history æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.history API çš„æƒé™ã€‚ identity æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.identity API çš„æƒé™ã€‚ idle æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.idle API çš„æƒé™ã€‚ loginState æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.loginState API çš„æƒé™ã€‚ management æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.management API çš„æƒé™ã€‚ nativeMessaging ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®æœ¬æœºæ¶ˆæ¯ä¼ é€’ APIã€‚ notifications æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.notifications API çš„æƒé™ã€‚ pageCapture æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.pageCapture API çš„æƒé™ã€‚ platformKeys æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.platformKeys API çš„æƒé™ã€‚ power æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.power API çš„æƒé™ã€‚ printerProvider æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.printerProvider API çš„æƒé™ã€‚ printing æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.printing API çš„æƒé™ã€‚ printingMetrics æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.printingMetrics API çš„æƒé™ã€‚ privacy æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.privacy API çš„æƒé™ã€‚ processes æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.processes API çš„æƒé™ã€‚ proxy æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.proxy API çš„æƒé™ã€‚ scripting æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.scripting API çš„æƒé™ã€‚ search æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.search API çš„æƒé™ã€‚ sessions æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.sessions API çš„æƒé™ã€‚ signedInDevices æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.signedInDevices API çš„æƒé™ã€‚ storage æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.storage API çš„æƒé™ã€‚ system.cpu æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.system.cpu API çš„æƒé™ã€‚ system.display ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.system.display APIã€‚ system.memory ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.system.memory APIã€‚ system.storage æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.system.storage API çš„æƒé™ã€‚ tabCapture æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.tabCapture API çš„æƒé™ã€‚ tabGroups æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.tabGroups API çš„æƒé™ã€‚ tabs ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®Tabå¤šä¸ªAPIä½¿ç”¨çš„å¯¹è±¡çš„ç‰¹æƒå­—æ®µï¼ŒåŒ…æ‹¬chrome.tabså’Œchrome.windowsã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‚¨çš„æ‰©å±•ç¨‹åºä¸éœ€è¦å£°æ˜â€™tabsâ€™ä½¿ç”¨è¿™äº›APIçš„æƒé™ã€‚ topSites æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.topSites API çš„æƒé™ã€‚ tts æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.tts API çš„æƒé™ã€‚ ttsEngine æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.ttsEngine API çš„æƒé™ã€‚ unlimitedStorage ä¸ºå­˜å‚¨å®¢æˆ·ç«¯æ•°æ®æä¾›æ— é™é…é¢ï¼Œä¾‹å¦‚æ•°æ®åº“å’Œæœ¬åœ°å­˜å‚¨æ–‡ä»¶ã€‚æ²¡æœ‰æ­¤æƒé™ï¼Œæ‰©å±•ç¨‹åºä»…é™äº 5 MB çš„æœ¬åœ°å­˜å‚¨ç©ºé—´ã€‚ vpnProvider æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.vpnProvider API çš„æƒé™ã€‚ wallpaper ä½¿æ‚¨çš„æ‰©å±•ç¨‹åºå¯ä»¥è®¿é—®chrome.wallpaper APIã€‚ webNavigation æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.webNavigation API çš„æƒé™ã€‚ webRequest æˆäºˆæ‚¨çš„æ‰©å±•ç¨‹åºè®¿é—®chrome.webRequest API çš„æƒé™ã€‚ webRequestBlocking å¦‚æœæ‰©å±•ä»¥é˜»å¡æ–¹å¼ä½¿ç”¨chrome.webRequest APIï¼Œåˆ™ä¸ºå¿…éœ€ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æµè§ˆå™¨","slug":"Browser","permalink":"https://xieyufei.com/tags/Browser/"},{"name":"æ’ä»¶","slug":"Plugin","permalink":"https://xieyufei.com/tags/Plugin/"}]},{"title":"æ·±å…¥å­¦ä¹ React Nativeä¹‹æ ·å¼å¸ƒå±€","date":"2021-10-26T05:14:15.000Z","path":"2021/10/26/React-Native-Style.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬åœ¨å®‰å“å’ŒiOSç¯å¢ƒä¸‹åˆ†åˆ«éƒ½é…ç½®å¥½äº†RNçš„å¼€å‘ç¯å¢ƒï¼Œåˆæ­¥æ­å»ºäº†é¡¹ç›®å¹¶ä¸”è¿›è¡Œè°ƒè¯•ï¼›è¿™ä¸€ç« ä¸­æˆ‘ä»¬æ­£å¼è¿›å…¥ä»£ç ç¯èŠ‚ï¼Œå…ˆä»APPçš„æ ·å¼å¸ƒå±€å¼€å§‹ï¼Œå­¦ä¹ åœ¨ç§»åŠ¨ç«¯æ˜¯å¦‚ä½•æ¥ç¼–å†™æ ·å¼çš„ï¼Œä»¥åŠå’ŒWebç«¯ä¹‹é—´çš„åŒºåˆ«ã€‚ ä¸€æ¬¾å¥½çš„APPç¦»ä¸å¼€ä¸€ä¸ªä¼˜é›…çš„æ ·å¼å’Œåˆç†çš„å¸ƒå±€ï¼›åœ¨ç§»åŠ¨ç«¯ï¼Œç”¨æˆ·çš„æ³¨æ„åŠ›éƒ½é›†ä¸­åœ¨æ‰‹æŒå¤§å°çš„å±å¹•ä¸Šï¼Œå› æ­¤å¦‚æœæ ·å¼ç¨å¾®æœ‰ç‚¹ç‘•ç–µï¼Œå¾ˆå®¹æ˜“å°±å½±å“ç¾è§‚ï¼Œä»¥åŠç”¨æˆ·ä½“éªŒã€‚è€Œä¸”ç§»åŠ¨ç«¯çš„ç»„ä»¶éƒ½å¸ƒå±€åœ¨ç›¸å¯¹è¾ƒå°çš„ç”»å¸ƒä¸Šï¼Œç”±äºé¡µé¢å¤æ‚ï¼ŒåŒæ—¶ç§»åŠ¨ç«¯è®¾å¤‡å°ºå¯¸ä¼—å¤šï¼Œå› æ­¤åˆç†çš„é¡µé¢å¸ƒå±€å°±æ˜¾å¾—ååˆ†é‡è¦äº†ã€‚ CSSæ ·å¼ åœ¨React Nativeä¸­ç¼–å†™cssæ ·å¼å’Œåœ¨ç½‘é¡µä¸­ç¼–å†™æ ·å¼æ²¡æœ‰å¤ªå¤§çš„ä¸åŒï¼Œéµå¾ªäº†webä¸Šçš„csså‘½åï¼Œä¸è¿‡æŒ‰ç…§JSçš„è¯­æ³•ç”±ä¸­åˆ’çº¿æ”¹ä¸ºäº†å°é©¼å³°çš„å½¢å¼ï¼Œæ¯”å¦‚background-coloræˆ‘ä»¬åœ¨RNä¸­éœ€è¦å†™æˆbackgroundColorã€‚ æ‰€æœ‰çš„æ ¸å¿ƒç»„ä»¶æ¥æ”¶styleæ ·å¼å±æ€§ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ™®é€šçš„csså¯¹è±¡ï¼š 12345&lt;View&gt; &lt;View style=&#123;&#123;width: 50, height: 50, backgroundColor: &#x27;powderblue&#x27;&#125;&#125; /&gt; &lt;View style=&#123;&#123;width: 100, height: 100, backgroundColor: &#x27;skyblue&#x27;&#125;&#125; /&gt; &lt;View style=&#123;&#123;width: 320, height: 150, backgroundColor: &#x27;steelblue&#x27;&#125;&#125; /&gt;&lt;/View&gt; åœ¨å®é™…å¼€å‘ä¸­æ ·å¼ä¼šè¶Šæ¥è¶Šåºå¤§å¤æ‚ï¼Œè¿™æ ·å†™çš„è¡Œå†…æ ·å¼ä¸åˆ©äºå¤ç”¨å’Œç»´æŠ¤ï¼Œæˆ‘ä»¬ä½¿ç”¨StyleSheet.createæ¥åˆ›å»ºæ ·å¼è¡¨ï¼š 12345678910111213141516171819import React from &#x27;react&#x27;;import &#123; StyleSheet, Text, View &#125; from &#x27;react-native&#x27;;const Home = ()=&gt;&#123; return ( &lt;View&gt; &lt;View style=&#123;styles.box1&#125; /&gt; &lt;View style=&#123;styles.box2&#125; /&gt; &lt;View style=&#123;styles.box3&#125; /&gt; &lt;/View&gt; )&#125;const styles = StyleSheet.create(&#123; base: &#123;fontSize: 20&#125;, box1: &#123;width: 50, height: 50, backgroundColor: &#x27;powderblue&#x27;&#125;, box2: &#123;width: 100, height: 100, backgroundColor: &#x27;skyblue&#x27;&#125;, box3: &#123;width: 320, height: 150, backgroundColor: &#x27;steelblue&#x27;&#125;, red: &#123;backgroundColor: &#x27;red&#x27;&#125;,&#125;);export default Home styleå±æ€§ä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªæ•°ç»„ï¼Œæ¥æ”¶æ ·å¼åˆ—è¡¨ï¼š 12345&lt;View&gt; &lt;View style=&#123;[styles.box1, styles.base, styles.blue]&#125; /&gt; &lt;View style=&#123;styles.box2&#125; /&gt; &lt;View style=&#123;[styles.box3, styles.red]&#125; /&gt;&lt;/View&gt; æˆ‘ä»¬çŸ¥é“åœ¨cssä¸­ï¼Œä¸€ä¸ªdivå¦‚æœä¸è®¾ç½®å®½åº¦ï¼Œé»˜è®¤ä¼šå ç”¨100%çš„å®½åº¦ï¼›åœ¨RNä¸­ï¼ŒViewå’Œdivçš„æ€§è´¨æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•éªŒè¯ä¸€ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334const styles = StyleSheet.create(&#123; box: &#123; height: 40, backgroundColor: &#x27;#333333&#x27;, marginTop: 20, &#125;,&#125;);const Main = ()=&gt; &#123; return ( &lt;View&gt; &lt;Text style=&#123;&#123;textAlign: &#x27;center&#x27;&#125;&#125;&gt;å•ä¸ªå…ƒç´ ï¼Œä¸è®¾ç½®å®½åº¦&lt;/Text&gt; &lt;View style=&#123;styles.box&#125;&gt;&lt;/View&gt; &lt;Text style=&#123;&#123;textAlign: &#x27;center&#x27;&#125;&#125;&gt; å›ºå®šå®½åº¦çš„å…ƒç´ ä¸Šæ”¾ä¸€ä¸ªViewï¼Œä¸è®¾ç½®å®½åº¦ &lt;/Text&gt; &lt;View style=&#123;&#123;width: 200&#125;&#125;&gt; &lt;View style=&#123;styles.box&#125;&gt;&lt;/View&gt; &lt;/View&gt; &lt;Text style=&#123;&#123;textAlign: &#x27;center&#x27;&#125;&#125;&gt; flexçš„å…ƒç´ ä¸Šæ”¾ä¸€ä¸ªViewï¼Œä¸è®¾ç½®å®½åº¦ &lt;/Text&gt; &lt;View style=&#123;&#123;flexDirection: &#x27;row&#x27;, marginTop: 20&#125;&#125;&gt; &lt;View style=&#123;&#123;flex: 1&#125;&#125;&gt; &lt;View style=&#123;&#123;height: 40, backgroundColor: &#x27;#333333&#x27;&#125;&#125; /&gt; &lt;/View&gt; &lt;View style=&#123;&#123;flex: 1&#125;&#125;&gt; &lt;View style=&#123;&#123;height: 40, backgroundColor: &#x27;#666666&#x27;&#125;&#125; /&gt; &lt;/View&gt; &lt;/View&gt; &lt;/View&gt; )&#125; é€šè¿‡ä¸Šé¢çš„æ•ˆæœï¼Œæˆ‘ä»¬å‘ç°Viewé»˜è®¤ä¼šç™¾åˆ†ç™¾çš„å æ»¡æ•´ä¸ªçˆ¶å®¹å™¨ã€‚ åœ¨RNä¸­æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹éœ€è¦ç”¨Textæ ‡ç­¾åŒ…è£¹ï¼Œä¸èƒ½ç›´æ¥ç”¨Viewæ ‡ç­¾ã€‚ å•ä½è‡ªé€‚åº” åœ¨ä¸Šé¢çš„æ ·å¼ä¸­ï¼Œæˆ‘ä»¬å‘ç°æ•°å€¼åé¢æ˜¯æ²¡æœ‰å•ä½çš„ï¼ˆé»˜è®¤å•ä½æ˜¯dpï¼‰ï¼Œè¡¨ç¤ºçš„æ˜¯ä¸è®¾å¤‡åƒç´ å¯†åº¦æ— å…³çš„é€»è¾‘åƒç´ ç‚¹ï¼›dpæ˜¯ä¸€ç§ç›¸å¯¹é•¿åº¦å•ä½ï¼Œ1dpåœ¨ä¸ä¸€æ ·çš„å±å¹•æˆ–è€…ä¸ä¸€æ ·çš„ppiä¸‹å±•ç°å‡ºæ¥çš„â€œç‰©ç†é•¿åº¦â€å¯èƒ½ä¸ä¸€è‡´ï¼Œä¸»è¦æ˜¯ç”±äºiosç«¯å’Œå®‰å“ç«¯å°ºå¯¸å•ä½çš„ä¸åŒã€‚ å› æ­¤æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨dpå•ä½æ¥å®ç°è‡ªé€‚åº”æ•ˆæœï¼›å›æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨ç§»åŠ¨ç«¯ï¼Œé€šå¸¸ä¼šä½¿ç”¨lib-flexibleæ–¹æ¡ˆæ¥å®ç°å±å¹•å°ºå¯¸çš„è‡ªé€‚åº”ï¼ŒRNä¸­ä¹Ÿæ˜¯ç±»ä¼¼çš„é€»è¾‘ã€‚ é€šå¸¸UIç»™å‡ºçš„é»˜è®¤640æˆ–è€…750çš„è®¾è®¡ç¨¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Dimensionsï¼Œå¯ä»¥è·å–åˆ°æ•´ä¸ªè®¾å¤‡å±å¹•çš„dpå°ºå¯¸ï¼Œç„¶åå†è‡ªå®šä¹‰ä¸€ä¸ªè½¬æ¢å‡½æ•°ï¼Œå°†æˆ‘ä»¬çš„dpå•ä½ç­‰æ¯”ä¾‹æ”¾å¤§åˆ°è®¾å¤‡ä¸Šï¼š 12345678910111213import &#123;Dimensions&#125; from &#x27;react-native&#x27;;// è®¾å¤‡å±å¹•çš„dpconst deviceWidthDp = Dimensions.get(&#x27;window&#x27;).width;// UI é»˜è®¤ç»™å›¾æ˜¯ 640const uiWidthPx = 640;function pxToDp(uiElementPx) &#123; return (uiElementPx * deviceWidthDp) / uiWidthPx;&#125;export default pxToDp; è°ƒç”¨æ—¶ç›´æ¥å°†æ ·å¼ä¸­å•ä½ä¼ å…¥å‡½æ•°è¿›è¡Œè½¬æ¢ä¸€ä¸‹ï¼š 1234567import pxToDp from &#x27;./pxToDp&#x27;;const styles = StyleSheet.create(&#123; box1: &#123;width: pxToDp(50), height: pxToDp(50)&#125;, box2: &#123;width: pxToDp(100), height: pxToDp(100)&#125;, box3: &#123;width: pxToDp(150), height: pxToDp(150)&#125;,&#125;); å¸ƒå±€ å’ŒåŸç”Ÿçš„iOSä»¥åŠAndroidçš„å¼€å‘æ–¹å¼ä¸åŒï¼ŒRNçš„å¸ƒå±€é‡‡ç”¨äº†Webç«¯å¸ƒå±€æ‰€å¸¸ç”¨çš„Flexå¸ƒå±€ã€‚è¿™ä¸ªæ¨¡å‹çš„ç‰¹ç‚¹åœ¨äºèƒ½å¤Ÿåœ¨æŒ‰ç…§å›ºå®šå°ºå¯¸å¸ƒå±€ä¹‹åï¼Œçµæ´»åœ°åˆ†é…å±å¹•ä¸Šçš„å‰©ä½™ç©ºé—´ï¼Œåˆ©ç”¨è¿™ä¸ªæ¨¡å‹å¯ä»¥è½»æ¾å®ç°è®¸å¤šåº”ç”¨ä¸­æ‰€éœ€è¦çš„å¸ƒå±€è®¾è®¡ã€‚ æŒæ¡äº†Flexå¸ƒå±€å³å¯éšå¿ƒæ‰€æ¬²åœ°å¯¹å±å¹•ä¸Šçš„ç»„ä»¶å…ƒç´ è¿›è¡Œå¸ƒå±€ï¼Œå†ç»“åˆRNæ‰€æä¾›çš„è·å–å±å¹•ä¿¡æ¯ã€å¹³å°ä¿¡æ¯ç­‰APIï¼Œå°±å¯ä»¥è¿›é˜¶å®ç°å“åº”å¼å¸ƒå±€ã€‚ Flexå¸ƒå±€ Flexå¼¹æ€§ç›’æ¨¡å‹ç›¸ä¿¡å¾ˆå¤šå‰ç«¯å°ä¼™ä¼´éƒ½æ¯”è¾ƒç†Ÿæ‚‰å®ƒï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹åœ¨webä¸Šå’ŒRNä¸­çš„flexå¸ƒå±€æœ‰å“ªäº›å¼‚åŒã€‚ flexDirection: RNä¸­é»˜è®¤ä¸ºflexDirection:&#39;column&#39;ï¼Œåœ¨Webä¸­é»˜è®¤ä¸ºflex-direction:â€™rowâ€™ alignItems: RNä¸­é»˜è®¤ä¸ºalignItems:&#39;stretch&#39;ï¼Œåœ¨Webä¸­é»˜è®¤align-items:â€™flex-startâ€™ flex: ç›¸æ¯”Webçš„flexæ¥å—å¤šå‚æ•°ï¼Œå¦‚:flex: 2 2 10%;ï¼Œä½†åœ¨RNä¸­flexåªæ¥å—ä¸€ä¸ªå‚æ•° ä¸æ”¯æŒå±æ€§ï¼šorderï¼Œflex-flow æˆ‘ä»¬æ¥çœ‹ä¸‹Flexçš„æ¦‚å¿µï¼šä¸»è½´å’Œä¾§è½´ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051const styles = StyleSheet.create(&#123; flexBox: &#123; display: &#x27;flex&#x27;, backgroundColor: &#x27;darkgray&#x27;, marginTop: 20, &#125;, flexItem: &#123; width: 20, height: 20, backgroundColor: &#x27;darkcyan&#x27;, margin: 5, &#125;,&#125;);const FlexBox = () =&gt; &#123; return ( &lt;View&gt; &lt;Text&gt;é»˜è®¤çš„FlexDirection&lt;/Text&gt; &lt;View style=&#123;styles.flexBox&#125;&gt; &lt;View style=&#123;styles.flexItem&#125;&gt; &lt;Text&gt;1&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;styles.flexItem&#125;&gt; &lt;Text&gt;2&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;styles.flexItem&#125;&gt; &lt;Text&gt;3&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;styles.flexItem&#125;&gt; &lt;Text&gt;4&lt;/Text&gt; &lt;/View&gt; &lt;/View&gt; &lt;Text&gt;FlexDirectionï¼šcolumn&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;flexDirection: &#x27;column&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;FlexDirectionï¼šcolumn-reverse&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;flexDirection: &#x27;column-reverse&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;FlexDirectionï¼šrow&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;flexDirection: &#x27;row&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;FlexDirectionï¼šrow-reverse&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;flexDirection: &#x27;row-reverse&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;/View&gt; ); &#125;&#125; æˆ‘ä»¬çœ‹åˆ°åœ¨RNä¸­flex-directionä¸­çš„å››ä¸ªå±æ€§å’ŒWebä¸­è¡¨ç°æ˜¯ä¸€è‡´çš„ï¼Œåªä¸è¿‡é»˜è®¤æ˜¯columnã€‚ justifyContentå±æ€§å®šä¹‰äº†æµè§ˆå™¨å¦‚ä½•åˆ†é…é¡ºç€çˆ¶å®¹å™¨ä¸»è½´çš„å¼¹æ€§ï¼ˆflexï¼‰å…ƒç´ ä¹‹é—´åŠå…¶å‘¨å›´çš„ç©ºé—´ï¼Œé»˜è®¤ä¸ºflex-startã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344const styles = StyleSheet.create(&#123; flexBox: &#123; display: &#x27;flex&#x27;, backgroundColor: &#x27;darkgray&#x27;, marginTop: 20, flexDirection: &#x27;row&#x27;, &#125;, flexItem: &#123; width: 40, height: 40, backgroundColor: &#x27;darkcyan&#x27;, margin: 5, &#125;,&#125;);const FlexBox = () =&gt; &#123; return ( &lt;View&gt; &lt;Text&gt;justifyContent: é»˜è®¤&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;justifyContent: flex-start&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;justifyContent: &#x27;flex-start&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;justifyContent: flex-end&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;justifyContent: &#x27;flex-end&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;justifyContent: center&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;justifyContent: &#x27;center&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;justifyContent: space-between&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;justifyContent: &#x27;space-between&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;justifyContent: space-around&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;justifyContent: &#x27;space-around&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;/View&gt; );&#125;; alignItemså±æ€§ä»¥ä¸justify-contentç›¸åŒçš„æ–¹å¼åœ¨ä¾§è½´æ–¹å‘ä¸Šå°†å½“å‰è¡Œä¸Šçš„å¼¹æ€§å…ƒç´ å¯¹é½ï¼Œé»˜è®¤ä¸ºstretchã€‚ 123456789101112131415161718192021222324252627282930313233343536const styles = StyleSheet.create(&#123; flexBox: &#123; height: 60, display: &#x27;flex&#x27;, backgroundColor: &#x27;darkgray&#x27;, marginTop: 20, flexDirection: &#x27;row&#x27;, &#125;, flexItem: &#123; width: 20, backgroundColor: &#x27;darkcyan&#x27;, margin: 5, &#125;,&#125;);const FlexBox = () =&gt; &#123; return ( &lt;View&gt; &lt;Text&gt;alignItems: flex-start&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;alignItems: &#x27;flex-start&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;alignItems: flex-end&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;alignItems: &#x27;flex-end&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;alignItems: center&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;alignItems: &#x27;center&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;alignItems: stretch&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;alignItems: &#x27;stretch&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;/View&gt; );&#125;; flexWrapå±æ€§å®šä¹‰äº†å­å…ƒç´ åœ¨çˆ¶è§†å›¾å†…æ˜¯å¦å…è®¸å¤šè¡Œæ’åˆ—ï¼Œé»˜è®¤ä¸ºnowrapã€‚ 12345678910111213141516171819202122232425262728293031const styles = StyleSheet.create(&#123; flexBox: &#123; display: &#x27;flex&#x27;, backgroundColor: &#x27;darkgray&#x27;, marginTop: 20, flexDirection: &#x27;row&#x27;, &#125;, flexItem: &#123; width: 160, backgroundColor: &#x27;darkcyan&#x27;, margin: 5, &#125;,&#125;);const FlexBox3 = () =&gt; &#123; return ( &lt;View&gt; &lt;Text&gt;flexWrap: é»˜è®¤&lt;/Text&gt; &lt;View style=&#123;[box3Style.flexBox]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;flexWrap: nowrap&lt;/Text&gt; &lt;View style=&#123;[box3Style.flexBox, &#123;flexWrap: &#x27;nowrap&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;Text&gt;flexWrap: wrap&lt;/Text&gt; &lt;View style=&#123;[box3Style.flexBox, &#123;flexWrap: &#x27;wrap&#x27;&#125;]&#125;&gt; // ... &lt;/View&gt; &lt;/View&gt; );&#125;; flexå±æ€§å®šä¹‰äº†ä¸€ä¸ªå¯ä¼¸ç¼©å…ƒç´ çš„èƒ½åŠ›ï¼Œé»˜è®¤ä¸º0ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940const styles = StyleSheet.create(&#123; flexBox: &#123; flexDirection: &#x27;row&#x27;, backgroundColor: &#x27;darkgray&#x27;, &#125;, flexItem: &#123; backgroundColor: &#x27;darkcyan&#x27;, margin: 5, &#125;,&#125;);const FlexBox = () =&gt; &#123; return ( &lt;View&gt; &lt;Text&gt;flexå±æ€§ï¼š&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox]&#125;&gt; &lt;View style=&#123;[styles.flexItem, &#123;flex: 0&#125;]&#125;&gt; &lt;Text&gt;1&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.flexItem, &#123;flex: 1&#125;]&#125;&gt; &lt;Text&gt;2&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.flexItem, &#123;flex: 2&#125;]&#125;&gt; &lt;Text&gt;3&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.flexItem, &#123;flex: 4&#125;]&#125;&gt; &lt;Text&gt;4&lt;/Text&gt; &lt;/View&gt; &lt;/View&gt; &lt;Text&gt;çˆ¶å®¹å™¨ç©ºé—´ä¸è¶³çš„æ—¶å€™&lt;/Text&gt; &lt;View style=&#123;[styles.flexBox, &#123;width: 100&#125;]&#125;&gt; &lt;View style=&#123;[styles.flexItem, &#123;flex: 1, width: 100&#125;]&#125;&gt; &lt;Text&gt;1&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.flexItem, &#123;flex: 2, width: 200&#125;]&#125;&gt; &lt;Text&gt;2&lt;/Text&gt; &lt;/View&gt; &lt;/View&gt; &lt;/View&gt; );&#125;; ç»å¯¹å®šä½å’Œç›¸å¯¹å®šä½ RNä¸­è¿˜æä¾›äº†Webä¸­å¦å¤–ä¸¤ç§å¸¸è§çš„å¸ƒå±€æ–¹å¼ï¼šç»å¯¹å®šä½å’Œç›¸å¯¹å®šä½ï¼Œä¸è¿‡ä¸æ”¯æŒå›ºå®šå®šä½ï¼ˆfixedï¼‰ã€‚ ç›¸å¯¹å®šä½ç›¸å¯¹äºåŸæ¥çš„ä½ç½®è¿›è¡Œäº†ç§»åŠ¨ï¼Œå…ƒç´ è®¾ç½®æ­¤å±æ€§ä»ç„¶å¤„ç†æ–‡æ¡£æµä¸­ï¼Œä¸å½±å“å…¶ä»–å…ƒç´ çš„å¸ƒå±€ã€‚ 123456789101112131415161718192021222324252627282930313233const styles = StyleSheet.create(&#123; boxItem: &#123; height: 100, &#125;, box1: &#123; backgroundColor: &#x27;powderblue&#x27;, &#125;, box2: &#123; backgroundColor: &#x27;skyblue&#x27;, position: &#x27;relative&#x27;, left: 50, top: 50, zIndex: 9, &#125;, box3: &#123; backgroundColor: &#x27;steelblue&#x27;, &#125;,&#125;);const RelativeLayout = () =&gt; &#123; return ( &lt;View&gt; &lt;View style=&#123;[styles.boxItem, styles.box1]&#125;&gt; &lt;Text&gt;box1&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.boxItem, styles.box2]&#125;&gt; &lt;Text&gt;box2&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.boxItem, styles.box3]&#125;&gt; &lt;Text&gt;box3&lt;/Text&gt; &lt;/View&gt; &lt;/View&gt; );&#125;; ç›¸å¯¹å®šä½çš„æ•ˆæœï¼š ç»å¯¹å®šä½çš„å…ƒç´ ç›¸å¯¹äºçˆ¶å®¹å™¨è¿›è¡Œä½ç½®å®šä½ï¼Œå½“çˆ¶å®¹å™¨æ²¡æœ‰è®¾ç½®ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½æ—¶ï¼Œå…ƒç´ ä¼šç›¸å¯¹äºæ ¹å…ƒç´ å®šä½ï¼›ç»å¯¹å®šä½çš„å…ƒç´ ä¼šè„±ç¦»æ–‡æ¡£æµï¼Œå½±å“åˆ°å…¶ä»–å…ƒç´ çš„å®šä½ï¼š 123456789101112131415161718192021222324252627282930313233343536const styles = StyleSheet.create(&#123; container: &#123; position: &#x27;relative&#x27;, &#125;, boxItem: &#123; height: 100, &#125;, box1: &#123; backgroundColor: &#x27;powderblue&#x27;, &#125;, box2: &#123; backgroundColor: &#x27;skyblue&#x27;, position: &#x27;absolute&#x27;, left: 50, top: 50, &#125;, box3: &#123; backgroundColor: &#x27;steelblue&#x27;, &#125;, &#125;);const AbsolueteLayout = () =&gt; &#123; return ( &lt;View style=&#123;styles.container&#125;&gt; &lt;View style=&#123;[styles.boxItem, styles.box1]&#125;&gt; &lt;Text&gt;box1&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.boxItem, styles.box2]&#125;&gt; &lt;Text&gt;box2&lt;/Text&gt; &lt;/View&gt; &lt;View style=&#123;[styles.boxItem, styles.box3]&#125;&gt; &lt;Text&gt;box3&lt;/Text&gt; &lt;/View&gt; &lt;/View&gt; );&#125;; ç»å¯¹å®šä½çš„æ•ˆæœï¼š å›¾ç‰‡èµ„æº åŒWebä¸­çš„imgæ ‡ç­¾ä¸€æ ·ï¼ŒRNä¸­ä¹Ÿæä¾›äº†Imageç»„ä»¶ç”¨æ¥æ˜¾ç¤ºå„ç§å›¾ç‰‡èµ„æºï¼Œå®ƒå¯ä»¥å±•ç¤ºä¸‰ç§å›¾ç‰‡èµ„æºï¼š åŠ è½½æœ¬åœ°ç£ç›˜ä¸Šçš„å›¾ç‰‡ ç½‘ç»œè¯·æ±‚çš„å›¾ç‰‡ base64æ ¼å¼çš„å›¾ç‰‡ æˆ‘ä»¬æ¥çœ‹ä¸‹æ¯ç§æ–¹å¼å¦‚ä½•åŠ è½½å›¾ç‰‡ï¼š 1234567891011121314151617181920import &#123; Image,&#125; from &#x27;react-native&#x27;;const Home = () =&gt; &#123; return ( &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo.jpg&#x27;)&#125; style=&#123;&#123;width: 360, height: 280&#125;&#125;&gt;&lt;/Image&gt; &lt;Image source=&#123;&#123; uri: &#x27;https://xieyufei.com/img/bg_small.jpg&#x27; &#125;&#125; style=&#123;&#123;width:1024, height: 640&#125;&#125;&gt;&lt;/Image&gt; &lt;Image source=&#123;&#123; uri: &#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAZCAMAAAAYAM5SAAAA4VBMVEVHcEz&#x27; &#125;&#125; style=&#123;&#123;width: 30, height: 30&#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt; )&#125; Imageç»„ä»¶å¿…é¡»åœ¨æ ·å¼ä¸­å£°æ˜å›¾ç‰‡çš„å®½å’Œé«˜ï¼›å¦‚æœæ²¡æœ‰å£°æ˜ï¼Œåˆ™å›¾ç‰‡å°†ä¸ä¼šè¢«å‘ˆç°åœ¨ç•Œé¢ä¸Šã€‚ åœ¨iOSå¹³å°ï¼Œä»iOS9å¼€å§‹å¼•å…¥äº†æ–°ç‰¹æ€§App Transport Security (ATS)ï¼Œè¦æ±‚Appå†…è®¿é—®çš„ç½‘ç»œå¿…é¡»ä½¿ç”¨HTTPSåè®®ï¼Œå› æ­¤åªèƒ½åŠ è½½httpsåè®®çš„å›¾ç‰‡å’Œæ¥å£ï¼›æˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨ä¸­è¿›è¡Œè®¾ç½®ï¼Œå¼€å¯httpæœåŠ¡ï¼š RNé»˜è®¤æ”¯æŒjpgå’Œpngæ ¼å¼çš„å›¾ç‰‡ï¼Œåœ¨iOSå¹³å°ä¸‹ï¼Œè¿˜æ”¯æŒGIFã€WebPæ ¼å¼ï¼›åœ¨Androidå¹³å°ä¸‹ï¼Œé»˜è®¤ä¸æ”¯æŒGIFã€WebPæ ¼å¼ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹Androidå·¥ç¨‹è®¾ç½®è®©å…¶æ”¯æŒè¿™ä¸¤ç§æ ¼å¼ï¼š 12345dependencies &#123; compile &#x27;com.facebook.fresco:animated-gif:0.11.0&#x27; //éœ€è¦GIFåŠ¨ç”»æ”¯æŒæ·»åŠ æœ¬è¡Œè¯­å¥ compile &#x27;com.facebook.fresco:webpsupport:0.11.0&#x27; //éœ€è¦WebPæ ¼å¼æ”¯æŒæ·»åŠ æœ¬è¡Œè¯­å¥ compile &#x27;com.facebook.fresco:animated-webp:0.11.0&#x27; //éœ€è¦WebPåŠ¨ç”»æ”¯æŒæ·»åŠ æœ¬è¡Œè¯­å¥&#125; ç»„ä»¶é™æ€æ–¹æ³• Imageç»„ä»¶æä¾›äº†ä¸€ä¸ªé™æ€å‡½æ•°getSizeï¼Œç”¨æ¥å–å¾—æŒ‡å®šURIåœ°å€å›¾ç‰‡çš„å®½å’Œé«˜ï¼ˆå•ä½ä¸ºåƒç´ ï¼‰ã€‚åœ¨è°ƒç”¨getSizeå‡½æ•°å–å›¾ç‰‡çš„å®½ã€é«˜æ—¶ï¼ŒRNäº‹å®ä¸Šä¼šä¸‹è½½è¿™å¼ å›¾ç‰‡ï¼Œå¹¶ä¸”å°†è¯¥å›¾ç‰‡ä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼›å› æ­¤getSizeå‡½æ•°ä¹Ÿå¯ä»¥ä½œä¸ºé¢„åŠ è½½å›¾ç‰‡èµ„æºçš„ä¸€ä¸ªæ–¹æ³•ã€‚ 12345678910Image.getSize( &#x27;https://xieyufei.com/img/bg_small.jpg&#x27;, (width, height) =&gt; &#123; console.log(width, height, &#x27;image size&#x27;); &#125;, error =&gt; &#123; // å›¾ç‰‡åŠ è½½å¤±è´¥ console.log(error); &#125;,); æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ Image ç»„ä»¶çš„é™æ€å‡½æ•°prefetchæ¥é¢„ä¸‹è½½æŸå¼ ç½‘ç»œå›¾ç‰‡ã€‚ 123456Image.prefetch( &#x27;https://xieyufei.com/img/bg_small.jpg&#x27;, res =&gt; &#123; console.log(&#x27;prefetch&#x27;, res); &#125;,); å›¾ç‰‡æ˜¾ç¤ºæ¨¡å¼ å½“Imageç»„ä»¶çš„å®é™…å®½ã€é«˜ä¸å›¾ç‰‡çš„å®é™…å®½ã€é«˜ä¸ç¬¦æ—¶ï¼Œè¦å¦‚ä½•æ˜¾ç¤ºå›¾ç‰‡ç”±æ ·å¼å®šä¹‰ä¸­çš„resizeModeå–å€¼æ¥å†³å®šï¼›resizeModeå¯å–çš„äº”ä¸ªå€¼åˆ†åˆ«æ˜¯ï¼šcontainã€coverã€stretchã€centerå’Œrepeatï¼Œæ¯ç§æ¨¡å¼çš„æ•ˆæœå¦‚ä¸‹ã€‚ coveræ¨¡å¼ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œè¯¥æ¨¡å¼è¦æ±‚å›¾ç‰‡èƒ½å¤Ÿå¡«å……æ•´ä¸ªImageç»„ä»¶å®šä¹‰çš„æ˜¾ç¤ºåŒºåŸŸï¼Œå¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œæ”¾å¤§æˆ–è€…ç¼©å°ï¼Œå¯ä»¥ä¸¢å¼ƒæ”¾å¤§æˆ–ç¼©å°åçš„å›¾ç‰‡ä¸­çš„éƒ¨åˆ†åŒºåŸŸï¼Œåªæ±‚åœ¨æ˜¾ç¤ºæ¯”ä¾‹ä¸å¤±çœŸçš„æƒ…å†µä¸‹å¡«å……æ•´ä¸ªæ˜¾ç¤ºåŒºåŸŸã€‚ 123456789101112131415161718192021&lt;View&gt; &lt;Text&gt;resizeMode: cover&lt;/Text&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;cover&#x27;, height: 200, width: 400, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;cover&#x27;, height: 400, width: 200, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt;&lt;/View&gt; containæ¨¡å¼è¦æ±‚æ˜¾ç¤ºæ•´å¼ å›¾ç‰‡ï¼Œå¯ä»¥å¯¹å®ƒè¿›è¡Œç­‰æ¯”æ”¾å¤§æˆ–è€…ç¼©å°ï¼Œä½†ä¸èƒ½ä¸¢å¼ƒæ”¹å˜åå›¾ç‰‡çš„æŸéƒ¨åˆ†ã€‚è¿™ä¸ªæ¨¡å¼ä¸‹å›¾ç‰‡å¾—åˆ°å®Œæ•´çš„å‘ˆç°ï¼Œæ¯”ä¾‹ä¸ä¼šå˜ã€‚ä½†å›¾ç‰‡å¯èƒ½æ— æ³•å¡«å……Imageçš„æ‰€æœ‰åŒºåŸŸï¼Œä¼šåœ¨ä¾§è¾¹æˆ–è€…ä¸Šä¸‹ç•™ä¸‹ç©ºç™½ï¼Œç”±Imageç»„ä»¶çš„åº•è‰²å¡«å……ã€‚ 1234567891011121314151617181920212223&lt;View&gt; &lt;Text&gt;resizeMode: contain&lt;/Text&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;contain&#x27;, height: 200, width: 400, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;contain&#x27;, height: 400, width: 200, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt;&lt;/View&gt; stretchæ¨¡å¼è¦æ±‚å›¾ç‰‡å¡«å……æ•´ä¸ªImageå®šä¹‰çš„æ˜¾ç¤ºåŒºåŸŸï¼Œå› æ­¤ä¼šå¯¹å›¾ç‰‡è¿›è¡Œä»»æ„çš„ç¼©æ”¾ï¼Œä¸è€ƒè™‘ä¿æŒå›¾ç‰‡åŸæ¥çš„å®½ã€é«˜æ¯”ã€‚è¿™ç§æ¨¡å¼æ˜¾ç¤ºå‡ºæ¥çš„å›¾ç‰‡æœ‰å¯èƒ½ä¼šå‡ºç°æ˜æ˜¾çš„å¤±çœŸã€‚ 1234567891011121314151617181920212223&lt;View&gt; &lt;Text&gt;resizeMode: stretch&lt;/Text&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;stretch&#x27;, height: 200, width: 400, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;stretch&#x27;, height: 400, width: 200, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt;&lt;/View&gt; centeræ¨¡å¼è¦æ±‚å›¾ç‰‡å›¾ç‰‡ä½äºæ˜¾ç¤ºåŒºåŸŸçš„ä¸­å¿ƒã€‚è¿™ç§æ¨¡å¼ä¸‹å›¾ç‰‡å¯èƒ½ä¹Ÿæ— æ³•å¡«å……Imageçš„æ‰€æœ‰åŒºåŸŸï¼Œä¼šåœ¨ä¾§è¾¹æˆ–è€…ä¸Šä¸‹ç•™ä¸‹ç©ºç™½ï¼Œç”±Imageç»„ä»¶çš„åº•è‰²å¡«å……ã€‚ 1234567891011121314151617181920212223&lt;View&gt; &lt;Text&gt;resizeMode: stretch&lt;/Text&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;stretch&#x27;, height: 200, width: 400, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;stretch&#x27;, height: 400, width: 200, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt;&lt;/View&gt; repeatæ¨¡å¼çš„å›¾ç‰‡å¤„ç†æ€è·¯æ˜¯ç”¨ä¸€å¼ æˆ–è€…å¤šå¼ å›¾ç‰‡æ¥å¡«å……æ•´ä¸ªImageå®šä¹‰çš„æ˜¾ç¤ºåŒºåŸŸã€‚ 1234567891011121314151617181920212223&lt;View&gt; &lt;Text&gt;resizeMode: repeat&lt;/Text&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;repeat&#x27;, height: 200, width: 400, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt; &lt;View&gt; &lt;Image source=&#123;require(&#x27;./logo1.png&#x27;)&#125; style=&#123;&#123; resizeMode: &#x27;repeat&#x27;, height: 400, width: 200, backgroundColor: &#x27;#999&#x27;, &#125;&#125;&gt;&lt;/Image&gt; &lt;/View&gt;&lt;/View&gt; ä¸è¿‡è¯¥æ¨¡å¼åœ¨iOSå’Œå®‰å“ä¸‹è¡¨ç°å½¢å¼ä¸ä¸€æ ·ï¼Œåœ¨iOSä¸‹ä¼šå‘Xè½´å’ŒYè½´æ–¹å‘é‡å¤å¡«å……ï¼š å®‰å“ä¸‹repeatåˆ™åªä¼šåœ¨Xè½´æ–¹å‘é‡å¤å¡«å……ä¸¤ä¸ªå›¾ç‰‡ï¼š","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"ç§»åŠ¨ç«¯","slug":"Apps","permalink":"https://xieyufei.com/tags/Apps/"}]},{"title":"æ·±å…¥å­¦ä¹ React Nativeä¹‹ç¯å¢ƒæ­å»º","date":"2021-10-06T05:14:15.000Z","path":"2021/10/06/React-Native-Env.html","text":"ç§»åŠ¨ç«¯çš„å¼€å‘åœ¨ä»¥å‰ä¸€èˆ¬éƒ½æ˜¯é€šè¿‡åŸç”Ÿè¯­è¨€ï¼ŒAndroidé€šè¿‡JAVAï¼ŒIOSé€šè¿‡Object-Cæˆ–è€…Swiftï¼›å¯¹äºå¼€å‘åŒä¸€ä¸ªAPPé€šå¸¸è¦ä¸¤ä¸ªå›¢é˜Ÿæ¥ç»´æŠ¤ä¸¤å¥—ä»£ç ï¼Œå¯¹äºå°å…¬å¸è€Œè¨€è¿˜æ˜¯æ¯”è¾ƒæœ‰æˆæœ¬çš„ã€‚å› æ­¤è¶Šæ¥è¶Šå¤šçš„å…¬å¸é€‰æ‹©React Nativeæ¥å¼€å‘Appï¼Œè¿™æ ·å°±åšåˆ°äº†ä¸€ä¸ªå›¢é˜Ÿç»´æŠ¤ä¸€å¥—ä»£ç ï¼Œæ— ç–‘æ˜¯èŠ‚çœäº†å¾ˆå¤§çš„äººåŠ›æˆæœ¬ã€‚ RNç®€ä»‹ React Native(ç®€ç§°RN)æ˜¯Facebookäº2015å¹´4æœˆå¼€æºçš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œç”¨äºåˆ›å»ºåŸç”Ÿç§»åŠ¨Androidå’ŒiOSå¹³å°åº”ç”¨ç¨‹åºã€‚å®ƒåŸºäºFacebookçš„JavaScriptåº“Reactï¼Œä¸ºç§»åŠ¨å¹³å°åˆ›å»ºç”¨æˆ·ç•Œé¢ã€‚ å®˜æ–¹sloganï¼šä¸€æ¬¡å­¦ä¹ ï¼Œéšå¤„ç¼–å†™ å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨React Nativeç¼–å†™Androidå’ŒiOSåº”ç”¨ç¨‹åºï¼Œè¿™äº›ç¨‹åºçš„æ“ä½œå’Œå¤–è§‚éƒ½ä¸åŸç”Ÿåº”ç”¨ç¨‹åºç›¸ä¼¼ã€‚ä½¿ç”¨React Nativeç¼–å†™çš„ä»£ç ä¹Ÿå¯ä»¥è·¨å¹³å°å…±äº«ï¼Œè¿™å°±å…è®¸IOSå’ŒAndroidåŒæ—¶è¿›è¡Œé«˜æ•ˆå¼€å‘ï¼›React Nativeæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š å…è´¹çš„ï¼Œå¼€æºçš„ï¼Œæœ‰å¤§å‹çš„ç¤¾åŒºæ”¯æŒ æ¥è¿‘åŸç”Ÿæ€§èƒ½ èŠ‚çœè·¨å¹³å°åº”ç”¨ç¨‹åºå¼€å‘æ—¶é—´ å®æ—¶å’Œçƒ­é‡è½½ ä½†æ˜¯å®ƒåŒæ—¶ä¹Ÿæœ‰ä¸å°‘ç¼ºç‚¹ï¼š å…¼å®¹æ€§å’Œè°ƒè¯•é—®é¢˜ ç¼ºä¹å®‰å…¨ç¨³å¥æ€§ï¼ŒReact Nativeæ˜¯ä¸€ä¸ªJavaScriptåº“å’Œå¼€æºæ¡†æ¶ï¼Œå®ƒåœ¨å®‰å…¨æ€§æ–¹é¢å­˜åœ¨é‡å¤§é—®é¢˜ React Nativeåœ¨æœ€åˆæ¸²æŸ“ä¹‹å‰éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´æ¥åˆå§‹åŒ–è¿è¡Œï¼Œå› ä¸ºJavaScriptçº¿ç¨‹éœ€è¦æ—¶é—´æ¥åˆå§‹åŒ– ä»ç„¶éœ€è¦Nativeå¼€å‘äººå‘˜ é‚£ä¹ˆReact Nativeæ˜¯å¦‚ä½•åšåˆ°è·¨å¹³å°çš„å‘¢ï¼Ÿæˆ‘ä»¬å…ˆçœ‹ä¸‹Reactå’ŒReact Nativeçš„åŒºåˆ«ï¼Œå¾ˆå¤šç«¥é‹å¯¹ä»–ä»¬ä¿©çš„å…³ç³»éƒ½å‚»å‚»åˆ†ä¸æ¸…ï¼š Reactæ˜¯ä¸€ä¸ªåŸºäºJavaScriptçš„åº”ç”¨ç¨‹åºå¼€å‘æ¡†æ¶ã€‚ React Nativeæ˜¯ä¸€ä¸ªå…è®¸ç”¨æˆ·å¼€å‘è·¨å¹³å°å’Œç§»åŠ¨åº”ç”¨ç¨‹åºçš„å¹³å° é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“çš„æ˜¯ï¼šReactåªæ˜¯ä¸€ä¸ªçº¯JSåº“ï¼Œå®ƒä¸æ¶‰åŠä»»ä½•ç§»åŠ¨å¹³å°çš„åŠŸèƒ½ï¼ŒReactçš„ä»£ç ç»è¿‡ç¼–è¯‘åéœ€è¦JS Engineæ¥è¿›è¡Œè§£ææ‰§è¡Œï¼›å®ƒå°è£…äº†ä¸€å¥—Virtual Domçš„æ¦‚å¿µï¼Œå®ç°é©±åŠ¨ç¼–ç¨‹æ¨¡å¼ï¼Œä¸ºå¤æ‚çš„Web UIå®ç°äº†ä¸€ç§æ— çŠ¶æ€ç®¡ç†çš„æœºåˆ¶ï¼›ä½†æ˜¯åº•å±‚çš„ä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚é©±åŠ¨åŸç”Ÿæ§ä»¶å±•ç¤ºã€è¯»å†™ç£ç›˜ã€ç½‘ç»œç­‰ï¼Œå®ƒå°±æ— èƒ½ä¸ºåŠ›äº†ã€‚ ä½†æ˜¯React Nativeå°±ä¸ä¸€æ ·äº†ï¼ŒJSXçš„æºç é€šè¿‡React Nativeç¼–è¯‘åï¼Œé€šè¿‡å¯¹åº”å¹³å°çš„Bridgeå®ç°äº†ä¸åŸç”Ÿæ¡†æ¶çš„é€šä¿¡ï¼›Bridgeçš„ä½œç”¨å°±æ˜¯ç»™RNå†…åµŒçš„JSæä¾›åŸç”Ÿæ¥å£çš„æ‰©å±•ä¾›JSè°ƒç”¨ï¼›æ‰€æœ‰çš„åŸç”ŸåŠŸèƒ½ï¼Œä¾‹å¦‚åŸç”Ÿæ§ä»¶ç»˜åˆ¶ã€å›¾ç‰‡èµ„æºã€æœ¬åœ°å­˜å‚¨ã€ç½‘ç»œè®¿é—®ã€åœ°å›¾å®šä½ç­‰åŠŸèƒ½ï¼Œéƒ½æ˜¯é€šè¿‡Bridgeå°è£…æˆJSæ¥å£æ³¨å…¥JS Engineä¾›JSè°ƒç”¨ã€‚ æˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥å…·ä½“çš„çœ‹ä¸‹ï¼š ç»¿è‰²çš„éƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬åº”ç”¨å¼€å‘çš„éƒ¨åˆ†ï¼Œä¸»è¦å°±æ˜¯æˆ‘ä»¬å†™çš„JSXä»£ç ï¼›è“è‰²éƒ¨åˆ†ä»£è¡¨å…¬ç”¨çš„è·¨å¹³å°çš„ä»£ç å’Œå·¥å…·å¼•æ“ï¼›é»„è‰²çš„éƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬çš„Bridgeï¼Œå’Œæ¯ä¸ªåŸç”Ÿå¹³å°ç›¸å…³çš„ä»£ç ï¼›çº¢è‰²éƒ¨åˆ†æ˜¯æ¯ä¸ªç³»ç»Ÿå¹³å°çš„ä¸œè¥¿ã€‚ è½¯ä»¶ç¯å¢ƒçš„å®‰è£…é…ç½® éœ€è¦çš„è½¯ä»¶ JDK == 1.8 Android Studio Nodejs &gt;= 12 React Nativeè¦æ±‚JDKçš„ç‰ˆæœ¬ä¸º1.8ï¼Œæˆ‘ä»¬ä»å®˜ç½‘ä¸‹è½½é€‚åˆè‡ªå·±ç³»ç»Ÿçš„jdkï¼Œç„¶åé…ç½®ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ã€‚ ç„¶åé…ç½®Androidç¯å¢ƒï¼Œä»å®˜ç½‘ä¸‹è½½Android Studioï¼Œä¸‹è½½ä¸‹æ¥æ˜¯ä¸€ä¸ªexeç¨‹åºï¼š åœ¨å®‰è£…ç•Œé¢ä¸­æˆ‘ä»¬å¯ä»¥å‹¾é€‰Android Virtual Deviceï¼š Android Studioé»˜è®¤ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„Android SDKï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹å®ƒçš„é…ç½®è·¯å¾„ï¼Œå…·ä½“è·¯å¾„æ˜¯Appearance &amp; Behavior â†’ System Settings â†’ Android SDKï¼›é»˜è®¤SDKçš„è·¯å¾„æ˜¯å¦‚ä¸‹æ ¼å¼ï¼š 1C:\\Users\\ä½ çš„ç”¨æˆ·å\\AppData\\Local\\Android\\Sdk RNéœ€è¦ç¯å¢ƒå˜é‡æ¥çŸ¥é“æˆ‘ä»¬çš„SDKå®‰è£…åœ¨ä»€ä¹ˆè·¯å¾„ä¸‹ï¼Œä»è€Œæ¥ç¼–è¯‘ï¼›æ‰“å¼€æ§åˆ¶é¢æ¿ -&gt; ç³»ç»Ÿå’Œå®‰å…¨ -&gt; ç³»ç»Ÿ -&gt; é«˜çº§ç³»ç»Ÿè®¾ç½® -&gt; é«˜çº§ -&gt; ç¯å¢ƒå˜é‡ -&gt; æ–°å»ºï¼Œåˆ›å»ºä¸€ä¸ªANDROID_HOMEçš„ç¯å¢ƒå˜é‡ï¼ŒæŒ‡å‘æˆ‘ä»¬ä¸Šé¢æ‰¾åˆ°çš„SDKæ‰€åœ¨çš„ç›®å½•ã€‚ SDKä¸‹æœ‰ä¸€äº›å·¥å…·ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å…¨å±€ä½¿ç”¨ï¼Œæ‰“å¼€æ§åˆ¶é¢æ¿ -&gt; ç³»ç»Ÿå’Œå®‰å…¨ -&gt; ç³»ç»Ÿ -&gt; é«˜çº§ç³»ç»Ÿè®¾ç½® -&gt; é«˜çº§ -&gt; ç¯å¢ƒå˜é‡ï¼Œé€‰ä¸­Pathå˜é‡ï¼Œç„¶åç‚¹å‡»ç¼–è¾‘ï¼Œå°†ä»¥ä¸‹ç›®å½•æ·»åŠ è¿›å»ï¼š 1234%ANDROID_HOME%\\platform-tools%ANDROID_HOME%\\emulator%ANDROID_HOME%\\tools%ANDROID_HOME%\\tools\\bin adbè¿æ¥è®¾å¤‡ Android Debug Bridgeï¼ˆå®‰å“è°ƒè¯•æ¡¥ï¼‰ï¼Œæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œçª—å£ï¼Œç”¨äºé€šè¿‡ç”µè„‘ç«¯ä¸æ¨¡æ‹Ÿå™¨æˆ–è€…æ˜¯å®‰å“è®¾å¤‡ä¹‹é—´çš„äº¤äº’ï¼›adbæ˜¯ä¸€ä¸ªæ ‡å‡†çš„CSç»“æ„çš„å·¥å…·ï¼Œä¸»è¦åŒ…å«å¦‚ä¸‹ä¸‰éƒ¨åˆ†ï¼š Clientç«¯ï¼šè¿è¡Œåœ¨å¼€å‘æœºå™¨ä¸­, å³ä½ çš„å¼€å‘PCæœº. ç”¨æ¥å‘é€adbå‘½ä»¤. Deamonå®ˆæŠ¤è¿›ç¨‹ï¼šè¿è¡Œåœ¨è°ƒè¯•è®¾å¤‡ä¸­, å³çš„è°ƒè¯•æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨. Serverç«¯ï¼šä½œä¸ºä¸€ä¸ªåå°è¿›ç¨‹è¿è¡Œåœ¨å¼€å‘æœºå™¨ä¸­, å³ä½ çš„å¼€å‘PCæœº. ç”¨æ¥ç®¡ç†PCä¸­çš„Clientç«¯å’Œæ‰‹æœºçš„Deamonä¹‹é—´çš„é€šä¿¡. adbçš„ä¸‹è½½å’Œå®‰è£…ä¸»è¦æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§ç›´æ¥ä¸‹è½½adbçš„å·¥å…·å‹ç¼©åŒ…è§£å‹ï¼Œç„¶åå°†å®ƒçš„ç›®å½•é…ç½®åˆ°ç¯å¢ƒå˜é‡Pathä¸­ï¼›ç¬¬äºŒç§å°±æ˜¯åˆ©ç”¨ä¸Šé¢å·²ç»å®‰è£…çš„Android Studioï¼Œå®ƒæœ¬èº«å¸¦æœ‰adbå·¥å…·ï¼Œåœ¨SDKç›®å½•ä¸‹çš„platform-toolsä¸­ï¼›å¦‚æœæŒ‰ç…§ä¸Šä¸€èŠ‚é…ç½®å¥½Android Studioçš„ç¯å¢ƒå˜é‡ï¼Œä¸€èˆ¬æ˜¯ç›´æ¥å¯ä»¥è°ƒç”¨adbå‘½ä»¤çš„ã€‚ åœ¨å‘½ä»¤è¡Œè¾“å…¥adb versionæŸ¥çœ‹ç‰ˆæœ¬å·ï¼Œå¦‚æœæœ‰è¾“å‡ºï¼Œå°±å·²ç»é…ç½®æˆåŠŸäº†ã€‚ 123$ adb versionAndroid Debug Bridge version 1.0.41Version 31.0.3-7562133 é…ç½®å¥½ç¯å¢ƒåï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ‰“å¼€androidæ‰‹æœºçš„USBè°ƒè¯•åŠŸèƒ½ï¼›é¦–å…ˆè¦è¿›å…¥æ‰‹æœºçš„å¼€å‘è€…æ¨¡å¼ï¼Œåœ¨æ‰‹æœºè®¾ç½® -&gt; å…³äºæ‰‹æœºè¿ç»­ç‚¹å‡»ç‰ˆæœ¬å·ä¸ƒæ¬¡å°±æ‰“å¼€äº†å¼€å‘è€…æ¨¡å¼ï¼›ç„¶åè¿›å…¥è®¾ç½® -&gt; å¼€å‘è€…é€‰é¡¹ï¼Œæ‰“å¼€USBè°ƒè¯•ä»¥åŠå…è®¸ADBçš„ä¸€äº›æƒé™ï¼Œè¿™æ ·æ‰‹æœºå°±é…ç½®å¥½äº†ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹adbçš„ä¸€äº›å¸¸ç”¨å‘½ä»¤ã€‚ adb start/kill-server å¯åŠ¨/æ€æ­»adbï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢æåˆ°çš„Serverç«¯è¿›ç¨‹ï¼Œç”±äºadbå¹¶ä¸ç¨³å®šï¼Œæœ‰æ—¶å€™è«åçš„é—®é¢˜æ‰çº¿æ—¶ï¼Œå¯ä»¥å…ˆkill-server, ç„¶åstart-serveræ¥ç¡®ä¿Serverè¿›ç¨‹å¯åŠ¨. å¾€å¾€å¯ä»¥è§£å†³é—®é¢˜. adb devices åˆ—ä¸¾å½“å‰è¿æ¥çš„è°ƒè¯•è®¾å¤‡ï¼š 12345$ adb devicesList of devices attachedcf264b8f deviceemulator-5554 device10.129.164.6:5555 device å…¶ä¸­å‰é¢çš„ä¸€ä¸²å­—ç¬¦ä¸²ä»£è¡¨äº†æ‰‹æœºçš„serialNumberï¼Œåé¢çš„deviceä»£è¡¨æ‰‹æœºçš„è¿æ¥çŠ¶æ€ï¼Œæœ‰ä»¥ä¸‹å‡ ç§çŠ¶æ€ï¼š deviceï¼šè®¾å¤‡å·²è¿æ¥ offlineï¼šè¡¨ç¤ºè®¾å¤‡æœªè¿æ¥æˆåŠŸæˆ–æ— å“åº”ï¼› unauthorizedï¼šè®¾å¤‡è¿˜æ²¡æœ‰æˆæƒï¼Œéœ€è¦åœ¨è®¾å¤‡ä¸Šè¿›è¡Œç¡®è®¤ æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹æœºçš„serialNumberçœ‹å‡ºè®¾å¤‡çš„ç±»å‹ï¼Œç¬¬ä¸€ä¸ªå­—æ¯å’Œæ•°å­—çš„ä»£è¡¨usbè¿æ¥çš„è®¾å¤‡ï¼Œemulatorè¡¨ç¤ºæ˜¯ä¸€ä¸ªAndroidæ¨¡æ‹Ÿå™¨ï¼Œè€Œæœ€åä¸€ä¸ªIPç«¯å£çš„è¡¨ç¤ºæ˜¯é€šè¿‡æ— çº¿ç½‘ç»œçš„æ–¹å¼è¿æ¥çš„ã€‚ å¦‚æœæˆ‘ä»¬åŒæ—¶è¿æ¥äº†å¤šä¸ªè®¾å¤‡ï¼Œéœ€è¦æ“ä½œå…¶ä¸­ä¸€å°è®¾å¤‡ï¼Œå¯ä»¥é€šè¿‡-s [serialNumber]æ–¹å¼æ¥æ‰§è¡Œï¼š 12$ adb -s 9d03b4c4 shell wm size# Physical size: 1080x1920 æ¯”å¦‚ä¸Šé¢çš„æŒ‡ä»¤ï¼Œæˆ‘ä»¬æŒ‡å®š9d03b4c4è¿™ä¸ªè®¾å¤‡æ¥è·å–å±å¹•åˆ†è¾¨ç‡ã€‚ adb shell Androidç³»ç»Ÿæ˜¯åŸºäºLinuxå†…æ ¸çš„ï¼Œæ‰€ä»¥Linuxé‡Œçš„å¾ˆå¤šå‘½ä»¤åœ¨Androidé‡Œä¹Ÿæœ‰ç›¸åŒæˆ–ç±»ä¼¼çš„å®ç°ï¼Œåœ¨adb shellé‡Œå¯ä»¥è°ƒç”¨ï¼›è¿›å…¥è®¾å¤‡çš„shellç•Œé¢ï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨å¾ˆå¤šæŒ‡ä»¤ï¼š 12$ adb shellshell@PD1415BA:/ $ æ­¤æ—¶å¦‚æœæƒ³è¦é€€å‡ºå¯ä»¥è¾“å…¥exitï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡adb shell [æŒ‡ä»¤]çš„æ–¹å¼æ‰§è¡Œï¼Œä¸éœ€è¦è¿›å…¥è®¾å¤‡çš„shellç•Œé¢ã€‚ 123456789101112# æŸ¥çœ‹æ‰€æœ‰å®‰è£…çš„apkåŒ…åadb shell pm list package# æŸ¥çœ‹å®æ—¶èµ„æºå ç”¨æƒ…å†µadb shell top# æˆªå›¾ä¿å­˜åˆ°è®¾å¤‡é‡Œadb shell screencap -p /sdcard/sc.png# å½•åˆ¶å±å¹•adb shell screenrecord /sdcard/sr.mp4# æ¨¡æ‹ŸæŒ‰é”®/è¾“å…¥adb shell input keyevent &lt;keycode&gt;# æ»‘åŠ¨å±å¹•adb shell input swipe 300 1000 300 500 adb install/uninstall å®‰è£…å’Œå¸è½½apk 123456# å®‰è£…æ—¶æŒ‡å®šapkçš„è·¯å¾„$ adb install d:\\chrome.apk# å¸è½½apkæ—¶æŒ‡å®šåŒ…å# åŒ…åæ˜¯ä¸Šé¢pmè·å–åˆ°çš„package$ adb uninstall com.tencent.mobileqq adb pull/push åœ¨è°ƒè¯•è®¾å¤‡å’Œå¼€å‘PCä¹‹é—´æ‹·è´æ–‡ä»¶ï¼Œä»PCæ‹·è´æ–‡ä»¶åˆ°è®¾å¤‡ä¸­ç”¨pushï¼›ç”¨è®¾å¤‡æ‹·è´æ–‡ä»¶åˆ°PCä¸­ç”¨pullã€‚ 12$ adb push d:\\1.png /sdcard/$ adb pull /sdcard/2.png d:\\temp\\ æ— çº¿è¿æ¥ é€šè¿‡æ— çº¿ç½‘ç»œè¿æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ— éœ€USBå®é™…è¿æ¥è®¾å¤‡ï¼Œä¹Ÿå¯ä»¥é¿å…USBè¿æ¥ä¸ç¨³å®šç­‰é—®é¢˜å‡ºç°ã€‚ é¦–å…ˆç¡®ä¿ADBçš„ç‰ˆæœ¬ä¸å®œè¿‡ä½ï¼ˆè‡³å°‘30.0.0ï¼‰ï¼Œç„¶åå°†Androidè®¾å¤‡å’Œè°ƒè¯•PCæœºè¿æ¥åˆ°åŒä¸€ä¸ªå±€åŸŸç½‘ï¼›é¦–æ¬¡è¿æ¥æˆ‘ä»¬è¿˜æ˜¯éœ€è¦å°†æ‰‹æœºé€šè¿‡USBè¿æ¥PCï¼Œç„¶åå¼€å¯è°ƒè¯•çš„ç«¯å£ï¼Œç«¯å£å·å»ºè®®é€‰ç”¨ä¸å¸¸ç”¨æœªè¢«å ç”¨çš„ç«¯å£ï¼š 12$ adb tcpip 1314restarting in TCP mode port: 1314 ç«¯å£å¼€å¯åï¼Œæˆ‘ä»¬å°±å¯ä»¥ç§»é™¤USBçš„è¿æ¥ï¼Œç„¶åæŸ¥çœ‹æ‰‹æœºWiFiçš„IPåœ°å€ï¼Œç„¶åé€šè¿‡adbå»è¿›è¡Œè¿æ¥ï¼š 12$ adb connect 192.168.0.180:1314connected to 192.168.0.180:1314 è¿æ¥åæˆ‘ä»¬å¯ä»¥é€šè¿‡devicesæ¥æŸ¥çœ‹è®¾å¤‡æ˜¯å¦è¿æ¥æˆåŠŸï¼š 123$ adb devicesList of devices attached192.168.0.120:1314 device IOSç¯å¢ƒé…ç½® IOSä¸‹çš„ç¯å¢ƒé…ç½®ç›¸è¾ƒäºå®‰å“åˆ™è¦å®¹æ˜“äº›ï¼Œä¸éœ€è¦é…ç½®é‚£ä¹ˆå¤šç¹ççš„ç¯å¢ƒå˜é‡ï¼Œåªè¦æŠŠXcodeçš„IDEå’ŒXcodeçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ä»APPå¼€å‘è€…å®˜ç½‘ä¸Šä¸‹è½½ï¼›ç„¶åæˆ‘ä»¬è¿˜è¦è£…ä¸€äº›å…¶ä»–çš„è½¯ä»¶ï¼š 12brew install nodebrew install watchman Watchmanæ˜¯ facebook çš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå®ƒå¼€æºç”¨æ¥ç›‘è§†æ–‡ä»¶å¹¶ä¸”è®°å½•æ–‡ä»¶çš„æ”¹åŠ¨æƒ…å†µï¼Œå½“æ–‡ä»¶å˜æ›´å®ƒå¯ä»¥è§¦å‘ä¸€äº›æ“ä½œ,ä¾‹å¦‚æ‰§è¡Œä¸€äº›å‘½ä»¤ç­‰ç­‰ã€‚ ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨yarnæ¥ä»£æ›¿npmç®¡ç†æˆ‘ä»¬çš„ä¾èµ–åŒ…ï¼Œæ–¹ä¾¿åŠ é€Ÿä¸‹è½½ã€‚ 1npm install -g yarn å¯åŠ¨Xcodeï¼Œåœ¨Xcode -&gt; Preferences -&gt; Locationsèœå•ä¸­æ£€æŸ¥æ˜¯å¦é…ç½®æŸä¸ªç‰ˆæœ¬çš„Command Line Toolsï¼š å®‰è£…IOSæ¨¡æ‹Ÿå™¨åªéœ€è¦åœ¨Xcode -&gt; Preferences -&gt; Componentsä¸‹ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸åŒç‰ˆæœ¬çš„æ¨¡æ‹Ÿå™¨ï¼Œä¸‹è½½å¯åŠ¨å³å¯ã€‚å¯åŠ¨æ¨¡æ‹Ÿå™¨çš„æ—¶å€™å¯èƒ½ä¼šé‡åˆ°ä¸‹é¢çš„æŠ¥é”™ï¼š 12fatal error: &#x27;React/RCTBridgeDelegate.h&#x27; file not found #import &lt;React/RCTBridgeDelegate.h&gt; åŸå› æ˜¯ä¸€äº›ä¾èµ–æ²¡æœ‰å®‰è£…ï¼Œåˆ‡æ¢åˆ°iosçš„ç›®å½•ä¸‹è¿›è¡Œå®‰è£…ï¼š 12cd /iospod install åˆ›å»ºå’Œè¿è¡ŒRNé¡¹ç›® æˆ‘ä»¬å…ˆå®‰è£…React Nativeè„šæ‰‹æ¶ï¼Œç„¶åé€šè¿‡è„šæ‰‹æ¶æ¥åˆ›å»ºä¸€ä¸ªdemoé¡¹ç›®ï¼š 12npm install -g react-native-clireact-native init RNDemo æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€å°å®‰å“è®¾å¤‡äº†ï¼Œæ—¢å¯ä»¥æ˜¯çœŸæœºï¼Œä¹Ÿå¯ä»¥æ˜¯å®‰å“æ¨¡æ‹Ÿå™¨ï¼›å®‰å“å®˜æ–¹æä¾›äº†Android Virtual Deviceï¼ˆç®€ç§° AVDï¼‰çš„æ¨¡æ‹Ÿå™¨ï¼Œåœ¨Android Studioä¸­ï¼Œæ‰“å¼€AVD Manageræ¥åˆ›å»ºå’Œç®¡ç†æ¨¡æ‹Ÿå™¨ï¼Œä¸è¿‡å®˜æ–¹çš„æ€§èƒ½è¾ƒå·®ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€äº›ç¬¬ä¸‰æ–¹çš„ã€‚ è¿™é‡Œæ¨èå¤œç¥æ¨¡æ‹Ÿå™¨ï¼Œå®‰è£…åé€šè¿‡adbè¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®é‡Œè¿è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘å’Œå®‰è£…ï¼š 1npm run android éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸€æ¬¡ç¼–è¯‘éœ€è¦ä¸‹è½½ä¾èµ–ï¼Œä¼šæ¯”è¾ƒæ…¢ï¼›å¦‚æœé…ç½®éƒ½æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨è®¾å¤‡ä¸Šçœ‹åˆ°æˆ‘ä»¬ç¬¬ä¸€ä¸ªRNåº”ç”¨äº†ï¼š åœ¨Macä¸­åˆ™è¿è¡Œnpm run ioså‘½ä»¤ï¼Œå¯åŠ¨iosçš„æ¨¡æ‹Ÿå™¨ï¼š æˆ‘ä»¬æ¥çœ‹ä¸‹package.jsonä¸­æœ‰å“ªäº›å¯åŠ¨å‘½ä»¤ï¼š 1234567891011# å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨npm run start# å°†APPè¿è¡Œåœ¨iOSè®¾å¤‡ä¸Šï¼Œä»…ä»…Macç³»ç»Ÿæ”¯æŒï¼Œä¸”éœ€è¦å®‰è£…Xcodeã€‚npm run ios# å°†APPè¿è¡Œåœ¨Androidè®¾å¤‡ä¸Šï¼Œéœ€è¦Androidæ„å»ºå·¥å…·ã€‚npm run android # è¿è¡Œæµ‹è¯•ç”¨ä¾‹ã€‚npm test å¾ˆå¤šç«¥é‹çœ‹åˆ°è¿™å‡ ä¸ªå‘½ä»¤å¾ˆç–‘æƒ‘ï¼Œnpm run startå’Œnpm run android/iosä¸éƒ½æ˜¯å¯åŠ¨ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ npm run android/iosåœ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨çš„åŒæ—¶ï¼Œä¼šæ£€æµ‹æœ‰æ²¡æœ‰è®¾å¤‡å·²ç»è¿æ¥ï¼›å¦‚æœæœ‰çš„è¯ï¼Œä¼šå°†å¼€å‘åŒ…å®‰è£…åˆ°å¼€å‘è®¾å¤‡ä¸­ï¼ˆå®‰å“orè‹¹æœæ‰‹æœºï¼‰ï¼Œè€Œnpm run startåªæ˜¯å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå¹¶ä¸å®‰è£…åº”ç”¨ç¨‹åºï¼Œå¦‚æœä½ çš„å¼€å‘è®¾å¤‡ä¸­å·²ç»æœ‰å¼€å‘åŒ…ï¼Œåªéœ€è¦å¯åŠ¨æœåŠ¡å™¨å³å¯ã€‚ è°ƒè¯• RNçš„å¼€å‘ï¼Œä¸ä»…æ¶‰åŠReactä¸­jsçš„è°ƒè¯•ï¼Œè¿˜ä¼šæ¶‰åŠåˆ°æ ·å¼ã€åŸç”Ÿç»„ä»¶åŠŸèƒ½çš„è°ƒè¯•ï¼Œå› æ­¤ï¼ŒæŒæ¡è°ƒè¯•æ–¹å¼å¯¹æˆ‘ä»¬çš„åç»­çš„å¼€å‘æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ Developer Menuï¼ˆç®€ç§°DevMenuï¼‰æ˜¯React Nativeç»™å¼€å‘è€…å®šåˆ¶çš„ä¸€ä¸ªå¼€å‘è€…èœå•ï¼Œæ¥å¸®åŠ©å¼€å‘è€…è°ƒè¯•React Nativeåº”ç”¨ï¼›å¦‚æœæ˜¯åœ¨iOSæ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œï¼Œå¯ä»¥é€šè¿‡æŒ‰ä¸‹CommandâŒ˜ + D å¿«æ·é”®æ¥æ‰“å¼€ï¼šå¦‚æœæ˜¯åœ¨Androidå®˜ç½‘æ¨¡æ‹Ÿå™¨ä¸­ï¼Œåˆ™æ˜¯CommandâŒ˜ + Mï¼Œåœ¨ç¬¬ä¸‰æ–¹æ¨¡æ‹Ÿå™¨ä¸­ä¸€èˆ¬åœ¨ä¾§è¾¹æ ä¸­æœ‰ä¸€ä¸ªèœå•é”®ï¼›åœ¨AndroidçœŸæœºä¸­å¯ä»¥é€šè¿‡æ‘‡æ™ƒè®¾å¤‡æ¥æ‰“å¼€ã€‚ å¼€å‘è€…èœå•åœ¨ç”Ÿäº§ç¯å¢ƒçš„åº”ç”¨ä¸‹æ˜¯ä¸èƒ½å”¤èµ·çš„ã€‚ æˆ‘ä»¬çœ‹åˆ°èœå•ä¸­æœ‰ä¸‹é¢å‡ ä¸ªé€‰é¡¹ï¼š Reloadï¼šåˆ·æ–°é¡µé¢ Change Bundle Locationï¼šæ”¹å˜æ‰“åŒ…åçš„åœ°å€ Show Element Inspectï¼šæ˜¾ç¤ºå…ƒç´ æ£€æŸ¥ Disable Fast Refreshï¼šç¦æ­¢å¿«é€Ÿåˆ·æ–° Show Perf Monitorï¼šè¯¥åŠŸèƒ½å¯ç”¨åä¼šæ˜¾ç¤ºä¸€ä¸ªç›‘æ§çª—å£ï¼Œæ˜¾ç¤ºå‡ºå®æ—¶çš„å†…å­˜å ç”¨ã€UI å’Œ JavaScript çš„ FPS ç­‰ä¿¡æ¯ã€‚å¸®åŠ©æˆ‘ä»¬è°ƒè¯•æ€§èƒ½é—®é¢˜ã€‚ Settingsï¼šè®¾ç½® Enable Sampling Profilerï¼šå¯ç”¨é‡‡æ ·åˆ†æå™¨ Debugï¼šå¼€å¯è°ƒè¯• å½“æˆ‘ä»¬ä¿®æ”¹RNçš„ä»£ç åï¼Œè‚¯å®šæƒ³ç¬¬ä¸€æ—¶é—´å°±èƒ½çœ‹åˆ°ä¿®æ”¹åçš„æ•ˆæœï¼Œåœ¨åŸç”ŸAppçš„å¼€å‘ä¸­ï¼Œä¿®æ”¹åç»å¸¸éœ€è¦é‡æ–°ç¼–è¯‘ã€è¿è¡Œç­‰æ‰å¯ä»¥çœ‹åˆ°æ•ˆæœï¼›ä½†æ˜¯RNä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡å¼€å‘è€…èœå•ä¸Šçš„ReloadæŒ‰é’®è‡ªåŠ¨å®Œæˆä»£ç çš„æ‰“åŒ…ç¼–è¯‘å’Œè¿è¡Œï¼Œæ–¹ä¾¿æˆ‘ä»¬ä¿®æ”¹åç›´æ¥æŸ¥çœ‹æ•ˆæœã€‚ ä½†æ˜¯RNè§‰å¾—è¿™æ ·è¿˜æ˜¯è¦å»ç‚¹å‡»ReloadæŒ‰é’®ï¼Œè¿˜ä¸å¤Ÿï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆæ›´åŠ â€œå·æ‡’â€çš„æ–¹å¼èƒ½å¤Ÿè‡ªåŠ¨å¸®æˆ‘ä»¬è§¦å‘Reloadå‘¢ï¼Ÿè¿™å°±æ˜¯å¿«é€Ÿåˆ·æ–°ï¼ˆFast Refreshï¼‰åŠŸèƒ½ï¼ŒRNåœ¨ç›‘æµ‹åˆ°JSä»£ç æ›´æ”¹åï¼Œè‡ªåŠ¨ç¼–è¯‘è¿è¡Œï¼Œç«‹å³å°±èƒ½çœ‹æ›´æ”¹åçš„æ•ˆæœï¼›å¦‚æœè§‰å¾—å¤ªé¢‘ç¹äº†ï¼Œå¯ä»¥Disableç¦ç”¨è¯¥åŠŸèƒ½ã€‚ å½“æˆ‘ä»¬åªå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œadbä¹Ÿå·²ç»è¿æ¥è®¾å¤‡ï¼Œä½†æ˜¯åœ¨å¼€å‘è®¾å¤‡ä¸­å‡ºç°No apps connected. Sending &quot;reload&quot; to all React Native apps failedçš„é”™è¯¯æç¤ºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å¼€å‘è€…èœå•ä¸­é€‰æ‹©Change Bundle Locationï¼Œç„¶åè¾“å…¥``:8081```æ¥è¿æ¥æˆ‘ä»¬çš„å¼€å‘æœåŠ¡å™¨ã€‚ Show Element Inspecté€‰é¡¹å¯ä»¥è°ƒå‡ºå…ƒç´ æ£€æŸ¥çš„æ‚¬æµ®æ¡†ï¼Œå±•ç¤ºå½“å‰é€‰ä¸­å…ƒç´ çš„ä½ç½®ã€æ ·å¼ã€å±‚çº§å…³ç³»ã€ç›’å­æ¨¡å‹ä¿¡æ¯ç­‰ç­‰ï¼Œæœ‰ç‚¹ç±»ä¼¼Chromeçš„DevToolsï¼Œè®©æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è°ƒè¯•å…ƒç´ çš„æ ·å¼ã€‚ Debugå…è®¸æˆ‘ä»¬åœ¨Chromeä¸­è°ƒè¯•åº”ç”¨ï¼Œå…¶è°ƒè¯•æ–¹å¼å’Œæˆ‘ä»¬åœ¨Webä¸­è°ƒè¯•ä¸€æ¨¡ä¸€æ ·ï¼›ç‚¹å‡»è¯¥é€‰é¡¹ï¼Œä¼šè‡ªåŠ¨å¯åŠ¨Chromeæµè§ˆå™¨ï¼Œå¹¶ä¸”æ‰“å¼€ä¸€ä¸ªhttp://localhost:8081/debugger-ui/çš„æ–°æ ‡ç­¾é¡µï¼Œåœ¨è¿™ä¸ªæ ‡ç­¾é¡µé‡Œï¼Œæˆ‘ä»¬æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œå°±èƒ½çœ‹åˆ°JSè¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯äº†ã€‚ åœ¨Sources Tabé¡µä¸­è¿˜å¯ä»¥æ˜¾ç¤ºå½“å‰è°ƒè¯•é¡¹ç›®çš„æ‰€æœ‰jsæ–‡ä»¶ã€‚å¹¶åœ¨ä¸Šé¢è¿›è¡Œæ–­ç‚¹è°ƒè¯•ã€‚ é¡¹ç›®ç»“æ„ ç†Ÿæ‚‰é¡¹ç›®çš„ç»“æ„ï¼Œæ˜¯é¡¹ç›®ä¸Šæ‰‹çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€é‡è¦çš„ä¸€æ­¥ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ›´å¥½çš„ç†è§£é¡¹ç›®ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹é¡¹ç›®ä¸­æ¯ä¸ªæ–‡ä»¶æ˜¯åšä»€ä¹ˆçš„ï¼š 123456789101112RNDemo â”œâ”€â”€ /_test_ # æµ‹è¯•ç›®å½• â”œâ”€â”€ /android # Androidçš„åŸç”Ÿå¼€å‘ç›®å½•ï¼Œå¯ä»¥ç”¨Android Studioæ‰“å¼€è¿›è¡ŒåŸç”Ÿå¼€å‘ã€‚ â”œâ”€â”€ /ios # Iosçš„åŸç”Ÿå¼€å‘ç›®å½•ï¼Œå¯ä»¥ç”¨Xcodeæ‰“å¼€è¿›è¡ŒåŸç”Ÿå¼€å‘ã€‚ â”œâ”€â”€ .buckconfig # buckçš„é…ç½®æ–‡ä»¶ï¼Œbuckæ˜¯Facebookæ¨å‡ºçš„ä¸€æ¬¾é«˜æ•ˆç‡çš„Appé¡¹ç›®æ„å»ºå·¥å…·ã€‚ â”œâ”€â”€ .eslintrc.js # eslinté…ç½®æ–‡ä»¶ â”œâ”€â”€ .flowconfig # Flowçš„é…ç½®æ–‡ä»¶ â”œâ”€â”€ .watchmanconfig # ç”¨äºç›‘æ§bugæ–‡ä»¶å’Œæ–‡ä»¶å˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥å‡ºå‘æŒ‡å®šçš„æ“ä½œã€‚ â”œâ”€â”€ App.js # æ•´ä¸ªAppçš„å…¥å£æ–‡ä»¶ï¼Œæ¯”å¦‚æ•´ä¸ªé¡¹ç›®çš„è·¯ç”±åœ¨è¿™é‡Œå¯¼å…¥ â”œâ”€â”€ app.json # ç»™åŸç”Ÿappæ‰“åŒ…ç”¨ï¼ŒåŒ…æ‹¬é¡¹ç›®åç§°å’Œæ‰‹æœºæ¡Œé¢å±•ç¤ºåç§° â”œâ”€â”€ index.js # iosæˆ–androidçš„å…¥å£ â”œâ”€â”€ metro.config.js # Metroé…ç½®æ–‡ä»¶ index.jsè¿™ä¸ªæ–‡ä»¶æ˜¯IOSå’ŒAndroidåœ¨ç›¸åº”è®¾å¤‡ä¸Šæ‰“åŒ…è¿è¡Œçš„å…¥å£æ–‡ä»¶ï¼Œåœ¨0.49ä¹‹å‰ç‰ˆæœ¬çš„React Nativeé¡¹ç›®ï¼Œå…¥å£åˆ™æ˜¯index.ios.jså’Œindex.android.jsä¸¤ä¸ªå•ç‹¬çš„å…¥å£æ–‡ä»¶ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"ç§»åŠ¨ç«¯","slug":"Apps","permalink":"https://xieyufei.com/tags/Apps/"},{"name":"React","slug":"React","permalink":"https://xieyufei.com/tags/React/"},{"name":"ReactNative","slug":"ReactNative","permalink":"https://xieyufei.com/tags/ReactNative/"}]},{"title":"TypeScriptä»å¹³å‡¡åˆ°ä¸å‡¡ï¼ˆè¿›é˜¶ç¯‡ï¼‰","date":"2021-09-20T13:36:00.000Z","path":"2021/09/20/TypeScript-Advance.html","text":"åœ¨ä¸Šä¸€ç¯‡tsåŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†tsçš„åŸºç¡€ç±»å‹å’Œå¦‚ä½•å®šä¹‰äº†æ•°ç»„å¯¹è±¡å‡½æ•°ç­‰ï¼›åœ¨è¿™ä¸€TypeScriptè¿›é˜¶ç¯‡ï¼Œæˆ‘ä»¬æ¥ä»‹ç»TSçš„é«˜çº§ç”¨æ³•ï¼Œæ¯”å¦‚æ³›å‹å’Œåœ¨é¡¹ç›®ä¸­å¦‚ä½•è¿›è¡Œé…ç½®ä»¥åŠä½¿ç”¨ã€‚ å£°æ˜æ–‡ä»¶ å½“ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œæœ‰ä¸€äº›é€šè¿‡scriptæ ‡ç­¾å¼•å…¥çš„å…¨å±€å˜é‡ï¼ŒTypeScriptä¼šå‡ºç°è¯†åˆ«ä¸åˆ°è€ŒæŠ¥é”™çš„æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œå£°æ˜ï¼Œè¿™äº›å£°æ˜å°±éœ€è¦å†™åˆ°å£°æ˜æ–‡ä»¶ä¸­ã€‚æ¯”å¦‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨jQueryï¼Œåœ¨å…¨å±€ä½¿ç”¨å˜é‡$æˆ–jQueryï¼š 12345$(&#x27;#foo&#x27;);// orjQuery(&#x27;#foo&#x27;);// æŠ¥é”™ï¼š// Cannot find name &#x27;$&#x27;. Do you need to install type definitions for jQuery? Try `npm i --save-dev @types/jquery` and then add `jquery` to the types field in your tsconfig. æˆ‘ä»¬å°±éœ€è¦å°†jQueryçš„å£°æ˜è¯­å¥æ”¾åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œè¿™å°±æ˜¯å£°æ˜æ–‡ä»¶ï¼š 123// src/jQuery.d.tsdeclare let $: (selector: string) =&gt; any;declare let jQuery: (selector: string) =&gt; any; ä¸€èˆ¬tsä¼šè§£æé¡¹ç›®srcæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰.tsæ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿä¼šè§£æ.d.tsæ–‡ä»¶ï¼Œè¿™æ ·æ‰€æœ‰çš„tsæ–‡ä»¶å°±ä¼šå¾—åˆ°jQueryçš„ç±»å‹å®šä¹‰äº†ã€‚ åŠ è½½ç¤¾åŒºå£°æ˜æ–‡ä»¶ å½“ç„¶ï¼ŒjQueryçš„å£°æ˜æ–‡ä»¶ï¼Œç¤¾åŒºå·²ç»å†™å¥½äº†ï¼Œä¸éœ€è¦æˆ‘ä»¬è‡ªå·±æ¥å®šä¹‰ï¼›æˆ‘ä»¬å¯ä»¥ä½¿ç”¨@typesæ¥ç®¡ç†å£°æ˜æ–‡ä»¶ï¼š 1npm install @types/jquery --save-dev é€šè¿‡é…ç½®tsconfig.jsonï¼Œå°†å£°æ˜æ–‡ä»¶å¼•å…¥ï¼š 12345678&#123; &quot;compilerOptions&quot;: &#123; &quot;types&quot; : [ // å…¶ä»–é…ç½® &quot;jquery&quot; ] &#125;&#125; ç¼–å†™è‡ªå·±çš„å£°æ˜æ–‡ä»¶ å£°æ˜æ–‡ä»¶çš„è¯­æ³•ä¸»è¦æœ‰ä¸‹é¢å‡ ç§ï¼š declare let å’Œ declare const å£°æ˜å…¨å±€å˜é‡ declare function å£°æ˜å…¨å±€æ–¹æ³• declare class å£°æ˜å…¨å±€ç±» declare enum å£°æ˜å…¨å±€æšä¸¾ç±»å‹ declare namespace å£°æ˜ï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å…¨å±€å¯¹è±¡ interface å’Œ type å£°æ˜å…¨å±€ç±»å‹ declare let å’Œ declare constå£°æ˜æ˜¯æœ€ç®€å•çš„ï¼Œç”¨æ¥å£°æ˜ä¸€ä¸ªå…¨å±€å˜é‡ç±»å‹ï¼›letå®šä¹‰çš„å…¨å±€å˜é‡å…è®¸ä¿®æ”¹ï¼Œè€Œconstå®šä¹‰çš„åˆ™ä¸å…è®¸ä¿®æ”¹ 123456789// src/jQuery.d.tsdeclare let $: (selector: string) =&gt; any;declare const jQuery: (selector: string) =&gt; any;// src/main.js$ = function()&#123;&#125;// æŠ¥é”™// ERROR: Cannot assign to &#x27;jQuery&#x27; because it is a constant or a read-only property.jQuery = function()&#123;&#125; ä¸€èˆ¬æ¥è¯´ï¼Œå£°æ˜çš„å…¨å±€å˜é‡éƒ½æ˜¯ç¦æ­¢ä¿®æ”¹çš„å¸¸é‡ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†çš„æƒ…å†µéƒ½åº”è¯¥ä½¿ç”¨declare constè¿›è¡Œå£°æ˜ã€‚åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå£°æ˜è¯­å¥ä¸­åªèƒ½å®šä¹‰ç±»å‹ï¼Œè€Œä¸èƒ½å®šä¹‰å…·ä½“çš„å®ç°ä»£ç ã€‚ declare functionç”¨æ¥å®šä¹‰å…¨å±€å‡½æ•°çš„ç±»å‹ï¼ŒjQueryæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å‡½æ•°çš„æ–¹å¼æ¥è¿›è¡Œå®šä¹‰ï¼š 12// src/jQuery.d.tsdeclare function jQuery(selector: string): any; åœ¨å‡½æ•°å£°æ˜ä¸­ä¹Ÿèƒ½å¤Ÿæ”¯æŒå‡½æ•°é‡è½½ï¼š 123// src/jQuery.d.tsdeclare function jQuery(selector: string): any;declare function jQuery(domReadyCallback: () =&gt; any): any; declare classç”¨æ¥å£°æ˜ä¸€ä¸ªå…¨å±€ç±»ï¼š 123456789// src/Animal.d.tsdeclare class Animal &#123; name: string; constructor(name: string); sayHi(): string;&#125;// src/index.tslet cat = new Animal(&#x27;Tom&#x27;); declare enumç”¨æ¥å£°æ˜å…¨å±€æšä¸¾ç±»å‹ï¼š 12345678// src/Directions.d.tsdeclare enum Directions &#123; Up, Down, Left, Right&#125; declare namespaceç”¨æ¥å£°æ˜å«æœ‰å­å±æ€§çš„å…¨å±€å¯¹è±¡ï¼ˆæ¨¡å—ï¼‰ã€‚åˆšå¼€å§‹tsä½¿ç”¨moduleå…³é”®å­—æ¥è¡¨ç¤ºå†…éƒ¨çš„æ¨¡å—ï¼Œä½†éšç€ES6ä¹Ÿä½¿ç”¨äº†moduleå…³é”®å­—ï¼Œtsä¸ºäº†å…¼å®¹ES6ï¼Œä»1.5ç‰ˆæœ¬å¼€å§‹å°†moduleæ”¹åä¸ºnamespaceï¼›æ¯”å¦‚jQueryæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡å¯¹è±¡ï¼Œå®ƒä¸Šé¢æŒ‚è½½äº†å¾ˆå¤šçš„æ–¹æ³•å¯ä»¥è°ƒç”¨ï¼Œæˆ‘ä»¬å°±é€šè¿‡namespaceæ¥è¿›è¡Œå£°æ˜ï¼š 12345// src/jQuery.d.tsdeclare namespace jQuery &#123; function ajax(url: string, settings?: any): void;&#125; åœ¨jQueryå†…éƒ¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨constã€classã€enumç­‰è¯­å¥è¿›è¡Œå£°æ˜ï¼š 123456789101112// src/jQuery.d.tsdeclare namespace jQuery &#123; function ajax(url: string, settings?: any): void; const version: number; class Event &#123; blur(eventType: EventType): void &#125; enum EventType &#123; CustomClick &#125;&#125; åŒæ—¶ï¼Œå¦‚æœéœ€è¦å£°æ˜çš„å¯¹è±¡å±‚çº§è¾ƒæ·±ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨namespaceè¿›è¡ŒåµŒå¥—å£°æ˜ï¼š 123456789101112131415161718// src/jQuery.d.tsdeclare namespace jQuery &#123; function ajax(url: string, settings?: any): void; namespace fn &#123; function extend(object: any): void; &#125;&#125;//src/main.tsjQuery.ajax(&#x27;/api/get&#x27;);jQuery.fn.extend(&#123; check: function() &#123; return this.each(function() &#123; this.checked = true; &#125;); &#125;&#125;); æ³›å‹ æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§ï¼›ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ç§åˆ›å»ºå¯å¤ç”¨ä»£ç ç»„ä»¶çš„å·¥å…·ï¼Œè¿™ç§ç»„ä»¶ä¸æ­¢èƒ½è¢«ä¸€ç§ç±»å‹ä½¿ç”¨ï¼Œè€Œæ˜¯èƒ½å¤Ÿè¢«å¤šç§ç±»å‹è¿›è¡Œå¤ç”¨ã€‚ ç®€å•çš„æ³›å‹ä¾‹å­ æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªé‡å¤å…ƒç´ åŠŸèƒ½çš„å‡½æ•°ï¼Œå°†ç»™å®šçš„å…ƒç´ é‡å¤ç»™å®šçš„æ¬¡æ•°ï¼Œæœ€åè¿”å›ä¸€ä¸ªæ•°ç»„ï¼š 12345678function repeatArray(value: string, length: number): Array&lt;string&gt; &#123; let list = []; for (let i = 0; i &lt; length; i++) &#123; list.push(value); &#125; return list;&#125;repeatArray(&quot;5&quot;, 3); æˆ‘ä»¬æ¥æ”¶äº†stringç±»å‹ï¼Œå¹¶ä¸”è¿”å›stringç±»å‹çš„æ•°ç»„ï¼›ä½†æ˜¯è¿™æ˜¾å¾—å¤ªæ­»æ¿äº†ï¼Œå› ä¸ºæˆ‘ä»¬åªèƒ½æ¥æ”¶stringç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¼ å…¥numberæˆ–è€…objectéƒ½ä¼šæŠ¥é”™ã€‚é‚£å¦‚æœæ”¹æˆanyå‘¢ï¼Ÿ 1234567function repeatArray(value: any, length: number): Array&lt;any&gt; &#123; let list = []; for (let i = 0; i &lt; length; i++) &#123; list.push(value); &#125; return list;&#125; ä½¿ç”¨anyä¼šå¯¼è‡´è¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶ä»»æ„ç±»å‹çš„å‚æ•°ï¼Œè¿™æ ·å°±å¯¼è‡´è¿™ä¸ªå‡½æ•°ç¼ºä¹äº†æœ‰æ•ˆçš„ä¿¡æ¯æç¤ºï¼Œä¸èƒ½å‘Šè¯‰å‡½æ•°çš„è°ƒç”¨è€…ä¼ å…¥ç±»å‹å’Œè¿”å›æ•°ç»„ä¸­çš„ç±»å‹åº”è¯¥æ˜¯ç›¸åŒçš„ï¼›å‡è®¾æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬åªèƒ½çŸ¥é“ä»»ä½•ç±»å‹çš„å€¼éƒ½æœ‰å¯èƒ½è¢«è¿”å›ã€‚ è¿™æ ·æˆ‘ä»¬å°±éœ€è¦é€šè¿‡æ³›å‹æ¥å®šä¹‰è¿™ä¸ªå‡½æ•°ï¼š 1234567function repeatArray&lt;T&gt;(value: T, length: number): Array&lt;T&gt; &#123; let list: T[] = []; for (let i = 0; i &lt; length; i++) &#123; list.push(value); &#125; return list;&#125; æˆ‘ä»¬åœ¨å‡½æ•°ååé¢æ·»åŠ äº†ç±»å‹å˜é‡&lt;T&gt;ï¼ŒTç”¨æ¥æŒ‡ä»£ä»»æ„è¾“å…¥çš„ç±»å‹ï¼Œåœ¨åé¢çš„è¾“å…¥å‚æ•°çš„ç±»å‹å’Œè¾“å‡ºå‡½æ•°çš„ç±»å‹ä¸­éƒ½å¯ä»¥ä½¿ç”¨ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å­—æ¯Tåªæ˜¯ä»£è¡¨äº†ä¸€ä¸ªå˜é‡ï¼Œåœ¨æ•°å­¦ä¸­å’Œxã€yçš„æ€§è´¨æ˜¯ä¸€æ ·çš„ï¼›æˆ‘ä»¬è¿˜å¯ä»¥ç”¨å…¶ä»–çš„å‚æ•°ï¼Œæ¯”å¦‚ç”¨Sã€Uã€Tã€Yç­‰å…¶ä»–å­—æ¯æ¥æ›¿ä»£ã€‚ å®šä¹‰æ³›å‹å‡½æ•°åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ç§æ–¹å¼æ¥è°ƒç”¨ï¼Œç¬¬ä¸€ç§ï¼Œä¼ å…¥æ‰€æœ‰çš„å‚æ•°ï¼ŒåŒ…å«ç±»å‹å‚æ•°ï¼š 12let list1 = repeatArray&lt;string&gt;(&quot;5&quot;, 3);let list2 = repeatArray&lt;number&gt;(6, 5); ç¬¬äºŒç§æ–¹å¼ï¼Œåˆ©ç”¨ç±»å‹æ¨è®ºï¼Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨ç¡®å®šç±»å‹å˜é‡çš„ç±»å‹ï¼š 12let list1 = repeatArray(&quot;5&quot;, 3);let list2 = repeatArray(6, 5); å¤šä¸ªç±»å‹å‚æ•° åœ¨å®šä¹‰å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½ä¼šç”¨åˆ°å¤šä¸ªæ³›å‹å˜é‡ï¼Œï¼Œç”¨é€—å·åˆ†éš”è¿™å¤šä¸ªå˜é‡ï¼š 12345function swap&lt;T, U&gt;(tuple: [T, U]): [U, T] &#123; return [tuple[1], tuple[0]];&#125;swap([7, &#x27;seven&#x27;]); // [&#x27;seven&#x27;, 7] åœ¨swapå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡2ä¸ªå˜é‡æ¥äº¤æ¢è¾“å…¥çš„æ•°ç»„ä¸­çš„å…ƒç´  æ³›å‹ç±» æˆ‘ä»¬ä¸ä»…ç”¨æ³›å‹å®šä¹‰å‡½æ•°ï¼Œè¿˜å¯ä»¥ç”¨æ³›å‹å®šä¹‰ä¸€ä¸ªç±»ï¼Œå’Œå‡½æ•°ç±»ä¼¼ï¼Œä¹Ÿæ˜¯é€šè¿‡&lt;T&gt;è·Ÿåœ¨ç±»ååé¢ï¼š 123456789101112class Animal&lt;T&gt; &#123; name: T; constructor(name: T) &#123; this.name = name; &#125; sayName(): T &#123; return this.name; &#125;&#125;let dog = new Animal(&quot;tom&quot;);dog.sayName() æ³›å‹çº¦æŸ åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨æ³›å‹å˜é‡ä¸Šçš„å±æ€§ï¼Œç”±äºä¸çŸ¥é“å®ƒçš„ç±»å‹ï¼ˆç­‰åŒäºUnknowç±»å‹ï¼‰ï¼Œå› æ­¤ä¸èƒ½éšæ„è°ƒç”¨å±æ€§å’Œæ–¹æ³•ï¼š 123456function showLength&lt;T&gt;(arg: T): T &#123; //æŠ¥é”™ï¼š //Property &#x27;length&#x27; does not exist on type &#x27;T&#x27;. console.log(arg.length); return arg;&#125; æ³›å‹å˜é‡Tä¸ä¸€å®šæœ‰å±æ€§lengthï¼Œå› æ­¤ä¼šæŠ¥é”™ï¼›æˆ‘ä»¬å¯ä»¥å¯¹æ³›å‹å˜é‡è¿›è¡Œçº¦æŸï¼Œåªå…è®¸ä¼ å…¥åŒ…å«lengthå±æ€§çš„å˜é‡ï¼š 123456789101112131415interface Lengthwise &#123; length: number;&#125;function showLength&lt;T extends Lengthwise&gt;(arg: T): T &#123; console.log(arg.length); return arg;&#125;showLength(&#x27;123&#x27;)showLength([])showLength(&#123; length: 3, value: 4 &#125;)// æŠ¥é”™ï¼š// Argument of type &#x27;number&#x27; is not assignable to parameter of type &#x27;Lengthwise&#x27;showLength(5) å¦å¤–ï¼Œå¤šä¸ªæ³›å‹å‚æ•°ä¹‹é—´ä¹Ÿå¯ä»¥äº’ç›¸çº¦æŸï¼š 12345678function copy&lt;T extends U, U&gt;(target: T, source: U): T &#123; for (let id in source) &#123; target[id] = (&lt;T&gt;source)[id]; &#125; return target;&#125;copy(&#123; a: 1, b: 2, c: 3 &#125;, &#123; a: 1, b: 2 &#125;); æˆ‘ä»¬å°†sourceä¸Šæ‰€æœ‰çš„å±æ€§æ‹·è´åˆ°targetä¸Šï¼Œé€šè¿‡T extends Uï¼Œä¿è¯äº†sourceä¸Šæ‰€æœ‰çš„å±æ€§åœ¨targetä¸Šéƒ½æœ‰ã€‚ æ³›å‹æ¥å£ åœ¨tsåŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ¥å£æ¥å®šä¹‰äº†å‡½æ•°è¡¨è¾¾å¼ï¼š 123456interface ISumFunc &#123; (x: number, y: number): number;&#125;let sum: ISumFunc = function (x, y) &#123; return x + y;&#125;; åŒæ—¶å¯ä»¥ä½¿ç”¨å«æœ‰æ³›å‹çš„æ¥å£æ¥çº¦æŸå‡½æ•°ï¼š 12345678910111213141516interface CreateArrayFn &#123; &lt;T&gt;(length: number, item: T): Array&lt;T&gt;;&#125;let createList: CreateArrayFn;createList = function &lt;T&gt;(len: number, item: T): Array&lt;T&gt; &#123; let list: T[] = []; for (let i = 0; i &lt; len; i++) &#123; list.push(item); &#125; return list;&#125;;createList(3, &quot;4&quot;);createList(3, 5); é¡¹ç›®é…ç½® è¯´äº†è¿™ä¹ˆå¤štsçš„çŸ¥è¯†ï¼Œæˆ‘ä»¬æ¥æŠŠä»–ç»“åˆåˆ°é¡¹ç›®ä¸­è¿›è¡Œä½¿ç”¨å’Œé…ç½®ã€‚ tsconfig.jsoné…ç½®æ–‡ä»¶è¯¦è§£ tsconfig.jsonæ˜¯tsç¼–è¯‘å™¨çš„é…ç½®æ–‡ä»¶ï¼Œtsç¼–è¯‘å™¨å¯æ ¹æ®å®ƒçš„ä¿¡æ¯æ¥å¯¹ä»£ç è¿›è¡Œç¼–è¯‘ï¼›è¿è¡Œtscï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•æˆ–è€…çˆ¶çº§ç›®å½•å¯»æ‰¾é…ç½®æ–‡ä»¶ã€‚åœ¨é…ç½®æ–‡ä»¶ä¸­å¯ä»¥é€šè¿‡compilerOptionsæ¥å®šåˆ¶æˆ‘ä»¬çš„ç¼–è¯‘é€‰é¡¹ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253&#123; &quot;compilerOptions&quot;: &#123; /* åŸºæœ¬é€‰é¡¹ */ &quot;target&quot;: &quot;es5&quot;, // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES6&#x27;/&#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, or &#x27;ESNEXT&#x27; &quot;module&quot;: &quot;commonjs&quot;, // æŒ‡å®šä½¿ç”¨æ¨¡å—: &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27; or &#x27;es2015&#x27; &quot;lib&quot;: [], // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶ &quot;allowJs&quot;: true, // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶ &quot;checkJs&quot;: true, // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯ &quot;jsx&quot;: &quot;preserve&quot;, // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27; &quot;declaration&quot;: true, // ç”Ÿæˆç›¸åº”çš„ &#x27;.d.ts&#x27; æ–‡ä»¶ &quot;sourceMap&quot;: true, // ç”Ÿæˆç›¸åº”çš„ &#x27;.map&#x27; æ–‡ä»¶ &quot;outFile&quot;: &quot;./&quot;, // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ &quot;outDir&quot;: &quot;./&quot;, // æŒ‡å®šè¾“å‡ºç›®å½• &quot;rootDir&quot;: &quot;./&quot;, // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir. &quot;removeComments&quot;: true, // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š &quot;noEmit&quot;: true, // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ &quot;importHelpers&quot;: true, // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•° &quot;isolatedModules&quot;: true, // å°†æ¯ä¸ªæ–‡ä»¶ä½œä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ &#x27;ts.transpileModule&#x27; ç±»ä¼¼ï¼‰. /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */ &quot;strict&quot;: true, // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹ &quot;noImplicitAny&quot;: true, // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™ &quot;strictNullChecks&quot;: true, // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥ &quot;noImplicitThis&quot;: true, // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯ &quot;alwaysStrict&quot;: true, // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ &#x27;use strict&#x27; /* é¢å¤–çš„æ£€æŸ¥ */ &quot;noUnusedLocals&quot;: true, // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯ &quot;noUnusedParameters&quot;: true, // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯ &quot;noImplicitReturns&quot;: true, // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯ &quot;noFallthroughCasesInSwitch&quot;: true, // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰ /* æ¨¡å—è§£æé€‰é¡¹ */ &quot;moduleResolution&quot;: &quot;node&quot;, // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6) &quot;baseUrl&quot;: &quot;./&quot;, // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½• &quot;paths&quot;: &#123;&#125;, // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨ &quot;rootDirs&quot;: [], // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹ &quot;typeRoots&quot;: [], // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨ &quot;types&quot;: [], // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨ &quot;allowSyntheticDefaultImports&quot;: true, // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚ /* Source Map Options */ &quot;sourceRoot&quot;: &quot;./&quot;, // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½® &quot;mapRoot&quot;: &quot;./&quot;, // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½® &quot;inlineSourceMap&quot;: true, // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶ &quot;inlineSources&quot;: true, // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§ /* å…¶ä»–é€‰é¡¹ */ &quot;experimentalDecorators&quot;: true, // å¯ç”¨è£…é¥°å™¨ &quot;emitDecoratorMetadata&quot;: true // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ &#125;&#125; ä¹Ÿå¯ä»¥é€šè¿‡filesæ˜¾å¼æŒ‡å®šéœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼š 12345&#123; &quot;files&quot;: [ &quot;./some/file.ts&quot; ]&#125; è¿˜å¯ä»¥ä½¿ç”¨includeå’Œexcludeé€‰é¡¹æ¥æŒ‡å®šéœ€è¦åŒ…å«çš„æ–‡ä»¶å’Œæ’é™¤çš„æ–‡ä»¶ï¼š 12345678910&#123; &quot;include&quot;: [ &quot;src/**/*.ts&quot;, &quot;src/**/*.tsx&quot;, &quot;src/**/*.vue&quot;, &quot;tests/**/*.ts&quot;, &quot;tests/**/*.tsx&quot; ], &quot;exclude&quot;: [&quot;node_modules&quot;]&#125; includeå’Œexcludeæ”¯æŒçš„globé€šé…ç¬¦æœ‰ï¼š *åŒ¹é…0æˆ–å¤šä¸ªå­—ç¬¦ï¼ˆä¸åŒ…æ‹¬ç›®å½•åˆ†éš”ç¬¦ï¼‰ ?åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬ç›®å½•åˆ†éš”ç¬¦ï¼‰ **/é€’å½’åŒ¹é…ä»»æ„å­ç›®å½• åœ¨tsä¸­ä½¿ç”¨ESLintå’ŒPrettier æœ‰äº›ç«¥é‹å¯èƒ½ä¼šæœ‰ç–‘æƒ‘äº†ï¼Œtsåœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½æ’æŸ¥å‡ºä»£ç é”™è¯¯ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ç”¨åˆ°eslintæ¥æ£€æŸ¥å‘¢ï¼Ÿå› ä¸ºtsé‡ç‚¹å…³æ³¨çš„æ˜¯ç±»å‹çš„æ£€æŸ¥ï¼Œè€Œä¸æ˜¯ä»£ç å’Œé£æ ¼çš„æ£€æŸ¥ï¼Œæœ‰ä¸€äº›ä»£ç çš„é—®é¢˜ï¼Œæ¯”å¦‚==ä¸===çš„æ£€æŸ¥ã€ç¦ç”¨varç­‰åŠŸèƒ½ï¼Œè¿˜æ˜¯éœ€è¦eslintæ¥é…åˆï¼›é¦–å…ˆåœ¨é¡¹ç›®ä¸­å®‰è£…eslintçš„ä¾èµ–ï¼š 1npm i eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin -D è¿™ä¸‰ä¸ªä¾èµ–çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š eslint: ESLintçš„æ ¸å¿ƒä»£ç  @typescript-eslint/parserï¼šESLintçš„è§£æå™¨ï¼Œç”¨äºè§£ætypescriptï¼Œä»è€Œæ£€æŸ¥å’Œè§„èŒƒTypescriptä»£ç  @typescript-eslint/eslint-pluginï¼šè¿™æ˜¯ä¸€ä¸ªESLintæ’ä»¶ï¼ŒåŒ…å«äº†å„ç±»å®šä¹‰å¥½çš„æ£€æµ‹Typescriptä»£ç çš„è§„èŒƒ å®‰è£…ä¾èµ–åæˆ‘ä»¬å°±å¯ä»¥åœ¨.eslintrc.jsä¸­é…ç½®æ’ä»¶ï¼š 123456789module.exports = &#123; parser: &#x27;@typescript-eslint/parser&#x27;, //å®šä¹‰ESLintçš„è§£æå™¨ extends: [&#x27;plugin:@typescript-eslint/recommended&#x27;],//å®šä¹‰æ–‡ä»¶ç»§æ‰¿çš„å­è§„èŒƒ plugins: [&#x27;@typescript-eslint&#x27;],//å®šä¹‰äº†è¯¥eslintæ–‡ä»¶æ‰€ä¾èµ–çš„æ’ä»¶ env:&#123; //æŒ‡å®šä»£ç çš„è¿è¡Œç¯å¢ƒ browser: true, node: true, &#125; &#125; åœ¨ä¸€æ–‡å½»åº•è¯»æ‡‚ESLintä¸­è¿˜ä»‹ç»äº†Eslinté…åˆäº†Prettierï¼Œåœ¨tsé¡¹ç›®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ­é…Prettieræ¥æ ¼å¼åŒ–ä»£ç ï¼Œé¦–å…ˆä¹Ÿæ˜¯è¿›è¡Œå®‰è£…ï¼š 1npm i -g prettier eslint-config-prettier eslint-plugin-prettier prettierï¼šprettieræ’ä»¶çš„æ ¸å¿ƒä»£ç  eslint-config-prettierï¼šè§£å†³ESLintä¸­çš„æ ·å¼è§„èŒƒå’Œprettierä¸­æ ·å¼è§„èŒƒçš„å†²çªï¼Œä»¥prettierçš„æ ·å¼è§„èŒƒä¸ºå‡†ï¼Œä½¿ESLintä¸­çš„æ ·å¼è§„èŒƒè‡ªåŠ¨å¤±æ•ˆ eslint-plugin-prettierï¼šå°†prettierä½œä¸ºESLintè§„èŒƒæ¥ä½¿ç”¨ ç„¶åè¿˜æ˜¯åœ¨.eslintrc.jsé…ç½®Prettierï¼š 123456789101112131415161718module.exports = &#123; parser: &#x27;@typescript-eslint/parser&#x27;, extends:[ &#x27;prettier/@typescript-eslint&#x27;, &#x27;plugin:prettier/recommended&#x27; ], parserOptions: &#123; &quot;ecmaVersion&quot;: 2019, &quot;sourceType&quot;: &#x27;module&#x27;, &quot;ecmaFeatures&quot;:&#123; jsx:true &#125; &#125;, env:&#123; browser: true, node: true, &#125; &#125; åœ¨vueä¸­ä½¿ç”¨ts åœ¨vueä¸­ä½¿ç”¨tsï¼Œæ¨èä½¿ç”¨åŸºäºç±»çš„æ³¨è§£è£…é¥°å™¨è¿›è¡Œå¼€å‘ï¼Œvueå®˜æ–¹æ¨èvue-class-componentæ’ä»¶ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­éƒ½ä¼šç”¨åˆ°vue-class-componentè¿™ä¸ªæ’ä»¶ï¼Œä¹Ÿæ˜¯vueç¤¾åŒºæ¨èçš„ï¼›å®ƒæ˜¯åŸºäºvue-class-componentå¼€å‘è€Œæˆï¼Œä½†æ˜¯æ€§èƒ½ä¸Šæœ‰ä¸€äº›æ”¹è¿›ï¼›ä»–å…·å¤‡ä»¥ä¸‹å‡ ä¸ªè£…é¥°å™¨å’ŒåŠŸèƒ½ï¼š @Component @Prop @PropSync @Model @Watch @Provide @Inject @ProvideReactive @InjectReactive @Emit @Ref æˆ‘ä»¬æ¥çœ‹ä¸‹æ¯ä¸ªè£…é¥°å™¨çš„ç”¨æ³•ï¼š @Component @Componentè£…é¥°å™¨æ¥å£ä¸€ä¸ªå¯¹è±¡åšå‚æ•°ï¼Œå¯ä»¥åœ¨å¯¹è±¡ä¸­å£°æ˜componentsï¼Œfiltersï¼Œdirectivesç­‰è£…é¥°å™¨çš„é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥å£°æ˜computedï¼Œwatchç­‰ã€‚ 1234567891011121314151617181920212223&lt;template&gt;&lt;div&gt; &lt;div&gt;&#123;&#123; firtName | filterName &#125;&#125;&lt;/div&gt; &lt;HelloWorld&gt;&lt;/HelloWorld&gt;&lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;import &#123; Component, Vue &#125; from &quot;vue-property-decorator&quot;;@Component(&#123; components: &#123; HelloWorld, &#125;, filters: &#123; filterName(val: string) &#123; return val + &quot;ï¼šfilter name&quot;; &#125;, &#125;,&#125;)export default class Home extends Vue &#123; private firtName = &quot;tom&quot;;&#125;&lt;/script&gt; é™¤äº†ä¸Šé¢ä»‹ç»çš„å±æ€§ï¼Œè¿˜å¯ä»¥æ³¨å†Œé’©å­å‡½æ•°ï¼š 123456789101112131415161718&lt;script lang=&quot;ts&quot;&gt;Component.registerHooks([ &quot;beforeRouteLeave&quot;, &quot;beforeRouteEnter&quot;,]);@Componentexport default class Home extends Vue &#123; beforeRouteLeave(to: any, from: any, next: any) &#123; console.log(&#x27;beforeRouteLeave&#x27;); next(); &#125; beforeRouteEnter(to: any, from: any, next: any) &#123; console.log(&#x27;beforeRouteLeave&#x27;); next(); &#125;&#125;&lt;/script&gt; @Prop @Propè£…é¥°å™¨åŒvueä¸­propsåŠŸèƒ½ç›¸åŒï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æœ‰ä¸‰ç§å†™æ³•ï¼š Constructorï¼šä¾‹å¦‚Stringï¼ŒNumberï¼ŒBooleanç­‰ï¼ŒæŒ‡å®š prop çš„ç±»å‹ï¼› Constructor[]ï¼šæŒ‡å®š prop çš„å¯é€‰ç±»å‹ï¼› PropOptionsï¼šå¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ï¼štypeï¼Œdefaultï¼Œrequiredï¼Œvalidatorã€‚ 123456789&lt;script lang=&quot;ts&quot;&gt;@Componentexport default class Home extends Vue &#123; @Prop(String) readonly name!: string | undefined; @Prop(&#123; default: 30, type: Number &#125;) private age!: number; @Prop([String, Boolean]) private sex!: string | boolean;&#125;&lt;/script&gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå±æ€§çš„tsç±»å‹åé¢éœ€è¦åŠ ä¸Šundefinedç±»å‹ï¼›æˆ–è€…åœ¨å±æ€§ååé¢åŠ ä¸Š!ï¼Œè¡¨ç¤ºénull å’Œ éundefinedçš„æ–­è¨€ï¼Œå¦åˆ™ç¼–è¯‘å™¨ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚ @PropSync @PropSyncè£…é¥°å™¨ä¸@propç”¨æ³•ç±»ä¼¼ï¼ŒäºŒè€…çš„åŒºåˆ«åœ¨äºï¼š @PropSync è£…é¥°å™¨æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š propName: string è¡¨ç¤ºçˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å±æ€§åï¼› options: Constructor | Constructor[] | PropOptions ä¸@Propçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€è‡´ï¼› @PropSync ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„è®¡ç®—å±æ€§ã€‚ @PropSyncæœ¬è´¨ä¸Šå°±æ˜¯é€šè¿‡vueçš„syncæ–¹å¼ä¼ å‚ï¼š 123456789101112131415&lt;template&gt; &lt;h3 @click=&quot;changeMsg&quot;&gt;&#123;&#123; msg &#125;&#125;&lt;/h3&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;import &#123; Component,PropSync, Vue &#125; from &quot;vue-property-decorator&quot;;@Componentexport default class HelloWorld extends Vue &#123; @PropSync(&quot;msg&quot;) msgSync!: string; changeMsg(): void &#123; this.msgSync = &quot;new msg&quot;; &#125;&#125;&lt;/script&gt; @Watch @Watchè£…é¥°å™¨åŒvueä¸­çš„watchåŠŸèƒ½ç›¸åŒï¼Œç›‘å¬ä¾èµ–çš„å˜é‡å€¼å˜åŒ–è€Œåšä¸€ç³»åˆ—æ“ä½œï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š path: string è¢«ä¾¦å¬çš„å±æ€§åï¼› options?: optionså¯ä»¥åŒ…å«ä¸¤ä¸ªå±æ€§ ï¼šimmediate?:boolean ä¾¦å¬å¼€å§‹ä¹‹åæ˜¯å¦ç«‹å³è°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼›deep?:boolean è¢«ä¾¦å¬çš„å¯¹è±¡çš„å±æ€§è¢«æ”¹å˜æ—¶ï¼Œæ˜¯å¦è°ƒç”¨è¯¥å›è°ƒå‡½æ•°ï¼› 123456789101112131415161718192021&lt;template&gt; &lt;div&gt; &lt;h1&gt;child:&#123;&#123;child&#125;&#125;&lt;/h1&gt; &lt;input type=&quot;text&quot; v-model=&quot;child&quot;/&gt; &lt;/div&gt;&lt;/template&gt; &lt;script lang=&quot;ts&quot;&gt;import &#123; Vue, Watch, Component &#125; from &#x27;vue-property-decorator&#x27;; @Componentexport default class Home extends Vue &#123; private child = &#x27;&#x27;; @Watch(&#x27;child&#x27;, &#123; immediate: false, deep: false &#125;) onChildChanged(newValue: string, oldValue: string) &#123; console.log(newValue); console.log(oldValue); &#125;&#125;&lt;/script&gt; @Emit @EmitåŒvueä¸­çš„$emitï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯$emitçš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå……å½“äº‹ä»¶åï¼›å¦‚æœæ²¡æœ‰æä¾›è¿™ä¸ªå‚æ•°ï¼Œ$Emitä¼šå°†å›è°ƒå‡½æ•°åçš„camelCaseè½¬ä¸ºkebab-caseï¼Œå¹¶å°†å…¶ä½œä¸ºäº‹ä»¶åã€‚ 12345678910&lt;script lang=&quot;ts&quot;&gt;export default class Home extends Vue &#123; @Emit() clickBtn() &#123; &#125; @Emit(&#x27;click-my-btn&#x27;) clickBtn1() &#123; &#125;&#125;&lt;/script&gt; æœ€åç›¸å½“äºä»¥ä¸‹ä»£ç ï¼š 12345678910&lt;script&gt;export default &#123; clickBtn()&#123; this.$emit(&#x27;click-btn&#x27;) &#125; clickBtn1()&#123; this.$emit(&#x27;click-my-btn&#x27;) &#125;&#125;&lt;/script&gt; @Emitä¼šå°†å›è°ƒå‡½æ•°çš„è¿”å›å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°è¿”å›ç»™çˆ¶çº§å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™ä¼šé»˜è®¤ä½¿ç”¨æ‹¬å·é‡Œçš„å‚æ•°ï¼š 1234567891011&lt;script lang=&quot;ts&quot;&gt;export default class Home extends Vue &#123; @Emit() returnVal() &#123; return &#x27;hello parent&#x27; &#125; @Emit() clickBtn(ev) &#123; &#125;&#125;&lt;/script&gt; ç­‰åŒäºä»¥ä¸‹ä»£ç ï¼š 12345678910&lt;script&gt;export default &#123; returnVal()&#123; this.$emit(&#x27;return-val&#x27;, &#x27;hello parent&#x27;) &#125; clickBtn(ev)&#123; this.$emit(&#x27;click-btn&#x27;, ev) &#125;&#125;&lt;/script&gt; @Model @Modelè£…é¥°å™¨å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ªç»„ä»¶ä¸Šè‡ªå®šä¹‰v-modelï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š event: string äº‹ä»¶åã€‚ options: Constructor | Constructor[] | PropOptions ä¸@Propçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸€è‡´ã€‚ 12345678910111213141516171819&lt;template&gt; &lt;div&gt; &lt;div&gt;v-modelçš„å€¼ï¼š &#123;&#123; val &#125;&#125;&lt;/div&gt; &lt;input type=&quot;text&quot; :value=&quot;val&quot; @input=&quot;changeInput&quot; /&gt; &lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;import &#123; Component, Emit, Model, Vue &#125; from &quot;vue-property-decorator&quot;;@Componentexport default class Input extends Vue &#123; @Model(&quot;change&quot;, &#123; type: String &#125;) readonly val!: string; @Emit(&quot;change&quot;) changeInput(ev: any) &#123; return ev.target.value; &#125;&#125;&lt;/script&gt; æˆ‘ä»¬å°†çˆ¶ç»„ä»¶æ¥æ”¶çš„valueå€¼ä½œä¸ºå˜é‡valï¼Œå°†æ¥æ”¶çš„inputå‡½æ•°æ”¹åchangeï¼Œåœ¨è¾“å…¥æ¡†æ”¹å˜æ—¶è§¦å‘äº†changeå‡½æ•°ï¼ˆä¹Ÿå°±æ˜¯inputå‡½æ•°ï¼‰ã€‚ @Ref @RefåŒvueä¸­çš„$refï¼Œæ¥æ”¶ä¸€ä¸ªå¯é€‰å­—ç¬¦ä¸²ï¼Œç”¨æ¥æŒ‡å‘å…ƒç´ æˆ–å­ç»„ä»¶çš„å¼•ç”¨ä¿¡æ¯ï¼›å¦‚æœæ²¡æœ‰è¿™ä¸ªå‚æ•°ï¼Œåˆ™ä½¿ç”¨è£…é¥°å™¨åé¢çš„å±æ€§åï¼š 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;div&gt; &lt;div ref=&quot;refDiv&quot;&gt;&#123;&#123; fullName | filterName &#125;&#125;&lt;/div&gt; &lt;SubComponent ref=&quot;subComponent&quot;&gt;&lt;/SubComponent&gt; &lt;div @click=&quot;clickSubmit&quot;&gt;submit&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot;&gt;import SubComponent from &quot;@/components/SubComponent&quot;@Component(&#123; components: &#123; SubComponent, &#125;,&#125;)export default class Home extends Vue &#123; @Ref() readonly refDiv!: HTMLElement; @Ref(&quot;refDiv&quot;) readonly newRef!: HTMLElement; @Ref() readonly subComponent!: SubComponent; @Ref(&quot;subComponent&quot;) readonly compRef!: SubComponent; clickSubmit(): void &#123; console.log(this.refDiv); console.log(this.newRef); console.log(this.subComponent); console.log(this.compRef); &#125;&#125;&lt;/script&gt;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"ç½‘é¡µå¹»ç¯ç‰‡æ¼”ç¤ºæ¡†æ¶ï¼šReveal.js","date":"2021-09-06T13:36:00.000Z","path":"2021/09/06/Revealjs.html","text":"åœ¨ç”Ÿæ´»å’Œå·¥ä½œä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ç”¨åˆ°å¹»ç¯ç‰‡è¿›è¡Œæ¼”ç¤ºæˆ–è€…æ±‡æŠ¥å·¥ä½œç­‰ï¼Œä¼ ç»Ÿçš„å¹»ç¯ç‰‡åœ¨æ’ç‰ˆã€ä»£ç ã€åŠ¨æ•ˆå’Œå¤šåª’ä½“ç­‰æ–¹é¢æ“ä½œèµ·æ¥éœ€è¦ä¸€å®šçš„åŸºç¡€ï¼›è€ŒReveal.jsæä¾›äº†ç®€å•æ˜“ä¸Šæ‰‹çš„æ–¹æ¡ˆï¼Œå°†å¹»ç¯ç‰‡æ¬åˆ°ç½‘é¡µä¸­ï¼Œæä¾›äº†ä¸°å¯Œçš„æ¨¡æ¿å’Œæ•ˆæœï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æ¥åˆ¶ä½œä¸€ä¸ªç²¾ç¾çš„ç½‘é¡µå¹»ç¯ç‰‡å§ã€‚ ä¸€ã€Reveal.jsæ˜¯ä»€ä¹ˆ Reveal.jsæ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æµè§ˆå™¨ä¸Šçš„å¹»ç¯ç‰‡å±•ç¤ºæ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•æµè§ˆå™¨ä¸Šå±•ç¤ºæˆ‘ä»¬æƒ³è¦çš„å¹»ç¯ç‰‡ï¼Œå¹¶ä¸”å¯ä»¥è‡ªå·±å®šä¹‰è¡Œä¸ºã€åŠ¨ç”»ç­‰ã€‚ reveal.jsæ˜¯ä¸€ä¸ªå¼€æºçš„HTMLå±•ç¤ºæ¡†æ¶ã€‚å®ƒæ˜¯ä¸€ç§å·¥å…·ï¼Œå¯è®©ä»»ä½•æ‹¥æœ‰Webæµè§ˆå™¨çš„äººå…è´¹åˆ›å»ºåŠŸèƒ½é½å…¨ä¸”ç²¾ç¾çš„æ¼”ç¤ºæ–‡ç¨¿ã€‚ å’Œä¼ ç»Ÿçš„å¹»ç¯ç‰‡ç›¸æ¯”ï¼ŒReveal.jsæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š ç•Œé¢ä¼˜ç¾ï¼šUIé£æ ¼ç®€ä»‹ä¼˜ç¾ï¼Œå¯¹æ•°å­¦å…¬å¼ã€ä»£ç ã€å¤šåª’ä½“æ‰©å±•æ”¯æŒã€‚ è¿è¡Œç®€å•ï¼šå› ä¸ºæ˜¯ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œé‚£ä¹ˆåªè¦åŒå‡»ï¼Œå°±èƒ½åœ¨æµè§ˆå™¨ä¸­å±•ç¤ºã€‚ä¹Ÿå¯ä»¥é€šè¿‡urlåˆ†äº«ã€‚ åŠŸèƒ½å¼ºå¤§ï¼šå› ä¸ºæ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ï¼Œå¯ä»¥ç”¨HTML+CSS+JSï¼Œåšå„ç§æƒ³è¦çš„ä¸œè¥¿ å®‰è£… é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†reveal.jså…‹éš†åˆ°æœ¬åœ°ï¼š 123&gt; git clone https://github.com/hakimel/reveal.js.git&gt; cd reveal.js &amp;&amp; npm install&gt; npm start è¿™æ ·å°±å°†æ•´ä¸ªä»“åº“ä½œä¸ºä¸€ä¸ªé™æ€èµ„æºæœåŠ¡å™¨å¯åŠ¨äº†ï¼Œå¼€å‘æœåŠ¡å™¨çš„é»˜è®¤ç«¯å£8000ï¼›å¯ä»¥ä½¿ç”¨portå‚æ•°åˆ‡æ¢åˆ°ä¸åŒçš„ç«¯å£ï¼š 12# åˆ‡æ¢ç«¯å£&gt; npm start -- --port=8001 æˆ‘ä»¬å¯ä»¥å¤åˆ¶ä¸€ä»½ä»“åº“ä¸­çš„index.htmlï¼Œæ–°å»ºè‡ªå·±çš„htmlï¼Œå°±å¯ä»¥é€šè¿‡åœ°å€è®¿é—®åˆ°æˆ‘ä»¬è‡ªå·±çš„å¹»ç¯ç‰‡äº†ï¼›æˆ–è€…å°†ä»“åº“ä¸­çš„distå’Œpluginä¸¤ä¸ªæ–‡ä»¶å¤¹æ‹·è´åˆ°è‡ªå·±ä»“åº“çš„é™æ€èµ„æºä¸­ï¼Œé€šè¿‡å¤–é“¾æ–¹å¼å¼•å…¥ã€‚ ç¬¬äºŒç§æ–¹å¼æ˜¯é€šè¿‡npmçš„æ–¹å¼è¿›è¡Œå®‰è£…ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œreveal.jsåªæ˜¯é’ˆå¯¹æµè§ˆå™¨ç¯å¢ƒï¼š 123npm install reveal.js# oryarn add reveal.js å®‰è£…åæˆ‘ä»¬å°±å¯ä»¥å°†reveal.jsä½œä¸ºæ¨¡å—å¼•å…¥äº†ï¼š 1234567import Reveal from &#x27;reveal.js&#x27;;import Markdown from &#x27;reveal.js/plugin/markdown/markdown.esm.js&#x27;;let deck = new Reveal(&#123; plugins: [ Markdown ]&#125;)deck.initialize(); ä½†æ˜¯æ ·å¼å¹¶ä¸ä¼šéšæ¨¡å—ä¸€èµ·å¼•å…¥ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨é¡µé¢ä¸­åŒ…å«æ ·å¼ï¼š 12&lt;link rel=&quot;stylesheet&quot; href=&quot;/node_modules/reveal.js/dist/reveal.css&quot;&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;/node_modules/reveal.js/dist/theme/black.css&quot;&gt; ç¼–è¾‘å†…å®¹ å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥ç¼–è¾‘å¹»ç¯ç‰‡å†…å®¹äº†ï¼Œä»–çš„å†…å®¹å°±æ˜¯ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œæ¥çœ‹ä¸€ä¸‹å®ƒçš„æ ‡å‡†ç»“æ„ï¼š 123456789101112131415161718&lt;html&gt; &lt;head&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;dist/reveal.css&quot;&gt; &lt;link rel=&quot;stylesheet&quot; href=&quot;dist/theme/black.css&quot;&gt; &lt;/head&gt; &lt;body&gt; &lt;div class=&quot;reveal&quot;&gt; &lt;div class=&quot;slides&quot;&gt; &lt;section&gt;è¿™æ˜¯ç¬¬ä¸€å¼ å¹»ç¯ç‰‡&lt;/section&gt; &lt;section&gt;è¿™æ˜¯ç¬¬äºŒå¼ å¹»ç¯ç‰‡&lt;/section&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;dist/reveal.js&quot;&gt;&lt;/script&gt; &lt;script&gt; Reveal.initialize(); &lt;/script&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬çœ‹åˆ°é¡µé¢çš„å±‚çº§ä¸º`.reveal &gt; .slides &gt; section``ï¼Œä½äºæœ€é‡Œé¢çš„sectionå…ƒç´ å°±æ˜¯æˆ‘ä»¬éœ€è¦å‘ˆç°å‡ºæ¥çš„å¹»ç¯ç‰‡ï¼Œå¯ä»¥æ˜¯è¿ç»­å¤šå¼ ã€‚ å¦‚æœæœ‰æŸå¼ å¹»ç¯ç‰‡æˆ‘ä»¬éœ€è¦å¯¹å…¶å†…å®¹è¿›è¡Œæ›´è¯¦ç»†çš„é˜è¿°ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å‚ç›´å¹»ç¯ç‰‡çš„æ–¹å¼ï¼Œå°†å¤šä¸ªsectionå…ƒç´ åŒ…å«åœ¨ä¸€é¡µå¹»ç¯ç‰‡å†…å®¹ä¸­ï¼š 123456789&lt;div class=&quot;reveal&quot;&gt; &lt;div class=&quot;slides&quot;&gt; &lt;section&gt;è¿™æ˜¯æ°´å¹³å¹»ç¯ç‰‡&lt;/section&gt; &lt;section&gt; &lt;section&gt;è¿™æ˜¯ç¬¬ä¸€å¼ å‚ç›´å¹»ç¯ç‰‡&lt;/section&gt; &lt;section&gt;è¿™æ˜¯ç¬¬äºŒå¼ å‚ç›´å¹»ç¯ç‰‡&lt;/section&gt; &lt;/section&gt; &lt;/div&gt;&lt;/div&gt; æ»‘åŠ¨æ•ˆæœ æˆ‘ä»¬åˆ‡æ¢å¹»ç¯ç‰‡æ—¶ï¼Œé»˜è®¤éƒ½æ˜¯ä»å³åˆ°å·¦è¿›è¡Œå¹»ç¯ç‰‡çš„åˆ‡æ¢è¿‡æ¸¡ï¼Œé»˜è®¤æ˜¯æ»‘åŠ¨çš„æ•ˆæœï¼›æˆ‘ä»¬å¯ä»¥åœ¨æ¯é¡µå¹»ç¯ç‰‡ä¸Šæ·»åŠ data-transitionå±æ€§æ¥åˆ¶åŠ¨è¿‡æ¸¡çš„æ•ˆæœï¼š 123456&lt;div class=&quot;slides&quot;&gt; &lt;section data-transition=&quot;zoom&quot;&gt;ç¬¬ä¸€é¡µå¹»ç¯ç‰‡&lt;/section&gt; &lt;section data-transition=&quot;fade&quot;&gt;ç¬¬äºŒé¡µå¹»ç¯ç‰‡&lt;/section&gt; &lt;section data-transition=&quot;convex&quot;&gt;ç¬¬ä¸‰é¡µå¹»ç¯ç‰‡&lt;/section&gt; &lt;section&gt;ç¬¬å››é¡µå¹»ç¯ç‰‡&lt;/section&gt;&lt;/div&gt; ä¸‹é¢æ˜¯æ‰€æœ‰è¿‡æ¸¡æ•ˆæœçš„åˆ—è¡¨ï¼š è¿‡æ¸¡åç§° å½±å“ none ç«‹å³åˆ‡æ¢èƒŒæ™¯ fade æ·¡å…¥æ·¡å‡º slide åœ¨èƒŒæ™¯ä¹‹é—´æ»‘åŠ¨ï¼ˆé»˜è®¤ï¼‰ convex ä»¥å‡¸è§’æ»‘åŠ¨ concave ä»¥å‡¹è§’æ»‘åŠ¨ zoom å°†ä¼ å…¥çš„å¹»ç¯ç‰‡å‘ä¸Šç¼©æ”¾ï¼Œä½¿å…¶ä»å±å¹•ä¸­å¿ƒå‘å†…å¢é•¿ å¦‚æœæˆ‘ä»¬æƒ³ç»Ÿä¸€æ”¹å˜é»˜è®¤çš„è¿‡æ¸¡æ•ˆæœï¼Œåœ¨å…¨å±€åˆå§‹åŒ–çš„æ—¶å€™é…ç½®backgroundTransitionå±æ€§ï¼š 123Reveal.initialize(&#123; backgroundTransition: &#x27;slide&#x27;&#125;); å†…ç½®ä¸»é¢˜ åœ¨ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬å‘ç°ï¼Œå¼•å…¥äº†ä¸¤ä¸ªä¸åŒçš„cssï¼Œç¬¬ä¸€ä¸ªreveal.cssæ˜¯ä¾èµ–çš„åŸºç¡€çš„æ ·å¼æ–‡ä»¶ï¼Œè€Œå¼•å…¥çš„ç¬¬äºŒä¸ªtheme/black.csså°±æ˜¯åœ¨åŸºç¡€æ ·å¼ä¸Šçš„ä¸»é¢˜æ ·å¼ï¼Œå¯ä»¥æ ¹æ®æˆ‘ä»¬è‡ªå·±çš„å–œå¥½ï¼Œé€‰æ‹©ä¸åŒä¸»é¢˜ï¼›Revealjsä¹Ÿå†…ç½®äº†ä»¥ä¸‹ä¸»é¢˜ï¼š ä¸»é¢˜åç§° ä¸»é¢˜æ•ˆæœ black é»‘è‰²èƒŒæ™¯ã€ç™½è‰²æ–‡æœ¬ã€è“è‰²é“¾æ¥ï¼ˆé»˜è®¤ï¼‰ white ç™½è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—ï¼Œè“è‰²é“¾æ¥ league ç°è‰²èƒŒæ™¯ï¼Œç™½è‰²æ–‡æœ¬ï¼Œè“è‰²é“¾æ¥ beige ç±³è‰²èƒŒæ™¯ã€æ·±è‰²æ–‡æœ¬ã€æ£•è‰²é“¾æ¥ sky è“è‰²èƒŒæ™¯ï¼Œç»†çš„æ·±è‰²æ–‡æœ¬ï¼Œè“è‰²é“¾æ¥ night é»‘è‰²èƒŒæ™¯ï¼Œç²—ç™½æ–‡æœ¬ï¼Œæ©™è‰²é“¾æ¥ serif å¡å¸ƒå¥‡è¯ºèƒŒæ™¯ï¼Œç°è‰²æ–‡æœ¬ï¼Œæ£•è‰²é“¾æ¥ simple ç™½è‰²èƒŒæ™¯ï¼Œé»‘è‰²æ–‡å­—ï¼Œè“è‰²é“¾æ¥ solarized å¥¶æ²¹è‰²èƒŒæ™¯ã€æ·±ç»¿è‰²æ–‡æœ¬ã€è“è‰²é“¾æ¥ blood æ·±è‰²èƒŒæ™¯ï¼Œåšå®çš„ç™½è‰²æ–‡æœ¬ï¼Œçº¢è‰²é“¾æ¥ moon æ·±è“è‰²èƒŒæ™¯ï¼Œç²—ç°è‰²æ–‡æœ¬ï¼Œè“è‰²é“¾æ¥ éœ€è¦æ›´æ”¹ä¸»é¢˜ï¼Œæˆ‘ä»¬åªéœ€è¦ä»themeä¸­å¼•å…¥å¯¹åº”ä¸»é¢˜çš„csså³å¯ã€‚ Markdownæ”¯æŒ Revealjsä¹Ÿæ”¯æŒä½¿ç”¨Markdownæ¥ç¼–å†™å¹»ç¯ç‰‡å†…å®¹ï¼Œå¯¹äºç®€å•çš„å†…å®¹ï¼Œä¼šæ›´åŠ æ–¹ä¾¿ç®€æ´ï¼›é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼•å…¥Markdownçš„æ’ä»¶ï¼š 123456&lt;script src=&quot;plugin/markdown/markdown.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Reveal.initialize(&#123; plugins: [ RevealMarkdown ] &#125;);&lt;/script&gt; ç„¶åå°†Markdownç¼–å†™çš„å†…å®¹æ”¾åˆ°section &gt; textareaä¸­ï¼ŒåŒæ—¶éœ€è¦åœ¨æ ‡ç­¾ä¸ŠåŠ ä¸Šç‰¹æ®Šçš„å±æ€§è¿›è¡Œæ ‡è¯†ï¼š 123456789101112&lt;div class=&quot;slides&quot;&gt; &lt;section data-markdown&gt; &lt;textarea data-template&gt; ## è¿™æ˜¯ç¬¬ä¸€å¼ å¹»ç¯ç‰‡ æˆ‘æ˜¯ä¸€æ®µè¯´æ˜æ€§çš„æ–‡å­— --- ## è¿™æ˜¯ç¬¬äºŒå¼ å¹»ç¯ç‰‡ --- ## è¿™æ˜¯ç¬¬ä¸‰å¼ å¹»ç¯ç‰‡ &lt;/textarea&gt; &lt;/section&gt;&lt;/div&gt; ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼ŒMarkdownè¯­æ³•å¯¹ç©ºæ ¼ç¼©è¿›å’Œæ¢è¡Œç¬¦ï¼ˆé¿å…è¿ç»­ä¸­æ–­ï¼‰çš„æ£€æµ‹å¾ˆä¸¥æ ¼ã€‚ èƒŒæ™¯ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„èƒŒæ™¯é¢œè‰²æ˜¯è·Ÿéšä¸»é¢˜çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æ¯é¡µä¸Šè®¾ç½®data-backgroundå±æ€§ï¼Œæ¥æ‰‹åŠ¨çš„è®¾ç½®æŸé¡µå¹»ç¯ç‰‡çš„èƒŒæ™¯é¢œè‰²ã€‚ 1234567891011&lt;div class=&quot;slides&quot;&gt; &lt;section&gt; &lt;h2&gt;æˆ‘æ˜¯ç¬¬ä¸€é¡µ&lt;/h2&gt; &lt;/section&gt; &lt;section data-background-color=&quot;aquamarine&quot;&gt; &lt;h2&gt;æˆ‘æ˜¯ç¬¬äºŒé¡µ&lt;/h2&gt; &lt;/section&gt; &lt;section data-background-color=&quot;rgb(70, 70, 255)&quot;&gt; &lt;h2&gt;æˆ‘æ˜¯ç¬¬ä¸‰é¡µ&lt;/h2&gt; &lt;/section&gt;&lt;/div&gt; é™¤äº†è®¾ç½®èƒŒæ™¯çº¯è‰²ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ä¸ºèƒŒæ™¯å›¾ç‰‡ 1234567891011&lt;div class=&quot;slides&quot;&gt; &lt;section data-background-image=&quot;./1.jpg&quot;&gt; &lt;h2&gt;æˆ‘æ˜¯ç¬¬ä¸€é¡µ&lt;/h2&gt; &lt;/section&gt; &lt;section data-background-image=&quot;./2.jpg&quot;&gt; &lt;h2&gt;æˆ‘æ˜¯ç¬¬äºŒé¡µ&lt;/h2&gt; &lt;/section&gt; &lt;section data-background-image=&quot;./3.jpg&quot;&gt; &lt;h2&gt;æˆ‘æ˜¯ç¬¬ä¸‰é¡µ&lt;/h2&gt; &lt;/section&gt;&lt;/div&gt; èƒŒæ™¯å›¾ç‰‡æ”¯æŒä»¥ä¸‹å±æ€§ï¼š å‚æ•° é»˜è®¤ æè¿° data-background-image è¦æ˜¾ç¤ºçš„å›¾åƒçš„ URL data-background-size cover èƒŒæ™¯å›¾åƒå¤§å° data-background-position center èƒŒæ™¯å›¾åƒä½ç½® data-background-repeat no-repeat èƒŒæ™¯å›¾åƒé‡å¤ data-background-opacity 1 0-1 èŒƒå›´å†…èƒŒæ™¯å›¾åƒçš„ä¸é€æ˜åº¦ã€‚0 æ˜¯é€æ˜çš„ï¼Œ1 æ˜¯å®Œå…¨ä¸é€æ˜çš„ã€‚ è‡ªåŠ¨åŠ¨ç”» æœ‰äº›å¹»ç¯ç‰‡ä¸­æˆ‘ä»¬æƒ³å®ç°ä¸€äº›ç®€å•çš„åŠ¨ç”»æ•ˆæœï¼Œæ¯”å¦‚æ¸å˜ã€æ»‘åŠ¨ç­‰ï¼›Reveal.jsä¼šè‡ªåŠ¨ä¸ºå¹»ç¯ç‰‡ä¸­çš„å…ƒç´ è®¾ç½®åŠ¨ç”»æ•ˆæœï¼›æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯åœ¨ç›¸é‚»çš„ä¸¤é¡µsectionå…ƒç´ ä¸Šæ·»åŠ data-auto-animateå±æ€§ï¼Œè¿™æ ·Reveal.jsä¼šä¸ºæ‰€æœ‰åŒ¹é…çš„å…ƒç´ è®¾ç½®åŠ¨ç”»ã€‚ 1234567891011&lt;div class=&quot;slides&quot;&gt; &lt;section data-auto-animate&gt; &lt;h1&gt;è‡ªåŠ¨åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 style=&quot;margin-top: 100px; color: red;&quot;&gt;è‡ªåŠ¨åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 style=&quot;margin-top: 200px; color: blue;&quot;&gt;è‡ªåŠ¨åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt;&lt;/div&gt; æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨é¡µé¢ä¸Šçš„h1æ ‡ç­¾ï¼Œæˆ‘ä»¬åœ¨ä¸åŒå¹»ç¯ç‰‡ä¸­è®¾ç½®äº†ä¸åŒçš„æ ·å¼ï¼ŒReveal.jsä¼šè‡ªåŠ¨ä¸ºè¿™ä¸ªå…ƒç´ è®¾ç½®åŠ¨ç”»æ•ˆæœã€‚ å¯¹äºå¹»ç¯ç‰‡ä¸Šæ–°å¢æˆ–è€…åˆ é™¤çš„å…ƒç´ ï¼ŒReveal.jsåœ¨æ’åˆ—å†…å®¹æ—¶ä¹Ÿä¼šè‡ªåŠ¨ä¸ºå…¶æ·»åŠ åŠ¨ç”»æ•ˆæœï¼š 1234567891011121314151617181920212223242526&lt;div class=&quot;slides&quot;&gt; &lt;section data-auto-animate&gt; &lt;h3&gt;Reveal.jsçš„ä¼˜ç‚¹&lt;/h3&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h3&gt;Reveal.jsçš„ä¼˜ç‚¹&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;ç•Œé¢ä¼˜ç¾&lt;/li&gt; &lt;/ul&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h3&gt;Reveal.jsçš„ä¼˜ç‚¹&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;ç•Œé¢ä¼˜ç¾&lt;/li&gt; &lt;li&gt;è¿è¡Œç®€å•&lt;/li&gt; &lt;/ul&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h3&gt;Reveal.jsçš„ä¼˜ç‚¹&lt;/h3&gt; &lt;ul&gt; &lt;li&gt;ç•Œé¢ä¼˜ç¾&lt;/li&gt; &lt;li&gt;è¿è¡Œç®€å•&lt;/li&gt; &lt;li&gt;åŠŸèƒ½å¼ºå¤§&lt;/li&gt; &lt;/ul&gt; &lt;/section&gt;&lt;/div&gt; æˆ‘ä»¬å¯ä»¥ç”¨ul &gt; liçš„å¸ƒå±€æ¥ç”Ÿæˆå¤šæ¡æ’åˆ—æ•´é½çš„è®ºè¿°åˆ—è¡¨ï¼Œæ¯é¡µå¹»ç¯ç‰‡å†…å®¹éƒ½æœ‰æ–°å¢çš„åˆ—è¡¨å†…å®¹ï¼›Reveal.jsä¼šè‡ªåŠ¨ä¸ºå…ƒç´ çš„å¢åŠ å’Œåˆ å‡æ·»åŠ åŠ¨ç”»ã€‚ é‚£ä¹ˆReveal.jsæ˜¯å¦‚ä½•æ¥è‡ªåŠ¨åŒ¹é…ç›¸åŒçš„å…ƒç´ çš„å‘¢ï¼Ÿå¯¹äºæ–‡æœ¬å…ƒç´ ï¼Œå¦‚æœèŠ‚ç‚¹çš„ç±»å‹å’Œæ–‡æœ¬å†…å®¹ç›¸åŒï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå®ƒæ˜¯ç›¸åŒçš„ï¼Œå¯¹äºå›¾ç‰‡ã€è§†é¢‘å’Œiframeç­‰å¤šåª’ä½“å…ƒç´ ï¼ŒReveal.jsé€šè¿‡æ¯”è¾ƒä»–ä»¬çš„srcå±æ€§ã€‚ å›åˆ°æˆ‘ä»¬æœ€å¼€å§‹çš„é‚£ä¸ªåŠ¨ç”»ä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬å°†æ–‡æœ¬å†…å®¹è¿›è¡Œæ”¹å˜ï¼Œé‚£ä¹ˆåŠ¨ç”»æ•ˆæœå°±ä¼šå¤±æ•ˆï¼›åœ¨è‡ªåŠ¨åŒ¹é…å…ƒç´ ä¸å¯è¡Œçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…ƒç´ ä¸Šæ·»åŠ data-idå±æ€§æ¥å¼ºåˆ¶è¿›è¡ŒåŠ¨ç”»æ•ˆæœï¼Œè¿™æ ·Reveal.jså°±ä¼šä¼˜å…ˆè€ƒè™‘å…ƒç´ çš„data-idå±æ€§ï¼š 1234567891011&lt;div class=&quot;slides&quot;&gt; &lt;section data-auto-animate&gt; &lt;h1&gt;è‡ªåŠ¨åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 data-id=&quot;box&quot; style=&quot;margin-top: 100px; color: red;&quot;&gt;è‡ªåŠ¨åŠ¨ç”»1&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 data-id=&quot;box&quot; style=&quot;margin-top: 200px; color: blue;&quot;&gt;è‡ªåŠ¨åŠ¨ç”»2&lt;/h1&gt; &lt;/section&gt;&lt;/div&gt; æˆ‘ä»¬çœ‹åˆ°ç¬¬ä¸€ä¸ªåŠ¨ç”»åˆ°ç¬¬äºŒä¸ªåŠ¨ç”»ä¹‹é—´ï¼Œç”±äºè‡ªåŠ¨åŒ¹é…å¤±æ•ˆï¼Œå› æ­¤æ²¡æœ‰åŠ¨ç”»ï¼›ç¬¬äºŒä¸ªåŠ¨ç”»åˆ°ç¬¬ä¸‰ä¸ªåŠ¨ç”»ä¹‹é—´ç”±äºæˆ‘ä»¬å¼ºåˆ¶åŠ ä¸Šäº†data-idå±æ€§ï¼Œå› æ­¤åŠ¨ç”»æ•ˆæœä¾ç„¶æ˜¯ç”Ÿæ•ˆçš„ã€‚ æœ‰æ—¶å€™æˆ‘ä»¬ä¼šå­˜åœ¨å¤šä¸ªåŠ¨ç”»ï¼Œç›¸é‚»çš„åŠ¨ç”»æœ‰å¯èƒ½ä¼šäº’ç›¸å¹²æ‰°ï¼Œå¯ä»¥é€šè¿‡data-auto-animate-idå’Œdata-auto-animate-restartå¯¹åŠ¨ç”»è¿›è¡Œåˆ†ç»„ã€‚ æˆ‘ä»¬å¯ä»¥å¯¹ç›¸é‚»åˆ†ç»„çš„å¹»ç¯ç‰‡ä¸ŠåŠ ä¸Šdata-auto-animate-idå±æ€§ï¼Œå±æ€§çš„å€¼å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œç›¸åŒç»„ä¿è¯å€¼ç›¸åŒå³å¯ï¼›è¿™æ ·ï¼Œç›¸é‚»çš„å¹»ç¯ç‰‡ä¼šè¯†åˆ«ç›¸åŒçš„idè¿›è¡ŒåŠ¨ç”»æ•ˆæœã€‚ 1234567891011121314151617181920&lt;div class=&quot;slides&quot;&gt; &lt;section data-auto-animate&gt; &lt;h1&gt;ç¬¬ä¸€ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 style=&quot;color: #3B82F6;&quot;&gt;ç¬¬ä¸€ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate data-auto-animate-id=&quot;two&quot;&gt; &lt;h1&gt;ç¬¬äºŒç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate data-auto-animate-id=&quot;two&quot;&gt; &lt;h1 style=&quot;color: #10B981;&quot;&gt;ç¬¬äºŒç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate data-auto-animate-id=&quot;three&quot;&gt; &lt;h1&gt;ç¬¬ä¸‰ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate data-auto-animate-id=&quot;three&quot;&gt; &lt;h1 style=&quot;color: #EC4899;&quot;&gt;ç¬¬ä¸‰ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt;&lt;/div&gt; å¦‚æœåŒä¸€ç»„çš„å¹»ç¯ç‰‡æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬éœ€è¦åŠ ä¸Šå¾ˆå¤šçš„idï¼Œä¸Šé¢çš„æ–¹å¼æ˜¾å¾—æ¯”è¾ƒç¹çï¼›å› æ­¤Reveal.jsæä¾›å¦ä¸€ç§æ§åˆ¶åŠ¨ç”»çš„æ–¹å¼ï¼šdata-auto-animate-restartå±æ€§ï¼›è¿™ä¸ªå±æ€§ä¼šé˜»æ­¢ä¸Šä¸€å¼ å¹»ç¯ç‰‡å’Œæœ¬ç»„å¹»ç¯ç‰‡ä¹‹é—´çš„åŠ¨ç”»æ•ˆæœï¼ˆå³ä½¿ä»–ä»¬æœ‰ç›¸åŒçš„idï¼‰ã€‚ 1234567891011121314151617181920&lt;div class=&quot;slides&quot;&gt; &lt;section data-auto-animate&gt; &lt;h1&gt;ç¬¬ä¸€ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 style=&quot;color: #3B82F6;&quot;&gt;ç¬¬ä¸€ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate data-auto-animate-restart&gt; &lt;h1&gt;ç¬¬äºŒç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 style=&quot;color: #10B981;&quot;&gt;ç¬¬äºŒç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate data-auto-animate-restart&gt; &lt;h1&gt;ç¬¬ä¸‰ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt; &lt;section data-auto-animate&gt; &lt;h1 style=&quot;color: #EC4899;&quot;&gt;ç¬¬ä¸‰ç»„åŠ¨ç”»&lt;/h1&gt; &lt;/section&gt;&lt;/div&gt; ä»£ç  Reveal.jsåœ¨å‘ˆç°ä»£ç æ–¹é¢ä¹Ÿæ¯”æ™®é€šçš„PPTæ›´æœ‰ä¼˜åŠ¿ï¼Œå¯ä»¥æ˜¾ç¤ºè¯­æ³•çªå‡ºæ˜¾ç¤ºçš„ä»£ç ï¼Œè¿™ä¸ªåŠŸèƒ½éœ€è¦å¼•å…¥highlight.jsæ’ä»¶ï¼›æˆ‘ä»¬å†™çš„ä»£ç éœ€è¦åŒ…å«åœ¨pre &gt; codeæ ‡ç­¾ä¸­ï¼š 123456789101112131415161718&lt;div class=&quot;slides&quot;&gt; &lt;section&gt; &lt;pre&gt;&lt;code data-trim data-noescape&gt; export function isObject(obj) &#123; return Object.prototype.toString.call(obj) === &quot;[object Object]&quot; &#125; export function isArray(obj) &#123; return Object.prototype.toString.call(obj) === &quot;[object Array]&quot; &#125; export function isNull(param) &#123; return Object.prototype.toString.call(param) === &quot;[object Null]&quot; &#125; export function isUndefined(param) &#123; return Object.prototype.toString.call(param) === &quot;[object Undefined]&quot; &#125; &lt;/code&gt;&lt;/pre&gt; &lt;/section&gt;&lt;/div&gt; ç„¶åå¼•å…¥highlight.jsæ’ä»¶ï¼Œæ’ä»¶ä¸­é»˜è®¤åŒ…å«äº†monokai.cssçš„æ ·å¼ï¼š 12345678&lt;link rel=&quot;stylesheet&quot; href=&quot;./plugin/highlight/monokai.css&quot; /&gt;&lt;body&gt;&lt;/body&gt;&lt;script src=&quot;./plugin/highlight/highlight.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Reveal.initialize(&#123; plugins: [RevealHighlight], &#125;);&lt;/script&gt; æˆ‘ä»¬å¯ä»¥åœ¨highlight.jsçš„demoä¸­æ‰¾åˆ°æ›´å¤šçš„é«˜äº®ä¸»é¢˜ã€‚ é€šè¿‡åœ¨codeæ ‡ç­¾æ·»åŠ data-line-numberså±æ€§ï¼Œå¯ä»¥å¯ç”¨ä»£ç çš„è¡Œå·ï¼›å¦‚æœè¦çªå‡ºæ˜¾ç¤ºç‰¹å®šçš„è¡Œå·ï¼Œå¯ä»¥æä¾›é€—å·åˆ†éš”çš„è¡Œå·åˆ—è¡¨ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œç¬¬3è¡Œå’Œç¬¬8-10è¡Œå°±è¢«é«˜äº®æ˜¾ç¤ºï¼š 1234567891011121314&lt;pre&gt;&lt;code data-line-numbers=&quot;3,8-10&quot;&gt;&lt;table&gt; &lt;tr&gt; &lt;td&gt;Apples&lt;/td&gt; &lt;td&gt;$1&lt;/td&gt; &lt;td&gt;7&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Oranges&lt;/td&gt; &lt;td&gt;$2&lt;/td&gt; &lt;td&gt;18&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt; æˆ‘ä»¬è¿˜å¯ä»¥å°†é«˜äº®çš„ä»£ç è¿›è¡Œåˆ†æ­¥éª¤æ˜¾ç¤ºï¼Œç”¨|åˆ†éš”æ¯ä¸€ä¸ªæ­¥éª¤ï¼›ä¾‹å¦‚ä¸‹é¢çš„3-5|8-10|13-15å°†äº§ç”Ÿ3ä¸ªæ­¥éª¤ï¼š 12345678910111213141516171819&lt;pre&gt;&lt;code data-line-numbers=&quot;3-5|8-10|13-15&quot;&gt;&lt;table&gt; &lt;tr&gt; &lt;td&gt;Apples&lt;/td&gt; &lt;td&gt;$1&lt;/td&gt; &lt;td&gt;7&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Oranges&lt;/td&gt; &lt;td&gt;$2&lt;/td&gt; &lt;td&gt;18&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td&gt;Kiwi&lt;/td&gt; &lt;td&gt;$3&lt;/td&gt; &lt;td&gt;1&lt;/td&gt; &lt;/tr&gt;&lt;/table&gt;&lt;/code&gt;&lt;/pre&gt; æ•°å­¦å…¬å¼ å¦‚æœæˆ‘ä»¬æƒ³è¦å¹»ç¯ç‰‡ä¸­å±•ç¤ºæ•°å­¦å…¬å¼ï¼Œå¯ä»¥å€ŸåŠ©äºMathJaxæ’ä»¶è½»æ¾çš„å®ç°ï¼›å®ƒæ˜¯ä¸€ä¸ªå¼€æºçš„åŸºäº Ajax çš„æ•°å­¦å…¬å¼æ˜¾ç¤ºçš„è§£å†³æ–¹æ¡ˆï¼Œç»“åˆå¤šç§å…ˆè¿›çš„WebæŠ€æœ¯ï¼Œæ”¯æŒä¸»æµçš„æµè§ˆå™¨ï¼›é¦–å…ˆæˆ‘ä»¬éœ€è¦å¼•å…¥æœ¬åœ°ä»“åº“çš„math.jsæ’ä»¶å’Œè¿œç¨‹åŠ è½½MathJaxæ’ä»¶ï¼š 123456789101112131415&lt;script src=&quot;./plugin/math/math.js&quot;&gt;&lt;/script&gt;&lt;script&gt; Reveal.initialize(&#123; math: &#123; mathjax: &#x27;https://cdn.jsdelivr.net/gh/mathjax/mathjax@2.7.8/MathJax.js&#x27;, config: &#x27;TeX-AMS_HTML-full&#x27;, TeX: &#123; Macros: &#123; RR: &quot;&#123;\\\\bf R&#125;&quot; &#125; &#125; &#125;, plugins: [RevealMath], &#125;);&lt;/script&gt; ç„¶åæˆ‘ä»¬å°±å¯ä»¥å°½æƒ…ä½¿ç”¨æƒ³è¦çš„æ•°å­¦ç¬¦å·å’Œå…¬å¼äº†ï¼š 123456&lt;div class=&quot;slides&quot;&gt; &lt;section&gt; When $a \\ne 0$, there are two solutions to \\(ax^2 + bx + c = 0\\) and they are $$x = &#123;-b \\pm \\sqrt&#123;b^2-4ac&#125; \\over 2a&#125;.$$ &lt;/section&gt;&lt;/div&gt; PDFå¯¼å‡º æˆ‘ä»¬çš„æ¼”ç¤ºæ–‡ç¨¿æœ€åå¯èƒ½éœ€è¦å­˜æ¡£æˆ–è€…å‘ç»™é¢†å¯¼ï¼Œå¦‚æœç›´æ¥å­˜æ¡£é¡¹ç›®åˆ™éœ€è¦æ‰“åŒ…æ•´ä¸ªé¡¹ç›®ï¼Œåˆ«äººå¯èƒ½ä¹Ÿä¸çŸ¥é“æ€ä¹ˆç”¨ï¼›Reveal.jsæä¾›äº†ç‰¹æ®Šçš„æ‰“å°æ ·å¼ï¼Œå¯ä»¥è®©æˆ‘ä»¬å°†æ–‡ç¨¿å¯¼å‡ºä¸ºPDFã€‚ é¦–å…ˆå°†æˆ‘ä»¬çš„htmlåŒ…å«åœ¨æŸ¥è¯¢å­—ç¬¦ä¸²ä¸­ï¼Œä¾‹å¦‚http://localhost:8080/index.html?print-pdfã€‚ ç„¶åè°ƒå‡ºæ‰“å°å¯¹è¯æ¡† (CTRL/CMD+P) å°†ç›®æ ‡è®¾ç½®æ›´æ”¹ä¸ºå¦å­˜ä¸º PDF å°†å¸ƒå±€æ›´æ”¹ä¸ºæ¨ªå‘ã€‚ å°†è¾¹è·æ›´æ”¹ä¸ºæ— ã€‚ å¯ç”¨èƒŒæ™¯å›¾å½¢é€‰é¡¹ã€‚ ç‚¹å‡»ä¿å­˜æŒ‰é’® ç„¶åå°±èƒ½çœ‹åˆ°æˆ‘ä»¬ä¿å­˜åˆ°æœ¬åœ°çš„pdfæ–‡ä»¶äº†ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"TypeScriptä»å¹³å‡¡åˆ°ä¸å‡¡ï¼ˆåŸºç¡€ç¯‡ï¼‰","date":"2021-07-29T13:36:00.000Z","path":"2021/07/29/TypeScript.html","text":"ç”±äºJSè¯­è¨€æœ¬èº«çš„å±€é™ï¼Œéš¾ä»¥èƒœä»»å’Œç»´æŠ¤å¤§å‹çš„é¡¹ç›®ï¼Œå› æ­¤å¾®è½¯åœ¨2013å¹´å‘å¸ƒäº†æ­£å¼ç‰ˆæœ¬çš„TypeScriptï¼Œä½¿å…¶èƒ½å¤Ÿèƒœä»»å¤§å‹é¡¹ç›®çš„å¼€å‘ç»´æŠ¤ï¼›ç°åœ¨ï¼Œå¾ˆå¤šæµè¡Œçš„æ¡†æ¶å’Œç±»åº“éƒ½å·²ç»è½¬å‘é‡‡ç”¨TypeScriptè¿›è¡Œå¼€å‘ï¼Œé‚£ä¹ˆTSç›¸æ¯”ä¸JSçš„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹TSæ˜¯å‡­å€Ÿä»€ä¹ˆä»è€Œå®ç°é€†è¢­çš„ã€‚ ä»å¹³å‡¡åˆ°ä¸å‡¡ï¼Œè‹±æ–‡åŸå¥ï¼šFrom Zero To Heroï¼Œè®©æˆ‘ä»¬å­¦ä¹ TSä»Zeroå¼€å§‹ï¼Œåˆ°è¾¾Heroã€‚ TypeScriptç®€ä»‹ é‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯TypeScriptå‘¢ï¼Ÿ TypeScriptæ˜¯JavaScriptç±»å‹çš„è¶…é›†ï¼Œå®ƒå¯ä»¥ç¼–è¯‘æˆçº¯JavaScriptã€‚ è¿™é‡Œçš„è¶…é›†æ˜¯æ•°å­¦ä¸Šçš„æ¦‚å¿µï¼Œä¸å®ƒç›¸å¯¹çš„æ¦‚å¿µå°±æ˜¯å­é›†ï¼›æ‰€è°“çš„è¶…é›†å­é›†ï¼Œä»–ä»¬æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œæœ‰è¶…é›†å¿…ç„¶æœ‰å­é›†ï¼›TypeScriptæ˜¯JavaScriptç±»å‹çš„è¶…é›†ï¼Œä¹Ÿå°±æ˜¯è¯´JavaScriptå…·æœ‰çš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒTypeScriptå…¨éƒ½æœ‰ï¼Œå¹¶åœ¨è¿™ä¸ªåŸºç¡€ä¸Šæœ‰ä¸€äº›JavaScriptä¸å…·å¤‡çš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œå½¢æˆäº†è‡ªå·±çš„ä¼˜åŠ¿ã€‚ ç”¨å›¾å½¢æ¥è¡¨ç¤ºå°±æ˜¯è¿™æ ·çš„ï¼š é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼ŒTypeScriptçš„ä¼˜åŠ¿ä½“ç°åœ¨å“ªé‡Œå‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“JavaScriptæ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œå®ƒæ²¡æœ‰Javaä¸€æ ·å¯¹å˜é‡ç±»å‹ä¸¥è‹›çš„çº¦æŸï¼Œè¿™æ ·å¸¦æ¥çš„çµæ´»æ€§ä¸€æ–¹é¢èƒ½å¤Ÿè®©è‡ªèº«é™ä½å‡†å…¥é—¨æ§›ï¼Œè“¬å‹ƒå‘å±•ï¼Œä¸€ç›´ç¨³å±…GitHubçƒ­é—¨ç¼–ç¨‹è¯­è¨€å®åº§ï¼›å¦ä¸€æ–¹é¢ï¼Œçµæ´»æ€§ä¹Ÿä½¿å¾—å®ƒçš„ä»£ç è´¨é‡å‚å·®ä¸é½ï¼Œç»´æŠ¤æˆæœ¬é«˜ä»¥åŠå®¹æ˜“äº§ç”Ÿè¿è¡Œæ—¶é”™è¯¯ã€‚ ä»TypeScriptåå­—ä¸­çš„ç±»å‹å°±èƒ½çœ‹å‡ºï¼Œå…¶æ ¸å¿ƒç‰¹æ€§å°±æ˜¯å®ƒçš„ç±»å‹ç³»ç»Ÿï¼Œæ¥å¼¥è¡¥JavaScriptçµæ´»æ€§å¸¦æ¥çš„å¼Šç«¯ï¼›å› æ­¤TypeScriptç›¸è¾ƒäºJavaScriptæœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š ç±»å‹ç³»ç»Ÿå¢å¼ºäº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼› åœ¨ç¼–è¯‘é˜¶æ®µå°±èƒ½å‘ç°ç¨‹åºçš„é”™è¯¯ï¼› å¢å¼ºäº†ç¼–è¾‘å™¨å’ŒIDEçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºã€è·³è½¬åˆ°å®šä¹‰ã€é‡æ„ç­‰ï¼› å…¼å®¹æ€§å¼ºï¼Œç°æœ‰jsä»£ç å¯ä¸TypeScriptä¸€èµ·å·¥ä½œï¼Œæ— éœ€ä¿®æ”¹ï¼› å¥½äº†ï¼Œå¤¸äº†è¿™ä¹ˆå¤šå½©è™¹å±ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥åˆ°å®‰è£…ç¯èŠ‚ï¼š 1npm install -g typescript å…¨å±€å®‰è£…åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡tscå‘½ä»¤ç¼–è¯‘æˆ‘ä»¬çš„TypeScriptæ–‡ä»¶äº†ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„hello.tsï¼š 12345function hello(person: string) &#123; return &quot;Hello, &quot; + person;&#125;var user = &quot;Jane User&quot;;hello(user); ç„¶åæ‰§è¡Œç¼–è¯‘å‘½ä»¤ï¼Œå°±å˜æˆæˆ‘ä»¬å¸¸è§çš„jsäº†ï¼š 1tsc hello.ts åœ¨ä¸Šé¢tsæ–‡ä»¶ä¸­ï¼Œä½¿ç”¨:æ¥æŒ‡å®šå˜é‡çš„ç±»å‹ã€‚ TypeScriptåŸºç¡€ æˆ‘ä»¬å…ˆä»TypeScriptçš„ä¸€äº›åŸºæœ¬æ¦‚å¿µå¼€å§‹ä»‹ç»ï¼Œè®©å¤§å®¶å¯¹å®ƒæœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼ˆä»¥ä¸‹ç®€ç§°tsï¼‰ã€‚ åŸºæœ¬æ•°æ®ç±»å‹å¸ƒå°”å€¼ å¸ƒå°”å€¼æ˜¯åŸºç¡€çš„æ•°æ®ç±»å‹ï¼Œåœ¨tsä¸­ï¼Œä½¿ç”¨booleanå®šä¹‰å¸ƒå°”å€¼ç±»å‹ï¼š 1let isDone: boolean = false; æˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸€ä¸‹booleanå’ŒBooleanï¼Œå‰è€…æ˜¯ç”¨æ¥å®šä¹‰ç±»å‹ï¼Œåè€…æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡ï¼š 12let isDone: object = new Boolean(1);let isDoneToo: boolean = Boolean(1); è¿™é‡Œnew Boolean()è¿”å›çš„æ˜¯ä¸€ä¸ªBooleanå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯å¯¹è±¡ï¼Œè€ŒBoolean()ç›´æ¥è°ƒç”¨ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ªbooleanç±»å‹çš„å€¼ï¼›è¿™é‡Œè¦æ³¨æ„ä¸¤è€…çš„åŒºåˆ«ï¼Œä¸‹é¢çš„å‡ ç§åŸºæœ¬æ•°æ®ç±»å‹ä¹Ÿéƒ½æœ‰è¿™æ ·çš„åŒºåˆ«ï¼Œä¸åœ¨èµ˜è¿°ã€‚ æ•°å€¼1234567let decLiteral: number = 6;//åå…­è¿›åˆ¶let hexLiteral: number = 0xf00d;//äºŒè¿›åˆ¶let binaryLiteral: number = 0b1010;//å…«è¿›åˆ¶let octalLiteral: number = 0o744; tsç”¨numberè¡¨ç¤ºæ•°å€¼ç±»å‹ï¼Œé™¤äº†åè¿›åˆ¶å’Œåå…­è¿›åˆ¶çš„æ•°å€¼ï¼Œè¿˜æ”¯æŒäºŒè¿›åˆ¶å’Œå…«è¿›åˆ¶ï¼Œåé¢ä¸¤è€…ä¼šè¢«ç¼–è¯‘æˆäºŒè¿›åˆ¶çš„æ•°å­—ã€‚ å­—ç¬¦ä¸²123let firstName: string = &#x27;Jack&#x27;let lastName: string = &quot;Bob&quot;let name: string = `$&#123;firstName&#125; $&#123;lastName&#125;` æˆ‘ä»¬ä½¿ç”¨stringè¡¨ç¤ºæ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å·ï¼ˆâ€™ï¼‰ã€åŒå¼•å·ï¼ˆâ€ï¼‰æˆ–è€…es6ä¸­çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆ`ï¼‰ã€‚ Void åœ¨tsä¸­ï¼Œå¯ä»¥ç”¨voidæ¥è¡¨ç¤ºæ²¡æœ‰ä»»ä½•è¿”å›å€¼çš„å‡½æ•°ï¼š 123function helloTS(): void&#123; console.log(&quot;i have no return value&quot;)&#125; å£°æ˜ä¸€ä¸ªvoidç±»å‹çš„å˜é‡æ²¡ä»€ä¹ˆç”¨ï¼Œæˆ‘ä»¬åªèƒ½ç»™å®ƒèµ‹å€¼undefinedæˆ–è€…nullï¼š 123let a: void = undefined//æŠ¥é”™ï¼šä¸èƒ½å°†ç±»å‹â€œ1â€åˆ†é…ç»™ç±»å‹â€œvoidâ€ã€‚a = 1 Never neverç±»å‹è¡¨ç¤ºé‚£äº›æ°¸è¿œä¸ä¼šå­˜åœ¨å€¼çš„ç±»å‹ï¼›ä¾‹å¦‚ï¼Œ never ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚ æ­¤å¤–ï¼Œå˜é‡ä¹Ÿå¯èƒ½æ˜¯neverç±»å‹ï¼Œå½“å®ƒä»¬è¢«æ°¸ä¸ä¸ºçœŸçš„ç±»å‹ä¿æŠ¤æ‰€çº¦æŸæ—¶ã€‚ä¸ºäº†è®©å¤§å®¶æ›´å¥½çš„ç†è§£neverç±»å‹ï¼Œæˆ‘ä»¬æ¥ä¸¾ä¸€äº›å®é™…çš„ä¾‹å­ã€‚ 123456789101112131415161718// å®šä¹‰neverç±»å‹çš„å˜é‡let foo: never; // è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function error(message: string): never &#123; throw new Error(message);&#125;// æ¨æ–­çš„è¿”å›å€¼ç±»å‹ä¸ºneverfunction fail() &#123; return error(&quot;Something failed&quot;);&#125;// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹function infiniteLoop(): never &#123; while (true) &#123; &#125;&#125; é‚£ä¹ˆneverç±»å‹æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿå°¤å¤§å¤§åœ¨çŸ¥ä¹ä¸Šä¸¾äº†ä¸€ä¸ªä¾‹å­ï¼Œåˆ©ç”¨neverçš„ç‰¹æ€§æ¥å®ç°è¯¦ç»†çš„æ£€æŸ¥ï¼š 123456789101112type Foo = string | number;function handleValue(foo: Foo) &#123; if (typeof foo === &quot;string&quot;) &#123; // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹ &#125; else if (typeof foo === &quot;number&quot;) &#123; // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹ &#125; else &#123; // æ°¸è¿œåˆ°è¾¾ä¸äº† const check: never = foo; &#125;&#125; å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè”åˆç±»å‹ï¼Œåœ¨å‡½æ•°ä¸­è¿›è¡Œç±»å‹åˆ¤æ–­ï¼›å¦‚æœé€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆæœ€åçš„elseæ˜¯æ°¸è¿œåˆ°è¾¾ä¸äº†çš„ï¼›ä½†æ˜¯å¦‚æœæœ‰ä¸€å¤©ä½ çš„åŒäº‹ä¿®æ”¹äº†Fooçš„ç±»å‹ï¼š 1type Foo = string | number | boolean; åŒæ—¶å¿˜è®°ä¿®æ”¹handleValueå‡½æ•°ä¸­çš„æ§åˆ¶æµç¨‹ï¼Œé‚£ä¹ˆè¿™æ—¶ï¼Œelseä¸­çš„checkå˜é‡å°±ä¼šè¢«æ”¶çª„ä¸ºbooleanç±»å‹ï¼Œå°±ä¼šäº§ç”Ÿç¼–è¯‘é”™è¯¯ã€‚ é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç©·å°½Fooæ‰€æœ‰å¯èƒ½çš„ç±»å‹ï¼Œé¿å…æ–°å¢äº†è”åˆç±»å‹å´æ²¡æœ‰å¯¹åº”çš„å®ç°ã€‚ Unknown å½“æˆ‘ä»¬åœ¨å†™åº”ç”¨çš„æ—¶å€™å¯èƒ½ä¼šéœ€è¦æè¿°ä¸€ä¸ªæˆ‘ä»¬è¿˜ä¸çŸ¥é“å…¶ç±»å‹çš„å˜é‡ï¼›è¿™äº›å€¼å¯ä»¥æ¥è‡ªåŠ¨æ€çš„å†…å®¹ï¼Œä¾‹å¦‚ä»ç”¨æˆ·è·å¾—ï¼Œæˆ–è€…æˆ‘ä»¬æƒ³åœ¨APIä¸­æ¥æ”¶æ‰€æœ‰å¯èƒ½ç±»å‹çš„å€¼ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æƒ³è¦è®©ç¼–è¯‘å™¨ä»¥åŠæœªæ¥çš„ç”¨æˆ·çŸ¥é“è¿™ä¸ªå˜é‡å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¼šä½¿ç”¨ unknown ç±»å‹ã€‚ 123456let maybe: unknown;maybe = 1;maybe = &quot;2&quot;;maybe = &#123;&#125;;maybe = []; å¦‚æœä½ æœ‰ä¸€ä¸ª unknwon ç±»å‹çš„å˜é‡ï¼Œä½ å¯ä»¥é€šè¿‡è¿›è¡Œ typeofæ¯”è¾ƒæˆ–è€…æ›´é«˜çº§çš„ç±»å‹æ£€æŸ¥æ¥å°†å…¶çš„ç±»å‹èŒƒå›´ç¼©å°ï¼š 123456789let maybe: unknown;if (typeof maybe === &quot;string&quot;) &#123; maybe.substr(0, 2);&#125; else if (typeof maybe === &quot;number&quot;) &#123; maybe.toString();&#125; else if (typeof maybe === &quot;boolean&quot;) &#123; maybe.valueOf();&#125; Nullå’ŒUndefined åœ¨tsä¸­ï¼Œå¯ä»¥ä½¿ç”¨nullå’Œundefinedæ¥å®šä¹‰è¿™ä¸¤ä¸ªæ•°æ®ç±»å‹ï¼š 12let u: undefined = undefinedlet n: null = null è¿™ä¸¤ä¸ªæ•°æ®ç±»å‹åªèƒ½åˆ†åˆ«å”¯ä¸€å®šä¹‰å„è‡ªçš„æ•°æ®ï¼Œå› æ­¤æœ¬èº«ç”¨å¤„ä¸æ˜¯å¾ˆå¤§ï¼›ä¸è¿‡undefinedå’Œnullæ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ï¼Œå› æ­¤å®ƒä»¬å¯ä»¥èµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡ï¼ŒåŒ…æ‹¬voidï¼š 1let num = undefined Any åœ¨ç¼–ç¨‹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜æ²¡æœ‰ç¡®å®šä¸€ä¸ªå˜é‡çš„æ•°æ®ç±»å‹ï¼Œè¿™ä¸ªå€¼å¯èƒ½æ¥è‡ªåŠ¨æ€çš„å†…å®¹ï¼Œæ¯”å¦‚æ¥å£æ•°æ®ï¼Œæˆ–è€…ç¬¬ä¸‰æ–¹çš„åº“ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å¯¹å®ƒè¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œå› æ­¤å¯ä»¥ç”¨ä»»æ„å€¼anyæ¥æ ‡è®°å…è®¸å˜é‡èµ‹å€¼ä¸ºä»»æ„æ•°æ®ç±»å‹ã€‚ 123let someValue:any = 10someValue = &#x27;20&#x27;someValue = &#123;&#125; åœ¨ä»»æ„å€¼ä¸Šå¯ä»¥è®¿é—®ä»»ä½•å±æ€§å’Œè°ƒç”¨ä»»ä½•å‡½æ•°ï¼š 123456let someValue: any = &#x27;&#x27;console.log(someValue.name)console.log(someValue.name.firstName)someValue.showName()someValue.name.showName() å¦‚æœå˜é‡åœ¨å£°æ˜æ—¶æœªæŒ‡å®šå…¶ç±»å‹ï¼Œä¼šè¢«è¯†åˆ«ä¸ºä»»æ„å€¼ç±»å‹ï¼š 1234567let sth// ç­‰ä»·äº// let sth:anysth = &quot;seven&quot;sth = 7sth.setName(&quot;Tom&quot;) Neverå’ŒVoidçš„åŒºåˆ« æˆ‘ä»¬çœ‹åˆ°ä¸Šé¢çš„Neverå’ŒVoidæœ‰ç‚¹ç±»ä¼¼ï¼Œéƒ½å¯ä»¥ç”¨äºæè¿°å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œä½†æ˜¯ä¸¤è€…æœ‰æœ¬è´¨çš„åŒºåˆ«ï¼š æ²¡æœ‰æ˜¾å¼è¿”å›å€¼çš„å‡½æ•°ä¼šéšå¼è¿”å› undefined ã€‚å°½ç®¡æˆ‘ä»¬é€šå¸¸è¯´è¿™æ ·çš„å‡½æ•°ä»€ä¹ˆä¹Ÿä¸è¿”å›ï¼Œä½†å®é™…ä¸Šå®ƒæ˜¯ä¼šè¿”å›çš„ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬é€šå¸¸å¿½ç•¥è¿”å›å€¼ã€‚åœ¨tsä¸­è¿™äº›å‡½æ•°çš„è¿”å›ç±»å‹è¢«æ¨æ–­ä¸º voidã€‚ å…·æœ‰neverè¿”å›ç±»å‹çš„å‡½æ•°æ°¸ä¸è¿”å›ï¼Œå®ƒä¹Ÿä¸è¿”å› undefinedã€‚è¯¥å‡½æ•°æ²¡æœ‰æ­£å¸¸å®Œæˆï¼Œè¿™æ„å‘³ç€å®ƒå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬æ— æ³•é€€å‡ºæ‰§è¡Œã€‚ 12345678// æ­£å¸¸è¿è¡Œfunction returnVoid(): void &#123; return undefined;&#125;// æŠ¥é”™ï¼š// A function returning &#x27;never&#x27; cannot have a reachable end point.function returnNever(): never &#123;&#125; Unknowå’ŒAnyçš„åŒºåˆ« åœ¨tsä¸­ï¼Œå½“æˆ‘ä»¬ä¸ç¡®å®šä¸€ä¸ªç±»å‹æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œå¯ä»¥é€‰æ‹©ç»™å…¶å£°æ˜ä¸ºanyæˆ–è€…unkownã€‚ä½†å®é™…ä¸Šï¼Œtsæ¨èä½¿ç”¨unknownï¼Œå› ä¸ºunknownæ˜¯ç±»å‹å®‰å…¨çš„ã€‚ å¦‚æœæ˜¯anyç±»å‹ï¼Œä½ å¯ä»¥å¯¹å®ƒä»»æ„çš„å–å€¼å’Œèµ‹å€¼ï¼Œå®Œå…¨æ”¾å¼ƒäº†ç±»å‹æ£€æŸ¥ï¼›ä½†unknowç±»å‹å°±ä¸ä¸€æ ·äº†ï¼Œå¿…é¡»è¿›è¡Œç±»å‹æ”¶çª„æ‰èƒ½è¿›è¡Œå–å€¼ã€‚ 12345678910111213let maybe1: any;let maybe2: unknownmaybe1 = 1maybe1 = &#123;&#125;//æ­£å¸¸è¿è¡Œmaybe1.children.origin.hello()maybe2 = 2maybe2 = &#123;&#125;// æŠ¥é”™ï¼š// //Property &#x27;length&#x27; does not exist on type &#x27;unknown&#x27;console.log(maybe2.length) è¿™åæ˜ äº†ä¸¤è€…çš„ä¸€ä¸ªæœ¬è´¨åŒºåˆ«ï¼š anyæ˜¯ä»»æ„ç±»å‹çš„çˆ¶ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿä»»æ„ç±»å‹çš„å­ç±»å‹ unknownæ˜¯ä»»æ„ç±»å‹çš„çˆ¶ç±»å‹ï¼Œä½†ä»…æ­¤è€Œå·²ã€‚ ç±»å‹æ¨è®º åœ¨tsä¸­ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ²¡æœ‰æ˜ç¡®æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆä¼šæŒ‰ç…§ç±»å‹æ¨è®ºçš„è§„åˆ™æ¥æ¨æ–­å‡ºä¸€ä¸ªç±»å‹ã€‚ 1234let myNumber = 7myNumber = &#x27;8&#x27;// æŠ¥é”™ï¼š// Type &#x27;string&#x27; is not assignable to type &#x27;number&#x27;. è¿™é‡Œå˜é‡myNumberè¢«æ¨æ–­ä¸ºæ•°å­—ï¼Œå› æ­¤å†æ¬¡æ”¹å˜å…¶ç±»å‹å°±æŠ¥é”™äº†ã€‚ è”åˆç±»å‹ è”åˆç±»å‹è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ï¼› 123let myData: string | numbermyData = 7myData = &quot;8&quot; æˆ‘ä»¬ç”¨ç«–çº¿åˆ†éš”æ¯ä¸ªç±»å‹ï¼Œå…è®¸myDataçš„ç±»å‹å¯ä»¥æ˜¯stringæˆ–è€…numberï¼Œä½†ä¸å…è®¸æ˜¯å…¶ä»–ç±»å‹ã€‚ å¶å°”æˆ‘ä»¬ä¼šé‡åˆ°å‡½æ•°ä¼ å‚æ—¶ï¼Œä¸€ä¸ªå‚æ•°å…è®¸ä¼ å…¥ä¸åŒç±»å‹ï¼Œä¹Ÿå¯ä»¥ç”¨åˆ°è”åˆç±»å‹ï¼š 12345function say(age: string | number)&#123; console.log(age)&#125;say(10)say(&quot;11&quot;) å½“tsä¸ç¡®å®šè”åˆç±»å‹çš„å˜é‡åˆ°åº•æ˜¯å“ªä¸€ç§ç±»å‹çš„æ—¶å€™ï¼Œåªèƒ½è®¿é—®æ­¤è”åˆç±»å‹çš„æ‰€æœ‰ç±»å‹é‡Œå…±æœ‰çš„å±æ€§æˆ–æ–¹æ³•ï¼š 123456function say(age: string | number)&#123; // toStringæ˜¯å…±æœ‰çš„æ–¹æ³• console.log(age.toString()) // æŠ¥é”™ï¼šProperty &#x27;length&#x27; does not exist on type &#x27;number&#x27;. console.log(age.length)&#125; è”åˆç±»å‹çš„å˜é‡åœ¨èµ‹å€¼æ—¶ï¼Œä¼šæ ¹æ®ç±»å‹æ¨è®ºæ¨æ–­å‡ºä¸€ä¸ªç±»å‹ï¼š 12345678let myData: string | numbermyData = &quot;8&quot;console.log(myData.length)myData = 7// æŠ¥é”™ï¼šProperty &#x27;length&#x27; does not exist on type &#x27;number&#x27;.console.log(myData.length) æ•°ç»„çš„ç±»å‹ åœ¨tsä¸­æˆ‘ä»¬å¯ä»¥ç”¨å¤šç§æ–¹å¼æ¥å®šä¹‰æ•°ç»„ã€‚ ç±»å‹åŠ [] æœ€ç®€å•çš„è¡¨ç¤ºæ•°ç»„æ˜¯ä½¿ç”¨ç±»å‹+[]çš„å½¢å¼ï¼š 1let list: number[] = [1, 2, 3] æ•°ç»„çš„é¡¹ä¸­ä¸èƒ½å‡ºç°å…¶ä»–çš„ç±»å‹ï¼ŒåŒ…æ‹¬è°ƒç”¨æ•°ç»„æ·»åŠ çš„æ–¹æ³•ï¼š 123456// æŠ¥é”™ï¼šType &#x27;string&#x27; is not assignable to type &#x27;number&#x27;.let list: number[] = [1, 2, &#x27;3&#x27;]let list1: number[] = []// æŠ¥é”™ï¼šArgument of type &#x27;string&#x27; is not assignable to parameter of type &#x27;number&#x27;list1.push(&#x27;3&#x27;) é’ˆå¯¹ä¸€äº›å¤æ‚ç»“æ„çš„æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡anyæ¥è¡¨ç¤ºæ•°ç»„ä¸­å…è®¸å‡ºç°ä»»æ„çš„ç±»å‹ 1let list: any[] = [&#x27;1&#x27;, 2, &#123; name: &#x27;Lucy&#x27;, age: 18 &#125;] æ•°ç»„æ³›å‹ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ•°ç»„æ³›å‹æ¥è¡¨ç¤ºæ•°ç»„ï¼š 1let list: Array&lt;number&gt; = [1,2,3] æ›´å¤šå…³äºæ³›å‹çš„ä¸‹é¢ä¼šæ¶‰åŠã€‚ æ¥å£è¡¨ç¤º æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨æ¥å£æ¥è¡¨ç¤ºä¸€ä¸ªæ•°ç»„ï¼š 12345interface NumberArray &#123; [index: number]: number;&#125;let list1: NumberArray = [1, 2, 3]; è¿™æ ·å®šä¹‰æ•°ç»„æ¯”è¾ƒç¹çï¼Œä¸å¸¸ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬ä¼šç”¨è¿™ç§å½¢å¼æ¥è¡¨ç¤ºç±»æ•°ç»„ï¼š 12345function sum() &#123; // æŠ¥é”™ï¼š //Type &#x27;IArguments&#x27; is missing the following properties from type &#x27;any[]&#x27;: pop, push, concat, join, and 15 more. let arg: any[] = arguments;&#125; æˆ‘ä»¬ç›´æ¥ç”¨æ•°ç»„çš„ç±»å‹æ¥è¡¨è¾¾argumentsä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒæœ¬èº«ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ²¡æœ‰æ•°ç»„çš„pushã€popç­‰å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ¥å£çš„æ–¹å¼ï¼š 123456789interface ArgumentInterface &#123; [index: number]: any; length: number; callee: Function;&#125;function sum() &#123; let arg: ArgumentInterface = arguments;&#125; è¿™é‡Œçš„ArgumentInterfaceå®é™…ä¸Šåœ¨tså†…éƒ¨å·²ç»å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼š 123function sum() &#123; let arg: IArguments = arguments;&#125; æšä¸¾ æšä¸¾åœ¨é¡¹ç›®ä¸­éšå¤„å¯è§ï¼Œæ¯”å¦‚ä¸€ç³»åˆ—æœˆä»½ã€æ—¥æœŸçš„é€‰æ‹©ï¼Œæˆ–è€…å’Œåå°çº¦å®šçš„åˆ—è¡¨èŒƒå›´å†…çš„é€‰æ‹©ç­‰ï¼›é€šè¿‡tsï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ¸…æ™°æ›´æ–¹ä¾¿çš„æ¥å®šä¹‰æšä¸¾å€¼ã€‚ 123456789enum Days &#123; Sun, Mon, Tue, Wed, Thu, Fri, Sat,&#125; æšä¸¾é€šè¿‡enumæ¥å®šä¹‰ï¼Œæšä¸¾æˆå‘˜ä¼šè¢«ä»0å¼€å§‹é€’å¢èµ‹å€¼ï¼ŒåŒæ—¶ä¹Ÿä¼šè¿›è¡Œæšä¸¾å€¼åˆ°æšä¸¾åçš„åå‘æ˜ å°„ï¼š 1234567console.log(Days[&#x27;Sun&#x27;] === 0)console.log(Days[&#x27;Mon&#x27;] === 1)console.log(Days[&#x27;Tue&#x27;] === 2)console.log(Days[0] === &#x27;Sun&#x27;)console.log(Days[1] === &#x27;Mon&#x27;)console.log(Days[2] === &#x27;Tue&#x27;) äº‹å®ä¸Šï¼Œä¸Šé¢æšä¸¾ä»£ç ä¼šè¢«ç¼–è¯‘ä¸ºä»¥ä¸‹jsä»£ç ï¼š 12345678910var Days;(function (Days) &#123; Days[Days[&quot;Sun&quot;] = 0] = &quot;Sun&quot;; Days[Days[&quot;Mon&quot;] = 1] = &quot;Mon&quot;; Days[Days[&quot;Tue&quot;] = 2] = &quot;Tue&quot;; Days[Days[&quot;Wed&quot;] = 3] = &quot;Wed&quot;; Days[Days[&quot;Thu&quot;] = 4] = &quot;Thu&quot;; Days[Days[&quot;Fri&quot;] = 5] = &quot;Fri&quot;; Days[Days[&quot;Sat&quot;] = 6] = &quot;Sat&quot;;&#125;)(Days || (Days = &#123;&#125;)); å¦‚æœæˆ‘ä»¬å¯¹æšä¸¾å€¼æœ‰å…¶ä»–éœ€æ±‚ï¼Œå¯ä»¥è¿›è¡Œæ‰‹åŠ¨èµ‹å€¼ï¼š 1234567891011121314enum Days &#123; Sun = 7, Mon = 1, Tue, Wed, Thu, Fri, Sat,&#125;console.log(Days[&#x27;Sun&#x27;] === 7)console.log(Days[&#x27;Mon&#x27;] === 1)console.log(Days[&#x27;Tue&#x27;] === 2)console.log(Days[&#x27;Wed&#x27;] === 4) æœªæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹ä¼šæ¥ç€ä¸Šä¸€ä¸ªæšä¸¾é¡¹çš„å€¼é€’å¢ï¼›å¦‚æœæ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾é¡¹å’Œåé¢é€’å¢çš„é‡å¤äº†ï¼Œtsä¹Ÿä¸ä¼šæŠ¥é”™ï¼š 12345678910111213enum Days &#123; Sun = 3, Mon = 1, Tue, Wed, Thu, Fri, Sat,&#125;console.log(Days[&quot;Sun&quot;] === 3); // trueconsole.log(Days[&quot;Wed&quot;] === 3); // trueconsole.log(Days[3] === &quot;Sun&quot;); // falseconsole.log(Days[3] === &quot;Wed&quot;); // true å¯ä»¥çœ‹åˆ°ï¼Œå½“é€’å¢åˆ°3æ—¶ï¼ŒWedä¸å‰é¢çš„Suné‡å¤äº†ï¼Œæšä¸¾é¡¹çš„å€¼è¿˜æ˜¯èƒ½ç»§ç»­å–åˆ°ï¼›ä½†æ˜¯æšä¸¾å€¼å¯¹åº”çš„æšä¸¾é¡¹ä¼šè¢«è¦†ç›–ï¼Œä¸Šé¢ä»£ç ä¼šè¢«å¦‚ä¸‹ç¼–è¯‘ï¼š 12345678910var Days;(function (Days) &#123; Days[Days[&quot;Sun&quot;] = 3] = &quot;Sun&quot;; Days[Days[&quot;Mon&quot;] = 1] = &quot;Mon&quot;; Days[Days[&quot;Tue&quot;] = 2] = &quot;Tue&quot;; Days[Days[&quot;Wed&quot;] = 3] = &quot;Wed&quot;; Days[Days[&quot;Thu&quot;] = 4] = &quot;Thu&quot;; Days[Days[&quot;Fri&quot;] = 5] = &quot;Fri&quot;; Days[Days[&quot;Sat&quot;] = 6] = &quot;Sat&quot;;&#125;)(Days || (Days = &#123;&#125;)); æ‰‹åŠ¨èµ‹å€¼çš„æšä¸¾å€¼ä¹Ÿå¯ä»¥ä¸ºå°æ•°æˆ–è€…è´Ÿæ•°ï¼Œåç»­ä¸ºèµ‹å€¼çš„é¡¹é€’å¢æ­¥é•¿ä»ä¸º1ï¼š 1234567891011121314enum Days &#123; Sun = -2.5, Mon, Tue, Wed = 3.5, Thu, Fri, Sat,&#125;console.log(Days[&#x27;Mon&#x27;] === -1.5)console.log(Days[&#x27;Tue&#x27;] === -0.5)console.log(Days[&#x27;Thu&#x27;] === 4.5)console.log(Days[&#x27;Fri&#x27;] === 5.5) è™½ç„¶æœ€åç¼–è¯‘æˆå¯¹è±¡ï¼Œä½†æ˜¯æšä¸¾é¡¹çš„å€¼æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼š 12345678enum Days &#123; Sun, Mon, Tue,&#125;// æŠ¥é”™// Cannot assign to &#x27;Sun&#x27; because it is a read-only property.Days.Sun = 7 å­—ç¬¦ä¸²æšä¸¾ æšä¸¾å€¼è¿˜å¯ä»¥è®¾ä¸ºå­—ç¬¦ä¸²ï¼š 123456enum Days &#123; Sun = &#x27;0&#x27;, Mon = &#x27;1&#x27;, Tue = &#x27;2&#x27;, Wed = &#x27;3&#x27;,&#125; ç”±äºæœªè®¾ç½®çš„æšä¸¾å€¼æ˜¯é€’å¢å…³ç³»ï¼Œå› æ­¤æˆ‘ä»¬æˆ‘ä»¬ä¸èƒ½å°†ä¸­é—´çš„æšä¸¾å€¼è®¾ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™æ ·å®ƒåé¢çš„æšä¸¾å€¼å°±ä¸çŸ¥é“ä»å“ªé‡Œå¼€å§‹äº†ï¼š 123456789101112131415161718192021// æŠ¥é”™ï¼š// Enum member must have initializer.enum Days &#123; Sun, Mon, Tue = &#x27;2&#x27;, Wed = &#x27;3&#x27;, Thu, Fri, Sat,&#125;//è¿™æ ·æ˜¯å¯ä»¥çš„enum Days1 &#123; Sun, Mon, Tue, Wed, Thu, Fri, Sat = &#x27;6&#x27;,&#125; å­—ç¬¦ä¸²çš„æšä¸¾å€¼æ˜¯ä¸åšåŒå‘æ˜ å°„çš„ï¼š 123456enum Days &#123; Sun = &#x27;0&#x27;, Mon = &#x27;1&#x27;, Tue = &#x27;2&#x27;, Wed = &#x27;3&#x27;,&#125; ä¸Šé¢ä»£ç ä¼šè¢«å¦‚ä¸‹ç¼–è¯‘ï¼š 1234567var Days1;(function (Days1) &#123; Days1[&quot;Sun&quot;] = &quot;0&quot;; Days1[&quot;Mon&quot;] = &quot;1&quot;; Days1[&quot;Tue&quot;] = &quot;2&quot;; Days1[&quot;Wed&quot;] = &quot;3&quot;;&#125;)(Days1 || (Days1 = &#123;&#125;)); å¸¸æ•°é¡¹å’Œè®¡ç®—é¡¹ æšä¸¾é¡¹å¯ä»¥åˆ†ä¸ºå¸¸æ•°é¡¹å’Œè®¡ç®—é¡¹ï¼Œå¸¸æ•°é¡¹æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼š å®ƒæ˜¯æšä¸¾çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸”æ²¡æœ‰åˆå§‹åŒ–å™¨ å®ƒä¸å¸¦æœ‰åˆå§‹åŒ–å™¨ä¸”å®ƒä¹‹å‰çš„æšä¸¾æˆå‘˜æ˜¯ä¸€ä¸ªæ•°å­—å¸¸é‡ æšä¸¾æˆå‘˜ä½¿ç”¨å¸¸é‡æšä¸¾è¡¨è¾¾å¼åˆå§‹åŒ– å…¶ä»–çš„æƒ…å†µéƒ½æ˜¯è®¡ç®—é¡¹ï¼š 123456789101112131415enum befor &#123; num,&#125;enum test &#123; // å¸¸æ•°é¡¹ First, Second = befor.num, Add = 1 + 2, NOR = 0 | 3, OR = 1 &amp; 2, // è®¡ç®—é¡¹ LEN = &quot;123&quot;.length, RAM = Math.random()&#125; å¸¸æ•°é¡¹ä¼šåœ¨ç¼–è¯‘æ—¶è®¡ç®—å‡ºç»“æœï¼Œç„¶åä»¥å¸¸é‡çš„å½¢å¼å‡ºç°åœ¨ä»£ç ä¸­ï¼Œä¸Šè¿°ä»£ç ä¼šè¢«å¦‚ä¸‹ç¼–è¯‘ï¼š 12345678910var test;(function (test) &#123; test[test[&quot;First&quot;] = 0] = &quot;First&quot;; test[test[&quot;Second&quot;] = 0] = &quot;Second&quot;; test[test[&quot;Add&quot;] = 3] = &quot;Add&quot;; test[test[&quot;NOR&quot;] = 3] = &quot;NOR&quot;; test[test[&quot;OR&quot;] = 0] = &quot;OR&quot;; test[test[&quot;LEN&quot;] = &quot;123&quot;.length] = &quot;LEN&quot;; test[test[&quot;RAM&quot;] = Math.random()] = &quot;RAM&quot;;&#125;)(test || (test = &#123;&#125;)); å¸¸é‡æšä¸¾ å¸¸é‡æšä¸¾æ˜¯é€šè¿‡const enumå®šä¹‰çš„æšä¸¾ç±»å‹ï¼š 12345const enum Month &#123; Jan, Feb, Mar,&#125; å¸¸é‡æšä¸¾åœ¨ç¼–è¯‘é˜¶æ®µä¼šè¢«ç§»é™¤ï¼›å½“æˆ‘ä»¬ä¸éœ€è¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œåªéœ€è¦å¯¹è±¡çš„å€¼ï¼Œå°±å¯ä»¥ä½¿ç”¨å¸¸é‡æšä¸¾ï¼Œè¿™æ ·å°±èƒ½é¿å…åœ¨ç¼–è¯‘æ—¶ç”Ÿæˆå¤šä½™çš„ä»£ç å’Œé—´æ¥å¼•ç”¨ï¼š 12345678910const enum Month &#123; Jan, Feb, Mar,&#125;//æŠ¥é”™ï¼š//&#x27;const&#x27; enums can only be used in property or index access expressions or the right hand side of an import declaration or export assignment or type query.console.log(Month)//æ­£å¸¸è¿è¡Œï¼Œè¾“å‡º0console.log(Month.Jan); ç”±äºå¸¸é‡æšä¸¾åœ¨ç¼–è¯‘æ—¶ä¼šè¢«ç§»é™¤ï¼Œå› æ­¤å¸¸é‡æšä¸¾ä¸èƒ½åŒ…å«è®¡ç®—é¡¹ï¼š 12345678const enum Month &#123; Jan, //æ­£å¸¸è¿è¡Œ Feb = 1 + 2, // æŠ¥é”™ï¼š // const enum member initializers can only contain literal values and other computed enum values. Mar = &quot;123&quot;.length,&#125; å¤–éƒ¨æšä¸¾ å¤–éƒ¨æšä¸¾æ˜¯ä½¿ç”¨declare enumå®šä¹‰çš„æšä¸¾ç±»å‹ï¼š 123456declare enum Directions &#123; Up, Down, Left, Right&#125; å¤–éƒ¨æšä¸¾ä¸å£°æ˜è¯­å¥ä¸€æ ·ï¼Œå¸¸å‡ºç°åœ¨å£°æ˜æ–‡ä»¶ä¸­ã€‚ å¯¹è±¡çš„ç±»å‹-æ¥å£ åœ¨tsä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨æ¥å£æ¥å®šä¹‰å¯¹è±¡çš„ç±»å‹ï¼›æœ‰æ—¶è¿™ä¹Ÿè¢«å«åšé¸­å¼è¾¨å‹æ³•ï¼š åƒé¸­å­ä¸€æ ·èµ°è·¯ã€æ¸¸æ³³å’Œå˜å˜å«çš„å°±æ˜¯é¸­å­ ä¹Ÿå°±æ˜¯è¯´ï¼Œå“ªæ€•æ˜¯ä¸€æ¡ç‹—ï¼Œå¦‚æœå®ƒä¹Ÿèƒ½åƒé¸­å­é‚£æ ·èµ°è·¯ã€æ¸¸æ³³å’Œå«ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿè®¤ä¸ºå®ƒæ˜¯ä¸€åªé¸­å­ã€‚ å¾ˆå¤šç«¥é‹å¯èƒ½å°±éš¾ä»¥ç†è§£ï¼Œå°±ç®—äº‹å®ä¸ŠçœŸçš„æœ‰ä¸€æ¡ç‹—è¿™ä¹ˆå»èµ°è·¯è¿™ä¹ˆå»å«ï¼Œå®ƒæœ¬è´¨ä¸Šä¹Ÿæ˜¯ç‹—ï¼Œæ€ä¹ˆä¼šå˜æˆé¸­å­å‘¢ï¼Ÿè¿™ä¸æ˜¯å…¸å‹çš„æŒ‡é¹¿ä¸ºé©¬ä¹ˆï¼Ÿ ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸¤ç±»åŠ¨ç‰©æ”¾åˆ°ç¨‹åºä¸­æ¥ï¼Œ 12345678910111213141516171819202122232425function Duck(name)&#123; this.name = name; this.duckWalk = function()&#123; console.log(&quot;æˆ‘æ˜¯ä¸€åªé¸­å­ï¼Œæˆ‘å¿«ä¹åœ°èµ°ç€&quot;) &#125;&#125;function Dog(name)&#123; this.name = name; this.duckWalk = function()&#123; console.log(&quot;æˆ‘æ˜¯ä¸€åªé¸­å­ï¼Œæˆ‘å¿«ä¹åœ°èµ°ç€&quot;) &#125; this.bark = function()&#123; console.log(&quot;æˆ‘æ˜¯ä¸€åªç‹—å­ï¼Œæˆ‘å¿«ä¹åœ°å«ç€&quot;) &#125;&#125;var duck = new Duck(&quot;a&quot;)var dog = new Dog(&quot;b&quot;)// é©±åŠ¨é¸­å­ä»¬å¾€å‰èµ°function needDuckWalk(duck)&#123; duck.duckWalk()&#125;needDuckWalk(duck)needDuckWalk(dog) è¿™é‡Œæ„é€ äº†duckå’Œdogè¿™ä¸¤ä¸ªåŠ¨ç‰©å®ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦é©±åŠ¨é¸­å­å¾€å‰èµ°èµ·æ¥ï¼ˆå³è°ƒç”¨ä»–ä»¬çš„å‡½æ•°ï¼‰ï¼Œä½†æ˜¯ç¨‹åºå¹¶ä¸éœ€è¦ç¡®åˆ‡çš„åŒºåˆ†è°æ˜¯è°ï¼Œåªè¦èƒ½å¤Ÿä¿è¯å®ƒæœ‰duckWalkå‡½æ•°å°±å¯ä»¥äº†ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„é¸­å¼è¾¨å‹æ³•ã€‚ ç¡®å®šå±æ€§ åœ¨é¢å‘å¯¹è±¡çš„è¯­è¨€ä¸­ï¼Œæ¥å£å°±æ˜¯æ¥ä¿è¯å¯¹è±¡æœ‰æˆ‘ä»¬éœ€è¦çš„å‡½æ•°ï¼Œå®ƒæ˜¯å¯¹ç±»çš„è¡Œä¸ºè¿›è¡Œçš„æŠ½è±¡ã€‚ 12345678910111213interface Duck &#123; name: string; age: number; gender: boolean; walk: Function;&#125;let dog: Duck = &#123; name: &quot;yellow&quot;, age: 2, gender: true, walk() &#123;&#125;,&#125;; æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ¥å£Duckï¼Œè§„å®šäº†å­—é¢é‡dogçš„ç±»å‹æ˜¯Duckï¼Œè¿™æ ·å°±çº¦æŸäº†dogçš„å±æ€§å¿…é¡»å’Œæ¥å£å®šä¹‰çš„ä¿æŒä¸€è‡´ï¼Œå¦‚æœå¤šä¸€äº›æˆ–è€…å°‘ä¸€äº›å±æ€§éƒ½æ˜¯ä¸å…è®¸çš„ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚ 123456// æŠ¥é”™ï¼š// Property &#x27;gender&#x27; is missing in type &#x27;&#123; name: string; age: number; &#125;&#x27; but required in type &#x27;Duck&#x27;.let dog: Duck = &#123; name: &quot;yellow&quot;, age: 2,&#125;; å¯é€‰å±æ€§ ä½†æ˜¯æœ‰ä¸€äº›å±æ€§æ˜¯å¯æœ‰å¯æ— çš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›å®Œå…¨åŒ¹é…ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç”¨å¯é€‰å±æ€§ï¼š 12345678910interface Duck &#123; name: string; age?: number; birth?: string; gender?: boolean;&#125;let dog: Duck = &#123; name: &quot;yellow&quot;,&#125;; å¯é€‰å±æ€§åœ¨å±æ€§åé¢åŠ ä¸€ä¸ªé—®å·ï¼Œè¡¨ç¤ºè¯¥å±æ€§æ˜¯éå¿…é¡»çš„ï¼Œä¸€ä¸ªæ¥å£ä¸­å¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªå¯é€‰å±æ€§ï¼›ä½†æ˜¯è¿™æ—¶å…¶ä»–å±æ€§è¿˜æ˜¯ä¸å…è®¸æ·»åŠ çš„ã€‚ ä»»æ„å±æ€§ æˆ‘ä»¬å¸Œæœ›åœ¨ä¸€ä¸ªæ¥å£ä¸­æ·»åŠ ä»»æ„çš„å±æ€§ï¼Œå¯ä»¥é€šè¿‡ä»»æ„å±æ€§çš„æ–¹å¼ï¼š 1234567891011interface Duck &#123; name: string; age?: number; [propName: string]: any;&#125;let dog: Duck = &#123; name: &quot;yellow&quot;, birth: &quot;&quot;, color: [&quot;red&quot;]&#125;; ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä»»æ„å±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨ä¸Šé¢å®šä¹‰çš„ç¡®å®šå±æ€§å’Œå¯é€‰å±æ€§å¿…é¡»æ˜¯å®ƒçš„ç±»å‹çš„å­é›†ï¼š 123456789// æŠ¥é”™ï¼š// Property &#x27;age&#x27; of type &#x27;number&#x27; is not assignable to &#x27;string&#x27; index type &#x27;string&#x27;.// Property &#x27;gender&#x27; of type &#x27;boolean&#x27; is not assignable to &#x27;string&#x27; index type &#x27;string&#x27;.interface Duck &#123; name: string; age?: number; gender?: boolean; [propName: string]: string;&#125; è¿™é‡Œageå’Œgenderåˆ†åˆ«æ˜¯numberå’Œbooleanç±»å‹ï¼Œä¸æ˜¯stringç±»å‹çš„å­é›†ï¼Œå› æ­¤å°±ä¼šæŠ¥é”™ï¼›åœ¨ä¸€ä¸ªæ¥å£ä¸­åªèƒ½å®šä¹‰ä¸€ä¸ªä»»æ„ç±»å‹ï¼Œå¦‚æœæ¥å£ä¸­æœ‰å¤šä¸ªç±»å‹çš„å±æ€§ï¼Œå¯ä»¥ä½¿ç”¨è”åˆç±»å‹ï¼š 12345678910interface Duck &#123; name: string; age?: number; [propName: string]: string | number;&#125;let dog: Duck = &#123; name: &quot;yellow&quot;, birth: &quot;&quot;&#125;; åªè¯»å±æ€§ æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€äº›å±æ€§åªèƒ½è¢«è¯»å–ï¼Œä¸èƒ½è¿›è¡Œä¿®æ”¹ï¼Œå¯ä»¥å°†å…¶å®šä¹‰ä¸ºåªè¯»å±æ€§readonlyï¼Œæ¯”å¦‚å”¯ä¸€æ ‡è¯†çš„idä¿¡æ¯ï¼›åªè¯»å±æ€§åªèƒ½åœ¨åˆå§‹åŒ–æ—¶è¢«èµ‹å€¼ï¼š 123456789101112interface Duck &#123; readonly id: number; name: string;&#125;let dog: Duck = &#123; id: 9527, name: &quot;yellow&quot;,&#125;;// æŠ¥é”™ï¼š// Cannot assign to &#x27;id&#x27; because it is a read-only property.dog.id = 9528; æœ‰äº›ç«¥é‹å¯èƒ½æƒ³åˆ°äº†ï¼Œé‚£æˆ‘åˆå§‹åŒ–å¯¹è±¡æ—¶ä¸èµ‹å€¼ï¼Œåé¢ä¸å°±å¯ä»¥å†ä¿®æ”¹åªè¯»å±æ€§çš„å€¼äº†å—ï¼Ÿ 12345678910interface Duck &#123; readonly id: number; name: string;&#125;// æŠ¥é”™ï¼š// Property &#x27;id&#x27; is missing in type &#x27;&#123; name: string; &#125;&#x27; but required in type &#x27;Duck&#x27;.let dog: Duck = &#123; name: &quot;yellow&quot;,&#125;; ç„¶è€Œå¾ˆé—æ†¾ï¼Œä½ å°±ä¼šæ”¶è·å¦ä¸€ä¸ªé”™è¯¯ã€‚ åªè¯»å±æ€§çš„æ€§è´¨å’Œç¡®å®šå±æ€§ä¸€æ ·ï¼Œæ˜¯ä¸èƒ½ç¼ºå°‘çš„ï¼›æœ‰äº›ç«¥é‹å¯èƒ½åˆæƒ³åˆ°äº†ï¼Œé‚£æˆ‘æŠŠå¯é€‰å±æ€§ä¹ŸåŠ ä¸Šä¸å°±è¡Œäº†ï¼Œå˜æˆäº†åªè¯»å¯é€‰å±æ€§ï¼š 1234567891011interface Duck &#123; readonly id?: number; name: string;&#125;let dog: Duck = &#123; name: &quot;yellow&quot;,&#125;;// æŠ¥é”™ï¼š// Cannot assign to &#x27;id&#x27; because it is a read-only property.dog.id = 12; è¿™æ ·ä¹Ÿæ˜¯ä¸è¡Œçš„ï¼Œå› æ­¤æˆ‘ä»¬å‘ç°äº†ï¼š åªè¯»çš„çº¦æŸå­˜åœ¨äºç¬¬ä¸€æ¬¡ç»™å¯¹è±¡èµ‹å€¼çš„æ—¶å€™ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€æ¬¡ç»™åªè¯»å±æ€§èµ‹å€¼çš„æ—¶å€™ å‡½æ•°çš„ç±»å‹ åœ¨jsä¸­æœ‰ä¸¤ç§å£°æ˜å‡½æ•°çš„æ–¹å¼ï¼šå‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å‡½æ•°å£°æ˜çš„ç±»å‹å®šä¹‰ï¼Œåªéœ€è¦æŠŠå‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºéƒ½è€ƒè™‘åˆ°å³å¯ï¼š 123function sum(x: number, y: number) &#123; return x + y;&#125; å¦‚æœè°ƒç”¨æ—¶çš„å‚æ•°å¤šäºæˆ–è€…å°‘äºè¦æ±‚çš„å‚æ•°ï¼Œéƒ½ä¼šæŠ¥é”™ï¼š 1234567function sum(x: number, y: number) &#123; return x + y;&#125;// An argument for &#x27;y&#x27; was not provided.sum(1)// Expected 2 arguments, but got 3.sum(1,2,3) å‡½æ•°è¡¨è¾¾å¼ æˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹å‡½æ•°è¡¨è¾¾å¼è¿›è¡Œç›¸åŒçš„ç±»å‹å®šä¹‰ï¼š 123let sum = function (x: number, y: number): number &#123; return x + y;&#125;; ä¸è¿‡è¿™æ ·åªå¯¹ç­‰å·å³ä¾§çš„åŒ¿åå‡½æ•°è¿›è¡Œäº†ç±»å‹å®šä¹‰ï¼Œè€Œç­‰å·å·¦ä¾§çš„å˜é‡sumåˆ™æ˜¯é€šè¿‡ç±»å‹æ¨è®ºå¾—åˆ°çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»™å®ƒæ·»åŠ ç±»å‹ï¼š 123let sum: (x: number, y: number) =&gt; number = function (x: number, y: number): number &#123; return x + y;&#125;; æ³¨æ„è¿™é‡Œçš„=&gt;å’Œes6ä¸­çš„=&gt;æ˜¯ä¸ä¸€æ ·çš„ï¼Œtsä¸­çš„=&gt;ç”¨æ¥è¡¨ç¤ºå‡½æ•°çš„å®šä¹‰ï¼Œå·¦è¾¹æ˜¯è¾“å…¥ç±»å‹ï¼Œå³è¾¹æ˜¯è¾“å‡ºç±»å‹ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ¥å£æ¥å®šä¹‰å‡½æ•°è¡¨è¾¾å¼ 123456interface ISumFunc &#123; (x: number, y: number): number;&#125;let sum: ISumFunc = function (x, y) &#123; return x + y;&#125;; å¯é€‰å‚æ•° ä¸Šé¢æˆ‘ä»¬è¯´åˆ°ï¼Œå¯¹äºå‡½æ•°å‚æ•°ä¸ªæ•°ï¼Œæ˜¯å¿…é¡»æŒ‰ç…§å®šä¹‰ä¼ å‚çš„ï¼Œé‚£ä¹ˆå¦‚ä½•å®šä¹‰å¯é€‰å‚æ•°å‘¢ï¼Ÿå’Œæ¥å£å®šä¹‰å¯¹è±¡çš„å¯é€‰å±æ€§ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿç”¨åˆ°äº†?æ¥è¡¨ç¤ºï¼š 123456789function buildName(firstName: string, lastName?: string) &#123; if (lastName) &#123; return firstName + &#x27; &#x27; + lastName; &#125; else &#123; return firstName; &#125;&#125;buildName(&quot;Lucy&quot;)buildName(&quot;Lucy&quot;, &quot;Jessica&quot;) éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯é€‰å‚æ•°å¿…é¡»åœ¨å¿…é¡»å‚æ•°åé¢ï¼š 123456789// æŠ¥é”™ï¼š// A required parameter cannot follow an optional parameter.function buildName(firstName?: string, lastName: string) &#123; if (lastName) &#123; return firstName + &#x27; &#x27; + lastName; &#125; else &#123; return firstName; &#125;&#125; å‚æ•°é»˜è®¤å€¼ å’Œes6çš„å‡½æ•°ä¸€æ ·ï¼Œåœ¨tsä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™å‡½æ•°çš„å‚æ•°æ·»åŠ é»˜è®¤å€¼ï¼š 1234567function buildName(firstName: string = &quot;Tom&quot;, lastName: string = &quot;Cat&quot;) &#123; if (lastName) &#123; return firstName + &quot; &quot; + lastName; &#125; else &#123; return firstName; &#125;&#125; tsä¼šå°†æ·»åŠ äº†é»˜è®¤å€¼çš„å‚æ•°è‡ªåŠ¨è¯†åˆ«ä¸ºå¯é€‰å‚æ•°ï¼Œæ­¤æ—¶å°±ä¸å—å¯é€‰å‚æ•°å¿…é¡»åœ¨å¿…é¡»å‚æ•°åé¢é™åˆ¶ï¼š 1234567function buildName(firstName?: string, lastName: string = &quot;Cat&quot;) &#123; if (lastName) &#123; return firstName + &quot; &quot; + lastName; &#125; else &#123; return firstName; &#125;&#125; å‰©ä½™å‚æ•° åœ¨es6ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡...restçš„æ–¹å¼è·å–å‡½æ•°ä¸­å‰©ä½™çš„å‚æ•°ï¼š 12345function getRest(first, ...rest: any[]) &#123; rest.map((el) =&gt; &#123;&#125;);&#125;getRest(1, 2, 3, 4, 5); restå‚æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªany[]ç±»å‹çš„æ•°ç»„ï¼Œå®ƒåªèƒ½ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ã€‚ å‡½æ•°é‡è½½ å‡½æ•°é‡è½½æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šç§å‡½æ•°ç±»å‹çš„å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼›æˆ‘ä»¬å¯ä»¥å®šä¹‰å¤šä¸ªå‡½æ•°é‡è½½çš„ç±»å‹ï¼š 123function add(x: number, y: string): void;function add(x: string, y: number): void;function add(x: string | number, y: number | string): void &#123;&#125; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»è¦æŠŠç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨å‰é¢ï¼Œæœ€åå‡½æ•°å®ç°æ—¶ï¼Œéœ€è¦ä½¿ç”¨è”åˆç±»å‹æˆ–è€…ä»»æ„ç±»å‹ï¼ŒæŠŠæ‰€æœ‰å¯èƒ½çš„è¾“å…¥ç±»å‹å…¨éƒ¨åŒ…å«è¿›å»ï¼Œä»¥å…·ä½“å®ç°ï¼›å³æœ€ä¸‹é¢çš„æ–¹æ³•éœ€è¦å…¼å®¹ä¸Šé¢çš„æ–¹æ³•ã€‚ ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬å®šä¹‰äº†3ä¸ªé‡è½½çš„addå‡½æ•°ï¼Œå‰ä¸¤æ¬¡éƒ½æ˜¯å‡½æ•°çš„å®šä¹‰ï¼Œæœ€åä¸€æ¬¡æ˜¯å‡½æ•°çš„å®ç°ï¼Œå› æ­¤æœ¬è´¨ä¸Šæˆ‘ä»¬åªæœ‰å®šä¹‰äº†ä¸¤æ¬¡ï¼š 1234567891011function add(x: number, y: string): void;function add(x: string, y: number): void;function add(x: string | number, y: number | string): void &#123;&#125;//é€šè¿‡add(1, &#x27;1&#x27;)//é€šè¿‡add(&#x27;2&#x27;, 2)//æŠ¥é”™ï¼š//The call would have succeeded against this implementation, but implementation signatures of overloads are not externally visible.add(&#x27;2&#x27;, &#x27;2&#x27;) æœ€åä¸€ä¸ªå‡½æ•°è°ƒç”¨æ—¶æˆ‘ä»¬å¹¶æ²¡æœ‰å®šä¹‰ä¸¤ä¸ªéƒ½æ˜¯å­—ç¬¦ä¸²çš„å‚æ•°ï¼Œå› æ­¤æŠ¥é”™ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"Verdaccioæ­å»ºnpmç§æœ‰æœåŠ¡å™¨","date":"2021-07-17T13:36:00.000Z","path":"2021/07/17/Verdaccio.html","text":"åœ¨å…¬å¸é¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæœ‰ç›¸åŒçš„ä¸šåŠ¡é€»è¾‘æˆ–è€…ç»„ä»¶å¯ä»¥å¤ç”¨ï¼›ä½†æ˜¯è¿™äº›ç”±äºå®‰å…¨æ€§ï¼Œæˆ‘ä»¬åˆå¸Œæœ›å°†è¿™äº›ä»£ç åœ¨å†…éƒ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸å¸Œæœ›å…¬å¼€è®¿é—®ï¼›verdaccioæä¾›äº†ä¸€ä¸ªæ­å»ºnpmç§æœ‰æœåŠ¡å™¨çš„æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•æ­å»ºä»¥åŠä¸Šä¼ æˆ‘ä»¬è‡ªå·±çš„ä¾èµ–åŒ…ã€‚ ä»‹ç»åŠå®‰è£… Verdaccioæ˜¯ä»€ä¹ˆï¼Ÿ Verdaccioæ˜¯ä¸€ä¸ª Node.jsåˆ›å»ºçš„è½»é‡çš„ç§æœ‰npmä»£ç†æ³¨å†Œæºï¼ˆproxy registryï¼‰ é€šè¿‡Verdaccioæ­å»ºç§æœ‰npmæœåŠ¡å™¨æœ‰ç€ä»¥ä¸‹ä¼˜åŠ¿ï¼š é›¶é…ç½®ï¼šæ— éœ€å®‰è£…æ•°æ®åº“ï¼ŒåŸºäºnodejsï¼Œå®‰è£…åŠè¿è¡Œã€‚ ä½¿ç”¨æ–¹ä¾¿ï¼šå°†å†…éƒ¨é«˜å¤ç”¨çš„ä»£ç è¿›è¡Œæå–ï¼Œæ–¹ä¾¿åœ¨å¤šä¸ªé¡¹ç›®ä¸­å¼•ç”¨ã€‚ å®‰å…¨æ€§ï¼šä»“åº“æ­å»ºåœ¨å±€åŸŸç½‘å†…éƒ¨ï¼Œåªé’ˆå¯¹å†…éƒ¨äººå‘˜ä½¿ç”¨ã€‚ æƒé™ç®¡ç†ï¼šå¯¹å‘å¸ƒå’Œä¸‹è½½npmåŒ…é…ç½®æƒé™ç®¡ç†ã€‚ åŠ é€ŸåŒ…ä¸‹è½½ï¼šå°†ä¸‹è½½è¿‡çš„ä¾èµ–åŒ…è¿›è¡Œç¼“å­˜ï¼Œå†æ¬¡ä¸‹è½½åŠ å¿«ä¸‹è½½é€Ÿåº¦ã€‚ Verdaccioæ˜¯sinopiaå¼€æºæ¡†æ¶çš„ä¸€ä¸ªforkï¼Œç”±äºsinopiaä½œè€…ä¸¤å¹´å‰å°±å·²ç»åœæ­¢æ›´æ–°ï¼Œå‘æ¯”è¾ƒå¤šï¼Œå› æ­¤Verdaccioæ˜¯ç›®å‰æœ€å¥½çš„é€‰æ‹©ï¼›é¦–å…ˆè¿›è¡Œå…¨å±€å®‰è£…ï¼š 1234# å…¨å±€å®‰è£…npm install -g verdaccio# å¯åŠ¨æœåŠ¡å™¨verdaccio å®‰è£…åç›´æ¥è¾“å…¥å‘½ä»¤å³å¯è¿è¡Œï¼š config.yamlæ˜¯é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œæƒé™ç­‰é…ç½®ï¼›4873æ˜¯Verdaccioå¯åŠ¨çš„é»˜è®¤ç«¯å£ï¼Œæ”¯æŒåœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œä¿®æ”¹ï¼›æˆ‘ä»¬å†æµè§ˆå™¨ä¸­æ‰“å¼€localhost:4873å°±èƒ½çœ‹åˆ°ä»–çš„ç®¡ç†ç•Œé¢äº†ï¼š é€šè¿‡å‘½ä»¤è¡Œå¯åŠ¨çš„è¯ï¼Œå¦‚æœç»ˆç«¯åœæ­¢äº†ï¼Œé‚£æˆ‘ä»¬çš„æœåŠ¡å™¨ä¹Ÿå°±åœæ­¢äº†ï¼Œå› æ­¤ä¸€èˆ¬æˆ‘ä»¬é€šè¿‡pm2å¯åŠ¨å®ˆæŠ¤è¿›ç¨‹ã€‚ 123npm install -g pm2pm2 start verdacciopm2 list è¿™æ ·verdaccioå°±åœ¨åå°è¿è¡Œäº†ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡dockeræ¥è¿›è¡Œå®‰è£… 1docker run --name verdaccio -itd -v ~/docker/verdaccio:/verdaccio -p 4873:4873 verdaccio/verdaccio nrmç®¡ç†é•œåƒæºåœ°å€ Verdaccioå®‰è£…å¥½åï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ”¹npmæºä¸ºæœ¬åœ°åœ°å€ï¼š 12# è®¾ç½®npmä½¿ç”¨çš„æºä¸ºæœ¬åœ°ç§æœnpm set registry http://localhost:4873/ æˆ–è€…é’ˆå¯¹æŸä¸ªä¾èµ–å®‰è£…æ—¶é€‰ç”¨è‡ªå·±çš„æºåœ°å€ï¼š 1npm install lodash --registry http://localhost:4873 ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³å†æ¬¡åˆ‡æ¢åˆ°æ·˜å®æˆ–è€…å…¶ä»–çš„é•œåƒåœ°å€ï¼Œå°±ä¸é‚£ä¹ˆæ–¹ä¾¿äº†ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡nrmè¿™ä¸ªå·¥å…·æ¥ç®¡ç†æˆ‘ä»¬çš„æºåœ°å€ï¼Œå¯ä»¥æŸ¥çœ‹å’Œåˆ‡æ¢åœ°å€ï¼›é¦–å…ˆè¿˜æ˜¯è¿›è¡Œå®‰è£…ï¼š 1npm install -g nrm å®‰è£…åæˆ‘ä»¬å¯ä»¥é€šè¿‡nrm add [name] [address]è¿™ä¸ªå‘½ä»¤æ¥æ–°å¢ä¸€ä¸ªæºåœ°å€ï¼š 1nrm add localnpm http://localhost:4873/ ä½¿ç”¨nrm lså¯ä»¥æŸ¥çœ‹æˆ‘ä»¬ä½¿ç”¨çš„æ‰€æœ‰æºåœ°å€ï¼Œå¸¦*æ˜¯æ­£åœ¨ä½¿ç”¨çš„åœ°å€ï¼›é€šè¿‡nrm use [name]æ¥åˆ‡æ¢åœ°å€ï¼š é…ç½®æ–‡ä»¶ é€šè¿‡é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹Verdaccioè¿›è¡Œæ›´å¤šçš„è‡ªå®šä¹‰è®¾ç½®ï¼Œé»˜è®¤çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243# ä¾èµ–ç¼“å­˜åœ°å€storage: ./storage# æ’ä»¶åœ°å€plugins: ./pluginsweb: title: Verdaccio# è®¤è¯ä¿¡æ¯auth: # ç”¨æˆ·è´¦å·å­˜å‚¨æ–‡ä»¶ htpasswd: file: ./htpasswd# ä¸Šæ¸¸é“¾æ¥uplinks: npmjs: url: https://registry.npmjs.org/# åŒ…ç®¡ç†packages: &#x27;@*/*&#x27;: access: $all publish: $authenticated unpublish: $authenticated proxy: npmjs &#x27;**&#x27;: access: $all publish: $authenticated unpublish: $authenticated proxy: npmjsserver: keepAliveTimeout: 60# æ’ä»¶å¼€å¯middlewares: audit: enabled: true# æ—¥å¿—ç®¡ç†logs: - &#123; type: stdout, format: pretty, level: http &#125; Verdaccioé»˜è®¤åªèƒ½æœ¬æœºè®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶æœ€ååŠ å…¥ç›‘å¬çš„ç«¯å£ï¼Œè®©å±€åŸŸç½‘è®¿é—®ï¼š 12345# ç›‘å¬çš„ç«¯å£ï¼Œä¸é…ç½®è¿™ä¸ªï¼Œåªèƒ½æœ¬æœºèƒ½è®¿é—®listen: 0.0.0.0:4873# ç•Œé¢é»˜è®¤è®¾ä¸ºä¸­æ–‡i18n: web: zh-CN æ‰€æœ‰çš„è´¦å·å¯†ç éƒ½ä¼šä¿å­˜åœ¨htpasswdè¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨çº¿htpasswdç”Ÿæˆå™¨ç”ŸæˆåŠ å¯†çš„å¯†ç æ–‡ä»¶ï¼Œæˆ–è€…é€šè¿‡å‘½ä»¤è¡Œçš„å½¢å¼æ¥æ·»åŠ ç”¨æˆ· 12# æ–°å¢ç”¨æˆ·npm adduser --registry http://localhost:4873/ uplinks ä¸Šæ¸¸é“¾æ¥uplinksè¡¨ç¤ºå¦‚æœåœ¨æœ¬åœ°æ‰¾ä¸åˆ°ä¾èµ–åŒ…ï¼Œå»ä¸Šæ¸¸å“ªä¸ªåœ°å€è·å–åŒ…ï¼›æˆ‘ä»¬å¯ä»¥é…ç½®å¤šä¸ªåœ°å€ï¼Œæ¯ä¸ªåœ°å€éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„keyå€¼ï¼š 12345678910111213141516uplinks: npmjs: url: https://registry.npmjs.org/ timeout: 10s yarn: url: https://registry.yarnpkg.com/ timeout: 10s taobao: url: https://registry.npm.taobao.org/ timeout: 10spackages: &#x27;@*/*&#x27;: proxy: taobao yarn &#x27;**&#x27;: proxy: taobao å®˜æ–¹çš„åœ°å€ä¼šæ¯”è¾ƒæ…¢ï¼Œä¸€èˆ¬å»ºè®®é…ç½®æ·˜å®çš„åœ°å€ï¼šé…ç½®å¥½ä¸Šæ¸¸é“¾æ¥åæˆ‘ä»¬å°±å¯ä»¥å°†åŒ…çš„ä»£ç†æŒ‡å‘é“¾æ¥ï¼Œæ”¯æŒå¤šä¸ªé“¾æ¥åœ°å€ï¼Œè¯·æ±‚å¤±è´¥æ—¶ä¼šå‘åé¢çš„é“¾æ¥è¿›è¡Œå°è¯•ã€‚ ä»¤ç‰Œ ä»verdaccio@4.0.0å¼€å§‹æ”¯æŒé…ç½®è‡ªå®šä¹‰ä»¤ç‰Œç­¾åï¼Œè¦å¯ç”¨JWTç­¾åï¼Œæˆ‘ä»¬éœ€è¦å°†jwtæ·»åŠ åˆ°apiéƒ¨åˆ†ï¼š 123456789security: api: jwt: sign: expiresIn: 15d notBefore: 0 web: sign: expiresIn: 7d packagesåŒ…ç®¡ç† åœ¨packageså­—æ®µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯ä¸ªåŸŸä¸‹é¢çš„åŒ…è¿›è¡Œç®¡ç†ï¼Œåœ¨verdaccioä¸­æœ‰ä¸‰ç§èº«ä»½ï¼šæ‰€æœ‰äººã€åŒ¿åç”¨æˆ·ã€è®¤è¯(ç™»é™†)ç”¨æˆ·ï¼ˆå³â€$allâ€, â€œ$anonymousâ€, â€œ$authenticatedâ€ï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰äººéƒ½æœ‰è®¿é—®çš„æƒé™ï¼ˆaccessï¼‰ï¼Œè®¤è¯çš„ç”¨æˆ·æ‰æœ‰åŒ…çš„å‘å¸ƒæƒé™ï¼ˆpublishï¼‰å’Œæ’¤å›æƒé™ï¼ˆunpublishï¼‰ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹åŒ…è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„åˆ’åˆ†ï¼Œæ¯”å¦‚å…¬å¸çš„åŒ…å’Œä¸ªäººçš„åŒ…ï¼Œé€šè¿‡@scopeçš„æ–¹å¼è¿›è¡Œè®¿é—®æ§åˆ¶ï¼š 1234567891011packages: &#x27;@company/*&#x27;: access: $authenticated publish: $authenticated unpublish: $authenticated proxy: npmjs &#x27;@my/*&#x27;: access: $authenticated publish: $authenticated unpublish: $authenticated proxy: npmjs é»˜è®¤æƒ…å†µä¸‹ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡npm adduseræ¥å‘æˆ‘ä»¬çš„æœåŠ¡å™¨æ³¨å†Œç”¨æˆ·ï¼›å¦‚æœæˆ‘ä»¬çš„npmæœåŠ¡å™¨éƒ¨ç½²åœ¨å¤–ç½‘çš„è¯æ˜¯ä¸åˆ©çš„ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡max_usersä¸º-1æ¥ç¦æ­¢æ³¨å†Œç”¨æˆ·ï¼Œå¦‚æœåœ¨å†…ç½‘çš„è¯ï¼Œå¯ä»¥è®¾ç½®æŸä¸ªå…·ä½“çš„å€¼æ¥é™åˆ¶ç”¨æˆ·çš„æ•°é‡ï¼š 1234auth: htpasswd: file: ./htpasswd max_users: -1 ä¾èµ–åŒ…åˆ›å»ºå’Œå‘å¸ƒ æ­å»ºå¥½äº†npmç§æœï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸Šä¼ npmåŒ…äº†ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªutilsé¡¹ç›®ï¼Œæ”¾ä¸€äº›è‡ªå·±çš„å·¥å…·ç­‰ï¼Œé¦–å…ˆé€šè¿‡npm initåˆå§‹åŒ–package.jsonï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å¯¹åŒ…çš„ä¿¡æ¯è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼š 1234567891011&#123; &quot;name&quot;: &quot;@demo/utils&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;my own utils&quot;, &quot;main&quot;: &quot;index.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot; &#125;, &quot;author&quot;: &quot;corner&quot;, &quot;license&quot;: &quot;ISC&quot;&#125; æˆ‘ä»¬å°±å¯ä»¥åœ¨å…¥å£æ–‡ä»¶index.jsä¸­å†™ä»£ç äº†ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†åˆ¤æ–­ç¯å¢ƒçš„å‡ ä¸ªå˜é‡ï¼š 1234567export const UA = window.navigator.userAgent.toLowerCase();export const isAndroid = UA &amp;&amp; UA.indexOf(&quot;android&quot;) &gt; 0;export const isIOS = UA &amp;&amp; /iphone|ipad|ipod|ios/.test(UA);export const isWeixin = UA &amp;&amp; /micromessenger/i.test(UA); ç„¶åæˆ‘ä»¬ç™»å½•ä¸Šé¢æ³¨å†Œçš„ç”¨æˆ·ï¼Œè¾“å…¥ç”¨æˆ·åã€å¯†ç ä»¥åŠé‚®ç®±ç­‰ï¼š 12# ç™»å½•è´¦å·npm login ä¹Ÿå¯ä»¥é€šè¿‡npm logouté€€å‡ºç™»å½•ï¼Œä»¥åŠnpm who am iæŸ¥çœ‹å½“å‰ç™»å½•çš„ç”¨æˆ·åï¼›ç™»å½•æˆåŠŸåå°±å¯ä»¥å°†æˆ‘ä»¬çš„åŒ…è¿›è¡Œå‘å¸ƒäº†ï¼š 12# å‘å¸ƒä¾èµ–åŒ…npm publish åœ¨é¦–é¡µæˆ‘ä»¬ç™»å½•åå°±èƒ½æˆåŠŸçœ‹åˆ°åˆšåˆšå‘å¸ƒçš„ç¬¬ä¸€ä¸ªåŒ…äº†ï¼Œä¹Ÿèƒ½ç»™å…¶ä»–åŒäº‹ä½¿ç”¨ï¼š æˆ‘ä»¬æ³¨æ„åˆ°æ•´ä¸ªåŒ…çš„å…¥å£æ˜¯mainå­—æ®µæŒ‡å®šçš„index.jsï¼Œè¿™æ˜¯ä¸€ä¸ªes moduleæ¨¡å—è§„èŒƒçš„åŒ…ï¼Œä½†æ˜¯åœ¨commonjsè§„èŒƒçš„é¡¹ç›®ä¸­å°±ä¸èƒ½ä½¿ç”¨äº†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“åŒ…å·¥å…·å¯¹å…¶è¿›è¡Œæ‰“åŒ…ä¼˜åŒ–ã€‚ æˆ‘ä»¬åœ¨æ·±å…¥å¯¹æ¯”Webpackã€Parcelã€Rollupæ‰“åŒ…å·¥å…·çš„ä¸åŒä»‹ç»è¿‡Rollupæ¯”è¾ƒé€‚åˆç”¨æ¥æ‰“åŒ…ä¸€ä¸ªç±»åº“ï¼Œå› æ­¤è¿™é‡Œå°±é€‰ç”¨Rollupè¿›è¡Œæ‰“åŒ…ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸‹æ–°å»ºrollup.config.jsï¼š 123456789101112131415161718export default &#123; input: &quot;./index.js&quot;, output: [ &#123; format: &quot;cjs&quot;, file: &quot;dist/index.commonjs.js&quot;, &#125;, &#123; format: &quot;es&quot;, file: &quot;dist/index.esm.js&quot;, &#125;, &#123; format: &quot;iife&quot;, file: &quot;dist/index.bundle.js&quot;, name: &#x27;DemoUtils&#x27; &#125;, ],&#125;; é€šè¿‡rollupå°†å…¥å£æ–‡ä»¶index.jsæ‰“åŒ…æˆcommonjsã€es moduleå’Œiifeä¸‰ç§è§„èŒƒï¼Œç„¶åå°±åœ¨package.jsonä¸­åˆ†åˆ«å®šä¹‰ä¸‰ç§è§„èŒƒçš„æ–‡ä»¶è·¯å¾„ï¼š 12345678910111213141516171819202122&#123; &quot;name&quot;: &quot;@demo/utils&quot;, &quot;version&quot;: &quot;1.0.2&quot;, &quot;description&quot;: &quot;my own utils&quot;, // æŒ‡å‘ CommonJS æ¨¡å—è§„èŒƒçš„ä»£ç å…¥å£æ–‡ä»¶ &quot;main&quot;: &quot;dist/index.commonjs.js&quot;, // æŒ‡å‘ ES Module æ¨¡å—è§„èŒƒçš„ä»£ç å…¥å£æ–‡ä»¶ &quot;module&quot;: &quot;dist/index.esm.js&quot;, // æŒ‡å‘ ES Module æ¨¡å—è§„èŒƒçš„ä»£ç å…¥å£æ–‡ä»¶ &quot;jsnext:main&quot;: &quot;dist/index.esm.js&quot;, &quot;unpkg&quot;: &quot;dist/index.bundle.js&quot;, &quot;jsdelivr&quot;: &quot;dist/index.bundle.js&quot;, &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;, &quot;build&quot;: &quot;rollup --config&quot; &#125;, &quot;author&quot;: &quot;corner&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;devDependencies&quot;: &#123; &quot;rollup&quot;: &quot;^2.54.0&quot; &#125;&#125; å¦‚æœè¿˜æƒ³å¯¹æˆ‘ä»¬çš„åŒ…æœ‰è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ç­‰ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªREADME.mdæ–‡æ¡£ï¼›buildæ‰“åŒ…åï¼Œå†æ¬¡publishå‘åŒ…å°±èƒ½æ›´æ–°çº¿ä¸Šçš„ä¾èµ–åŒ…äº†ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"}]},{"title":"å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹æ·±å…¥Nginx","date":"2021-06-22T10:33:00.000Z","path":"2021/06/22/Front-Nginx.html","text":"åœ¨å¤§éƒ¨åˆ†ç«¥é‹çš„å°è±¡é‡Œï¼ŒNginxåº”è¯¥éƒ½æ˜¯å±äºåå°å·¥ä½œçš„èŒƒç•´ï¼Œå‰ç«¯åªè¦å†™å¥½é¡µé¢å°±å¥½äº†ï¼›ç„¶åéšç€å¤§å‰ç«¯èŒƒå›´çš„ä¸æ–­æ‰©å±•ï¼Œå‰ç«¯ä¹Ÿåœ¨ä¸æ–­çš„è¿›å†›æœåŠ¡å™¨é¢†åŸŸï¼Œè€ŒNginxå°±æ˜¯è¿›å†›æœåŠ¡å™¨é¢†åŸŸå¿…å¤‡çš„æŠ€èƒ½ä¹‹ä¸€ï¼›ä»¥å‰æˆ‘ä»¬éƒ½éœ€è¦â€œä½å£°ä¸‹æ°”â€çš„è®©åç«¯çš„åŒäº‹ç»™æˆ‘ä»¬é…ç½®é¡µé¢åŸŸåï¼Œä½†æ˜¯å­¦ä¼šäº†Nginxé…ç½®ï¼ŒåŸŸåé…ç½®ã€ä»£ç†è½¬å‘ä»€ä¹ˆçš„å®Œå…¨å°±å¯ä»¥æˆ‘ä»¬è‡ªå·±æ¥äº†ï¼Œè¿™æ ·æŠ¢æ¥çš„é¥­ç¢—å®ƒã€‚ã€‚ã€‚ã€‚å®ƒéš¾é“ä¸é¦™å—ï¼Ÿ ç®€ä»‹ é‚£ä¹ˆNginxåˆ°åº•æ˜¯ä»€ä¹ˆï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç™¾åº¦ç™¾ç§‘å¯¹Nginxçš„å®šä¹‰ï¼š Nginxæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†webæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†IMAP/POP3/SMTPæœåŠ¡ã€‚ è¿™é‡Œæœ‰ä¸‰ä¸ªè¯å¾ˆå…³é”®ï¼Œæˆ‘ä»¬æ¥æ‹†è§£ä¸€ä¸‹ï¼Œåˆ†åˆ«æ˜¯æ˜¯é«˜æ€§èƒ½ã€åå‘ä»£ç†å’ŒwebæœåŠ¡å™¨ï¼›é¦–å…ˆè¿™ä¸ªwebæœåŠ¡å™¨è‡ªä¸ç”¨å¤šè¯´ï¼Œåƒæˆ‘ä»¬ç†ŸçŸ¥çš„Apacheã€IISã€Tomcatç­‰éƒ½æ˜¯webæœåŠ¡å™¨ï¼›ç„¶åæ˜¯é«˜æ€§èƒ½ï¼Œä¸€ä¸ªæœåŠ¡å™¨çš„æ€§èƒ½è‡ªç„¶æ˜¯ç½‘ç«™å¼€å‘è€…æœ€ä¸ºå…³å¿ƒçš„ï¼Œé‚£ä¹ˆæœåŠ¡å™¨çš„æ€§èƒ½å¦‚ä½•æ¥è¿›è¡Œè¡¡é‡å‘¢ï¼Ÿä¸€èˆ¬å¯ä»¥é€šè¿‡CPUå’Œå†…å­˜çš„ä½¿ç”¨é‡æ¥è¿›è¡Œè¡¡é‡ã€‚ç»è¿‡ç¬”è€…ç®€å•çš„å¹¶å‘æµ‹è¯•ï¼Œåœ¨20000ä¸ªå¹¶å‘é“¾æ¥æ—¶ï¼ŒCPUå’Œå†…å­˜å ç”¨ä¹Ÿéå¸¸ä½ï¼ŒCPUä»…å 5%ï¼Œå†…å­˜å ç”¨ä¹Ÿæ‰2MBä¸åˆ°ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªwebå‹åŠ›æµ‹è¯•å·¥å…·Apache Benchï¼Œå¯¹Nginxè¿›è¡Œç®€å•çš„å‹åŠ›æµ‹è¯•ï¼›é€šè¿‡åœ¨å‘½ä»¤è¡Œab -n 20000 -c 10000 [url]ï¼Œæˆ‘ä»¬å¯¹Nginxçš„é¦–é¡µå‘èµ·è¯·æ±‚æ€»æ•°ä¸º20000ï¼Œå¹¶å‘æ•°ä¸º10000çš„è¯·æ±‚æµ‹è¯•ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š æˆ‘ä»¬çœ‹åˆ°æ€»çš„è¯·æ±‚æ—¶é—´ï¼ˆTime taken for testsï¼‰æ˜¯25ç§’ï¼Œå¹³å‡æ¯ä¸ªè¯·æ±‚è€—æ—¶ï¼ˆTime per requestï¼‰1.25æ¯«ç§’ï¼Œåœ¨è¿™ä¹ˆé«˜çš„å¹¶å‘é‡ä¸‹é¢ï¼ŒæœåŠ¡å™¨å“åº”æ€§èƒ½è¿˜æ˜¯æŒºä¸é”™çš„ã€‚ ç„¶åæ˜¯åå‘ä»£ç†ï¼Œä¸ä¹‹å¯¹åº”çš„å°±æ˜¯æ­£å‘ä»£ç†ï¼Œè¿™ä¸¤è€…çš„åŒºåˆ«ä¹Ÿæ˜¯é¢è¯•ä¸­ç»å¸¸è¢«é—®åˆ°çš„ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯æ­£å‘ä»£ç†ï¼Œä¸€ä¸ªæ­£å‘ä»£ç†æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„â€œæ¢¯å­â€ã€‚ æˆ‘ä»¬ç›´æ¥è®¿é—®Googleï¼Œæ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬ä½¿ç”¨äº†ä»£ç†æœåŠ¡å™¨ï¼Œé‚£ä¹ˆé€šè¿‡è®¿é—®ä»£ç†æœåŠ¡å™¨å°±å¯ä»¥æµè§ˆGoogleï¼Œè¿™é‡Œçš„ä»£ç†æœåŠ¡å™¨å°±å±äºæ­£å‘ä»£ç†ï¼›é€šè¿‡æ­£å‘ä»£ç†æˆ‘ä»¬å¯ä»¥è®¿é—®åŸæ¥æ— æ³•è®¿é—®çš„èµ„æºã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯åå‘ä»£ç†å‘¢ï¼Ÿåå‘ä»£ç†æœ€å…¸å‹çš„ä¾‹å­å°±æ˜¯æˆ‘ä»¬çš„NginxæœåŠ¡å™¨äº†ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨è®¿é—®æŸä¸ªç½‘ç«™æ—¶ï¼Œç”±ä»£ç†æœåŠ¡å™¨å»ç›®æ ‡æœåŠ¡å™¨è·å–æ•°æ®åè¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·å°±èƒ½å¤Ÿéšè—çœŸå®æœåŠ¡å™¨çš„IPåœ°å€ï¼Œåªå¯¹å¤–å¼€æ”¾ä»£ç†æœåŠ¡å™¨ï¼Œä»¥é˜²æ­¢å¤–ç½‘å¯¹å†…ç½‘æœåŠ¡å™¨çš„æ¶æ€§æ”»å‡»ã€‚ ç†è§£äº†ä¸Šé¢ä¸¤ä¸ªå…¸å‹çš„æ¡ˆä¾‹ï¼Œç›¸ä¿¡å¤§å®¶å¯¹æ­£å‘åå‘ä»£ç†ä¹Ÿäº†è§£äº†ï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š æ­£å‘ä»£ç†ï¼Œä»£ç†å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯ä¸çŸ¥é“å®é™…å‘èµ·è¯·æ±‚çš„å®¢æˆ·ç«¯ã€‚ åå‘ä»£ç†ï¼Œä»£ç†æœåŠ¡ç«¯ï¼Œå®¢æˆ·ç«¯ä¸çŸ¥é“å®é™…æä¾›æœåŠ¡çš„æœåŠ¡ç«¯ã€‚ å®‰è£…é…ç½® Nginxå®‰è£…ç¨‹åºåˆ†ä¸ºLinuxç‰ˆå’ŒWindowsç‰ˆï¼ŒWindowsç‰ˆæœ¬çš„Nginxä¸‹è½½è§£å‹åå°±å¯ä»¥ç›´æ¥è¿è¡Œäº†ï¼Œè€ŒLinuxç‰ˆæœ¬çš„éœ€è¦makeã€configureç­‰å‘½ä»¤ç¼–è¯‘å®‰è£…ï¼Œå¥½å¤„æ˜¯å¯ä»¥æ–¹ä¾¿çµæ´»çš„ç¼–è¯‘ä¸åŒçš„æ¨¡å—åˆ°Nginxï¼›ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šçš„å®‰è£…æ•™ç¨‹ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œå¯ä»¥ä»å®˜ç½‘ä¸‹è½½é€‚åˆè‡ªå·±çš„ç‰ˆæœ¬ï¼Œä¸‹è½½å¥½åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»–çš„ç›®å½•ç»“æ„ï¼š 12345678â”œâ”€â”€ conf #æ‰€æœ‰é…ç½®æ–‡ä»¶çš„ç›®å½• â”œâ”€â”€ nginx.conf #ä¸»é…ç½®æ–‡ä»¶ â”œâ”€â”€ mime.types #åª’ä½“ç±»å‹æ§åˆ¶æ–‡ä»¶â”œâ”€â”€ contrib #å­˜æ”¾ä¸€äº›å®ç”¨å·¥å…·â”œâ”€â”€ docs #æ–‡æ¡£èµ„æ–™â”œâ”€â”€ html #é»˜è®¤è§£æçš„é™æ€æ–‡ä»¶ç›®å½•â”œâ”€â”€ logs #æ—¥å¿—ç›®å½•â”œâ”€â”€ sbin #å¯åŠ¨è¿è¡Œç¨‹åº æˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„å°±æ˜¯confç›®å½•å’Œhtmlç›®å½•ï¼›è€Œåœ¨æ ¹ç›®å½•å¯ä»¥è¿è¡Œå¸¸ç”¨çš„ä¸€äº›å‘½ä»¤å¯¹Nginxè¿›è¡Œæ“ä½œæ§åˆ¶ï¼š 1234567891011121314nginx -s reopen #é‡å¯Nginxnginx -s reload #é‡æ–°åŠ è½½Nginxé…ç½®æ–‡ä»¶ï¼Œç„¶åä»¥ä¼˜é›…çš„æ–¹å¼é‡å¯Nginxnginx -s stop #å¼ºåˆ¶åœæ­¢NginxæœåŠ¡nginx -s quit #ä¼˜é›…åœ°åœæ­¢NginxæœåŠ¡ï¼ˆå³å¤„ç†å®Œæ‰€æœ‰è¯·æ±‚åå†åœæ­¢æœåŠ¡ï¼‰nginx -h #æ‰“å¼€å¸®åŠ©ä¿¡æ¯nginx -v #æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡ºnginx -V #æ˜¾ç¤ºç‰ˆæœ¬å’Œé…ç½®é€‰é¡¹ä¿¡æ¯ï¼Œç„¶åé€€å‡ºnginx -t #æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œç„¶åé€€å‡ºnginx -T #æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼Œè½¬å‚¨å¹¶é€€å‡ºnginx -q #åœ¨æ£€æµ‹é…ç½®æ–‡ä»¶æœŸé—´å±è”½éé”™è¯¯ä¿¡æ¯nginx -p prefix #è®¾ç½®å‰ç¼€è·¯å¾„(é»˜è®¤æ˜¯:/usr/share/nginx/)nginx -c filename #è®¾ç½®é…ç½®æ–‡ä»¶(é»˜è®¤æ˜¯:/etc/nginx/nginx.conf)nginx -g directives #è®¾ç½®é…ç½®æ–‡ä»¶å¤–çš„å…¨å±€æŒ‡ä»¤killall nginx #æ€æ­»æ‰€æœ‰nginxè¿›ç¨‹ æˆ‘ä»¬çœ‹å‰å››ä¸ªå‘½ä»¤ä¼šå‘ç°ï¼Œè¿™å››ä¸ªå‘½ä»¤å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼Œé‡å¯å’Œåœæ­¢Nginxï¼Œä¸è¿‡ä¸€ç§æ˜¯å¼ºåˆ¶çš„æ–¹å¼ï¼Œå¦ä¸€ç§æ˜¯ä¼˜é›…çš„æ–¹å¼ï¼›å¼ºåˆ¶çš„æ–¹å¼å°±æ˜¯è®©Nginxç«‹å³åœæ­¢å½“å‰å¤„ç†çš„æ‰€æœ‰è¯·æ±‚ï¼Œä¸¢å¼ƒé“¾æ¥ï¼Œåœæ­¢å·¥ä½œï¼›è€Œä¼˜é›…çš„æ–¹å¼æ˜¯å…è®¸Nginxå°†å½“å‰æ­£åœ¨å¤„ç†çš„è¯·æ±‚å¤„ç†å®Œæˆï¼Œä½†æ˜¯ä¸å†æ¥æ”¶æ–°çš„è¯·æ±‚ï¼Œæ‰€æœ‰å¤„ç†å®Œæˆåå†åœæ­¢å·¥ä½œã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ä¸»è¦é…ç½®æ–‡ä»¶nginx.confçš„åŸºæœ¬ç»“æ„ï¼š 123456789101112131415161718192021222324252627# nginxè¿›ç¨‹æ•°ï¼Œå»ºè®®è®¾ç½®ä¸ºç­‰äºCPUæ€»æ ¸å¿ƒæ•°worker_processes 1;# è¿›ç¨‹æ–‡ä»¶pid logs/nginx.pid;# å•ä¸ªè¿›ç¨‹æœ€å¤§è¿æ¥æ•°events &#123; worker_connections 1024;&#125;http &#123; # æ–‡ä»¶æ‰©å±•åä¸ç±»å‹æ˜ å°„è¡¨ include mime.types; # é»˜è®¤æ–‡ä»¶ç±»å‹ default_type application/octet-stream; # å¼€å¯gzipå‹ç¼© gzip on; sendfile on; keepalive_timeout 65; server &#123; # ç›‘å¬ç«¯å£ listen 80; server_name localhost; location / &#123; root html; index index.html index.htm; &#125; &#125;&#125; é…ç½®æ–‡ä»¶ä¸­ä¸»è¦å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªå—ï¼š å…¨å±€æ¨¡å—ï¼šä»é…ç½®æ–‡ä»¶å¼€å§‹åˆ°eventså—ä¹‹é—´çš„å†…å®¹ï¼Œæ­¤å¤„çš„é…ç½®å½±å“nginxæœåŠ¡å™¨æ•´ä½“çš„è¿â¾ï¼Œâ½å¦‚workerè¿›ç¨‹çš„æ•°é‡ã€é”™è¯¯â½‡å¿—çš„ä½ç½®ç­‰ eventsï¼šé…ç½®å½±å“nginxæœåŠ¡å™¨æˆ–ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ã€‚ httpï¼šå¯ä»¥åµŒå¥—å¤šä¸ªserverï¼Œé…ç½®ä»£ç†ï¼Œç¼“å­˜ï¼Œæ—¥å¿—å®šä¹‰ç­‰ç»å¤§å¤šæ•°åŠŸèƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ã€‚ serverï¼šé…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ªhttpä¸­å¯ä»¥æœ‰å¤šä¸ªserverã€‚ locationï¼šé…ç½®è¯·æ±‚çš„è·¯ç”±ï¼Œä»¥åŠå„ç§é¡µé¢çš„å¤„ç†æƒ…å†µã€‚ å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ä¸ä¼šå°†æ‰€æœ‰çš„é…ç½®å…¨éƒ½å†™åœ¨ä¸€ä¸ªä¸»é…ç½®æ–‡ä»¶ï¼Œå› ä¸ºè¿™æ ·ä¼šæ˜¾å¾—å†—é•¿ï¼Œä¹Ÿä¸çŸ¥é“æ¯ä¸ªæ¨¡å—æ˜¯åšä»€ä¹ˆç”¨çš„ï¼›è€Œæ˜¯ä¼šæ ¹æ®é¡¹ç›®æ¥æ‹†åˆ†å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œæ¯ä¸ªé…ç½®æ–‡ä»¶å½¼æ­¤ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°ï¼Œç„¶ååœ¨ä¸»é…ç½®æ–‡ä»¶ä¸­å¼•å…¥ï¼›æˆ‘ä»¬åœ¨confç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªprojectsç›®å½•ï¼Œç„¶åå¯ä»¥æ–°å»ºå¤šä¸ª.confé…ç½®æ–‡ä»¶ï¼š 1234567891011121314151617# /conf/projects/home.confserver &#123; listen 8080; server_name localhost; location / &#123; root html; index index.html index.htm; &#125;&#125;server &#123; listen 8081; server_name localhost; location / &#123; root html; index index.html index.htm; &#125;&#125; ç„¶ååœ¨ä¸»é…ç½®nginx.confä¸­å°†projectsç›®å½•ä¸‹çš„æ‰€æœ‰é…ç½®æ–‡ä»¶å¼•å…¥ï¼š 123456789http &#123; include mime.types; default_type application/octet-stream; gzip on; sendfile on; keepalive_timeout 65; ## å¼•å…¥projectsç›®å½•ä¸‹æ‰€æœ‰çš„é…ç½®æ–‡ä»¶ include projects/*.conf;&#125; è¿™æ ·æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨projectsç›®å½•ä¸‹æ–°å¢.confåç¼€çš„é…ç½®æ–‡ä»¶ï¼Œè€Œä¸ç”¨ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶ï¼›ä½†æ˜¯æˆ‘ä»¬ä¿®æ”¹å®Œè¿˜ä¸èƒ½ç¡®å®šæ˜¯å¦ä¼šæœ‰é”™è¯¯ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œæ£€æµ‹ï¼š 123nginx -t#nginx: the configuration file nginx/conf/nginx.conf syntax is ok#nginx: configuration file nginx/conf/nginx.conf test is successful é€šè¿‡æ£€æµ‹å‘ç°æ²¡æœ‰ä»»ä½•æŠ¥é”™ï¼Œå°±å¯ä»¥ä¼˜é›…çš„é‡å¯æœåŠ¡å™¨äº†ï¼š 1nginx -s reload é™æ€æœåŠ¡å™¨ ä½œä¸ºä¸€ä¸ªwebæœåŠ¡å™¨ï¼Œæœ€é‡è¦çš„å°±æ˜¯èƒ½å¤Ÿå¯¹é™æ€èµ„æºæä¾›è®¿é—®æœåŠ¡ï¼Œæˆ‘ä»¬çš„NginxæœåŠ¡å™¨å¯ä»¥ç”¨æ¥æ‰˜ç®¡ä¸€äº›é™æ€çš„èµ„æºï¼Œæ¯”å¦‚jsã€cssã€å›¾ç‰‡ç­‰ï¼Œè®¿é—®æŸä¸€ç‰¹å®šçš„é™æ€èµ„æºè·¯å¾„æ—¶ä¼šè½¬å‘åˆ°æœ¬åœ°ç›®å½•æ–‡ä»¶ä¸Šï¼›é‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹Nginxæ˜¯å¦‚ä½•ä¸€æ­¥ä¸€æ­¥çš„é€šè¿‡åŸŸåé…ç½®ã€URIé…ç½®ä»¥åŠç›®å½•é…ç½®æ¥å‘½ä¸­è¯·æ±‚çš„ã€‚ server_nameé…ç½® åœ¨ä¸Šé¢çš„é…ç½®ä¸­ï¼Œæˆ‘ä»¬ä¸»è¦æ˜¯å°†server_nameè®¾ç½®ä¸ºlocalhostï¼Œä½†æ˜¯è¿™æ ·ä»…èƒ½è®©å±€åŸŸç½‘å†…çš„ä¸»æœºè®¿é—®åˆ°ï¼›æˆ‘ä»¬æƒ³è¦è®©å¹¿åŸŸç½‘ä¸Šçš„å…¶ä»–ä¸»æœºè®¿é—®ï¼Œå¯ä»¥å°†server_nameåŒ¹é…åŸŸåï¼Œå®ƒçš„å‚æ•°å€¼å¯ä»¥æ˜¯ä»¥ä¸‹å‡ ç§ï¼š ç²¾ç¡®çš„åŸŸåï¼Œå¦‚www.my.com é€šé…ç¬¦åç§°ï¼Œä½†é€šé…ç¬¦åªèƒ½ç”¨åœ¨ç”±ä¸‰æ®µå­—ç¬¦ä¸²ç»„æˆçš„åç§°çš„é¦–æ®µæˆ–å°¾æ®µï¼Œå¦‚*.my.comæˆ–è€…www.my.* æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨æ³¢æµªå·~ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²çš„å¼€å§‹æ ‡è®°ï¼Œå¦‚~^www\\d+\\.my\\.com$ ipåœ°å€ åœ¨ä¸Šé¢æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œ^è¡¨ç¤ºä»¥wwwå¼€å¤´ï¼Œç´§è·Ÿä¸€ä¸ªæˆ–å¤šä¸ªæ•°å­—ï¼ˆ\\d+ï¼‰ï¼Œç„¶åè·Ÿä¸ŠåŸŸåmy.comï¼Œæœ€åä»¥$ç»“å°¾ï¼›å› æ­¤ä¸Šé¢çš„è¡¨è¾¾å¼å¯ä»¥åŒ¹é…çš„åŸŸåæ¯”å¦‚www1.my.comï¼Œä½†æ˜¯www.my.comå°±ä¸è¡Œã€‚ æ­£åˆ™è¡¨è¾¾å¼è¿˜æ”¯æŒå­—ç¬¦ä¸²æ•è·åŠŸèƒ½ï¼Œå³å°†æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æˆåŠŸçš„åç§°ä¸­çš„ä¸€éƒ¨åˆ†å­—ç¬¦ä¸²æˆªå–å‡ºæ¥ï¼Œæ”¾åœ¨å˜é‡ä¸­ä¾›åé¢ä½¿ç”¨ï¼›æ¯”å¦‚å°†server_nameè¿›è¡Œå¦‚ä¸‹è®¾ç½®ï¼š 12345678server &#123; listen 80; server_name ~^(.+)?\\.my\\.com$; location / &#123; root /usr/share/nginx/html/$1; index index.html index.htm; &#125;&#125; è¿™æ ·ï¼Œé€šè¿‡äºŒçº§åŸŸåhome.my.comåˆ°è¾¾Nginxæ—¶ï¼Œè¢«server_nameæ­£åˆ™è¡¨è¾¾å¼æ•è·ï¼Œå°†å…¶ä¸­çš„homeå­—ç¬¦ä¸²å­˜å…¥$1å˜é‡ä¸­ï¼Œæˆ‘ä»¬åœ¨/usr/share/nginx/html/homeç›®å½•ä¸‹çš„é™æ€èµ„æºå°±èƒ½é€šè¿‡home.my.comåŸŸåæ¥è®¿é—®äº†ï¼›æˆ‘ä»¬æœåŠ¡å™¨çš„ç›®å½•å°±å¯ä»¥æ˜¯è¿™æ ·çš„ï¼š 123456789/usr/share/nginx/html/ |- home |- index.html |- blog |- index.html |- mail |- index.html |- photo |- index.html è¿™æ ·å°±åªéœ€è¦ä¸€ä¸ªserverå—æ¥å®Œæˆå¤šä¸ªç«™ç‚¹çš„é…ç½®ã€‚ nginxå…è®¸ä¸€ä¸ªè™šæ‹Ÿä¸»æœºæœ‰å¤šä¸ªåŸŸåï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç»™server_nameåŒæ—¶é…ç½®å¤šä¸ªåŸŸåï¼Œå¤šä¸ªä¹‹é—´ä»¥ç©ºæ ¼åˆ†éš”ï¼š 12345server &#123; listen 80; server_name a.com b.com c.com; # ...å…¶ä»–é…ç½®&#125; ç”±äºserver_nameæ”¯æŒä»¥ä¸Šä¸‰ç§é…ç½®æ–¹å¼ï¼Œå¦‚æœå‡ºç°å¤šä¸ªserverå—åŒæ—¶åŒ¹é…äº†ç›¸åŒçš„åŸŸåï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚äº¤ç»™å“ªä¸ªserverå‘¢ï¼Ÿå› æ­¤ä¼˜å…ˆçº§é¡ºåºå¦‚ä¸‹ï¼š ç²¾ç¡®åŒ¹é…server_name é€šé…ç¬¦åœ¨å¼€å§‹æ—¶åŒ¹é…server_name é€šé…ç¬¦åœ¨ç»“å°¾æ—¶åŒ¹é…server_name æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…server_name å¦‚æœæˆ‘ä»¬æƒ³è®©å±€åŸŸç½‘å†…çš„è®¾å¤‡è®¿é—®nginxï¼Œå¯ä»¥å°†server_nameè®¾ç½®ipåœ°å€çš„æ–¹å¼ï¼š 1234server &#123; listen 80; server_name localhost 192.168.1.101;&#125; å¦‚æœè¿˜ä¸èƒ½è®¿é—®ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹æ˜¯å¦æ˜¯é˜²ç«å¢™çš„åŸå› ï¼Œåœ¨é˜²ç«å¢™å…è®¸é€šè¿‡çš„åº”ç”¨ä¸­å°†Nginxå‹¾é€‰ï¼ˆæ²¡æœ‰æ‰¾åˆ°Nginxå¯ä»¥ç‚¹å‡»å…è®¸å…¶ä»–åº”ç”¨è¿›è¡Œæ–°å¢ï¼‰ï¼š æœ‰æ—¶å€™æˆ‘ä»¬è¿˜ä¼šè§åˆ°å°†server_nameè®¾ç½®ä¸º_ï¼ˆä¸‹åˆ’çº¿ï¼‰ï¼Œæ„å‘³ç€server_nameä¸ºç©ºï¼Œå³åŒ¹é…å…¨éƒ¨çš„ä¸»æœºï¼›æˆ‘ä»¬å¯ä»¥é…ç½®hostï¼Œå°†a.comã€b.comå’Œc.coméƒ½æŒ‡å‘æœ¬æœºï¼Œç„¶åé…ç½®nginxï¼š 12345678server &#123; listen 80; server_name _; location / &#123; root html; index index.html index.htm; &#125;&#125; è¿™æ ·æˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡åŸŸåa.comã€b.comã€c.comæ¥è®¿é—®ï¼Œä¹Ÿèƒ½é€šè¿‡ipçš„æ–¹å¼ã€‚ locationé…ç½® locationç”¨äºåŒ¹é…ä¸åŒçš„URIè¯·æ±‚ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š 12location [ = | ~ | ~* | ^~ ] uri &#123; ... &#125;location @/name/ &#123; â€¦ &#125; è¿™é‡Œçš„uriå°±æ˜¯å¾…åŒ¹é…çš„è¯·æ±‚å­—ç¬¦ä¸²ï¼Œå¯ä»¥æ˜¯ä¸å«æ­£åˆ™çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚/homeï¼Œç§°ä¸ºæ ‡å‡†URIï¼›ä¹Ÿå¯ä»¥æ˜¯åŒ…å«æ­£åˆ™çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚\\.html$ï¼ˆè¡¨ç¤ºä»¥.htmlç»“å°¾ï¼‰ï¼Œç§°ä¸ºæ­£åˆ™URIã€‚è€Œæ–¹æ‹¬å·ä¸­çš„å››ç§åŒ¹é…ç¬¦éƒ½æ˜¯å¯é€‰çš„ï¼Œç”¨æ¥æ”¹å˜è¯·æ±‚å­—ç¬¦ä¸²ä¸URIçš„åŒ¹é…æ–¹å¼ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å››ç§åŒ¹é…ç¬¦çš„è§£é‡Šï¼š åŒ¹é…ç¬¦ è§£é‡Š ä¸å¡« locationåæ²¡æœ‰å‚æ•°ï¼Œç›´æ¥è·Ÿç€æ ‡å‡†URIï¼Œè¡¨ç¤ºå‰ç¼€åŒ¹é…ï¼Œä»£è¡¨è·Ÿè¯·æ±‚ä¸­çš„URIä»å¤´å¼€å§‹åŒ¹é… = ç”¨äºæ ‡å‡†URIå‰ï¼Œè¦æ±‚è¯·æ±‚å­—ç¬¦ä¸²ä¸å…¶ç²¾å‡†åŒ¹é…ï¼ŒæˆåŠŸåˆ™ç«‹å³å¤„ç†ï¼Œnginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é… ^~ ç”¨äºæ ‡å‡†URIå‰ï¼Œè¦æ±‚ä¸€æ—¦åŒ¹é…å°±ä¼šç«‹å³å¤„ç†ï¼Œä¸å†å»åŒ¹é…å…¶ä»–æ­£åˆ™URIï¼Œä¸€èˆ¬ç”¨æ¥åŒ¹é…ç›®å½• ~ ç”¨äºæ­£åˆ™URIå‰ï¼Œè¡¨ç¤ºURIåŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒºåˆ†å¤§å°å†™ ~* ç”¨äºæ­£åˆ™URIå‰ï¼Œè¡¨ç¤ºURIåŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸åŒºåˆ†å¤§å°å†™ @ å®šä¹‰ä¸€ä¸ªå‘½åçš„locationï¼Œ@å®šä¹‰çš„locationåå­—ä¸€èˆ¬ç”¨åœ¨å†…éƒ¨å®šå‘ æˆ‘ä»¬æ¥çœ‹ä¸‹æ¯ç§åŒ¹é…è§„åˆ™èƒ½åŒ¹é…çš„urlï¼Œé¦–å…ˆä¸å¡«ä»£è¡¨çš„è¯è¡¨ç¤ºå‰ç¼€åŒ¹é…ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å¤šä¸ªç›¸ä¼¼çš„å‰ç¼€åŒ¹é…ï¼š 123456location /pre/fix &#123; # ...&#125;location /pre &#123; # ...&#125; å¯¹äºè¯·æ±‚/pre/fix/homeï¼Œæ ¹æ®æœ€å¤§åŒ¹é…åŸåˆ™ï¼ŒåŒ¹é…ç¬¬ä¸€ä¸ªlocationã€‚ ç„¶åæ˜¯=ï¼Œè¦æ±‚è·¯å¾„å®Œå…¨åŒ¹é…ï¼š 12345678location = /abc &#123; # ...&#125;# /abc åŒ¹é…# /abcde ä¸åŒ¹é…# /abc/ ä¸åŒ¹é…ï¼Œå¸¦æœ‰ç»“å°¾çš„/# /cde/abcä¸åŒ¹é… å…¶æ¬¡æ˜¯^~æœ€ä½³åŒ¹é…ï¼Œå®ƒçš„ä¼˜å…ˆçº§é«˜äºæ­£åˆ™è¡¨è¾¾å¼ï¼š 12345678location ^~ /login &#123; # ...&#125;# /login åŒ¹é…# /loginss åŒ¹é…# /login/ åŒ¹é…# /home/login ä¸åŒ¹é… æ¥ç€æ˜¯~æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ï¼Œå®ƒåŒºåˆ†å¤§å°å†™åŒ¹é…ï¼ˆæ³¨æ„ï¼šwindowsç‰ˆæœ¬nginxä¸åŒºåˆ†ï¼‰ï¼š 1234567location ~ \\.(gif|jpg|png|js|css)$ &#123; # ...&#125;# /bg.png åŒ¹é…# /bg.PNG ä¸åŒ¹é… # /bg.png?a=1 åŒ¹é…# /bg.jpeg ä¸åŒ¹é… ~*åŒæ ·ä¹Ÿæ˜¯æ­£åˆ™åŒ¹é…ï¼Œåªä¸è¿‡å®ƒä¸åŒºåˆ†å¤§å°å†™ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºã€‚ å¦‚æœæˆ‘ä»¬çš„URIåŒ¹é…åˆ°äº†å¤šä¸ªlocationï¼Œå…¶å¹¶ä¸å®Œå…¨æŒ‰ç…§åœ¨é…ç½®æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºæ¥è¿›è¡ŒåŒ¹é…ï¼ŒURIä¼šæŒ‰ç…§å¦‚ä¸‹è§„åˆ™è¿›è¡ŒåŒ¹é…ï¼š = ç²¾ç¡®åŒ¹é…ä¼šç¬¬ä¸€ä¸ªè¢«å¤„ç†ã€‚å¦‚æœå‘ç°ç²¾ç¡®åŒ¹é…ï¼Œnginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é…ã€‚ æ™®é€šå­—ç¬¦åŒ¹é…ï¼Œæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™å’Œé•¿çš„å—è§„åˆ™å°†è¢«ä¼˜å…ˆå’ŒæŸ¥è¯¢åŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¯¥é¡¹åŒ¹é…è¿˜éœ€å»çœ‹æœ‰æ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å’Œæ›´é•¿çš„åŒ¹é…ã€‚ ^~ åˆ™åªåŒ¹é…è¯¥è§„åˆ™ï¼Œnginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é…ï¼Œå¦åˆ™nginxä¼šç»§ç»­å¤„ç†å…¶ä»–locationæŒ‡ä»¤ã€‚ æœ€ååŒ¹é…ç†å¸¦æœ‰~å’Œ~*çš„æŒ‡ä»¤ï¼Œå¦‚æœæ‰¾åˆ°ç›¸åº”çš„åŒ¹é…ï¼Œåˆ™nginxåœæ­¢æœç´¢å…¶ä»–åŒ¹é…ï¼›å½“æ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…æ²¡æœ‰æ­£åˆ™è¡¨è¾¾å¼è¢«åŒ¹é…çš„æƒ…å†µä¸‹ï¼Œé‚£ä¹ˆåŒ¹é…ç¨‹åº¦æœ€é«˜çš„é€å­—åŒ¹é…æŒ‡ä»¤ä¼šè¢«ä½¿ç”¨ã€‚ è¯·æ±‚ç›®å½•é…ç½® åœ¨locationåŒ¹é…URIåï¼Œå°±éœ€è¦åœ¨æœåŠ¡å™¨æŒ‡å®šçš„ç›®å½•ä¸­å¯»æ‰¾è¯·æ±‚èµ„æºï¼Œè€Œrootå’Œaliaså°±æ˜¯ç”¨æ¥æŒ‡å®šç›®å½•çš„ä¸¤ç§æŒ‡ä»¤ï¼Œä¸¤è€…ä¸»è¦çš„åŒºåˆ«åœ¨äºå¦‚ä½•è§£ælocationåé¢çš„è·¯å¾„ï¼›æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹rootçš„ç”¨æ³•ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦å°†/data/ä¸‹é¢çš„æ‰€æœ‰è·¯å¾„è½¬å‘åˆ°html/roottestä¸‹é¢ï¼š 123location /data/ &#123; root html/roottest;&#125; å½“locationæ¥æ”¶åˆ°/data/index.htmlçš„è¯·æ±‚æ—¶ï¼Œä¼šåœ¨html/roottest/data/ç›®å½•ä¸‹æ‰¾åˆ°index.htmlæ–‡ä»¶å¹¶è¿›è¡Œç›¸åº”ï¼Œrootä¼šå°†rootè·¯å¾„å’Œlocationè·¯å¾„è¿›è¡Œæ‹¼æ¥ã€‚ è€ŒaliasæŒ‡ä»¤åˆ™æ”¹å˜locationæ¥æ”¶åˆ°çš„è¯·æ±‚è·¯å¾„ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦å°†/data1/ä¸‹é¢çš„æ‰€æœ‰è·¯å¾„è½¬å‘åˆ°html/aliastestä¸‹é¢ï¼š 123location /data1/ &#123; alias html/aliastes/;&#125; å½“locationæ¥æ”¶åˆ°/data1/index.htmlçš„è¯·æ±‚æ—¶ï¼Œä¼šåœ¨html/aliastes/ç›®å½•ä¸‹æŸ¥æ‰¾index.htmlæ–‡ä»¶å¹¶å“åº”ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šaliasæŒ‡ä»¤åé¢çš„è·¯å¾„å¿…é¡»ä»¥/ç»“æŸï¼Œå¦åˆ™ä¼šæ‰¾ä¸åˆ°æ–‡ä»¶ï¼Œè€Œrootåˆ™å¯æœ‰å¯æ— ã€‚ è®¿é—®æƒé™æ§åˆ¶ é’ˆå¯¹ä¸€äº›é™æ€èµ„æºï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè®¾ç½®ä¸€äº›ç”¨æˆ·è®¿é—®æƒé™ï¼Œæ¯”å¦‚å’Œjsä¸€èµ·æ‰“åŒ…äº§å‡ºçš„.mapæ–‡ä»¶ï¼Œä¼šå¯¹æºç è¿›è¡Œæ˜ å°„ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è®©å®ƒåªèƒ½é’ˆå¯¹å…¬å¸çš„ipè¿›è¡Œå¼€æ”¾ï¼Œå¯¹å¤–ç½‘çš„ipç¦æ­¢è®¿é—®ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°allowå’Œdenyå‘½ä»¤äº†ã€‚ å‡å¦‚å±€åŸŸç½‘è¿˜æœ‰ä¸¤ä¸ªè®¾å¤‡ï¼Œæˆ‘ä»¬åªèƒ½è®©è¿™ä¸¤ä¸ªè®¾å¤‡çš„ipé€šè¿‡è®¿é—®ï¼š 123456location / &#123; alias html/aliastes/; allow 192.168.1.102; allow 192.168.1.103; deny all;&#125; denyå’ŒallowæŒ‡ä»¤æ˜¯ç”±ngx_http_access_moduleæ¨¡å—æä¾›ï¼ŒWindowsç‰ˆæœ¬çš„Nginxå¹¶ä¸åŒ…å«è¯¥æ¨¡å—ã€‚ è¿˜å¯ä»¥å¯¹å‰ç«¯çš„.mapæ–‡ä»¶è¿›è¡Œè®¿é—®æƒé™æ§åˆ¶ï¼Œæ‰“åŒ…åçš„mapæ–‡ä»¶ä¸€èˆ¬ä¼šæ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œä½†æ˜¯å¦‚æœèƒ½å¯¹æ‰€æœ‰äººå¼€æ”¾ï¼Œåˆ«äººå°±èƒ½æŸ¥çœ‹åˆ°å¯¹åº”æºç ï¼›å› æ­¤æˆ‘ä»¬å¯ä»¥æ§åˆ¶åªæœ‰å…¬å¸çš„ipæ‰æœ‰è®¿é—®æƒé™ï¼š try_files å‰ç«¯åœ¨é…ç½®è·¯ç”±æ—¶ç»å¸¸ä¼šç”¨åˆ°historyè·¯ç”±æ¨¡å¼ï¼Œå› æ­¤åå°å°±éœ€è¦æ˜ å°„å¯¹åº”çš„è·¯ç”±åˆ°index.htmlï¼›ä½†æ˜¯å¦‚æœæˆ‘ä»¬ç»™æ¯ä¸ªè·¯ç”±éƒ½é…ç½®ä¸€ä¸ªlocationå°±ä¼šæ¯”è¾ƒç¹çï¼Œå› æ­¤å¯ä»¥é€šè¿‡try_filesæŒ‡ä»¤æ¥è¿›è¡Œå°è¯•è§£æï¼›try_filesçš„è¯­æ³•è§„åˆ™å¦‚ä¸‹ï¼š 1234# æ ¼å¼1ï¼štry_files file ... uri; # æ ¼å¼2ï¼štry_files file ... =code; å‡è®¾æˆ‘ä»¬æ‰“åŒ…å‡ºæ¥çš„å•é¡µé¢ä½äº/html/my/index.htmlï¼Œæˆ‘ä»¬æƒ³è¦å°†/loginã€/regisrerç­‰è·¯ç”±æŒ‡å‘index.htmlï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®try_filesï¼š 1234567server &#123; listen 8080; server_name localhost; location / &#123; try_files $uri /my/index.html; &#125;&#125; å¯¹äºå¤šé¡µé¢çš„åº”ç”¨ï¼Œå‡è®¾æˆ‘ä»¬çš„é¡µé¢éƒ½æ”¾åœ¨/html/pages/ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬æƒ³è¦è®¿é—®/loginæ—¶å“åº”/html/pages/login.htmlé¡µé¢ï¼Œå¯ä»¥é€šè¿‡$uriï¼š 123456789server &#123; listen 8080; server_name localhost; location / &#123; index index.html index.htm; root html/pages; try_files $uri /$uri.html $uri/index.html /index.html; &#125;&#125; è¿™é‡Œæˆ‘ä»¬è®¾ç½®rootç›®å½•ä¸ºhtml/pagesï¼Œå½“æˆ‘ä»¬è®¿é—®/loginè·¯ç”±æ—¶ï¼Œè¿™é‡Œçš„$uriå°±æ˜¯/loginï¼Œtry_filesä¼šå»å°è¯•åœ¨æ ¹ç›®å½•ä¸‹æ‰¾/login.htmlï¼›å¦‚æœæ‰¾ä¸åˆ°å°±å°è¯•/login/index.htmlï¼Œæœ€åæ‰¾ä¸åˆ°åˆ™ä¼šé»˜è®¤è¿”å›index.htmlã€‚ gzip æˆ‘ä»¬éƒ½çŸ¥é“åœ¨æœåŠ¡ç«¯å¼€å¯gzipå‹ç¼©èƒ½å¤Ÿä½¿å¾—jsã€cssã€htmlç­‰æ–‡ä»¶åœ¨ä¼ è¾“æ—¶å¤§å¹…æé«˜è®¿é—®é€Ÿåº¦ï¼Œä¼˜åŒ–ç½‘ç«™æ€§èƒ½ï¼›gzipå‹ç¼©åçš„æ–‡ä»¶å¤§å°å¯ä»¥å˜ä¸ºåŸæ¥çš„30%ç”šè‡³æ›´å°ï¼›è€Œå¯¹äºå›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰å…¶ä»–å¤šåª’ä½“æ–‡ä»¶ï¼Œå› ä¸ºå‹ç¼©æ•ˆæœä¸å¥½ï¼Œæ‰€ä»¥ä¸ä¼šå¼€å¯å‹ç¼©ã€‚ gzipå‹ç¼©æœ¬è´¨ä¸Šæ˜¯æœåŠ¡å™¨ç«¯å‹ç¼©ï¼Œä¼ è¾“åˆ°æµè§ˆå™¨åè§£å‹è§£æï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹gzipçš„åŸç†ç¤ºæ„ï¼š å¯ä»¥çœ‹åˆ°åœ¨è¯·æ±‚å’Œç›¸åº”å¤´ä¸Šåˆ†åˆ«åŠ äº†accept-encodingå’Œcontent-encodingæ¥è¿›è¡Œä¼ è¾“ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªjsçš„è¯·æ±‚æ•°æ®æ¥æŸ¥çœ‹ï¼š æ—¢ç„¶gzipæœ‰è¿™ä¹ˆå¤šçš„å¥½å¤„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹nginxå¦‚ä½•è¿›è¡Œé…ç½®ï¼Œgzipçš„é…ç½®å¯ä»¥åœ¨httpå—æˆ–è€…serverå—ä¸­ï¼š 1234567891011121314151617# å¼€å¯gzipgzip on;# è®¾ç½®gzipç”³è¯·å†…å­˜çš„å¤§å°gzip_buffers 32 4K;# è®¾ç½®gzipå‹ç¼©ç­‰çº§# å‹ç¼©çº§åˆ« 1-9ï¼Œçº§åˆ«è¶Šé«˜å‹ç¼©ç‡è¶Šå¤§ä½†è€—CPUgzip_comp_level 6;# æ­£åˆ™åŒ¹é…User-Agentä¸­çš„å€¼ï¼ŒåŒ¹é…ä¸Šåˆ™ä¸è¿›è¡Œgzipgzip_disable &quot;MSIE [1-6]\\.(?!.*SV1)&quot;;# è®¾ç½®å…è®¸å‹ç¼©çš„é¡µé¢æœ€å°å­—èŠ‚æ•°gzip_min_length 1024;# è®¾å®šè¿›è¡Œgzipå‹ç¼©çš„æœ€å°httpç‰ˆæœ¬gzip_http_version 1.0;# éœ€è¦å‹ç¼©å“ªäº›å“åº”ç±»å‹çš„èµ„æºgzip_types application/javascript text/css text/xml;# æ·»åŠ â€œVary: Accept-Encodingâ€å“åº”å¤´gzip_vary on; å¯†ç æ§åˆ¶ å¯¹äºä¸€äº›ç®€å•çš„é¡µé¢ï¼Œæˆ‘ä»¬æƒ³è¦é€šè¿‡å¯†ç æ¥é™åˆ¶å…¶ä»–ç”¨æˆ·çš„è®¿é—®ï¼Œä½†æ˜¯åˆä¸æƒ³æ¥å…¥å¤æ‚çš„è´¦å·ä½“ç³»ï¼ŒNginxæä¾›äº†ç®€å•çš„è´¦å·å¯†ç æ§åˆ¶ï¼›é¦–å…ˆæˆ‘ä»¬é€šè¿‡Linuxçš„å·¥å…·åˆ›å»ºä¸€ä¸ªå¯†ç æœ¬å­˜æ”¾è´¦å·å¯†ç ï¼š 12sudo yum install httpd-tools -ysudo htpasswd -c passwd/passwd admin passwd/passwdæ–‡ä»¶å°±æ˜¯ç”Ÿæˆçš„å¯†ç æ–‡ä»¶ï¼Œè¿è¡Œåä¼šè¦æ±‚è¿ç»­ä¸¤æ¬¡è¾“å…¥å¯†ç ï¼ŒæˆåŠŸåä¸ºadminç”¨æˆ·æ·»åŠ äº†å¯†ç ï¼›ç„¶åæˆ‘ä»¬å°±ä¿®æ”¹nginxçš„é…ç½®æ–‡ä»¶ï¼Œå¯¹ç«™ç‚¹å¼€å¯å¯†ç éªŒè¯ï¼š 123456789server &#123; listen 8000; server_name localhost; auth_basic &quot;è¯·è¾“å…¥è´¦å·å¯†ç &quot;; auth_basic_user_file /etc/nginx/conf/passwd/passwd; location / &#123; # ..... &#125;&#125; é‡å¯nginxï¼Œå†æ¬¡è®¿é—®ç«™ç‚¹å°±ä¼šå‡ºç°éœ€è¦èº«ä»½éªŒè¯çš„å¼¹æ¡†äº†ã€‚ åå‘ä»£ç† ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†æ­£å‘ä»£ç†å’Œåå‘ä»£ç†çš„åŒºåˆ«ï¼Œåå‘ä»£ç†åŠŸèƒ½æ˜¯nginxçš„ä¸‰å¤§ä¸»è¦åŠŸèƒ½ä¹‹ä¸€ï¼ˆé™æ€webæœåŠ¡å™¨ã€åå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡ï¼‰ã€‚åå‘ä»£ç†ä¸éœ€è¦é¢å¤–çš„æ¨¡å—ï¼Œé»˜è®¤è‡ªå¸¦proxy_passå’Œfastcgi_passæŒ‡ä»¤ï¼Œé€šè¿‡åœ¨locationå—ä¸­é…ç½®å³å¯å®ç°ï¼š 1234567server &#123; listen 80; server_name a.com; location / &#123; proxy_pass http://192.168.1.102:8080; &#125;&#125; åœ¨é…ç½®proxy_passæ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ³¨æ„urlåé¢çš„/`ï¼›å½“æˆ‘ä»¬é€šè¿‡ä¸‹é¢å‡ ç§æƒ…å†µè®¿é—®/proxy/home.html``æ—¶ï¼š 123location /proxy/ &#123; proxy_pass http://192.168.1.102:8080/;&#125; ç¬¬ä¸€ç§æƒ…å†µurlåé¢å¸¦ä¸Š/ï¼Œåˆ™ä¼šè¢«ä»£ç†åˆ°http://192.168.1.102:8080/home.htmlã€‚ 123location /proxy/ &#123; proxy_pass http://192.168.1.102:8080;&#125; ç¬¬äºŒç§æƒ…å†µurlåä¸å¸¦/ï¼Œåˆ™ä¼šè¢«ä»£ç†åˆ°http://192.168.1.102:8080/proxy/home.html 123location /proxy/ &#123; proxy_pass http://192.168.1.102:8080/doc/;&#125; ç¬¬ä¸‰ç§æƒ…å†µä»£ç†/doc/ï¼Œåˆ™ä¼šè¢«ä»£ç†åˆ°http://192.168.1.102:8080/doc/home.html 123location /proxy/ &#123; proxy_pass http://192.168.1.102:8080/doc;&#125; ç¬¬å››ç§æƒ…å†µä»£ç†/docï¼Œåˆ™ä¼šè¢«ä»£ç†åˆ°http://192.168.1.102:8080/dochome.html åœ¨é…ç½®åå‘ä»£ç†æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¿®æ”¹ä»£ç†è¯·æ±‚çš„è¯·æ±‚å‚æ•°ï¼š 1234567891011121314location /proxy/ &#123; proxy_pass http://192.168.1.102:8080/; # ä¿®æ”¹è¯·æ±‚çš„method proxy_method GET; # ä¿®æ”¹è¯·æ±‚çš„httpåè®®ç‰ˆæœ¬ proxy_http_version 1.1; # å°†åŸæ¥hostå­—æ®µæ”¾åˆ°è½¬å‘è¯·æ±‚ä¸­ proxy_set_header Host $host; #è·å–çœŸå®ip proxy_set_header X-Real-IP $remote_addr; # ä»£ç†æœåŠ¡å™¨æ¯æˆåŠŸæ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå°±æŠŠè¯·æ±‚æ¥æºIPåœ°å€æ·»åŠ åˆ°å³è¾¹ proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_redirect off;&#125; ç»è¿‡åå‘ä»£ç†åï¼Œç”±äºå®¢æˆ·ç«¯å’ŒwebæœåŠ¡å™¨ä¹‹é—´å¢åŠ äº†ä¸€ä¸ªä»£ç†å±‚ï¼Œå› æ­¤webæœåŠ¡å™¨æ— æ³•æ‹¿åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„hostå’ŒçœŸå®ipï¼Œæˆ‘ä»¬é€šè¿‡proxy_set_headeræŒ‡ä»¤ä¿®æ”¹ä»£ç†è¯·æ±‚çš„å¤´éƒ¨ï¼›$hostå’Œ$remote_addræ˜¯ç”¨æˆ·çœŸå®çš„hostå’Œipï¼Œè¿™é‡Œä½œä¸ºå˜é‡ä¼ å…¥Hostå’ŒX-Real-IPå­—æ®µï¼Œå› æ­¤æˆ‘ä»¬åœ¨å®¢æˆ·ç«¯æœåŠ¡å™¨æƒ³è¦è·å–çœŸå®ipå°±å¯ä»¥é€šè¿‡request.getAttribute(â€œX-real-ipâ€)çš„æ–¹å¼ã€‚ è´Ÿè½½å‡è¡¡ éšç€äº’è”ç½‘çš„å‘å±•ï¼Œç”¨æˆ·è§„æ¨¡çš„å¢åŠ ï¼ŒæœåŠ¡å™¨çš„å‹åŠ›ä¹Ÿè¶Šæ¥è¶Šå¤§ï¼Œå¦‚æœåªä½¿ç”¨ä¸€å°æœåŠ¡å™¨æœ‰æ—¶å€™ä¸èƒ½æ‰¿å—æµé‡çš„å‹åŠ›ï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦å°†éƒ¨åˆ†æµé‡åˆ†æ•£åˆ°å¤šå°æœåŠ¡å™¨ä¸Šï¼Œä½¿å¾—æ¯å°æœåŠ¡å™¨éƒ½å‡è¡¡çš„æ‰¿æ‹…å‹åŠ›ã€‚ nginxè´Ÿè½½å‡è¡¡ç›®å‰æ”¯æŒå…­ç§ç­–ç•¥ï¼šè½®è¯¢ç­–ç•¥ã€åŠ æƒè½®è¯¢ç­–ç•¥ã€ip_hashç­–ç•¥ã€url_hashç­–ç•¥ã€fairç­–ç•¥å’Œstickyç­–ç•¥ï¼›å…­ç§ç­–ç•¥å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå†…ç½®ç­–ç•¥ï¼ˆè½®è¯¢ã€åŠ æƒè½®è¯¢ã€ip_hashï¼‰å’Œæ‰©å±•ç­–ç•¥ï¼ˆurl_hashã€fairã€stickyï¼‰ï¼›é»˜è®¤æƒ…å†µä¸‹å†…ç½®ç­–ç•¥è‡ªåŠ¨ç¼–è¯‘åœ¨Nginxä¸­ï¼Œè€Œæ‰©å±•ç­–ç•¥éœ€è¦é¢å¤–å®‰è£…ã€‚ æ—¢ç„¶æ˜¯è´Ÿè½½ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦å¯ç”¨å¤šå°æœåŠ¡å™¨ï¼›è¿™é‡Œä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œæˆ‘ä»¬åœ¨ä¸€å°ç”µè„‘ä¸Šè¿è¡Œnodeè„šæœ¬æ¥æ¨¡æ‹Ÿ3å°æœåŠ¡å™¨ï¼›åŒæ—¶ä¸ºäº†æ–¹ä¾¿çœ‹åˆ°æ¯å°æœåŠ¡å™¨æœ‰å¤šå°‘æµé‡ï¼Œæ¯è®¿é—®ä¸€æ¬¡å°±è®¡æ•°ä¸€æ¬¡ï¼š 12345678910const express = require(&quot;express&quot;);const app = express();const PORT = 8080;const path = require(&quot;path&quot;);let count = 0;app.get(&quot;*&quot;, (req, res) =&gt; &#123; count++; res.sendFile(path.resolve(__dirname, &quot;./index.html&quot;));&#125;);app.listen(PORT); ç„¶åæˆ‘ä»¬ä¿®æ”¹ç«¯å£å·ï¼Œè¿™æ ·æˆ‘ä»¬å°±æœ‰8080ã€8081ã€8082ä¸‰ä¸ªæœåŠ¡å™¨äº†ã€‚ è½®è¯¢ç­–ç•¥ è½®è¯¢ç­–ç•¥ï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŒ‰ç…§è¯·æ±‚é¡ºåºï¼Œé€ä¸€åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨èŠ‚ç‚¹ï¼›å¦‚æœæŸå°æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œä¼šè‡ªåŠ¨å‰”é™¤ã€‚ 123456789101112upstream myserver &#123; server 192.168.1.101:8080; server 192.168.1.101:8081; server 192.168.1.101:8082;&#125;server &#123; listen 8070; server_name _; location / &#123; proxy_pass http://myserver; &#125;&#125; æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡æµ‹è¯•å·¥å…·Apache Benchæ¥å¹¶å‘100ä¸ªè¯·æ±‚åˆ°Nginxï¼š 1ab -n 100 -c 10 http://localhost:8070/ æœ€åç»Ÿè®¡æ¯å°æœåŠ¡å™¨çš„ç»“æœï¼Œæ¯å°æœåŠ¡å™¨çš„è¯·æ±‚è¿˜æ˜¯å¾ˆå¹³å‡çš„ï¼š 1238080ï¼š34ä¸ªè¯·æ±‚8081ï¼š33ä¸ªè¯·æ±‚8082ï¼š33ä¸ªè¯·æ±‚ åŠ æƒè½®è¯¢ç­–ç•¥ åŠ æƒè½®è¯¢åœ¨åŸºæœ¬è½®è¯¢ç­–ç•¥ä¸Šè€ƒè™‘å„æœåŠ¡å™¨èŠ‚ç‚¹æ¥å—è¯·æ±‚çš„æƒé‡ï¼ŒæŒ‡å®šæœåŠ¡å™¨èŠ‚ç‚¹è¢«è½®è¯¢çš„æƒé‡ï¼Œä¸»è¦ç”¨äºæœåŠ¡å™¨èŠ‚ç‚¹æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ é€šè¿‡åœ¨serverèŠ‚ç‚¹åé…ç½®weightæ¥è®¾ç½®æƒé‡ï¼Œweightçš„å¤§å°å’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼ˆweightçš„é»˜è®¤å€¼ä¸º1ï¼‰ï¼›æˆ‘ä»¬ç»™ä¸‰å°æœåŠ¡å™¨è®¾ç½®è®¿é—®æ¯”æ˜¯1:3:2ã€‚ 12345upstream myserver &#123; server 192.168.1.101:8080; server 192.168.1.101:8081 weight=3; server 192.168.1.101:8082 weight=2;&#125; å‹åŠ›æµ‹è¯•åç»Ÿè®¡æœåŠ¡å™¨çš„è¯·æ±‚ç»“æœï¼Œå’Œæˆ‘ä»¬é…ç½®çš„æ¯”ç‡è¿˜æ˜¯å‡ ä¹ç›¸åŒçš„ï¼š 1238080ï¼š16ä¸ªè¯·æ±‚8081ï¼š51ä¸ªè¯·æ±‚8082ï¼š33ä¸ªè¯·æ±‚ æ³¨ï¼šç”±äºweightæ˜¯å†…ç½®ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å’Œå…¶ä»–ç­–ç•¥é…åˆä½¿ç”¨ã€‚ ip_hashç­–ç•¥ ip_hashç­–ç•¥æ˜¯å°†å‰ç«¯è®¿é—®çš„ipè¿›è¡Œhashæ“ä½œåï¼Œç„¶åæ ¹æ®hashçš„ç»“æœå°†è¯·æ±‚åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œè¿™æ ·ä½¿å¾—æ¯ä¸ªipéƒ½ä¼šå›ºå®šè®¿é—®æœåŠ¡èŠ‚ç‚¹ï¼›è¿™æ ·åšçš„å¥½å¤„æ˜¯ç”¨æˆ·çš„sessionåªåœ¨ä¸€ä¸ªåç«¯æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šï¼Œä¸å¿…è€ƒè™‘ä¸€ä¸ªsessionå­˜åœ¨å¤šå°æœåŠ¡å™¨èŠ‚ç‚¹å‡ºç°sessionå…±äº«é—®é¢˜ã€‚ 123456upstream myserver &#123; ip_hash; server 192.168.1.101:8080; server 192.168.1.101:8081 weight=3; server 192.168.1.101:8082 weight=2;&#125; å‹åŠ›æµ‹è¯•åç»Ÿè®¡æœåŠ¡å™¨çš„è¯·æ±‚ç»“æœï¼Œæˆ‘ä»¬å‘ç°æ‰€æœ‰çš„è¯·æ±‚éƒ½åˆ°å›ºå®šä¸€å°æœåŠ¡å™¨ä¸Šäº†ï¼š 1238080ï¼š0ä¸ªè¯·æ±‚8081ï¼š0ä¸ªè¯·æ±‚8082ï¼š100ä¸ªè¯·æ±‚ url_hashç­–ç•¥ url_hashç­–ç•¥æ˜¯å°†urlåœ°å€è¿›è¡Œhashæ“ä½œï¼Œæ ¹æ®hashç»“æœè¯·æ±‚å®šå‘åˆ°åŒä¸€æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šï¼›url_hashçš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿæé«˜åç«¯ç¼“å­˜æœåŠ¡å™¨çš„æ•ˆç‡ã€‚ 123456upstream myserver &#123; hash $request_uri; server 192.168.1.101:8080; server 192.168.1.101:8081; server 192.168.1.101:8082;&#125; å‹åŠ›æµ‹è¯•åç»Ÿè®¡æœåŠ¡å™¨çš„è¯·æ±‚ç»“æœï¼š 1238080ï¼š0ä¸ªè¯·æ±‚8081ï¼š0ä¸ªè¯·æ±‚8082ï¼š100ä¸ªè¯·æ±‚ å¦‚æœæˆ‘ä»¬åˆ‡æ¢ä¸åŒçš„urlï¼Œ/homeã€/listç­‰ï¼Œéƒ½ä¼šåˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨èŠ‚ç‚¹ã€‚ fairç­–ç•¥ fairç­–ç•¥è¯·æ±‚è½¬å‘åˆ°è´Ÿè½½æœ€å°çš„åç«¯æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šã€‚Nginxé€šè¿‡æœåŠ¡å™¨èŠ‚ç‚¹å¯¹å“åº”æ—¶é—´æ¥åˆ¤æ–­è´Ÿè½½æƒ…å†µï¼Œå“åº”æ—¶é—´æœ€çŸ­çš„èŠ‚ç‚¹è´Ÿè½½å°±ç›¸å¯¹è¾ƒè½»ï¼ŒNginxå°±ä¼šå°†å‰ç«¯è¯·æ±‚è½¬å‘åˆ°æ­¤æœåŠ¡å™¨èŠ‚ç‚¹ä¸Šã€‚ æ³¨ï¼šfairç­–ç•¥é»˜è®¤ä¸è¢«ç¼–è¯‘è¿›nginxå†…æ ¸ï¼Œéœ€è¦é¢å¤–å®‰è£… 123456upstream myserver &#123; fair; server 192.168.1.101:8080; server 192.168.1.101:8081; server 192.168.1.101:8082;&#125; å‹åŠ›æµ‹è¯•åç»Ÿè®¡æœåŠ¡å™¨çš„è¯·æ±‚ç»“æœï¼š 1238080ï¼š33ä¸ªè¯·æ±‚8081ï¼š33ä¸ªè¯·æ±‚8082ï¼š34ä¸ªè¯·æ±‚ stickyç­–ç•¥ stickyç­–ç•¥æ˜¯åŸºäºcookieçš„ä¸€ç§è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡åˆ†å‘å’Œè¯†åˆ«cookieï¼Œä½¿æ¥è‡ªåŒä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚è½åœ¨åŒä¸€å°æœåŠ¡å™¨ä¸Šï¼Œé»˜è®¤cookieæ ‡è¯†åä¸ºrouteã€‚ stickyç­–ç•¥çœ‹èµ·æ¥å’Œip_hashç­–ç•¥ç±»ä¼¼ï¼Œä½†æ˜¯åˆæœ‰ä¸€å®šåŒºåˆ«ã€‚å‡è®¾åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…æœ‰3å°ç”µè„‘ï¼Œä»–ä»¬æœ‰3ä¸ªå†…ç½‘IPï¼Œä½†æ˜¯ä»–ä»¬å‘èµ·è¯·æ±‚æ—¶ï¼Œå´åªæœ‰ä¸€ä¸ªå¤–ç½‘IPï¼Œå¦‚æœä½¿ç”¨ip_hashæ–¹å¼ï¼Œåˆ™Nginxä¼šå°†è¯·æ±‚åˆ†é…åˆ°åŒä¸€æœåŠ¡å™¨ï¼›å¦‚æœä½¿ç”¨stickyç­–ç•¥ï¼Œåˆ™ä¼šæŠŠè¯·æ±‚åˆ†é…åˆ°ä¸åŒæœåŠ¡å™¨ä¸Šï¼Œè¿™æ˜¯ip_hashæ— æ³•åšåˆ°çš„ã€‚ æ³¨ï¼šstickyç­–ç•¥é»˜è®¤ä¸è¢«ç¼–è¯‘è¿›nginxå†…æ ¸ï¼Œéœ€è¦é¢å¤–å®‰è£… 123456upstream myserver &#123; sticky name=sticky_cookie expires=6h; server 192.168.1.101:8080; server 192.168.1.101:8081; server 192.168.1.101:8082;&#125; stickyé»˜è®¤çš„cookieçš„åç§°æ˜¯routeï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡nameä¿®æ”¹ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„cookieå‚æ•°å¯ä»¥è¿›è¡Œä¿®æ”¹ï¼š [name=route] è®¾ç½®ç”¨æ¥è®°å½•ä¼šè¯çš„cookieåç§° [domain=.foo.bar] è®¾ç½®cookieä½œç”¨çš„åŸŸå [path=/] è®¾ç½®cookieä½œç”¨çš„URLè·¯å¾„ï¼Œé»˜è®¤æ ¹ç›®å½• [expires=1h] è®¾ç½®cookieçš„ç”Ÿå­˜æœŸï¼Œé»˜è®¤ä¸è®¾ç½®ï¼Œæµè§ˆå™¨å…³é—­å³å¤±æ•ˆ [hash=index|md5|sha1] è®¾ç½®cookieä¸­æœåŠ¡å™¨çš„æ ‡è¯†æ˜¯ç”¨æ˜æ–‡è¿˜æ˜¯ä½¿ç”¨md5å€¼ï¼Œé»˜è®¤ä½¿ç”¨md5 [no_fallback] è®¾ç½®è¯¥é¡¹ï¼Œå½“stickyçš„åç«¯æœºå™¨æŒ‚äº†ä»¥åï¼Œnginxè¿”å›502 (Bad Gateway or Proxy Error) ï¼Œè€Œä¸è½¬å‘åˆ°å…¶ä»–æœåŠ¡å™¨ï¼Œä¸å»ºè®®è®¾ç½® [secure] è®¾ç½®å¯ç”¨å®‰å…¨çš„cookieï¼Œéœ€è¦HTTPSæ”¯æŒ [httponly] å…è®¸cookieä¸é€šè¿‡JSæ³„æ¼ï¼Œæ²¡ç”¨è¿‡ æˆ‘ä»¬é€šè¿‡æµè§ˆå™¨æ¥è®¿é—®ï¼Œåœ¨cookieä¸­å¯ä»¥çœ‹åˆ°stickyä¸‹å‘çš„cookie æ³¨ï¼šç”±äºcookieæœ€åˆç”±æœåŠ¡å™¨ç«¯ä¸‹å‘ï¼Œå¦‚æœå®¢æˆ·ç«¯ç¦ç”¨cookieï¼Œåˆ™cookieä¸ä¼šç”Ÿæ•ˆã€‚ å…¶ä»–å‚æ•° upstreamè¿˜æœ‰ä¸€äº›å‚æ•°æˆ‘ä»¬å¯ä»¥é…åˆè´Ÿè½½å‡è¡¡ï¼š å‚æ•° æè¿° fail_timeout ä¸max_failsç»“åˆä½¿ç”¨ max_fails è®¾ç½®åœ¨fail_timeoutå‚æ•°è®¾ç½®çš„æ—¶é—´å†…æœ€å¤§å¤±è´¥æ¬¡æ•°ï¼Œå¦‚æœåœ¨è¿™ä¸ªæ—¶é—´å†…ï¼Œæ‰€æœ‰é’ˆå¯¹è¯¥æœåŠ¡å™¨çš„è¯·æ±‚éƒ½å¤±è´¥äº†ï¼Œé‚£ä¹ˆè®¤ä¸ºè¯¥æœåŠ¡å™¨ä¼šè¢«è®¤ä¸ºæ˜¯åœæœºäº† fail_time æœåŠ¡å™¨ä¼šè¢«è®¤ä¸ºåœæœºçš„æ—¶é—´é•¿åº¦,é»˜è®¤ä¸º10sã€‚ backup æ ‡è®°è¯¥æœåŠ¡å™¨ä¸ºå¤‡ç”¨æœåŠ¡å™¨ã€‚å½“ä¸»æœåŠ¡å™¨åœæ­¢æ—¶ï¼Œè¯·æ±‚ä¼šè¢«å‘é€åˆ°å®ƒè¿™é‡Œã€‚ down æ ‡è®°æœåŠ¡å™¨æ°¸ä¹…åœæœºäº†ã€‚ keepalive è¿æ¥æ•°ï¼ˆkeepaliveçš„å€¼ï¼‰æŒ‡å®šäº†æ¯ä¸ªå·¥ä½œè¿›ç¨‹ä¸­ä¿ç•™çš„æŒç»­è¿æ¥åˆ°nginxè´Ÿè½½å‡è¡¡å™¨ç¼“å­˜çš„æœ€å¤§å€¼ã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªè®¾ç½®å€¼çš„é—²ç½®è¿›ç¨‹æƒ³é“¾æ¥åˆ°nginxè´Ÿè½½å‡è¡¡å™¨ç»„ï¼Œæœ€å…ˆè¿æ¥çš„å°†è¢«å…³é—­ã€‚ 123456789101112upstream backserver&#123; ip_hash; # down è¡¨ç¤ºå•å‰çš„serveræš‚æ—¶ä¸å‚ä¸è´Ÿè½½ server 192.168.1.101:8080 down; server 192.168.1.101:8081; # max_failså…è®¸è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°é»˜è®¤ä¸º1ï¼Œæ­¤å¤„å…è®¸å¤±è´¥çš„æ¬¡æ•°ä¸º3ã€‚æ¯æ¬¡å¤±è´¥åæš‚åœçš„æ—¶é—´ä¸º30s server 192.168.1.101:8082 max_fails=3 fail_timeout=30s; # å…¶å®ƒæ‰€æœ‰çš„ébackupæœºå™¨downæˆ–è€…å¿™çš„æ—¶å€™ï¼Œè¯·æ±‚backupæœºå™¨ server 192.168.1.101:8083 backup; # è¿æ¥åˆ°nginxè´Ÿè½½å‡è¡¡å™¨çš„æœ€å¤§ keepalive 16;&#125;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"}]},{"title":"æ·±åº¦æµ‹è¯„æ¬¡ä¸–ä»£æ‰“åŒ…å·¥å…·Vite","date":"2021-06-10T04:00:00.000Z","path":"2021/06/10/Front-Package-Vite.html","text":"éšç€æˆ‘ä»¬é¡¹ç›®ä»£ç æ¨¡å—è¶Šæ¥è¶Šå¤šï¼Œæ‰“åŒ…å’Œå¯åŠ¨è°ƒè¯•æœåŠ¡å™¨æ‰€éœ€è¦çš„æ—¶é—´ä¹Ÿå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼ŒViteæ˜¯å°¤å¤§å¤§åœ¨æ¨å‡ºVue3æ—¶é¡ºå¸¦æ¨å‡ºå‡çº§çš„ä¸€ä¸ªwebæ„å»ºå·¥å…·ï¼Œæ—¨åœ¨è§£å†³æ„å»ºæ…¢çš„é—®é¢˜ï¼Œé‚£æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹ï¼Œå®ƒæ„å»ºæœ‰å¤šå¿«ä»¥åŠæ˜¯å¦‚ä½•æ„å»ºçš„ã€‚ ä»‹ç» Viteå¯¹å…¶è‡ªèº«çš„å®šä¹‰ä¸ºï¼š ä¸‹ä¸€ä»£å‰ç«¯å¼€å‘ä¸æ„å»ºå·¥å…· åœ¨æ·±å…¥å¯¹æ¯”Webpackã€Parcelã€Rollupæ‰“åŒ…å·¥å…·çš„ä¸åŒä¸€ç« ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«è¯¦ç»†çš„å¯¹æ¯”äº†Rollupã€Parcelå’ŒWebpackä¹‹é—´çš„å¼‚åŒï¼Œä¹Ÿåˆ†æäº†æ¯ä¸ªæ‰“åŒ…å·¥å…·ä½¿ç”¨çš„åœºæ™¯ï¼›é‚£ä¹ˆViteä½œä¸ºæ¬¡æ—¶ä»£çš„æ‰“åŒ…å·¥å…·ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹å®ƒçš„ä¼˜ç‚¹ï¼š æé€Ÿçš„æœåŠ¡å¯åŠ¨ï¼šä½¿ç”¨åŸç”Ÿ ESM æ–‡ä»¶ï¼Œæ— éœ€æ‰“åŒ…! è½»é‡å¿«é€Ÿçš„çƒ­é‡è½½ï¼šæ— è®ºåº”ç”¨ç¨‹åºå¤§å°å¦‚ä½•ï¼Œéƒ½å§‹ç»ˆæå¿«çš„æ¨¡å—çƒ­é‡è½½ï¼ˆHMRï¼‰ ä¸°å¯Œçš„åŠŸèƒ½ï¼šå¯¹ TypeScriptã€JSXã€CSS ç­‰æ”¯æŒå¼€ç®±å³ç”¨ã€‚ ä¼˜åŒ–çš„æ„å»ºï¼šå¯é€‰ â€œå¤šé¡µåº”ç”¨â€ æˆ– â€œåº“â€ æ¨¡å¼çš„é¢„é…ç½® Rollup æ„å»º é€šç”¨çš„æ’ä»¶ï¼šåœ¨å¼€å‘å’Œæ„å»ºä¹‹é—´å…±äº« Rollup-superset æ’ä»¶æ¥å£ã€‚ å®Œå…¨ç±»å‹åŒ–çš„APIï¼šçµæ´»çš„ API å’Œå®Œæ•´ TypeScript ç±»å‹ã€‚ æˆ‘ä»¬çœ‹åˆ°Viteä¸»æ‰“çš„ç‰¹ç‚¹å°±æ˜¯æé€ŸæœåŠ¡å¯åŠ¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—ï¼šå¿«ï¼ä¿—è¯è¯´å¾—å¥½ï¼Œå¤©ä¸‹æ­¦åŠŸï¼Œæ— åšä¸æ‘§ï¼Œå”¯å¿«ä¸ç ´ï¼›æˆ‘ä»¬å…ˆæ¥æ­å»ºç¬¬ä¸€ä¸ªé¡¹ç›®çœ‹ä¸‹ï¼Œé€šè¿‡--templateæ¥æŒ‡å®šé¢„è®¾çš„æ¨¡æ¿ï¼š 12345# npm 6.xnpm init @vitejs/app vite-vue-app --template vue# npm 7+, éœ€è¦é¢å¤–çš„åŒæ¨ªçº¿ï¼šnpm init @vitejs/app vite-vue-app -- --template vue Viteè¿˜æ”¯æŒä»¥ä¸‹æ¨¡æ¿é¢„è®¾ï¼š vanilla vue vue-ts react react-ts preact preact-ts lit-element lit-element-ts æ¥ç€æˆ‘ä»¬è¿è¡Œnpm run devæˆ–è€…yarn devæ¥å¯åŠ¨æœåŠ¡å™¨ï¼Œå¯ä»¥çœ‹åˆ°æœåŠ¡å™¨å¾ˆå¿«å°±å¯åŠ¨äº†ï¼Œä¸åˆ°400æ¯«ç§’ï¼š Vueé¢„è®¾æ¨¡æ¿çš„é¡¹ç›®ç»“æ„å¤§æ¦‚å¦‚ä¸‹ï¼š å¯ä»¥å‘ç°Vueé¢„è®¾æ¨¡æ¿çš„ç›®å½•ç»“æ„å’Œvue-cliå¾ˆç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯index.htmlæ–‡ä»¶çš„ä½ç½®å’Œé…ç½®æ–‡ä»¶ï¼Œviteæ˜¯vite.config.jsï¼Œè€Œä¸æ˜¯vue.config.jsã€‚ æœ€åå°±æ˜¯æˆ‘ä»¬çš„package.jsonï¼Œæ¥çœ‹ä¸‹viteéœ€è¦å“ªäº›ä¾èµ–ï¼š 1234567891011121314151617&#123; &quot;name&quot;: &quot;vite-vue-app&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;scripts&quot;: &#123; &quot;dev&quot;: &quot;vite&quot;, &quot;build&quot;: &quot;vite build&quot;, &quot;serve&quot;: &quot;vite preview&quot; &#125;, &quot;dependencies&quot;: &#123; &quot;vue&quot;: &quot;^3.0.5&quot; &#125;, &quot;devDependencies&quot;: &#123; &quot;@vitejs/plugin-vue&quot;: &quot;^1.2.1&quot;, &quot;@vue/compiler-sfc&quot;: &quot;^3.0.5&quot;, &quot;vite&quot;: &quot;^2.1.5&quot; &#125;&#125; å¯ä»¥çœ‹åˆ°Viteçš„ä¾èµ–éå¸¸ç®€å•ï¼Œé»˜è®¤æ”¯æŒVue3.0ï¼Œ@vitejs/plugin-vueå’Œ@vue/compiler-sfcéƒ½æ˜¯Vue3.0çš„ç¼–è¯‘æ’ä»¶ï¼›å¦‚æœæƒ³è¦æ”¯æŒVue2.xï¼Œéœ€è¦å®‰è£…vite-plugin-vue2æ’ä»¶ã€‚ åŸç”ŸESæ¨¡å— æˆ‘ä»¬çŸ¥é“vue-cliçš„é¡µé¢æ¨¡æ¿æ˜¯åœ¨/public/ç›®å½•ä¸‹ï¼Œé‚£ä¹ˆæ¥çœ‹ä¸‹viteæ ¹ç›®å½•ä¸‹index.htmlæœ‰ä»€ä¹ˆä¸åŒçš„åœ°æ–¹ï¼š 12345678910111213&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot; /&gt; &lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot; /&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt; &lt;title&gt;Vite App&lt;/title&gt; &lt;/head&gt; &lt;body&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; æˆ‘ä»¬å‘ç°è¿™é‡Œå¤šå¼•ç”¨äº†ä¸€ä¸ªmain.jsï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€ä¸ªtype=&quot;module&quot;å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ‘ä»¬éƒ½çŸ¥é“æˆ‘ä»¬ä»£ç ä¸­å¼•ç”¨çš„ESæ¨¡å—å¿…é¡»è¦é€šè¿‡æ‰“åŒ…å·¥å…·æ¯”å¦‚webpackç­‰è¿›è¡Œå¤„ç†åæ‰èƒ½åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œä½¿ç”¨ï¼›ä½†æ˜¯ä¸€äº›ä¸»æµæµè§ˆå™¨ï¼ˆChromeã€Edgeã€Safariã€Firefoxç­‰ï¼‰éƒ½åœ¨å°è¯•åŸç”Ÿæ”¯æŒESæ¨¡å—ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸»è¦çš„æ–°ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨æµè§ˆå™¨é‡Œå°±èƒ½ç›´æ¥ä½¿ç”¨ESçš„æ¨¡å—ï¼Œä¸è¿‡è®©æˆ‘ä»¬æ¥çœ‹ä¸‹æµè§ˆå™¨å¯¹è¿™ä¸ªæ–°ç‰¹æ€§çš„æ”¯æŒæƒ…å†µï¼š æˆ‘ä»¬å¯ä»¥å†™ä¸ªdemoåœ¨æµè§ˆå™¨ä¸Šè¿›è¡Œæµ‹è¯•ï¼š 1234567891011//count.jsexport function add(num1, num2)&#123; return num1 + num2&#125;export function sub(num1, num2)&#123; return num1 + num2&#125;//index.jsimport &#123; add, sub &#125; from &#x27;./count.js&#x27;console.log(add(1, 3))console.log(sub(4, 2)) æˆ‘ä»¬å…ˆå®šä¹‰å¥½esæ¨¡å—ï¼Œç„¶åéœ€è¦é€šè¿‡scriptçš„æ–¹å¼è¿›è¡Œå¼•ç”¨ï¼š 123456789101112&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;script type=&quot;module&quot; src=&quot;/static/js/count.js&quot;&gt;&lt;/script&gt; &lt;script type=&quot;module&quot; src=&quot;/static/js/index.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åŸç”Ÿeså’Œæ™®é€šjsè„šæœ¬æœ‰å†™ä¸åŒï¼š es moduleé»˜è®¤ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ es moduleæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œä½¿ç”¨varå¹¶ä¸ä¼šåˆ›å»ºå…¨å±€å˜é‡ exportå’Œimportå…³é”®å­—ä»…å¯åœ¨es moduleä¸­ä½¿ç”¨ es moduleåªä¼šè¢«æµè§ˆå™¨è§£æå¹¶æ‰§è¡Œä¸€æ¬¡ï¼Œæ™®é€šjsè„šæœ¬æ¯æ¬¡å¼•å…¥éƒ½ä¼šè§£ææ‰§è¡Œ es moduleæœ‰è·¨åŸŸé™åˆ¶ æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œjsçš„åŠ è½½è§£æé»˜è®¤æ˜¯ä¼šé˜»å¡æµè§ˆå™¨çš„ï¼Œå› æ­¤scriptæ ‡ç­¾ä¸€èˆ¬éƒ½æ”¾åœ¨é¡µé¢åº•éƒ¨ï¼›ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç»™scriptåŠ ä¸Šdeferæ¥è®©jså¹¶å‘åŠ è½½æ‰§è¡Œï¼š æˆ‘ä»¬å‘ç°åŸç”ŸESæ¨¡å—å’ŒåŠ ä¸Šdeferå±æ€§çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼›viteåˆ©ç”¨äº†æµè§ˆå™¨å¯¹åŸç”ŸESæ¨¡å—çš„æ”¯æŒï¼Œè·³è¿‡æ‰“åŒ…ï¼ˆno bundleï¼‰è¿‡ç¨‹ï¼Œå°†ESæ¨¡å—è§£æç¼–è¯‘åç›´æ¥æä¾›ç»™æµè§ˆå™¨ï¼›åªåœ¨å¿…è¦è¯·æ±‚æ—¶è¿›è¡Œä»£ç è½¬æ¢ï¼Œè¿™æ ·è‡ªç„¶å°±èŠ‚çœäº†è´¹æ—¶è´¹åŠ›çš„æ‰“åŒ…æ—¶é—´ã€‚ ä¾‹å¦‚æˆ‘ä»¬åœ¨è¯·æ±‚é¦–é¡µhome.vueæ¨¡å—æ—¶ï¼Œåªæœ‰åœ¨æµè§ˆå™¨è¯·æ±‚home.vueæ‰å°†vueæ–‡ä»¶çš„templateç­‰è§£æç¼–è¯‘ï¼Œè§£ææˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œçš„jsè¿”å›ã€‚ æˆ‘ä»¬çœ‹ä¸‹å®˜æ–¹ç»™å‡ºçš„ä¼ ç»Ÿæ‰“åŒ…å·¥å…·çš„æ‰“åŒ…è¿‡ç¨‹ï¼Œä»å…¥å£ä¸€ç›´è§£æåºå¤§çš„æ¨¡å—ï¼Œç„¶åæ‰“åŒ…æˆbundleï¼Œæœ€åæ‰èƒ½å¯åŠ¨æœåŠ¡å™¨ï¼š ä½†æ˜¯Viteå¯ä»¥ç›´æ¥å¯åŠ¨æœåŠ¡å™¨ï¼ŒåŠ è½½å…¥å£çš„æ–‡ä»¶ï¼š ç°è‰²éƒ¨åˆ†çš„æ˜¯æš‚æ—¶æ²¡æœ‰ç”¨åˆ°çš„æ¨¡å—ï¼Œåˆå§‹åŒ–ä¸ä¼šå‚ä¸æ„å»ºï¼Œéšç€é¡¹ç›®çš„è·¯ç”±è¶Šæ¥è¶Šå¤æ‚ï¼Œæ„å»ºé€Ÿåº¦ä¹Ÿä¸ä¼šå˜æ…¢ã€‚ ä¾èµ–é¢„æ„å»º å½“æˆ‘ä»¬é¦–æ¬¡è¿è¡Œé¡¹ç›®æ—¶å¯èƒ½ä¼šå‘ç°ä¸‹é¢çš„æç¤ºå°å­—ï¼š æˆ‘ä»¬ä¸Šé¢è¯´è¿‡Viteæ˜¯ä¸ä¾èµ–æ„å»ºçš„ï¼Œé‚£è¿™é‡Œä¸ºä»€ä¹ˆè¿˜éœ€è¦é¢„æ„å»ºå‘¢ï¼Ÿè¿™é‡Œå®˜æ–¹ç»™å‡ºäº†ä¸¤ä¸ªåŸå› ï¼š å…¼å®¹CommonJSå’ŒUMDï¼šç”±äºViteæœåŠ¡å™¨ä¼šå°†æ‰€æœ‰çš„æ¨¡å—å½“ä½œåŸç”ŸESæ¨¡å—åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ï¼Œå› æ­¤æœ‰ä¸€äº›ä¾èµ–ä½¿ç”¨çš„CommonJSå’ŒUMDè§„èŒƒéœ€è¦è¿›è¡Œè½¬æ¢ æå‡æ€§èƒ½ï¼šæœ‰äº›ä¾èµ–åŒ…å°†å†…éƒ¨çš„ESMæ¨¡å—æ‹†åˆ†å¤šä¸ªï¼Œé¢„æ„å»ºå°†å¤šä¸ªæ¨¡å—è½¬æ¢ä¸ºå•ä¸ªæ¨¡å—ï¼Œæå‡é¡µé¢åŠ è½½æ€§èƒ½ å…¼å®¹CommonJSå’ŒUMDä¸ç”¨å¤šè¯´ï¼Œå°±æ˜¯ä¸ºäº†æ¨¡å—å¼•ç”¨è§„èŒƒçš„ç»Ÿä¸€ï¼Œå¯¹æ¨¡å—åŒ–è§„èŒƒä¸äº†è§£çš„ç«¥é‹å¯ä»¥çœ‹è¿™ç¯‡æ·±å…¥å­¦ä¹ CommonJSå’ŒES6æ¨¡å—åŒ–è§„èŒƒï¼›æå‡æ€§èƒ½å®˜æ–¹ç»™äº†ä¸€ä¸ªç°æˆçš„æ¡ˆä¾‹å°±æ˜¯lodash-esä¾èµ–ï¼Œå½“æˆ‘ä»¬import &#123; chunk &#125; from &quot;lodash-es&quot;ï¼Œç”±äºå†…éƒ¨æœ‰600+ä¸ªæ¨¡å—ï¼Œç›¸äº’å¯¼å…¥ï¼Œå› æ­¤æµè§ˆå™¨ä¼šå»åŒæ—¶åŠ è½½600+ä¸ªhttpè¯·æ±‚ï¼Œè™½ç„¶æ¯ä¸ªè¯·æ±‚åªæœ‰1~2kbï¼Œä½†æ˜¯å¤§é‡çš„è¯·æ±‚ä¹Ÿä¼šé€ æˆç½‘ç»œå µå¡ï¼›æˆ‘ä»¬å¯ä»¥å°†lodash-eså‰”é™¤é¢„æ„å»ºæ¥çœ‹ä¸‹æ•ˆæœï¼š 123456import &#123; defineConfig &#125; from &quot;vite&quot;;export default defineConfig(&#123; optimizeDeps: &#123; exclude: [&quot;lodash-es&quot;], &#125;,&#125;); æˆ‘ä»¬åœ¨vite.config.jsä¸­ä¿®æ”¹optimizeDeps.excludeï¼Œç„¶åå°±èƒ½åœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°æ•ˆæœï¼š æˆ‘ä»¬çœ‹åˆ°è™½ç„¶è¯·æ±‚æ•°æ®ä¸å¤šï¼Œä½†æ˜¯æ¶ä¸ä½600+å¤§é‡çš„è¯·æ±‚ï¼Œæ­£æ‰€è°“ä¹±æ‹³æ‰“æ­»è€å¸ˆå‚…ï¼›å¦‚æœé€šè¿‡é¢„æ„å»ºå°†è¿™äº›æ¨¡å—éƒ½ç»Ÿä¸€åˆ°ä¸€èµ·ï¼Œé‚£ä¹ˆé€Ÿåº¦å¿«äº†ä¸æ˜¯ä¸€ç‚¹ç‚¹ï¼›é‚£ä¹ˆä»€ä¹ˆæ ·çš„æ¨¡å—ä¼šè¿›è¡Œé¢„æ„å»ºå‘¢ï¼Ÿ é»˜è®¤æƒ…å†µä¸‹ï¼ŒViteä¼šå°†package.jsonä¸­ç”Ÿäº§ä¾èµ–dependenciesçš„éƒ¨åˆ†å¯ç”¨ä¾èµ–é¢„ç¼–è¯‘ï¼Œå³ä¼šå…ˆå¯¹è¯¥ä¾èµ–è¿›è¡Œç¼–è¯‘ï¼Œç„¶åå°†ç¼–è¯‘åçš„æ–‡ä»¶ç¼“å­˜åœ¨å†…å­˜ä¸­ï¼ˆnode_modules/.viteæ–‡ä»¶ä¸‹ï¼‰ï¼Œåœ¨å¯åŠ¨DevServeræ—¶ç›´æ¥è¯·æ±‚è¯¥ç¼“å­˜å†…å®¹ ç¯å¢ƒå˜é‡ å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦å¯¹æ‰“åŒ…çš„å˜é‡æ ¹æ®ç¯å¢ƒè¿›è¡ŒåŒºåˆ†ï¼Œæ¯”å¦‚è¯·æ±‚çš„åŸŸåç­‰ï¼Œå’Œvue-cliä¸€æ ·ï¼Œviteä¹Ÿå¯ä»¥åŒºåˆ†æ‰“åŒ…ç¯å¢ƒï¼Œä¸è¿‡å®ƒçš„å˜é‡æ¯”è¾ƒç‰¹æ®Šï¼›æˆ‘ä»¬çŸ¥é“å®ƒå¹¶ä¸æ˜¯é€šè¿‡webpackçš„DefinePluginæ–¹å¼æ¥å®šä¹‰å…¨å±€å˜é‡ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡process.envæ¥è·å–ï¼›è€Œæ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„import.meta.envå¯¹è±¡æ¥æš´éœ²ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸€äº›å…¬å…±çš„å†…åœ¨å˜é‡ï¼š import.meta.env.MODEï¼šè¿è¡Œæ¨¡å¼ï¼Œé€šè¿‡--modeæ¥è®¾ç½® import.meta.env.BASE_URLï¼šéƒ¨ç½²çš„å…¬å…±åŸºç¡€è·¯å¾„ï¼Œç”±configæ–‡ä»¶ä¸­çš„baseç¡®å®š import.meta.env.PRODï¼šbooleanå€¼ï¼Œæ˜¯å¦è¿è¡Œåœ¨ç”Ÿäº§ç¯å¢ƒ import.meta.env.DEVï¼šbooleanå€¼ï¼Œæ˜¯å¦è¿è¡Œåœ¨å¼€å‘ç¯å¢ƒ (æ°¸è¿œä¸import.meta.env.PRODç›¸å) Viteæ”¯æŒdotenvï¼Œå¯ä»¥ä»é¡¹ç›®æ ¹ç›®å½•çš„æ–‡ä»¶åŠ è½½é¢å¤–çš„ç¯å¢ƒå˜é‡ï¼š 123.env # æ‰€æœ‰ç¯å¢ƒéƒ½åŠ è½½.env.test # æµ‹è¯•ç¯å¢ƒ.env.prod # æ­£å¼ç¯å¢ƒ åŠ è½½çš„å˜é‡ä¹Ÿä¼šé€šè¿‡import.meta.envæš´éœ²ç»™å®¢æˆ·ç«¯ä»£ç ï¼Œä¸è¿‡ä¸ºäº†é˜²æ­¢å˜é‡æ³„éœ²ï¼Œåªæœ‰VITE_ä¸ºå‰ç¼€çš„å˜é‡æ‰ä¼šæš´éœ²ã€‚ è¿™é‡Œå¼•å…¥ä¸€ä¸ªæ¨¡å¼çš„æ¦‚å¿µï¼Œé»˜è®¤æƒ…å†µä¸‹serveå‘½ä»¤è¿è¡Œå¼€å‘æ¨¡å¼ï¼ˆdevelopmentï¼‰ï¼Œè€Œbuildå‘½ä»¤ä¼šè¿è¡Œç”Ÿäº§æ¨¡å¼ï¼ˆproductionï¼‰ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡envæ–‡ä»¶å®šä¹‰è‡ªå·±éœ€è¦çš„æ¨¡å¼ï¼›å¯ä»¥é€šè¿‡--modeé€‰é¡¹è¦†ç›–å‘½ä»¤ä½¿ç”¨çš„é»˜è®¤æ¨¡å¼ã€‚ æ¯”å¦‚æˆ‘ä»¬é¡¹ç›®åœ¨æµ‹è¯•å’Œæ­£å¼ç¯å¢ƒä¹‹å¤–å¯èƒ½è¿˜ä¼šè®¾ç½®ä¸€ä¸ªé¢„å‘ç¯å¢ƒï¼Œå°†ä¸€äº›çº¿ä¸Šçš„æ•°æ®æ‹·è´è¿‡æ¥ä»¥ä¾¿æ¨¡æ‹ŸçœŸå®åœºæ™¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªstagingæ¨¡å¼ï¼š 1vite build --mode staging æˆ‘ä»¬å¯ä»¥å°†ç”¨åˆ°çš„ç¯å¢ƒé…ç½®æ”¾å…¥.env.stagingæ–‡ä»¶ï¼š 1234# .env.stagingNODE_ENV=productionVITE_APP_TITLE=My App (staging)VITE_HOST=https://xieyufei.com è¿™æ ·stagingæ¨¡å¼å°±ä¼šæ‰“åŒ…å’Œç”Ÿäº§ç¯å¢ƒç±»ä¼¼çš„ä»£ç ï¼Œä½†æ˜¯ç¯å¢ƒå˜é‡å´æ˜¯stagingæ¨¡å¼çš„ï¼Œæˆ‘ä»¬å°±æˆåŠŸæ–°å¢äº†ä¸€ç§æ¨¡å¼ã€‚ viteé…ç½® å½“æˆ‘ä»¬è¿è¡Œviteæ—¶ï¼Œé»˜è®¤ä¼šè§£æé¡¹ç›®ç›®å½•ä¸‹çš„vite.config.jsåœ°é…ç½®æ–‡ä»¶ï¼ŒåŸºç¡€çš„é…ç½®æ–‡ä»¶å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ 1234//vite.config.jsexport default &#123; // é…ç½®&#125; ä½†æ˜¯æˆ‘ä»¬ä¸€èˆ¬ä¼šå¼•å…¥defineConfigå¸®æ‰‹å‡½æ•°ï¼Œè¿™æ ·åœ¨æ²¡æœ‰jsdocçš„é…åˆä¸‹ï¼Œä¹Ÿèƒ½è·å–ç±»å‹æç¤ºï¼š 1234import &#123; defineConfig &#125; from &#x27;vite&#x27;export default defineConfig(&#123; // é…ç½®&#125;) å¦‚æœæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶è¿˜éœ€è¦æ ¹æ®ç¯å¢ƒæˆ–è€…æ¨¡å¼çš„çš„ä¸åŒæ¥ä¼ é€’ä¸åŒçš„æ’ä»¶æˆ–é…ç½®ç­‰ï¼Œå¯ä»¥é€šè¿‡å¯¼å‡ºä¸€ä¸ªå‡½æ•°çš„æ–¹å¼ï¼š 1234567891011export default (&#123; command, mode &#125;) =&gt; &#123; if (command === &#x27;serve&#x27;) &#123; return &#123; // serve ç‹¬æœ‰é…ç½® &#125; &#125; else &#123; return &#123; // build ç‹¬æœ‰é…ç½® &#125; &#125;&#125; cssé¢„å¤„ç† å¯¹cssé¢„å¤„ç†ï¼ŒViteæä¾›äº†å¼€ç®±æ”¯æŒï¼Œæˆ‘ä»¬åªè¦å®‰è£…å¯¹åº”çš„é¢„å¤„ç†ä¾èµ–ï¼Œæ— éœ€é…ç½®ï¼Œå³å¯è¿›è¡Œä½¿ç”¨ï¼š 12345678# .scss and .sassnpm install -D sass# .lessnpm install -D less# .styl and .stylusnpm install -D stylus è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡&lt;style lang=&quot;sass&quot;&gt;è‡ªåŠ¨å¼€å¯é¢„å¤„ç†äº†ï¼›é’ˆå¯¹postcssçš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥é…ç½®postcss.config.jsï¼Œå®ƒä¼šè‡ªåŠ¨åº”ç”¨æ‰€æœ‰çš„cssï¼Œä¸è¿‡ä¹Ÿéœ€è¦å®‰è£…å¯¹åº”çš„æ’ä»¶ã€‚ resolveè§£æ å’Œwebpackç±»ä¼¼ï¼Œresolveå­—æ®µç”¨æ¥è¡¨ç¤ºå¦‚ä½•æ¥è§£ææ¨¡å—ï¼Œé¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹å¸¸ç”¨çš„åˆ«åè®¾ç½®aliasï¼š 1234567export default defineConfig(&#123; resolve: &#123; alias: &#123; &quot;@&quot;: path.resolve(__dirname, &quot;./src&quot;), &#125;, &#125;,&#125;); è¿™æ ·æˆ‘ä»¬å°±èƒ½ç”¨@æ›¿æ¢ç›¸å¯¹è·¯å¾„äº†ï¼Œå¯ä»¥é€šè¿‡@æ¥å¼•å…¥ç»„ä»¶ï¼š 1import HelloWorld from &#x27;@/components/HelloWorld.vue&#x27; è¿˜æœ‰mainFieldsï¼Œä¸»å­—æ®µè§£æï¼Œæ ‡å¿—viteé»˜è®¤ä»æ¨¡å—çš„package.jsonä¸­å“ªä¸ªå­—æ®µå¼•å…¥æ¨¡å—ï¼Œé»˜è®¤é…ç½®æ˜¯ï¼š 12345export default defineConfig(&#123; resolve: &#123; mainFields: [&#x27;module&#x27;, &#x27;jsnext:main&#x27;, &#x27;jsnext&#x27;] &#125;,&#125;); serveræœåŠ¡å™¨ Viteæä¾›äº†serveré€‰é¡¹æ¥é…ç½®å¼€å‘æœåŠ¡å™¨ï¼Œé»˜è®¤æƒ…å†µåªå…è®¸localhostè®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šserver.hostæ¥è®©å±€åŸŸç½‘ä¸»æœºä¹Ÿèƒ½è®¿é—®ï¼š 123456export default defineConfig(&#123; server: &#123; host: &quot;0.0.0.0&quot;, port: 3001, &#125;,&#125;); å¦‚æœæˆ‘ä»¬æƒ³è®©æœåŠ¡å™¨å¯åŠ¨æ—¶è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€åº”ç”¨ç¨‹åºï¼Œå¯ä»¥é…ç½®server.openï¼Œé…ç½®ç±»å‹boolean|stringï¼Œé…ç½®ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œä¼šè¢«ç”¨ä½œ URL çš„è·¯å¾„åï¼š 12345export default defineConfig(&#123; server: &#123; open: &#x27;/other-page&#x27; &#125;,&#125;); å’Œwebpackä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡server.proxyæ¥ä¸ºå¼€å‘æœåŠ¡å™¨é…ç½®ä»£ç†ï¼Œå¦‚æœkeyå€¼ä»¥^å¼€å¤´ï¼Œåˆ™ä¼šè¢«è§£æä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼š 123456789101112131415161718export default defineConfig(&#123; server: &#123; // å­—ç¬¦ä¸²ç®€å†™å†™æ³• &#x27;/foo&#x27;: &#x27;http://localhost:4567/foo&#x27;, // é€‰é¡¹å†™æ³• &#x27;/api&#x27;: &#123; target: &#x27;https://xieyufei.com&#x27;, changeOrigin: true, rewrite: (path) =&gt; path.replace(/^\\/api/, &#x27;&#x27;) &#125;, // æ­£åˆ™è¡¨è¾¾å¼å†™æ³• &#x27;^/fallback/.*&#x27;: &#123; target: &#x27;http://jsonplaceholder.typicode.com&#x27;, changeOrigin: true, rewrite: (path) =&gt; path.replace(/^\\/fallback/, &#x27;&#x27;) &#125; &#125;,&#125;); æŒ‰éœ€å¼•å…¥ æˆ‘ä»¬åœ¨ä½¿ç”¨elementæ—¶ï¼Œç»å¸¸ä¼šéœ€è¦æŒ‰éœ€å¼•å…¥ç»„ä»¶ï¼Œåœ¨vue-cliä¸­ä½¿ç”¨çš„æ˜¯babelçš„ä¸€ä¸ªæ’ä»¶babel-plugin-componentï¼›viteæœ‰è‡ªå·±çš„æŒ‰éœ€å¼•å…¥æ’ä»¶vite-plugin-style-importï¼Œé¦–å…ˆæˆ‘ä»¬å®‰è£…ä¸€ä¸‹ï¼š 1npm install vite-plugin-style-import -D ç„¶ååœ¨vite.config.jsä¸­è¿›è¡Œé…ç½®ï¼š 123456789101112131415161718192021import styleImport from &quot;vite-plugin-style-import&quot;;export default defineConfig(&#123; plugins: [ vue(), styleImport(&#123; libs: [ &#123; libraryName: &quot;element-plus&quot;, esModule: true, ensureStyleFile: true, resolveStyle: (name) =&gt; &#123; return `element-plus/lib/theme-chalk/$&#123;name&#125;.css`; &#125;, resolveComponent: (name) =&gt; &#123; return `element-plus/lib/$&#123;name&#125;`; &#125;, &#125;, ], &#125;), ],&#125;); æ¥ä¸‹æ¥å¦‚æœæˆ‘ä»¬åªå¸Œæœ›å¼•å…¥éƒ¨åˆ†ç»„ä»¶ï¼Œå°±å¯ä»¥åœ¨main.jsä¸­åŠ å…¥ï¼š 12345import &#123; ElButton, ElSelect &#125; from &#x27;element-plus&#x27;;const app = createApp(App)app.component(ElButton.name, ElButton);app.component(ElSelect.name, ElSelect);","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"}]},{"title":"å…¨é¢æ€»ç»“Vue3.0çš„æ–°ç‰¹æ€§","date":"2021-05-10T04:00:00.000Z","path":"2021/05/10/Vue3-Feature.html","text":"Vue3.0ä»20å¹´ä¹æœˆå‘å¸ƒç¬¬ä¸€ä¸ªOne Pieceç‰ˆæœ¬ï¼Œåˆ°ç°åœ¨ä¸€ç›´åœ¨æ›´æ–°ä¼˜åŒ–ï¼›é™¤äº†æœåŠ¡ç«¯æ¸²æŸ“çš„å·¥ä½œï¼Œå…¶ä»–å·¥ä½œå·²ç»å¤§éƒ¨åˆ†å®Œæˆäº†ï¼Œä¸­æ–‡ç‰ˆçš„å®˜æ–¹æ–‡æ¡£ä¹Ÿå·²ç»æ”¾å‡ºï¼›é‚£ä¹ˆä½œä¸ºç»ˆç«¯ç”¨æˆ·çš„æˆ‘ä»¬æ¥çœ‹ä¸‹Vue3æ–°å¢äº†å“ªäº›åŠŸèƒ½å’Œç‰¹æ€§ã€‚ å°¤å¤§å¤§åœ¨Bç«™ç›´æ’­æ—¶åˆ†äº«äº†Vue3.0çš„å‡ ä¸ªäº®ç‚¹ï¼š Performanceï¼šæ€§èƒ½ä¼˜åŒ– Tree-shaking supportï¼šæ”¯æŒæ‘‡æ ‘ä¼˜åŒ– Composition APIï¼šç»„åˆAPI Fragmentï¼ŒTeleportï¼ŒSuspenseï¼šæ–°å¢çš„ç»„ä»¶ Better TypeScript supportï¼šæ›´å¥½çš„TypeScriptæ”¯æŒ Custom Renderer APIï¼šè‡ªå®šä¹‰æ¸²æŸ“å™¨ åœ¨æ€§èƒ½æ–¹é¢ï¼Œå¯¹æ¯”Vue2.xï¼Œæ€§èƒ½æå‡äº†1.3~2å€å·¦å³ï¼›æ‰“åŒ…åçš„ä½“ç§¯ä¹Ÿæ›´å°äº†ï¼Œå¦‚æœå•å•å†™ä¸€ä¸ªHelloWorldè¿›è¡Œæ‰“åŒ…ï¼Œåªæœ‰13.5kbï¼›åŠ ä¸Šæ‰€æœ‰è¿è¡Œæ—¶ç‰¹æ€§ï¼Œä¹Ÿä¸è¿‡22.5kbã€‚ é‚£ä¹ˆä½œä¸ºç»ˆç«¯ç”¨æˆ·çš„æˆ‘ä»¬ï¼Œåœ¨å¼€å‘æ—¶ï¼Œå’ŒVue2.xæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼ŸTalk is cheapï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥çœ‹ä»£ç ã€‚ Tree-shaking Vue3æœ€é‡è¦çš„å˜åŒ–ä¹‹ä¸€å°±æ˜¯å¼•å…¥äº†Tree-Shakingï¼ŒTree-Shakingå¸¦æ¥çš„bundleä½“ç§¯æ›´å°æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚åœ¨2.xç‰ˆæœ¬ä¸­ï¼Œå¾ˆå¤šå‡½æ•°éƒ½æŒ‚è½½åœ¨å…¨å±€Vueå¯¹è±¡ä¸Šï¼Œæ¯”å¦‚$nextTickã€$setç­‰å‡½æ•°ï¼Œå› æ­¤è™½ç„¶æˆ‘ä»¬å¯èƒ½ç”¨ä¸åˆ°ï¼Œä½†æ‰“åŒ…æ—¶åªè¦å¼•å…¥äº†vueè¿™äº›å…¨å±€å‡½æ•°ä»ç„¶ä¼šæ‰“åŒ…è¿›bundleä¸­ã€‚ è€Œåœ¨Vue3ä¸­ï¼Œæ‰€æœ‰çš„APIéƒ½é€šè¿‡ES6æ¨¡å—åŒ–çš„æ–¹å¼å¼•å…¥ï¼Œè¿™æ ·å°±èƒ½è®©webpackæˆ–rollupç­‰æ‰“åŒ…å·¥å…·åœ¨æ‰“åŒ…æ—¶å¯¹æ²¡æœ‰ç”¨åˆ°APIè¿›è¡Œå‰”é™¤ï¼Œæœ€å°åŒ–bundleä½“ç§¯ï¼›æˆ‘ä»¬åœ¨main.jsä¸­å°±èƒ½å‘ç°è¿™æ ·çš„å˜åŒ–ï¼š 1234567//src/main.jsimport &#123; createApp &#125; from &quot;vue&quot;;import App from &quot;./App.vue&quot;;import router from &quot;./router&quot;;const app = createApp(App);app.use(router).mount(&quot;#app&quot;); åˆ›å»ºappå®ä¾‹æ–¹å¼ä»åŸæ¥çš„new Vue()å˜ä¸ºé€šè¿‡createAppå‡½æ•°è¿›è¡Œåˆ›å»ºï¼›ä¸è¿‡ä¸€äº›æ ¸å¿ƒçš„åŠŸèƒ½æ¯”å¦‚virtualDOMæ›´æ–°ç®—æ³•å’Œå“åº”å¼ç³»ç»Ÿæ— è®ºå¦‚ä½•éƒ½æ˜¯ä¼šè¢«æ‰“åŒ…çš„ï¼›è¿™æ ·å¸¦æ¥çš„å˜åŒ–å°±æ˜¯ä»¥å‰åœ¨å…¨å±€é…ç½®çš„ç»„ä»¶ï¼ˆVue.componentï¼‰ã€æŒ‡ä»¤ï¼ˆVue.directiveï¼‰ã€æ··å…¥ï¼ˆVue.mixinï¼‰å’Œæ’ä»¶ï¼ˆVue.useï¼‰ç­‰å˜ä¸ºç›´æ¥æŒ‚è½½åœ¨å®ä¾‹ä¸Šçš„æ–¹æ³•ï¼›æˆ‘ä»¬é€šè¿‡åˆ›å»ºçš„å®ä¾‹æ¥è°ƒç”¨ï¼Œå¸¦æ¥çš„å¥½å¤„å°±æ˜¯ä¸€ä¸ªåº”ç”¨å¯ä»¥æœ‰å¤šä¸ªVueå®ä¾‹ï¼Œä¸åŒå®ä¾‹ä¹‹é—´çš„é…ç½®ä¹Ÿä¸ä¼šç›¸äº’å½±å“ï¼š 12345const app = createApp(App)app.use(/* ... */)app.mixin(/* ... */)app.component(/* ... */)app.directive(/* ... */) å› æ­¤Vue2.xçš„ä»¥ä¸‹å…¨å±€APIä¹Ÿéœ€è¦æ”¹ä¸ºES6æ¨¡å—åŒ–å¼•å…¥ï¼š Vue.nextTick Vue.observableä¸å†æ”¯æŒï¼Œæ”¹ä¸ºreactive Vue.version Vue.compile (ä»…å…¨æ„å»º) Vue.set (ä»…å…¼å®¹æ„å»º) Vue.delete (ä»…å…¼å®¹æ„å»º) é™¤æ­¤ä¹‹å¤–ï¼Œvuexå’Œvue-routerä¹Ÿéƒ½ä½¿ç”¨äº†Tree-Shakingè¿›è¡Œäº†æ”¹è¿›ï¼Œä¸è¿‡apiçš„è¯­æ³•æ”¹åŠ¨ä¸å¤§ï¼š 12345678910111213141516//src/store/index.jsimport &#123; createStore &#125; from &quot;vuex&quot;;export default createStore(&#123; state: &#123;&#125;, mutations: &#123;&#125;, actions: &#123;&#125;, modules: &#123;&#125;,&#125;);//src/router/index.jsimport &#123; createRouter, createWebHistory &#125; from &quot;vue-router&quot;;const router = createRouter(&#123; history: createWebHistory(process.env.BASE_URL), routes,&#125;); æ›´å¤šå…³äºTree-Shakingçš„ä½¿ç”¨å¯ä»¥åœ¨Webpacké…ç½®å…¨è§£æä¸­æŸ¥çœ‹ã€‚ ç”Ÿå‘½å‘¨æœŸå‡½æ•° æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨Vue2.xä¸­æœ‰8ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š beforeCreate created beforeMount mounted beforeUpdate updated beforeDestroy destroyed åœ¨vue3ä¸­ï¼Œæ–°å¢äº†ä¸€ä¸ªsetupç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œsetupæ‰§è¡Œçš„æ—¶æœºæ˜¯åœ¨beforeCreateç”Ÿå‘½å‡½æ•°ä¹‹å‰æ‰§è¡Œï¼Œå› æ­¤åœ¨è¿™ä¸ªå‡½æ•°ä¸­æ˜¯ä¸èƒ½é€šè¿‡thisæ¥è·å–å®ä¾‹çš„ï¼›åŒæ—¶ä¸ºäº†å‘½åçš„ç»Ÿä¸€ï¼Œå°†beforeDestroyæ”¹åä¸ºbeforeUnmountï¼Œdestroyedæ”¹åä¸ºunmountedï¼Œå› æ­¤vue3æœ‰ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼š beforeCreateï¼ˆå»ºè®®ä½¿ç”¨setupä»£æ›¿ï¼‰ createdï¼ˆå»ºè®®ä½¿ç”¨setupä»£æ›¿ï¼‰ setup beforeMount mounted beforeUpdate updated beforeUnmount unmounted åŒæ—¶ï¼Œvue3æ–°å¢äº†ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°å‰åŠ onæ¥è®¿é—®ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š onBeforeMount onMounted onBeforeUpdate onUpdated onBeforeUnmount onUnmounted onErrorCaptured onRenderTracked onRenderTriggered é‚£ä¹ˆè¿™äº›é’©å­å‡½æ•°å¦‚ä½•æ¥è¿›è¡Œè°ƒç”¨å‘¢ï¼Ÿæˆ‘ä»¬åœ¨setupä¸­æŒ‚è½½ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œå½“æ‰§è¡Œåˆ°å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸæ—¶ï¼Œå°±è°ƒç”¨å¯¹åº”çš„é’©å­å‡½æ•°ï¼š 123456789101112import &#123; onBeforeMount, onMounted &#125; from &quot;vue&quot;;export default &#123; setup() &#123; console.log(&quot;----setup----&quot;); onBeforeMount(() =&gt; &#123; // beforeMountä»£ç æ‰§è¡Œ &#125;); onMounted(() =&gt; &#123; // mountedä»£ç æ‰§è¡Œ &#125;); &#125;,&#125; æ–°å¢çš„åŠŸèƒ½ è¯´å®Œç”Ÿå‘½å‘¨æœŸï¼Œä¸‹é¢å°±æ˜¯æˆ‘ä»¬æœŸå¾…çš„Vue3æ–°å¢åŠ çš„é‚£äº›åŠŸèƒ½ã€‚ å“åº”å¼API æˆ‘ä»¬åœ¨æ·±å…¥å­¦ä¹ Object.definePropertyå’ŒProxyè®²è§£è¿‡Proxyä¼˜ç‚¹ä»¥åŠVue3ä¸ºä»€ä¹ˆæ”¹ç”¨Proxyå®ç°å“åº”å¼ï¼ŒåŒæ—¶Vue3ä¹Ÿå°†ä¸€äº›å“åº”å¼çš„APIè¿›è¡ŒæŠ½ç¦»ï¼Œä»¥ä¾¿ä»£ç æ›´å¥½çš„å¤ç”¨ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨reactiveæ¥ä¸ºJSå¯¹è±¡åˆ›å»ºå“åº”å¼çŠ¶æ€ï¼š 123456import &#123; reactive, toRefs &#125; from &quot;vue&quot;;const user = reactive(&#123; name: &#x27;Vue2&#x27;, age: 18,&#125;);user.name = &#x27;Vue3&#x27; reactiveç›¸å½“äºVue2.xä¸­çš„Vue.observableã€‚ reactiveå‡½æ•°åªæ¥æ”¶objectå’Œarrayç­‰å¤æ‚æ•°æ®ç±»å‹ã€‚ å¯¹äºä¸€äº›åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚å­—ç¬¦ä¸²å’Œæ•°å€¼ç­‰ï¼Œæˆ‘ä»¬æƒ³è¦è®©å®ƒå˜æˆå“åº”å¼ï¼Œæˆ‘ä»¬å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡reactiveå‡½æ•°åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œä½†æ˜¯Vue3æä¾›äº†å¦ä¸€ä¸ªå‡½æ•°refï¼š 1234567891011121314import &#123; ref &#125; from &quot;vue&quot;;const num = ref(0);const str = ref(&quot;&quot;);const male = ref(true);num.value++;console.log(num.value);str.value = &quot;new val&quot;;console.log(str.value);male.value = false;console.log(male.value); refè¿”å›çš„å“åº”å¼å¯¹è±¡æ˜¯åªåŒ…å«ä¸€ä¸ªåä¸ºvalueå‚æ•°çš„RefImplå¯¹è±¡ï¼Œåœ¨jsä¸­è·å–å’Œä¿®æ”¹éƒ½æ˜¯é€šè¿‡å®ƒçš„valueå±æ€§ï¼›ä½†æ˜¯åœ¨æ¨¡æ¿ä¸­è¢«æ¸²æŸ“æ—¶ï¼Œè‡ªåŠ¨å±•å¼€å†…éƒ¨çš„å€¼ï¼Œå› æ­¤ä¸éœ€è¦åœ¨æ¨¡æ¿ä¸­è¿½åŠ .valueã€‚ 123456789101112131415161718&lt;template&gt; &lt;div&gt; &lt;span&gt;&#123;&#123; count &#125;&#125;&lt;/span&gt; &lt;button @click=&quot;count ++&quot;&gt;Increment count&lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import &#123; ref &#125; from &#x27;vue&#x27; export default &#123; setup() &#123; const count = ref(0) return &#123; count &#125; &#125; &#125;&lt;/script&gt; reactiveä¸»è¦è´Ÿè´£å¤æ‚æ•°æ®ç»“æ„ï¼Œè€Œrefä¸»è¦å¤„ç†åŸºæœ¬æ•°æ®ç»“æ„ï¼›ä½†æ˜¯å¾ˆå¤šç«¥é‹å°±ä¼šè¯¯è§£refåªèƒ½å¤„ç†åŸºæœ¬æ•°æ®ï¼Œrefæœ¬èº«ä¹Ÿæ˜¯èƒ½å¤„ç†å¯¹è±¡å’Œæ•°ç»„çš„ï¼š 1234567891011121314import &#123; ref &#125; from &quot;vue&quot;;const obj = ref(&#123; name: &quot;qwe&quot;, age: 1,&#125;);setTimeout(() =&gt; &#123; obj.value.name = &quot;asd&quot;;&#125;, 1000);const list = ref([1, 2, 3, 4, 6]);setTimeout(() =&gt; &#123; list.value.push(7);&#125;, 2000); å½“æˆ‘ä»¬å¤„ç†ä¸€äº›å¤§å‹å“åº”å¼å¯¹è±¡çš„propertyæ—¶ï¼Œæˆ‘ä»¬å¾ˆå¸Œæœ›ä½¿ç”¨ES6çš„è§£æ„æ¥è·å–æˆ‘ä»¬æƒ³è¦çš„å€¼ï¼š 123456789101112let book = reactive(&#123; name: &#x27;Learn Vue&#x27;, year: 2020, title: &#x27;Chapter one&#x27;&#125;)let &#123; name,&#125; = bookname = &#x27;new Learn&#x27;// Learn Vueconsole.log(book.name); ä½†æ˜¯å¾ˆé—æ†¾ï¼Œè¿™æ ·ä¼šæ¶ˆé™¤å®ƒçš„å“åº”å¼ï¼›å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å°†å“åº”å¼å¯¹è±¡è½¬æ¢ä¸ºä¸€ç»„refï¼Œè¿™äº›refå°†ä¿ç•™ä¸æºå¯¹è±¡çš„å“åº”å¼å…³è”ï¼š 1234567891011121314let book = reactive(&#123; name: &#x27;Learn Vue&#x27;, year: 2020, title: &#x27;Chapter one&#x27;&#125;)let &#123; name,&#125; = toRefs(book)// æ³¨æ„è¿™é‡Œè§£æ„å‡ºæ¥çš„nameæ˜¯refå¯¹è±¡// éœ€è¦é€šè¿‡valueæ¥å–å€¼èµ‹å€¼name.value = &#x27;new Learn&#x27;// new Learnconsole.log(book.name); å¯¹äºä¸€äº›åªè¯»æ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›é˜²æ­¢å®ƒå‘ç”Ÿä»»ä½•æ”¹å˜ï¼Œå¯ä»¥é€šè¿‡readonlyæ¥åˆ›å»ºä¸€ä¸ªåªè¯»çš„å¯¹è±¡ï¼š 12345678910import &#123; reactive, readonly &#125; from &quot;vue&quot;;let book = reactive(&#123; name: &#x27;Learn Vue&#x27;, year: 2020, title: &#x27;Chapter one&#x27;&#125;)const copy = readonly(book);//Set operation on key &quot;name&quot; failed: target is readonly.copy.name = &quot;new copy&quot;; æœ‰æ—¶æˆ‘ä»¬éœ€è¦çš„å€¼ä¾èµ–äºå…¶ä»–å€¼çš„çŠ¶æ€ï¼Œåœ¨vue2.xä¸­æˆ‘ä»¬ä½¿ç”¨computedå‡½æ•°æ¥è¿›è¡Œè®¡ç®—å±æ€§ï¼Œåœ¨vue3ä¸­å°†computedåŠŸèƒ½è¿›è¡Œäº†æŠ½ç¦»ï¼Œå®ƒæ¥å—ä¸€ä¸ªgetterå‡½æ•°ï¼Œå¹¶ä¸ºgetterè¿”å›çš„å€¼åˆ›å»ºäº†ä¸€ä¸ªä¸å¯å˜çš„å“åº”å¼refå¯¹è±¡ï¼š 1234567const num = ref(0);const double = computed(() =&gt; num.value * 2);num.value++;// 2console.log(double.value);// Warning: computed value is readonlydouble.value = 4 æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨getå’Œsetå‡½æ•°åˆ›å»ºä¸€ä¸ªå¯è¯»å†™çš„refå¯¹è±¡ï¼š 12345678910111213const num = ref(0);const double = computed(&#123; get: () =&gt; num.value * 2, set: (val) =&gt; (num.value = val / 2),&#125;);num.value++;// 2console.log(double.value);double.value = 8// 4console.log(num.value); å“åº”å¼ä¾¦å¬ å’Œcomputedç›¸å¯¹åº”çš„å°±æ˜¯watchï¼Œcomputedæ˜¯å¤šå¯¹ä¸€çš„å…³ç³»ï¼Œè€Œwatchåˆ™æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ï¼›vue3ä¹Ÿæä¾›äº†ä¸¤ä¸ªå‡½æ•°æ¥ä¾¦å¬æ•°æ®æºçš„å˜åŒ–ï¼šwatchå’ŒwatchEffectã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹watchï¼Œå®ƒçš„ç”¨æ³•å’Œç»„ä»¶çš„watché€‰é¡¹ç”¨æ³•å®Œå…¨ç›¸åŒï¼Œå®ƒéœ€è¦ç›‘å¬æŸä¸ªæ•°æ®æºï¼Œç„¶åæ‰§è¡Œå…·ä½“çš„å›è°ƒå‡½æ•°ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹å®ƒç›‘å¬å•ä¸ªæ•°æ®æºçš„ç”¨æ³•ï¼š 1234567891011121314151617181920212223import &#123; reactive, ref, watch &#125; from &quot;vue&quot;;const state = reactive(&#123; count: 0,&#125;);//ä¾¦å¬æ—¶è¿”å›å€¼å¾—getterå‡½æ•°watch( () =&gt; state.count, (count, prevCount) =&gt; &#123; // 1 0 console.log(count, prevCount); &#125;);state.count++;const count = ref(0);//ç›´æ¥ä¾¦å¬refwatch(count, (count, prevCount) =&gt; &#123; // 2 0 console.log(count, prevCount, &quot;watch&quot;);&#125;);count.value = 2; æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå¤šä¸ªå€¼æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­è¿›è¡Œä¾¦å¬ï¼Œæœ€åçš„å€¼ä¹Ÿä»¥æ•°ç»„å½¢å¼è¿”å›ï¼š 123456789101112const state = reactive(&#123; count: 1,&#125;);const count = ref(2);watch([() =&gt; state.count, count], (newVal, oldVal) =&gt; &#123; //[3, 2] [1, 2] //[3, 4] [3, 2] console.log(newVal, oldVal);&#125;);state.count = 3;count.value = 4; å¦‚æœæˆ‘ä»¬æ¥ä¾¦å¬ä¸€ä¸ªæ·±åº¦åµŒå¥—çš„å¯¹è±¡å±æ€§å˜åŒ–æ—¶ï¼Œéœ€è¦è®¾ç½®deep:trueï¼š 123456789101112131415161718const deepObj = reactive(&#123; a: &#123; b: &#123; c: &quot;hello&quot;, &#125;, &#125;,&#125;);watch( () =&gt; deepObj, (val, old) =&gt; &#123; // new hello new hello console.log(val.a.b.c, old.a.b.c); &#125;, &#123; deep: true &#125;);deepObj.a.b.c = &quot;new hello&quot;; æœ€åçš„æ‰“å°ç»“æœå¯ä»¥å‘ç°éƒ½æ˜¯æ”¹å˜åçš„å€¼ï¼Œè¿™æ˜¯å› ä¸ºä¾¦å¬ä¸€ä¸ªå“åº”å¼å¯¹è±¡å§‹ç»ˆè¿”å›è¯¥å¯¹è±¡çš„å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹å€¼è¿›è¡Œæ·±æ‹·è´ï¼š 12345678910111213141516171819import _ from &quot;lodash&quot;;const deepObj = reactive(&#123; a: &#123; b: &#123; c: &quot;hello&quot;, &#125;, &#125;,&#125;);watch( () =&gt; _.cloneDeep(deepObj), (val, old) =&gt; &#123; // new hello hello console.log(val.a.b.c, old.a.b.c); &#125;, &#123; deep: true &#125;);deepObj.a.b.c = &quot;new hello&quot;; ä¸€èˆ¬ä¾¦å¬éƒ½ä¼šåœ¨ç»„ä»¶é”€æ¯æ—¶è‡ªåŠ¨åœæ­¢ï¼Œä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬æƒ³åœ¨ç»„ä»¶é”€æ¯å‰æ‰‹åŠ¨çš„æ–¹å¼è¿›è¡Œåœæ­¢ï¼Œå¯ä»¥è°ƒç”¨watchè¿”å›çš„stopå‡½æ•°è¿›è¡Œåœæ­¢ï¼š 123456789101112const count = ref(0);const stop = watch(count, (count, prevCount) =&gt; &#123; // ä¸æ‰§è¡Œ console.log(count, prevCount);&#125;);setTimeout(()=&gt;&#123; count.value = 2;&#125;, 1000);// åœæ­¢watchstop(); è¿˜æœ‰ä¸€ä¸ªå‡½æ•°watchEffectä¹Ÿå¯ä»¥ç”¨æ¥è¿›è¡Œä¾¦å¬ï¼Œä½†æ˜¯éƒ½å·²ç»æœ‰watchäº†ï¼Œè¿™ä¸ªwatchEffectå’Œwatchæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿä»–ä»¬çš„ç”¨æ³•ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ä¸åŒï¼š watchEffectä¸éœ€è¦æ‰‹åŠ¨ä¼ å…¥ä¾èµ– æ¯æ¬¡åˆå§‹åŒ–æ—¶watchEffectéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°æ¥è‡ªåŠ¨è·å–ä¾èµ– watchEffectæ— æ³•è·å–åˆ°åŸå€¼ï¼Œåªèƒ½å¾—åˆ°å˜åŒ–åçš„å€¼ 123456789101112131415import &#123; reactive, ref, watch, watchEffect &#125; from &quot;vue&quot;;const count = ref(0);const state = reactive(&#123; year: 2021,&#125;);watchEffect(() =&gt; &#123; console.log(count.value); console.log(state.year);&#125;);setInterval(() =&gt; &#123; count.value++; state.year++;&#125;, 1000); watchEffectä¼šåœ¨é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ‰§è¡Œä¸€æ¬¡ï¼Œè¿½è¸ªå“åº”å¼ä¾èµ–ï¼›åœ¨åŠ è½½åå®šæ—¶å™¨æ¯éš”1sæ‰§è¡Œæ—¶ï¼ŒwatchEffectéƒ½ä¼šç›‘å¬åˆ°æ•°æ®çš„å˜åŒ–è‡ªåŠ¨æ‰§è¡Œï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯è·å–åˆ°å˜åŒ–åçš„å€¼ã€‚ ç»„åˆAPI Composition APIï¼ˆç»„åˆAPIï¼‰ä¹Ÿæ˜¯Vue3ä¸­æœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½äº†ï¼Œä¹‹å‰çš„2.xç‰ˆæœ¬é‡‡ç”¨çš„æ˜¯Options APIï¼ˆé€‰é¡¹APIï¼‰ï¼Œå³å®˜æ–¹å®šä¹‰å¥½äº†å†™æ³•ï¼šdataã€computedã€methodsï¼Œéœ€è¦åœ¨å“ªé‡Œå†™å°±åœ¨å“ªé‡Œå†™ï¼Œè¿™æ ·å¸¦æ¥çš„é—®é¢˜å°±æ˜¯éšç€åŠŸèƒ½å¢åŠ ï¼Œä»£ç ä¹Ÿè¶Šæ¥å¤æ‚ï¼Œæˆ‘ä»¬çœ‹ä»£ç éœ€è¦ä¸Šä¸‹åå¤æ¨ªè·³ï¼š ä¸Šå›¾ä¸­ï¼Œä¸€ç§é¢œè‰²ä»£è¡¨ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°Options APIçš„åŠŸèƒ½ä»£ç æ¯”è¾ƒåˆ†æ•£ï¼›Composition APIåˆ™å¯ä»¥å°†åŒä¸€ä¸ªåŠŸèƒ½çš„é€»è¾‘ï¼Œç»„ç»‡åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨ï¼Œåˆ©äºç»´æŠ¤ã€‚ æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹ä¹‹å‰Options APIçš„å†™æ³•ï¼š 1234567export default &#123; components: &#123;&#125;, data() &#123;&#125;, computed: &#123;&#125;, watch: &#123;&#125;, mounted() &#123;&#125;,&#125; Options APIå°±æ˜¯å°†åŒä¸€ç±»å‹çš„ä¸œè¥¿æ”¾åœ¨åŒä¸€ä¸ªé€‰é¡¹ä¸­ï¼Œå½“æˆ‘ä»¬çš„æ•°æ®æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œè¿™æ ·çš„ç»„ç»‡æ–¹å¼æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼›ä½†æ˜¯éšç€æ•°æ®å¢å¤šï¼Œæˆ‘ä»¬ç»´æŠ¤çš„åŠŸèƒ½ç‚¹ä¼šæ¶‰åŠåˆ°å¤šä¸ªdataå’Œmethodsï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•æ„ŸçŸ¥å“ªäº›dataå’Œmethodsæ˜¯éœ€è¦æ¶‰åŠåˆ°çš„ï¼Œç»å¸¸éœ€è¦æ¥å›åˆ‡æ¢æŸ¥æ‰¾ï¼Œç”šè‡³æ˜¯éœ€è¦ç†è§£å…¶ä»–åŠŸèƒ½çš„é€»è¾‘ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†ç»„ä»¶éš¾ä»¥ç†è§£å’Œé˜…è¯»ã€‚ è€ŒComposition APIåšçš„å°±æ˜¯æŠŠåŒä¸€åŠŸèƒ½çš„ä»£ç æ”¾åˆ°ä¸€èµ·ç»´æŠ¤ï¼Œè¿™æ ·æˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€ä¸ªåŠŸèƒ½ç‚¹çš„æ—¶å€™ï¼Œä¸ç”¨å»å…³å¿ƒå…¶ä»–çš„é€»è¾‘ï¼Œåªå…³æ³¨å½“å‰çš„åŠŸèƒ½ï¼›Composition APIé€šè¿‡setupé€‰é¡¹æ¥ç»„ç»‡ä»£ç ï¼š 123export default &#123; setup(props, context) &#123;&#125;&#125;; æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œå®ƒæ¥æ”¶äº†ä¸¤ä¸ªå‚æ•°propså’Œcontextï¼Œpropså°±æ˜¯çˆ¶ç»„ä»¶ä¼ å…¥çš„ä¸€äº›æ•°æ®ï¼Œcontextæ˜¯ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ˜¯ä»2.xæš´éœ²å‡ºæ¥çš„ä¸€äº›å±æ€§ï¼š attrs slots emit æ³¨ï¼špropsçš„æ•°æ®ä¹Ÿéœ€è¦é€šè¿‡toRefsè§£æ„ï¼Œå¦åˆ™å“åº”å¼æ•°æ®ä¼šå¤±æ•ˆã€‚ æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªButtonæŒ‰é’®æ¥çœ‹ä¸‹setupå…·ä½“çš„ç”¨æ³•ï¼š 12345678910111213141516171819202122232425262728&lt;template&gt; &lt;div&gt;&#123;&#123; state.count &#125;&#125; * 2 = &#123;&#123; double &#125;&#125;&lt;/div&gt; &lt;div&gt;&#123;&#123; num &#125;&#125;&lt;/div&gt; &lt;div @click=&quot;add&quot;&gt;Add&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; reactive, computed, ref &#125; from &quot;vue&quot;;export default &#123; name: &quot;Button&quot;, setup() &#123; const state = reactive(&#123; count: 1, &#125;); const num = ref(2); function add() &#123; state.count++; num.value += 10; &#125; const double = computed(() =&gt; state.count * 2); return &#123; state, double, num, add, &#125;; &#125;,&#125;;&lt;/script&gt; å¾ˆå¤šç«¥é‹å¯èƒ½å°±æœ‰ç–‘æƒ‘äº†ï¼Œè¿™è·Ÿæˆ‘åœ¨dataå’Œmethodsä¸­å†™æ²¡ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼Œä¸å°±æ˜¯æŠŠä»–ä»¬æ”¾åˆ°ä¸€èµ·ä¹ˆï¼Ÿæˆ‘ä»¬å¯ä»¥å°†setupä¸­çš„åŠŸèƒ½è¿›è¡Œæå–åˆ†å‰²æˆä¸€ä¸ªä¸€ä¸ªç‹¬ç«‹å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°è¿˜å¯ä»¥åœ¨ä¸åŒçš„ç»„ä»¶ä¸­è¿›è¡Œé€»è¾‘å¤ç”¨ï¼š 123456789101112131415export default &#123; setup() &#123; const &#123; networkState &#125; = useNetworkState(); const &#123; user &#125; = userDeatil(); const &#123; list &#125; = tableData(); return &#123; networkState, user, list, &#125;; &#125;,&#125;;function useNetworkState() &#123;&#125;function userDeatil() &#123;&#125;function tableData() &#123;&#125; Fragment æ‰€è°“çš„Fragmentï¼Œå°±æ˜¯ç‰‡æ®µï¼›åœ¨vue2.xä¸­ï¼Œè¦æ±‚æ¯ä¸ªæ¨¡æ¿å¿…é¡»æœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»£ç è¦è¿™æ ·å†™ï¼š 123456&lt;template&gt; &lt;div&gt; &lt;span&gt;&lt;/span&gt; &lt;span&gt;&lt;/span&gt; &lt;/div&gt;&lt;/template&gt; æˆ–è€…åœ¨Vue2.xä¸­è¿˜å¯ä»¥å¼•å…¥vue-fragmentsåº“ï¼Œç”¨ä¸€ä¸ªè™šæ‹Ÿçš„fragmentä»£æ›¿divï¼›åœ¨Reactä¸­ï¼Œè§£å†³æ–¹æ³•æ˜¯é€šè¿‡çš„ä¸€ä¸ªReact.Fragmentæ ‡ç­¾åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿå…ƒç´ ï¼›åœ¨Vue3ä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¸éœ€è¦æ ¹èŠ‚ç‚¹ï¼š 1234&lt;template&gt; &lt;span&gt;hello&lt;/span&gt; &lt;span&gt;world&lt;/span&gt;&lt;/template&gt; è¿™æ ·å°±å°‘äº†å¾ˆå¤šæ²¡æœ‰æ„ä¹‰çš„divå…ƒç´ ã€‚ Teleport Teleportç¿»è¯‘è¿‡æ¥å°±æ˜¯ä¼ é€ã€è¿œè·ç¦»ä¼ é€çš„æ„æ€ï¼›é¡¾åæ€ä¹‰ï¼Œå®ƒå¯ä»¥å°†æ’æ§½ä¸­çš„å…ƒç´ æˆ–è€…ç»„ä»¶ä¼ é€åˆ°é¡µé¢çš„å…¶ä»–ä½ç½®ï¼š åœ¨Reactä¸­å¯ä»¥é€šè¿‡createPortalå‡½æ•°æ¥åˆ›å»ºéœ€è¦ä¼ é€çš„èŠ‚ç‚¹ï¼›æœ¬æ¥å°¤å¤§å¤§æƒ³èµ·åå«Portalï¼Œä½†æ˜¯H5åŸç”Ÿçš„Portalæ ‡ç­¾ä¹Ÿåœ¨è®¡åˆ’ä¸­ï¼Œè™½ç„¶æœ‰ä¸€äº›å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯ä¸ºäº†é¿å…é‡åï¼Œå› æ­¤æ”¹æˆTeleportã€‚ Teleportä¸€ä¸ªå¸¸è§çš„ä½¿ç”¨åœºæ™¯ï¼Œå°±æ˜¯åœ¨ä¸€äº›åµŒå¥—æ¯”è¾ƒæ·±çš„ç»„ä»¶æ¥è½¬ç§»æ¨¡æ€æ¡†çš„ä½ç½®ã€‚è™½ç„¶åœ¨é€»è¾‘ä¸Šæ¨¡æ€æ¡†æ˜¯å±äºè¯¥ç»„ä»¶çš„ï¼Œä½†æ˜¯åœ¨æ ·å¼å’ŒDOMç»“æ„ä¸Šï¼ŒåµŒå¥—å±‚çº§åè¾ƒæ·±åä¸åˆ©äºè¿›è¡Œç»´æŠ¤ï¼ˆz-indexç­‰é—®é¢˜ï¼‰ï¼›å› æ­¤æˆ‘ä»¬éœ€è¦å°†å…¶è¿›è¡Œå‰¥ç¦»å‡ºæ¥ï¼š 123456789101112131415161718192021&lt;template&gt; &lt;button @click=&quot;showDialog = true&quot;&gt;æ‰“å¼€æ¨¡æ€æ¡†&lt;/button&gt; &lt;teleport to=&quot;body&quot;&gt; &lt;div class=&quot;modal&quot; v-if=&quot;showDialog&quot; style=&quot;position: fixed&quot;&gt; æˆ‘æ˜¯ä¸€ä¸ªæ¨¡æ€æ¡† &lt;button @click=&quot;showDialog = false&quot;&gt;å…³é—­&lt;/button&gt; &lt;child-component :msg=&quot;msg&quot;&gt;&lt;/child-component&gt; &lt;/div&gt; &lt;/teleport&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; showDialog: false, msg: &quot;hello&quot; &#125;; &#125;,&#125;;&lt;/script&gt; è¿™é‡Œçš„Teleportä¸­çš„modal divå°±è¢«ä¼ é€åˆ°äº†bodyçš„åº•éƒ¨ï¼›è™½ç„¶åœ¨ä¸åŒçš„åœ°æ–¹è¿›è¡Œæ¸²æŸ“ï¼Œä½†æ˜¯Teleportä¸­çš„å…ƒç´ å’Œç»„ä»¶è¿˜æ˜¯å±äºçˆ¶ç»„ä»¶çš„é€»è¾‘å­ç»„ä»¶ï¼Œè¿˜æ˜¯å¯ä»¥å’Œçˆ¶ç»„ä»¶è¿›è¡Œæ•°æ®é€šä¿¡ã€‚Teleportæ¥æ”¶ä¸¤ä¸ªå‚æ•°toå’Œdisabledï¼š to - stringï¼šå¿…é¡»æ˜¯æœ‰æ•ˆçš„æŸ¥è¯¢é€‰æ‹©å™¨æˆ– HTMLElementï¼Œå¯ä»¥idæˆ–è€…classé€‰æ‹©å™¨ç­‰ã€‚ disabled - booleanï¼šå¦‚æœæ˜¯trueè¡¨ç¤ºç¦ç”¨teleportçš„åŠŸèƒ½ï¼Œå…¶æ’æ§½å†…å®¹å°†ä¸ä¼šç§»åŠ¨åˆ°ä»»ä½•ä½ç½®ï¼Œé»˜è®¤falseä¸ç¦ç”¨ã€‚ Suspense Suspenseæ˜¯Vue3æ¨å‡ºçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œå®ƒå…è®¸æˆ‘ä»¬çš„ç¨‹åºåœ¨ç­‰å¾…å¼‚æ­¥ç»„ä»¶æ—¶æ¸²æŸ“ä¸€äº›åå¤‡çš„å†…å®¹ï¼Œå¯ä»¥è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¹³æ»‘çš„ç”¨æˆ·ä½“éªŒï¼›Vueä¸­åŠ è½½å¼‚æ­¥ç»„ä»¶å…¶å®åœ¨Vue2.xä¸­å·²ç»æœ‰äº†ï¼Œæˆ‘ä»¬ç”¨çš„vue-routerä¸­åŠ è½½çš„è·¯ç”±ç»„ä»¶å…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¼‚æ­¥ç»„ä»¶ï¼š 123456export default &#123; name: &quot;Home&quot;, components: &#123; AsyncButton: () =&gt; import(&quot;../components/AsyncButton&quot;), &#125;,&#125; åœ¨Vue3ä¸­é‡æ–°å®šä¹‰ï¼Œå¼‚æ­¥ç»„ä»¶éœ€è¦é€šè¿‡defineAsyncComponentæ¥è¿›è¡Œæ˜¾ç¤ºçš„å®šä¹‰ï¼š 12345678910111213141516171819// å…¨å±€å®šä¹‰å¼‚æ­¥ç»„ä»¶//src/main.jsimport &#123; defineAsyncComponent &#125; from &quot;vue&quot;;const AsyncButton = defineAsyncComponent(() =&gt; import(&quot;./components/AsyncButton.vue&quot;));app.component(&quot;AsyncButton&quot;, AsyncButton);// ç»„ä»¶å†…å®šä¹‰å¼‚æ­¥ç»„ä»¶// src/views/Home.vueimport &#123; defineAsyncComponent &#125; from &quot;vue&quot;;export default &#123; components: &#123; AsyncButton: defineAsyncComponent(() =&gt; import(&quot;../components/AsyncButton&quot;) ), &#125;,&#125;; åŒæ—¶å¯¹å¼‚æ­¥ç»„ä»¶çš„å¯ä»¥è¿›è¡Œæ›´ç²¾ç»†çš„ç®¡ç†ï¼š 1234567891011121314151617export default &#123; components: &#123; AsyncButton: defineAsyncComponent(&#123; delay: 100, timeout: 3000, loader: () =&gt; import(&quot;../components/AsyncButton&quot;), errorComponent: ErrorComponent, onError(error, retry, fail, attempts) &#123; if (attempts &lt;= 3) &#123; retry(); &#125; else &#123; fail(); &#125; &#125;, &#125;), &#125;,&#125;; è¿™æ ·æˆ‘ä»¬å¯¹å¼‚æ­¥ç»„ä»¶åŠ è½½æƒ…å†µå°±èƒ½æŒæ§ï¼Œåœ¨åŠ è½½å¤±è´¥ä¹Ÿèƒ½é‡æ–°åŠ è½½æˆ–è€…å±•ç¤ºå¼‚å¸¸çš„çŠ¶æ€ï¼š æˆ‘ä»¬å›åˆ°Suspenseï¼Œä¸Šé¢è¯´åˆ°å®ƒä¸»è¦æ˜¯åœ¨ç»„ä»¶åŠ è½½æ—¶æ¸²æŸ“ä¸€äº›åå¤‡çš„å†…å®¹ï¼Œå®ƒæä¾›äº†ä¸¤ä¸ªslotæ’æ§½ï¼Œä¸€ä¸ªdefaulté»˜è®¤ï¼Œä¸€ä¸ªfallbackåŠ è½½ä¸­çš„çŠ¶æ€ï¼š 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;div&gt; &lt;button @click=&quot;showButton&quot;&gt;å±•ç¤ºå¼‚æ­¥ç»„ä»¶&lt;/button&gt; &lt;template v-if=&quot;isShowButton&quot;&gt; &lt;Suspense&gt; &lt;template #default&gt; &lt;AsyncButton&gt;&lt;/AsyncButton&gt; &lt;/template&gt; &lt;template #fallback&gt; &lt;div&gt;ç»„ä»¶åŠ è½½ä¸­...&lt;/div&gt; &lt;/template&gt; &lt;/Suspense&gt; &lt;/template&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; setup() &#123; const isShowButton = ref(false); function showButton() &#123; isShowButton.value = true; &#125; return &#123; isShowButton, showButton, &#125;; &#125;,&#125;&lt;/script&gt; éå…¼å®¹çš„åŠŸèƒ½ éå…¼å®¹çš„åŠŸèƒ½ä¸»è¦æ˜¯ä¸€äº›å’ŒVue2.xç‰ˆæœ¬æ”¹åŠ¨è¾ƒå¤§çš„è¯­æ³•ï¼Œå·²ç»åœ¨Vue3ä¸Šå¯èƒ½å­˜åœ¨å…¼å®¹é—®é¢˜äº†ã€‚ dataã€mixinå’Œfilter åœ¨Vue2.xä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰dataä¸ºobjectæˆ–è€…functionï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“åœ¨ç»„ä»¶ä¸­å¦‚æœdataæ˜¯objectçš„è¯ä¼šå‡ºç°æ•°æ®äº’ç›¸å½±å“ï¼Œå› ä¸ºobjectæ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼› åœ¨Vue3ä¸­ï¼Œdataåªæ¥å—functionç±»å‹ï¼Œé€šè¿‡functionè¿”å›å¯¹è±¡ï¼›åŒæ—¶Mixinçš„åˆå¹¶è¡Œä¸ºä¹Ÿå‘ç”Ÿäº†æ”¹å˜ï¼Œå½“mixinå’ŒåŸºç±»ä¸­dataåˆå¹¶æ—¶ï¼Œä¼šæ‰§è¡Œæµ…æ‹·è´åˆå¹¶ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445const Mixin = &#123; data() &#123; return &#123; user: &#123; name: &#x27;Jack&#x27;, id: 1, address: &#123; prov: 2, city: 3, &#125;, &#125; &#125; &#125;&#125;const Component = &#123; mixins: [Mixin], data() &#123; return &#123; user: &#123; id: 2, address: &#123; prov: 4, &#125;, &#125; &#125; &#125;&#125;// vue2ç»“æœï¼š&#123; id: 2, name: &#x27;Jack&#x27;, address: &#123; prov: 4, city: 3 &#125;&#125;// vue3ç»“æœï¼šuser: &#123; id: 2, address: &#123; prov: 4, &#125;,&#125; æˆ‘ä»¬çœ‹åˆ°æœ€ååˆå¹¶çš„ç»“æœï¼Œvue2.xä¼šè¿›è¡Œæ·±æ‹·è´ï¼Œå¯¹dataä¸­çš„æ•°æ®å‘ä¸‹æ·±å…¥åˆå¹¶æ‹·è´ï¼›è€Œvue3åªè¿›è¡Œæµ…å±‚æ‹·è´ï¼Œå¯¹dataä¸­æ•°æ®å‘ç°å·²å­˜åœ¨å°±ä¸åˆå¹¶æ‹·è´ã€‚ åœ¨vue2.xä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¿‡æ»¤å™¨filteræ¥å¤„ç†ä¸€äº›æ–‡æœ¬å†…å®¹çš„å±•ç¤ºï¼š 123456789101112131415161718192021222324&lt;template&gt; &lt;div&gt;&#123;&#123; status | statusText &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; props: &#123; status: &#123; type: Number, default: 1 &#125; &#125;, filters: &#123; statusText(value)&#123; if(value === 1)&#123; return &#x27;è®¢å•æœªä¸‹å•&#x27; &#125; else if(value === 2)&#123; return &#x27;è®¢å•å¾…æ”¯ä»˜&#x27; &#125; else if(value === 3)&#123; return &#x27;è®¢å•å·²å®Œæˆ&#x27; &#125; &#125; &#125; &#125;&lt;/script&gt; æœ€å¸¸è§çš„å°±æ˜¯å¤„ç†ä¸€äº›è®¢å•çš„æ–‡æ¡ˆå±•ç¤ºç­‰ï¼›ç„¶è€Œåœ¨vue3ä¸­ï¼Œè¿‡æ»¤å™¨filterå·²ç»åˆ é™¤ï¼Œä¸å†æ”¯æŒäº†ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨æ–¹æ³•è°ƒç”¨æˆ–è€…è®¡ç®—å±æ€§computedæ¥è¿›è¡Œä»£æ›¿ã€‚ v-model åœ¨Vue2.xä¸­ï¼Œv-modelç›¸å½“äºç»‘å®švalueå±æ€§å’Œinputäº‹ä»¶ï¼Œå®ƒæœ¬è´¨ä¹Ÿæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼š 123&lt;child-component v-model=&quot;msg&quot;&gt;&lt;/child-component&gt;&lt;!-- ç›¸å½“äº --&gt;&lt;child-component :value=&quot;msg&quot; @input=&quot;msg=$event&quot;&gt;&lt;/child-component&gt; åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å¤šä¸ªå€¼è¿›è¡ŒåŒå‘ç»‘å®šï¼Œå…¶ä»–çš„å€¼å°±éœ€è¦æ˜¾ç¤ºçš„ä½¿ç”¨å›è°ƒå‡½æ•°æ¥æ”¹å˜äº†ï¼š 1234567&lt;child-component v-model=&quot;msg&quot; :msg1=&quot;msg1&quot; @change1=&quot;msg1=$event&quot; :msg2=&quot;msg2&quot; @change2=&quot;msg2=$event&quot;&gt;&lt;/child-component&gt; åœ¨vue2.3.0+ç‰ˆæœ¬å¼•å…¥äº†.syncä¿®é¥°ç¬¦ï¼Œå…¶æœ¬è´¨ä¹Ÿæ˜¯è¯­æ³•ç³–ï¼Œæ˜¯åœ¨ç»„ä»¶ä¸Šç»‘å®š@update:propNameå›è°ƒï¼Œè¯­æ³•æ›´ç®€æ´ï¼š 12345678910111213&lt;child-component :msg1.sync=&quot;msg1&quot; :msg2.sync=&quot;msg2&quot;&gt;&lt;/child-component&gt;&lt;!-- ç›¸å½“äº --&gt;&lt;child-component :msg1=&quot;msg1&quot; @update:msg1=&quot;msg1=$event&quot; :msg2=&quot;msg2&quot; @update:msg2=&quot;msg2=$event&quot;&gt;&lt;/child-component&gt; Vue3ä¸­å°†v-modelå’Œ.syncè¿›è¡Œäº†åŠŸèƒ½çš„æ•´åˆï¼ŒæŠ›å¼ƒäº†.syncï¼Œè¡¨ç¤ºï¼šå¤šä¸ªåŒå‘ç»‘å®švalueå€¼ç›´æ¥ç”¨å¤šä¸ªv-modelä¼ å°±å¥½äº†ï¼›åŒæ—¶ä¹Ÿå°†v-modelé»˜è®¤ä¼ çš„propåç§°ç”±valueæ”¹æˆäº†modelValueï¼š 123456789&lt;child-component v-model=&quot;msg&quot;&gt;&lt;/child-component&gt;&lt;!-- ç›¸å½“äº --&gt;&lt;child-component :modelValue=&quot;msg&quot; @update:modelValue=&quot;msg = $event&quot;&gt;&lt;/child-component&gt; å¦‚æœæˆ‘ä»¬æƒ³é€šè¿‡v-modelä¼ é€’å¤šä¸ªå€¼ï¼Œå¯ä»¥å°†ä¸€ä¸ªargumentä¼ é€’ç»™v-modelï¼š 123456789101112&lt;child-component v-model.msg1=&quot;msg1&quot; v-model.msg2=&quot;msg2&quot;&gt;&lt;/child-component&gt;&lt;!-- ç›¸å½“äº --&gt;&lt;child-component :msg1=&quot;msg1&quot; @update:msg1=&quot;msg1=$event&quot; :msg2=&quot;msg2&quot; @update:msg2=&quot;msg2=$event&quot;&gt;&lt;/child-component&gt; v-forå’Œkey åœ¨Vue2.xä¸­ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“v-foræ¯æ¬¡å¾ªç¯éƒ½éœ€è¦ç»™æ¯ä¸ªå­èŠ‚ç‚¹ä¸€ä¸ªå”¯ä¸€çš„keyï¼Œè¿˜ä¸èƒ½ç»‘å®šåœ¨templateæ ‡ç­¾ä¸Šï¼Œ 1234&lt;template v-for=&quot;item in list&quot;&gt; &lt;div :key=&quot;item.id&quot;&gt;...&lt;/div&gt; &lt;span :key=&quot;item.id&quot;&gt;...&lt;/span&gt;&lt;/template&gt; è€Œåœ¨Vue3ä¸­ï¼Œkeyå€¼åº”è¯¥è¢«æ”¾ç½®åœ¨templateæ ‡ç­¾ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨ä¸ºæ¯ä¸ªå­èŠ‚ç‚¹è®¾ä¸€éï¼š 1234&lt;template v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt; &lt;div&gt;...&lt;/div&gt; &lt;span&gt;...&lt;/span&gt;&lt;/template&gt; v-bindåˆå¹¶ åœ¨vue2.xä¸­ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ åŒæ—¶å®šä¹‰äº†v-bind=&quot;object&quot;å’Œä¸€ä¸ªç›¸åŒçš„å•ç‹¬çš„å±æ€§ï¼Œé‚£ä¹ˆè¿™ä¸ªå•ç‹¬çš„å±æ€§ä¼šè¦†ç›–objectä¸­çš„ç»‘å®šï¼š 12345&lt;div id=&quot;red&quot; v-bind=&quot;&#123; id: &#x27;blue&#x27; &#125;&quot;&gt;&lt;/div&gt;&lt;div v-bind=&quot;&#123; id: &#x27;blue&#x27; &#125;&quot; id=&quot;red&quot;&gt;&lt;/div&gt;&lt;!-- æœ€åç»“æœéƒ½ç›¸åŒ --&gt;&lt;div id=&quot;red&quot;&gt;&lt;/div&gt; ç„¶è€Œåœ¨vue3ä¸­ï¼Œå¦‚æœä¸€ä¸ªå…ƒç´ åŒæ—¶å®šä¹‰äº†v-bind=&quot;object&quot;å’Œä¸€ä¸ªç›¸åŒçš„å•ç‹¬çš„å±æ€§ï¼Œé‚£ä¹ˆå£°æ˜ç»‘å®šçš„é¡ºåºå†³å®šäº†æœ€åçš„ç»“æœï¼ˆåè€…è¦†ç›–å‰è€…ï¼‰ï¼š 123456789&lt;!-- template --&gt;&lt;div id=&quot;red&quot; v-bind=&quot;&#123; id: &#x27;blue&#x27; &#125;&quot;&gt;&lt;/div&gt;&lt;!-- result --&gt;&lt;div id=&quot;blue&quot;&gt;&lt;/div&gt;&lt;!-- template --&gt;&lt;div v-bind=&quot;&#123; id: &#x27;blue&#x27; &#125;&quot; id=&quot;red&quot;&gt;&lt;/div&gt;&lt;!-- result --&gt;&lt;div id=&quot;red&quot;&gt;&lt;/div&gt; v-forä¸­ref vue2.xä¸­ï¼Œåœ¨v-forä¸Šä½¿ç”¨refå±æ€§ï¼Œé€šè¿‡this.$refsä¼šå¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼š 1234567891011121314&lt;template &lt;div v-for=&quot;item in list&quot; :ref=&quot;setItemRef&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data()&#123; list: [1, 2] &#125;, mounted () &#123; // [div, div] console.log(this.$refs.setItemRef) &#125;&#125;&lt;/script&gt; ä½†æ˜¯è¿™æ ·å¯èƒ½ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼›å› æ­¤vue3ä¸å†è‡ªåŠ¨åˆ›å»ºæ•°ç»„ï¼Œè€Œæ˜¯å°†refçš„å¤„ç†æ–¹å¼å˜ä¸ºäº†å‡½æ•°ï¼Œè¯¥å‡½æ•°é»˜è®¤ä¼ å…¥è¯¥èŠ‚ç‚¹ï¼š 123456789101112131415161718192021222324&lt;template &lt;div v-for=&quot;item in 3&quot; :ref=&quot;setItemRef&quot;&gt;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; reactive, onUpdated &#125; from &#x27;vue&#x27;export default &#123; setup() &#123; let itemRefs = reactive([]) const setItemRef = el =&gt; &#123; itemRefs.push(el) &#125; onUpdated(() =&gt; &#123; console.log(itemRefs) &#125;) return &#123; itemRefs, setItemRef &#125; &#125;&#125;&lt;/script&gt; v-forå’Œv-ifä¼˜å…ˆçº§ åœ¨vue2.xä¸­ï¼Œåœ¨ä¸€ä¸ªå…ƒç´ ä¸ŠåŒæ—¶ä½¿ç”¨v-forå’Œv-ifï¼Œv-foræœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ï¼Œå› æ­¤åœ¨vue2.xä¸­åšæ€§èƒ½ä¼˜åŒ–ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„ç‚¹å°±æ˜¯v-forå’Œv-ifä¸èƒ½æ”¾åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šã€‚ è€Œåœ¨vue3ä¸­ï¼Œv-ifæ¯”v-foræœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å› æ­¤ä¸‹é¢çš„ä»£ç ï¼Œåœ¨vue2.xä¸­èƒ½æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯åœ¨vue3ä¸­v-ifç”Ÿæ•ˆæ—¶å¹¶æ²¡æœ‰itemå˜é‡ï¼Œå› æ­¤ä¼šæŠ¥é”™ï¼š 12345678910111213&lt;template&gt; &lt;div v-for=&quot;item in list&quot; v-if=&quot;item % 2 === 0&quot; :key=&quot;item&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; list: [1, 2, 3, 4, 5], &#125;; &#125;,&#125;;&lt;/script&gt; æ€»ç»“ ä»¥ä¸Šå°±æ˜¯Vue3.0ä½œä¸ºç»ˆç«¯ç”¨çš„æˆ‘ä»¬å¯èƒ½ä¼šæ¶‰åŠåˆ°çš„ä¸€äº›æ–°ç‰¹æ€§å’Œæ–°åŠŸèƒ½ï¼Œå…¶å®Vue3.0è¿˜æœ‰å¾ˆå¤šçš„æ”¹åŠ¨ï¼Œè¿™é‡Œç”±äºç¯‡å¹…åŸå› å°±ä¸ä¸€ä¸€å±•å¼€äº†ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ŒæœŸå¾…Vue3èƒ½å¸¦ç»™æˆ‘ä»¬æ›´ä¾¿åˆ©æ›´å‹å¥½çš„å¼€å‘ä½“éªŒã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"}]},{"title":"ä¸€æ–‡å½»åº•è¯»æ‡‚ESLint","date":"2021-04-25T08:00:00.000Z","path":"2021/04/25/Front-Eslint.html","text":"åœ¨æ—¥å¸¸é¡¹ç›®å¼€å‘ä¸­ï¼ŒESLintå¸¸å¸¸æ‰®æ¼”è€…å¯æœ‰å¯æ— çš„è§’è‰²ï¼Œæˆ‘ä»¬æƒ³è®©å®ƒæ¥å¸®åŠ©æˆ‘ä»¬æ£€æŸ¥ä»£ç ï¼ŒåŒæ—¶åˆå®³æ€•å®ƒå¸¦æ¥çš„æŠ¥é”™æ— æ³•å¤„ç†ï¼›æœ¬æ–‡å¸¦ä½ æ·±å…¥çš„äº†è§£ESLintçš„é…ç½®ä»¥åŠåŸç†ã€‚ ESLintæ˜¯ä¸€ä¸ªæ’ä»¶åŒ–çš„ä»£ç æ£€æµ‹å·¥å…·ï¼Œæ­£å¦‚å®ƒå®˜ç½‘æè¿°çš„sloganï¼š å¯ç»„è£…çš„JavaScriptå’ŒJSXæ£€æŸ¥å·¥å…· ESLintä¸ä»…å¯ä»¥æ£€æµ‹JSï¼Œè¿˜æ”¯æŒJSXå’ŒVueï¼Œå®ƒçš„é«˜å¯æ‰©å±•æ€§è®©å®ƒèƒ½å¤Ÿæ”¯æŒæ›´å¤šçš„é¡¹ç›®ã€‚ ESLintçš„å‰è¾ˆä»¬ æåˆ°ESLintï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸æåŠä»–çš„å‰è¾ˆä»¬JSLintå’ŒJSHintï¼Œä»¥åŠå®ƒä»¬çš„åŒºåˆ«ï¼›é¦–å…ˆå°±æ˜¯JSLintï¼Œå®ƒæ˜¯ç”±Douglas Crockfordå¼€å‘çš„ï¼›JSLintçš„çµæ„Ÿæ¥æºäºCè¯­è¨€çš„æ£€æŸ¥å·¥å…·Lintï¼ŒLintæœ€åˆè¢«å‘æ˜ç”¨æ¥æ‰«æCè¯­è¨€æºæ–‡ä»¶ä»¥ä¾¿æ‰¾åˆ°å…¶ä¸­çš„é”™è¯¯ï¼Œåæ¥éšç€è¯­è¨€çš„æˆç†Ÿä»¥åŠç¼–è¯‘å™¨èƒ½å¤Ÿæ›´å¥½çš„æ‰¾åˆ°é—®é¢˜ï¼ŒLintå·¥å…·ä¹Ÿé€æ¸ä¸å†è¢«éœ€è¦äº†ã€‚ JavaScriptæœ€å¼€å§‹è¢«å‘æ˜åªæ˜¯ç”¨æ¥åœ¨ç½‘é¡µä¸Šåšä¸€äº›ç®€å•çš„å·¥ä½œï¼ˆç‚¹å‡»äº‹ä»¶ã€è¡¨å•æäº¤ç­‰ï¼‰ï¼Œéšç€JSè¯­è¨€çš„å‘å±•å®Œå–„ä»¥åŠé¡¹ç›®å¤æ‚ç¨‹åº¦çš„å¢åŠ ï¼Œæ€¥éœ€ä¸€ä¸ªç”¨æ¥æ£€æŸ¥JSè¯­æ³•æˆ–è€…å…¶ä»–é—®é¢˜çš„æ ¡éªŒå·¥å…·ï¼Œå› æ­¤JSLintå°±è¯ç”Ÿäº†ï¼›å®ƒæ˜¯ç”±Douglas Crockfordåœ¨2010å¹´å¼€æºçš„ç¬¬ä¸€æ¬¾é’ˆå¯¹JSçš„è¯­æ³•æ£€æµ‹å·¥å…·ï¼Œå®ƒå’ŒLintåšç€ç›¸åŒçš„äº‹ï¼Œæ‰«æJSçš„æºæ–‡ä»¶æ¥æ‰¾åˆ°é”™è¯¯ï¼›å®ƒå†…éƒ¨ä¹Ÿæ˜¯é€šè¿‡fs.readFileæ¥è¯»å–æ–‡ä»¶ç„¶åé€è¡Œæ¥è¿›è¡Œæ£€æŸ¥ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨å…¨å±€å®‰è£…jslintï¼Œç„¶åjslint source.jså¯¹æˆ‘ä»¬çš„ä»£ç è¿›è¡Œæ£€æŸ¥ï¼›JSLintåˆšå¼€å§‹ç¡®å®å¸®åŠ©å¾ˆå¤šJSå¼€å‘è€…èŠ‚çœäº†ä¸å°‘æ’æŸ¥é”™è¯¯çš„æ—¶é—´ï¼Œä½†æ˜¯JSLintçš„é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼šæ‰€æœ‰çš„é…ç½®é¡¹éƒ½å†…ç½®ä¸å¯é…ç½®ï¼Œå› æ­¤ä½ è¦ç”¨JSLintåªèƒ½éµå¾ªDouglas Crockfordè€çˆ·å­è‡ªå·±å®šä¹‰çš„ä»£ç é£æ ¼å’Œè§„èŒƒï¼›å†åŠ ä¸Šä»–æœ¬èº«æ¨å´‡çˆ±ç”¨ä¸ç”¨çš„ä¼ ç»Ÿï¼Œä¸åƒå¼€å‘è€…å¼€æ”¾é…ç½®æˆ–è€…ä¿®æ”¹ä»–è§‰å¾—å¯¹çš„è§„åˆ™ï¼Œå› æ­¤å¾ˆå¤šäººä¹Ÿæ— æ³•å¿å—ä»–çš„è§„åˆ™ã€‚ ç”±äºJSLintè®©å¾ˆå¤šäººæ— æ³•å¿å—ï¼Œæ‰€ä»¥Anton KovalyovåŸºäºJSLintå¼€å‘äº†JSHintï¼Œå®ƒçš„åˆè¡·å°±æ˜¯ä¸ºäº†èƒ½è®©å¼€å‘è€…è‡ªå®šä¹‰è§„åˆ™lint rulesï¼Œå› æ­¤æä¾›äº†ä¸°å¯Œçš„é…ç½®é¡¹ï¼Œç»™å¼€å‘è€…æå¤§çš„è‡ªç”±ï¼›åŒæ—¶å®ƒä¹Ÿæä¾›äº†ä¸€å¥—ç›¸å½“å®Œå–„çš„ç¼–è¾‘å™¨æ’ä»¶ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„VIMã€Sublimeã€Atomã€Vs Codeç­‰éƒ½æœ‰æ’ä»¶æ”¯æŒï¼Œæ–¹ä¾¿å¼€å‘ã€‚ JSHintä¸€å¼€å§‹å°±ä¿æŒäº†å¼€æºè½¯ä»¶çš„é£æ ¼ï¼Œå¹¶ä¸”ç”±ç¤¾åŒºæ¥é©±åŠ¨ï¼Œå› æ­¤ä¸€æ¨å‡ºå°±å¾ˆå¿«å‘å±•èµ·æ¥ï¼Œæˆ‘ä»¬ç†ŸçŸ¥çš„ä¸€äº›é¡¹ç›®æˆ–è€…å…¬å¸ä¹Ÿä½¿ç”¨äº†JSHintï¼Œæ¯”å¦‚ï¼šFacebookã€Googleã€Jqueryã€Disqusç­‰ã€‚ JSHintç›¸æ¯”äºJSLintï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯é…ç½®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­æ”¾å…¥ä¸€ä¸ª.jshintrcçš„é…ç½®æ–‡ä»¶ï¼ŒJSLintå°±ä¼šåŠ è½½é…ç½®æ–‡ä»¶ç”¨äºä»£ç åˆ†æï¼Œé…ç½®æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼š 123456789101112&#123; // ç¦æ­¢æœ‰æœªä½¿ç”¨çš„å˜é‡ &quot;unused&quot;: true, // ç¦æ­¢æœ‰æœªå®šä¹‰çš„å˜é‡ &quot;undef&quot;: true, // æ— è§†æ²¡æœ‰åŠ åˆ†å·è¡Œå°¾ &quot;asi&quot;: true, // å…¨å±€å˜é‡ &quot;globals&quot;: &#123; &quot;jQuery&quot;: true &#125;&#125; ç”±äºJSHintæ˜¯åŸºäºJSLintå¼€å‘çš„ï¼Œå› æ­¤JSLintçš„ä¸€äº›é—®é¢˜ä¹Ÿç»§æ‰¿ä¸‹æ¥äº†ï¼Œæ¯”å¦‚ä¸æ˜“æ‰©å±•ä»¥åŠä¸å®¹æ˜“ç›´æ¥æ ¹æ®æŠ¥é”™å®šä½åˆ°å…·ä½“çš„é…ç½®è§„åˆ™ç­‰ï¼›åœ¨2013å¹´ï¼ŒZakaså¤§ä½¬å‘ç°JSHintæ— æ³•æ»¡è¶³è‡ªå·±å®šåˆ¶åŒ–è§„åˆ™çš„éœ€è¦ï¼Œå› æ­¤è®¾æƒ³å¼€å‘ä¸€ä¸ªåŸºäºASTçš„Linterï¼Œå¯ä»¥åŠ¨æ€æ‰§è¡Œé¢å¤–çš„è§„åˆ™ï¼ŒåŒæ—¶å¯ä»¥å¾ˆæ–¹é¢çš„æ‰©å±•è§„åˆ™ï¼Œäºæ˜¯åœ¨13å¹´6æœˆä»½å¼€æºæ¨å‡ºäº†å…¨æ–°çš„ESLintã€‚ ESLintå·ç§°ä¸‹ä¸€ä»£çš„JS Linterå·¥å…·ï¼Œå®ƒçš„çµæ„Ÿæ¥æºäºPHP Linterï¼Œå°†æºç è§£ææˆASTï¼Œç„¶åæ£€æµ‹ASTæ˜¯å¦ç¬¦åˆè§„åˆ™ï¼›ESLintæœ€å¼€å§‹ä½¿ç”¨esprimaè§£æå™¨å°†æºç è§£ææˆASTï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ä»»æ„è§„åˆ™æ¥æ£€æµ‹ASTæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œè¿™ä¹Ÿæ˜¯ESLinté«˜å¯æ‰©å±•çš„åŸå› ã€‚ åˆšå¼€å§‹ESlintçš„æ¨å‡ºå¹¶æ²¡æœ‰æ’¼åŠ¨JSHintçš„éœ¸ä¸»åœ°ä½ï¼Œç”±äºESlintéœ€è¦å°†æºç è½¬ä¸ºASTï¼Œè€ŒJSHintç›´æ¥æ£€æµ‹æºæ–‡ä»¶å­—ç¬¦ä¸²ï¼Œå› æ­¤æ‰§è¡Œé€Ÿåº¦æ¯”JSHintæ…¢å¾ˆå¤šï¼›çœŸæ­£è®©ESLintå®ç°å¼¯é“è¶…è½¦çš„æ˜¯ES6çš„å‡ºç°ã€‚ 2015å¹´ï¼ŒES6è§„èŒƒå‘å¸ƒåï¼Œç”±äºå¤§éƒ¨åˆ†æµè§ˆå™¨æ”¯æŒç¨‹åº¦ä¸é«˜ï¼Œå› æ­¤éœ€è¦Babelå°†ä»£ç è½¬æ¢ç¼–è¯‘æˆES5æˆ–è€…æ›´ä½ç‰ˆæœ¬ï¼›åŒæ—¶ç”±äºES6å˜åŒ–å¾ˆå¤§ï¼ŒçŸ­æœŸå†…JSHintæ— æ³•å®Œå…¨æ”¯æŒï¼Œè¿™æ—¶ESLintçš„é«˜æ‰©å±•æ€§çš„ä¼˜ç‚¹æ˜¾ç°å‡ºæ¥äº†ï¼Œä¸ä»…å¯ä»¥æ‰©å±•è§„åˆ™ï¼Œè¿é»˜è®¤çš„è§£æå™¨ä¹Ÿèƒ½æ›¿æ¢ï¼›Babelå›¢é˜Ÿå°±ä¸ºESLintå¼€å‘äº†babel-eslintæ›¿æ¢é»˜è®¤çš„è§£æå™¨esprimaï¼Œè®©ESLintç‡å…ˆæ”¯æŒES6ã€‚ é…ç½® ESLintè¢«è®¾è®¡æˆå®Œå…¨å¯é…ç½®çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¤šç§æ–¹å¼é…ç½®å®ƒçš„è§„åˆ™ï¼Œæˆ–è€…é…ç½®è¦æ£€æµ‹æ–‡ä»¶çš„èŒƒå›´ã€‚ åˆå§‹åŒ– å¦‚æœæƒ³åœ¨ç°æœ‰çš„é¡¹ç›®ä¸­å¼•å…¥eslintï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­è¿›è¡Œåˆå§‹åŒ–ï¼š 12npm i eslint --save-devnpx eslint --init åœ¨ç»è¿‡ä¸€ç³»åˆ—é—®ç­”åï¼Œä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæˆ‘ä»¬ç†Ÿæ‚‰çš„.eslintrc.jsé…ç½®æ–‡ä»¶ï¼›å®‰è£…åå°±å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œå¯¹é¡¹ç›®ä¸­çš„æ–‡ä»¶éœ€è¦æ£€æµ‹äº†ï¼š 1234# æ£€æµ‹å•ä¸ªæ–‡ä»¶npx eslint file1.js file2.js# æ£€æµ‹srcå’Œscriptsç›®å½•npx eslint src scripts ä¸€èˆ¬æˆ‘ä»¬ä¼šæŠŠeslintå‘½ä»¤è¡Œé…ç½®åˆ°packages.jsonä¸­ï¼š 12345&quot;scripts&quot;: &#123; &quot;lint&quot;: &quot;npx eslint src scripts&quot;, &quot;lint:fix&quot;: &quot;npx eslint src scripts --fix&quot;, &quot;lint:create&quot;: &quot;npx eslint --init&quot;&#125; è¿™é‡Œæœ‰ä¸€ä¸ª--fixåç¼€ï¼Œæ˜¯ESLintæä¾›è‡ªåŠ¨ä¿®å¤åŸºç¡€é”™è¯¯çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬è¿è¡Œlint:fixåå‘ç°æœ‰ä¸€äº›æŠ¥é”™ä¿¡æ¯æ¶ˆå¤±äº†ï¼Œä»£ç ä¹Ÿæ”¹å˜äº†ï¼›ä¸è¿‡å®ƒåªèƒ½ä¿®å¤ä¸€äº›åŸºç¡€çš„ä¸å½±å“ä»£ç é€»è¾‘çš„é”™è¯¯ï¼Œæ¯”å¦‚ä»£ç æœ«å°¾åŠ ä¸Šåˆ†å·ã€è¡¨è¾¾å¼çš„ç©ºæ ¼ç­‰ç­‰ã€‚ ESLinté»˜è®¤åªä¼šæ£€æµ‹.jsåç¼€çš„æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¯¹æ›´å¤šç±»å‹çš„æ–‡ä»¶è¿›è¡Œæ£€æµ‹ï¼Œæ¯”å¦‚.vueã€.jsxï¼Œå¯ä»¥ä½¿ç”¨--exté€‰é¡¹ï¼Œå‚æ•°ç”¨é€—å·åˆ†éš”ï¼š 123&quot;scripts&quot;: &#123; &quot;lint&quot;: &quot;npx eslint --ext .js,.jsx,.vue src&quot;,&#125; å¯¹äºä¸€äº›å…¬å…±çš„jsï¼Œæˆ–è€…æµ‹è¯•è„šæœ¬ï¼Œä¸éœ€è¦è¿›è¡Œæ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª.eslintignoreå‘Šè¯‰ESLintå»å¿½ç•¥ç‰¹å®šçš„ç›®å½•æˆ–è€…æ–‡ä»¶: 12public/src/main.js é™¤äº†.eslintignoreä¸­æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•ï¼ŒESLintæ€»æ˜¯å¿½ç•¥/node_modules/* å’Œ/bower_components/*ä¸­çš„æ–‡ä»¶ï¼›å› æ­¤å¯¹äºä¸€äº›ç›®å‰è§£å†³ä¸äº†çš„è§„åˆ™æŠ¥é”™ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ‰“åŒ…ä¸Šçº¿ï¼Œåœ¨ä¸å½±å“è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨.eslintignoreæ–‡ä»¶å°†å…¶æš‚æ—¶å¿½ç•¥ã€‚ ESLintä¸€å…±æœ‰ä¸¤ç§é…ç½®æ–¹å¼ï¼Œç¬¬ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥æŠŠlintè§„åˆ™åµŒå…¥æºä»£ç ä¸­ï¼› 123/* eslint eqeqeq: &quot;error&quot; */var num = 1num == &#x27;1&#x27; eqeqeqä»£è¡¨eslintæ ¡éªŒè§„åˆ™ï¼Œerrorä»£è¡¨æ ¡éªŒæŠ¥é”™çº§åˆ«ï¼Œåé¢ä¼šè¯¦ç»†è¯´æ˜ï¼›è¿™ä¸ªeslintæ ¡éªŒè§„åˆ™åªä¼šå¯¹è¯¥æ–‡ä»¶ç”Ÿæ•ˆï¼š æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨é‡Šï¼Œæ›´ç²¾ç¡®åœ°ç®¡ç†eslintå¯¹æŸä¸ªæ–‡ä»¶æˆ–æŸä¸€è¡Œä»£ç çš„æ ¡éªŒï¼š 12345678910111213/* eslint-disable */alert(&#x27;è¯¥æ³¨é‡Šæ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨ï¼Œeslintä¸ä¼šæ£€æŸ¥æ•´ä¸ªæ–‡ä»¶&#x27;)/* eslint-enable */alert(&#x27;é‡æ–°å¯ç”¨eslintæ£€æŸ¥&#x27;)/* eslint-disable eqeqeq */alert(&#x27;åªç¦æ­¢æŸä¸€ä¸ªæˆ–å¤šä¸ªè§„åˆ™&#x27;)/* eslint-disable-next-line */alert(&#x27;ä¸‹ä¸€è¡Œç¦æ­¢eslintæ£€æŸ¥&#x27;)alert(&#x27;å½“å‰è¡Œç¦æ­¢eslintæ£€æŸ¥&#x27;) // eslint-disable-line ç¬¬äºŒç§æ–¹å¼æ˜¯ç›´æ¥æŠŠlintè§„åˆ™æ”¾åˆ°æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ä¸­ï¼Œä¸Šé¢initåˆå§‹åŒ–ç”Ÿæˆçš„.eslintrc.jså°±æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®˜æ–¹è¿˜æä¾›äº†å…¶ä»–å‡ ç§é…ç½®æ–‡ä»¶åç§°ï¼ˆä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹ï¼‰ï¼š 123456.eslintrc.js.eslintrc.yaml.eslintrc.yml.eslintrc.json.eslintrcpackage.json ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä½¿ç”¨.eslintrc.jså°±å¯ä»¥äº†ã€‚ é…ç½®è¯¦è§£ æˆ‘ä»¬è¯¦ç»†çœ‹ä¸‹.eslintrc.jsæ–‡ä»¶å†…éƒ¨æœ‰å“ªäº›é…ç½®é€‰é¡¹ï¼š 1234567891011121314module.exports = &#123; &quot;globals&quot;: &#123;&#125;, &quot;env&quot;: &#123; &quot;browser&quot;: true, &quot;es2021&quot;: true &#125;, &quot;extends&quot;: &quot;eslint:recommended&quot;, &quot;parse&quot;: &quot;babel-eslint&quot;, &quot;parserOptions&quot;: &#123; &quot;ecmaVersion&quot;: 12, &quot;sourceType&quot;: &quot;module&quot; &#125;, &quot;rules&quot;: &#123;&#125;&#125;; é¦–å…ˆæ˜¯æˆ‘ä»¬çš„globalsï¼ŒESLintä¼šæ£€æµ‹æœªå£°æ˜çš„å˜é‡ï¼Œå¹¶å‘å‡ºæŠ¥é”™ï¼Œæ¯”å¦‚nodeç¯å¢ƒä¸­çš„processï¼Œæµè§ˆå™¨ç¯å¢ƒä¸‹çš„å…¨å±€å˜é‡consoleï¼Œä»¥åŠæˆ‘ä»¬é€šè¿‡cdnå¼•å…¥çš„jQueryå®šä¹‰çš„$ç­‰ï¼›æˆ‘ä»¬å¯ä»¥åœ¨globalsä¸­è¿›è¡Œå˜é‡å£°æ˜ï¼š 1234567&#123; &quot;globals&quot;: &#123; // trueè¡¨ç¤ºè¯¥å˜é‡å¯è¯»å†™ï¼Œfalseè¡¨ç¤ºå˜é‡æ˜¯åªè¯» &quot;$&quot;: true, &quot;console&quot;: false &#125;&#125; ä½†æ˜¯nodeæˆ–è€…æµè§ˆå™¨ä¸­çš„å…¨å±€å˜é‡å¾ˆå¤šï¼Œå¦‚æœæˆ‘ä»¬ä¸€ä¸ªä¸ªè¿›è¡Œå£°æ˜æ˜¾å¾—ç¹çï¼Œå› æ­¤å°±éœ€è¦ç”¨åˆ°æˆ‘ä»¬çš„envï¼Œè¿™æ˜¯å¯¹ç¯å¢ƒå®šä¹‰çš„ä¸€ç»„å…¨å±€å˜é‡çš„é¢„è®¾ï¼š 1234567&#123; &quot;env&quot;: &#123; &quot;browser&quot;: true, &quot;node&quot;: true, &quot;jquery&quot;: true &#125;&#125; æ›´å¤šçš„ç¯å¢ƒå‚æ•°å¯ä»¥çœ‹ESLintå£°æ˜ç¯å¢ƒã€‚ ç„¶åå°±æ˜¯æˆ‘ä»¬çš„è§£æå™¨parseå’ŒparserOptionsï¼›æˆ‘ä»¬ä¸Šé¢è¯´åˆ°ESLintå¯ä»¥æ›´æ¢è§£æå™¨ï¼Œ&quot;parse&quot;: &quot;babel-eslint&quot;å°±æ˜¯ç”¨æ¥æŒ‡å®šè¦ä½¿ç”¨çš„è§£æå™¨ï¼Œå®ƒæœ‰ä»¥ä¸‹å‡ ä¸ªé€‰æ‹©ï¼š esprimaï¼šESLintæœ€å¼€å§‹ä½¿ç”¨çš„è§£æå™¨ espreeï¼šé»˜è®¤ï¼ŒESLintè‡ªå·±åŸºäºesprima v1.2.2å¼€å‘çš„ä¸€ä¸ªè§£æå™¨ babel-eslintï¼šä¸€ä¸ªå¯¹Babelè§£æå™¨çš„åŒ…è£…ï¼Œä½¿å…¶èƒ½å¤Ÿä¸ESLintå…¼å®¹ã€‚ @typescript-eslint/parserï¼šå°†TypeScriptè½¬æ¢æˆä¸estreeå…¼å®¹çš„å½¢å¼ï¼Œä»¥ä¾¿åœ¨ESLintä¸­ä½¿ç”¨ã€‚ é‚£ä¹ˆè¿™å‡ ä¸ªè§£æå™¨æ€ä¹ˆé€‰æ‹©å‘¢ï¼Ÿå¦‚æœä½ æƒ³ä½¿ç”¨ä¸€äº›å…ˆè¿›çš„è¯­æ³•ï¼ˆES6789ï¼‰ï¼Œå°±ä½¿ç”¨babel-eslintï¼ˆéœ€è¦npmå®‰è£…ï¼‰ï¼›å¦‚æœä½ æƒ³ä½¿ç”¨typescriptï¼Œå°±ä½¿ç”¨@typescript-eslint/parserã€‚ é€‰å¥½äº†è§£æå™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡parserOptionsç»™è§£æå™¨ä¼ å…¥ä¸€äº›å…¶ä»–çš„é…ç½®å‚æ•°ï¼š 123456789101112131415&#123; &quot;parser&quot;: &quot;babel-eslint&quot;, &quot;parserOptions&quot;: &#123; // ä»£ç æ¨¡å—ç±»å‹ï¼Œå¯é€‰script(é»˜è®¤)ï¼Œmodule &quot;sourceType&quot;: &quot;module&quot;, // esç‰ˆæœ¬å·ï¼Œé»˜è®¤ä¸º5ï¼Œå¯ä»¥ä½¿ç”¨å¹´ä»½2015ï¼ˆåŒ6ï¼‰ &quot;ecamVersion&quot;: 6, // es ç‰¹æ€§é…ç½® &quot;ecmaFeatures&quot;: &#123; &quot;globalReturn&quot;: true, // å…è®¸åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ä½¿ç”¨ return è¯­å¥ &quot;impliedStrict&quot;: true, // å¯ç”¨å…¨å±€ strict mode &quot;jsx&quot;: true // å¯ç”¨ JSX &#125; &#125;,&#125; è§„åˆ™ ESLintå¯ä»¥é…ç½®å¤§é‡çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶çš„ruleså±æ€§è‡ªå®šä¹‰éœ€è¦çš„è§„åˆ™ï¼š 12345678910&#123; &quot;rules&quot;:&#123; // &quot;semi&quot;: &quot;off&quot;, &quot;semi&quot;: 0, // &quot;quotes&quot;: &quot;warn&quot;, &quot;quotes&quot;: 1, // &quot;no-console&quot;: &quot;error&quot; &quot;no-console&quot;: 2 &#125;&#125; å¯¹äºæ£€éªŒè§„åˆ™ï¼Œæœ‰3ä¸ªæŠ¥é”™ç­‰çº§ï¼š â€œoffâ€ æˆ– 0ï¼šå…³é—­è§„åˆ™ â€œwarnâ€ æˆ– 1ï¼šå¼€å¯è§„åˆ™ï¼Œwarnçº§åˆ«çš„é”™è¯¯ (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º) â€œerrorâ€ æˆ– 2ï¼šå¼€å¯è§„åˆ™ï¼Œerrorçº§åˆ«çš„é”™è¯¯(å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º) æœ‰äº›è§„åˆ™æ²¡æœ‰å±æ€§ï¼Œåªéœ€æ§åˆ¶å¼€å¯è¿˜æ˜¯å…³é—­ï¼›æœ‰äº›è§„åˆ™å¯ä»¥ä¼ å…¥å±æ€§ï¼Œæˆ‘ä»¬é€šè¿‡æ•°ç»„çš„æ–¹å¼ä¼ å…¥å‚æ•°ï¼š 12345678910&#123; &quot;rules&quot;:&#123; // ä»£ç ç¼©è¿›ï¼Œä½¿ç”¨tabç¼©è¿›ï¼Œswitchè¯­å¥çš„caseç¼©è¿›çº§åˆ«ï¼Œ1è¡¨ç¤º2ä¸ªç©ºæ ¼ &quot;indent&quot;: [&quot;error&quot;, &quot;tab&quot;, &#123; &quot;SwitchCase&quot;: 1 &#125;], // å¼•å·ï¼ŒåŒå¼•å· &quot;quotes&quot;: [&quot;error&quot;, &quot;double&quot;], // åœ¨è¯­å¥æœ«å°¾ä½¿ç”¨åˆ†å· &quot;semi&quot;: [&quot;error&quot;, &quot;always&quot;] &#125;&#125; å¯¹äºåˆšæ¥è§¦ESLintçš„åŒå­¦ï¼Œçœ‹åˆ°è¿™ä¹ˆå¤šçš„è§„åˆ™è‚¯å®šå¾ˆæ‡µé€¼ï¼Œéš¾é“è¦ä¸€æ¡ä¸€æ¡æ¥è®°ä¹ˆï¼Ÿè‚¯å®šä¸æ˜¯çš„ï¼›é¡¹ç›®çš„ESLinté…ç½®æ–‡ä»¶å¹¶ä¸æ˜¯ä¸€æ¬¡æ€§å®Œæˆçš„ï¼Œè€Œæ˜¯åœ¨é¡¹ç›®å¼€å‘ä¸­æ…¢æ…¢å®Œå–„èµ·æ¥çš„ï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰çš„è§„åˆ™éƒ½æ˜¯æˆ‘ä»¬é¡¹ç›®æ‰€éœ€è¦çš„ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å…ˆè¿›è¡Œç¼–ç ï¼Œåœ¨ç¼–ç çš„è¿‡ç¨‹ä¸­ä½¿ç”¨npm run lintæ ¡éªŒä»£ç è§„èŒƒï¼Œå¦‚æœæŠ¥é”™ï¼Œå¯ä»¥é€šè¿‡æŠ¥é”™ä¿¡æ¯å»è¯¦ç»†æŸ¥çœ‹æ˜¯é‚£ä¸€æ¡è§„èŒƒæŠ¥é”™ï¼š æ¯”å¦‚è¿™é‡Œçš„æŠ¥é”™no-unused-varsæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒæ¥è‡ªç¬¬å…­è¡Œï¼Œå†å»æ–‡æ¡£æŸ¥æ‰¾ï¼Œå‘ç°æ˜¯æˆ‘ä»¬åœ¨jsä¸­æœ‰ä¸€ä¸ªå®šä¹‰äº†å´æœªä½¿ç”¨çš„å˜é‡ï¼›åœ¨å›¢é˜Ÿåå•†åå¯ä»¥è¿›ä¸€æ­¥æ¥ç¡®å®šé¡¹ç›®æ˜¯å¦éœ€è¦è¿™æ¡è§„èŒƒã€‚ æ‰©å±• å¦‚æœæ¯æ¡è§„åˆ™éƒ½éœ€è¦å›¢é˜Ÿåå•†é…ç½®è¿˜æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œåœ¨é¡¹ç›®å¼€å§‹é…ç½®æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ä¸€äº›ä¸šå†…å·²ç»æˆç†Ÿçš„ã€å¤§å®¶æ™®ééµå¾ªçš„ç¼–ç è§„èŒƒï¼ˆæœ€ä½³å®è·µï¼‰ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡extendså­—æ®µä¼ å…¥ä¸€äº›è§„èŒƒï¼Œå®ƒæ¥æ”¶String/Arrayï¼š 12345678&#123; &quot;extends&quot;: [ &quot;eslint:recommended&quot;, &quot;plugin:vue/essential&quot;, &quot;@vue/prettier&quot;, &quot;eslint-config-standard&quot; ]&#125; extendså¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡ ç§ç±»å‹çš„æ‰©å±•ï¼š eslintï¼šå¼€å¤´çš„ESLintå®˜æ–¹æ‰©å±•ï¼Œæœ‰ä¸¤ä¸ªï¼šeslint:recommendedï¼ˆæ¨èè§„èŒƒï¼‰å’Œeslint:allï¼ˆæ‰€æœ‰è§„èŒƒï¼‰ã€‚ pluginï¼šå¼€å¤´çš„æ‰©å±•æ˜¯æ’ä»¶ç±»å‹æ‰©å±• eslint-configï¼šå¼€å¤´çš„æ¥è‡ªnpmåŒ…ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥eslint-config-ï¼Œæ¯”å¦‚ä¸Šé¢çš„å¯ä»¥ç›´æ¥å†™æˆstandard @ï¼šå¼€å¤´çš„æ‰©å±•å’Œeslint-configä¸€æ ·ï¼Œæ˜¯åœ¨npmåŒ…ä¸Šé¢åŠ äº†ä¸€å±‚ä½œç”¨åŸŸscope éœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤šä¸ªæ‰©å±•ä¸­æœ‰ç›¸åŒçš„è§„åˆ™ï¼Œä»¥åé¢å¼•å…¥çš„æ‰©å±•ä¸­è§„åˆ™ä¸ºå‡†ã€‚ eslint:recommendedæ¨èä½¿ç”¨çš„è§„åˆ™åœ¨è§„åˆ™åˆ—è¡¨çš„å³ä¾§ç”¨ç»¿è‰²âˆšæ ‡è®°ã€‚ æ’ä»¶ç±»å‹çš„æ‰©å±•ä¸€èˆ¬å…ˆé€šè¿‡npmå®‰è£…æ’ä»¶ï¼Œä»¥ä¸Šé¢çš„vueä¸ºä¾‹ï¼Œæˆ‘ä»¬å…ˆæ¥å®‰è£…ï¼š 1npm install --save-dev eslint eslint-plugin-vue å®‰è£…åä¸€ä¸ªæ’ä»¶ä¸­ä¼šæœ‰å¾ˆå¤šåŒç±»å‹æ‰©å±•å¯ä¾›é€‰æ‹©ï¼Œæ¯”å¦‚vueå°±æœ‰ä»¥ä¸‹å‡ ç§æ‰©å±•ï¼š plugin:vue/baseï¼šåŸºç¡€ plugin:vue/essentialï¼šå¿…ä¸å¯å°‘çš„ plugin:vue/recommendedï¼šæ¨èçš„ plugin:vue/strongly-recommendedï¼šå¼ºçƒˆæ¨è é’ˆå¯¹æ‰©å±•ä¸­çš„è§„åˆ™ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿé€šè¿‡rulesæ¥å¯¹å®ƒè¿›è¡Œè¦†å†™ï¼š 123456789&#123; &quot;extends&quot;: [ &quot;plugin:vue/recommended&quot; ], &quot;rules&quot;: &#123; // è¦†å†™è§„åˆ™ &quot;vue/no-unused-vars&quot;: &quot;error&quot; &#125;&#125; é™¤äº†ä¸Šé¢çš„eslint-config-standardï¼Œè¿˜æœ‰ä»¥ä¸‹å‡ ä¸ªæ¯”è¾ƒçŸ¥åçš„ç¼–ç è§„èŒƒï¼š ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¾ˆå¤šè§„èŒƒä¸ä»…éœ€è¦å®‰è£…æ‰©å±•æœ¬èº«ï¼Œè¿˜éœ€è¦é…åˆæ’ä»¶ï¼Œæ¯”å¦‚eslint-config-standardï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…ä¸‹é¢å‡ ä¸ªæ’ä»¶æ‰èƒ½æœ‰æ•ˆï¼š 12npm i eslint-config-standard -Dnpm i eslint-plugin-promise eslint-plugin-import eslint-plugin-node -D æ’ä»¶ åœ¨Webpackä¸­ï¼Œæ’ä»¶æ˜¯ç”¨æ¥æ‰©å±•åŠŸèƒ½ï¼Œè®©å…¶èƒ½å¤Ÿå¤„ç†æ›´å¤šçš„æ–‡ä»¶ç±»å‹ä»¥åŠåŠŸèƒ½ï¼ŒESLintä¸­çš„æ’ä»¶ä¹Ÿæ˜¯åŒæ ·çš„ä½œç”¨ï¼›è™½ç„¶ESLintæä¾›äº†å‡ ç™¾ç§è§„åˆ™å¯ä¾›é€‰æ‹©ï¼Œä½†æ˜¯éšç€JSæ¡†æ¶å’Œè¯­æ³•çš„å‘å±•ï¼Œè¿™ä¹ˆå¤šè§„åˆ™è¿˜æ˜¯æ˜¾å¾—ä¸å¤Ÿï¼Œå› ä¸ºå®˜æ–¹çš„è§„åˆ™åªèƒ½æ£€æŸ¥æ ‡å‡†çš„JSè¯­æ³•ï¼›å¦‚æœæˆ‘ä»¬å†™çš„æ˜¯vueæˆ–è€…reactçš„jsxï¼Œé‚£ä¹ˆESLintå°±ä¸èƒ½æ£€æµ‹äº†ã€‚ è¿™æ—¶å°±éœ€è¦å®‰è£…ESLintæ’ä»¶ï¼Œç”¨æ¥å®šåˆ¶ä¸€äº›ç‰¹è‰²çš„è§„åˆ™è¿›è¡Œæ£€æµ‹ï¼›eslintæ’ä»¶ä»¥eslint-plugin-å¼€å¤´ï¼Œä½¿ç”¨æ—¶å¯ä»¥çœç•¥ï¼›æ¯”å¦‚æˆ‘ä»¬ä¸Šé¢æ£€æµ‹.vueæ–‡ä»¶å°±ç”¨åˆ°eslint-plugin-vueæ’ä»¶ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨é…ç½®eslint-plugin-vueè¿™ä¸ªæ’ä»¶æ—¶ï¼Œå¦‚æœä»…é…ç½®&quot;plugins&quot;: [&quot;vue&quot;]ï¼Œvueæ–‡ä»¶ä¸­templateå†…å®¹è¿˜æ˜¯ä¼šè§£æå¤±è´¥ã€‚ è¿™æ˜¯å› ä¸ºä¸ç®¡æ˜¯é»˜è®¤çš„espreeè¿˜æ˜¯babel-eslintè§£æå™¨éƒ½æ— æ³•è§£æ.vueä¸­templateçš„å†…å®¹ï¼›eslint-plugin-vueæ’ä»¶ä¾èµ–vue-eslint-parserè§£æå™¨ï¼Œè€Œvue-eslint-parserè§£æå™¨åªä¼šè§£ætemplateå†…å®¹ï¼Œä¸ä¼šæ£€æµ‹scriptæ ‡ç­¾ä¸­çš„JSå†…å®¹ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦æŒ‡å®šä¸€ä¸‹è§£æå™¨ï¼š 12345678910&#123; &quot;extends&quot;: [&quot;eslint:recommended&quot;], &quot;plugins&quot;: [&quot;vue&quot;], &quot;parser&quot;: &quot;vue-eslint-parser&quot;, &quot;parserOptions&quot;: &#123; &quot;parser&quot;: &quot;babel-eslint&quot;, &quot;ecmaVersion&quot;: 12, &quot;sourceType&quot;: &quot;module&quot;, &#125;,&#125; ä¸Šé¢parserOptions.parserä¸å°‘åŒå­¦è‚¯å®šçœ‹çš„æœ‰ç‚¹è¿·ç³Šï¼Œè¿™æ˜¯ç”±äºå¤–å±‚çš„è§£æå™¨åªèƒ½æœ‰ä¸€ä¸ªï¼Œæˆ‘ä»¬å·²ç»ç”¨äº†vue-eslint-parserå°±ä¸èƒ½å†å†™å…¶ä»–çš„ï¼›å› æ­¤vue-eslint-parserçš„åšæ³•æ˜¯åœ¨è§£æå™¨é€‰é¡¹ä¸­å†ä¼ å…¥ä¸€ä¸ªè§£æå™¨é€‰é¡¹ç”¨æ¥å¤„ç†scriptä¸­çš„JSå†…å®¹ã€‚ å¦‚æœæƒ³è®©ESLintæ£€æµ‹vueæ–‡ä»¶ï¼Œç¡®ä¿å°†.vueåç¼€åŠ å…¥--exté€‰é¡¹ä¸­ã€‚ è€Œreacté…ç½®åˆ™è¾ƒä¸ºç®€å•äº†ï¼Œå¼•å…¥æ’ä»¶ï¼Œé€‰æ‹©å¯¹åº”çš„æ‰©å±•è§„åˆ™å³å¯ï¼š 1234567891011121314151617&#123; &quot;extends&quot;: [ &quot;eslint:recommended&quot;, &quot;plugin:react/recommended&quot; ], &quot;parserOptions&quot;: &#123; // å¯ç”¨jsxè¯­æ³•æ”¯æŒ &quot;ecmaFeatures&quot;: &#123; &quot;jsx&quot;: true &#125;, &quot;ecmaVersion&quot;: 12, &quot;sourceType&quot;: &quot;module&quot; &#125;, &quot;plugins&quot;: [ &quot;react&quot; ],&#125; é…åˆprettier è™½ç„¶ESLintä¼šå¯¹æˆ‘ä»¬çš„ä»£ç æ ¼å¼è¿›è¡Œä¸€äº›æ£€æµ‹ï¼ˆæ¯”å¦‚åˆ†å·ã€å•åŒå¼•å·ç­‰ï¼‰ï¼Œä½†æ˜¯å¹¶ä¸èƒ½å®Œå…¨ç»Ÿä¸€ä»£ç é£æ ¼ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªå·¥å…·Prettierï¼›Prettieræ˜¯ä»€ä¹ˆï¼ŸPrettieræ˜¯ä¸€ä¸ªæ”¯æŒå¾ˆå¤šè¯­è¨€çš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®˜ç½‘ç”¨äº†ä¸€ä¸ªâ€œè´¬ä¹‰â€çš„å•è¯æ¥å½¢å®¹å®ƒopinionatedï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯å›ºæ‰§å·±è§çš„ã€‚ Prettierè¿˜æœ‰ä»¥ä¸‹å››ä¸ªç‰¹ç‚¹ï¼š An opinionated code formatter Supports many languages Integrates with most editors Has few options é‚£ä¹ˆä¸ºä»€ä¹ˆPrettierè¦ç”¨opinionatedè¿™ä¸ªè¯å‘¢ï¼Ÿæ¯ä¸ªå›¢é˜Ÿæˆå‘˜å¯èƒ½ä¼šç”¨ä¸åŒçš„ç¼–è¾‘å™¨æˆ–æ˜¯ä¸åŒçš„æ’ä»¶ï¼Œæ¯ä¸ªæ’ä»¶ä¹Ÿä¼šæœ‰è‡ªå·±çš„æ ¼å¼åŒ–è§„èŒƒï¼Œè¿™æ ·å°±å¯¼è‡´äº†æˆ‘ä»¬åœ¨å¼€å‘æ—¶ä»£ç é£æ ¼æå¤§çš„ä¸ç»Ÿä¸€ï¼Œç”šè‡³é€ æˆä¸å¿…è¦çš„å†²çªï¼›Prettierå°±ç»™æˆ‘ä»¬å®šä¹‰å¥½äº†é£æ ¼ï¼ŒæŒ‰ç…§å®ƒçš„é£æ ¼æ¥ï¼ˆæ˜¯ä¸æ˜¯å¾ˆåƒJSLintï¼‰ï¼›ä½†æ˜¯åˆæ²¡æœ‰å®Œå…¨å°é—­ï¼Œå¼€æ”¾äº†ä¸€äº›å¿…è¦çš„è®¾ç½®ï¼Œè¿™ä¹Ÿæ˜¯æœ€åä¸€ç‚¹few optionsçš„å«ä¹‰ï¼›å› æ­¤æˆ‘ä»¬åªéœ€è¦å°†ä»£ç çš„ç¾åŒ–äº¤ç»™Prettieræ¥åšå°±å¥½äº†ã€‚ é¦–å…ˆè¿˜æ˜¯å®‰è£…ï¼Œæˆ‘ä»¬å°†æ‰€éœ€çš„æ’ä»¶è¿›è¡Œå®‰è£…ï¼Œè¿™é‡Œç”¨åˆ°prettierçš„ä¸‰ä¸ªåŒ…ï¼š 123npm i prettier eslint-plugin-prettier eslint-config-prettier é¦–å…ˆå°±æ˜¯è¿™ä¸ªeslint-plugin-prettieræ’ä»¶ï¼Œå®ƒä¼šè°ƒç”¨prettierå¯¹ä½ çš„ä»£ç é£æ ¼è¿›è¡Œæ£€æŸ¥ï¼Œå…¶åŸç†æ˜¯å…ˆä½¿ç”¨prettierå¯¹ä½ çš„ä»£ç è¿›è¡Œæ ¼å¼åŒ–ï¼Œç„¶åä¸æ ¼å¼åŒ–ä¹‹å‰çš„ä»£ç è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœè¿‡å‡ºç°äº†ä¸ä¸€è‡´ï¼Œè¿™ä¸ªåœ°æ–¹å°±ä¼šè¢«prettierè¿›è¡Œæ ‡è®°ã€‚ è¢«æ ‡è®°åPrettierå¹¶ä¸ä¼šæœ‰ä»»ä½•æç¤ºï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹æ ‡è®°åçš„ä»£ç è¿›è¡ŒæŠ¥é”™å¤„ç†ï¼Œåœ¨rulesä¸­è¿›è¡Œæ·»åŠ é…ç½®ï¼š 123456&#123; &quot;plugins&quot;: [&quot;prettier&quot;], &quot;rules&quot;: &#123; &quot;prettier/prettier&quot;: &quot;error&quot;, &#125;&#125; å¦‚æœä¸å¸Œæœ›Prettierå½±å“é¡¹ç›®æ‰“åŒ…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†prettierçš„æŠ¥é”™ç”±erroræ”¹ä¸ºwarn å€ŸåŠ©ESLintçš„è‡ªåŠ¨ä¿®å¤--fixï¼Œæˆ‘ä»¬å¯ä»¥ä¿®å¤è¿™ç§ç®€å•çš„æ ·å¼é—®é¢˜ï¼›é‚£å¦‚æœæˆ‘ä»¬æƒ³è‡ªå®šä¹‰ä¸€äº›æ ·å¼æ€ä¹ˆåŠå‘¢ï¼Ÿæ²¡å…³ç³»ï¼Œè™½ç„¶Prettieræ˜¯ä¸€ä¸ªå›ºæ‰§å·±è§çš„å·¥å…·ï¼Œä½†æ˜¯äººå®¶ä¹Ÿæ˜¯å¼€æ”¾äº†ä¸€äº›é…ç½®å¯ä¾›æˆ‘ä»¬è¿›è¡Œè‡ªå®šä¹‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ª.prettierrc.jsonæ–‡ä»¶ï¼š 12345678910111213141516&#123; // å°¾é€—å· &quot;trailingComma&quot;: &quot;es5&quot;, // ç¼©è¿›é•¿åº¦ &quot;tabWidth&quot;: 4, // ä»£ç æœ«å°¾åˆ†å· &quot;semi&quot;: false, // å•å¼•å· &quot;singleQuote&quot;: true, // å•è¡Œä»£ç æœ€å¤§é•¿åº¦ &quot;printWidth&quot;: 100, // å¯¹è±¡å­—é¢é‡çš„æ‹¬å· &quot;bracketSpacing&quot;: true, // ç®­å¤´å‡½æ•°å‚æ•°åŠ æ‹¬å· &quot;arrowParens&quot;: &quot;always&quot;,&#125; è¿™é‡Œç®€å•è´´ä¸€äº›å¸¸ç”¨çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®˜ç½‘é€‰é¡¹é…ç½®æ‰¾åˆ°æ›´å¤šçš„é…ç½®è§„åˆ™ã€‚ è¿™æ ·é…ç½®åè™½ç„¶èƒ½ä¿®å¤ä»£ç äº†ï¼Œä½†æ˜¯å¦‚æœé‡åˆ°å¦ä¸€ä¸ªä¹Ÿå›ºæ‰§å·±è§çš„æ‰©å±•ï¼Œæ¯”å¦‚æˆ‘ä»¬å¼•å…¥eslint-config-standardè¿™ä¸ªæ‰©å±•ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„ä»£ç é£æ ¼ï¼›å¦‚æœé€šè¿‡Prettieræ ¼å¼åŒ–ï¼Œstandardä¸å¹²äº†ï¼›å¦‚æœé€šè¿‡standardè‡ªåŠ¨ä¿®å¤ï¼Œé‚£ä¹ˆPrettieråˆè¦æŠ¥é”™äº†ï¼Œä¸¤è¾¹éƒ½æ˜¯å¤§çˆ·è¿™å¯å’‹æ•´å‘¢ï¼Ÿ æœºæ™ºçš„Prettierå·²ç»å¸®æˆ‘ä»¬è€ƒè™‘åˆ°è¿™ä¸ªé—®é¢˜äº†ï¼Œåˆ©ç”¨extendsä¸­æœ€åä¸€ä¸ªè¦†ç›–å‰é¢æ‰©å±•çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å°†eslint-config-prettieré…ç½®åœ¨extendsæœ€åï¼Œå°±èƒ½å¤Ÿå…³é—­ä¸€äº›ä¸Prettierçš„è§„åˆ™ï¼š 1234567&#123; &quot;extends&quot;: [&quot;standard&quot;, &quot;prettier&quot;], &quot;plugins&quot;: [&quot;prettier&quot;], &quot;rules&quot;: &#123; &quot;prettier/prettier&quot;: &quot;error&quot;, &#125;&#125; å¦å¤–eslint-plugin-prettieræ’ä»¶ä¹Ÿé™„å¸¦æœ‰plugin:prettier/recommendedæ‰©å±•é…ç½®ï¼Œå¯ä»¥åŒæ—¶å¯ç”¨æ’ä»¶å’Œeslint-config-prettieræ‰©å±•ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åªéœ€è¦é…ç½®recommendedå°±å¯ä»¥äº†ï¼š 123456&#123; &quot;extends&quot;: [&quot;standard&quot;, &quot;plugin:prettier/recommended&quot;], &quot;rules&quot;: &#123; &quot;prettier/prettier&quot;: &quot;error&quot;, &#125;&#125; Vueä¸­ä¸ºäº†æ”¯æŒPrettierï¼Œä¹Ÿå°†eslint-plugin-prettierå’Œeslint-config-prettieræ•´åˆåˆ°ä¸€èµ·ï¼Œæ”¾åˆ°äº†node_modules/@vue/eslint-config-prettierç›®å½•ä¸­ï¼ˆåŠ äº†ä¸€å±‚ä½œç”¨åŸŸï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åœ¨Vueè„šæ‰‹æ¶ç”Ÿæˆçš„é¡¹ç›®ç»å¸¸èƒ½çœ‹åˆ°@vue/prettierè¿™ä¸ªæ‰©å±•ï¼Œæ‰“å¼€å®ƒçš„ç›®å½•å‘ç°å…¶æœ¬è´¨æ˜¯ä¸€æ ·çš„ï¼š 12345678910module.exports = &#123; plugins: [&#x27;prettier&#x27;], extends: [ require.resolve(&#x27;eslint-config-prettier&#x27;), require.resolve(&#x27;eslint-config-prettier/vue&#x27;) ], rules: &#123; &#x27;prettier/prettier&#x27;: &#x27;warn&#x27; &#125;&#125;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"}]},{"title":"å‰ç«¯æŠ¢é¥­ç¢—ç³»åˆ—ä¹‹Vueé¡¹ç›®ä¸­å¦‚ä½•åšå•å…ƒæµ‹è¯•","date":"2021-04-14T04:47:49.000Z","path":"2021/04/14/Vue-Unit-Test.html","text":"å…³äºå•å…ƒæµ‹è¯•ï¼Œæœ€å¸¸è§çš„é—®é¢˜åº”è¯¥å°±æ˜¯â€œå‰ç«¯å•å…ƒæµ‹è¯•æœ‰å¿…è¦å—ï¼Ÿâ€ï¼Œé€šè¿‡è¿™ç¯‡æ–‡ç« ï¼Œä½ å°†ä¼šäº†è§£å•å…ƒæµ‹è¯•çš„å¿…è¦æ€§ï¼Œä»¥åŠåœ¨Vueé¡¹ç›®ä¸­å¦‚ä½•èƒ½å¤Ÿå…¨é¢å¯é çš„æµ‹è¯•æˆ‘ä»¬å†™çš„ç»„ä»¶ã€‚ å•å…ƒæµ‹è¯•çš„å¿…è¦æ€§ ä¸€èˆ¬åœ¨æˆ‘ä»¬çš„å°è±¡é‡Œï¼Œå•å…ƒæµ‹è¯•éƒ½æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆçš„å·¥ä½œï¼Œå‰ç«¯è´Ÿè´£ä»£ç å°±è¡Œäº†ï¼›ç™¾åº¦æœç´¢Vueå•å…ƒæµ‹è¯•ï¼Œè”æƒ³è¯å‡ºæ¥çš„éƒ½æ˜¯â€œå•å…ƒæµ‹è¯•æœ‰å¿…è¦å—ï¼Ÿâ€ â€œå•å…ƒæµ‹è¯•æ˜¯åšä»€ä¹ˆçš„ï¼Ÿâ€è™½ç„¶æˆ‘ä»¬å¹³æ—¶é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½ä¼šæœ‰æµ‹è¯•å·¥ç¨‹å¸ˆæ¥å¯¹æˆ‘ä»¬çš„é¡µé¢è¿›è¡Œæµ‹è¯•â€œå…œåº•â€ï¼Œä½†æ˜¯æ ¹æ®æˆ‘çš„è§‚å¯Ÿï¼Œä¸€èˆ¬æµ‹è¯•å·¥ç¨‹å¸ˆå¹¶ä¸ä¼šè¦†ç›–æ‰€æœ‰çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸”æœ‰ä¸€äº›æ·±å±‚æ¬¡çš„ä»£ç é€»è¾‘æµ‹è¯•å·¥ç¨‹å¸ˆåœ¨ä¸äº†è§£ä»£ç çš„æƒ…å†µä¸‹ä¹Ÿæ ¹æœ¬æ— æ³•è¿›è¡Œè§¦å‘ã€‚å› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½å¤Ÿå®Œå…¨çš„ä¾èµ–æµ‹è¯•å·¥ç¨‹å¸ˆå¯¹æˆ‘ä»¬é¡¹ç›®æµ‹è¯•ï¼Œå‰ç«¯é¡¹ç›®çš„å•å…ƒæµ‹è¯•å°±æ˜¾å¾—éå¸¸çš„æœ‰å¿…è¦ã€‚ è€Œä¸”å•å…ƒæµ‹è¯•ä¹Ÿèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬èŠ‚çœå¾ˆå¤§ä¸€éƒ¨åˆ†è‡ªæˆ‘æµ‹è¯•çš„æˆæœ¬ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªè®¢å•å±•ç¤ºçš„ç»„ä»¶ï¼Œæ ¹æ®è®¢å•çŠ¶æ€çš„ä¸åŒä»¥åŠå…¶ä»–çš„ä¸€äº›ä¸šåŠ¡é€»è¾‘æ¥è¿›è¡Œå¯¹åº”æ–‡æ¡ˆçš„å±•ç¤ºï¼›æˆ‘ä»¬æƒ³åœ¨é¡µé¢ä¸ŠæŸ¥çœ‹æ–‡æ¡ˆå±•ç¤ºæ˜¯å¦æ­£ç¡®ï¼Œè¿™æ—¶å°±éœ€è¦ç¹ççš„å¡«å†™ä¸‹å•ä¿¡æ¯åæ‰èƒ½æŸ¥çœ‹ï¼›å¦‚æœç¬¬äºŒå¤©åˆåˆåŠ å…¥äº†ä¸€äº›æ–°çš„é€»è¾‘åˆ¤æ–­ï¼ˆä½ å‰ä¸€å¤©ä¸‹çš„å•æ—©å°±è¿‡æœŸå•¦ï¼‰ï¼Œè¿™æ—¶ä½ æœ‰ä¸‰ä¸ªé€‰æ‹©ï¼Œç¬¬ä¸€ç§é€‰æ‹©å°±æ˜¯å†æ¬¡ç¹çåœ°å¡«å†™è®¢å•å¹¶æ”¯ä»˜å®Œï¼ˆåˆç»™è€æ¿æä¾›èµ„é‡‘æ”¯æŒäº†ï¼‰ï¼Œç¬¬äºŒç§é€‰æ‹©å°±æ˜¯æ­»çš®èµ–è„¸çš„æ±‚ç€åç«¯åŒäº‹ç»™ä½ æ›´æ”¹è®¢å•çŠ¶æ€ï¼ˆåç«¯åŒäº‹ç»™ä½ ä¸€ä¸ªç™½çœ¼è‡ªå·±ä½“ä¼šï¼‰ï¼Œç¬¬ä¸‰ç§é€‰æ‹©å°±æ˜¯ä»£ç†æ¥å£æˆ–è€…ä½¿ç”¨mockæ•°æ®ï¼ˆä½ éœ€è¦ç¼–è¯‘æ•´ä¸ªé¡¹ç›®è¿è¡Œè¿›è¡Œæµ‹è¯•ï¼‰ã€‚ è¿™æ—¶ï¼Œå•å…ƒæµ‹è¯•å°±æä¾›äº†ç¬¬å››ç§æˆæœ¬æ›´ä½çš„æµ‹è¯•æ–¹å¼ï¼Œå†™ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œæ¥å¯¹æˆ‘ä»¬çš„ç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼Œåˆ¤æ–­æ–‡æ¡ˆæ˜¯å¦æŒ‰ç…§æˆ‘ä»¬é¢„æƒ³çš„æ–¹å¼è¿›è¡Œå±•ç¤ºï¼›è¿™ç§æ–¹å¼æ—¢ä¸éœ€è¦ä¾èµ–åç«¯çš„ååŠ©ï¼Œä¹Ÿä¸éœ€è¦å¯¹é¡¹ç›®è¿›è¡Œä»»ä½•æ”¹åŠ¨ï¼Œå¯è°“æ˜¯çœæ—¶åˆçœåŠ›ã€‚ æµ‹è¯•æ¡†æ¶å’Œæ–­è¨€åº“ è¯´åˆ°å•å…ƒæµ‹è¯•ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥ä»‹ç»ä¸€ä¸‹æµè¡Œçš„æµ‹è¯•æ¡†æ¶ï¼Œä¸»è¦æ˜¯mochaå’Œjestã€‚å…ˆç®€å•ä»‹ç»ä¸‹mochaï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯æ‘©å¡ï¼ˆäººå®¶æ˜¯ä¸€ç§å’–å•¡ï¼ä¸æ˜¯æŠ¹èŒ¶å•Šï¼‰ï¼Œåå­—çš„ç”±æ¥ä¼°çŒœæ˜¯å› ä¸ºå¼€å‘äººå‘˜å–œæ¬¢å–æ‘©å¡å’–å•¡ï¼Œå°±åƒJavaåå­—ä¹Ÿæ˜¯ä»å’–å•¡ç”±æ¥ä¸€æ ·ï¼Œmochaçš„logoä¹Ÿæ˜¯ä¸€æ¯æ‘©å¡å’–å•¡ï¼š å’Œjestç›¸æ¯”ï¼Œä¸¤è€…ä¸»è¦çš„ä¸åŒå°±æ˜¯jestå†…ç½®äº†é›†æˆåº¦æ¯”è¾ƒé«˜çš„æ–­è¨€åº“expect.jsï¼Œè€Œmochaéœ€è¦æ­é…é¢å¤–çš„æ–­è¨€åº“ï¼Œä¸€èˆ¬ä¼šé€‰æ‹©æ¯”è¾ƒæµè¡Œçš„chaiä½œä¸ºæ–­è¨€åº“ï¼Œè¿™é‡Œä¸€ç›´æåˆ°æ–­è¨€åº“ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯æ–­è¨€åº“å‘¢ï¼Ÿæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹mochaæ˜¯æ€ä¹ˆæ¥æµ‹è¯•ä»£ç çš„ï¼Œé¦–å…ˆæˆ‘ä»¬å†™äº†ä¸€ä¸ªaddNumå‡½æ•°ï¼Œä½†æ˜¯ä¸ç¡®å®šæ˜¯å¦è¿”å›æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå› æ­¤éœ€è¦å¯¹è¿™ä¸ªå‡½æ•°è¿›è¡Œæµ‹è¯•ï¼š 12345//src/index.jsfunction addNum(a, b) &#123; return a + b;&#125;module.exports = addNum; ç„¶åå°±å¯ä»¥å†™æˆ‘ä»¬çš„æµ‹è¯•æ–‡ä»¶äº†ï¼Œæ‰€æœ‰çš„æµ‹è¯•æ–‡ä»¶éƒ½æ”¾åœ¨testç›®å½•ä¸‹ï¼Œä¸€èˆ¬ä¼šå°†æµ‹è¯•æ–‡ä»¶å’Œæ‰€è¦æµ‹è¯•çš„æºç æ–‡ä»¶åŒåï¼Œæ–¹ä¾¿è¿›è¡Œå¯¹åº”ï¼Œè¿è¡Œmochaæ—¶ä¼šè‡ªåŠ¨å¯¹testç›®å½•ä¸‹æ‰€æœ‰jsæ–‡ä»¶è¿›è¡Œæµ‹è¯•ï¼š 123456789//test/index.test.jsvar addNum = require(&quot;../src/index&quot;);describe(&quot;æµ‹è¯•addNumå‡½æ•°&quot;, () =&gt; &#123; it(&quot;ä¸¤æ•°ç›¸åŠ ç»“æœä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ&quot;, () =&gt; &#123; if (addNum(1, 2) !== 3) &#123; throw new Error(&quot;ä¸¤æ•°ç›¸åŠ ç»“æœä¸ä¸ºä¸¤ä¸ªæ•°å­—çš„å’Œ&quot;); &#125; &#125;);&#125;); ä¸Šé¢è¿™æ®µä»£ç å°±æ˜¯æµ‹è¯•è„šæœ¬çš„è¯­æ³•ï¼Œä¸€ä¸ªæµ‹è¯•è„šæœ¬ä¼šåŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªdescribeå—ï¼Œæ¯ä¸ªdescribeåˆåŒ…æ‹¬ä¸€ä¸ªæˆ–å¤šä¸ªitå—ï¼›è¿™é‡Œdescribeç§°ä¸ºæµ‹è¯•å¥—ä»¶ï¼ˆtest suiteï¼‰ï¼Œè¡¨ç¤ºä¸€ç»„ç›¸å…³çš„æµ‹è¯•ï¼Œå®ƒåŒ…å«äº†ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¿™ä¸ªæµ‹è¯•å¥—ä»¶çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å®é™…æ‰§è¡Œçš„å‡½æ•°ã€‚ è€Œitç§°ä¸ºæµ‹è¯•ç”¨ä¾‹ï¼Œè¡¨ç¤ºä¸€ä¸ªå•ç‹¬çš„æµ‹è¯•ï¼Œæ˜¯æµ‹è¯•çš„æœ€å°å•ä½ï¼Œå®ƒä¹ŸåŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æµ‹è¯•ç”¨ä¾‹çš„åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å®é™…æ‰§è¡Œçš„å‡½æ•°ã€‚ itå—ä¸­å°±æ˜¯æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„ä»£ç ï¼Œå¦‚æœè¿è¡Œç»“æœä¸æ˜¯æˆ‘ä»¬æ‰€é¢„æœŸçš„å°±æŠ›å‡ºå¼‚å¸¸ï¼›ä¸Šé¢çš„æµ‹è¯•ç”¨ä¾‹å†™å¥½åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œæµ‹è¯•äº†ï¼Œ è¿è¡Œç»“æœé€šè¿‡äº†ï¼Œæ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œè¯´æ˜æˆ‘ä»¬çš„å‡½æ•°æ˜¯æ­£ç¡®çš„ï¼›ä½†æ˜¯æ¯æ¬¡éƒ½é€šè¿‡æŠ›å‡ºå¼‚å¸¸æ¥åˆ¤æ–­ï¼Œå¤šå°‘æœ‰ç‚¹ç¹çäº†ï¼Œæ–­è¨€åº“å°±å‡ºç°äº†ï¼›æ–­è¨€çš„ç›®çš„å°±æ˜¯å°†æµ‹è¯•ä»£ç è¿è¡Œåå’Œæˆ‘ä»¬çš„é¢„æœŸåšæ¯”è¾ƒï¼Œå¦‚æœå’Œé¢„æœŸä¸€è‡´ï¼Œå°±è¡¨æ˜ä»£ç æ²¡æœ‰é—®é¢˜ï¼›å¦‚æœå’Œé¢„æœŸä¸ä¸€è‡´ï¼Œå°±æ˜¯ä»£ç æœ‰é—®é¢˜äº†ï¼›æ¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æœ€åéƒ½ä¼šæœ‰ä¸€ä¸ªæ–­è¨€è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ²¡æœ‰æ–­è¨€ï¼Œæµ‹è¯•å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚ ä¸Šé¢ä¹Ÿè¯´äº†mochaä¸€èˆ¬æ­é…chaiæ–­è¨€åº“ï¼Œè€Œchaiæœ‰å¥½å‡ ç§æ–­è¨€é£æ ¼ï¼Œæ¯”è¾ƒå¸¸è§çš„æœ‰shouldå’Œexpectä¸¤ç§é£æ ¼ï¼Œæˆ‘ä»¬åˆ†åˆ«çœ‹ä¸‹è¿™ä¸¤ç§æ–­è¨€ï¼š 123456789101112var chai = require(&quot;chai&quot;), expect = chai.expect, should = chai.should();describe(&quot;æµ‹è¯•addNumå‡½æ•°&quot;, () =&gt; &#123; it(&quot;1+2&quot;, () =&gt; &#123; addNum(1, 2).should.equal(3); &#125;); it(&quot;2+3&quot;, () =&gt; &#123; expect(addNum(2, 3)).to.be.equal(5); &#125;);&#125;); è¿™é‡Œshouldæ˜¯åç½®çš„ï¼Œåœ¨æ–­è¨€å˜é‡ä¹‹åï¼Œè€Œexpectæ˜¯å‰ç½®çš„ï¼Œä½œä¸ºæ–­è¨€çš„å¼€å§‹ï¼Œä¸¤ç§é£æ ¼çº¯ç²¹çœ‹ä¸ªäººå–œå¥½ï¼›æˆ‘ä»¬å‘ç°è¿™é‡Œexpectæ˜¯ä»chaiä¸­è·å–çš„ä¸€ä¸ªå‡½æ•°ï¼Œè€Œshouldåˆ™æ˜¯ç›´æ¥è°ƒç”¨ï¼Œè¿™æ˜¯å› ä¸ºshouldå®é™…ä¸Šæ˜¯ç»™æ‰€æœ‰çš„å¯¹è±¡éƒ½æ‰©å……äº†ä¸€ä¸ª getter å±æ€§shouldï¼Œå› æ­¤æˆ‘ä»¬æ‰èƒ½å¤Ÿåœ¨å˜é‡ä¸Šä½¿ç”¨.shouldæ–¹å¼æ¥è¿›è¡Œæ–­è¨€ã€‚ å’Œchaiçš„å¤šç§æ–­è¨€é£æ ¼ä¸åŒï¼Œjestå†…ç½®äº†æ–­è¨€åº“expectï¼Œå®ƒçš„è¯­æ³•åˆæœ‰äº›ä¸åŒï¼š 12345678describe(&quot;æµ‹è¯•addNumå‡½æ•°&quot;, () =&gt; &#123; it(&quot;1+2&quot;, () =&gt; &#123; expect(addNum(1, 2)).toBe(3); &#125;); it(&quot;2+3&quot;, () =&gt; &#123; expect(addNum(2, 3)).toBe(5); &#125;);&#125;); jestä¸­çš„expectç›´æ¥é€šè¿‡toBeçš„è¯­æ³•ï¼Œåœ¨å½¢å¼ä¸Šç›¸è¾ƒäºmochaæ›´ä¸ºç®€æ´ï¼›è¿™ä¸¤ä¸ªæ¡†æ¶åœ¨ä½¿ç”¨ä¸Šæå…¶ç›¸ä¼¼ï¼Œæ¯”å¦‚åœ¨å¼‚æ­¥ä»£ç ä¸Šéƒ½æ”¯æŒdoneå›è°ƒå’Œasync/awaitå…³é”®å­—ï¼Œåœ¨æ–­è¨€è¯­æ³•å’Œå…¶ä»–ç”¨æ³•æœ‰äº›å·®åˆ«ï¼›ä¸¤è€…ä¹Ÿæœ‰ç›¸åŒçš„é’©å­æœºåˆ¶ï¼Œè¿åå­—éƒ½ç›¸åŒbeforeEachå’ŒafterEachï¼›åœ¨vue cliè„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®æ—¶ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸¤ä¸ªæ¡†æ¶ä¸­è¿›è¡Œé€‰æ‹©å…¶ä¸€ï¼Œæˆ‘ä»¬è¿™é‡Œä¸»è¦ä»¥jestè¿›è¡Œæµ‹è¯•ã€‚ Jest Jestæ˜¯Facebookå‡ºå“çš„ä¸€ä¸ªæµ‹è¯•æ¡†æ¶ï¼Œç›¸è¾ƒäºå…¶ä»–æµ‹è¯•æ¡†æ¶ï¼Œæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å†…ç½®äº†å¸¸ç”¨çš„æµ‹è¯•å·¥å…·ï¼Œæ¯”å¦‚è‡ªå¸¦æ–­è¨€ã€æµ‹è¯•è¦†ç›–ç‡å·¥å…·ï¼Œå®ç°äº†å¼€ç®±å³ç”¨ï¼Œè¿™ä¹Ÿå’Œå®ƒå®˜æ–¹çš„sloganç›¸ç¬¦ã€‚ Jest æ˜¯ä¸€ä¸ªä»¤äººæ„‰å¿«çš„ JavaScript æµ‹è¯•æ¡†æ¶ï¼Œä¸“æ³¨äºç®€æ´æ˜å¿«ã€‚ Jestå‡ ä¹æ˜¯é›¶é…ç½®çš„ï¼Œå®ƒä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›å¸¸ç”¨çš„æµ‹è¯•æ–‡ä»¶ï¼Œæ¯”å¦‚*.spec.jså’Œ *.test.jsåç¼€çš„æµ‹è¯•è„šæœ¬ï¼Œæ‰€æœ‰çš„æµ‹è¯•è„šæœ¬éƒ½æ”¾åœ¨testsæˆ–__tests__ç›®å½•ä¸‹ï¼›æˆ‘ä»¬å¯ä»¥åœ¨å…¨å±€å®‰è£…jestæˆ–è€…å±€éƒ¨å®‰è£…ï¼Œç„¶ååœ¨packages.jsonä¸­æŒ‡å®šæµ‹è¯•è„šæœ¬ï¼š 12345&#123; &quot;scripts&quot;: &#123; &quot;test&quot;: &quot;jest&quot; &#125;&#125; å½“æˆ‘ä»¬è¿è¡Œnpm run testæ—¶ä¼šè‡ªåŠ¨è¿è¡Œæµ‹è¯•ç›®å½•ä¸‹æ‰€æœ‰æµ‹è¯•æ–‡ä»¶ï¼Œå®Œæˆæµ‹è¯•ï¼›æˆ‘ä»¬åœ¨jestå®˜ç½‘å¯èƒ½è¿˜ä¼šçœ‹åˆ°é€šè¿‡testå‡½æ•°å†™çš„æµ‹è¯•ç”¨ä¾‹ï¼š 123test(&quot;1+2&quot;, () =&gt; &#123; expect(addNum(1, 2)).toBe(3);&#125;); å’Œitå‡½æ•°ç›¸åŒï¼Œtestå‡½æ•°ä¹Ÿä»£è¡¨ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œmochaåªæ”¯æŒitï¼Œè€Œjestæ”¯æŒitå’Œtestï¼Œè¿™é‡Œä¸ºäº†å’Œjestå®˜ç½‘ä¿æŒç»Ÿä¸€ï¼Œä¸‹é¢ä»£ç ç»Ÿä¸€ä½¿ç”¨testå‡½æ•°ã€‚ åŒ¹é…å™¨ æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹æµ‹è¯•ä»£ç è¿”å›çš„å€¼è¿›è¡ŒåŒ¹é…æµ‹è¯•ï¼Œä¸Šé¢ä»£ç ä¸­çš„toBeæ˜¯æœ€ç®€å•çš„ä¸€ä¸ªåŒ¹é…å™¨ï¼Œç”¨æ¥æµ‹è¯•ä¸¤ä¸ªæ•°å€¼æ˜¯å¦ç›¸åŒã€‚ 12345678test(&quot;test tobe&quot;, () =&gt; &#123; expect(2 + 2).toBe(4); expect(true).toBe(true); const val = &quot;team&quot;; expect(val).toBe(&quot;team&quot;); expect(undefined).toBe(undefined); expect(null).toBe(null);&#125;); toBeå‡½æ•°å†…éƒ¨ä½¿ç”¨äº†Object.isæ¥è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œå®ƒçš„ç‰¹æ€§ç±»ä¼¼äº===ï¼›å¯¹äºæ™®é€šç±»å‹çš„æ•°å€¼å¯ä»¥è¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯å¯¹äºå¯¹è±¡æ•°ç»„ç­‰å¤æ‚ç±»å‹ï¼Œå°±éœ€è¦ç”¨åˆ°toEqualæ¥æ¯”è¾ƒäº†ï¼š 1234567891011121314 test(&quot;expect a object&quot;, () =&gt; &#123; var obj = &#123; a: &quot;1&quot;, &#125;; obj.b = &quot;2&quot;; expect(obj).toEqual(&#123; a: &quot;1&quot;, b: &quot;2&quot; &#125;);&#125;);test(&quot;expect array&quot;, () =&gt; &#123; var list = []; list.push(1); list.push(2); expect(list).toEqual([1, 2]);&#125;); æˆ‘ä»¬æœ‰æ—¶å€™è¿˜éœ€è¦å¯¹undefinedã€nullç­‰ç±»å‹æˆ–è€…å¯¹æ¡ä»¶è¯­å¥ä¸­çš„è¡¨è¾¾å¼çš„çœŸå‡è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼ŒJestä¹Ÿæœ‰äº”ä¸ªå‡½æ•°å¸®åŠ©æˆ‘ä»¬ï¼š toBeNullï¼šåªåŒ¹é…null toBeUndefinedï¼šåªåŒ¹é…undefined toBeDefinedï¼šä¸toBeUndefinedç›¸åï¼Œç­‰ä»·äº.not.toBeUndefined toBeTruthyï¼šåŒ¹é…ä»»ä½• if è¯­å¥ä¸ºçœŸ toBeFalsyï¼šåŒ¹é…ä»»ä½• if è¯­å¥ä¸ºå‡ 123456789101112131415161718192021222324test(&quot;null&quot;, () =&gt; &#123; const n = null; expect(n).toBeNull(); expect(n).not.toBeUndefined(); expect(n).toBeDefined(); expect(n).not.toBeTruthy(); expect(n).toBeFalsy();&#125;);test(&quot;0&quot;, () =&gt; &#123; const z = 0; expect(z).not.toBeNull(); expect(z).not.toBeUndefined(); expect(z).toBeDefined(); expect(z).not.toBeTruthy(); expect(z).toBeFalsy();&#125;);test(&quot;undefined&quot;, () =&gt; &#123; const a = undefined; expect(a).not.toBeNull(); expect(a).toBeUndefined(); expect(a).not.toBeDefined(); expect(a).not.toBeTruthy(); expect(a).toBeFalsy();&#125;); toBeTruthyå’ŒtoBeFalsyç”¨æ¥åˆ¤æ–­åœ¨ifè¯­å¥ä¸­çš„è¡¨è¾¾å¼æ˜¯å¦æˆç«‹ï¼Œç­‰ä»·äº`if(n)å’Œif(!n)``çš„åˆ¤æ–­ã€‚ å¯¹äºæ•°å€¼ç±»å‹çš„æ•°æ®ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¹Ÿå¯ä»¥é€šè¿‡å¤§äºæˆ–å°äºæ¥è¿›è¡Œåˆ¤æ–­ï¼š 1234567891011121314test(&quot;number&quot;, () =&gt; &#123; const val = 2 + 2; // å¤§äº expect(val).toBeGreaterThan(3); // å¤§äºç­‰äº expect(val).toBeGreaterThanOrEqual(3.5); // å°äº expect(val).toBeLessThan(5); // å°äºç­‰äº expect(val).toBeLessThanOrEqual(4.5); // å®Œå…¨åˆ¤æ–­ expect(val).toBe(4); expect(val).toEqual(4);&#125;); æµ®ç‚¹ç±»å‹çš„æ•°æ®è™½ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨toBeå’ŒtoEqualæ¥è¿›è¡Œæ¯”è¾ƒï¼Œä½†æ˜¯å¦‚æœé‡åˆ°æœ‰äº›ç‰¹æ®Šçš„æµ®ç‚¹æ•°æ®è®¡ç®—ï¼Œæ¯”å¦‚0.1+0.2å°±ä¼šå‡ºç°é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡toBeCloseToæ¥åˆ¤æ–­ï¼š 1234test(&quot;float&quot;, () =&gt; &#123; // expect(0.1 + 0.2).toBe(0.3); æŠ¥é”™ expect(0.1 + 0.2).toBeCloseTo(0.3);&#125;); å¯¹äºæ•°ç»„ã€setæˆ–è€…å­—ç¬¦ä¸²ç­‰å¯è¿­ä»£ç±»å‹çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡toContainæ¥åˆ¤æ–­å†…éƒ¨æ˜¯å¦æœ‰æŸä¸€é¡¹ï¼š 123456789101112test(&quot;expect iterable&quot;, () =&gt; &#123; const shoppingList = [ &quot;diapers&quot;, &quot;kleenex&quot;, &quot;trash bags&quot;, &quot;paper towels&quot;, &quot;milk&quot;, ]; expect(shoppingList).toContain(&quot;milk&quot;); expect(new Set(shoppingList)).toContain(&quot;diapers&quot;); expect(&quot;abcdef&quot;).toContain(&quot;cde&quot;);&#125;); å¼‚æ­¥ä»£ç  æˆ‘ä»¬é¡¹ç›®ä¸­ç»å¸¸ä¹Ÿä¼šæ¶‰åŠåˆ°å¼‚æ­¥ä»£ç ï¼Œæ¯”å¦‚setTimeoutã€æ¥å£è¯·æ±‚ç­‰éƒ½ä¼šæ¶‰åŠåˆ°å¼‚æ­¥ï¼Œé‚£ä¹ˆè¿™äº›å¼‚æ­¥ä»£ç æ€ä¹ˆæ¥è¿›è¡Œæµ‹è¯•å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¼‚æ­¥è·å–æ•°æ®çš„å‡½æ•°fetchDataï¼š 12345export function fetchData(cb) &#123; setTimeout(() =&gt; &#123; cb(&quot;res data&quot;); &#125;, 2000);&#125; åœ¨2ç§’åé€šè¿‡å›è°ƒå‡½æ•°è¿”å›äº†ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµ‹è¯•ç”¨ä¾‹çš„å‡½æ•°ä¸­ä½¿ç”¨ä¸€ä¸ªdoneçš„å‚æ•°ï¼ŒJestä¼šç­‰doneå›è°ƒåå†å®Œæˆæµ‹è¯•ï¼š 1234567891011test(&quot;callback&quot;, (done) =&gt; &#123; function cb(data) &#123; try &#123; expect(data).toBe(&quot;res data&quot;); done(); &#125; catch (error) &#123; done(); &#125; &#125; fetchData(cb);&#125;); æˆ‘ä»¬å°†ä¸€ä¸ªå›è°ƒå‡½æ•°ä¼ å…¥fetchDataï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­å¯¹è¿”å›çš„æ•°æ®è¿›è¡Œæ–­è¨€ï¼Œåœ¨æ–­è¨€ç»“æŸåéœ€è¦è°ƒç”¨doneï¼›å¦‚æœæœ€åæ²¡æœ‰è°ƒç”¨doneï¼Œé‚£ä¹ˆJestä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™ç»“æŸï¼Œå°±ä¼šæŠ¥é”™ï¼›åœ¨æˆ‘ä»¬æ—¥å¸¸ä»£ç ä¸­ï¼Œéƒ½ä¼šé€šè¿‡promiseæ¥è·å–æ•°æ®ï¼Œå°†æˆ‘ä»¬çš„fetchDataè¿›è¡Œä¸€ä¸‹æ”¹å†™ï¼š 1234567export function fetchData() &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; resolve(&quot;promise data&quot;); &#125;, 2000); &#125;);&#125; Jestæ”¯æŒåœ¨æµ‹è¯•ç”¨ä¾‹ä¸­ç›´æ¥è¿”å›ä¸€ä¸ªpromiseï¼Œæˆ‘ä»¬å¯ä»¥åœ¨thenä¸­è¿›è¡Œæ–­è¨€ï¼š 12345test(&quot;promise callback&quot;, () =&gt; &#123; return fetchData().then((res) =&gt; &#123; expect(res).toBe(&quot;promise data&quot;); &#125;);&#125;); é™¤äº†ç›´æ¥å°†fetchDataè¿”å›ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ–­è¨€ä¸­ä½¿ç”¨.resolves/.rejects åŒ¹é…ç¬¦ï¼ŒJestä¹Ÿä¼šç­‰å¾…promiseç»“æŸï¼š 123test(&quot;promise callback&quot;, () =&gt; &#123; return expect(fetchData()).resolves.toBe(&quot;promise data&quot;);&#125;); é™¤æ­¤ä¹‹å¤–ï¼ŒJestè¿˜æ”¯æŒasync/awaitï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦åœ¨testçš„åŒ¿åå‡½æ•°åŠ ä¸Šasyncä¿®é¥°ç¬¦è¡¨ç¤ºï¼š 1234test(&quot;async/await callback&quot;, async () =&gt; &#123; const data = await fetchData(); expect(data).toBe(&quot;promise data&quot;);&#125;); å…¨å±€æŒ‚è½½ä¸å¸è½½ å…¨å±€æŒ‚è½½å’Œå¸è½½æœ‰ç‚¹ç±»ä¼¼Vue-Routerçš„å…¨å±€å®ˆå«ï¼Œåœ¨æ¯ä¸ªå¯¼èˆªè§¦å‘å‰å’Œè§¦å‘ååšä¸€äº›æ“ä½œï¼›åœ¨Jestä¸­ä¹Ÿæœ‰ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å‰åˆå§‹åŒ–ä¸€äº›æ•°æ®ï¼Œæˆ–è€…åœ¨æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹åæ¸…é™¤æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨beforeEachå’ŒafterEachï¼š 12345678910111213141516let cityList = []beforeEach(() =&gt; &#123; initializeCityDatabase();&#125;);afterEach(() =&gt; &#123; clearCityDatabase();&#125;);test(&quot;city data has suzhou&quot;, () =&gt; &#123; expect(cityList).toContain(&quot;suzhou&quot;)&#125;)test(&quot;city data has shanghai&quot;, () =&gt; &#123; expect(cityList).toContain(&quot;suzhou&quot;)&#125;) è¿™æ ·ï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è¿›è¡Œæµ‹è¯•å‰éƒ½ä¼šè°ƒç”¨initï¼Œæ¯æ¬¡ç»“æŸåéƒ½ä¼šè°ƒç”¨clearï¼›æˆ‘ä»¬æœ‰å¯èƒ½ä¼šåœ¨æŸäº›testä¸­æ›´æ”¹cityListçš„æ•°æ®ï¼Œä½†æ˜¯åœ¨beforeEachè¿›è¡Œåˆå§‹åŒ–çš„æ“ä½œåï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹è·å–çš„cityListæ•°æ®å°±ä¿è¯éƒ½æ˜¯ç›¸åŒçš„ï¼›å’Œä¸Šé¢ä¸€èŠ‚å¼‚æ­¥ä»£ç ä¸€æ ·ï¼Œåœ¨beforeEachå’ŒafterEachæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å¼‚æ­¥ä»£ç æ¥è¿›è¡Œåˆå§‹åŒ–ï¼š 12345678910let cityList = []beforeEach(() =&gt; &#123; return initializeCityDatabase().then((res)=&gt;&#123; cityList = res.data &#125;);&#125;);//æˆ–è€…ä½¿ç”¨async/awaitbeforeEach(async () =&gt; &#123; cityList = await initializeCityDatabase();&#125;); å’ŒbeforeEachå’ŒafterEachç›¸å¯¹åº”çš„å°±æ˜¯beforeAllå’ŒafterAllï¼ŒåŒºåˆ«å°±æ˜¯beforeAllå’ŒafterAllåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼›beforeEachå’ŒafterEaché»˜è®¤ä¼šåº”ç”¨åˆ°æ¯ä¸ªtestï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½å¸Œæœ›åªé’ˆå¯¹æŸäº›testï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡describeå°†è¿™äº›testæ”¾åˆ°ä¸€èµ·ï¼Œè¿™æ ·å°±åªåº”ç”¨åˆ°describeå—ä¸­çš„testï¼š 12345678910beforeEach(() =&gt; &#123; // åº”ç”¨åˆ°æ‰€æœ‰çš„test&#125;);describe(&quot;put test together&quot;, () =&gt; &#123; beforeEach(() =&gt; &#123; // åªåº”ç”¨å½“å‰describeå—ä¸­çš„test &#125;); test(&quot;test1&quot;, ()=&gt; &#123;&#125;) test(&quot;test2&quot;, ()=&gt; &#123;&#125;)&#125;); æ¨¡æ‹Ÿå‡½æ•° åœ¨é¡¹ç›®ä¸­ï¼Œä¸€ä¸ªæ¨¡å—çš„å‡½æ•°å†…å¸¸å¸¸ä¼šå»è°ƒç”¨å¦å¤–ä¸€ä¸ªæ¨¡å—çš„å‡½æ•°ã€‚åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸éœ€è¦å…³å¿ƒå†…éƒ¨è°ƒç”¨çš„å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹å’Œç»“æœï¼Œåªæƒ³çŸ¥é“è¢«è°ƒç”¨æ¨¡å—çš„å‡½æ•°æ˜¯å¦è¢«æ­£ç¡®è°ƒç”¨ï¼Œç”šè‡³ä¼šæŒ‡å®šè¯¥å‡½æ•°çš„è¿”å›å€¼ï¼Œå› æ­¤æ¨¡æ‹Ÿå‡½æ•°ååˆ†æœ‰å¿…è¦ã€‚ å¦‚æœæˆ‘ä»¬æ­£åœ¨æµ‹è¯•ä¸€ä¸ªå‡½æ•°forEachï¼Œå®ƒçš„å‚æ•°åŒ…æ‹¬äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä½œç”¨åœ¨æ•°ç»„ä¸Šçš„æ¯ä¸ªå…ƒç´ ï¼š 12345export function forEach(items, callback) &#123; for (let index = 0; index &lt; items.length; index++) &#123; callback(items[index]); &#125;&#125; ä¸ºäº†æµ‹è¯•è¿™ä¸ªforEachï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªæ¨¡æ‹Ÿå‡½æ•°ï¼Œæ¥æ£€æŸ¥æ¨¡æ‹Ÿå‡½æ•°æ˜¯å¦æŒ‰ç…§é¢„æœŸè¢«è°ƒç”¨äº†ï¼š 123456789test(&quot;mock callback&quot;, () =&gt; &#123; const mockCallback = jest.fn((x) =&gt; 42 + x); forEach([0, 1, 2], mockCallback); expect(mockCallback.mock.calls.length).toBe(3); expect(mockCallback.mock.calls[0][0]).toBe(0); expect(mockCallback.mock.calls[1][0]).toBe(1); expect(mockCallback.mock.calls[2][0]).toBe(1); expect(mockCallback.mock.results[0].value).toBe(42);&#125;); æˆ‘ä»¬å‘ç°åœ¨mockCallbackæœ‰ä¸€ä¸ªç‰¹æ®Šçš„.mockå±æ€§ï¼Œå®ƒä¿å­˜äº†æ¨¡æ‹Ÿå‡½æ•°è¢«è°ƒç”¨çš„ä¿¡æ¯ï¼›æˆ‘ä»¬æ‰“å°å‡ºæ¥çœ‹ä¸‹ï¼š å®ƒæœ‰å››ä¸ªå±æ€§ï¼š callsï¼šè°ƒç”¨å‚æ•° instancesï¼šthisæŒ‡å‘ invocationCallOrderï¼šå‡½æ•°è°ƒç”¨é¡ºåº resultsï¼šè°ƒç”¨ç»“æœ åœ¨ä¸Šé¢å±æ€§ä¸­æœ‰ä¸€ä¸ªinstanceså±æ€§ï¼Œè¡¨ç¤ºäº†å‡½æ•°çš„thisæŒ‡å‘ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡bindå‡½æ•°æ¥æ›´æ”¹æˆ‘ä»¬æ¨¡æ‹Ÿå‡½æ•°çš„thisï¼š 123456789test(&quot;mock callback&quot;, () =&gt; &#123; const mockCallback = jest.fn((x) =&gt; 42 + x); const obj = &#123; a: 1 &#125;; const bindMockCallback = mockCallback.bind(obj); forEach([0, 1, 2], bindMockCallback); expect(mockCallback.mock.instances[0]).toEqual(obj); expect(mockCallback.mock.instances[1]).toEqual(obj); expect(mockCallback.mock.instances[2]).toEqual(obj);&#125;); é€šè¿‡bindæ›´æ”¹å‡½æ•°çš„thisä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç”¨instancesæ¥è¿›è¡Œæ£€æµ‹ï¼›æ¨¡æ‹Ÿå‡½æ•°å¯ä»¥åœ¨è¿è¡Œæ—¶å°†è¿”å›å€¼è¿›è¡Œæ³¨å…¥ï¼š 12345678910111213141516const myMock = jest.fn();// undefinedconsole.log(myMock());myMock .mockReturnValueOnce(10) .mockReturnValueOnce(&quot;x&quot;) .mockReturnValue(true);//10 x true trueconsole.log(myMock(), myMock(), myMock(), myMock());myMock.mockReturnValueOnce(null);// null true trueconsole.log(myMock(), myMock(), myMock()); æˆ‘ä»¬ç¬¬ä¸€æ¬¡æ‰§è¡ŒmyMockï¼Œç”±äºæ²¡æœ‰æ³¨å…¥ä»»ä½•è¿”å›å€¼ï¼Œç„¶åé€šè¿‡mockReturnValueOnceå’ŒmockReturnValueè¿›è¡Œè¿”å›å€¼æ³¨å…¥ï¼ŒOnceåªä¼šæ³¨å…¥ä¸€æ¬¡ï¼›æ¨¡æ‹Ÿå‡½æ•°åœ¨è¿ç»­æ€§å‡½æ•°ä¼ é€’è¿”å›å€¼æ—¶ä½¿ç”¨æ³¨å…¥éå¸¸çš„æœ‰ç”¨ï¼š 1234const filterFn = jest.fn();filterFn.mockReturnValueOnce(true).mockReturnValueOnce(false);const result = [2, 3].filter((num) =&gt; filterFn(num));expect(result).toEqual([2]); æˆ‘ä»¬è¿˜å¯ä»¥å¯¹æ¨¡æ‹Ÿå‡½æ•°çš„è°ƒç”¨æƒ…å†µè¿›è¡Œæ–­è¨€ï¼š 12345678910111213const mockFunc = jest.fn();// æ–­è¨€å‡½æ•°è¿˜æ²¡æœ‰è¢«è°ƒç”¨expect(mockFunc).not.toHaveBeenCalled();mockFunc(1, 2);mockFunc(2, 3);// æ–­è¨€å‡½æ•°è‡³å°‘è°ƒç”¨ä¸€æ¬¡expect(mockFunc).toHaveBeenCalled();// æ–­è¨€å‡½æ•°è°ƒç”¨å‚æ•°expect(mockFunc).toHaveBeenCalledWith(1, 2);expect(mockFunc).toHaveBeenCalledWith(2, 3);// æ–­è¨€å‡½æ•°æœ€åä¸€æ¬¡çš„è°ƒç”¨å‚æ•°expect(mockFunc).toHaveBeenLastCalledWith(2, 3); é™¤äº†èƒ½å¯¹å‡½æ•°è¿›è¡Œæ¨¡æ‹Ÿï¼ŒJestè¿˜æ”¯æŒæ‹¦æˆªaxiosè¿”å›æ•°æ®ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªè·å–ç”¨æˆ·çš„æ¥å£ï¼š 123456789101112// /src/api/usersconst axios = require(&quot;axios&quot;);function fetchUserData() &#123; return axios .get(&quot;/user.json&quot;) .then((resp) =&gt; resp.data);&#125;module.exports = &#123; fetchUserData,&#125;; ç°åœ¨æˆ‘ä»¬æƒ³è¦æµ‹è¯•fetchUserDataå‡½æ•°è·å–æ•°æ®ä½†æ˜¯å¹¶ä¸å®é™…è¯·æ±‚æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨jest.mockæ¥æ¨¡æ‹Ÿaxiosæ¨¡å—ï¼š 1234567891011121314151617const users = require(&quot;../api/users&quot;);const axios = require(&quot;axios&quot;);jest.mock(&quot;axios&quot;);test(&quot;should fetch users&quot;, () =&gt; &#123; const userData = &#123; name: &quot;aaa&quot;, age: 10, &#125;; const resp = &#123; data: userData &#125;; axios.get.mockResolvedValue(resp); return users.fetchUserData().then((res) =&gt; &#123; expect(res).toEqual(userData); &#125;);&#125;); ä¸€æ—¦æˆ‘ä»¬å¯¹æ¨¡å—è¿›è¡Œäº†æ¨¡æ‹Ÿï¼Œæˆ‘ä»¬å¯ä»¥ç”¨getå‡½æ•°æä¾›ä¸€ä¸ªmockResolvedValueæ–¹æ³•ï¼Œä»¥è¿”å›æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„æ•°æ®ï¼›é€šè¿‡æ¨¡æ‹Ÿåï¼Œå®é™…ä¸Šaxioså¹¶æ²¡æœ‰å»çœŸæ­£å‘é€è¯·æ±‚å»è·å–/user.jsonçš„æ•°æ®ã€‚ Vue Test Utils Vue Test Utilsæ˜¯Vue.jså®˜æ–¹çš„å•å…ƒæµ‹è¯•å®ç”¨å·¥å…·åº“ï¼Œèƒ½å¤Ÿå¯¹æˆ‘ä»¬ç¼–å†™çš„Vueç»„ä»¶è¿›è¡Œæµ‹è¯•ã€‚ æŒ‚è½½ç»„ä»¶ åœ¨Vueä¸­æˆ‘ä»¬é€šè¿‡importå¼•å…¥ç»„ä»¶ï¼Œç„¶ååœ¨componentsè¿›è¡Œæ³¨å†Œåå°±èƒ½ä½¿ç”¨ï¼›åœ¨å•å…ƒæµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨mountæ¥è¿›è¡ŒæŒ‚è½½ç»„ä»¶ï¼›å‡å¦‚æˆ‘ä»¬å†™äº†ä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶counter.jsï¼Œç”¨æ¥å±•ç¤ºcountï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªæŒ‰é’®æ“ä½œcountï¼š 123456789101112131415161718192021&lt;!-- Counter.vue --&gt;&lt;template&gt; &lt;div class=&quot;counter&quot;&gt; &lt;span class=&quot;count&quot;&gt;&#123;&#123; count &#125;&#125;&lt;/span&gt; &lt;button id=&quot;add&quot; @click=&quot;add&quot;&gt;åŠ &lt;/button&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; count: 0, &#125;; &#125;, methods: &#123; add() &#123; this.count++; &#125;, &#125;,&#125;;&lt;/script&gt; ç»„ä»¶è¿›è¡ŒæŒ‚è½½åå¾—åˆ°ä¸€ä¸ªwrapperï¼ˆåŒ…è£¹å™¨ï¼‰ï¼Œwrapperä¼šæš´éœ²å¾ˆå¤šå°è£…ã€éå†å’ŒæŸ¥è¯¢å…¶å†…éƒ¨çš„Vueç»„ä»¶å®ä¾‹çš„ä¾¿æ·çš„æ–¹æ³•ã€‚ 1234import &#123; mount &#125; from &quot;@vue/test-utils&quot;;import Counter from &quot;@/components/Counter&quot;;const wrapper = mount(Counter);const vm = wrapper.vm; æˆ‘ä»¬å¯ä»¥é€šè¿‡wrapper.vmæ¥è®¿é—®ç»„ä»¶çš„Vueå®ä¾‹ï¼Œè¿›è€Œè·å–å®ä¾‹ä¸Šçš„methodså’Œdataç­‰ï¼›é€šè¿‡wrapperï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ç»„ä»¶çš„æ¸²æŸ“æƒ…å†µåšæ–­è¨€ï¼š 123456789101112131415// test/unit/counter.spec.jsdescribe(&quot;Counter&quot;, () =&gt; &#123; const wrapper = mount(Counter); test(&quot;counter class&quot;, () =&gt; &#123; expect(wrapper.classes()).toContain(&quot;counter&quot;); expect(wrapper.classes(&quot;counter&quot;)).toBe(true); &#125;); test(&quot;counter has span&quot;, () =&gt; &#123; expect(wrapper.html()).toContain(&quot;&lt;span class=&quot;count&quot;&gt;0&lt;/span&gt;&quot;); &#125;); test(&quot;counter has btn&quot;, () =&gt; &#123; expect(wrapper.find(&quot;button#add&quot;).exists()).toBe(true); expect(wrapper.find(&quot;button#add&quot;).exists()).not.toBe(false); &#125;);&#125;); ä¸Šé¢å‡ ä¸ªå‡½æ•°æˆ‘ä»¬æ ¹æ®åå­—ä¹Ÿèƒ½çŒœå‡ºå®ƒä»¬çš„ä½œç”¨ï¼š classesï¼šè·å–wrapperçš„classï¼Œå¹¶è¿”å›ä¸€ä¸ªæ•°ç»„ htmlï¼šè·å–ç»„ä»¶æ¸²æŸ“htmlç»“æ„å­—ç¬¦ä¸² findï¼šè¿”å›åŒ¹é…å­å…ƒç´ çš„wrapper existsï¼šæ–­è¨€wrapperæ˜¯å¦å­˜åœ¨ findè¿”å›çš„æ˜¯æŸ¥æ‰¾çš„ç¬¬ä¸€ä¸ªDOMèŠ‚ç‚¹ï¼Œä½†æœ‰äº›æƒ…å†µæˆ‘ä»¬å¸Œæœ›èƒ½æ“ä½œä¸€ç»„DOMï¼Œæˆ‘ä»¬å¯ä»¥ç”¨findAllå‡½æ•°ï¼š 123456const wrapper = mount(Counter);// è¿”å›ä¸€ç»„wrapperconst divList = wrapper.findAll(&#x27;div&#x27;);divList.length// æ‰¾åˆ°ç¬¬ä¸€ä¸ªdivï¼Œè¿”å›å®ƒçš„wrapperconst firstDiv = divList.at(0); æœ‰äº›ç»„ä»¶éœ€è¦é€šè¿‡å¤–éƒ¨ä¼ å…¥çš„propsã€æ’æ§½slotsã€provide/injectç­‰å…¶ä»–çš„æ’ä»¶æˆ–è€…å±æ€§ï¼Œæˆ‘ä»¬åœ¨mountæŒ‚è½½æ—¶å¯ä»¥ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œè®¾ç½®è¿™äº›é¢å¤–å±æ€§ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344const wrapper = mount(Component, &#123; // å‘ç»„ä»¶ä¼ å…¥dataï¼Œåˆå¹¶åˆ°ç°æœ‰çš„dataä¸­ data() &#123; return &#123; foo: &quot;bar&quot; &#125; &#125;, // è®¾ç½®ç»„ä»¶çš„props propsData: &#123; msg: &quot;hello&quot; &#125;, // vueæœ¬åœ°æ‹·è´ localVue, // ä¼ªé€ å…¨å±€å¯¹è±¡ mocks: &#123; $route &#125;, // æ’æ§½ // é”®åå°±æ˜¯ç›¸åº”çš„ slot å // é”®å€¼å¯ä»¥æ˜¯ä¸€ä¸ªç»„ä»¶ã€ä¸€ä¸ªç»„ä»¶æ•°ç»„ã€ä¸€ä¸ªå­—ç¬¦ä¸²æ¨¡æ¿æˆ–æ–‡æœ¬ã€‚ slots: &#123; default: SlotComponent, foo: &quot;&lt;div /&gt;&quot;, bar: &quot;&lt;my-component /&gt;&quot;, baz: &quot;&quot; &#125;, // ç”¨æ¥æ³¨å†Œè‡ªå®šä¹‰ç»„ä»¶ stubs: &#123; &quot;my-component&quot;: MyComponent, &quot;el-button&quot;: true, &#125;, // è®¾ç½®ç»„ä»¶å®ä¾‹çš„$attrs å¯¹è±¡ã€‚ attrs: &#123;&#125;, // è®¾ç½®ç»„ä»¶å®ä¾‹çš„$listenerså¯¹è±¡ã€‚ listeners: &#123; click: jest.fn() &#125;, // ä¸ºç»„ä»¶ä¼ é€’ç”¨äºæ³¨å…¥çš„å±æ€§ provide: &#123; foo() &#123; return &quot;fooValue&quot; &#125; &#125;&#125;) stubsä¸»è¦ç”¨æ¥å¤„ç†åœ¨å…¨å±€æ³¨å†Œçš„è‡ªå®šä¹‰ç»„ä»¶ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ç»„ä»¶åº“Elementç­‰ï¼Œç›´æ¥ä½¿ç”¨el-buttonã€el-inputç»„ä»¶ï¼Œæˆ–è€…vue-routeræ³¨å†Œåœ¨å…¨å±€çš„router-viewç»„ä»¶ç­‰ï¼›å½“æˆ‘ä»¬åœ¨å•å…ƒæµ‹è¯•ä¸­å¼•å…¥æ—¶å°±ä¼šæç¤ºæˆ‘ä»¬å¯¹åº”çš„ç»„ä»¶æ‰¾ä¸åˆ°ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™ä¸ªstubsæ¥é¿å…æŠ¥é”™ã€‚ æˆ‘ä»¬åœ¨å¯¹æŸä¸ªç»„ä»¶è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œå¸Œæœ›åªé’ˆå¯¹å•ä¸€ç»„ä»¶è¿›è¡Œæµ‹è¯•ï¼Œé¿å…å­ç»„ä»¶å¸¦æ¥çš„å‰¯ä½œç”¨ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ParentComponentä¸­åˆ¤æ–­æ˜¯å¦æœ‰æŸä¸ªdivæ—¶ï¼Œæ°å¥½å­ç»„ä»¶ChildComponentä¹Ÿæ¸²æŸ“äº†è¯¥divï¼Œé‚£ä¹ˆå°±ä¼šå¯¹æˆ‘ä»¬çš„æµ‹è¯•å¸¦æ¥ä¸€å®šçš„å¹²æ‰°ï¼›æˆ‘ä»¬å¯ä»¥ä½¿ç”¨shallowMountæŒ‚è½½å‡½æ•°ï¼Œç›¸é‡æ¯”mountï¼ŒshallowMountä¸ä¼šæ¸²æŸ“å­ç»„ä»¶ï¼š 12import &#123; shallowMount &#125; from &#x27;@vue/test-utils&#x27;const wrapper = shallowMount(Component) è¿™æ ·å°±ä¿è¯äº†æˆ‘ä»¬éœ€è¦æµ‹è¯•çš„ç»„ä»¶åœ¨æ¸²æŸ“æ—¶ä¸ä¼šæ¸²æŸ“å…¶å­ç»„ä»¶ï¼Œé¿å…å­ç»„ä»¶çš„å¹²æ‰°ã€‚ æ“ä½œç»„ä»¶ æˆ‘ä»¬ç»å¸¸éœ€è¦å¯¹å­ç»„ä»¶ä¸­çš„å…ƒç´ æˆ–è€…å­ç»„ä»¶çš„æ•°æ®è¿›è¡Œä¸€äº›æ“ä½œå’Œä¿®æ”¹ï¼Œæ¯”å¦‚é¡µé¢çš„ç‚¹å‡»ã€ä¿®æ”¹dataæ•°æ®ï¼Œè¿›è¡Œæ“ä½œåå†æ¥æ–­è¨€æ•°æ®æ˜¯å¦æ­£ç¡®ï¼›æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„Formç»„ä»¶ä¸ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;template&gt; &lt;div class=&quot;form&quot;&gt; &lt;div class=&quot;title&quot;&gt;&#123;&#123; title &#125;&#125;&lt;/div&gt; &lt;div&gt; &lt;span&gt;è¯·å¡«å†™å§“åï¼š&lt;/span&gt; &lt;input type=&quot;text&quot; id=&quot;name-input&quot; v-model=&quot;name&quot; /&gt; &lt;div class=&quot;name&quot;&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;è¯·é€‰æ‹©æ€§åˆ«ï¼š&lt;/span&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot; v-model=&quot;sex&quot; value=&quot;f&quot; id=&quot;&quot; /&gt; &lt;input type=&quot;radio&quot; name=&quot;sex&quot; v-model=&quot;sex&quot; value=&quot;m&quot; id=&quot;&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;span&gt;è¯·é€‰æ‹©çˆ±å¥½ï¼š&lt;/span&gt; footbal &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; v-model=&quot;hobby&quot; value=&quot;footbal&quot; /&gt; basketball &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; v-model=&quot;hobby&quot; value=&quot;basketball&quot; /&gt; ski &lt;input type=&quot;checkbox&quot; name=&quot;hobby&quot; v-model=&quot;hobby&quot; value=&quot;ski&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;input :class=&quot;submit ? &#x27;submit&#x27; : &#x27;&#x27;&quot; type=&quot;submit&quot; value=&quot;æäº¤&quot; @click=&quot;clickSubmit&quot; /&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;Form&quot;, props: &#123; title: &#123; type: String, default: &quot;è¡¨å•åç§°&quot;, &#125;, &#125;, data() &#123; return &#123; name: &quot;&quot;, sex: &quot;f&quot;, hobby: [], submit: false, &#125;; &#125;, methods: &#123; clickSubmit() &#123; this.submit = !this.submit; &#125;, &#125;,&#125;;&lt;/script&gt; æˆ‘ä»¬å¯ä»¥å‘Formè¡¨å•ç»„ä»¶ä¼ å…¥ä¸€ä¸ªtitleï¼Œä½œä¸ºè¡¨å•çš„åç§°ï¼Œå…¶å†…éƒ¨ä¹Ÿæœ‰inputã€radioå’Œcheckboxç­‰ä¸€ç³»åˆ—å…ƒç´ ï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸‹æ€ä¹ˆå¯¹è¿™äº›å…ƒç´ è¿›è¡Œä¿®æ”¹ï¼›é¦–å…ˆæˆ‘ä»¬æ¥ä¿®æ”¹propsçš„å€¼ï¼Œåœ¨ç»„ä»¶åˆå§‹åŒ–çš„æ—¶å€™æˆ‘ä»¬ä¼ å…¥äº†propsDataï¼Œåœ¨åç»­çš„ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡setPropså¯¹propså€¼è¿›è¡Œä¿®æ”¹ï¼š 1234567891011121314const wrapper = mount(Form, &#123; propsData: &#123; title: &quot;form title&quot;, &#125;,&#125;);const vm = wrapper.vm;test(&quot;change prop&quot;, () =&gt; &#123; expect(wrapper.find(&quot;.title&quot;).text()).toBe(&quot;form title&quot;); wrapper.setProps(&#123; title: &quot;new form title&quot;, &#125;); // æŠ¥é”™äº† expect(wrapper.find(&quot;.title&quot;).text()).toBe(&quot;new form title&quot;);&#125;); æˆ‘ä»¬æ»¡æ€€æœŸå¾…è¿›è¡Œæµ‹è¯•ï¼Œä½†æ˜¯å‘ç°æœ€åä¸€æ¡æ–­è¨€æŠ¥é”™äº†ï¼›è¿™æ˜¯å› ä¸ºVueå¼‚æ­¥æ›´æ–°æ•°æ®ï¼Œæˆ‘ä»¬æ”¹å˜propå’Œdataåï¼Œè·å–domå‘ç°æ•°æ®å¹¶ä¸ä¼šç«‹å³æ›´æ–°ï¼›åœ¨é¡µé¢ä¸Šæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šé€šè¿‡$nextTickè¿›è¡Œè§£å†³ï¼Œåœ¨å•å…ƒæµ‹è¯•æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨nextTické…åˆè·å–DOMï¼š 123456789101112131415161718192021test(&quot;change prop1&quot;, async () =&gt; &#123; expect(wrapper.find(&quot;.title&quot;).text()).toBe(&quot;new form title&quot;); wrapper.setProps(&#123; title: &quot;new form title1&quot;, &#125;); await Vue.nextTick(); // æˆ–è€…ä½¿ç”¨vmçš„nextTick // await wrapper.vm.nextTick(); expect(wrapper.find(&quot;.title&quot;).text()).toBe(&quot;new form title1&quot;);&#125;);test(&quot;change prop2&quot;, (done) =&gt; &#123; expect(wrapper.find(&quot;.title&quot;).text()).toBe(&quot;new form title1&quot;); wrapper.setProps(&#123; title: &quot;new form title2&quot;, &#125;); Vue.nextTick(() =&gt; &#123; expect(wrapper.find(&quot;.title&quot;).text()).toBe(&quot;new form title2&quot;); done(); &#125;);&#125;); å’ŒJestä¸­æµ‹è¯•å¼‚æ­¥ä»£ç ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨doneå›è°ƒæˆ–è€…async/awaitæ¥è¿›è¡Œå¼‚æ­¥æµ‹è¯•ï¼›é™¤äº†è®¾ç½®propsï¼ŒsetDataå¯ä»¥ç”¨æ¥æ”¹å˜wrapperä¸­çš„dataï¼š 12345678test(&quot;test set data&quot;, async () =&gt; &#123; wrapper.setData(&#123; name: &quot;new name&quot;, &#125;); expect(vm.name).toBe(&quot;new name&quot;); await Vue.nextTick(); expect(wrapper.find(&quot;.name&quot;).text()).toBe(&quot;new name&quot;);&#125;); å¯¹äºinputã€textareaæˆ–è€…selectè¿™ç§è¾“å…¥æ€§çš„ç»„ä»¶å…ƒç´ ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼æ¥æ”¹å˜ä»–ä»¬çš„å€¼ï¼š 1234567891011121314test(&quot;test input set value&quot;, async () =&gt; &#123; const input = wrapper.find(&quot;#name-input&quot;); await input.setValue(&quot;change input by setValue&quot;); expect(vm.name).toBe(&quot;change input by setValue&quot;); expect(input.element.value).toBe(&quot;change input by setValue&quot;);&#125;);// ç­‰ä»·äºtest(&quot;test input trigger&quot;, () =&gt; &#123; const input = wrapper.find(&quot;#name-input&quot;); input.element.value = &quot;change input by trigger&quot;; // é€šè¿‡input.element.valueæ”¹å˜å€¼åå¿…é¡»è§¦å‘triggeræ‰èƒ½çœŸæ­£ä¿®æ”¹ input.trigger(&quot;input&quot;); expect(vm.name).toBe(&quot;change input by trigger&quot;);&#125;); å¯ä»¥çœ‹å‡ºï¼Œé€šè¿‡input.element.valueæˆ–è€…setValueçš„ä¸¤ç§æ–¹å¼æ”¹å˜å€¼åï¼Œç”±äºv-modelç»‘å®šå…³ç³»ï¼Œå› æ­¤vmä¸­çš„dataæ•°æ®ä¹Ÿè¿›è¡Œäº†æ”¹å˜ï¼›æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡input.element.valueæ¥è·å–inputå…ƒç´ çš„å€¼ã€‚ å¯¹äºradioã€checkboxé€‰æ‹©æ€§çš„ç»„ä»¶å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡setChecked(Boolean)å‡½æ•°æ¥è§¦å‘å€¼çš„æ›´æ”¹ï¼Œæ›´æ”¹åŒæ—¶ä¹Ÿä¼šæ›´æ–°å…ƒç´ ä¸Šv-modelç»‘å®šçš„å€¼ï¼š 12345678910111213141516test(&quot;test radio&quot;, () =&gt; &#123; expect(vm.sex).toBe(&quot;f&quot;); const radioList = wrapper.findAll(&#x27;input[name=&quot;sex&quot;]&#x27;); radioList.at(1).setChecked(); expect(vm.sex).toBe(&quot;m&quot;);&#125;);test(&quot;test checkbox&quot;, () =&gt; &#123; expect(vm.hobby).toEqual([]); const checkboxList = wrapper.findAll(&#x27;input[name=&quot;hobby&quot;]&#x27;); checkboxList.at(0).setChecked(); expect(vm.hobby).toEqual([&quot;footbal&quot;]); checkboxList.at(1).setChecked(); expect(vm.hobby).toEqual([&quot;footbal&quot;, &quot;basketball&quot;]); checkboxList.at(0).setChecked(false); expect(vm.hobby).toEqual([&quot;basketball&quot;]);&#125;); å¯¹äºæŒ‰é’®ç­‰å…ƒç´ ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸Šé¢è§¦å‘ç‚¹å‡»æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨triggerè¿›è¡Œè§¦å‘ï¼š 1234567test(&quot;test click&quot;, async () =&gt; &#123; const submitBtn = wrapper.find(&#x27;input[type=&quot;submit&quot;]&#x27;); await submitBtn.trigger(&quot;click&quot;); expect(vm.submit).toBe(true); await submitBtn.trigger(&quot;click&quot;); expect(vm.submit).toBe(false);&#125;); è‡ªå®šä¹‰äº‹ä»¶ å¯¹äºä¸€äº›ç»„ä»¶ï¼Œå¯èƒ½ä¼šé€šè¿‡$emitè§¦å‘ä¸€äº›è¿”å›æ•°æ®ï¼Œæ¯”å¦‚æˆ‘ä»¬æ”¹å†™ä¸Šé¢Formè¡¨å•ä¸­çš„submitæŒ‰é’®ï¼Œç‚¹å‡»åè¿”å›ä¸€äº›æ•°æ®ï¼š 12345678&#123; methods: &#123; clickSubmit() &#123; this.$emit(&quot;foo&quot;, &quot;foo1&quot;, &quot;foo2&quot;); this.$emit(&quot;bar&quot;, &quot;bar1&quot;); &#125;, &#125;,&#125; é™¤äº†è§¦å‘ç»„ä»¶ä¸­å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶è¿›è¡Œ$emiï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡wrapper.vmè§¦å‘ï¼Œå› ä¸ºvmæœ¬èº«ç›¸å½“äºç»„ä»¶çš„thisï¼š 1wrapper.vm.$emit(&quot;foo&quot;, &quot;foo3&quot;); æœ€åï¼Œæ‰€æœ‰$emitè§¦å‘è¿”å›çš„æ•°æ®éƒ½å­˜å‚¨åœ¨wrapper.emitted()ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªå¯¹è±¡ï¼›ç»“æ„å¦‚ä¸‹ï¼š 1234&#123; foo: [ [ &#x27;foo1&#x27;, &#x27;foo2&#x27; ], [ &#x27;foo3&#x27; ] ], bar: [ [ &#x27;bar1&#x27; ] ]&#125; emitted()è¿”å›å¯¹è±¡ä¸­çš„å±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„lengthä»£è¡¨äº†è¿™ä¸ªæ–¹æ³•è¢«è§¦å‘äº†å¤šå°‘æ¬¡ï¼›æˆ‘ä»¬å¯ä»¥å¯¹å¯¹è±¡ä¸Šçš„å±æ€§è¿›è¡Œæ–­è¨€ï¼Œæ¥åˆ¤æ–­ç»„ä»¶çš„emitæ˜¯å¦è¢«è§¦å‘ï¼š 1234567891011121314test(&quot;test emit&quot;, async () =&gt; &#123; // ç»„ä»¶å…ƒç´ è§¦å‘emit await wrapper.find(&#x27;input[type=&quot;submit&quot;]&#x27;).trigger(&quot;click&quot;); wrapper.vm.$emit(&quot;foo&quot;, &quot;foo3&quot;); await vm.$nextTick(); // fooè¢«è§¦å‘è¿‡ expect(wrapper.emitted().foo).toBeTruthy(); // fooè§¦å‘è¿‡ä¸¤æ¬¡ expect(wrapper.emitted().foo.length).toBe(2); // æ–­è¨€fooç¬¬ä¸€æ¬¡è§¦å‘çš„æ•°æ® expect(wrapper.emitted().foo[0]).toEqual([&quot;foo1&quot;, &quot;foo2&quot;]); // bazæ²¡æœ‰è§¦å‘ expect(wrapper.emitted().baz).toBeFalsy();&#125;); æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠemitted()å‡½æ•°è¿›è¡Œæ”¹å†™ï¼Œå¹¶ä¸æ˜¯ä¸€æ¬¡æ€§è·å–æ•´ä¸ªemittedå¯¹è±¡ï¼š 12expect(wrapper.emitted(&#x27;foo&#x27;)).toBeTruthy();expect(wrapper.emitted(&#x27;foo&#x27;).length).toBe(2); æœ‰ä¸€äº›ç»„ä»¶è§¦å‘emitäº‹ä»¶å¯èƒ½æ˜¯ç”±å…¶å­ç»„ä»¶è§¦å‘çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å­ç»„ä»¶çš„vmè¿›è¡Œemitï¼š 12345678910import &#123; mount &#125; from &#x27;@vue/test-utils&#x27;import ParentComponent from &#x27;@/components/ParentComponent&#x27;import ChildComponent from &#x27;@/components/ChildComponent&#x27;describe(&#x27;ParentComponent&#x27;, () =&gt; &#123; it(&quot;emit&quot;, () =&gt; &#123; const wrapper = mount(ParentComponent) wrapper.find(ChildComponent).vm.$emit(&#x27;custom&#x27;) &#125;)&#125;) é…åˆVue-Router åœ¨æœ‰äº›ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬æœ‰å¯èƒ½ä¼šç”¨åˆ°Vue-Routerçš„ç›¸å…³ç»„ä»¶æˆ–è€…Apiæ–¹æ³•ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªHeaderç»„ä»¶ï¼š 12345678910111213141516171819202122&lt;template&gt; &lt;div&gt; &lt;div @click=&quot;jump&quot;&gt;&#123;&#123; $route.params.id &#125;&#125;&lt;/div&gt; &lt;router-link :to=&quot;&#123; path: &#x27;/detail&#x27; &#125;&quot;&gt;&lt;/router-link&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123;&#125;; &#125;, mounted() &#123;&#125;, methods: &#123; jump() &#123; this.$router.push(&#123; path: &quot;/list&quot;, &#125;); &#125;, &#125;,&#125;;&lt;/script&gt; ç›´æ¥åœ¨æµ‹è¯•è„šæœ¬ä¸­å¼•å…¥ä¼šæŠ¥é”™ï¼Œæç¤ºæ‰¾ä¸åˆ°router-linkå’Œrouter-viewä¸¤ä¸ªç»„ä»¶å’Œ$routeå±æ€§ï¼›è¿™é‡Œä¸æ¨èä½¿ç”¨Vue.use(VueRouter)ï¼Œå› ä¸ºä¼šæ±¡æŸ“å…¨å±€çš„Vueï¼›æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•è§£å†³ï¼Œç¬¬ä¸€ç§ä½¿ç”¨createLocalVue åˆ›å»ºä¸€ä¸ªVueçš„ç±»ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªç±»ä¸­è¿›è¡Œæ·»åŠ ç»„ä»¶ã€æ··å…¥å’Œå®‰è£…æ’ä»¶è€Œä¸ä¼šæ±¡æŸ“å…¨å±€çš„Vueç±»ï¼š 1234567891011121314151617import &#123; shallowMount, createLocalVue &#125; from &#x27;@vue/test-utils&#x27;import VueRouter from &#x27;vue-router&#x27;import Header from &quot;@/components/Header&quot;;// ä¸€ä¸ªVueç±»const localVue = createLocalVue()localVue.use(VueRouter)// è·¯ç”±æ•°ç»„const routes = []const router = new VueRouter(&#123; routes&#125;)shallowMount(Header, &#123; localVue, router&#125;) æˆ‘ä»¬æ¥çœ‹ä¸‹è¿™é‡Œåšäº†å“ªäº›æ“ä½œï¼Œé€šè¿‡createLocalVueåˆ›å»ºäº†ä¸€ä¸ªlocalVueï¼Œç›¸å½“äºimport Vueï¼›ç„¶ålocalVue.useå‘Šè¯‰Vueæ¥ä½¿ç”¨VueRouterï¼Œå’ŒVue.useæœ‰ç€ç›¸åŒçš„ä½œç”¨ï¼›æœ€åå®ä¾‹åŒ–åˆ›å»ºrouterå¯¹è±¡ä¼ å…¥shallowMountè¿›è¡ŒæŒ‚è½½ã€‚ ç¬¬äºŒç§æ–¹å¼æ˜¯æ³¨å…¥ä¼ªé€ æ•°æ®ï¼Œè¿™é‡Œä¸»è¦ç”¨çš„å°±æ˜¯mockså’Œstubsï¼Œmocksç”¨æ¥ä¼ªé€ $routeå’Œ$routerç­‰å…¨å±€å¯¹è±¡ï¼Œæ˜¯ä¸€ç§å°†å±æ€§æ·»åŠ åˆ°Vue.prototypeä¸Šçš„æ–¹å¼ï¼›è€Œstubsç”¨æ¥è¦†å†™å…¨å±€æˆ–å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶ï¼š 12345678910111213141516171819202122232425import &#123; mount &#125; from &quot;@vue/test-utils&quot;;import Header from &quot;@/components/Header&quot;;describe(&quot;header&quot;, () =&gt; &#123; const $route = &#123; path: &quot;/home&quot;, params: &#123; id: &quot;111&quot;, &#125;, &#125;; const $router = &#123; push: jest.fn(), &#125;; const wrapper = mount(Header, &#123; stubs: [&quot;router-view&quot;, &quot;router-link&quot;], mocks: &#123; $route, $router, &#125;, &#125;); const vm = wrapper.vm; test(&quot;render home div&quot;, () =&gt; &#123; expect(wrapper.find(&quot;div&quot;).text()).toBe(&quot;111&quot;); &#125;);&#125;); ç›¸æ¯”äºç¬¬ä¸€ç§æ–¹å¼ï¼Œç¬¬äºŒç§æ–¹å¼å¯æ“ä½œæ€§æ›´å¼ºï¼Œå¯ä»¥ç›´æ¥ä¼ªé€ $routeè·¯ç”±çš„æ•°æ®ï¼›ä¸€èˆ¬ç¬¬ä¸€ç§æ–¹å¼ä¸ä¼šå•ç‹¬ä½¿ç”¨ï¼Œç»å¸¸ä¼šæ­é…ç¬¬äºŒç§ä¼ªé€ æ•°æ®çš„æ–¹å¼ã€‚ é…åˆVuex æˆ‘ä»¬é€šå¸¸ä¼šåœ¨ç»„ä»¶ä¸­ä¼šç”¨åˆ°vuexï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ªé€ storeæ•°æ®æ¥æ¨¡æ‹Ÿæµ‹è¯•ï¼Œå‡å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªçš„countç»„ä»¶ï¼Œå®ƒçš„æ•°æ®å­˜æ”¾åœ¨vuexä¸­ï¼š 1234567891011121314151617181920212223242526&lt;template&gt; &lt;div&gt; &lt;div class=&quot;number&quot;&gt;&#123;&#123; number &#125;&#125;&lt;/div&gt; &lt;div class=&quot;add&quot; @click=&quot;clickAdd&quot;&gt;add&lt;/div&gt; &lt;div class=&quot;sub&quot; @click=&quot;clickSub&quot;&gt;sub&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123; mapState, mapGetters &#125; from &quot;vuex&quot;;export default &#123; name: &quot;Count&quot;, computed: &#123; ...mapState(&#123; number: (state) =&gt; state.number, &#125;), &#125;, methods: &#123; clickAdd() &#123; this.$store.commit(&quot;ADD_COUNT&quot;); &#125;, clickSub() &#123; this.$store.commit(&quot;SUB_COUNT&quot;); &#125;, &#125;,&#125;;&lt;/script&gt; åœ¨vuexä¸­æˆ‘ä»¬é€šè¿‡mutationså¯¹numberè¿›è¡Œä¿®æ”¹ï¼š 12345678910111213export default new Vuex.Store(&#123; state: &#123; number: 0, &#125;, mutations: &#123; ADD_COUNT(state) &#123; state.number = state.number + 1; &#125;, SUB_COUNT(state) &#123; state.number = state.number - 1; &#125;, &#125;&#125;); é‚£æˆ‘ä»¬ç°åœ¨å¦‚ä½•æ¥ä¼ªé€ storeæ•°æ®å‘¢ï¼Ÿè¿™é‡Œå’ŒVue-Routerçš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡createLocalVueåˆ›å»ºä¸€ä¸ªéš”ç¦»çš„Vueç±»ï¼š 123456789101112131415161718192021222324252627282930import &#123; mount, createLocalVue &#125; from &quot;@vue/test-utils&quot;;import Count from &quot;@/components/Count&quot;;import Vuex from &quot;vuex&quot;;const localVue = createLocalVue();localVue.use(Vuex);describe(&quot;count&quot;, () =&gt; &#123; const state = &#123; number: 0, &#125;; const mutations = &#123; ADD_COUNT: jest.fn(), SUB_COUNT: jest.fn(), &#125;; const store = new Vuex.Store(&#123; state, mutations &#125;); test(&quot;render&quot;, async () =&gt; &#123; const wrapper = mount(Count, &#123; store, localVue, &#125;); expect(wrapper.find(&quot;.number&quot;).text()).toBe(&quot;0&quot;); wrapper.find(&quot;.add&quot;).trigger(&quot;click&quot;); expect(mutations.ADD_COUNT).toHaveBeenCalled(); expect(mutations.SUB_COUNT).not.toHaveBeenCalled(); &#125;);&#125;); æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™é‡Œåšäº†ä»€ä¹ˆæ“ä½œï¼Œå‰é¢å’ŒVueRouterä¸€æ ·åˆ›å»ºä¸€ä¸ªéš”ç¦»ç±»localVueï¼›ç„¶åé€šè¿‡new Vuex.Storeåˆ›å»ºäº†ä¸€ä¸ªstoreå¹¶å¡«å…¥å‡æ•°æ®stateå’Œmutationsï¼›è¿™é‡Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒmutationsä¸­å‡½æ•°åšäº†å“ªäº›æ“ä½œï¼Œæˆ‘ä»¬åªè¦çŸ¥é“å…ƒç´ ç‚¹å‡»è§¦å‘äº†å“ªä¸ªmutationså‡½æ•°ï¼Œé€šè¿‡ä¼ªé€ çš„å‡½æ•°æˆ‘ä»¬å»æ–­è¨€mutationsæ˜¯å¦è¢«è°ƒç”¨ã€‚ å¦ä¸€ç§æµ‹è¯•storeæ•°æ®çš„æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ªè¿è¡Œä¸­çš„storeï¼Œä¸å†é€šè¿‡é¡µé¢è§¦å‘Vuexä¸­çš„å‡½æ•°ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯ä¸éœ€è¦ä¼ªé€ Vuexå‡½æ•°ï¼›å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªstore/list.js 123456789101112131415export default &#123; state: &#123; list: [], &#125;, getters: &#123; joinList: (state) =&gt; &#123; return state.list.join(&quot;,&quot;); &#125;, &#125;, mutations: &#123; PUSH(state, payload) &#123; state.list.push(payload); &#125;, &#125;,&#125;; 12345678910111213141516171819202122232425import &#123; createLocalVue &#125; from &quot;@vue/test-utils&quot;;import Vuex from &quot;vuex&quot;;import &#123; cloneDeep &#125; from &quot;lodash&quot;;import listStore from &quot;@/store/list&quot;;describe(&quot;list&quot;, () =&gt; &#123; test(&quot;expect list&quot;, () =&gt; &#123; const localVue = createLocalVue(); localVue.use(Vuex); const store = new Vuex.Store(cloneDeep(listStore)); expect(store.state.list).toEqual([]); store.commit(&quot;PUSH&quot;, &quot;1&quot;); expect(store.state.list).toEqual([&quot;1&quot;]); &#125;); test(&quot;list getter&quot;, () =&gt; &#123; const localVue = createLocalVue(); localVue.use(Vuex); const store = new Vuex.Store(cloneDeep(listStore)); expect(store.getters.joinList).toBe(&quot;&quot;); store.commit(&quot;PUSH&quot;, &quot;1&quot;); store.commit(&quot;PUSH&quot;, &quot;3&quot;); expect(store.getters.joinList).toBe(&quot;1,3&quot;); &#125;);&#125;); æˆ‘ä»¬ç›´æ¥åˆ›å»ºäº†ä¸€ä¸ªstoreï¼Œé€šè¿‡storeæ¥è¿›è¡Œcommitå’Œgettersçš„æ“ä½œã€‚ æ€»ç»“ å‰ç«¯æ¡†æ¶è¿­ä»£ä¸æ–­ï¼Œä½†æ˜¯å‰ç«¯å•å…ƒæµ‹è¯•ç¡®æ˜¾æœ‰äººå…³æ³¨ï¼›ä¸€ä¸ªå¥å£®çš„å‰ç«¯é¡¹ç›®åº”è¯¥æœ‰å•å…ƒæµ‹è¯•çš„æ¨¡å—ï¼Œä¿è¯äº†æˆ‘ä»¬çš„é¡¹ç›®ä»£ç è´¨é‡å’ŒåŠŸèƒ½çš„ç¨³å®šï¼›ä½†æ˜¯ä¹Ÿå¹¶ä¸æ˜¯æ‰€æœ‰çš„é¡¹ç›®éƒ½éœ€è¦æœ‰å•å…ƒæµ‹è¯•çš„ï¼Œæ¯•ç«Ÿç¼–å†™æµ‹è¯•ç”¨ä¾‹ä¹Ÿéœ€è¦æˆæœ¬ï¼›å› æ­¤å¦‚æœä½ çš„é¡¹ç›®ç¬¦åˆä¸‹é¢çš„å‡ ä¸ªæ¡ä»¶ï¼Œå°±å¯ä»¥è€ƒè™‘å¼•å…¥å•å…ƒæµ‹è¯•ï¼š é•¿æœŸç¨³å®šçš„é¡¹ç›®è¿­ä»£ï¼Œéœ€è¦ä¿è¯ä»£ç çš„å¯ç»´æŠ¤æ€§å’ŒåŠŸèƒ½ç¨³å®šï¼› é¡µé¢åŠŸèƒ½ç›¸å¯¹æ¥è¯´è¯´æ¯”è¾ƒå¤æ‚ï¼Œé€»è¾‘è¾ƒå¤šï¼› å¯¹äºä¸€äº›å¤ç”¨æ€§å¾ˆé«˜çš„ç»„ä»¶ï¼Œå¯ä»¥è€ƒè™‘å•å…ƒæµ‹è¯•ï¼›","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"},{"name":"æµ‹è¯•","slug":"Test","permalink":"https://xieyufei.com/tags/Test/"}]},{"title":"é‡‘ä¸‰é“¶å››é¢è¯•å­£ï¼Œé˜²æŠ–èŠ‚æµè¦ç‰¢è®°","date":"2021-04-10T14:00:00.000Z","path":"2021/04/10/Debounce-Throttle.html","text":"æœ€è¿‘æ˜¯é‡‘ä¸‰é“¶å››é¢è¯•å­£ï¼Œç›¸ä¿¡ä¸å°‘å…¬å¸é¢è¯•é¢˜éƒ½ä¼šæ¶‰åŠåˆ°é˜²æŠ–èŠ‚æµçš„é—®é¢˜ï¼Œæœ‰çš„é¢è¯•é¢˜ç”šè‡³æ˜¯æ‰‹å†™å®ç°ï¼Œä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹ä¸‹é˜²æŠ–èŠ‚æµçš„åº”ç”¨åœºæ™¯ä»¥åŠå®ƒå†…éƒ¨å®ç°çš„é€»è¾‘ã€‚ ä»€ä¹ˆæ˜¯é˜²æŠ–èŠ‚æµ ç”¨æˆ·åœ¨é¡µé¢ä¸Šè¿›è¡Œçª—å£å¤§å°çš„è°ƒæ•´ã€æ»šåŠ¨é¡µé¢æˆ–è€…åœ¨è¾“å…¥æ¡†æœç´¢è”æƒ³è¯ç­‰ä¸€ç³»åˆ—æ“ä½œæ—¶ï¼Œéƒ½ä¼šé¢‘ç¹çš„è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ï¼›å¦‚æœè¿™æ—¶å€™åˆéœ€è¦åœ¨äº‹ä»¶å¤„ç†å‡½æ•°é‡Œå»å¼‚æ­¥è·å–æ•°æ®æˆ–è€…è¿›è¡ŒDOMçš„æ“ä½œç­‰è€—æ€§èƒ½çš„æ“ä½œæ—¶ï¼Œå®¹æ˜“å¯¼è‡´é¡µé¢å¡é¡¿ç­‰å½±å“ç”¨æˆ·çš„ä½“éªŒï¼›è¿™æ—¶å°±å¯ä»¥é€šè¿‡é˜²æŠ–ï¼ˆdebounceï¼‰å’ŒèŠ‚æµï¼ˆthrottleï¼‰å‡½æ•°æ¥é™åˆ¶äº‹ä»¶å¤„ç†å‡½æ•°çš„è°ƒç”¨é¢‘ç‡ï¼Œæå‡ç”¨æˆ·çš„ä½“éªŒã€‚ æœ€ä¸Šé¢æ­£å¸¸æ‰§è¡Œæ¯ä¸€æ¡ç«–çº¿ä»£è¡¨äº†æ¯ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°çš„è°ƒç”¨ï¼Œä¸­é—´æ˜¯ç»è¿‡é˜²æŠ–å‡½æ•°å¤„ç†åå®é™…çš„è°ƒç”¨æƒ…å†µï¼Œæœ€ä¸‹é¢æ˜¯ç»è¿‡èŠ‚æµå‡½æ•°å¤„ç†åçš„è°ƒç”¨æƒ…å†µï¼›å‘ç°æ¯”æœ€ä¸Šé¢å¯†é›†è°ƒç”¨çš„æƒ…å†µè¦å°‘äº†å¾ˆå¤šã€‚ å®ç°é˜²æŠ– é˜²æŠ–ï¼Œæœ€å¼€å§‹æ˜¯ç”¨åœ¨ç›¸æœºä¸Šï¼Œæˆ‘ä»¬åœ¨æ‹ç…§æ—¶ï¼ˆåŒ…æ‹¬ç”¨æ‰‹æœºæ‹ï¼‰ï¼Œç»å¸¸ä¼šå‘ç°ç”±äºæ‰‹çš„æŠ–åŠ¨ï¼Œæ‹æ‘„å‡ºæ¥çš„ç”»é¢å‘ç”Ÿé‡å½±æˆ–è€…æ¨¡ç³Šçš„æƒ…å†µï¼›è€Œç°åœ¨çš„ç›¸æœºæˆ–æ‰‹æœºåŸºæœ¬éƒ½ä¼šåŠ å…¥é˜²æŠ–æŠ€æœ¯ï¼Œé™¤éæˆ‘ä»¬æŠ–åŠ¨ç‰¹åˆ«çš„å‰å®³ï¼Œé˜²æŠ–æŠ€æœ¯çš„åŠ å…¥å¯ä»¥è®©æˆ‘ä»¬æ‹æ‘„æ›´å¤šæ¸…æ™°çš„ç…§ç‰‡ã€‚ è€Œåœ¨æˆ‘ä»¬çš„JSä¸­ï¼Œé˜²æŠ–æ˜¯æŒ‡è§¦å‘äº‹ä»¶ånç§’åæ‰æ‰§è¡Œå‡½æ•°ï¼Œå¦‚æœåœ¨ n ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´ï¼›è¿™æ®µè¯æ¯”è¾ƒç»•å£ï¼Œæˆ‘ä»¬ä»¥scrollå‡½æ•°ä¸ºä¾‹ï¼š 1234function scrollHandler() &#123; console.log(&#x27;handle&#x27;)&#125;window.addEventListener(&#x27;scroll&#x27;, scrollHandler) æˆ‘ä»¬åœ¨é¡µé¢æ»šåŠ¨æ—¶ä¼šä¸æ–­è§¦å‘scrollHandlerå‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›æ¯æ¬¡éƒ½è§¦å‘ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ…è£…é˜²æŠ–å‡½æ•°æ¥è¿›è¡Œé™åˆ¶ï¼Œå½“å»¶è¿Ÿæ—¶é—´è¶…è¿‡nç§’æ‰çœŸæ­£æ‰§è¡ŒscrollHandlerå‡½æ•°ã€‚ è€Œé˜²æŠ–å‡½æ•°å®ç°çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨æ¯æ¬¡è§¦å‘äº‹ä»¶æ—¶ï¼Œéƒ½è®¾ç½®ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡Œï¼Œå¹¶ä¸”å–æ¶ˆä¹‹å‰çš„å®šæ—¶å™¨ã€‚ 12345678910111213function debounce(fn, wait) &#123; var timeout return function () &#123; var context = this, args = arguments clearTimeout(timeout) timeout = setTimeout(function () &#123; fn.apply(context, args) &#125;, wait) &#125;&#125;window.addEventListener(&#x27;scroll&#x27;, debounce(scrollHandler, 500)) debounceä¸»è¦çš„ç›®çš„å°±æ˜¯å»¶è¿Ÿæ‰§è¡Œä¼ å…¥çš„fnå‡½æ•°ï¼Œæˆ‘ä»¬å‘ç°å®ƒè¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¯å…¸å‹çš„é—­åŒ…ç»“æ„ï¼›é¡µé¢æ»šåŠ¨å°†æ¯æ¬¡è§¦å‘scrollHandlerå˜æˆæ¯æ¬¡éƒ½ä¼šè§¦å‘debounceä¸­è¿”å›çš„é—­åŒ…å‡½æ•°ï¼›ç”±äºé—­åŒ…çš„å­˜åœ¨ï¼Œå› æ­¤timeoutå®šæ—¶å™¨å˜é‡ä¼šä¸€ç›´å­˜åœ¨ï¼Œè§¦å‘é—­åŒ…å‡½æ•°æ—¶éƒ½ä¼šæ¸…é™¤ä¸Šæ¬¡è®¾ç½®çš„å®šæ—¶å™¨ã€‚ è¿™é‡Œè°ƒç”¨fnæ—¶ï¼Œå¾ˆå¤šfnå‡½æ•°éƒ½æ˜¯æ»šåŠ¨æˆ–è€…ç‚¹å‡»çš„å›è°ƒå‡½æ•°ï¼Œä¼šæä¾›Eventå¯¹è±¡è¿›è¡Œå¤„ç†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å°†åŸæ¥çš„å‚æ•°ä¼ å…¥ä»¥åŠthisè¿›è¡Œç»‘å®šï¼›å› æ­¤åˆ†åˆ«èµ‹å€¼äº†å˜é‡contextå’Œargsï¼Œè¿™é‡Œargumentsæ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ç±»æ•°ç»„å¯¹è±¡å‘¢ï¼Œæˆ‘ä»¬åœ¨å‡½æ•°ä¸­console.logå‡ºæ¥çœ‹ä¸€ä¸‹ï¼š æˆ‘ä»¬å‘ç°å®ƒçš„å±æ€§åæ˜¯æŒ‰ç…§ä»0å¼€å§‹çš„indexï¼Œç¬¬ä¸€ä¸ªå‚æ•°çš„å±æ€§æ˜¯â€™0â€™ï¼Œç¬¬äºŒä¸ªå±æ€§åæ˜¯â€™1â€™ï¼Œå¹¶ä¸”å®ƒè¿˜æœ‰ä¸ªlengthå±æ€§ï¼›ä½†æ˜¯å®ƒå’Œæ•°ç»„ä¸åŒçš„æ˜¯å®ƒ__proto__ç›´æ¥æŒ‡å‘äº†Objectï¼Œè€Œæ•°ç»„çš„__proto__æŒ‡å‘äº†Arrayï¼›å› æ­¤ArrayåŸå‹ä¸Šçš„ä¸€äº›mapã€findç­‰æ–¹æ³•argumentsä¹Ÿæ˜¯æ²¡æœ‰çš„ã€‚ æˆ‘ä»¬å›åˆ°é˜²æŠ–å‡½æ•°ï¼Œä¸Šé¢çš„é˜²æŠ–å‡½æ•°æ˜¯éç«‹å³æ‰§è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è§¦å‘äº‹ä»¶åä¸ä¼šé©¬ä¸Šæ‰§è¡Œï¼Œä½†æ˜¯æˆ‘ä»¬æŸäº›åœºæ™¯ä¸‹éœ€è¦ç«‹å³æ‰§è¡Œï¼›ç«‹å³æ‰§è¡Œåå½“nç§’å†…è§¦å‘äº‹ä»¶æ‰èƒ½å†æ¬¡æ‰§è¡Œã€‚ å› æ­¤æˆ‘ä»¬æ¥çœ‹ä¸‹ç«‹å³æ‰§è¡Œç‰ˆæœ¬çš„é˜²æŠ–å‡½æ•°æ—¶å¦‚ä½•æ¥å®ç°çš„ï¼š 1234567891011121314function debounce(fn, wait) &#123; let timeout, result; return function () &#123; const context = this const args = arguments clearTimeout(timeout) const callNow = !timeout timeout = setTimeout(function() &#123; timeout = null &#125;, wait) if (callNow) result = fn.apply(context, args) return result &#125;&#125; åœ¨ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬è¿˜æ˜¯é€šè¿‡é—­åŒ…è¿”å›äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œä½†æ˜¯åœ¨é‡Œé¢å¢åŠ äº†ä¸€ä¸ªå˜é‡callNowçš„åˆ¤æ–­ï¼Œåˆ¤æ–­ä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨æ˜¯å¦å·²ç»è¢«æ¸…é™¤ï¼Œå¦‚æœæ²¡æœ‰å®šæ—¶å™¨åˆ™ç«‹å³æ‰§è¡Œfnå‡½æ•°ã€‚ åœ¨å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„åœºæ™¯æ¥åˆ‡æ¢ä¸åŒç‰ˆæœ¬çš„é˜²æŠ–å‡½æ•°ï¼Œå› æ­¤å°†ä¸¤ä¸ªé˜²æŠ–å‡½æ•°ç»“åˆèµ·æ¥ï¼Œæ ¹æ®å‚æ•°æ¥è¿›è¡Œåˆ¤æ–­ï¼š 12345678910111213141516171819202122232425/** * fnï¼šæ‰§è¡Œå‡½æ•° * waitï¼šå»¶è¿Ÿæ‰§è¡Œæ—¶é—´ * immediateï¼šæ˜¯å¦ç«‹å³æ‰§è¡Œ **/function debounce(fn, wait, immediate) &#123; var timeout, result; return function () &#123; var context = this var args = arguments clearTimeout(timeout) if (immediate) &#123; var callNow = !timeout timeout = setTimeout(function () &#123; timeout = null &#125;, wait) if (callNow) result = fn.apply(context, args) &#125; else &#123; timeout = setTimeout(function () &#123; fn.apply(context, args) &#125;, wait) &#125; return result &#125;&#125; åˆ°è¿™é‡Œæˆ‘ä»¬çš„é˜²æŠ–å‡½æ•°å·²ç»æ¥è¿‘å®Œç¾äº†ï¼Œä½†æ˜¯æœ€åå¦‚æœæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿå–æ¶ˆè¿™é‡Œçš„debounceå‡½æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¼ å…¥waitæ˜¯10ç§’ï¼Œimmediateä¸ºtrueï¼Œåˆšå¼€å§‹æ˜¯ç«‹å³æ‰§è¡Œfnå‡½æ•°çš„ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ç­‰å¾…10ç§’æ‰èƒ½é‡æ–°å»è§¦å‘fnå‡½æ•°ï¼Œä¸­é—´åšçš„æ‰€æœ‰æ“ä½œéƒ½æ˜¯æ— æ•ˆçš„ï¼›æˆ‘ä»¬å¸Œæœ›èƒ½æœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œç‚¹å‡»åèƒ½å¤Ÿå–æ¶ˆä¸Šä¸€æ¬¡çš„é˜²æŠ–ï¼Œç„¶åæˆ‘ä»¬å°±èƒ½å¤Ÿå†æ¬¡è§¦å‘äº†ã€‚ è¿™é‡Œæ”¹åŠ¨ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿”å›é—­åŒ…å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œä½†æ˜¯ç”±äºæ˜¯åŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬ç»™ä»–å…·åï¼ŒåŒæ—¶èµ‹å€¼ä¸€ä¸ªcancelå‡½æ•°ç”¨æ¥æ¸…é™¤é—­åŒ…å¤–çš„å®šæ—¶å™¨timeoutå³å¯ï¼š 12345678910111213141516171819202122232425function debounce(fn, wait, immediate) &#123; var timeout, result; var debounced = function () &#123; var context = this var args = arguments clearTimeout(timeout) if (immediate) &#123; var callNow = !timeout timeout = setTimeout(function () &#123; timeout = null &#125;, wait) if (callNow) result = fn.apply(context, args) &#125; else &#123; timeout = setTimeout(function () &#123; fn.apply(context, args) &#125;, wait) &#125; return result &#125; debounced.cancel = function() &#123; clearTimeout(timeout) timeout = null &#125; return debounced&#125; é‚£ä¹ˆå¦‚ä½•æ¥è°ƒç”¨è¿™ä¸ªcancelå‡½æ•°å‘¢ï¼Ÿæˆ‘ä»¬è¿˜æ˜¯ä»¥scrollå‡½æ•°ä¸ºä¾‹ï¼Œé€šè¿‡ç»™é¡µé¢ä¸Šçš„btnå–æ¶ˆæŒ‰é’®å¢åŠ ç‚¹å‡»äº‹ä»¶è¿›è¡Œè§¦å‘ï¼š 12345678var cancelBtn = document.getElementById(&#x27;btn&#x27;)var setDebounce = debounce(function () &#123; console.log(&#x27;handle&#x27;)&#125;, 10000, true)cancelBtn.addEventListener(&#x27;click&#x27;, function () &#123; setDebounce.cancel()&#125;)window.addEventListener(&#x27;scroll&#x27;, setDebounce) åˆ°è¿™é‡Œæˆ‘ä»¬çš„é˜²æŠ–å‡½æ•°å°±å¾ˆå®Œç¾äº†ã€‚ å®ç°èŠ‚æµ èŠ‚æµå‡½æ•°æ˜¯æŒ‡å½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿è¯ä¸€å®šæ—¶é—´æ®µå†…åªè°ƒç”¨ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°ï¼›ä¹Ÿå°±æ˜¯ä¼šç¨€é‡Šå¤„ç†å‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ã€‚æˆ‘ä»¬é€šè¿‡æ—¶é—´è½´æ¥æ¸…æ™°çš„çœ‹ä¸‹å®ƒçš„æ‰§è¡Œè¿‡ç¨‹ï¼š æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒèŠ‚æµå‡½æ•°ä¸ç®¡åœ¨ä¸€ä¸ªå‘¨æœŸå†…è§¦å‘äº†å¤šå°‘æ¬¡scrollå‡½æ•°ï¼Œä¹Ÿä¸ç®¡è§¦å‘çš„æ—¶é—´é—´éš”ï¼Œæœ€ååªä¼šæ‰§è¡Œå‘¨æœŸå†…çš„æœ€åä¸€æ¬¡ï¼ˆæˆ–è€…ç¬¬ä¸€æ¬¡ï¼‰ï¼›èŠ‚æµå‡½æ•°åº”ç”¨åœºæ™¯ä¸€èˆ¬åœ¨çª—å£resizeæ—¶è¿›è¡Œå¸ƒå±€çš„è°ƒæ•´æˆ–è€…ç§»åŠ¨ç«¯ç›‘å¬touchmoveäº‹ä»¶æ—¶ç§»åŠ¨DOMå…ƒç´ ç­‰ï¼›èŠ‚æµå‡½æ•°åŒæ ·ä¹Ÿæœ‰æ—¶é—´æˆ³å’Œå®šæ—¶å™¨ä¸¤ä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹å®šæ—¶å™¨ç‰ˆçš„èŠ‚æµå‡½æ•°å®ç°æ–¹å¼ï¼š 12345678910111213function throttle(fn, wait) &#123; let timeout; return function () &#123; let context = this let args = arguments if (!timeout) &#123; timeout = setTimeout(function() &#123; timeout = null fn.apply(context, args) &#125;, wait) &#125; &#125;&#125; å’Œé˜²æŠ–å‡½æ•°æ¯æ¬¡æ¸…é™¤timeoutä¸åŒï¼Œè¿™é‡Œå¯¹timeoutè¿›è¡Œéç©ºåˆ¤æ–­ï¼Œåªæœ‰å®ƒä¸ºç©ºçš„æ—¶å€™æ‰èƒ½è®¾ç½®å®šæ—¶å™¨ï¼Œè¿™æ ·ä¿è¯äº†åœ¨ä¸€æ®µæ—¶é—´å†…åŒæ—¶åªæœ‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåœ¨æ—¶é—´åˆ°ä¹‹åä¼šé‡Šæ”¾å®šæ—¶å™¨å¹¶ä¸”æ‰§è¡Œfnå‡½æ•°ï¼Œé‡æ–°è®¾ç½®å®šæ—¶å™¨ã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸‹æ—¶é—´æˆ³ç‰ˆæœ¬çš„èŠ‚æµå‡½æ•°ï¼š 12345678910111213function throttle(fn, wait) &#123; var context, args var previous = 0 return function () &#123; var now = +new Date() context = this args = arguments if (now - previous &gt; wait) &#123; fn.apply(context, args) previous = now &#125; &#125;&#125; æ—¶é—´æˆ³ç‰ˆæœ¬çš„å‡½æ•°æ˜¯åœ¨é—­åŒ…å‡½æ•°çš„å¤–éƒ¨å­˜å‚¨äº†ä¸€ä¸ªpreviouså˜é‡ï¼Œæ˜¯ä¸Šæ¬¡æ‰§è¡Œçš„ä¸€ä¸ªæ—¶é—´æˆ³ï¼›æ¯æ¬¡è§¦å‘å†…éƒ¨é—­åŒ…å‡½æ•°æ—¶ä¸ä¸Šæ¬¡çš„æ—¶é—´æˆ³è¿›è¡Œå¯¹æ¯”åˆ¤æ–­ï¼Œå¦‚æœé—´éš”æ—¶é—´å¤§äºæˆ‘ä»¬è®¾ç½®çš„ç­‰å¾…æ—¶é—´åˆ™æ‰§è¡Œfnå‡½æ•°ï¼ŒåŒæ—¶æ›´æ–°æ—¶é—´æˆ³ï¼›åŒæ—¶ç”±äºæˆ‘ä»¬åˆå§‹åŒ–previousæ˜¯0ï¼Œè€Œnowå½“å‰çš„æ—¶é—´æˆ³å‡å»0è‚¯å®šæ˜¯ä¼šå¤§äºwaitæ—¶é—´çš„ï¼Œå› æ­¤æ—¶é—´æˆ³ç‰ˆæœ¬çš„èŠ‚æµå‡½æ•°fnä¸€å¼€å§‹å°±ä¼šè¢«è§¦å‘ã€‚ é€šè¿‡ä¸Šé¢æˆ‘ä»¬å¾ˆå®¹æ˜“å°±èƒ½å‘ç°ï¼Œä¸¤ä¸ªç‰ˆæœ¬çš„èŠ‚æµå‡½æ•°æœ€å¤§çš„ä¸åŒå°±æ˜¯fnå‡½æ•°æ‰§è¡Œçš„æ—¶é—´ç‚¹ï¼Œå®šæ—¶å™¨ç‰ˆæœ¬ç”±äºsetTimeoutå»¶æ—¶çš„ç‰¹æ€§ï¼Œåœ¨æ—¶é—´æ®µç»“æŸçš„æ—¶å€™è§¦å‘fnå‡½æ•°ï¼Œè€Œæ—¶é—´æˆ³ç‰ˆæœ¬æ˜¯åœ¨æ—¶é—´æ®µå¼€å§‹çš„æ—¶å€™è§¦å‘ã€‚ åŒæ ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸¤ç§èŠ‚æµå‡½æ•°ç»“åˆåˆ°ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šcancelå–æ¶ˆæ–¹æ³•ï¼š 123456789101112131415161718192021222324252627282930313233/** * fnï¼šæ‰§è¡Œå‡½æ•° * waitï¼šå»¶è¿Ÿæ‰§è¡Œæ—¶é—´ * immediateï¼šæ˜¯å¦ç«‹å³æ‰§è¡Œ **/function throttle(fn, wait, immediate) &#123; let timeout let previous = 0 var throttled = function () &#123; let context = this let args = arguments if (immediate) &#123; let now = Date.now() if (now - previous &gt; wait) &#123; fn.apply(context, args) previous = now &#125; &#125; else &#123; if (!timeout) &#123; timeout = setTimeout(() =&gt; &#123; timeout = null fn.apply(context, args) &#125;, wait) &#125; &#125; &#125; throttled.cancel = function() &#123; clearTimeout(timeout) previous = 0 timeout = null &#125; return throttled&#125;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"JSè®¾è®¡æ¨¡å¼ä¹‹è§‚å¯Ÿè€…æ¨¡å¼","date":"2021-03-10T12:48:47.000Z","path":"2021/03/10/DesignPattern-Observer.html","text":"åœ¨ç¿»é˜…è®¾è®¡æ¨¡å¼çš„æ–‡ç« ä¸­ï¼Œå¾ˆå¤šæ–‡ç« éƒ½æ˜¯å°†è§‚å¯Ÿè€…æ¨¡å¼ç­‰åŒäºå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œè™½ç„¶ä¸¤è€…åœ¨æœ¬è´¨ä¸€æ ·ï¼Œä½†åœ¨è®¾è®¡æ€æƒ³ä¸Šè¿˜æ˜¯å­˜åœ¨ä¸€äº›å·®å¼‚çš„ï¼›ä»Šå¤©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸¤è€…æœ‰ä»€ä¹ˆå¼‚åŒï¼Œä»¥åŠåœ¨Vueæºç ä¸­æ˜¯å¦‚ä½•åˆ©ç”¨å‘å¸ƒè®¢é˜…æ¨¡å¼æ¥å®ç°æ•°æ®å“åº”å¼çš„ã€‚ è§‚å¯Ÿè€…æ¨¡å¼ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä»€ä¹ˆæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰ï¼š è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œå¹¶è‡ªåŠ¨æ›´æ–°ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚ è¿™é‡Œåˆå¤šäº†ä¸€ä¸ªæœ¯è¯­ï¼Œè¡Œä¸ºå‹æ¨¡å¼ï¼Œå®ƒæ˜¯å¯¹åœ¨ä¸åŒçš„å¯¹è±¡ä¹‹é—´åˆ’åˆ†è´£ä»»å’Œç®—æ³•çš„æŠ½è±¡åŒ–ï¼Œè¡Œä¸ºå‹æ¨¡å¼ä¸ä»…ä»…å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»“æ„ï¼Œè€Œä¸”é‡ç‚¹å…³æ³¨å®ƒä»¬ä¹‹é—´çš„ç›¸äº’ä½œç”¨ï¼›è¡Œä¸ºå‹æ¨¡å¼ä¸€å…±æœ‰ä»¥ä¸‹11ç§ï¼Œä»Šå¤©æˆ‘ä»¬è¦è¯´çš„è§‚å¯Ÿè€…æ¨¡å¼å°±æ˜¯å…¶ä¸­çš„ä¸€ç§ï¼š æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼ˆTemplate Methodï¼‰ ç­–ç•¥æ¨¡å¼ï¼ˆStrategyï¼‰ å‘½ä»¤æ¨¡å¼ï¼ˆCommandï¼‰ ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediatorï¼‰ è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserverï¼‰ è¿­ä»£å™¨æ¨¡å¼ï¼ˆIteratiorï¼‰ è®¿é—®è€…æ¨¡å¼ï¼ˆVisiterï¼‰ è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibilityï¼‰ å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMementoï¼‰ çŠ¶æ€æ¨¡å¼ï¼ˆStateï¼‰ è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreterï¼‰ æˆ‘ä»¬å›åˆ°è§‚å¯Ÿè€…æ¨¡å¼çš„å®šä¹‰ï¼Œå®ƒå®šä¹‰ä¸€ç§ä¸€å¯¹å¤šçš„å…³ç³»ï¼›è¿™é‡Œçš„ä¸€æˆ‘ä»¬ç§°ä¸ºç›®æ ‡å¯¹è±¡ï¼ˆSubjectï¼‰ï¼Œå®ƒæœ‰å¢åŠ /åˆ é™¤/é€šçŸ¥ç­‰æ–¹æ³•ï¼Œè€Œå¤šåˆ™ç§°ä¸ºè§‚å¯Ÿè€…å¯¹è±¡ï¼ˆObserverï¼‰ï¼Œå®ƒå¯ä»¥æ¥æ”¶ç›®æ ‡å¯¹è±¡ï¼ˆSubjectï¼‰çš„çŠ¶æ€æ”¹å˜å¹¶è¿›è¡Œå¤„ç†ï¼›ç›®æ ‡å¯¹è±¡å¯ä»¥æ·»åŠ ä¸€ç³»åˆ—çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œå½“ç›®æ ‡å¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…å¯¹è±¡ã€‚ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¥æ›´å…·ä½“çš„çœ‹ä¸€ä¸‹ç›®æ ‡å¯¹è±¡å’Œè§‚å¯Ÿè€…å¯¹è±¡æ˜¯å¦‚ä½•è¿›è¡Œè”ç³»çš„ï¼š 123456789101112131415161718192021222324252627282930313233343536// å®šä¹‰ä¸€ä¸ªç›®æ ‡å¯¹è±¡class Subject &#123; constructor() &#123; this.Observers = []; &#125; add(observer) &#123; //æ·»åŠ  this.Observers.push(observer); &#125; remove(observer) &#123; //ç§»é™¤ this.Observers.filter((item) =&gt; item === observer); &#125; notify() &#123; //é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€… this.Observers.forEach((item) =&gt; &#123; item.update(); &#125;); &#125;&#125;//å®šä¹‰è§‚å¯Ÿè€…å¯¹è±¡class Observer &#123; constructor(name) &#123; this.name = name; &#125; update() &#123; console.log(`my name is:$&#123;this.name&#125;`); &#125;&#125;let sub = new Subject();let obs1 = new Observer(&quot;observer11&quot;);let obs2 = new Observer(&quot;observer22&quot;);sub.add(obs1);sub.add(obs2);sub.notify(); æˆ‘ä»¬åœ¨è¿™é‡Œå®šä¹‰äº†ç›®æ ‡å¯¹è±¡å’Œè§‚å¯Ÿè€…å¯¹è±¡ä¸¤ä¸ªç±»ï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¸­ç»´æŠ¤äº†ä¸€ä¸ªè§‚å¯Ÿè€…çš„æ•°ç»„ï¼Œæ–°å¢æ—¶å°†è§‚å¯Ÿè€…å‘æ•°ç»„ä¸­pushï¼›ç„¶åé€šè¿‡notifyé€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼›è€Œè§‚å¯Ÿè€…åªæœ‰ä¸€ä¸ªupdateå‡½æ•°ï¼Œç”¨æ¥æ¥æ”¶è§‚å¯Ÿè€…æ›´æ–°åçš„ä¸€ä¸ªå›è°ƒï¼›åœ¨æœ‰äº›ç‰ˆæœ¬çš„ä»£ç ä¸­ä¼šå°†è§‚å¯Ÿè€…ç›´æ¥å®šä¹‰ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œè€Œéä¸€ä¸ªç±»ï¼Œä½†æ˜¯å…¶æœ¬è´¨éƒ½æ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯è°ƒç”¨è§‚å¯Ÿè€…çš„æ›´æ–°æ¥å£è¿›è¡Œé€šçŸ¥ã€‚ è¿™ç§æ¨¡å¼çš„åº”ç”¨åœ¨æ—¥å¸¸ä¸­ä¹Ÿå¾ˆå¸¸è§ï¼Œæ¯”å¦‚æˆ‘ä»¬ç»™divç»‘å®šclickç›‘å¬äº‹ä»¶ï¼Œå…¶æœ¬è´¨å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ç§åº”ç”¨ï¼š 1234567var btn = document.getElementById(&#x27;btn&#x27;)btn.addEventListener(&#x27;click&#x27;, function(ev)&#123; console.log(1)&#125;)btn.addEventListener(&#x27;click&#x27;, function(ev)&#123; console.log(2)&#125;) è¿™é‡Œçš„btnå¯ä»¥çœ‹ä½œæ˜¯æˆ‘ä»¬çš„ç›®æ ‡å¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿå¯¹è±¡ï¼‰ï¼Œå½“å®ƒè¢«ç‚¹å‡»æ—¶ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šé€šçŸ¥å†…éƒ¨æ·»åŠ çš„è§‚å¯Ÿè€…å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬é€šè¿‡addEventListenerå‡½æ•°æ·»åŠ çš„ä¸¤ä¸ªåŒ¿åå‡½æ•°ã€‚ æˆ‘ä»¬å‘ç°ï¼Œè§‚å¯Ÿè€…æ¨¡å¼å¥½å¤„æ˜¯èƒ½å¤Ÿé™ä½è€¦åˆï¼Œç›®æ ‡å¯¹è±¡å’Œè§‚å¯Ÿè€…å¯¹è±¡é€»è¾‘äº’ä¸å¹²æ‰°ï¼Œä¸¤è€…éƒ½ä¸“æ³¨äºè‡ªèº«çš„åŠŸèƒ½ï¼Œåªæä¾›å’Œè°ƒç”¨äº†æ›´æ–°æ¥å£ï¼›è€Œç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¸­ç»´æŠ¤çš„æ‰€æœ‰è§‚å¯Ÿè€…éƒ½èƒ½æ¥æ”¶åˆ°é€šçŸ¥ï¼Œæ— æ³•è¿›è¡Œè¿‡æ»¤ç­›é€‰ã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼ æˆ‘ä»¬å»æœç´¢24ç§åŸºæœ¬çš„è®¾è®¡æ¨¡å¼ï¼Œä¼šå‘ç°å…¶ä¸­å¹¶æ²¡æœ‰å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼›åˆšå¼€å§‹å‘å¸ƒè®¢é˜…æ¨¡å¼åªæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„ä¸€ä¸ªåˆ«ç§°ï¼Œä½†æ˜¯ç»è¿‡æ—¶é—´çš„æ²‰æ·€ï¼Œä»–æ”¹è¿›äº†è§‚å¯Ÿè€…æ¨¡å¼çš„ç¼ºç‚¹ï¼Œæ¸æ¸åœ°å¼€å§‹ç‹¬ç«‹äºè§‚å¯Ÿè€…æ¨¡å¼ï¼›æˆ‘ä»¬ä¹Ÿæ¥çœ‹ä¸€ä¸‹å®ƒçš„ä¸€ä¸ªå®šä¹‰ï¼š å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯åŸºäºä¸€ä¸ªäº‹ä»¶ï¼ˆä¸»é¢˜ï¼‰é€šé“ï¼Œå¸Œæœ›æ¥æ”¶é€šçŸ¥çš„å¯¹è±¡Subscriberé€šè¿‡è‡ªå®šä¹‰äº‹ä»¶è®¢é˜…ä¸»é¢˜ï¼Œè¢«æ¿€æ´»äº‹ä»¶çš„å¯¹è±¡Publisheré€šè¿‡å‘å¸ƒä¸»é¢˜äº‹ä»¶çš„æ–¹å¼é€šçŸ¥å„ä¸ªè®¢é˜…è¯¥ä¸»é¢˜çš„Subscriberå¯¹è±¡ã€‚ æˆ‘ä»¬çœ‹åˆ°å®šä¹‰é‡Œé¢ä¹Ÿæ¶‰åŠåˆ°äº†ä¸¤ç§å¯¹è±¡ï¼šæ¥æ”¶é€šçŸ¥çš„å¯¹è±¡ï¼ˆSubscriberï¼‰å’Œè¢«æ¿€æ´»äº‹ä»¶çš„å¯¹è±¡ï¼ˆPublisherï¼‰ï¼›è¢«æ¿€æ´»äº‹ä»¶å¯¹è±¡ï¼ˆPublisherï¼‰æˆ‘ä»¬å¯ä»¥ç±»æ¯”ä¸ºè§‚å¯Ÿè€…æ¨¡å¼ä¸­çš„ç›®æ ‡å¯¹è±¡ï¼Œæ¥å‘å¸ƒäº‹ä»¶é€šçŸ¥ï¼Œè€Œæ¥æ”¶é€šçŸ¥å¯¹è±¡ï¼ˆSubscriberï¼‰å¯ä»¥ç±»æ¯”ä¸ºè§‚å¯Ÿè€…å¯¹è±¡ï¼Œè®¢é˜…å„ç§é€šçŸ¥ã€‚ å‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼çš„ä¸åŒåœ¨äºï¼Œå¢åŠ äº†ç¬¬ä¸‰æ–¹å³äº‹ä»¶ä¸­å¿ƒï¼›ç›®æ ‡å¯¹è±¡çŠ¶æ€çš„æ”¹å˜å¹¶ç›´æ¥é€šçŸ¥è§‚å¯Ÿè€…ï¼Œè€Œæ˜¯é€šè¿‡ç¬¬ä¸‰æ–¹çš„äº‹ä»¶ä¸­å¿ƒæ¥æ´¾å‘é€šçŸ¥ã€‚ ä¸ºäº†åŠ æ·±ç†è§£ï¼Œæˆ‘ä»¬ä»¥ç”Ÿæ´»ä¸­çš„æƒ…å½¢ä¸ºä¾‹ï¼›æ¯”å¦‚æˆ‘ä»¬è®¢é˜…æŠ¥çº¸æ‚å¿—ç­‰ï¼Œä¸€èˆ¬ä¸ä¼šç›´æ¥è·‘åˆ°æŠ¥ç¤¾å»è®¢é˜…ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªå¹³å°ï¼Œæ¯”å¦‚è¡—è¾¹çš„æŠ¥äº­æˆ–è€…é‚®å±€ä¹Ÿå¯ä»¥è®¢é˜…ï¼›è€ŒæŠ¥çº¸æ‚å¿—ä¹Ÿä¼šæœ‰å¤šç§ï¼Œæ¯”å¦‚æ™¨æŠ¥æ™šæŠ¥æ—¥æŠ¥ç­‰ç­‰ï¼›æˆ‘ä»¬è®¢é˜…æŠ¥çº¸åæŠ¥ç¤¾å‡ºç‰ˆåä¼šé€šè¿‡å¹³å°æ¥ç»™æˆ‘ä»¬æŠ•é€’ï¼Œé€šè¿‡é‚®å±€é‚®å¯„æˆ–è€…è‡ªå–ç­‰ç­‰ï¼Œé‚£ä¹ˆè¿™é‡Œå°±æ¶‰åŠåˆ°äº†æŠ¥ç¤¾ã€è®¢é˜…è€…å’Œç¬¬ä¸‰æ–¹å¹³å°ä¸‰ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬é€šè¿‡ä»£ç æ¥æ¨¡æ‹Ÿä¸‰è€…çš„åŠ¨ä½œï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768// æŠ¥ç¤¾class Publisher &#123; constructor(name, channel) &#123; this.name = name; this.channel = channel; &#125; // æ³¨å†ŒæŠ¥çº¸ addTopic(topicName) &#123; this.channel.addTopic(topicName); &#125; // æ¨é€æŠ¥çº¸ publish(topicName) &#123; this.channel.publish(topicName); &#125;&#125;// è®¢é˜…è€…class Subscriber &#123; constructor(name, channel) &#123; this.name = name; this.channel = channel; &#125; //è®¢é˜…æŠ¥çº¸ subscribe(topicName) &#123; this.channel.subscribeTopic(topicName, this); &#125; //å–æ¶ˆè®¢é˜… unSubscribe(topicName) &#123; this.channel.unSubscribeTopic(topicName, this); &#125; //æ¥æ”¶æ¨é€ update(topic) &#123; console.log(`$&#123;topic&#125;å·²ç»é€åˆ°$&#123;this.name&#125;å®¶äº†`); &#125;&#125;// ç¬¬ä¸‰æ–¹å¹³å°class Channel &#123; constructor() &#123; this.topics = &#123;&#125;; &#125; //æŠ¥ç¤¾åœ¨å¹³å°æ³¨å†ŒæŠ¥çº¸ addTopic(topicName) &#123; this.topics[topicName] = []; &#125; //æŠ¥ç¤¾å–æ¶ˆæ³¨å†Œ removeTopic(topicName) &#123; delete this.topics[topicName]; &#125; //è®¢é˜…è€…è®¢é˜…æŠ¥çº¸ subscribeTopic(topicName, sub) &#123; if (this.topics[topicName]) &#123; this.topics[topicName].push(sub); &#125; &#125; //è®¢é˜…è€…å–æ¶ˆè®¢é˜… unSubscribeTopic(topicName, sub) &#123; this.topics[topicName].forEach((item, index) =&gt; &#123; if (item === sub) &#123; this.topics[topicName].splice(index, 1); &#125; &#125;); &#125; //å¹³å°é€šçŸ¥æŸä¸ªæŠ¥çº¸ä¸‹æ‰€æœ‰è®¢é˜…è€… publish(topicName) &#123; this.topics[topicName].forEach((item) =&gt; &#123; item.update(topicName); &#125;); &#125;&#125; è¿™é‡Œçš„æŠ¥ç¤¾æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºå‘å¸ƒè€…ï¼ˆPublisherï¼‰çš„è§’è‰²ï¼Œè®¢æŠ¥çº¸çš„è¯»è€…ç†è§£ä¸ºè®¢é˜…è€…ï¼ˆSubscriberï¼‰ï¼Œç¬¬ä¸‰æ–¹å¹³å°å°±æ˜¯äº‹ä»¶ä¸­å¿ƒï¼›æŠ¥ç¤¾åœ¨å¹³å°ä¸Šæ³¨å†ŒæŸä¸€ç±»å‹çš„æŠ¥çº¸ï¼Œç„¶åè¯»è€…å°±å¯ä»¥åœ¨å¹³å°è®¢é˜…è¿™ç§æŠ¥çº¸ï¼›ä¸‰ä¸ªç±»å‡†å¤‡å¥½äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä»–ä»¬å½¼æ­¤å¦‚ä½•è¿›è¡Œè”ç³»ï¼š 1234567891011121314151617181920212223242526272829var channel = new Channel();var pub1 = new Publisher(&quot;æŠ¥ç¤¾1&quot;, channel);var pub2 = new Publisher(&quot;æŠ¥ç¤¾2&quot;, channel);pub1.addTopic(&quot;æ™¨æŠ¥1&quot;);pub1.addTopic(&quot;æ™šæŠ¥1&quot;);pub2.addTopic(&quot;æ™¨æŠ¥2&quot;);var sub1 = new Subscriber(&quot;å°æ˜&quot;, channel);var sub2 = new Subscriber(&quot;å°çº¢&quot;, channel);var sub3 = new Subscriber(&quot;å°å¼ &quot;, channel);sub1.subscribe(&quot;æ™¨æŠ¥1&quot;);sub2.subscribe(&quot;æ™¨æŠ¥1&quot;);sub2.subscribe(&quot;æ™¨æŠ¥2&quot;);sub3.subscribe(&quot;æ™šæŠ¥1&quot;);sub3.subscribe(&quot;æ™¨æŠ¥2&quot;);sub3.unSubscribe(&quot;æ™¨æŠ¥2&quot;);pub1.publish(&quot;æ™¨æŠ¥1&quot;);pub1.publish(&quot;æ™šæŠ¥1&quot;);pub2.publish(&quot;æ™¨æŠ¥2&quot;);//æ™¨æŠ¥1å·²ç»é€åˆ°å°æ˜å®¶äº†//æ™¨æŠ¥1å·²ç»é€åˆ°å°çº¢å®¶äº†//æ™šæŠ¥1å·²ç»é€åˆ°å°å¼ å®¶äº†//æ™¨æŠ¥2å·²ç»é€åˆ°å°çº¢å®¶äº† ç”±äºå¹³å°æ˜¯æ²Ÿé€šçš„æ¡¥æ¢ï¼Œå› æ­¤æˆ‘ä»¬å…ˆå®šä¹‰äº†ä¸€ä¸ªè°ƒåº¦ä¸­å¿ƒchannelï¼Œç„¶ååˆ†åˆ«å®šä¹‰äº†ä¸¤ä¸ªæŠ¥ç¤¾pub1ã€pub2ï¼Œä»¥åŠä¸‰ä¸ªè¯»è€…sub1ã€sub2å’Œsub3ï¼›ä¸¤å®¶æŠ¥ç¤¾åœ¨å¹³å°æ³¨å†Œäº†æ™¨æŠ¥1ã€æ™šæŠ¥1å’Œæ™¨æŠ¥2ä¸‰ç§ç±»å‹çš„æŠ¥çº¸ï¼Œä¸‰ä¸ªè¯»è€…å„è‡ªè®¢é˜…å„å®¶çš„æŠ¥çº¸ï¼Œä¹Ÿèƒ½å–æ¶ˆè®¢é˜…ã€‚ æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨å‘å¸ƒè€…ä¸­å¹¶æ²¡æœ‰ç›´æ¥ç»´æŠ¤è®¢é˜…è€…åˆ—è¡¨ï¼Œè€Œæ˜¯æ³¨å†Œäº†ä¸€ä¸ªäº‹ä»¶ä¸»é¢˜ï¼Œè¿™é‡Œçš„æŠ¥çº¸ç±»å‹ç›¸å½“äºä¸€ä¸ªäº‹ä»¶ä¸»é¢˜ï¼›è®¢é˜…è€…è®¢é˜…ä¸»é¢˜ï¼Œå‘å¸ƒè€…æ¨é€æŸä¸ªä¸»é¢˜æ—¶ï¼Œè®¢é˜…è¯¥ä¸»é¢˜çš„æ‰€æœ‰è¯»è€…éƒ½ä¼šè¢«é€šçŸ¥åˆ°ï¼›è¿™æ ·å°±é¿å…äº†è§‚å¯Ÿè€…æ¨¡å¼æ— æ³•è¿›è¡Œè¿‡æ»¤ç­›é€‰çš„ç¼ºé™·ã€‚ ä¸»è¦åŒºåˆ« æˆ‘ä»¬é€šè¿‡ä¸€å¼ å›¾æ¥å½¢è±¡çš„æè¿°ä¸¤ç§æ¨¡å¼çš„åŒºåˆ«ã€‚ è§‚å¯Ÿè€…æ¨¡å¼æŠŠè§‚å¯Ÿè€…å¯¹è±¡ç»´æŠ¤åœ¨ç›®æ ‡å¯¹è±¡ä¸­çš„ï¼Œéœ€è¦å‘å¸ƒæ¶ˆæ¯æ—¶ç›´æ¥å‘æ¶ˆæ¯ç»™è§‚å¯Ÿè€…ã€‚åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œç›®æ ‡å¯¹è±¡æœ¬èº«æ˜¯çŸ¥é“è§‚å¯Ÿè€…å­˜åœ¨çš„ã€‚ è€Œå‘å¸ƒ/è®¢é˜…æ¨¡å¼ä¸­ï¼Œå‘å¸ƒè€…å¹¶ä¸ç»´æŠ¤è®¢é˜…è€…ï¼Œä¹Ÿä¸çŸ¥é“è®¢é˜…è€…çš„å­˜åœ¨ï¼Œæ‰€ä»¥ä¹Ÿä¸ä¼šç›´æ¥é€šçŸ¥è®¢é˜…è€…ï¼Œè€Œæ˜¯é€šçŸ¥è°ƒåº¦ä¸­å¿ƒï¼Œç”±è°ƒåº¦ä¸­å¿ƒé€šçŸ¥è®¢é˜…è€…ã€‚ Vueä¸­çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ æˆ‘ä»¬åœ¨æ·±å…¥å­¦ä¹ Object.definePropertyå’ŒProxyä¸­ä»‹ç»è¿‡ï¼ŒVue2.0å“åº”å¼æ˜¯é€šè¿‡Object.defineProperty()æ¥å¤„ç†çš„ï¼Œå°†æ¯ä¸ªç»„ä»¶dataä¸­çš„æ•°æ®è¿›è¡Œget/setåŠ«æŒï¼ˆä¹Ÿå°±æ˜¯ReactiveåŒ–ï¼‰ï¼Œé‚£ä¹ˆåŠ«æŒåæ˜¯å¦‚ä½•æ¥é€šçŸ¥é¡µé¢è¿›è¡Œæ›´æ–°æ“ä½œå‘¢ï¼Ÿè¿™é‡Œå°±ç”¨åˆ°äº†å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹å®˜ç½‘æ˜¯å¦‚ä½•ä»‹ç»çš„ï¼š æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª watcher å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ® property è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥ watcherï¼Œä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚ ç›¸ä¿¡çœ‹è¿‡æºç çš„åŒå­¦å¯¹Watcherå’ŒDepçš„ä»£ç çœ‹çš„æ˜¯äº‘é‡Œé›¾é‡Œï¼Œä¸äº†è§£è¿™ä¸¤ä¸ªç±»çš„ä½œç”¨ï¼›æˆ‘ä»¬å‰”é™¤ä¸ç›¸å…³çš„ä»£ç ï¼Œå¯¹ä¸»è¦ä»£ç é€æ®µåˆ†æã€‚ 1234567891011121314151617181920212223242526//defineReactiveéƒ¨åˆ†æºç //src\\core\\observer\\index.jsexport function defineReactive ( obj: Object, key: string, val: any, customSetter?: Function) &#123; // æ¯ä¸ªdataçš„å±æ€§éƒ½ä¼šæœ‰ä¸€ä¸ªdepå¯¹è±¡ï¼Œç”¨æ¥è¿›è¡Œæ”¶é›†ä¾èµ– const dep = new Dep() Object.defineProperty(obj, key, &#123; enumerable: true, configurable: true, get: function reactiveGetter () &#123; if (Dep.target) &#123; dep.depend() &#125; return value &#125;, set: function reactiveSetter (newVal) &#123; val = newVal dep.notify() &#125; &#125;)&#125; æˆ‘ä»¬åœ¨åˆå§‹åŒ–dataæ—¶æˆ–è€…ç”¨$setç»™dataæ–°å¢å±æ€§éƒ½ä¼šç»™æ¯ä¸ªå±æ€§å¾ªç¯éå†è°ƒç”¨defineReactiveè¿›è¡Œæ•°æ®åŠ«æŒï¼›æˆ‘ä»¬çœ‹åˆ°åœ¨æ¯ä¸ªå±æ€§ä¸­æ„é€ äº†ä¸€ä¸ªdepå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å±æ€§è§¦å‘getterå’Œsetteræ—¶éƒ½ä¼šè°ƒç”¨ï¼Œå®ƒå…¶å®æ˜¯ä¾èµ–æ”¶é›†å’Œè§¦å‘æ›´æ–°çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹ï¼Œç›¸å½“äºå‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­äº‹ä»¶ä¸­å¿ƒçš„ä¸€ä¸ªè§’è‰²ï¼›è€Œä¸”ç”±äºgetter/setterå‡½æ•°å†…å¯¹å®ƒé—­åŒ…å¼•ç”¨ï¼Œå› æ­¤æˆ‘ä»¬åœ¨this.numå’Œthis.num=1éƒ½æ˜¯è°ƒç”¨å®ƒä¸‹é¢çš„å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„å®ç°åŸç†ï¼š 1234567891011121314151617181920212223242526272829303132//src\\core\\observer\\dep.jsclass Dep &#123; static target: ?Watcher; id: number; subs: Array&lt;Watcher&gt;; constructor () &#123; this.id = uid++ this.subs = [] &#125; //æ–°å¢è§‚å¯Ÿè€… addSub (sub: Watcher) &#123; this.subs.push(sub) &#125; //ç§»é™¤è§‚å¯Ÿè€… removeSub (sub: Watcher) &#123; remove(this.subs, sub) &#125; // ä¾èµ–æ”¶é›† depend () &#123; if (Dep.target) &#123; Dep.target.addDep(this) &#125; &#125; // é€šçŸ¥æ‰€æœ‰çš„è§‚å¯Ÿè€… notify () &#123; const subs = this.subs.slice() for (let i = 0, l = subs.length; i &lt; l; i++) &#123; subs[i].update() &#125; &#125;&#125;Dep.target = null Depçš„å…¨ç¨‹æ˜¯Dependencyï¼Œç¿»è¯‘è¿‡æ¥ä¹Ÿæ˜¯ä¾èµ–ã€ä¾èµ–å…³ç³»çš„æ„æ€ï¼Œä»æ„æ€ä¸Šèƒ½çœ‹å‡ºæ¥æ˜¯ç”¨æ¥åšä¾èµ–æ”¶é›†çš„ï¼›æˆ‘ä»¬çœ‹åˆ°Depä¸‹é¢æœ‰ä¸€ä¸ªsubsæ•°ç»„ï¼Œå®ƒæ˜¯ä¸€ç»„Watcherçš„åˆ—è¡¨ï¼Œå­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬æ”¶é›†çš„ä¾èµ–åˆ—è¡¨ï¼›ç„¶åé€šè¿‡addSubå’ŒremoveSubæ–°å¢å’Œåˆ é™¤æŸä¸ªä¾èµ–ï¼Œå½“æ•°æ®æ›´æ–°æ—¶é€šè¿‡notifyé€šçŸ¥åˆ—è¡¨ä¸­æ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼›å¯ä»¥å‘ç°è¿™äº›å‡½æ•°å’Œæˆ‘ä»¬çš„äº‹ä»¶ä¸­å¿ƒçš„ä»£ç å¾ˆç›¸ä¼¼ï¼Œä¸è¿‡å®ƒä¸æ˜¯åŸºäºäº‹ä»¶ä¸»é¢˜ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ä¸€ä¸ªåˆ—è¡¨ã€‚ Depæºç çœ‹å®Œäº†ï¼Œä¸‹é¢å°±æ¥çœ‹æˆ‘ä»¬æ”¶é›†çš„ä¾èµ–Watcherï¼Œä¹Ÿå°±æ˜¯è®¢é˜…è€…ï¼Œéƒ½åšäº†å“ªäº›äº‹æƒ…ï¼š 1234567891011121314151617//src\\core\\observer\\watcher.jsclass Watcher &#123; constructor ( vm: Component, expOrFn: string | Function, cb: Function, options?: Object ) &#123; this.vm = vm &#125; addDep (dep: Dep) &#123; dep.addSub(this) &#125; //æ‰§è¡Œæ•°æ®æ›´æ–° update () &#123; &#125;&#125; æˆ‘ä»¬çœ‹åˆ°Watcherå’Œæˆ‘ä»¬çš„è®¢é˜…è€…ä»£ç ä¹Ÿå¾ˆç›¸ä¼¼ï¼Œåœ¨updateä¸­å¯¹è§†å›¾è¿›è¡Œæ›´æ–°æ“ä½œï¼›ç”±äºdataæ•°æ®å¯ä»¥ä¼ å…¥ä¸åŒçš„å­ç»„ä»¶ï¼Œè€Œåœ¨dataä¸­æ•°æ®æ›´æ–°æ—¶ï¼Œæ¯ä¸ªå­ç»„ä»¶ä¸­çš„é¡µé¢éƒ½éœ€è¦é‡æ–°æ›´æ–°ï¼Œå› æ­¤æ¯ä¸€ä¸ªVueç»„ä»¶éƒ½ä¼šåœ¨mounté˜¶æ®µéƒ½ä¼šåˆ›å»ºä¸€ä¸ªWatcherï¼Œç„¶åä¿å­˜åœ¨_watcherä¸Šï¼š 1234567891011121314//src\\core\\instance\\lifecycle.jsfunction mountComponent ( vm: Component, el: ?Element, hydrating?: boolean): Component &#123; callHook(vm, &#x27;beforeMount&#x27;) let updateComponent = () =&gt; &#123; vm._update(vm._render(), hydrating) &#125; vm._watcher = new Watcher(vm, updateComponent, noop) callHook(vm, &#x27;mounted&#x27;) return vm&#125; å› æ­¤Depå’ŒWatcherä¸¤è€…å…³ç³»å¦‚ä¸‹å›¾ï¼š æˆ‘ä»¬å›åˆ°Depçš„æºç ä¸­ï¼Œå‘ç°æœ‰ä¸€ä¸ªé™æ€å±æ€§Dep.targetæ˜¯Watcherï¼Œè¿›è¡Œä¾èµ–æ”¶é›†çš„æ—¶å€™ä¹Ÿæ˜¯é€šè¿‡Dep.targetï¼Œé‚£ä¹ˆå®ƒæ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Ÿè®©æˆ‘ä»¬ç»§ç»­å›åˆ°Watcherçš„æ„é€ å™¨ï¼š 123456789101112131415161718192021222324252627282930//src\\core\\observer\\dep.jsDep.target = nullconst targetStack = []export function pushTarget (_target: Watcher) &#123; if (Dep.target) targetStack.push(Dep.target) Dep.target = _target&#125;export function popTarget () &#123; Dep.target = targetStack.pop()&#125;//src\\core\\observer\\watcher.jsclass Watcher &#123; constructor ( vm: Component, expOrFn: string | Function, cb: Function, options?: Object ) &#123; this.getter = expOrFn this.get() &#125; get () &#123; pushTarget(this) value = this.getter.call(vm, vm) popTarget() return value &#125;&#125; åœ¨Depä»£ç ä¸­åŒæ—¶ç»´æŠ¤äº†ä¸€ä¸ªtargetStackï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å †æ ˆï¼Œå®ƒéµä»ç€å…ˆè¿›åå‡ºçš„åŸåˆ™ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡pushTargetï¼ˆå‹æ ˆï¼‰å’ŒpopTargetï¼ˆå‡ºæ ˆï¼‰æ¥å¯¹å®ƒè¿›è¡Œæ“ä½œï¼Œé‚£ä¹ˆå®ƒæ˜¯ä»€ä¹ˆæ—¶å€™éœ€è¦è¿›è¡Œå‹æ ˆå’Œå‡ºæ ˆçš„æ“ä½œå‘¢ï¼Ÿ åœ¨Watcherçš„æºç ä¸­æˆ‘ä»¬å‘ç°çš„åŸå› ï¼Œç”±äºWaterå®ä¾‹æ˜¯åœ¨ç»„ä»¶mountedæ—¶è¢«æ„å»ºçš„ï¼Œåœ¨æ„å»ºæ—¶éœ€è¦æŠŠå®ä¾‹æš‚å­˜åˆ°Dep.targetä¸Šä»¥ä¾¿Depè¿›è¡Œä¾èµ–æ”¶é›†ï¼›å¦‚æœDep.targetä¸Šæœ‰å…¶ä»–ç»„ä»¶çš„watcherå®ä¾‹ï¼Œéœ€è¦å…ˆæŠŠå…¶ä»–çš„watcherå®ä¾‹æš‚å­˜åˆ°targetStackä¸­ï¼Œç„¶åè°ƒç”¨expOrFnå‡½æ•°æ¸²æŸ“ç»„ä»¶ï¼›è¿™é‡Œçš„expOrFnæ¸²æŸ“ç»„ä»¶æ—¶ä¼šå°†dataä¸­å®šä¹‰çš„æ•°æ®å–å€¼ï¼Œå–å€¼çš„è¿‡ç¨‹å°±ä¼šè‡ªåŠ¨è°ƒç”¨ReactiveåŒ–åçš„getterå‡½æ•°ï¼Œå› æ­¤å°±æŠŠDep.targetä¸Šçš„watcherå®ä¾‹æ”¶é›†åˆ°äº†æ¯ä¸ªæ•°æ®çš„Depä¸­ï¼Œæ”¶é›†å®Œæˆåå†æŠŠä¸Šä¸€ä¸ªwatcherå‡ºæ ˆã€‚ æ€»ç»“ï¼Œç»è¿‡ä¸¤è€…å…³ç³»çš„åˆ†æï¼Œæˆ‘ä»¬å‘ç°Vueæ˜¯ä¸€ä¸ªå…¸å‹çš„å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œdataä¸­çš„æ•°æ®å°±æ˜¯æˆ‘ä»¬éœ€è¦è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡ï¼ŒDepç›¸å½“äºäº‹ä»¶ä¸­å¿ƒï¼Œè€ŒWatcheråˆ™æ˜¯è®¢é˜…è€…ã€‚","tags":[{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"},{"name":"è®¾è®¡æ¨¡å¼","slug":"DesignPattern","permalink":"https://xieyufei.com/tags/DesignPattern/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"}]},{"title":"è·Ÿç€Elementæºç å­¦ç»„ä»¶åŒ–","date":"2021-02-23T04:15:07.000Z","path":"2021/02/23/Front-Element.html","text":"ElementUIä½œä¸ºå½“å‰æœ€æµè¡Œçš„Vueç»„ä»¶åº“ï¼Œä»¥å…¶ä¸°å¯Œå¤šæ ·çš„ç»„ä»¶å’Œå¯é…ç½®åŒ–ç¨‹åº¦é«˜å¸å¼•ç€ä¼—å¤šçš„å¼€å‘è€…ï¼›ä»Šå¤©æˆ‘ä»¬å°±æ·±å…¥å®ƒçš„æºç ï¼Œçœ‹ä¸€ä¸‹å®ƒå†…éƒ¨ä¼—å¤šç»„ä»¶ç©¶ç«Ÿæ˜¯å¦‚ä½•æ¥å®ç°çš„ï¼Œä»¥ä¾¿æˆ‘ä»¬åœ¨ä»Šåçš„å¼€å‘ä¸­å†™å‡ºé€šç”¨åŒ–ç¨‹åº¦æ›´é«˜çš„ç»„ä»¶ï¼ŒåŒæ—¶ä¹ŸåŠ æ·±å¯¹å…¶ç»„ä»¶ç”¨æ³•çš„ç†è§£ã€‚ è€è§„çŸ©ï¼Œè¿˜æ˜¯å…ˆæ¥çœ‹ä¸€ä¸‹å®˜ç½‘çš„sloganï¼š Elementï¼Œä¸€å¥—ä¸ºå¼€å‘è€…ã€è®¾è®¡å¸ˆå’Œäº§å“ç»ç†å‡†å¤‡çš„åŸºäºVue 2.0çš„æ¡Œé¢ç«¯ç»„ä»¶åº“ å¯ä»¥çœ‹å‡ºï¼ŒElementçš„ä½¿ç”¨èŒƒå›´æ¶µç›–äº†å¤§éƒ¨åˆ†çš„ç ”å‘äººå‘˜ï¼›äº§å“ç»ç†å¯ä»¥ç”¨æ¥å‚è€ƒé€»è¾‘äº¤äº’ï¼Œè®¾è®¡å¸ˆå¯ä»¥å€Ÿé‰´å›¾æ ‡å’Œç»„ä»¶è®¾è®¡ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨å®ƒæ¥å¸ƒå±€é¡µé¢ã€‚ é¡¹ç›®ç»“æ„ æˆ‘ä»¬ä»githubå°†æ•´ä¸ªé¡¹ç›®cloneä¸‹æ¥åï¼Œæ¥çœ‹ä¸€ä¸‹æœ‰å“ªäº›ç›®å½•æ–‡ä»¶ï¼š 12345678910111213|-- .github # å­˜æ”¾è´¡çŒ®æŒ‡å—ä»¥åŠissueã€PRæ¨¡æ¿|-- build # å­˜æ”¾æ‰“åŒ…å·¥å…·çš„é…ç½®æ–‡ä»¶|-- examples # å­˜æ”¾ç»„ä»¶ç¤ºä¾‹|-- packages # å­˜æ”¾ç»„ä»¶æºç ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬åˆ†æçš„ä¸»è¦ç›®å½•|-- src # å­˜æ”¾å…¥å£æ–‡ä»¶ä»¥åŠå„ç§å·¥å…·æ–‡ä»¶ |-- directives # æ»šè½®ä¼˜åŒ–å’Œé¿å…é‡å¤ç‚¹å‡» |-- locale # å›½é™…åŒ–åŠŸèƒ½ |-- mixins # æ··å…¥å®ä¾‹ |-- transition # è¿‡åº¦æ•ˆæœ |-- utils # å·¥å…·æ–‡ä»¶|-- test # å­˜æ”¾å•å…ƒæµ‹è¯•æ–‡ä»¶|-- types # å­˜æ”¾typescriptå£°æ˜æ–‡ä»¶|-- components.json # å®Œæ•´ç»„ä»¶åˆ—è¡¨ å› æ­¤packageså’Œsrcç›®å½•æ˜¯æˆ‘ä»¬éœ€è¦å…³æ³¨çš„ä¸¤ä¸ªé‡è¦çš„ç›®å½•ï¼›å¤§è‡´äº†è§£äº†ç›®å½•ç»“æ„åï¼Œä¸‹ä¸€ä¸ªéœ€è¦å…³æ³¨çš„å°±æ˜¯package.jsonæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…æ‹¬äº†ä¸€äº›é¡¹ç›®æè¿°ã€é¡¹ç›®ä¾èµ–ä»¥åŠè„šæœ¬å‘½ä»¤ç­‰ï¼›æœ‰æ—¶å€™æˆ‘ä»¬ç¬¬ä¸€çœ¼æ‰¾ä¸åˆ°é¡¹ç›®çš„å…¥å£æ–‡ä»¶ï¼Œå°±å¯ä»¥ä»è¿™é‡Œæ¥æ‰¾ã€‚ é¦–å…ˆæ˜¯&quot;main&quot;:&quot;lib/element-ui.common.js&quot;ï¼Œmainå­—æ®µå®šä¹‰äº†npmåŒ…çš„å…¥å£æ–‡ä»¶ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­require(&quot;element-ui&quot;)ï¼Œå…¶å®å°±æ˜¯å¼•ç”¨äº†element-ui.common.jsæ–‡ä»¶ï¼›ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ‰å“ªäº›è„šæœ¬å‘½ä»¤ï¼Œè¿™é‡Œå¼•ç”¨äº†é‡è¦çš„å‡ ä¸ªå‘½ä»¤ï¼š 123456789&#123; &quot;scripts&quot;: &#123; &quot;build:file&quot;: &quot;node build/bin/iconInit.js &amp; node build/bin/i18n.js&quot;, &quot;build:theme&quot;: &quot;gulp build --gulpfile packages/theme-chalk/gulpfile.js&quot;, &quot;build:utils&quot;: &quot;cross-env BABEL_ENV=utils babel src --out-dir lib --ignore src/index.js&quot;, &quot;build:umd&quot;: &quot;node build/bin/build-locale.js&quot;, &quot;dist&quot;: &quot;webpack --config build/webpack.conf.js &amp;&amp; webpack --config build/webpack.common.js &amp;&amp; webpack --config build/webpack.component.js&quot; &#125;&#125; å¯ä»¥çœ‹å‡ºæ¥å‰é¢çš„å‡ ä¸ªbuildå‘½ä»¤æ˜¯ç”¨æ¥æ„å»ºä¸€äº›å·¥å…·ã€æ ·å¼çš„ï¼Œä¸»è¦æ˜¯distå‘½ä»¤ï¼Œé€šè¿‡webpackè¿›è¡Œæ‰“åŒ…ï¼Œè¿˜è¿›è¡Œäº†ä¸‰æ¬¡æ‰“åŒ…ï¼Œæˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸‹è¿™ä¸‰æ¬¡æ‰“åŒ…åˆ†åˆ«æ˜¯æ‰“åŒ…ä»€ä¹ˆæ–‡ä»¶çš„ï¼›é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸‹å‰ä¸¤ä¸ªé…ç½®æ–‡ä»¶webpack.conf.jså’Œwebpack.common.jsï¼Œè¿™é‡Œåªæˆªå–é…ç½®æ–‡ä»¶çš„éƒ¨åˆ†ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748//build/webpack.conf.jsmodule.exports = &#123; mode: &#x27;production&#x27;, entry: &#123; app: [&#x27;./src/index.js&#x27;] &#125;, output: &#123; path: path.resolve(process.cwd(), &#x27;./lib&#x27;), publicPath: &#x27;/dist/&#x27;, filename: &#x27;index.js&#x27;, chunkFilename: &#x27;[id].js&#x27;, libraryTarget: &#x27;umd&#x27;, libraryExport: &#x27;default&#x27;, library: &#x27;ELEMENT&#x27;, umdNamedDefine: true, globalObject: &#x27;typeof self !== \\&#x27;undefined\\&#x27; ? self : this&#x27; &#125;, optimization: &#123; minimizer: [ new TerserPlugin(&#123; terserOptions: &#123; output: &#123; comments: false &#125; &#125; &#125;) ] &#125;,&#125;//build/webpack.common.jsmodule.exports = &#123; mode: &#x27;production&#x27;, entry: &#123; app: [&#x27;./src/index.js&#x27;] &#125;, output: &#123; path: path.resolve(process.cwd(), &#x27;./lib&#x27;), publicPath: &#x27;/dist/&#x27;, filename: &#x27;element-ui.common.js&#x27;, chunkFilename: &#x27;[id].js&#x27;, libraryExport: &#x27;default&#x27;, library: &#x27;ELEMENT&#x27;, libraryTarget: &#x27;commonjs2&#x27; &#125;, optimization: &#123; minimize: false &#125;,&#125; å‘ç°ä¸¤ä¸ªæ–‡ä»¶çš„å…¥å£éƒ½æ˜¯src/index.jsï¼Œä¸åŒçš„æ˜¯webpack.conf.jsæ‰“åŒ…çš„æ˜¯umdè§„èŒƒï¼Œè€Œä¸”é€šè¿‡minimizerè¿›è¡Œäº†å‹ç¼©ï¼›è€Œwebpack.common.jsæ‰“åŒ…çš„æ˜¯commonjsè§„èŒƒï¼Œå¹¶ä¸”æ²¡æœ‰è¿›è¡Œå‹ç¼©ï¼›é€šè¿‡ä¸¤ç§è§„èŒƒæ¥æ‰“åŒ…çš„ä¸»è¦åŸå› ä¹Ÿæ˜¯å› ä¸ºElementå®‰è£…æ–¹å¼çš„ä¸åŒï¼Œumdè§„èŒƒä¸»è¦é’ˆå¯¹CDNå¼•å…¥çš„æ–¹å¼ï¼Œåœ¨é¡µé¢ä¸Šå¼•å…¥jså’Œcssï¼š 1234&lt;!-- å¼•å…¥æ ·å¼ --&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;https://unpkg.com/element-ui/lib/theme-chalk/index.css&quot;&gt;&lt;!-- å¼•å…¥ç»„ä»¶åº“ --&gt;&lt;script src=&quot;https://unpkg.com/element-ui/lib/index.js&quot;&gt;&lt;/script&gt; è€Œwebpack.common.jsæ‰“åŒ…å‡ºæ¥çš„element-ui.common.jsåˆ™æ˜¯é’ˆå¯¹npmçš„å¼•å…¥æ–¹å¼ï¼š 12import ElementUI from &#x27;element-ui&#x27;;import &#x27;element-ui/lib/theme-chalk/index.css&#x27;; é‚£ä¹ˆæœ€åä¸€ä¸ªbuild/webpack.component.jsä¹Ÿä¸éš¾çŒœåˆ°äº†ï¼Œæ˜¯ä¸ºäº†åœ¨npmå¼•å…¥æ—¶ï¼Œåªå¼•å…¥éœ€è¦çš„éƒ¨åˆ†ç»„ä»¶ï¼Œè€Œä¸å¯¹æ•´ä½“è¿›è¡Œæ‰“åŒ…ï¼š 123456789101112131415const Components = require(&#x27;../components.json&#x27;);module.exports = &#123; mode: &#x27;production&#x27;, entry: Components, output: &#123; path: path.resolve(process.cwd(), &#x27;./lib&#x27;), publicPath: &#x27;/dist/&#x27;, filename: &#x27;[name].js&#x27;, chunkFilename: &#x27;[id].js&#x27;, libraryTarget: &#x27;commonjs2&#x27; &#125;, optimization: &#123; minimize: false &#125;,&#125; è¿™é‡Œcomponents.jsonå°±æ˜¯æ¯ä¸ªç»„ä»¶æ‰€åœ¨çš„å…¥å£æ–‡ä»¶ã€‚ å…¥å£æ–‡ä»¶ æˆ‘ä»¬åœ¨ä¸Šé¢ä¸€èŠ‚é€šè¿‡æŸ¥çœ‹webpackçš„é…ç½®æ–‡ä»¶æ‰¾åˆ°äº†å…¥å£æ–‡ä»¶/src/index.jsï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹Elementåœ¨å…¥å£æ˜¯å¦‚ä½•æ¥æ³¨å†Œè¿™ä¹ˆå¤šç»„ä»¶çš„ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142//æˆªå–äº†éƒ¨åˆ†ç»„ä»¶import Button from &#x27;../packages/button/index.js&#x27;;import Input from &#x27;../packages/input/index.js&#x27;;import MessageBox from &#x27;../packages/message-box/index.js&#x27;;import Loading from &#x27;../packages/loading/index.js&#x27;;import InfiniteScroll from &#x27;../packages/infinite-scroll/index.js&#x27;;import Notification from &#x27;../packages/notification/index.js&#x27;;import Message from &#x27;../packages/message/index.js&#x27;;const components = [ Button, Input]const install = function(Vue, opts = &#123;&#125;) &#123; components.forEach(component =&gt; &#123; Vue.component(component.name, component); &#125;); Vue.use(InfiniteScroll); Vue.use(Loading.directive); Vue.prototype.$ELEMENT = &#123; size: opts.size || &#x27;&#x27;, zIndex: opts.zIndex || 2000 &#125;; Vue.prototype.$loading = Loading.service; Vue.prototype.$msgbox = MessageBox; Vue.prototype.$alert = MessageBox.alert; Vue.prototype.$confirm = MessageBox.confirm; Vue.prototype.$prompt = MessageBox.prompt; Vue.prototype.$notify = Notification; Vue.prototype.$message = Message;&#125;;//æµè§ˆå™¨ç¯å¢ƒè‡ªåŠ¨è°ƒç”¨æ³¨å†Œç»„ä»¶if (typeof window !== &#x27;undefined&#x27; &amp;&amp; window.Vue) &#123; install(window.Vue);&#125;export default &#123; install, Button, Input, MessageBox, Notification&#125; è¿™é‡ŒElementæš´éœ²å‡ºå»ä¸€ä¸ªinstallå‡½æ•°ï¼Œè¿™æ˜¯å› ä¸ºElementæœ¬èº«å°±æ˜¯ä¸€ä¸ªæ’ä»¶ï¼Œæˆ‘ä»¬åœ¨è°ƒç”¨Vue.use(ElementUI)æ³¨å†Œæ—¶ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨è¿™ä¸ªinstallå‡½æ•°ï¼›é‚£ä¹ˆVue.useæ˜¯å¦‚ä½•æ³¨å†Œæ’ä»¶çš„å‘¢ï¼Ÿ Vue.useæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»å…·æœ‰installæ–¹æ³•ï¼ŒVue.useå‡½æ•°å†…éƒ¨ä¼šè°ƒç”¨å‚æ•°çš„installæ–¹æ³•ã€‚ å¦‚æœæ’ä»¶æ²¡æœ‰è¢«æ³¨å†Œè¿‡ï¼Œé‚£ä¹ˆæ³¨å†ŒæˆåŠŸä¹‹åä¼šç»™æ’ä»¶æ·»åŠ ä¸€ä¸ªinstalledçš„å±æ€§å€¼ä¸ºtrueã€‚Vue.useæ–¹æ³•å†…éƒ¨ä¼šæ£€æµ‹æ’ä»¶çš„installedå±æ€§ï¼Œä»è€Œé¿å…é‡å¤æ³¨å†Œæ’ä»¶ã€‚ æ’ä»¶çš„installæ–¹æ³•å°†æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯å‚æ•°æ˜¯Vueï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é…ç½®é¡¹optionsã€‚ åœ¨installæ–¹æ³•å†…éƒ¨å¯ä»¥æ·»åŠ å…¨å±€æ–¹æ³•æˆ–è€…å±æ€§ã€å…¨å±€æŒ‡ä»¤ã€mixinæ··å…¥ã€æ·»åŠ å®ä¾‹æ–¹æ³•ã€ä½¿ç”¨Vue.component()æ³¨å†Œç»„ä»¶ç­‰ã€‚ åœ¨Elementçš„installå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å‘ç°ä»ä¼ å…¥çš„optionså‚æ•°ä¸­å–å‡ºsizeå’ŒzIndexï¼Œå­˜åˆ°Vue.prototype.$ELEMENTå…¨å±€é…ç½®ä¸­ï¼Œè¿™æ ·åœ¨ç»„ä»¶ä¸­æˆ‘ä»¬å°±å¯ä»¥è·å–sizeå’ŒzIndexï¼Œæ ¹æ®sizeè¿›è¡Œä¸åŒç»„ä»¶å°ºå¯¸çš„å±•ç¤ºã€‚ åœ¨Elementæ–‡æ¡£å…¨å±€é…ç½®ä¸­ï¼Œä¹ŸæŒ‡å‡ºäº†å¯ä»¥åœ¨å¼•å…¥Elementæ—¶è¦†å†™å…¨å±€é…ç½®ï¼š 12import Element from &#x27;element-ui&#x27;;Vue.use(Element, &#123; size: &#x27;small&#x27;, zIndex: 3000 &#125;); ç»„ä»¶ åœ¨ä¸Šé¢installå‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å‘ç°Elementæ³¨å†Œæ’ä»¶æœ‰ä¸‰ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯åƒButtonå’ŒInputï¼Œåœ¨æ•°ç»„å¾ªç¯éå†ï¼Œé€šè¿‡Vue.componentä¸­æ³¨å†Œæˆå…¨å±€ç»„ä»¶ï¼Œå°±å¯ä»¥åœ¨é¡µé¢ç›´æ¥å¼•ç”¨ï¼›ç¬¬äºŒç§æ˜¯InfiniteScrollå’ŒLoadingï¼Œåœ¨å…¨å±€æ³¨å†ŒæŒ‡ä»¤ï¼Œé€šè¿‡v-infinite-scrollå’Œv-loadingç­‰æŒ‡ä»¤å¼æ¥è°ƒç”¨ï¼›ç¬¬ä¸‰ç§æ˜¯MessageBoxã€Notificationå’ŒMessageï¼Œåœ¨å…¨å±€Vue.prototypeæ·»åŠ äº†æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°è¿›è¡Œè°ƒç”¨ã€‚ å…¨å±€ç»„ä»¶Containerå’ŒHeader é¦–å…ˆæˆ‘ä»¬ä»å‡ ä¸ªç®€å•çš„å¸ƒå±€å®¹å™¨ç»„ä»¶å¼€å§‹ï¼Œæˆ‘ä»¬ç®€å•çœ‹ä¸€ä¸‹demoå›é¡¾ä¸€ä¸‹è¿™å‡ ä¸ªç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼š 12345678&lt;el-container&gt; &lt;el-aside width=&quot;200px&quot;&gt;Aside&lt;/el-aside&gt; &lt;el-container&gt; &lt;el-header&gt;Header&lt;/el-header&gt; &lt;el-main&gt;Main&lt;/el-main&gt; &lt;el-footer&gt;Footer&lt;/el-footer&gt; &lt;/el-container&gt;&lt;/el-container&gt; æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹el-headerçš„æºç ï¼Œå®ç°é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡slotæ’æ§½å°†å…ƒç´ è¿›è¡Œæ¸²æŸ“ï¼›ï¼ˆel-footerå’Œel-asideä¹Ÿæ˜¯åŒæ ·çš„ï¼Œè¿™é‡Œä¸å†å±•ç¤ºäº†ï¼‰ï¼š 123456789101112131415161718//packages/header/src/main.vue&lt;template&gt; &lt;header class=&quot;el-header&quot; :style=&quot;&#123; height &#125;&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/header&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &#x27;ElHeader&#x27;, componentName: &#x27;ElHeader&#x27;, props: &#123; height: &#123; type: String, default: &#x27;60px&#x27; &#125; &#125; &#125;;&lt;/script&gt; è¿™é‡Œä¼ å‚çš„propså’Œæ–‡æ¡£ä¸­ç»™å‡ºä¹Ÿæ˜¯ä¸€è‡´çš„ï¼Œel-headerã€el-footerå’Œel-asideä¸‰ä¸ªç»„ä»¶éƒ½æ˜¯ç±»ä¼¼ï¼Œéƒ½ä¼ widthæˆ–è€…heightç­‰ä¸€äº›å®½é«˜çš„å­—ç¬¦ä¸²æ•°å€¼ã€‚ æˆ‘ä»¬é‡ç‚¹æ¥çœ‹ä¸‹el-containerçš„ä»£ç ï¼Œæ¥æ”¶ä¸€ä¸ªå‚æ•°directionï¼Œå¯é€‰å€¼horizontal/verticalï¼Œä¸è¿‡å®ƒçš„é»˜è®¤å€¼æ¯”è¾ƒç‰¹æ®Šï¼Œæ–‡æ¡£ä¸­æ˜¯è¿™ä¹ˆè¯´çš„ï¼š å­å…ƒç´ ä¸­æœ‰el-headeræˆ–el-footeræ—¶ä¸ºverticalï¼Œå¦åˆ™ä¸ºhorizontal äº†è§£äº†å®ƒçš„ä¼ å‚é€»è¾‘ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æºç æ˜¯å¦‚ä½•æ¥å®ç°çš„ï¼š 123456789101112131415161718192021222324252627282930//packages/container/src/main.vue&lt;template&gt; &lt;section class=&quot;el-container&quot; :class=&quot;&#123; &#x27;is-vertical&#x27;: isVertical &#125;&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/section&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;ElContainer&quot;, componentName: &quot;ElContainer&quot;, props: &#123; direction: String, &#125;, computed: &#123; isVertical() &#123; if (this.direction === &quot;vertical&quot;) &#123; return true; &#125; else if (this.direction === &quot;horizontal&quot;) &#123; return false; &#125; return this.$slots &amp;&amp; this.$slots.default ? this.$slots.default.some((vnode) =&gt; &#123; const tag = vnode.componentOptions &amp;&amp; vnode.componentOptions.tag; return tag === &quot;el-header&quot; || tag === &quot;el-footer&quot;; &#125;) : false; &#125;, &#125;,&#125;;&lt;/script&gt; ä»£ç ä¸­æ¯”è¾ƒéš¾ç†è§£çš„æ˜¯isVerticalä¸­çš„é€»è¾‘åˆ¤æ–­ï¼Œæˆ‘ä»¬ä¸€æ®µä¸€æ®µæ¥çœ‹ï¼›this.$slotsæ˜¯ç”¨æ¥è·å–ç»„ä»¶ä¸­æ‰€æœ‰çš„æ’æ§½ç»„ä»¶ï¼Œå’Œthis.$refsæœ‰ç‚¹åƒï¼Œéƒ½æ˜¯å¯¹è±¡ï¼Œç”¨æ¥å­˜æ”¾å¤šä¸ªæ’æ§½å¯¹è±¡ï¼›è€Œthis.$slots.defaultæ˜¯è·å–é»˜è®¤çš„é‚£ä¸ªæ’æ§½ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾æ˜¯æ’æ§½ä¸­çš„èŠ‚ç‚¹ï¼›ç„¶åsomeå‡½æ•°ä¸­çš„åˆ¤æ–­å°±å¾ˆå¥½ç†è§£äº†ï¼Œç”¨æ¥åˆ¤æ–­æ•°ç»„ä¸­çš„vnodeèŠ‚ç‚¹çš„æ˜¯å¦æœ‰el-headeræˆ–è€…el-footerä¸¤ä¸ªæ ‡ç­¾ï¼Œæœ‰çš„è¯å°±è¿”å›trueï¼Œå°±ä¼šæ¸²æŸ“is-verticalç±»åã€‚ Rowå’ŒCol æˆ‘ä»¬å†æ¥çœ‹ä¸¤ä¸ªå¸ƒå±€ç»„ä»¶Rowå’ŒColï¼Œç”¨äºåˆ›å»ºæ …æ ¼å¸ƒå±€ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç®€å•çš„çœ‹ä¸€ä¸‹è¿™ä¸¤ä¸ªç»„ä»¶çš„ç”¨æ³•ï¼š 1234567891011121314&lt;el-row :gutter=&quot;20&quot;&gt; &lt;el-col :span=&quot;6&quot;&gt; &lt;div class=&quot;grid-content&quot;&gt;&lt;/div&gt; &lt;/el-col&gt; &lt;el-col :span=&quot;6&quot;&gt; &lt;div class=&quot;grid-content&quot;&gt;&lt;/div&gt; &lt;/el-col&gt; &lt;el-col :span=&quot;6&quot;&gt; &lt;div class=&quot;grid-conten&quot;&gt;&lt;/div&gt; &lt;/el-col&gt; &lt;el-col :span=&quot;6&quot;&gt; &lt;div class=&quot;grid-content&quot;&gt;&lt;/div&gt; &lt;/el-col&gt;&lt;/el-row&gt; çœ‹ç”¨æ³•è¿™ä¸¤ä¸ªç»„ä»¶ä¹Ÿæ˜¯åœ¨é¡µé¢é€šè¿‡æ’æ§½çš„æ–¹å¼æ¸²æŸ“é¡µé¢ï¼Œä¸è¿‡å½“æˆ‘ä»¬æ¥çœ‹æºç ä¼šå‘ç°å®ƒçš„æ’æ§½å’Œä¸Šé¢ç»„ä»¶çš„æ’æ§½ç”¨æ³•è¿˜ä¸ä¸€æ ·ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041//packages/row/src/row.jsexport default &#123; name: &#x27;ElRow&#x27;, props: &#123; tag: &#123; type: String, default: &#x27;div&#x27; &#125;, gutter: Number, type: String, justify: &#123; type: String, default: &#x27;start&#x27; &#125;, align: &#123; type: String, default: &#x27;top&#x27; &#125; &#125;, computed: &#123; style() &#123; const ret = &#123;&#125;; if (this.gutter) &#123; ret.marginLeft = `-$&#123;this.gutter / 2&#125;px`; ret.marginRight = ret.marginLeft; &#125; return ret; &#125; &#125;, render(h) &#123; return h(this.tag, &#123; class: [ &#x27;el-row&#x27;, this.justify !== &#x27;start&#x27; ? `is-justify-$&#123;this.justify&#125;` : &#x27;&#x27;, this.align !== &#x27;top&#x27; ? `is-align-$&#123;this.align&#125;` : &#x27;&#x27;, &#123; &#x27;el-row--flex&#x27;: this.type === &#x27;flex&#x27; &#125; ], style: this.style &#125;, this.$slots.default); &#125;&#125;; æˆ‘ä»¬å‘ç°el-rowæ’ä»¶æ²¡æœ‰æ¨¡æ¿templateæ¸²æŸ“ï¼Œè€Œæ˜¯é€šè¿‡renderæ¸²æŸ“å‡½æ•°æ¥æ¸²æŸ“é¡µé¢çš„ï¼›ä½†æ˜¯è¿™é‡Œä¸ºä»€ä¹ˆéœ€è¦ç”¨åˆ°æ¸²æŸ“å‡½æ•°å‘¢ï¼Ÿè¿™é‡Œå’Œel-rowçš„å‚æ•°æœ‰å…³ï¼Œåœ¨ä¼ å‚åˆ—è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‚æ•°ä¸­æœ‰ä¸€ä¸ªtagè‡ªå®šä¹‰å…ƒç´ æ ‡ç­¾ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰æœ€å¤–å±‚çš„æ ‡ç­¾ç±»å‹ï¼›å¦‚æœé€šè¿‡æ¨¡æ¿æ¸²æŸ“çš„è¯è‚¯å®šéœ€è¦å¤šä¸ªifåˆ¤æ–­ï¼Œæ¯”è¾ƒç¹çï¼Œä½†æ˜¯é€šè¿‡æ¸²æŸ“å‡½æ•°ï¼Œå°±ç›´æ¥æ¸²æŸ“æ ‡ç­¾äº†ï¼›æ¸²æŸ“å‡½æ•°æœ‰å…³ä½¿ç”¨æ–¹æ³•å¯ä»¥æŸ¥çœ‹å®˜ç½‘æ–‡æ¡£ã€‚ Colç»„ä»¶å’ŒRowç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡renderå‡½æ•°è¿›è¡Œæ¸²æŸ“ï¼Œä¸è¿‡Colç»„ä»¶è·å–çˆ¶çº§ç»„ä»¶Rowçš„å‚æ•°æ–¹å¼å€¼çš„æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œè¿™é‡Œè´´ä¸Šéƒ¨åˆ†ä»£ç ï¼š 12345678910111213141516171819202122232425262728//packages/col/src/col.jsexport default &#123; name: &quot;ElCol&quot;, computed: &#123; gutter() &#123; let parent = this.$parent; while (parent &amp;&amp; parent.$options.componentName !== &quot;ElRow&quot;) &#123; parent = parent.$parent; &#125; return parent ? parent.gutter : 0; &#125;, &#125;, render(h) &#123; let classList = []; let style = &#123;&#125;; if (this.gutter) &#123; style.paddingLeft = this.gutter / 2 + &quot;px&quot;; style.paddingRight = style.paddingLeft; &#125; return h(this.tag, &#123; class: [&quot;el-col&quot;, classList], style, &#125;, this.$slots.default ); &#125;,&#125;; ç”±äºRowç»„ä»¶ä¼ å…¥çš„gutterè¡¨ç¤ºæ …æ ¼é—´éš”ï¼Œå› æ­¤Rolç»„ä»¶ä¹Ÿéœ€è®¾ç½®ä¸€å®šçš„paddingï¼Œä½†æ˜¯æ€ä¹ˆèƒ½ä»çˆ¶ç»„ä»¶è·å–å‚æ•°å‘¢ï¼ŸColé€šè¿‡ä¸€ä¸ªwhileå¾ªç¯ï¼Œä¸æ–­å‘ä¸Šè·å–çˆ¶ç»„ä»¶å¹¶ä¸”åˆ¤æ–­ç»„ä»¶åç§°ã€‚ Formå’ŒForm-Item çœ‹å®Œå¸ƒå±€ç»„ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¡¨å•ç»„ä»¶ï¼Œè¡¨å•æœ€é¡¶å±‚çš„æ˜¯Formå’ŒForm-Itemç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‘Formä¼ å…¥å‚æ•°rulesæ¥æ ¡éªŒè¡¨å•ä¸­çš„Inputè¾“å…¥æ¡†æˆ–è€…å…¶ä»–ç»„ä»¶çš„å€¼ï¼Œé¦–å…ˆæ¥çœ‹ä¸‹Formçš„æºç ï¼Œç”±äºç¯‡å¹…é—®é¢˜è¿™é‡Œåªè´´å‡ºéƒ¨åˆ†æºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778//packages/form/src/form.vue&lt;template&gt; &lt;form class=&quot;el-form&quot; :class=&quot;[ labelPosition ? &#x27;el-form--label-&#x27; + labelPosition : &#x27;&#x27;, &#123; &#x27;el-form--inline&#x27;: inline &#125; ]&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/form&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &#x27;ElForm&#x27;, provide() &#123; return &#123; elForm: this &#125;; &#125;, watch: &#123; rules() &#123; // remove then add event listeners on form-item after form rules change this.fields.forEach(field =&gt; &#123; field.removeValidateEvents(); field.addValidateEvents(); &#125;); if (this.validateOnRuleChange) &#123; this.validate(() =&gt; &#123;&#125;); &#125; &#125; &#125;, data() &#123; return &#123; fields: [], potentialLabelWidthArr: [] // use this array to calculate auto width &#125;; &#125;, created() &#123; this.$on(&#x27;el.form.addField&#x27;, (field) =&gt; &#123; if (field) &#123; this.fields.push(field); &#125; &#125;); /* istanbul ignore next */ this.$on(&#x27;el.form.removeField&#x27;, (field) =&gt; &#123; if (field.prop) &#123; this.fields.splice(this.fields.indexOf(field), 1); &#125; &#125;); &#125;, methods: &#123; validate(callback) &#123; let promise; if (typeof callback !== &#x27;function&#x27; &amp;&amp; window.Promise) &#123; promise = new window.Promise((resolve, reject) =&gt; &#123; callback = function(valid) &#123; valid ? resolve(valid) : reject(valid); &#125;; &#125;); &#125; let valid = true; let count = 0; let invalidFields = &#123;&#125;; this.fields.forEach(field =&gt; &#123; field.validate(&#x27;&#x27;, (message, field) =&gt; &#123; if (message) &#123; valid = false; &#125; invalidFields = objectAssign(&#123;&#125;, invalidFields, field); if (typeof callback === &#x27;function&#x27; &amp;&amp; ++count === this.fields.length) &#123; callback(valid, invalidFields); &#125; &#125;); &#125;); if (promise) &#123; return promise; &#125; &#125;, &#125; &#125;;&lt;/script&gt; æˆ‘ä»¬çœ‹åˆ°Formçš„é¡µé¢ç»“æ„éå¸¸ç®€å•ï¼Œåªæœ‰ä¸€ä¸ªformæ ‡ç­¾ï¼Œè€Œä¸”propsä¹Ÿåªç”¨åˆ°äº†labelPositionå’Œinlineä¸¤ä¸ªï¼Œå…¶ä»–çš„å±æ€§ä¼šåœ¨Form-Itemä¸­ç”¨åˆ°ï¼›Formä¸­è¿˜ç”¨åˆ°äº†ä¸€ä¸ªprovideå‡½æ•°ï¼Œåœ¨Vueä¸­ç»„ä»¶é€šä¿¡æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»è¿‡provide/injectï¼Œä¸»è¦æ˜¯ç”¨æ¥è·¨å¤šå±‚ç»„ä»¶é€šä¿¡çš„ï¼Œåœ¨åé¢ç»„ä»¶çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬ä¼šå–å‡ºæ¥ç”¨åˆ°ã€‚ é‡ç‚¹æˆ‘ä»¬çœ‹ä¸‹å¸¸ç”¨çš„è¡¨å•æ ¡éªŒå‡½æ•°validateæ˜¯å¦‚ä½•æ¥å®ç°çš„ï¼›åœ¨createdä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°åœ¨æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ï¼šaddFieldå’ŒremoveFieldï¼Œè¿™æ˜¯ç”¨æ¥åœ¨æ‰€æœ‰çš„å­ç»„ä»¶Form-Itemåˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œè¿›è¡Œä¸€ä¸ªæ”¶é›†å­˜å‚¨ï¼Œå­˜åˆ°fieldsæ•°ç»„ä¸­ï¼Œé‚£ä¹ˆè¿™é‡Œä¸ºä»€ä¹ˆä¸ç”¨$childrenå‘¢ï¼Ÿå› ä¸ºé¡µé¢ç»“æ„çš„ä¸ç¡®å®šï¼ŒFormä¸‹ä¸€çº§å­ç»„ä»¶ä¸ä¸€å®šå°±æ˜¯Form-Itemï¼Œå¦‚æœè¿›è¡Œå¾ªç¯çš„è¯æ¯”è¾ƒè´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”å¯¹å­ç»„ä»¶ç®¡ç†æ“ä½œä¹Ÿæ¯”è¾ƒé¢‘ç¹ï¼Œå› æ­¤é€šè¿‡äº‹ä»¶çš„æ–¹å¼ï¼›æ”¶é›†æ‰€æœ‰çš„Form-Itemåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¯¹æ¯ä¸ªè¡¨å•å…ƒç´ éå†å¹¶ä¸”æ ¡éªŒã€‚ æ¥ç€å°±æ˜¯Form-Itemï¼Œæ¥çœ‹ä¸‹å®ƒçš„æºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154//packages/form/src/form-item.vue&lt;template&gt; &lt;div class=&quot;el-form-item&quot; :class=&quot;[&#123; &#x27;el-form-item--feedback&#x27;: elForm &amp;&amp; elForm.statusIcon, &#x27;is-error&#x27;: validateState === &#x27;error&#x27;, &#x27;is-validating&#x27;: validateState === &#x27;validating&#x27;, &#x27;is-success&#x27;: validateState === &#x27;success&#x27;, &#x27;is-required&#x27;: isRequired || required, &#x27;is-no-asterisk&#x27;: elForm &amp;&amp; elForm.hideRequiredAsterisk &#125;, sizeClass ? &#x27;el-form-item--&#x27; + sizeClass : &#x27;&#x27; ]&quot;&gt; &lt;label-wrap :is-auto-width=&quot;labelStyle &amp;&amp; labelStyle.width === &#x27;auto&#x27;&quot; :update-all=&quot;form.labelWidth === &#x27;auto&#x27;&quot;&gt; &lt;label :for=&quot;labelFor&quot; class=&quot;el-form-item__label&quot; :style=&quot;labelStyle&quot; v-if=&quot;label || $slots.label&quot;&gt; &lt;slot name=&quot;label&quot;&gt;&#123;&#123;label + form.labelSuffix&#125;&#125;&lt;/slot&gt; &lt;/label&gt; &lt;/label-wrap&gt; &lt;div class=&quot;el-form-item__content&quot; :style=&quot;contentStyle&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;transition name=&quot;el-zoom-in-top&quot;&gt; &lt;slot v-if=&quot;validateState === &#x27;error&#x27; &amp;&amp; showMessage &amp;&amp; form.showMessage&quot; name=&quot;error&quot; :error=&quot;validateMessage&quot;&gt; &lt;div class=&quot;el-form-item__error&quot; :class=&quot;&#123; &#x27;el-form-item__error--inline&#x27;: typeof inlineMessage === &#x27;boolean&#x27; ? inlineMessage : (elForm &amp;&amp; elForm.inlineMessage || false) &#125;&quot; &gt; &#123;&#123;validateMessage&#125;&#125; &lt;/div&gt; &lt;/slot&gt; &lt;/transition&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; import AsyncValidator from &#x27;async-validator&#x27;; import emitter from &#x27;element-ui/src/mixins/emitter&#x27;; import objectAssign from &#x27;element-ui/src/utils/merge&#x27;; import &#123; noop, getPropByPath &#125; from &#x27;element-ui/src/utils/util&#x27;; export default &#123; name: &#x27;ElFormItem&#x27;, componentName: &#x27;ElFormItem&#x27;, mixins: [emitter], provide() &#123; return &#123; elFormItem: this &#125;; &#125;, inject: [&#x27;elForm&#x27;], computed: &#123; fieldValue() &#123; const model = this.form.model; if (!model || !this.prop) &#123; return; &#125; let path = this.prop; if (path.indexOf(&#x27;:&#x27;) !== -1) &#123; path = path.replace(/:/, &#x27;.&#x27;); &#125; return getPropByPath(model, path, true).v; &#125;, _formSize() &#123; return this.elForm.size; &#125;, elFormItemSize() &#123; return this.size || this._formSize; &#125;, sizeClass() &#123; return this.elFormItemSize || (this.$ELEMENT || &#123;&#125;).size; &#125; &#125;, data() &#123; return &#123; validateState: &#x27;&#x27;, validateMessage: &#x27;&#x27;, validateDisabled: false, validator: &#123;&#125;, isNested: false, computedLabelWidth: &#x27;&#x27; &#125;; &#125;, methods: &#123; validate(trigger, callback = noop) &#123; this.validateDisabled = false; const rules = this.getFilteredRule(trigger); if ((!rules || rules.length === 0) &amp;&amp; this.required === undefined) &#123; callback(); return true; &#125; this.validateState = &#x27;validating&#x27;; const descriptor = &#123;&#125;; if (rules &amp;&amp; rules.length &gt; 0) &#123; rules.forEach(rule =&gt; &#123; delete rule.trigger; &#125;); &#125; descriptor[this.prop] = rules; const validator = new AsyncValidator(descriptor); const model = &#123;&#125;; model[this.prop] = this.fieldValue; validator.validate(model, &#123; firstFields: true &#125;, (errors, invalidFields) =&gt; &#123; this.validateState = !errors ? &#x27;success&#x27; : &#x27;error&#x27;; this.validateMessage = errors ? errors[0].message : &#x27;&#x27;; callback(this.validateMessage, invalidFields); this.elForm &amp;&amp; this.elForm.$emit(&#x27;validate&#x27;, this.prop, !errors, this.validateMessage || null); &#125;); &#125;, getRules() &#123; let formRules = this.form.rules; const selfRules = this.rules; const requiredRule = this.required !== undefined ? &#123; required: !!this.required &#125; : []; const prop = getPropByPath(formRules, this.prop || &#x27;&#x27;); formRules = formRules ? (prop.o[this.prop || &#x27;&#x27;] || prop.v) : []; return [].concat(selfRules || formRules || []).concat(requiredRule); &#125;, onFieldBlur() &#123; this.validate(&#x27;blur&#x27;); &#125;, onFieldChange() &#123; if (this.validateDisabled) &#123; this.validateDisabled = false; return; &#125; this.validate(&#x27;change&#x27;); &#125;, addValidateEvents() &#123; const rules = this.getRules(); if (rules.length || this.required !== undefined) &#123; this.$on(&#x27;el.form.blur&#x27;, this.onFieldBlur); this.$on(&#x27;el.form.change&#x27;, this.onFieldChange); &#125; &#125;, &#125;, mounted() &#123; if (this.prop) &#123; this.dispatch(&#x27;ElForm&#x27;, &#x27;el.form.addField&#x27;, [this]); this.addValidateEvents(); &#125; &#125;, beforeDestroy() &#123; this.dispatch(&#x27;ElForm&#x27;, &#x27;el.form.removeField&#x27;, [this]); &#125; &#125;;&lt;/script&gt; æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œè¿˜æ˜¯ç”¨äº†provide/injectæ¥å¤„ç†è·¨ç»„ä»¶çš„æ•°æ®é€šä¿¡ï¼Œå°†Formå¼•å…¥ï¼Œç”¨åˆ°äº†Formçš„å‡ ä¸ªpropså€¼æ¥æ¸²æŸ“ç±»åï¼ŒåŒæ—¶å°†æœ¬èº«injectå‘ä¸‹ä¼ é€’ã€‚åœ¨sizeClassä¸­æˆ‘ä»¬çœ‹åˆ°è·å–sizeä¹Ÿæ˜¯å‘ä¸Šæ¸è¿›è·å–çš„ä¸€ä¸ªè¿‡ç¨‹ï¼Œé¦–å…ˆæ˜¯Form-Itemæœ¬èº«çš„sizeï¼Œç„¶åæ˜¯Formçš„sizeï¼Œæœ€åæ‰æ˜¯æˆ‘ä»¬æŒ‚è½½åœ¨å…¨å±€$ELEMENTçš„sizeï¼Œæˆ‘ä»¬å»æŸ¥çœ‹å…¶ä»–ç»„ä»¶ä¾‹å¦‚Inputã€Buttonã€Radioï¼Œéƒ½æ˜¯é€šè¿‡è¿™ç§æ–¹å¼æ¥æ¸²æŸ“sizeã€‚ åœ¨Form-Itemç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æˆ‘ä»¬ä¹Ÿçœ‹åˆ°äº†ï¼Œé€šè¿‡è§¦å‘äº†Formçš„addFieldå’ŒremoveFieldæ¥è¿›è¡Œè¡¨å•çš„æ”¶é›†ï¼Œä¸è¿‡é€šè¿‡ä¸€ä¸ªdispatchå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ—¢ä¸æ˜¯vueå®˜ç½‘ä¸­çš„ï¼Œåœ¨methodsä¸­ä¹Ÿæ²¡æœ‰è¿›è¡Œå®šä¹‰ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•æ¥è§¦å‘çš„å‘¢ï¼Ÿæˆ‘ä»¬ä»”ç»†çœ‹ä»£ç ï¼Œä¼šå‘ç°ä¸€ä¸ªmixins:[emitter]æ•°ç»„ï¼ŒåŸæ¥Form-Itemæ˜¯é€šè¿‡mixinså°†ä¸€äº›å…¬å…±çš„å‡½æ•°æå–å‡ºæ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹emitteré‡Œé¢æ˜¯åšäº†å“ªäº›æ“ä½œï¼š 123456789101112131415161718192021222324252627282930function broadcast(componentName, eventName, params) &#123; this.$children.forEach(child =&gt; &#123; var name = child.$options.componentName; if (name === componentName) &#123; child.$emit.apply(child, [eventName].concat(params)); &#125; else &#123; broadcast.apply(child, [componentName, eventName].concat([params])); &#125; &#125;);&#125;export default &#123; methods: &#123; dispatch(componentName, eventName, params) &#123; var parent = this.$parent || this.$root; var name = parent.$options.componentName; while (parent &amp;&amp; (!name || name !== componentName)) &#123; parent = parent.$parent; if (parent) &#123; name = parent.$options.componentName; &#125; &#125; if (parent) &#123; parent.$emit.apply(parent, [eventName].concat(params)); &#125; &#125;, broadcast(componentName, eventName, params) &#123; broadcast.call(this, componentName, eventName, params); &#125; &#125;&#125;; æˆ‘ä»¬çœ‹åˆ°dispatchæ˜¯ç”¨æ¥å‘çˆ¶ç»„ä»¶æ´¾å‘äº‹ä»¶ï¼Œä¹Ÿæ˜¯é€šè¿‡whileå‘ä¸Šéå†å¾ªç¯ï¼Œè€Œbroadcastæ˜¯å‘å­ç»„ä»¶å¹¿æ’­äº‹ä»¶çš„ã€‚ Buttonå’ŒButton-Group Buttonæ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ç»„ä»¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å®ƒçš„æºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475//packages/button/src/button.vue&lt;template&gt; &lt;button class=&quot;el-button&quot; @click=&quot;handleClick&quot; :disabled=&quot;buttonDisabled || loading&quot; :autofocus=&quot;autofocus&quot; :type=&quot;nativeType&quot; :class=&quot;[ type ? &#x27;el-button--&#x27; + type : &#x27;&#x27;, buttonSize ? &#x27;el-button--&#x27; + buttonSize : &#x27;&#x27;, &#123; &#x27;is-disabled&#x27;: buttonDisabled, &#x27;is-loading&#x27;: loading, &#x27;is-plain&#x27;: plain, &#x27;is-round&#x27;: round, &#x27;is-circle&#x27;: circle &#125; ]&quot; &gt; &lt;i class=&quot;el-icon-loading&quot; v-if=&quot;loading&quot;&gt;&lt;/i&gt; &lt;i :class=&quot;icon&quot; v-if=&quot;icon &amp;&amp; !loading&quot;&gt;&lt;/i&gt; &lt;span v-if=&quot;$slots.default&quot;&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/span&gt; &lt;/button&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &#x27;ElButton&#x27;, inject: &#123; elForm: &#123; default: &#x27;&#x27; &#125;, elFormItem: &#123; default: &#x27;&#x27; &#125; &#125;, props: &#123; type: &#123; type: String, default: &#x27;default&#x27; &#125;, size: String, icon: &#123; type: String, default: &#x27;&#x27; &#125;, nativeType: &#123; type: String, default: &#x27;button&#x27; &#125;, loading: Boolean, disabled: Boolean, plain: Boolean, autofocus: Boolean, round: Boolean, circle: Boolean &#125;, computed: &#123; _elFormItemSize() &#123; return (this.elFormItem || &#123;&#125;).elFormItemSize; &#125;, buttonSize() &#123; return this.size || this._elFormItemSize || (this.$ELEMENT || &#123;&#125;).size; &#125;, buttonDisabled() &#123; return this.disabled || (this.elForm || &#123;&#125;).disabled; &#125; &#125;, methods: &#123; handleClick(evt) &#123; this.$emit(&#x27;click&#x27;, evt); &#125; &#125; &#125;;&lt;/script&gt; æˆ‘ä»¬çœ‹åˆ°Buttoné€»è¾‘ç›¸è¾ƒäºä¸Šé¢çš„ç»„ä»¶å¾ˆç®€å•ï¼Œé€šè¿‡computedè®¡ç®—äº†buttonSizeå’ŒbuttonDisabledè¿›è¡Œç±»åæ¸²æŸ“ï¼ŒåŒæ—¶ä¾èµ–äº†æ³¨å…¥çš„elFormå’ŒelFormItemä¸­çš„æ•°æ®ï¼›åœ¨ç‚¹å‡»æ—¶è§¦å‘äº†clickäº‹ä»¶ï¼›æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡Button-Groupå°†å¤šä¸ªæŒ‰é’®è¿›è¡ŒåµŒå¥—ï¼Œæ¥çœ‹ä¸‹å®ƒçš„æºç ï¼š 1234567891011//packages/button/src/button-group.vue&lt;template&gt; &lt;div class=&quot;el-button-group&quot;&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt; export default &#123; name: &#x27;ElButtonGroup&#x27; &#125;;&lt;/script&gt; å®ƒçš„ä»£ç æ›´ç®€å•ï¼Œåªç”¨äº†ä¸€ä¸ªslotåµŒå¥—äº†æ‰€æœ‰çš„Buttonã€‚ æŒ‡ä»¤å¼ç»„ä»¶ æŒ‡ä»¤å¼ç»„ä»¶é€šè¿‡Vue.directive(name, opt)æ¥æ³¨å†Œï¼Œnameå°±æ˜¯æˆ‘ä»¬è¦æ³¨å†Œçš„æŒ‡ä»¤åç§°ï¼Œè€Œoptæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«äº†5ä¸ªé’©å­å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦åªå†™å…¶ä¸­çš„å‡ ä¸ªå‡½æ•°ï¼š 123456789101112Vue.directive(&quot;demo&quot;, &#123; //åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ bind:function(el,binding,vnode)&#123; &#125;, //è¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ inserted:function(el,binding,vnode)&#123; &#125;, //æ‰€åœ¨ç»„ä»¶çš„ VNode æ›´æ–°æ—¶è°ƒç”¨ update:function(el,binding,vnode)&#123; &#125;, //æŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨ componentUpdated:function(el,binding,vnode)&#123; &#125;, //åªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨ã€‚ unbind:function(el,binding,vnode)&#123; &#125;,&#125;) æ¯ä¸ªé’©å­å‡½æ•°éƒ½æœ‰ä¸‰ä¸ªå›è°ƒå‚æ•°ï¼Œelè¡¨ç¤ºäº†æŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥DOMæ“ä½œï¼›è€Œbindingå°±æ˜¯æˆ‘ä»¬çš„ç»‘å®šä¿¡æ¯äº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬v-å‰ç¼€ã€‚ valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œæ¯”å¦‚v-demo=â€numâ€ï¼Œé‚¦å®šå€¼ä¸ºnumå€¼ï¼Œ2ã€‚ expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ï¼Œæ¯”å¦‚v-demo=â€numâ€ï¼Œè¡¨è¾¾å¼ä¸ºnumã€‚ modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ï¼Œæ¯”å¦‚v-demo.foo.barä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true } rawNameï¼šå®Œæ•´çš„æŒ‡ä»¤ä¿®é¥° InfiniteScroll InfiniteScrollæ— é™æ»šåŠ¨ç»„ä»¶çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨æˆ‘ä»¬æƒ³è¦æ»šåŠ¨åŠ è½½çš„åˆ—è¡¨ä¸ŠåŠ ä¸Šv-infinite-scrollï¼Œèµ‹å€¼è‡ªå®šä¹‰åŠ è½½çš„å‡½æ•°ï¼Œåœ¨åˆ—è¡¨æ»šåŠ¨åˆ°åº•éƒ¨æ—¶å°±ä¼šè‡ªåŠ¨è§¦å‘å‡½æ•°ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®˜æ–¹çš„Demoï¼š 12345678910111213141516171819&lt;template&gt; &lt;ul class=&quot;infinite-list&quot; v-infinite-scroll=&quot;load&quot; style=&quot;overflow:auto&quot;&gt; &lt;li v-for=&quot;i in count&quot; :key=&quot;i&quot; class=&quot;infinite-list-item&quot;&gt;&#123;&#123; i &#125;&#125;&lt;/li&gt; &lt;/ul&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; count: 0, &#125; &#125;, methods: &#123; load() &#123; this.count += 2; &#125;, &#125;&#125;&lt;/script&gt; åœ¨ulæ»šåŠ¨åˆ°æœ€åº•éƒ¨æ—¶ï¼Œè§¦å‘loadå‡½æ•°ï¼ŒåŠ è½½æ›´å¤šçš„æ•°æ®ï¼›å› æ­¤è¿™ä¸ªæŒ‡ä»¤çš„å®ç°åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç›‘å¬å®¹å™¨æ»šåŠ¨ï¼Œæ»šåŠ¨åˆ°åº•éƒ¨æ—¶è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“æ˜¯æ€ä¹ˆæ¥å®ç°çš„ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495import throttle from &#x27;throttle-debounce/debounce&#x27;;import &#123; getScrollContainer&#125; from &#x27;element-ui/src/utils/dom&#x27;;const attributes = &#123; delay: &#123; type: Number, default: 200 &#125;, distance: &#123; type: Number, default: 0 &#125;, disabled: &#123; type: Boolean, default: false &#125;, immediate: &#123; type: Boolean, default: true &#125;&#125;;const getScrollOptions = (el, vm) =&gt; &#123; if (!isHtmlElement(el)) return &#123;&#125;; return entries(attributes).reduce((map, [key, option]) =&gt; &#123; const &#123; type, default: defaultValue &#125; = option; let value = el.getAttribute(`infinite-scroll-$&#123;key&#125;`); value = isUndefined(vm[value]) ? value : vm[value]; switch (type) &#123; case Number: value = Number(value); value = Number.isNaN(value) ? defaultValue : value; break; case Boolean: value = isDefined(value) ? value === &#x27;false&#x27; ? false : Boolean(value) : defaultValue; break; default: value = type(value); &#125; map[key] = value; return map; &#125;, &#123;&#125;);&#125;;const handleScroll = function(cb) &#123; const &#123; el, vm, container, observer &#125; = this[scope]; const &#123; distance, disabled &#125; = getScrollOptions(el, vm); if (disabled) return; const containerInfo = container.getBoundingClientRect(); if (!containerInfo.width &amp;&amp; !containerInfo.height) return; let shouldTrigger = false; if (container === el) &#123; const scrollBottom = container.scrollTop + getClientHeight(container); shouldTrigger = container.scrollHeight - scrollBottom &lt;= distance; &#125; else &#123; const heightBelowTop = getOffsetHeight(el) + getElementTop(el) - getElementTop(container); const offsetHeight = getOffsetHeight(container); const borderBottom = Number.parseFloat(getStyleComputedProperty(container, &#x27;borderBottomWidth&#x27;)); shouldTrigger = heightBelowTop - offsetHeight + borderBottom &lt;= distance; &#125; if (shouldTrigger &amp;&amp; isFunction(cb)) &#123; cb.call(vm); &#125; else if (observer) &#123; observer.disconnect(); this[scope].observer = null; &#125;&#125;;export default &#123; name: &#x27;InfiniteScroll&#x27;, inserted(el, binding, vnode) &#123; const cb = binding.value; const container = getScrollContainer(el, true); const &#123; delay, immediate &#125; = getScrollOptions(el, vm); const onScroll = throttle(delay, handleScroll.bind(el, cb)); if (container) &#123; container.addEventListener(&#x27;scroll&#x27;, onScroll); if (immediate) &#123; const observer = el[scope].observer = new MutationObserver(onScroll); observer.observe(container, &#123; childList: true, subtree: true &#125;); onScroll(); &#125; &#125; &#125;, unbind(el) &#123; const &#123; container, onScroll &#125; = el[scope]; if (container) &#123; container.removeEventListener(&#x27;scroll&#x27;, onScroll); &#125; &#125;&#125;; åœ¨insertedå‡½æ•°ä¸­é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼Œé¦–å…ˆcbå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„å›è°ƒå‡½æ•°ï¼Œç”¨æ¥è§¦å‘ï¼›é€šè¿‡getScrollContaineråˆ¤æ–­æˆ‘ä»¬çš„elæ˜¯å¦æ˜¯æ»šåŠ¨å®¹å™¨ï¼Œç„¶åå°†handleScrollå¤„ç†æ»šåŠ¨é€»è¾‘çš„å‡½æ•°ç”¨èŠ‚æµå‡½æ•°throttleè¿›è¡Œå°è£…æˆonScrollï¼Œç»‘å®šåˆ°å®¹å™¨çš„æ»šåŠ¨äº‹ä»¶ä¸Šå»ã€‚ æˆ‘ä»¬åœ¨æ–‡æ¡£ä¸­è¿˜çœ‹åˆ°æœ‰å››ä¸ªå‚æ•°ï¼Œéƒ½æ˜¯ä»¥infinite-scroll-å¼€å¤´çš„ï¼Œç”¨æ¥æ§åˆ¶è§¦å‘åŠ è½½å‡½æ•°çš„æ—¶é—´ï¼›åœ¨æºç ä¸­æˆ‘ä»¬çœ‹åˆ°å®ƒæ˜¯é€šè¿‡getScrollOptionså‡½æ•°æ¥è¿›è¡Œè·å–ï¼Œå®šä¹‰äº†ä¸€ä¸ªå¯¹è±¡ç”¨æ¥å­˜å‚¨è¿™å››ä¸ªå‚æ•°çš„åç§°ã€ç±»å‹å’Œé»˜è®¤å€¼ï¼Œç”¨Object.keyså˜æˆæ•°ç»„åå†é€šè¿‡reduceå‡½æ•°å¤„ç†å˜æˆmapå¯¹è±¡è¿”å›ã€‚ å‡½æ•°è°ƒç”¨ç»„ä»¶ å‡½æ•°ç»„ä»¶è°ƒç”¨åä¼šå°†ç»„ä»¶æ’å…¥åˆ°bodyæˆ–è€…å…¶ä»–èŠ‚ç‚¹ä¸­å»ï¼Œå°±ä¸èƒ½å¤Ÿé€šè¿‡Vue.componentæ³¨å†Œåˆ°å…¨å±€ç»„ä»¶ï¼›è€Œæ˜¯é€šè¿‡Vue.extendåˆ›å»ºä¸€ä¸ªå­ç±»æ„é€ å™¨ï¼Œå‚æ•°æ˜¯åŒ…å«ç»„ä»¶é€‰é¡¹çš„å¯¹è±¡ï¼Œæ„é€ å™¨å®ä¾‹åŒ–åé€šè¿‡$mountæŒ‚è½½åˆ°é¡µé¢å…ƒç´ ä¸Šå»ã€‚ 12345678910var MyMessage = Vue.extend(&#123; template: &#x27;&lt;div&gt;number:&#123;&#123;number&#125;&#125;&lt;/div&gt;&#x27;, data() &#123; return &#123; number: 1 &#125; &#125;&#125;)let instance = new MyMessage()instance.$mount(&#x27;#components&#x27;) æˆ–è€…å®ä¾‹åŒ–åé€šè¿‡$mountè·å–åˆ°DOMç»“æ„ï¼Œç„¶åæŒ‚è½½åˆ°bodyä¸Šï¼š 123let instance = new MyMessage()instance.$mount()document.body.appendChild(instance.$el) Message Messageç»„ä»¶åœ¨å…¥å£æ–‡ä»¶ä¸­å°±æŒ‚è½½åˆ°å…¨å±€å˜é‡$messageä¸Šï¼Œç„¶åé€šè¿‡this.$message()æ¥è¿›è¡Œè°ƒç”¨ï¼Œè¿˜èƒ½é€šè¿‡this.$message.error()çš„æ–¹å¼æ¥è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬çŒœæµ‹Messageè‚¯å®šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸Šé¢è¿˜æŒ‚è½½äº†successã€errorç­‰å‡½æ•°æ¥å¤ç”¨Messageå‡½æ•°æœ¬èº«ï¼›æˆ‘ä»¬æ¥çœ‹ä¸‹Messageæºç ï¼ˆéƒ¨åˆ†ï¼‰ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//packages/message/src/main.jsimport Main from &#x27;./main.vue&#x27;;import &#123; isVNode &#125; from &#x27;element-ui/src/utils/vdom&#x27;;let MessageConstructor = Vue.extend(Main);let instance;let instances = [];let seed = 1;const Message = function(options) &#123; options = options || &#123;&#125;; if (typeof options === &#x27;string&#x27;) &#123; options = &#123; message: options &#125;; &#125; let id = &#x27;message_&#x27; + seed++; instance = new MessageConstructor(&#123; data: options &#125;); instance.id = id; if (isVNode(instance.message)) &#123; instance.$slots.default = [instance.message]; instance.message = null; &#125; instance.$mount(); document.body.appendChild(instance.$el); let verticalOffset = options.offset || 20; instances.forEach(item =&gt; &#123; verticalOffset += item.$el.offsetHeight + 16; &#125;); instance.verticalOffset = verticalOffset; instance.visible = true; instances.push(instance); return instance;&#125;;[&#x27;success&#x27;, &#x27;warning&#x27;, &#x27;info&#x27;, &#x27;error&#x27;].forEach(type =&gt; &#123; Message[type] = options =&gt; &#123; if (typeof options === &#x27;string&#x27;) &#123; options = &#123; message: options &#125;; &#125; options.type = type; return Message(options); &#125;;&#125;);export default Message; æˆ‘ä»¬å‘ç°åœ¨Messageçš„æ„é€ å‡½æ•°ä¸­é¦–å…ˆå¯¹optionsè¿›è¡Œä¸€ä¸ªå¤„ç†ï¼Œå› ä¸ºå¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²æˆ–è€…å¯¹è±¡ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œå› æ­¤é¦–å…ˆæŠŠå­—ç¬¦ä¸²çš„optionsç»Ÿä¸€æˆå¯¹è±¡å½¢å¼ï¼›ç„¶åé€šè¿‡Vue.extendåˆ›å»ºçš„æ„é€ å‡½æ•°å®ä¾‹åŒ–ä¸€ä¸ªinstanceï¼Œå°†æ‰€æœ‰çš„å‚æ•°optionsä¼ åˆ°instanceä¸­è¿›è¡Œæ¸²æŸ“ï¼Œæœ€åæŠŠinstance.$elæ’å…¥åˆ°é¡µé¢ä¸Šå»æ¸²æŸ“ï¼›è¿™é‡Œä¸ºäº†å¯¹æ‰€æœ‰çš„å®ä¾‹è¿›è¡Œç®¡ç†ï¼Œæ¯”å¦‚æ ¹æ®æ‰€æœ‰å®ä¾‹ä¸ªæ•°ï¼Œæ¸²æŸ“æœ€åä¸€ä¸ªå®ä¾‹çš„é«˜åº¦è¿˜æœ‰å…³é—­å®ä¾‹å¯¹è±¡ç­‰æ“ä½œï¼Œå› æ­¤ç»´æŠ¤äº†ä¸€ä¸ªæ•°ç»„instancesæ¥è¿›è¡Œç®¡ç†ï¼Œè¿˜ç»™æ¯ä¸ªå®ä¾‹ä¸€ä¸ªè‡ªå¢idæ–¹ä¾¿è¿›è¡ŒæŸ¥æ‰¾ã€‚ ç„¶åæˆ‘ä»¬æ¥çœ‹ä¸‹Vue.extendä¼ å…¥çš„å‚æ•°main.vueçš„æºç ï¼ˆéƒ¨åˆ†ï¼‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253//packages/message/src/main.vue&lt;template&gt; &lt;transition name=&quot;el-message-fade&quot; @after-leave=&quot;handleAfterLeave&quot;&gt; &lt;div :class=&quot;[ &#x27;el-message&#x27;, type &amp;&amp; !iconClass ? `el-message--$&#123; type &#125;` : &#x27;&#x27;, center ? &#x27;is-center&#x27; : &#x27;&#x27;, showClose ? &#x27;is-closable&#x27; : &#x27;&#x27;, customClass ]&quot; :style=&quot;positionStyle&quot; v-show=&quot;visible&quot; @mouseenter=&quot;clearTimer&quot; @mouseleave=&quot;startTimer&quot; role=&quot;alert&quot;&gt; &lt;i :class=&quot;iconClass&quot; v-if=&quot;iconClass&quot;&gt;&lt;/i&gt; &lt;i :class=&quot;typeClass&quot; v-else&gt;&lt;/i&gt; &lt;slot&gt; &lt;p v-if=&quot;!dangerouslyUseHTMLString&quot; class=&quot;el-message__content&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/p&gt; &lt;p v-else v-html=&quot;message&quot; class=&quot;el-message__content&quot;&gt;&lt;/p&gt; &lt;/slot&gt; &lt;i v-if=&quot;showClose&quot; class=&quot;el-message__closeBtn el-icon-close&quot; @click=&quot;close&quot;&gt;&lt;/i&gt; &lt;/div&gt; &lt;/transition&gt;&lt;/template&gt;&lt;script type=&quot;text/babel&quot;&gt; export default &#123; data() &#123; return &#123; visible: false, message: &#x27;&#x27;, duration: 3000, type: &#x27;info&#x27;, iconClass: &#x27;&#x27;, customClass: &#x27;&#x27;, onClose: null, showClose: false, closed: false, verticalOffset: 20, timer: null, dangerouslyUseHTMLString: false, center: false &#125;; &#125;, methods: &#123; handleAfterLeave() &#123; this.$destroy(true); this.$el.parentNode.removeChild(this.$el); &#125;, &#125;, &#125;;&lt;/script&gt; æˆ‘ä»¬çœ‹åˆ°è¿™é‡Œdataå‚æ•°å’Œæ–‡æ¡£ä¸­ç»™å‡ºçš„å‚æ•°æ˜¯ä¸€æ ·çš„ï¼Œåœ¨ä¸Šé¢æ„é€ å‡½æ•°ä¸­æ­£æ˜¯é€šè¿‡optionsä¼ å…¥è¿›æ¥è¿›è¡Œè¦†ç›–ï¼›è¿™é‡Œå…³é—­ç»„ä»¶æ˜¯é€šè¿‡watchç›‘å¬closedæ˜¯å¦ä¸ºtrueï¼Œç„¶åå†ç»™visibleèµ‹å€¼falseï¼›é‚£ä¹ˆé¡µé¢ä¸Šæ˜æ˜æ¸²æŸ“çš„æ˜¯visibleï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä¸ç›´æ¥ç»™visibleèµ‹å€¼å‘¢ï¼Ÿä¸ªäººçŒœæµ‹æ˜¯ä¸ºäº†åœ¨å…³é—­çš„åŒæ—¶è§¦å‘å›è°ƒå‡½æ•°onCloseï¼›åœ¨ç»„ä»¶åŠ¨ç”»ç»“æŸåä¹Ÿè°ƒç”¨äº†parentNode.removeChildå°†ç»„ä»¶ä»bodyä¸­ç§»é™¤ï¼Œ æ€»ç»“ æˆ‘ä»¬ä»webpacké…ç½®æ–‡ä»¶å…¥æ‰‹ï¼Œæ‰¾åˆ°äº†å…¥å£æ–‡ä»¶è¿›è¡Œç»„ä»¶çš„æ³¨å†Œé…ç½®å’Œå¯¼å‡ºï¼Œå¯¹ä¼—å¤šçš„ç»„ä»¶è¿›è¡Œäº†åˆ†ç±»ï¼Œå½’ä¸ºä¸‰å¤§ç±»ï¼›ç”±äºæ–‡ç« ç¯‡å¹…æœ‰é™ï¼Œè¿™é‡Œåªå±•ç¤ºäº†æ¯ä¸€ç±»ç»„ä»¶ä¸­éƒ¨åˆ†ç»„ä»¶çš„æºç ï¼Œåƒå¾ˆå¤šå¸¸ç”¨çš„ç»„ä»¶ï¼Œæ¯”å¦‚Inputã€Radioå’ŒCheckboxç­‰å¾ˆå¤šç»„ä»¶éƒ½æ˜¯å¤§åŒå°å¼‚ï¼Œå¤§å®¶å¯ä»¥ç»§ç»­æ·±å…¥å­¦ä¹ å…¶æºç ï¼›åœ¨çœ‹æºç çš„åŒæ—¶å»ºè®®å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ä¸­çš„å‚æ•°ä»¥åŠå‚æ•°è¯´æ˜ï¼Œè¿™æ ·èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£æºç ä¸­çš„æ€æƒ³é€»è¾‘ï¼Œä¸è‡³äºçœ‹çš„ä¸€å¤´é›¾æ°´ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"},{"name":"ç»„ä»¶åŒ–","slug":"Componentization","permalink":"https://xieyufei.com/tags/Componentization/"}]},{"title":"æ·±å…¥å¯¹æ¯”Webpackã€Parcelã€Rollupæ‰“åŒ…å·¥å…·çš„ä¸åŒ","date":"2021-01-28T04:00:00.000Z","path":"2021/01/28/Package-Tool-Compare.html","text":"æˆ‘ä»¬åœ¨ä¹‹å‰ç”¨äº†ä¸¤ç¯‡æ–‡ç« æ¥ä»‹ç»äº†Webpackçš„é…ç½®å’Œä¼˜åŒ–ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿™ç¯‡æ–‡ç« è¿˜è¦æ¥å¯¹æ¯”Parcelå’ŒRollupå‘¢ï¼Ÿé…ç½®è¿‡Webpackçš„ç«¥é‹å¯èƒ½ä¼šå‘ç°äº†ï¼Œè™½ç„¶å®ƒå…·æœ‰å¾ˆé«˜çš„å¯é…ç½®æ€§å’Œæ‰©å±•æ€§ï¼Œä»¥åŠä¸°å¯Œçš„æ’ä»¶ç³»ç»Ÿï¼Œä½†æ˜¯è¿™äº›æ— ä¸€ä¸ç»™æˆ‘ä»¬çš„ä¸Šæ‰‹å¸¦æ¥é™åˆ¶ï¼Œæœ‰å¾ˆé«˜çš„ä¸Šæ‰‹é—¨æ§›ã€‚ç›¸ä¿¡å¤§å¤šç«¥é‹åœ¨é…ç½®æ—¶é‡åˆ°éƒ½ä¼šé‡åˆ°è«åå…¶å¦™çš„æŠ¥é”™å’Œå„ç§æŸ¥èµ„æ–™çš„çƒ¦æ¼ï¼Œé‚£ä¹ˆä»Šå¤©å°±æ¥çœ‹ä¸€ä¸‹Parcelå’ŒRollupèƒ½ç»™æˆ‘ä»¬çš„æ‰“åŒ…å¸¦æ¥å“ªäº›ä¾¿åˆ©ã€‚ Parcel Parcelå®˜ç½‘çš„å®šä¹‰å°±æ˜¯æé€Ÿé›¶é…ç½®Webåº”ç”¨æ‰“åŒ…å·¥å…·ï¼Œå®ƒåˆ©ç”¨å¤šæ ¸å¤„ç†æä¾›äº†æå¿«çš„é€Ÿåº¦ï¼Œå¹¶ä¸”ä¸éœ€è¦ä»»ä½•é…ç½®ã€‚ å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š æé€Ÿæ‰“åŒ…ï¼šParcelä½¿ç”¨workerè¿›ç¨‹å»å¯ç”¨å¤šæ ¸ç¼–è¯‘ã€‚åŒæ—¶æœ‰æ–‡ä»¶ç³»ç»Ÿç¼“å­˜ï¼Œå³ä½¿åœ¨é‡å¯æ„å»ºåä¹Ÿèƒ½å¿«é€Ÿå†ç¼–è¯‘ã€‚ å°†ä½ æ‰€æœ‰çš„èµ„æºæ‰“åŒ…ï¼šParcel å…·å¤‡å¼€ç®±å³ç”¨çš„å¯¹ JS, CSS, HTML, æ–‡ä»¶ åŠæ›´å¤šçš„æ”¯æŒï¼Œè€Œä¸”ä¸éœ€è¦æ’ä»¶ã€‚ è‡ªåŠ¨è½¬æ¢ï¼šå¦‚è‹¥æœ‰éœ€è¦ï¼ŒBabel, PostCSS, å’ŒPostHTMLç”šè‡³ node_modules åŒ…ä¼šè¢«ç”¨äºè‡ªåŠ¨è½¬æ¢ä»£ç . é›¶é…ç½®ä»£ç åˆ†æ‹†ï¼šä½¿ç”¨åŠ¨æ€import()è¯­æ³•, Parcel å°†ä½ çš„è¾“å‡ºæ–‡ä»¶æŸ(bundles)åˆ†æ‹†ï¼Œå› æ­¤ä½ åªéœ€è¦åœ¨åˆæ¬¡åŠ è½½æ—¶åŠ è½½ä½ æ‰€éœ€è¦çš„ä»£ç ã€‚ çƒ­æ¨¡å—æ›¿æ¢ï¼šParcel æ— éœ€é…ç½®ï¼Œåœ¨å¼€å‘ç¯å¢ƒçš„æ—¶å€™ä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨å†…éšç€ä½ çš„ä»£ç æ›´æ”¹è€Œå»æ›´æ–°æ¨¡å—ã€‚ å‹å¥½çš„é”™è¯¯æ—¥å¿—ï¼šå½“é‡åˆ°é”™è¯¯æ—¶ï¼ŒParcel ä¼šè¾“å‡º è¯­æ³•é«˜äº®çš„ä»£ç ç‰‡æ®µï¼Œå¸®åŠ©ä½ å®šä½é—®é¢˜ã€‚ æˆ‘ä»¬ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢åˆ†åˆ«æ¥çœ‹ä¸‹Parcelå¦‚ä½•è¿›è¡Œé…ç½®ã€‚ å…¥å£æ–‡ä»¶ Parcelå¯ä»¥ä½¿ç”¨ä»»ä½•ç±»å‹çš„æ–‡ä»¶ä½œä¸ºå…¥å£ï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯ä½¿ç”¨Htmlæˆ–è€…JSæ–‡ä»¶ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œåˆ›å»ºhtmlå’Œjsæ–‡ä»¶ï¼š 123456&lt;!-- index.html --&gt;&lt;html&gt; &lt;body&gt; &lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt; &lt;/body&gt;&lt;/html&gt; 12//index.jsconsole.log(&#x27;hello parcel&#x27;) æ–‡ä»¶åˆ›å»ºå¥½åæˆ‘ä»¬å°±å¯ä»¥å¯åŠ¨Parceläº†ï¼Œå®ƒé»˜è®¤å†…ç½®äº†ä¸€ä¸ªç”¨äºå¼€å‘ç¯å¢ƒçš„æœåŠ¡å™¨ï¼Œå¦‚æœå°†å…¥å£è®¾ç½®ä¸ºjsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨é‡ŒæŸ¥çœ‹åˆ°jsæ–‡ä»¶å†…å®¹ï¼Œä½†è¿™æ ·çœ‹ä¸åˆ°ä»»ä½•é¡µé¢æ•ˆæœï¼Œå› æ­¤æˆ‘ä»¬å°†å…¥å£è®¾ç½®ä¸ºhtmlæ–‡ä»¶ï¼š 1parcel index.html ç°åœ¨å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€http://localhost:1234/ï¼Œä¹Ÿå¯ä»¥æ·»åŠ -p &lt;prot number&gt;è¦†ç›–é»˜è®¤çš„1234ç«¯å£å·ï¼›è¿™ä¸ªå¼€å‘æœåŠ¡å™¨ä¹Ÿæ”¯æŒæ¨¡å—çƒ­æ›´æ–°ï¼Œæˆ‘ä»¬æ”¹å˜jsæˆ–è€…htmlå†…å®¹ï¼Œæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨æ›´æ–°ã€‚åŒæ—¶ï¼ŒParcelä¹Ÿæ”¯æŒå¤šé¡µé¢å…¥å£ï¼Œå‡è®¾æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š 1234567- pages - home index.html index.js - list index.html index.js æˆ‘ä»¬å¯ä»¥ç¹ççš„æ‰‹åŠ¨æŒ‡å®šéœ€è¦åŠ è½½å…¥å£çš„æ–‡ä»¶åç§°ï¼Œæ¯”å¦‚ï¼š 1parcel ./pages/home/index.html ./pages/list/index.html ä¹Ÿå¯ä»¥é€šè¿‡globæ–‡ä»¶åŒ¹é…æ¨¡å¼æ¥åŒ¹é…æ‰€æœ‰çš„htmlæ–‡ä»¶ï¼š 1parcel ./pages/**/*.html è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡http://localhost:1234/home/index.htmlæ¥è®¿é—®åˆ°é¡µé¢äº†ã€‚ æˆ‘ä»¬å‘ç°åœ¨å…¥å£æ–‡ä»¶è¿™æ–¹é¢ï¼ŒParcelç›¸è¾ƒäºWebpackè¦çµæ´»ä¸å°‘ï¼Œåœ¨Webpackä¸­æˆ‘ä»¬éœ€è¦é€šè¿‡entryå­—æ®µæ¥æŒ‡å®šå…¥å£ï¼Œè€Œä¸”å…¥å£åªèƒ½æ˜¯JSæ–‡ä»¶ï¼Œè¦ä»¥htmlä¸ºå…¥å£è¿˜éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶å¦‚html-webpack-pluginï¼›è€ŒParcelåœ¨å…¥å£æ–‡ä»¶åˆ™å®½æ¾å¾ˆå¤šï¼Œå¯ä»¥ç”¨htmlæ–‡ä»¶ä½œä¸ºå…¥å£ï¼ŒParcelä¼šè‡ªåŠ¨åŠ è½½htmlæ–‡ä»¶ä¸­å¼•ç”¨çš„è„šæœ¬æˆ–è€…æ ·å¼è¿›è¡Œæ‰“åŒ…ï¼›æˆ‘ä»¬ç”šè‡³è¿˜å¯ä»¥å°†ä¸€å¼ å›¾ç‰‡æˆ–è€…vueæ–‡ä»¶ç›´æ¥ä½œä¸ºå…¥å£æ–‡ä»¶ã€‚ æ¨¡å—è½¬æ¢ é€šå¸¸æ‰“åŒ…å·¥å…·åªçŸ¥é“å¦‚ä½•å¤„ç†JSæ–‡ä»¶ï¼Œåœ¨å¤„ç†å…¶ä»–èµ„æºæ—¶ï¼Œæ¯”å¦‚less/sassã€å›¾ç‰‡ã€vueæ–‡ä»¶ç­‰ï¼Œéƒ½éœ€è¦é€šè¿‡é€šè¿‡è½¬æ¢å™¨è¿›è¡Œè½¬æ¢ï¼Œæ¯”å¦‚webpackçš„loaderå°±æ˜¯å……å½“äº†è½¬æ¢å™¨çš„è§’è‰²ï¼›è€ŒParcelæ”¯æŒè®¸å¤šå¼€ç®±å³ç”¨çš„è½¬æ¢å™¨ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®æ ¹ç›®å½•é…ç½®.babelrcå’Œ.postcssrcï¼ŒParcelå°±ä¼šè‡ªåŠ¨åœ¨æ‰€æœ‰çš„JSå’Œcssä¸Šè¿›è¡Œè½¬æ¢ã€‚ å†æ¯”å¦‚æˆ‘ä»¬ä¸€èˆ¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨sassæˆ–è€…lessï¼Œç„¶ååœ¨jsä¸­importæ¥å¼•å…¥æ ·å¼ï¼Œå¦‚æœåœ¨webpackä¸­ä¹Ÿæ˜¯éœ€è¦é€šè¿‡é…ç½®loaderæ‰èƒ½è§£æï¼›è€Œæˆ‘ä»¬åœ¨Parcelå¯ä»¥ä¸é€šè¿‡ä»»ä½•é…ç½®ç›´æ¥importè¿›æ¥ï¼ŒParcelä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬å®‰è£…sassçš„ä¾èµ–åŒ…ï¼š ä»£ç åˆ†å‰² è™½ç„¶é¡¹ç›®ä»£ç çš„å¢å¤šï¼Œæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶ä¹Ÿä¼šéšä¹‹å¢å¤§ï¼›é€šè¿‡ä»£ç åˆ†å‰²æˆ‘ä»¬å¯ä»¥å°†é¦–å±ä¸åŠ è½½çš„é¡µé¢æˆ–è€…æ¨¡å—æ‹†åˆ†åˆ°ç‹¬ç«‹çš„åŒ…ä¸­ï¼Œç„¶åè¿›è¡ŒæŒ‰éœ€åŠ è½½ã€‚ åœ¨Webpackä¸­å®ç°ä»£ç åˆ†å‰²ä¸»è¦æ˜¯é€šè¿‡é…ç½®splitChunkså’Œæ¨¡å—å†…çš„å†…è”å‡½æ•°åŠ¨æ€å¼•å…¥æ¥å®ç°ä»£ç åˆ†å‰²ï¼Œè€ŒParcelæ”¯æŒé›¶é…ç½®ä»£ç åˆ†å‰²ï¼Œå¹¶ä¸”å¼€ç®±å³ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å°†ä»£ç æ‹†åˆ†æˆå•ç‹¬çš„åŒ…ï¼Œè¿™äº›åŒ…å¯ä»¥æŒ‰éœ€åŠ è½½ï¼›ä¸»è¦æ˜¯é€šè¿‡åŠ¨æ€import()å‡½æ•°æ¥å®ç°ï¼Œè¿™ä¸ªå‡½æ•°ä¸æ™®é€šçš„importè¯­å¥ç±»ä¼¼ï¼Œä½†è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼š 123456789101112//about.jsexport function render() &#123; console.log(&quot;about run&quot;);&#125;//index.jslet body = document.getElementsByTagName(&#x27;body&#x27;)[0]body.addEventListener(&quot;click&quot;, ()=&gt;&#123; import(&quot;./about.js&quot;).then((page) =&gt; &#123; page.render(); console.log(&quot;index import&quot;); &#125;);&#125;); è¿™æ ·ï¼ŒParcelåœ¨æ‰“åŒ…æ—¶ä¼šå°†about.jså•ç‹¬è¿›è¡Œæ‰“åŒ…ï¼Œç„¶åç‚¹å‡»bodyæ—¶æ‰æŒ‰éœ€åŠ è½½ã€‚ æ¨¡å—çƒ­æ›´æ–° æ¨¡å—çƒ­æ›´æ–°ï¼ˆHMRï¼‰æˆ‘ä»¬åœ¨Webpackä¸­ä¹Ÿä»‹ç»è¿‡ï¼Œæ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶è‡ªåŠ¨æ›´æ–°æµè§ˆå™¨ä¸­çš„æ¨¡å—è€Œæ— éœ€åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œä»è€Œæ”¹å–„äº†å¼€å‘ä½“éªŒï¼›å…¶å®ç°çš„åŸç†ä¸»è¦æ˜¯åœ¨æœåŠ¡å™¨å’Œæµè§ˆå™¨ä¹‹é—´ç»´æŠ¤äº†ä¸€ä¸ªwebsocketè¿æ¥ï¼ŒæœåŠ¡å™¨è‡ªåŠ¨æ¨é€æ¯æ¬¡ä»£ç æ”¹å˜ã€‚ åœ¨webpackä¸­ä¸»è¦æ˜¯é€šè¿‡å®˜æ–¹çš„webpack-dev-serveræœåŠ¡å™¨æ¥å®ç°çš„ï¼Œè€Œåœ¨Parcelä¸­HMRæœåŠ¡å™¨æ˜¯å†…ç½®çš„ï¼Œå¼€ç®±å³ç”¨ï¼Œåœ¨å¯åŠ¨å¼€å‘ç¯å¢ƒæœåŠ¡å™¨æ—¶è‡ªåŠ¨å¯ç”¨ï¼Œæ— éœ€é…ç½®ã€‚ Tree Shaking Parcelä¸æ”¯æŒTree Shaking å°ç»“ æˆ‘ä»¬ä½“éªŒå®Œæ•´ä¸ªParcelï¼Œå‘ç°ç¡®å®ä¸€è¡Œé…ç½®ä»£ç éƒ½æ²¡æœ‰å†™ï¼Œå’Œå®˜ç½‘çš„sloganæé€Ÿé›¶é…ç½®ç¡®å®ç¬¦åˆï¼›åœ¨Webpackæœ€éš¾é…ç½®çš„æ¨¡å—è½¬æ¢æ–¹é¢ï¼ŒParcelåšåˆ°äº†è‡ªåŠ¨è¯†åˆ«å¤„ç†å¯¼å…¥çš„æ¨¡å—ï¼Œè¿™æ˜¯è®©æˆ‘ä»¬çœ¼å‰ä¸€äº®çš„åœ°æ–¹ï¼›è€Œä¸”å†…éƒ¨å¯ç”¨äº†å¤šè¿›ç¨‹å·¥ä½œï¼Œåœ¨æ‰“åŒ…ç›¸åŒä½“é‡çš„é¡¹ç›®æ—¶ï¼ŒParcelä¼šæ¯”Webpackå¿«å¾ˆå¤šï¼›ä¸è¿‡Webpackçš„å¾ˆå¤šåŠŸèƒ½Parcelä¹Ÿå¹¶ä¸å…·å¤‡ï¼Œæ¯”å¦‚å¸¸ç”¨çš„Tree Shakingã€æå–å…¬å…±ä»£ç ç­‰ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒæ—¶éœ€è¦è€ƒè™‘åˆ°è¿™äº›åŠŸèƒ½æ˜¯å¦æ˜¯æˆ‘ä»¬é¡¹ç›®æ‰€å¿…é¡»çš„ã€‚ Rollup æˆ‘ä»¬æœ‰æ—¶å€™åœ¨å¼€å‘ä¸€äº›è‡ªå·±é¡¹ç›®ä¸­ç”¨çš„JSç±»åº“æ—¶ï¼Œæ¯”å¦‚å¼¹æ¡†ç»„ä»¶ã€æ ¡éªŒç»„ä»¶ã€å·¥å…·ç»„ä»¶ç­‰ï¼Œå¦‚æœä½¿ç”¨Webpackï¼Œåœ¨æ‰“åŒ…æ—¶ä¼šäº§ç”Ÿå¾ˆå¤šå†—ä½™ä»£ç ï¼Œå¯¼è‡´ä¸€ä¸ªç®€å•çš„ç±»åº“æ‰“åŒ…å‡ºæ¥ä½“ç§¯ä¹Ÿæ¯”è¾ƒåºå¤§ï¼›è€ŒRollupå°±æ˜¯ä¸“é—¨é’ˆå¯¹ç±»åº“è¿›è¡Œæ‰“åŒ…ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å°å·§è€Œä¸“æ³¨ï¼Œå› æ­¤ç°åœ¨å¾ˆå¤šæˆ‘ä»¬ç†ŸçŸ¥çš„åº“éƒ½éƒ½ä½¿ç”¨å®ƒè¿›è¡Œæ‰“åŒ…ï¼Œæ¯”å¦‚ï¼šVueã€Reactå’Œthree.jsç­‰ã€‚ Rollup æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—æ‰“åŒ…å™¨ï¼Œå¯ä»¥å°†å°å—ä»£ç ç¼–è¯‘æˆå¤§å—å¤æ‚çš„ä»£ç ï¼Œä¾‹å¦‚ library æˆ–åº”ç”¨ç¨‹åºã€‚ å…¥å£æ–‡ä»¶ Rollupæ—¢ç„¶æ˜¯æ‰“åŒ…ç±»åº“æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒçš„å…¥å£ä¹Ÿå°±åªèƒ½æ˜¯JSæ–‡ä»¶äº†ï¼ˆé€šè¿‡ç¬¬ä¸‰æ–¹æ’ä»¶å¯ä»¥æ”¯æŒHtmlï¼Œè¿™é‡Œä¸ä½œå±•å¼€ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬æ–°å»ºä¸€ä¸ªmain.jsä½œä¸ºå…¥å£æ–‡ä»¶ï¼Œæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶æˆ‘ä»¬å‘½åä¸ºbundle.jsï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„é€šè¿‡å‘½ä»¤è¡Œè¿›è¡Œæ‰“åŒ…ï¼š 1234# é’ˆå¯¹æµè§ˆå™¨ç¯å¢ƒæ‰“åŒ…rollup main.js --file bundle.js --format iife# é’ˆå¯¹Nodejsç¯å¢ƒæ‰“åŒ…rollup main.js --file bundle.js --format cjs ä½†æ˜¯å’ŒWebpackä¸€æ ·ï¼Œæ¨èä½¿ç”¨é…ç½®æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼š 12345# é»˜è®¤ä½¿ç”¨rollup.config.jsé…ç½®æ–‡ä»¶rollup --config# ä½¿ç”¨è‡ªå®šä¹‰my.config.jsé…ç½®æ–‡ä»¶$ rollup --config my.config.js æˆ‘ä»¬æ¥çœ‹ä¸‹rollup.config.jsé…ç½®æ–‡ä»¶éœ€è¦åŒ…å«å“ªäº›é€‰é¡¹ï¼š 1234567891011121314151617181920212223242526272829303132333435export default &#123; // æ ¸å¿ƒé€‰é¡¹ input, // å¿…é¡» external, plugins, // é¢å¤–é€‰é¡¹ onwarn, // é«˜å±é€‰é¡¹ acorn, context, moduleContext, legacy // å¿…é¡» (å¦‚æœè¦è¾“å‡ºå¤šä¸ªï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„) output: &#123; // æ ¸å¿ƒé€‰é¡¹ file, // å¿…é¡» format, // å¿…é¡» name, globals, // é¢å¤–é€‰é¡¹ paths, banner, footer, intro, outro, sourcemap, sourcemapFile, interop, // é«˜å±é€‰é¡¹ exports, amd, indent strict &#125;,&#125;; æˆ‘ä»¬å‘ç°è¿™é‡Œinputã€output.fileå’Œoutput.formatéƒ½æ˜¯å¿…ä¼ çš„ï¼Œå› æ­¤ï¼Œä¸€ä¸ªåŸºç¡€é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š 12345678// rollup.config.jsexport default &#123; input: &quot;main.js&quot;, output: &#123; file: &quot;bundle.js&quot;, format: &quot;cjs&quot;, &#125;,&#125;; è¿™é‡Œçš„formatå­—æ®µå¤§å®¶çœ‹äº†å¯èƒ½ä¸å¤ªç†è§£ï¼Œå°¤å…¶æ˜¯é‡Œé¢çš„cjsä»£è¡¨ä»€ä¹ˆæ„æ€ï¼›ç”±äºJSæœ‰å¤šç§æ¨¡å—åŒ–æ–¹å¼ï¼ŒRollupå¯ä»¥é’ˆå¯¹ä¸åŒçš„æ¨¡å—è§„èŒƒæ‰“åŒ…å‡ºä¸åŒçš„æ–‡ä»¶ï¼Œå®ƒæœ‰ä»¥ä¸‹äº”ç§é€‰é¡¹ï¼› amdï¼š å¼‚æ­¥æ¨¡å—å®šä¹‰ï¼Œç”¨äºåƒRequireJSè¿™æ ·çš„æ¨¡å—åŠ è½½å™¨ cjsï¼šCommonJSï¼Œé€‚ç”¨äº Node å’Œ Browserify/Webpack esï¼šESæ¨¡å—æ–‡ä»¶ iifeï¼šè‡ªæ‰§è¡Œæ¨¡å—ï¼Œé€‚ç”¨äºæµè§ˆå™¨ç¯å¢ƒscriptæ ‡ç­¾ umdï¼šé€šç”¨æ¨¡å—å®šä¹‰ï¼Œä»¥amdï¼Œcjs å’Œ iife ä¸ºä¸€ä½“ å’ŒWebpackä¸€æ ·ï¼ŒRollupä¹Ÿæ”¯æŒé…ç½®å¤šä¸ªæ–‡ä»¶å…¥å£ï¼Œæˆ‘ä»¬æ–°å»ºfoo.jså’Œbar.jsä¸¤ä¸ªå…¥å£æ–‡ä»¶ï¼š 12345678910export default &#123; input: &#123; foo: &quot;./foo.js&quot;, bar: &quot;./bar.js&quot;, &#125;, output: &#123; dir: &quot;dist&quot;, format: &quot;cjs&quot;, &#125;,&#125;; è¿™æ ·æ‰“åŒ…å‡ºæ¥çš„ä¸¤ä¸ªæ–‡ä»¶å°±æ”¾å…¥distä¸­ã€‚ æ’ä»¶ æ’ä»¶æ‹“å±•äº†Rollupå¤„ç†å…¶ä»–ç±»å‹æ–‡ä»¶çš„èƒ½åŠ›ï¼Œå®ƒçš„åŠŸèƒ½æœ‰ç‚¹ç±»ä¼¼äºWebpackçš„loaderå’Œpluginçš„ç»„åˆï¼›ä¸è¿‡é…ç½®æ¯”webpackä¸­è¦ç®€å•å¾ˆå¤šï¼Œä¸ç”¨é€ä¸ªå£°æ˜å“ªä¸ªæ–‡ä»¶ç”¨å“ªä¸ªæ’ä»¶å¤„ç†ï¼Œåªéœ€è¦åœ¨pluginsä¸­å£°æ˜ï¼Œåœ¨å¼•å…¥å¯¹åº”æ–‡ä»¶ç±»å‹æ—¶å°±ä¼šè‡ªåŠ¨åŠ è½½ï¼›æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªå¸¸ç”¨çš„æ’ä»¶ã€‚ é¦–å…ˆæ˜¯rollup-plugin-jsonï¼Œè®©Rollupå¯ä»¥ä»JSONæ–‡ä»¶ä¸­è¯»å–æ•°æ®ï¼š 123456789import json from &quot;rollup-plugin-json&quot;;export default &#123; input: &quot;main.js&quot;, output: &#123; file: &quot;bundle.js&quot;, format: &quot;iife&quot;, &#125;, plugins: [json()],&#125;; Rollupé»˜è®¤åªèƒ½åŠ è½½ES6æ¨¡å—çš„jsï¼Œä½†æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­é€šå¸¸ä¹Ÿä¼šç”¨åˆ°CommonJSçš„æ¨¡å—ï¼Œè¿™æ ·Rollupè§£æå°±ä¼šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ï¼š 1234567891011121314//add.jslet count = 1;let add = () =&gt; &#123; return count + 1;&#125;;module.exports = &#123; count, add,&#125;;//main.js//æŠ¥é”™import add from &quot;./add&quot;;console.log(&quot;foo&quot;, add.count); ç”±äºES6æ¨¡å—å¯¼å…¥é»˜è®¤ä¼šå»æ‰¾defaultï¼Œå› æ­¤è¿™é‡Œæ‰“åŒ…ä¼šæŠ¥é”™ï¼›è¿™æ—¶å°±éœ€è¦ç”¨åˆ°rollup-plugin-commonjsæ’ä»¶æ¥è¿›è¡Œè½¬æ¢ï¼š 12345678910import commonjs from &quot;rollup-plugin-commonjs&quot;;export default &#123; input: &quot;./main.js&quot;, output: &#123; file: &quot;bundle.js&quot;, format: &quot;iife&quot;, &#125;, plugins: [commonjs()],&#125;; è€Œä¸”ç›®å‰npmä¸­å¤§å¤šæ•°ä¾èµ–åŒ…éƒ½æ˜¯ä»¥CommonJSæ¨¡å—å½¢å¼å‡ºç°ï¼Œéƒ½éœ€ç”¨é€šè¿‡è¿™ä¸ªæ’ä»¶æ¥è¿›è¡Œæ¨¡å—åŒ–è§£æï¼›é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬å¼•ç”¨node_modulesä¸­çš„ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œè¿˜éœ€è¦ç”¨åˆ°rollup-plugin-node-resolveè¿›è¡Œè§£æï¼Œè¿™ä¸¤ä¸ªæ’ä»¶é€šå¸¸ç»„åˆä½¿ç”¨ï¼š 1234567891011import resolve from &quot;rollup-plugin-node-resolve&quot;;import commonjs from &quot;rollup-plugin-commonjs&quot;;export default &#123; input: &quot;./main.js&quot;, output: &#123; file: &quot;bundle.js&quot;, format: &quot;iife&quot;, &#125;, plugins: [commonjs(), resolve()],&#125;; é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¾ˆå¤šæœ‰ç”¨çš„æ’ä»¶ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€èµ˜è¿°ä½¿ç”¨æ–¹æ³•ï¼Œåˆ—å‡ºæ¥æœ‰éœ€è¦çš„ç«¥é‹å¯ä»¥æ ¹æ®æƒ…å†µè¿›è¡Œä½¿ç”¨ï¼š rollup-plugin-vueï¼šè§£ævueæ–‡ä»¶ rollup-plugin-postcssï¼šè§£æã€è½¬æ¢ã€æå–cssæ–‡ä»¶ rollup-plugin-aliasï¼šæä¾›modulesåç§°çš„aliaså’ŒresloveåŠŸèƒ½ rollup-plugin-babelï¼šbabelè½¬æ¢ rollup-plugin-eslintï¼šeslintä»£ç æ£€æµ‹ rollup-plugin-uglifyï¼šjsä»£ç å‹ç¼© rollup-plugin-replaceï¼šç±»ä¼¼Webpackçš„DefinePlugin, å¯åœ¨æºç ä¸­é€šè¿‡process.env.NODE_ENVç”¨äºæ„å»ºåŒºåˆ†ç¯å¢ƒ. æ¨¡å—çƒ­æ›´æ–° Rollupæœ¬èº«ä¸æ”¯æŒå¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡rollup-plugin-serveç¬¬ä¸‰æ–¹æ’ä»¶æ¥å¯åŠ¨ä¸€ä¸ªé™æ€èµ„æºæœåŠ¡å™¨ï¼š 123456789import serve from &quot;rollup-plugin-serve&quot;;export default &#123; input: &quot;./main.js&quot;, output: &#123; file: &quot;dist/bundle.js&quot;, format: &quot;iife&quot;, &#125;, plugins: [serve(&quot;dist&quot;)],&#125;; ä¸è¿‡ç”±äºå…¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªé™æ€èµ„æºçš„æœåŠ¡å™¨ï¼Œå› æ­¤ä¸æ”¯æŒæ¨¡å—çƒ­æ›´æ–° Tree Shaking ç”±äºRollupæœ¬èº«æ”¯æŒES6æ¨¡å—åŒ–è§„èŒƒï¼Œå› æ­¤ä¸éœ€è¦é¢å¤–é…ç½®å³å¯è¿›è¡ŒTree Shaking ä»£ç åˆ†å‰² Rollupä»£ç åˆ†å‰²å’ŒParcelä¸€æ ·ï¼Œä¹Ÿæ˜¯é€šè¿‡æŒ‰éœ€å¯¼å…¥çš„æ–¹å¼ï¼›ä½†æ˜¯æˆ‘ä»¬è¾“å‡ºçš„æ ¼å¼formatä¸èƒ½ä½¿ç”¨iifeï¼Œå› ä¸ºiifeè‡ªæ‰§è¡Œå‡½æ•°ä¼šæŠŠæ‰€æœ‰æ¨¡å—æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥é€šè¿‡amdæˆ–è€…cjsç­‰å…¶ä»–è§„èŒƒã€‚ 12345678export default &#123; input: &quot;./main.js&quot;, output: &#123; //è¾“å‡ºæ–‡ä»¶å¤¹ dir: &quot;dist&quot;, format: &quot;amd&quot;, &#125;,&#125;; è¿™æ ·æˆ‘ä»¬é€šè¿‡import()åŠ¨æ€å¯¼å…¥çš„ä»£ç å°±ä¼šå•ç‹¬åˆ†å‰²åˆ°ç‹¬ç«‹çš„jsä¸­ï¼Œåœ¨è°ƒç”¨æ—¶æŒ‰éœ€å¼•å…¥ï¼›ä¸è¿‡å¯¹äºè¿™ç§amdæ¨¡å—çš„æ–‡ä»¶ï¼Œä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨ä¸­å¼•ç”¨ï¼Œå¿…é¡»é€šè¿‡å®ç°AMDæ ‡å‡†çš„åº“åŠ è½½ï¼Œæ¯”å¦‚Require.jsã€‚ å°ç»“ é€šè¿‡å¯¹Rollupçš„ä½¿ç”¨ä»‹ç»ï¼Œæˆ‘ä»¬å‘ç°å®ƒæœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š é…ç½®ç®€å•ï¼Œæ‰“åŒ…é€Ÿåº¦å¿« è‡ªåŠ¨ç§»é™¤æœªå¼•ç”¨çš„ä»£ç ï¼ˆå†…ç½®tree shakingï¼‰ ä½†æ˜¯ä»–ä¹Ÿæœ‰ä»¥ä¸‹ä¸å¯å¿½è§†çš„ç¼ºç‚¹ï¼š å¼€å‘æœåŠ¡å™¨ä¸èƒ½å®ç°æ¨¡å—çƒ­æ›´æ–°ï¼Œè°ƒè¯•ç¹ç æµè§ˆå™¨ç¯å¢ƒçš„ä»£ç åˆ†å‰²ä¾èµ–amd åŠ è½½ç¬¬ä¸‰æ–¹æ¨¡å—æ¯”è¾ƒå¤æ‚ æ€»ç»“ ç»è¿‡ä»¥ä¸Šå¯¹ä¸‰ä¸ªæ‰“åŒ…å·¥å…·å¤šæ–¹é¢çš„ä½¿ç”¨å¯¹æ¯”ï¼Œç›¸ä¿¡å¤§å®¶éƒ½æœ‰äº†ä¸€ä¸ªåˆæ­¥çš„å°è±¡ï¼›æˆ‘ä»¬æ¥ç®€å•æ€»ç»“ä¸€ä¸‹ä¸‰ä¸ªæ‰“åŒ…å·¥å…·çš„ä½¿ç”¨ç¯å¢ƒï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ„å»ºä¸€ä¸ªç®€å•çš„å°å‹åº”ç”¨å¹¶è®©å®ƒå¿«é€Ÿè¿è¡Œèµ·æ¥ï¼Œå¯ä»¥ä½¿ç”¨Parcelï¼›å¦‚æœéœ€è¦æ„å»ºä¸€ä¸ªç±»åº“åªéœ€è¦å¯¼å…¥å¾ˆå°‘ç¬¬ä¸‰æ–¹åº“ï¼Œå¯ä»¥ä½¿ç”¨Rollupï¼›å¦‚æœéœ€è¦æ„å»ºä¸€ä¸ªå¤æ‚çš„åº”ç”¨ï¼Œéœ€è¦é›†æˆå¾ˆå¤šç¬¬ä¸‰æ–¹åº“ï¼Œå¹¶ä¸”éœ€è¦ä»£ç åˆ†æ‹†ã€HMRç­‰åŠŸèƒ½ï¼Œæ¨èä½¿ç”¨Webpackã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"}]},{"title":"æ·±å…¥å­¦ä¹ CommonJSå’ŒES6æ¨¡å—åŒ–è§„èŒƒ","date":"2021-01-08T04:00:00.000Z","path":"2021/01/08/CommonJS-ES6.html","text":"å‰ç«¯æ¨¡å—åŒ–æ˜¯å‰ç«¯å·¥ç¨‹åŒ–çš„ç¬¬ä¸€æ­¥ä¹Ÿæ˜¯é‡è¦çš„ä¸€æ­¥ï¼›ä¸ç®¡ä½ æ˜¯ä½¿ç”¨Reactï¼Œè¿˜æ˜¯Vueï¼Œäº¦æˆ–æ˜¯Nodejsï¼Œéƒ½ç¦»ä¸å¼€æ¨¡å—åŒ–ã€‚æ¨¡å—åŒ–çš„è§„èŒƒæœ‰å¾ˆå¤šï¼Œè€Œç°åœ¨ç”¨çš„æœ€å¤šçš„å°±æ˜¯CommonJSå’ŒES6è§„èŒƒï¼Œå› æ­¤æˆ‘ä»¬æ¥æ·±å…¥äº†è§£è¿™ä¸¤ä¸ªè§„èŒƒä»¥åŠä¸¤è€…ä¹‹é—´çš„åŒºåˆ«ã€‚ CommonJS CommonJSè§„èŒƒæ˜¯ä¸€ç§åŒæ­¥åŠ è½½æ¨¡å—çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“æ¨¡å—åŠ è½½å®Œæˆåï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚ç”±äºNodejsä¸»è¦ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ï¼Œè€Œæ¨¡å—æ–‡ä»¶ä¸€èˆ¬éƒ½å·²ç»å­˜åœ¨äºæœ¬åœ°ç¡¬ç›˜ï¼ŒåŠ è½½èµ·æ¥æ¯”è¾ƒå¿«ï¼Œå› æ­¤åŒæ­¥åŠ è½½æ¨¡å—çš„CommonJSè§„èŒƒå°±æ¯”è¾ƒé€‚ç”¨ã€‚ æ¦‚è¿° CommonJSè§„èŒƒè§„å®šï¼Œæ¯ä¸€ä¸ªJSæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œæœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼›åœ¨ä¸€ä¸ªæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡ã€å‡½æ•°ç­‰éƒ½æ˜¯ç§æœ‰å˜é‡ï¼Œå¯¹å…¶ä»–æ–‡ä»¶ä¸å¯è§ã€‚ 12345// number.jslet num = 1function add(x) &#123; return num + x&#125; åœ¨ä¸Šé¢çš„number.jsä¸­ï¼Œå˜é‡numå’Œå‡½æ•°addå°±æ˜¯å½“å‰æ–‡ä»¶ç§æœ‰çš„ï¼Œå…¶ä»–æ–‡ä»¶ä¸èƒ½è®¿é—®ã€‚åŒæ—¶CommonJSè§„å®šäº†ï¼Œæ¯ä¸ªæ¨¡å—å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªmoduleå˜é‡ï¼Œä»£è¡¨å½“å‰æ¨¡å—ï¼›è¿™ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„exportså±æ€§ï¼ˆå³module.exportsï¼‰æä¾›å¯¹å¤–å¯¼å‡ºæ¨¡å—çš„æ¥å£ã€‚ 1234567// number.jslet num = 1function add(x) &#123; return num + x&#125;module.exports.num = nummodule.exports.add = add è¿™æ ·æˆ‘ä»¬å®šä¹‰çš„ç§æœ‰å˜é‡å°±èƒ½æä¾›å¯¹å¤–è®¿é—®ï¼›åŠ è½½æŸä¸€ä¸ªæ¨¡å—ï¼Œå°±æ˜¯åŠ è½½è¿™ä¸ªæ¨¡å—çš„module.exportså±æ€§ã€‚ module ä¸Šé¢è¯´åˆ°ï¼Œmoduleå˜é‡ä»£è¡¨å½“å‰æ¨¡å—ï¼Œæˆ‘ä»¬æ¥æ‰“å°çœ‹ä¸€ä¸‹å®ƒé‡Œé¢æœ‰å“ªäº›ä¿¡æ¯ï¼š 123456789101112131415161718192021222324252627282930//temp.jsrequire(&#x27;./a.js&#x27;)console.log(module)Module &#123; id: &#x27;.&#x27;, path: &#x27;D:\\\\demo&#x27;, exports: &#123;&#125;, parent: null, filename: &#x27;D:\\\\demo\\\\temp.js&#x27;, loaded: false, children: [&#123; Module &#123; id: &#x27;D:\\\\demo\\\\a.js&#x27;, path: &#x27;D:\\\\demo&#x27;, exports: &#123;&#125;, parent: [Circular], filename: &#x27;D:\\\\demo\\\\a.js&#x27;, loaded: true, children: [], paths: [Array] &#125; &#125;], paths: [ &#x27;D:\\\\demo\\\\node_modules&#x27;, &#x27;D:\\\\projects\\\\mynodejs\\\\node_modules&#x27;, &#x27;D:\\\\projects\\\\node_modules&#x27;, &#x27;D:\\\\node_modules&#x27; ]&#125; æˆ‘ä»¬å‘ç°å®ƒæœ‰ä»¥ä¸‹å±æ€§ï¼š idï¼šæ¨¡å—çš„è¯†åˆ«ç¬¦ï¼Œé€šå¸¸æ˜¯å¸¦æœ‰ç»å¯¹è·¯å¾„çš„æ¨¡å—æ–‡ä»¶å filenameï¼šæ¨¡å—çš„æ–‡ä»¶åï¼Œå¸¦æœ‰ç»å¯¹è·¯å¾„ã€‚ loadedï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ¨¡å—æ˜¯å¦å·²ç»å®ŒæˆåŠ è½½ã€‚ parentï¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥æ¨¡å—çš„æ¨¡å—ã€‚ childrenï¼šå›ä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºè¯¥æ¨¡å—è¦ç”¨åˆ°çš„å…¶ä»–æ¨¡å—ã€‚ exportsï¼šæ¨¡å—å¯¹å¤–è¾“å‡ºçš„å¯¹è±¡ã€‚ pathï¼šæ¨¡å—çš„ç›®å½•åç§°ã€‚ pathsï¼šæ¨¡å—çš„æœç´¢è·¯å¾„ã€‚ å¦‚æœæˆ‘ä»¬é€šè¿‡å‘½ä»¤è¡Œè°ƒç”¨æŸä¸ªæ¨¡å—ï¼Œæ¯”å¦‚node temp.jsï¼Œé‚£ä¹ˆè¿™ä¸ªæ¨¡å—å°±æ˜¯é¡¶çº§æ¨¡å—ï¼Œå®ƒçš„module.parentå°±æ˜¯nullï¼›å¦‚æœæ˜¯åœ¨å…¶ä»–æ¨¡å—ä¸­è¢«è°ƒç”¨ï¼Œæ¯”å¦‚require(&#39;temp.js&#39;)ï¼Œé‚£ä¹ˆå®ƒçš„module.parentå°±æ˜¯è°ƒç”¨å®ƒçš„æ¨¡å—ã€‚ ä½†æ˜¯åœ¨æœ€æ–°çš„Nodejs 14.6ç‰ˆæœ¬ä¸­module.parentè¢«å¼ƒç”¨äº†ï¼Œå®˜æ–¹æ¨èä½¿ç”¨require.mainæˆ–è€…module.childrenä»£æ›¿ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¼ƒç”¨çš„åŸå› ï¼š module.parentå€¼ä¸ºé€šè¿‡requiredå¼•ç”¨çš„è¿™ä¸ªæ¨¡å—çš„å€¼ã€‚å¦‚æœä¸ºå½“å‰è¿è¡Œè¿›ç¨‹çš„å…¥å£ï¼Œå€¼ä¸ºnullã€‚å¦‚æœè¿™ä¸ªæ¨¡å—è¢«écommonJSæ ¼å¼å¼•å…¥ï¼Œå¦‚REPLï¼Œæˆ–è€…importå¯¼å…¥ï¼Œå€¼ä¸ºundefined exports ä¸ºäº†å¯¼å‡ºæ¨¡å—æ–¹ä¾¿ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡exportså˜é‡ï¼Œå®ƒæŒ‡å‘module.exportsï¼Œå› æ­¤è¿™å°±ç›¸å½“äºåœ¨æ¯ä¸ªæ¨¡å—éšæ€§çš„æ·»åŠ äº†è¿™æ ·ä¸€è¡Œä»£ç ï¼š 1var exports = module.exports; åœ¨å¯¹å¤–è¾“å‡ºæ¨¡å—æ—¶ï¼Œå¯ä»¥å‘exportså¯¹è±¡æ·»åŠ å±æ€§ã€‚ 1234567// number.jslet num = 1function add(x) &#123; return num + x&#125;exports.num = numexports.add = add éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½ç›´æ¥å°†exportså˜é‡æŒ‡å‘ä¸€ä¸ªå€¼ï¼Œå› ä¸ºè¿™æ ·ç­‰äºåˆ‡æ–­äº†exportså’Œmodule.exportsä¹‹é—´çš„è”ç³» 123456// a.jsexports = &#x27;a&#x27;// main.jsvar a = require(&#x27;./a&#x27;)console.log(a)// &#123;&#125; è™½ç„¶æˆ‘ä»¬é€šè¿‡exportså¯¼å‡ºäº†å­—ç¬¦ä¸²ï¼Œä½†æ˜¯ç”±äºåˆ‡æ–­äº†exports = module.exportsä¹‹é—´çš„è”ç³»ï¼Œè€Œmodule.exportså®é™…ä¸Šè¿˜æ˜¯æŒ‡å‘äº†ç©ºå¯¹è±¡ï¼Œæœ€ç»ˆå¯¼å‡ºçš„ç»“æœä¹Ÿæ˜¯ç©ºå¯¹è±¡ã€‚ require requireçš„åŸºæœ¬åŠŸèƒ½æ˜¯è¯»å–å¹¶æ‰§è¡ŒJSæ–‡ä»¶ï¼Œå¹¶è¿”å›æ¨¡å—å¯¼å‡ºçš„module.exportså¯¹è±¡ï¼š 123const number = require(&quot;./number.js&quot;)console.log(number.num)number.add() å¦‚æœæ¨¡å—å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¸èƒ½å®šä¹‰åœ¨exportså¯¹è±¡ä¸Šï¼š 1234567// number.jsmodule.exports = function () &#123; console.log(&quot;number&quot;)&#125;// main.jsrequire(&quot;./number.js&quot;)() requireé™¤äº†èƒ½å¤Ÿä½œä¸ºå‡½æ•°è°ƒç”¨åŠ è½½æ¨¡å—ä»¥å¤–ï¼Œå®ƒæœ¬èº«ä½œä¸ºä¸€ä¸ªå¯¹è±¡è¿˜æœ‰ä»¥ä¸‹å±æ€§ï¼š resolveï¼šéœ€è¦è§£æçš„æ¨¡å—è·¯å¾„ã€‚ mainï¼šModuleå¯¹è±¡ï¼Œè¡¨ç¤ºå½“è¿›ç¨‹å¯åŠ¨æ—¶åŠ è½½çš„å…¥å£è„šæœ¬ã€‚ extensionsï¼šå¦‚ä½•å¤„ç†æ–‡ä»¶æ‰©å±•åã€‚ cacheï¼šè¢«å¼•å…¥çš„æ¨¡å—å°†è¢«ç¼“å­˜åœ¨è¿™ä¸ªå¯¹è±¡ä¸­ã€‚ æ¨¡å—ç¼“å­˜ å½“æˆ‘ä»¬åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å¤šæ¬¡requireåŒä¸€ä¸ªæ¨¡å—æ—¶ï¼ŒCommonJSå¹¶ä¸ä¼šå¤šæ¬¡æ‰§è¡Œè¯¥æ¨¡å—æ–‡ä»¶ï¼›è€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡åŠ è½½æ—¶ï¼Œå°†æ¨¡å—ç¼“å­˜ï¼›ä»¥åå†åŠ è½½è¯¥æ¨¡å—æ—¶ï¼Œå°±ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–è¯¥æ¨¡å—ï¼š 1234567891011121314151617//number.jsconsole.log(&#x27;run number.js&#x27;)module.exports = &#123; num: 1&#125;//main.jslet number1 = require(&quot;./number&quot;);let number2 = require(&quot;./number&quot;);number2.num = 2let number3 = require(&quot;./number&quot;);console.log(number3)// run number.js// &#123; num: 2 &#125; æˆ‘ä»¬å¤šæ¬¡requireåŠ è½½numberæ¨¡å—ï¼Œä½†æ˜¯å†…éƒ¨åªæœ‰ä¸€æ¬¡æ‰“å°è¾“å‡ºï¼›ç¬¬äºŒæ¬¡åŠ è½½æ—¶è¿˜æ”¹å˜äº†å†…éƒ¨å˜é‡çš„å€¼ï¼Œç¬¬ä¸‰æ¬¡åŠ è½½æ—¶å†…éƒ¨å˜é‡çš„å€¼è¿˜æ˜¯ä¸Šä¸€æ¬¡çš„èµ‹å€¼ï¼Œè¿™å°±è¯æ˜äº†åé¢çš„requireè¯»å–çš„æ˜¯ç¼“å­˜ã€‚ åœ¨ä¸Šé¢requireä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å®ƒä¸‹é¢æ‰€æœ‰çš„å±æ€§ï¼Œå‘ç°æœ‰ä¸€ä¸ªcacheå±æ€§ï¼Œå°±æ˜¯ç”¨æ¥ç¼“å­˜æ¨¡å—çš„ï¼Œæˆ‘ä»¬å…ˆæ‰“å°çœ‹ä¸€ä¸‹ï¼š 1234&#123; &#x27;D:\\\\demo\\\\main.js&#x27;: Module &#123;&#125;, &#x27;D:\\\\demo\\\\number.js&#x27;: Module &#123;&#125;&#125; cacheæŒ‰ç…§è·¯å¾„çš„å½¢å¼å°†æ¨¡å—è¿›è¡Œç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡delete require.cache[modulePath]å°†ç¼“å­˜çš„æ¨¡å—åˆ é™¤ï¼›æˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç æ”¹å†™ä¸€ä¸‹ï¼š 123456789101112131415161718192021//number.jsconsole.log(&#x27;run number.js&#x27;)module.exports = &#123; num: 1&#125;//main.jslet number1 = require(&quot;./number&quot;);let number2 = require(&quot;./number&quot;);number2.num = 2//åˆ é™¤ç¼“å­˜delete require.cache[&#x27;D:\\\\demo\\\\number.js&#x27;]let number3 = require(&quot;./number&quot;);console.log(number3)// run number.js// run number.js// &#123; num: 1 &#125; å¾ˆæ˜æ˜¾çš„å‘ç°ï¼Œnumberæ¨¡å—è¿è¡Œäº†ä¸¤éï¼Œç¬¬äºŒæ¬¡åŠ è½½æ¨¡å—æˆ‘ä»¬åˆæŠŠæ¨¡å—çš„ç¼“å­˜ç»™æ¸…é™¤äº†ï¼Œå› æ­¤ç¬¬ä¸‰æ¬¡è¯»å–çš„numå€¼ä¹Ÿæ˜¯æœ€æ–°çš„ï¼›æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡Object.keyså¾ªç¯æ¥åˆ é™¤æ‰€æœ‰æ¨¡å—çš„ç¼“å­˜ï¼š 123Object.keys(require.cache).forEach(function(key) &#123; delete require.cache[key];&#125;) åŠ è½½æœºåˆ¶ CommonJSçš„åŠ è½½æœºåˆ¶æ˜¯ï¼Œæ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„å¤åˆ¶æ‹·è´ï¼›å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹çš„è¾“å‡ºï¼Œå±äºå¤åˆ¶ï¼Œå¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼Œå±äºæµ…æ‹·è´ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š 1234567891011121314151617181920// number.jslet num = 1function add() &#123; num++&#125;module.exports.num = nummodule.exports.add = add// main.jsvar number = require(&#x27;./number&#x27;)//1console.log(number.num)number.add()//1console.log(number.num)number.num = 3//3console.log(number.num) ç”±äºCommonJSæ˜¯å€¼çš„å¤åˆ¶ï¼Œä¸€æ—¦æ¨¡å—è¾“å‡ºäº†å€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ï¼›å› æ­¤main.jsä¸­çš„numberå˜é‡æœ¬èº«å’Œnumber.jsæ²¡æœ‰ä»»ä½•æŒ‡å‘å…³ç³»äº†ï¼Œè™½ç„¶æˆ‘ä»¬è°ƒç”¨æ¨¡å—å†…éƒ¨çš„addå‡½æ•°æ¥æ”¹å˜å€¼ï¼Œä½†ä¹Ÿå½±å“ä¸åˆ°è¿™ä¸ªå€¼äº†ï¼›åè€Œæˆ‘ä»¬åœ¨è¾“å‡ºåå¯ä»¥å¯¹è¿™ä¸ªå€¼è¿›è¡Œä»»æ„çš„ç¼–è¾‘ã€‚ é’ˆå¯¹requireè¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç†è§£ä¸ºå®ƒå°†æ¨¡å—æ”¾åˆ°è‡ªæ‰§è¡Œå‡½æ•°ä¸­æ‰§è¡Œï¼š 12345678910111213141516var number = (function()&#123; let num = 1 function add() &#123; num++ &#125; return &#123; num, add, &#125;&#125;)()//1console.log(number.num)number.add()//1console.log(number.num) è€Œå¯¹äºå¤æ‚æ•°æ®ç±»å‹ï¼Œç”±äºCommonJSè¿›è¡Œäº†æµ…æ‹·è´ï¼Œå› æ­¤å¦‚æœä¸¤ä¸ªè„šæœ¬åŒæ—¶å¼•ç”¨äº†åŒä¸€ä¸ªæ¨¡å—ï¼Œå¯¹è¯¥æ¨¡å—çš„ä¿®æ”¹ä¼šå½±å“å¦ä¸€ä¸ªæ¨¡å—ï¼š 12345678910111213141516171819202122// obj.jsvar obj = &#123; color: &#123; list: [&#x27;red&#x27;, &#x27;yellow&#x27;,&#x27;blue&#x27;] &#125;&#125;module.exports = obj//a.jsvar obj = require(&#x27;./obj&#x27;)obj.color.list.push(&#x27;green&#x27;)//&#123; color: &#123; list: [ &#x27;red&#x27;, &#x27;yellow&#x27;, &#x27;blue&#x27;, &#x27;green&#x27; ] &#125; &#125;console.log(obj)//b.jsvar obj = require(&#x27;./obj&#x27;)//&#123; color: &#123; list: [ &#x27;red&#x27;, &#x27;yellow&#x27;, &#x27;blue&#x27;, &#x27;green&#x27; ] &#125; &#125;console.log(obj)//main.jsrequire(&#x27;./a&#x27;)require(&#x27;./b&#x27;) ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬é€šè¿‡a.jsã€b.jsä¸¤ä¸ªè„šæœ¬åŒæ—¶å¼•ç”¨ä¸€ä¸ªæ¨¡å—è¿›è¡Œä¿®æ”¹å’Œè¯»å–ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ç”±äºç¼“å­˜ï¼Œå› æ­¤b.jsåŠ è½½æ—¶å…¶å®å·²ç»æ˜¯ä»ç¼“å­˜ä¸­è¯»å–çš„æ¨¡å—ã€‚ æˆ‘ä»¬ä¸Šé¢è¯´è¿‡requireåŠ è½½æ—¶ï¼Œä¼šæ‰§è¡Œæ¨¡å—ä¸­çš„ä»£ç ï¼Œç„¶åå°†æ¨¡å—çš„module.exportså±æ€§ä½œä¸ºè¿”å›å€¼è¿›è¡Œè¿”å›ï¼›æˆ‘ä»¬å‘ç°è¿™ä¸ªåŠ è½½è¿‡ç¨‹å‘ç”Ÿåœ¨ä»£ç çš„è¿è¡Œé˜¶æ®µï¼Œè€Œåœ¨æ¨¡å—è¢«æ‰§è¡Œå‰ï¼Œæ²¡æœ‰åŠæ³•ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œè¿™ç§åŠ è½½åŠ è½½æ–¹å¼ç§°ä¸ºè¿è¡Œæ—¶åŠ è½½ï¼›ç”±äºCommonJSè¿è¡Œæ—¶åŠ è½½æ¨¡å—ï¼Œæˆ‘ä»¬ç”šè‡³èƒ½å¤Ÿé€šè¿‡åˆ¤æ–­è¯­å¥ï¼ŒåŠ¨æ€çš„é€‰æ‹©å»åŠ è½½æŸä¸ªæ¨¡å—ï¼š 1234567891011let num = 10;if (num &gt; 2) &#123; var a = require(&quot;./a&quot;);&#125; else &#123; var b = require(&quot;./b&quot;);&#125;var moduleName = &#x27;number.js&#x27;var number = require(`./$&#123;moduleName&#125;`) ä½†ä¹Ÿæ­£æ˜¯ç”±äºè¿™ç§åŠ¨æ€åŠ è½½ï¼Œå¯¼è‡´æ²¡æœ‰åŠæ³•åœ¨ç¼–è¯‘æ—¶åšé™æ€ä¼˜åŒ–ã€‚ å¾ªç¯åŠ è½½ ç”±äºç¼“å­˜æœºåˆ¶çš„å­˜åœ¨ï¼ŒCommonJSçš„æ¨¡å—ä¹‹é—´å¯ä»¥è¿›è¡Œå¾ªç¯åŠ è½½ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå¼•èµ·æ­»å¾ªç¯ï¼š 1234567891011121314151617181920//a.jsexports.a = 1;var b = require(&quot;./b&quot;);console.log(b, &quot;a.js&quot;);exports.a = 2;//b.jsexports.b = 11;var a = require(&quot;./a&quot;);console.log(a, &quot;b.js&quot;);exports.b = 22;//main.jsconst a = require(&quot;./a&quot;);const b = require(&quot;./b&quot;);console.log(a, &quot;main a&quot;);console.log(b, &quot;main b&quot;); åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œé€»è¾‘çœ‹ä¼¼å¾ˆå¤æ‚ï¼Œa.jsåŠ è½½äº†b.jsï¼Œè€Œb.jsåŠ è½½äº†a.jsï¼›ä½†æ˜¯æˆ‘ä»¬é€ä¸€æ¥è¿›è¡Œåˆ†æï¼Œå°±ä¼šå‘ç°å…¶å®å¾ˆç®€å•ã€‚ åŠ è½½main.jsï¼Œå‘ç°åŠ è½½äº†aæ¨¡å—ï¼›è¯»å–å¹¶å­˜å…¥ç¼“å­˜ æ‰§è¡Œaæ¨¡å—ï¼Œå¯¼å‡ºäº†{a:1}ï¼›å‘ç°åŠ è½½äº†bæ¨¡å—å»ï¼Œè¯»å–å¹¶å­˜å…¥ç¼“å­˜ æ‰§è¡Œbæ¨¡å—ï¼Œå¯¼å‡ºäº†{b:11}ï¼›åˆåŠ è½½äº†aæ¨¡å—ï¼Œè¯»å–ç¼“å­˜ï¼Œæ­¤æ—¶aæ¨¡å—åªå¯¼å‡ºäº†{a:1} bæ¨¡å—æ‰§è¡Œå®Œæ¯•ï¼Œå¯¼å‡ºäº†{b:22} å›åˆ°aæ¨¡å—ï¼Œæ‰§è¡Œå®Œæ¯•ï¼Œå¯¼å‡º{a:2} å›åˆ°main.jsï¼ŒåˆåŠ è½½äº†bæ¨¡å—ï¼Œè¯»å–ç¼“å­˜ å› æ­¤æœ€åæ‰“å°çš„ç»“æœï¼š 1234&#123; a: 1 &#125; b.js &#123; b: 22 &#125; a.js &#123; a: 2 &#125; main a &#123; b: 22 &#125; main b å°¤å…¶éœ€è¦æ³¨æ„çš„æ˜¯ç¬¬ä¸€ä¸ªbæ¨¡å—ä¸­çš„consoleï¼Œç”±äºæ­¤æ—¶aæ¨¡å—è™½ç„¶å·²ç»åŠ è½½åœ¨ç¼“å­˜ä¸­ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰æ‰§è¡Œå®Œæˆï¼Œaæ¨¡å—åªå¯¼å‡ºäº†ç¬¬ä¸€ä¸ª&#123;a:1&#125;ã€‚ æˆ‘ä»¬å‘ç°å¾ªç¯åŠ è½½ï¼Œå±äºåŠ è½½æ—¶æ‰§è¡Œï¼›ä¸€æ—¦æŸä¸ªæ¨¡å—è¢«å¾ªç¯åŠ è½½ï¼Œå°±åªè¾“å‡ºå·²ç»æ‰§è¡Œçš„éƒ¨åˆ†ï¼Œè¿˜æœªæ‰§è¡Œçš„éƒ¨åˆ†ä¸ä¼šè¾“å‡ºã€‚ ES6 ä¸CommonJSè§„èŒƒåŠ¨æ€åŠ è½½ä¸åŒï¼ŒES6æ¨¡å—åŒ–çš„è®¾è®¡æ€æƒ³æ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—åœ¨ç¼–è¯‘æ—¶å°±èƒ½å¤Ÿç¡®å®šæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚æˆ‘ä»¬åœ¨Webpacké…ç½®å…¨è§£æï¼ˆä¼˜åŒ–ç¯‡ï¼‰å°±èŠåˆ°ï¼Œåˆ©ç”¨ES6æ¨¡å—é™æ€åŒ–åŠ è½½æ–¹æ¡ˆï¼Œå°±å¯ä»¥å®ç°Tree Shakingæ¥ä¼˜åŒ–ä»£ç ã€‚ export å’ŒCommonJSç›¸åŒï¼ŒES6è§„èŒƒä¹Ÿå®šä¹‰äº†ä¸€ä¸ªJSæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¨¡å—å†…éƒ¨çš„å˜é‡éƒ½æ˜¯ç§æœ‰åŒ–çš„ï¼Œå…¶ä»–æ¨¡å—æ— æ³•è®¿é—®ï¼›ä¸è¿‡ES6é€šè¿‡exportå…³é”®è¯æ¥å¯¼å‡ºå˜é‡ã€å‡½æ•°æˆ–è€…ç±»ï¼š 12345export let num = 1export function add(x) &#123; return num + x&#125;export class Person &#123;&#125; æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥å¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸¤ç§æ–¹å¼æ˜¯ç­‰ä»·çš„ï¼š 1234567let num = 1function add(x) &#123; return num + x&#125; class Person &#123;&#125;export &#123; num, add, Person &#125; åœ¨å¯¼å‡ºå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨aså…³é”®è¯é‡å‘½åå¯¼å‡ºçš„å˜é‡ï¼š 1234567891011let num = 1function add(x) &#123; return num + x&#125; export &#123; num as number, num as counter, add as addCount, add as addFunction&#125; é€šè¿‡asé‡åäº†ï¼Œæˆ‘ä»¬å°†å˜é‡è¿›è¡Œäº†å¤šæ¬¡çš„å¯¼å‡ºã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œexportè§„å®šï¼Œå¯¼å‡ºçš„æ˜¯å¯¹å¤–çš„æ¥å£ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”çš„å…³ç³»ã€‚ä¸‹é¢ä¸¤ç§æ˜¯é”™è¯¯çš„å†™æ³•ï¼š 123456// æŠ¥é”™ï¼Œæ˜¯ä¸ªå€¼ï¼Œæ²¡æœ‰æä¾›æ¥å£export 1;// æŠ¥é”™ï¼Œéœ€è¦æ”¾åœ¨å¤§æ‹¬å·ä¸­var m = 1;export m; import ä½¿ç”¨exportå¯¼å‡ºæ¨¡å—å¯¹å¤–æ¥å£åï¼Œå…¶ä»–æ¨¡å—æ–‡ä»¶å¯ä»¥é€šè¿‡importå‘½ä»¤åŠ è½½è¿™ä¸ªæ¥å£ï¼š 123456import &#123; number, counter, addCount, addFunction&#125; from &quot;./number.js&quot; ä¸Šé¢ä»£ç ä»number.jsæ¨¡å—ä¸­åŠ è½½äº†å˜é‡ï¼Œimportå‘½ä»¤æ¥å—ä¸€å¯¹å¤§æ‹¬å·ï¼Œé‡Œé¢æŒ‡å®šäº†ä»æ¨¡å—å¯¼å…¥å˜é‡åï¼Œå¯¼å…¥çš„å˜é‡åå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—å¯¹å¤–æ¥å£çš„å˜é‡åç§°ç›¸åŒã€‚ å’Œexportå‘½ä»¤ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨aså…³é”®å­—ï¼Œå°†å¯¼å…¥çš„å˜é‡åè¿›è¡Œé‡å‘½åï¼š 1234import &#123; number as num,&#125; from &quot;./number.js&quot;console.log(num) é™¤äº†åŠ è½½æ¨¡å—ä¸­æŒ‡å®šå˜é‡æ¥å£ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ•´ä½“åŠ è½½ï¼Œé€šè¿‡ï¼ˆ*ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„è¾“å‡ºå€¼éƒ½åŠ è½½åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šï¼š 1import * as number from &quot;./number.js&quot; importå‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œï¼š 1234console.log(num)import &#123; number as num,&#125; from &quot;./number.js&quot; ä¸Šé¢ä»£ç ä¸ä¼šæŠ¥é”™ï¼Œå› ä¸ºimportä¼šä¼˜å…ˆæ‰§è¡Œï¼›å’ŒCommonJSè§„èŒƒçš„requireä¸åŒçš„æ˜¯ï¼Œimportæ˜¯é™æ€æ‰§è¡Œï¼Œå› æ­¤importä¸èƒ½ä½äºå—çº§ä½œç”¨åŸŸå†…ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡ï¼Œè¿™äº›éƒ½æ˜¯åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½å¾—åˆ°ç»“æœçš„è¯­æ³•ç»“æ„ï¼š 12345678910111213//æŠ¥é”™let moduleName = &#x27;./num&#x27;import &#123; num, add &#125; from moduleName;//æŠ¥é”™//SyntaxError: &#x27;import&#x27; and &#x27;export&#x27; may only appear at the top level let num = 10;if (num &gt; 2) &#123; import a from &quot;./a&quot;;&#125; else &#123; import b from &quot;./b&quot;;&#125; export default åœ¨ä¸Šé¢ä»£ç ä¸­importå¯¼å…¥exportå¯¹å¤–æ¥å£æ—¶ï¼Œéƒ½éœ€è¦çŸ¥é“å¯¹å¤–æ¥å£çš„å‡†ç¡®åç§°ï¼Œæ‰èƒ½æ‹¿åˆ°å¯¹åº”çš„å€¼ï¼Œè¿™æ ·æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰æ—¶æˆ‘ä»¬åªæœ‰ä¸€ä¸ªæ¥å£éœ€è¦å¯¼å‡ºï¼›ä¸ºæ­¤ES6è§„èŒƒæä¾›äº†export defaultæ¥é»˜è®¤å¯¼å‡ºï¼š 1234567//add.jsexport default function (x, y) &#123; return x + y;&#125;;//main.jsimport add from &#x27;./add&#x27;console.log(add(2, 4)) ç”±äºexport defaultæ˜¯é»˜è®¤å¯¼å‡ºï¼Œå› æ­¤ï¼Œè¿™ä¸ªå‘½ä»¤åœ¨ä¸€ä¸ªæ¨¡å—ä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè€Œexportå¯¼å‡ºæ¥å£æ˜¯å¯ä»¥å¤šæ¬¡å¯¼å‡ºçš„ï¼š 123456789//æŠ¥é”™//SyntaxError: Only one default export allowed per module.//add.jsexport default function (x, y) &#123; return x + y;&#125;;export default function (x, y) &#123; return x + y + 1;&#125;; export defaultå…¶å®æ˜¯è¯­æ³•ç³–ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†åé¢çš„å€¼èµ‹å€¼ç»™defaultå˜é‡ï¼Œæ‰€ä»¥å¯ä»¥å°†ä¸€ä¸ªå€¼å†™åœ¨export defaultä¹‹åï¼›ä½†æ˜¯æ­£æ˜¯ç”±äºå®ƒæ˜¯è¾“å‡ºäº†ä¸€ä¸ªdefaultå˜é‡ï¼Œå› æ­¤å®ƒåé¢ä¸èƒ½å†è·Ÿå˜é‡å£°æ˜è¯­å¥ï¼š 123456789//æ­£ç¡®export default 10//æ­£ç¡®let num = 10export default num//æŠ¥é”™export default let num = 10 æ—¢ç„¶export defaultæœ¬è´¨ä¸Šæ˜¯å¯¼å‡ºäº†ä¸€ä¸ªdefaultå˜é‡çš„è¯­æ³•ç³–ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡exportæ¥è¿›è¡Œæ”¹å†™ï¼š 123//num.jslet num = 10;export &#123; num as default &#125;; ä¸Šé¢ä¸¤ä¸ªä»£ç æ˜¯ç­‰æ•ˆçš„ï¼›è€Œæˆ‘ä»¬åœ¨importå¯¼å…¥æ—¶ï¼Œä¹Ÿæ˜¯æŠŠdefaultå˜é‡é‡å‘½åä¸ºæˆ‘ä»¬æƒ³è¦çš„åå­—ï¼Œå› æ­¤ä¸‹é¢ä¸¤ä¸ªå¯¼å…¥ä»£ç ä¹Ÿæ˜¯ç­‰æ•ˆçš„ï¼š 123import num from &#x27;./num&#x27;//ç­‰æ•ˆimport &#123; default as num &#125; from &#x27;./num&#x27; åœ¨ä¸€ä¸ªæ¨¡å—ä¸­ï¼Œexportå¯ä»¥æœ‰å¤šä¸ªï¼Œexport defaultåªèƒ½æœ‰ä¸€ä¸ªï¼Œä½†æ˜¯ä»–ä»¬ä¸¤è€…å¯ä»¥åŒæ—¶å­˜åœ¨ï¼š 1234567891011//num.jsexport let num1 = 1export let num2 = 2let defaultNum = 3export default defaultNum//main.jsimport defaultNum, &#123; num1, num2&#125; from &#x27;./num&#x27; åŠ è½½æœºåˆ¶ åœ¨CommonJSä¸­æˆ‘ä»¬è¯´äº†ï¼Œæ¨¡å—çš„è¾“å‡ºæ˜¯å€¼çš„å¤åˆ¶æ‹·è´ï¼›è€ŒES6è¾“å‡ºçš„åˆ™æ˜¯å¯¹å¤–æ¥å£ï¼Œæˆ‘ä»¬å°†ä¸Šé¢CommonJSä¸­çš„ä»£ç è¿›è¡Œæ”¹å†™æ¥ç†è§£ä¸¤è€…çš„åŒºåˆ«ï¼š 1234567891011121314151617//number.jslet num = 1function add() &#123; num++&#125;export &#123; num, add &#125;//main.jsimport &#123; num, add &#125; from &#x27;./number.js&#x27;//1console.log(num)add()//2console.log(num) æˆ‘ä»¬å‘ç°å’ŒCommonJSä¸­è¿è¡Œå‡ºæ¥ç»“æœå®Œå…¨ä¸ä¸€æ ·ï¼Œè°ƒç”¨æ¨¡å—ä¸­çš„å‡½æ•°å½±å“äº†æ¨¡å—ä¸­çš„å˜é‡å€¼ï¼›æ­£æ˜¯ç”±äºES6æ¨¡å—åªæ˜¯è¾“å‡ºäº†ä¸€ä¸ªå¯¹å¤–çš„æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªæ¥å£ç†è§£ä¸ºä¸€ä¸ªå¼•ç”¨ï¼Œå®é™…çš„å€¼è¿˜æ˜¯åœ¨æ¨¡å—ä¸­ï¼›è€Œä¸”è¿™ä¸ªå¼•ç”¨è¿˜æ˜¯ä¸€ä¸ªåªè¯»å¼•ç”¨ï¼Œä¸è®ºæ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯å¤æ‚æ•°æ®ç±»å‹ï¼š 123456789101112//obj.jslet num = 1let list = [1,2]export &#123; num, list &#125;//main.jsimport &#123; num, list &#125; from &#x27;./obj.js&#x27;//Error: &quot;num&quot; is read-only.num = 3//Error: &quot;list&quot; is read-only.list = [3, 4] importä¹Ÿä¼šå¯¹å¯¼å…¥çš„æ¨¡å—è¿›è¡Œç¼“å­˜ï¼Œé‡å¤importå¯¼å…¥åŒä¸€ä¸ªæ¨¡å—ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œè¿™é‡Œå°±ä¸è¿›è¡Œä»£ç æ¼”ç¤ºã€‚ å¾ªç¯å¼•ç”¨ ES6æ¨¡å—ä¹‹é—´ä¹Ÿå­˜åœ¨ç€å¾ªç¯å¼•ç”¨ï¼Œæˆ‘ä»¬è¿˜æ˜¯å°†CommonJSä¸­çš„ä»£ç æ¥è¿›è¡Œæ”¹é€ çœ‹ä¸€ä¸‹ï¼š 123456789101112131415//a.jsexport let a1 = 1;import &#123; b1, b2 &#125; from &quot;./b&quot;;console.log(b1, b2, &quot;a.js&quot;);export let a2 = 11;//b.jsexport let b1 = 2;import &#123; a1, a2 &#125; from &quot;./a&quot;;console.log(a1, a2, &quot;b.js&quot;);export let b2 = 22;//main.jsimport &#123; a1, a2 &#125; from &quot;./a&quot;;import &#123; b1, b2 &#125; from &quot;./b&quot;; åˆšå¼€å§‹æˆ‘ä»¬è‚¯å®šä¼šæƒ³å½“ç„¶çš„ä»¥ä¸ºb.jsä¸­æ‰“å°çš„æ˜¯1å’Œundefinedï¼Œå› ä¸ºa.jsåªåŠ è½½äº†ç¬¬ä¸€ä¸ªexportï¼›ä½†æ˜¯æ‰“å°ç»“æœåï¼Œb.jsä¸­ä¸¤ä¸ªéƒ½æ˜¯undefinedï¼Œè¿™æ˜¯å› ä¸ºimportæœ‰æå‡æ•ˆæœã€‚ åŒºåˆ«æ€»ç»“ é€šè¿‡ä¸Šé¢æˆ‘ä»¬å¯¹CommonJSè§„èŒƒå’ŒES6è§„èŒƒçš„æ¯”è¾ƒï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ä¸¤è€…çš„åŒºåˆ«ï¼š CommonJSæ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ CommonJSæ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„å¤åˆ¶ï¼ŒES6æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ CommonJSåŠ è½½çš„æ˜¯æ•´ä¸ªæ¨¡å—ï¼Œå³å°†æ‰€æœ‰çš„æ–¹æ³•å…¨éƒ¨åŠ è½½è¿›æ¥ï¼ŒES6å¯ä»¥å•ç‹¬åŠ è½½å…¶ä¸­çš„æŸä¸ªæ–¹æ³• CommonJSä¸­thisæŒ‡å‘å½“å‰æ¨¡å—ï¼ŒES6ä¸­thisæŒ‡å‘undefined CommonJSé»˜è®¤éä¸¥æ ¼æ¨¡å¼ï¼ŒES6çš„æ¨¡å—è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"æ¨¡å—åŒ–","slug":"Modularization","permalink":"https://xieyufei.com/tags/Modularization/"}]},{"title":"æ·±å…¥å­¦ä¹ Object.definePropertyå’ŒProxy","date":"2020-12-16T08:00:00.000Z","path":"2020/12/16/DefineProperty-Proxy.html","text":"åœ¨æœ€æ–°å‘å¸ƒçš„Vue3.0ä¸­ï¼Œå°¤å¤§å¤§æœæ–­æ”¾å¼ƒäº†Object.definePropertyï¼ŒåŠ å…¥äº†Proxyæ¥å®ç°æ•°æ®åŠ«æŒï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿæœ¬æ–‡æ·±å…¥çš„å‰–æä¸€ä¸‹ä¸¤è€…çš„ç”¨æ³•ä»¥åŠä¼˜ç¼ºç‚¹ï¼Œç›¸ä¿¡çœ‹æ–‡æœ¬æ–‡ä½ ä¹Ÿä¼šç†è§£ä¸ºä»€ä¹ˆVueä¼šé€‰æ‹©Proxyã€‚ åˆè¯†defineProperty é¦–å…ˆæ¥çœ‹ä¸€ä¸‹MDNå¯¹Object.defineProperty()çš„ä¸€ä¸ªå®šä¹‰ï¼š Object.defineProperty()æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ã€‚ å®ƒçš„è¯­æ³•æ˜¯ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼š Object.defineProperty(obj, prop, descriptor) ä¸‰ä¸ªå‚æ•°çš„ä½œç”¨åˆ†åˆ«æ˜¯ï¼š objï¼šè¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚ propï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°æˆ– Symbol ã€‚ descriptorï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿™ä¸ªå‡½æ•°çš„ç®€å•ç”¨æ³•ï¼›æ—¢ç„¶å®ƒèƒ½å¤Ÿåœ¨å¯¹è±¡ä¸Šå®šä¹‰æ–°çš„å±æ€§ï¼Œé‚£æˆ‘ä»¬é€šè¿‡å®ƒæ¥ç»™å¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼š 12345var user = &#123;&#125;Object.defineProperty(user, &#x27;name&#x27;, &#123; value: &#x27;xyf&#x27;&#125;)console.log(user) è¿™é‡Œæè¿°ç¬¦ä¸­çš„valueå€¼å³æ˜¯éœ€è¦åœ¨å¯¹è±¡ä¸Šå®šä¹‰æˆ–è€…ä¿®æ”¹çš„å±æ€§å€¼ï¼ˆå¦‚æœå¯¹è±¡ä¸Šæœ¬èº«æœ‰è¯¥å±æ€§ï¼Œåˆ™ä¼šè¿›è¡Œä¿®æ”¹æ“ä½œï¼‰ï¼›é™¤äº†å­—ç¬¦ä¸²ï¼Œè¿˜å¯ä»¥æ˜¯JSçš„å…¶ä»–æ•°æ®ç±»å‹ï¼ˆæ•°å€¼ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚ å±æ€§æè¿°ç¬¦æ˜¯ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå°±æœ‰å¾ˆå¤šæ“ä½œçš„åœ°æ–¹äº†ï¼Œå®ƒé™¤äº†valueè¿™ä¸ªå±æ€§ï¼Œè¿˜æœ‰ä»¥ä¸‹ï¼š å±æ€§å ä½œç”¨ é»˜è®¤å€¼ configurable åªæœ‰è¯¥å±æ€§çš„configurableä¸ºtrueï¼Œè¯¥å±æ€§çš„æè¿°ç¬¦æ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼ŒåŒæ—¶è¯¥å±æ€§ä¹Ÿèƒ½ä»å¯¹åº”çš„å¯¹è±¡ä¸Šè¢«åˆ é™¤ã€‚ false enumerable åªæœ‰è¯¥å±æ€§çš„enumerableä¸ºtrueï¼Œè¯¥å±æ€§æ‰ä¼šå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚ false writable åªæœ‰è¯¥å±æ€§çš„enumerableä¸ºtrueï¼Œæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚ false value è¯¥å±æ€§å¯¹åº”çš„å€¼ undefined get å±æ€§çš„getterå‡½æ•°ï¼Œå½“è®¿é—®è¯¥å±æ€§æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚ undefined set å½“å±æ€§å€¼è¢«ä¿®æ”¹æ—¶ï¼Œä¼šè°ƒç”¨æ­¤å‡½æ•°ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œä¼šä¼ å…¥èµ‹å€¼æ—¶çš„ this å¯¹è±¡ã€‚ undefined configurable æˆ‘ä»¬ä¸€ä¸€æ¥çœ‹æ¯ä¸ªå±æ€§çš„ç”¨æ³•ï¼›é¦–å…ˆconfigurableç”¨æ¥æè¿°å±æ€§æ˜¯å¦å¯é…ç½®ï¼ˆæ”¹å˜å’Œåˆ é™¤ï¼‰ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼š å±æ€§ç¬¬ä¸€æ¬¡è®¾ç½®åæ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå±æ€§é…ç½®configurable:falseåè¿›è¡Œåˆ é™¤æ“ä½œä¼šå‘ç°å±æ€§ä»ç„¶å­˜åœ¨ã€‚ 12345678910var user = &#123;&#125;Object.defineProperty(user, &#x27;name&#x27;, &#123; value: &#x27;xyf&#x27;, configurable: false, writable: true, enumerable: true,&#125;)delete user.name è€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ï¼š 123456789101112&quot;use strict&quot;;var user = &#123;&#125;Object.defineProperty(user, &#x27;name&#x27;, &#123; value: &#x27;xyf&#x27;, configurable: false, writable: true, enumerable: true,&#125;)//TypeError: Cannot delete property &#x27;name&#x27; of #&lt;Object&gt;delete user.name configurable:falseé…ç½®åä¹Ÿä¸èƒ½é‡æ–°ä¿®æ”¹ï¼š 12345678910111213var user = &#123;&#125;Object.defineProperty(user, &#x27;name&#x27;, &#123; value: &#x27;xyf&#x27;, configurable: false, writable: true, enumerable: true,&#125;)//TypeError: Cannot redefine property: nameObject.defineProperty(user, &#x27;name&#x27;, &#123; value: &#x27;new&#x27;,&#125;) enumerable enumerableç”¨æ¥æè¿°å±æ€§æ˜¯å¦èƒ½å‡ºç°åœ¨for inæˆ–è€…Object.keys()çš„éå†ä¸­ï¼š 123456789101112131415161718192021var user = &#123; name: &quot;xyf&quot;, age: 0,&#125;;Object.defineProperty(user, &quot;gender&quot;, &#123; value: &quot;m&quot;, enumerable: true, configurable: false, writable: false,&#125;);Object.defineProperty(user, &quot;birth&quot;, &#123; value: &quot;2020&quot;, enumerable: false, configurable: false, writable: false,&#125;);for (let key in user) &#123; console.log(key, &quot;key&quot;);&#125;console.log(Object.keys(user)); å¾ˆæ˜æ˜¾ï¼Œenumerableä¸ºtrueçš„genderå°±ä¼šè¢«éå†åˆ°ï¼Œè€Œbirthåˆ™ä¸ä¼šã€‚ writable writableç”¨æ¥æè¿°å±æ€§çš„å€¼æ˜¯å¦å¯ä»¥è¢«é‡å†™ï¼Œå€¼ä¸ºfalseæ—¶å±æ€§åªèƒ½è¯»å–ï¼š 1234567891011var user = &#123;&#125;;Object.defineProperty(user, &quot;name&quot;, &#123; value: &quot;xyf&quot;, writable: false, enumerable: false, configurable: false,&#125;);user.name = &quot;new&quot;;console.log(user); åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ç»™nameå±æ€§å†æ¬¡èµ‹å€¼ä¼šé™é»˜å¤±è´¥ï¼Œä¸ä¼šæŠ›å‡ºé”™è¯¯ï¼›è€Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š 123456789101112&quot;use strict&quot;;var user = &#123;&#125;;Object.defineProperty(user, &quot;name&quot;, &#123; value: &quot;xyf&quot;, writable: false, enumerable: false, configurable: false,&#125;);//TypeError: Cannot assign to read only property &#x27;name&#x27; of object &#x27;#&lt;Object&gt;&#x27;user.name = &quot;new&quot;; get/set å½“éœ€è¦è®¾ç½®æˆ–è€…è·å–å¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¯ä»¥é€šè¿‡getter/setteræ–¹æ³•ï¼š 1234567891011121314151617var user = &#123;&#125;;var initName = &#x27;&#x27;Object.defineProperty(user, &quot;name&quot;, &#123; get: function()&#123; console.log(&#x27;get name&#x27;) return initName &#125;, set: function(val)&#123; console.log(&#x27;set name&#x27;) initName = val &#125;&#125;);// get nameconsole.log(user.name)// set nameuser.name = &#x27;new&#x27; å½“è·å–nameæ—¶å’Œèµ‹å€¼nameæ—¶ï¼Œéƒ½ä¼šåˆ†åˆ«è°ƒç”¨ä¸€æ¬¡getå’Œsetå‡½æ•°ï¼›çœ‹åˆ°è¿™é‡Œï¼Œå¾ˆå¤šåŒå­¦å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¦ç”¨ä¸€ä¸ªinitNameï¼Œè€Œä¸æ˜¯åœ¨getå’Œsetå‡½æ•°ä¸­ç›´æ¥return user.nameå’Œuser.name = valå‘¢ï¼Ÿ å¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨getå‡½æ•°ä¸­return user.nameçš„è¯ï¼Œè¿™é‡Œçš„user.nameåŒæ—¶ä¹Ÿä¼šè°ƒç”¨ä¸€æ¬¡getå‡½æ•°ï¼Œè¿™æ ·çš„è¯ä¼šé™·å…¥ä¸€ä¸ªæ­»å¾ªç¯ï¼›setå‡½æ•°ä¹Ÿæ˜¯åŒæ ·çš„é“ç†ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å˜é‡initNameæ¥é˜²æ­¢æ­»å¾ªç¯ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦ä»£ç†æ›´å¤šçš„å±æ€§ï¼Œä¸å¯èƒ½ç»™æ¯ä¸€ä¸ªå±æ€§å®šä¹‰ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„å˜é‡ï¼Œå¯ä»¥é€šè¿‡é—­åŒ…æ¥è§£å†³ æ³¨ï¼šgetå’Œsetå‡½æ•°ä¸æ˜¯å¿…é¡»æˆå¯¹å‡ºç°ï¼Œå¯ä»¥åªå‡ºç°ä¸€ä¸ªï¼›ä¸¤ä¸ªå‡½æ•°å¦‚æœä¸è®¾ç½®ï¼Œåˆ™é»˜è®¤å€¼ä¸ºundefinedã€‚ å°ç»“ åœ¨ä¸Šé¢è¡¨æ ¼ä¸­å¯ä»¥çœ‹åˆ°ï¼Œä¸Šè¿°çš„ä¸‰ç§æè¿°ç¬¦configurableã€enumerableå’Œwritableçš„é»˜è®¤å€¼éƒ½æ˜¯falseï¼Œå› æ­¤æˆ‘ä»¬ä¸€æ—¦ä½¿ç”¨Object.definePropertyç»™å¯¹è±¡æ·»åŠ å±æ€§ï¼Œå¦‚æœä¸è®¾ç½®å±æ€§çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆè¿™äº›å€¼éƒ½æ˜¯falseï¼š 123456789101112var user = &#123;&#125;;Object.defineProperty(user, &quot;name&quot;, &#123; value: &quot;xyf&quot;,&#125;);// ç­‰ä»·äºObject.defineProperty(user, &quot;name&quot;, &#123; value: &quot;xyf&quot;, configurable: false, enumerable: false, writable: false,&#125;); è€Œæˆ‘ä»¬é€šè¿‡ç‚¹è¿ç®—ç¬¦ç»™å±æ€§èµ‹å€¼æ—¶ï¼Œåˆ™é»˜è®¤ç»™ä¸‰ç§æè¿°ç¬¦éƒ½èµ‹å€¼trueï¼š 123456789101112var user = &#123;&#125;;user.name = &quot;xyf&quot;// ç­‰ä»·äºObject.defineProperty(user, &quot;name&quot;, &#123; value: &quot;xyf&quot;, configurable: true, enumerable: true, writable: true,&#125;); å±æ€§æè¿°ç¬¦åˆ†ç±» å±æ€§æè¿°ç¬¦ä¸»è¦æœ‰ä¸¤ç§å½¢å¼ï¼šæ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ï¼›æ•°æ®æè¿°ç¬¦ç‰¹æœ‰çš„ä¸¤ä¸ªå±æ€§ï¼švalueå’Œwritableï¼›å­˜å–æè¿°ç¬¦ç‰¹æœ‰çš„ä¸¤ä¸ªå±æ€§ï¼šgetå’Œsetï¼›ä¸¤ç§å½¢å¼çš„å±æ€§æè¿°ç¬¦ä¸èƒ½æ··åˆä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç¤ºèŒƒï¼š 123456789101112131415161718var user = &#123;&#125;;var initName = &#x27;&#x27;//TypeError: Invalid property descriptor. //Cannot both specify accessors and a value or writable attribute, #&lt;Object&gt;Object.defineProperty(user, &quot;name&quot;, &#123; value: &#x27;new&#x27;, writable: true, get: function()&#123; console.log(&#x27;get name&#x27;) return initName &#125;, set: function(val)&#123; console.log(&#x27;set name&#x27;) initName = val &#125;&#125;); æˆ‘ä»¬ç®€å•æƒ³ä¸€ä¸‹å°±èƒ½ç†è§£ä¸ºä»€ä¹ˆä¸¤ç§æè¿°ä¸èƒ½æ··åˆä½¿ç”¨ï¼›valueç”¨æ¥å®šä¹‰å±æ€§çš„å€¼ï¼Œè€Œgetå’ŒsetåŒæ ·ä¹Ÿæ˜¯å®šä¹‰å’Œä¿®æ”¹å±æ€§çš„å€¼ï¼Œä¸¤ç§æè¿°ç¬¦åœ¨åŠŸèƒ½ä¸Šæœ‰æ˜æ˜¾çš„ç›¸ä¼¼æ€§ã€‚ è™½ç„¶æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦ä¸èƒ½æ··ç€ç”¨ï¼Œä½†æ˜¯ä»–ä»¬å‡èƒ½åˆ†åˆ«å’Œconfigrableã€enumerableä¸€èµ·æ­é…ä½¿ç”¨ï¼Œä¸‹é¢è¡¨æ ¼è¡¨ç¤ºäº†ä¸¤ç§æè¿°ç¬¦å¯ä»¥åŒæ—¶æ‹¥æœ‰çš„å¥å€¼ï¼š configurable enumerable value writable get set æ•°æ®æè¿°ç¬¦ Yes Yes Yes Yes No No å­˜å–æè¿°ç¬¦ Yes Yes No No Yes Yes ç¼ºé™· é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè™½ç„¶Object.definePropertyèƒ½å¤ŸåŠ«æŒå¯¹è±¡çš„å±æ€§ï¼Œä½†æ˜¯éœ€è¦å¯¹å¯¹è±¡çš„æ¯ä¸€ä¸ªå±æ€§è¿›è¡Œéå†åŠ«æŒï¼›å¦‚æœå¯¹è±¡ä¸Šæœ‰æ–°å¢çš„å±æ€§ï¼Œåˆ™éœ€è¦å¯¹æ–°å¢çš„å±æ€§å†æ¬¡è¿›è¡ŒåŠ«æŒï¼›å¦‚æœå±æ€§æ˜¯å¯¹è±¡ï¼Œè¿˜éœ€è¦æ·±åº¦éå†ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆVueç»™å¯¹è±¡æ–°å¢å±æ€§éœ€è¦é€šè¿‡$setçš„åŸå› ï¼Œå…¶åŸç†ä¹Ÿæ˜¯é€šè¿‡Object.definePropertyå¯¹æ–°å¢çš„å±æ€§å†æ¬¡è¿›è¡ŒåŠ«æŒã€‚ Object.definePropertyé™¤äº†èƒ½å¤ŸåŠ«æŒå¯¹è±¡çš„å±æ€§ï¼Œè¿˜å¯ä»¥åŠ«æŒæ•°ç»„ï¼›è™½ç„¶æ•°ç»„æ²¡æœ‰å±æ€§ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥æŠŠæ•°ç»„çš„ç´¢å¼•çœ‹æˆæ˜¯å±æ€§ï¼š 12345678910111213141516171819var list = [1,2,3]list.map((elem, index) =&gt; &#123; Object.defineProperty(list, index, &#123; get: function () &#123; console.log(&quot;get index:&quot; + index); return elem; &#125;, set: function (val) &#123; console.log(&quot;set index:&quot; + index); elem = val; &#125; &#125;);&#125;);// set index:2list[2] = 6// get index:1console.log(list[1]) è™½ç„¶æˆ‘ä»¬ç›‘å¬åˆ°äº†æ•°ç»„ä¸­å…ƒç´ çš„å˜åŒ–ï¼Œä½†æ˜¯å’Œç›‘å¬å¯¹è±¡å±æ€§é¢ä¸´ç€åŒæ ·çš„é—®é¢˜ï¼Œå°±æ˜¯æ–°å¢çš„å…ƒç´ å¹¶ä¸ä¼šè§¦å‘ç›‘å¬äº‹ä»¶ï¼š 123456789101112131415161718var list = [1, 2, 3];list.map((elem, index) =&gt; &#123; Object.defineProperty(list, index, &#123; get: function () &#123; console.log(&quot;get index:&quot; + index); return elem; &#125;, set: function (val) &#123; console.log(&quot;set index:&quot; + index); elem = val; &#125; &#125;);&#125;);// æ²¡æœ‰è¾“å‡ºlist.push(4)list[3] = 5 ä¸ºæ­¤ï¼ŒVueçš„è§£å†³æ–¹æ¡ˆæ˜¯åŠ«æŒArray.propertyåŸå‹é“¾ä¸Šçš„7ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‡½æ•°ç®€å•è¿›è¡ŒåŠ«æŒï¼š 12345678910111213141516171819202122232425262728const arratMethods = [ &quot;push&quot;, &quot;pop&quot;, &quot;shift&quot;, &quot;unshift&quot;, &quot;splice&quot;, &quot;sort&quot;, &quot;reverse&quot;,];const arrayProto = Object.create(Array.prototype);arratMethods.forEach((method) =&gt; &#123; const origin = Array.prototype[method]; arrayProto[method] = function () &#123; console.log(&quot;run method&quot;, method); return origin.apply(this, arguments); &#125;;&#125;);const list = [];list.__proto__ = arrayProto;//run method pushlist.push(2);//run method shiftlist.shift(3); æˆ‘ä»¬åœ¨ä¸€æ–‡è¯»æ‡‚JSä¸­ç±»ã€åŸå‹å’Œç»§æ‰¿ä¸­è®²è¿‡ï¼š å®ä¾‹å¯¹è±¡èƒ½å¤Ÿè·å–åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³• æˆ‘ä»¬åœ¨æ•°ç»„ä¸Šè¿›è¡Œæ“ä½œçš„pushã€shiftç­‰å‡½æ•°éƒ½æ˜¯è°ƒç”¨çš„åŸå‹å¯¹è±¡ä¸Šçš„å‡½æ•°ï¼Œå› æ­¤æˆ‘ä»¬å°†æ”¹å†™åçš„åŸå‹å¯¹è±¡é‡æ–°ç»™ç»‘å®šåˆ°å®ä¾‹å¯¹è±¡ä¸Šçš„__proto__ï¼Œè¿™æ ·å°±èƒ½è¿›è¡ŒåŠ«æŒã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œç›´æ¥ä¿®æ”¹æ•°ç»„çš„lengthå±æ€§ä¹Ÿä¼šå¯¼è‡´Object.definePropertyçš„ç›‘å¬å¤±è´¥ï¼š 1234567891011121314151617181920var list = [];list.length = 10;list.map((elem, index) =&gt; &#123; Object.defineProperty(list, index, &#123; get: function () &#123; console.log(&quot;get index:&quot; + index); return elem; &#125;, set: function (val) &#123; console.log(&quot;set index:&quot; + index); elem = val; &#125;, &#125;);&#125;);list[5] = 4;// undefinedconsole.log(list[6]); é€šè¿‡ç»™lengthä¿®æ”¹ä¸º10ï¼Œæ•°ç»„ä¸­æœ‰10ä¸ªundefiedï¼Œè™½ç„¶æˆ‘ä»¬ç»™æ¯ä¸ªå…ƒç´ éƒ½åŠ«æŒäº†ï¼Œä½†æ˜¯æ²¡æœ‰è§¦å‘get/setå‡½æ•°ã€‚ æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹Object.definePropertyåœ¨åŠ«æŒå¯¹è±¡å’Œæ•°ç»„æ—¶çš„ç¼ºé™·ï¼š æ— æ³•æ£€æµ‹åˆ°å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤ æ— æ³•æ£€æµ‹æ•°ç»„å…ƒç´ çš„å˜åŒ–ï¼Œéœ€è¦è¿›è¡Œæ•°ç»„æ–¹æ³•çš„é‡å†™ æ— æ³•æ£€æµ‹æ•°ç»„çš„é•¿åº¦çš„ä¿®æ”¹ Proxy ç›¸è¾ƒäºObject.definePropertyåŠ«æŒæŸä¸ªå±æ€§ï¼ŒProxyåˆ™æ›´å½»åº•ï¼Œä¸åœ¨å±€é™æŸä¸ªå±æ€§ï¼Œè€Œæ˜¯ç›´æ¥å¯¹æ•´ä¸ªå¯¹è±¡è¿›è¡Œä»£ç†ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ES6æ–‡æ¡£å¯¹Proxyçš„æè¿°ï¼š Proxyå¯ä»¥ç†è§£æˆï¼Œåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚ é¦–å…ˆè¿˜æ˜¯æ¥çœ‹ä¸€ä¸‹Proxyçš„è¯­æ³•ï¼š 1var proxy = new Proxy(target, handler); Proxyæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œé€šè¿‡new Proxyç”Ÿæˆæ‹¦æˆªçš„å®ä¾‹å¯¹è±¡ï¼Œè®©å¤–ç•Œè¿›è¡Œè®¿é—®ï¼›æ„é€ å‡½æ•°ä¸­çš„targetå°±æ˜¯æˆ‘ä»¬éœ€è¦ä»£ç†çš„ç›®æ ‡å¯¹è±¡ï¼Œå¯ä»¥æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ï¼›handlerå’ŒObject.definePropertyä¸­çš„descriptoræè¿°ç¬¦æœ‰äº›ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥å®šåˆ¶ä»£ç†è§„åˆ™ã€‚ 123456789101112131415161718192021222324252627var target = &#123;&#125;var proxyObj = new Proxy( target, &#123; get: function (target, propKey, receiver) &#123; console.log(`getting $&#123;propKey&#125;!`); return Reflect.get(target, propKey, receiver); &#125;, set: function (target, propKey, value, receiver) &#123; console.log(`setting $&#123;propKey&#125;!`); return Reflect.set(target, propKey, value, receiver); &#125;, deleteProperty: function (target, propKey) &#123; console.log(`delete $&#123;propKey&#125;!`); delete target[propKey]; return true; &#125; &#125;);//setting count!proxyObj.count = 1;//getting count!//1console.log(proxyObj.count)//delete count!delete proxyObj.count å¯ä»¥çœ‹åˆ°Proxyç›´æ¥ä»£ç†äº†targetæ•´ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿”å›äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œé€šè¿‡ç›‘å¬ä»£ç†å¯¹è±¡ä¸Šå±æ€§çš„å˜åŒ–æ¥è·å–ç›®æ ‡å¯¹è±¡å±æ€§çš„å˜åŒ–ï¼›è€Œä¸”æˆ‘ä»¬å‘ç°Proxyä¸ä»…èƒ½å¤Ÿç›‘å¬åˆ°å±æ€§çš„å¢åŠ ï¼Œè¿˜èƒ½ç›‘å¬å±æ€§çš„åˆ é™¤ï¼Œæ¯”Object.definePropertyçš„åŠŸèƒ½æ›´ä¸ºå¼ºå¤§ã€‚ é™¤äº†å¯¹è±¡ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹Proxyé¢å¯¹æ•°ç»„æ—¶çš„è¡¨ç°å¦‚ä½•ï¼š 123456789101112131415161718192021var list = [1,2]var proxyObj = new Proxy(list, &#123; get: function (target, propKey, receiver) &#123; console.log(`getting $&#123;propKey&#125;!`); return Reflect.get(target, propKey, receiver); &#125;, set: function (target, propKey, value, receiver) &#123; console.log(`setting $&#123;propKey&#125;:$&#123;value&#125;!`); return Reflect.set(target, propKey, value, receiver); &#125;,&#125;)//setting 1:3!proxyObj[1] = 3//getting push!//getting length!//setting 2:4!//setting length:3!proxyObj.push(4)//setting length:5!proxyObj.length = 5 ä¸ç®¡æ˜¯æ•°ç»„ä¸‹æ ‡æˆ–è€…æ•°ç»„é•¿åº¦çš„å˜åŒ–ï¼Œè¿˜æ˜¯é€šè¿‡å‡½æ•°è°ƒç”¨ï¼ŒProxyéƒ½èƒ½å¾ˆå¥½çš„ç›‘å¬åˆ°å˜åŒ–ï¼›è€Œä¸”é™¤äº†æˆ‘ä»¬å¸¸ç”¨çš„getã€setï¼ŒProxyæ›´æ˜¯æ”¯æŒ13ç§æ‹¦æˆªæ“ä½œã€‚ å¯ä»¥çœ‹åˆ°Proxyç›¸è¾ƒäºObject.definePropertyåœ¨è¯­æ³•å’ŒåŠŸèƒ½ä¸Šéƒ½æœ‰ç€æ˜æ˜¾çš„ä¼˜åŠ¿ï¼›è€Œä¸”Object.definePropertyå­˜åœ¨çš„ç¼ºé™·ï¼ŒProxyä¹Ÿéƒ½å¾ˆå¥½åœ°è§£å†³äº†ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"}]},{"title":"ä¸€æ–‡å½»åº•è¯»æ‡‚Babel","date":"2020-11-18T04:00:00.000Z","path":"2020/11/18/Babel-Practice.html","text":"åœ¨æˆ‘ä»¬å¹³æ—¶å†™ä»£ç çš„è¿‡ç¨‹ä¸­å¯èƒ½æ²¡æœ‰æ„Ÿè§‰Babelçš„å­˜åœ¨ï¼Œä½†å…¶å®åªè¦æˆ‘ä»¬å†™JSä»£ç ï¼ŒBabelå·²ç»æ— å¤„ä¸åœ¨ã€æ— æ—¶ä¸åˆ»çš„åœ¨å½±å“ç€æˆ‘ä»¬çš„ä»£ç ï¼›åœ¨WebpackåŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ç®€å•çš„ä»‹ç»Babelçš„å®‰è£…ï¼Œä¹ŸçŸ¥é“äº†å®ƒèƒ½å¤Ÿå°†é«˜ç‰ˆæœ¬çš„ES6è½¬ä¸ºä½ç‰ˆæœ¬çš„ES5ä»£ç ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°±å¯¹Babelçš„é…ç½®ä»¥åŠä½¿ç”¨åšä¸€ä¸ªæ·±å…¥çš„å­¦ä¹ å’Œæ€»ç»“ã€‚ Babelæ˜¯ä»€ä¹ˆ Babelå®˜ç½‘å¯¹Babelçš„å®šä¹‰å°±æ˜¯ï¼š Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ã€‚ ç”¨é€šä¿—çš„è¯è§£é‡Šå°±æ˜¯å®ƒä¸»è¦ç”¨äºå°†é«˜ç‰ˆæœ¬çš„JavaScriptä»£ç è½¬ä¸ºå‘åå…¼å®¹çš„JSä»£ç ï¼Œä»è€Œèƒ½è®©æˆ‘ä»¬çš„ä»£ç è¿è¡Œåœ¨æ›´ä½ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–è€…å…¶ä»–çš„ç¯å¢ƒä¸­ã€‚ æ¯”å¦‚æˆ‘ä»¬åœ¨ä»£ç ä¸­ä½¿ç”¨äº†ES6ç®­å¤´å‡½æ•°ï¼š 1var fn = (num) =&gt; num + 2; ä½†æˆ‘ä»¬å¦‚æœç”¨IE11æµè§ˆå™¨ï¼ˆé¬¼çŸ¥é“ç”¨æˆ·ä¼šç”¨ä»€ä¹ˆæµè§ˆå™¨æ¥çœ‹ï¼‰è¿è¡Œçš„è¯ä¼šå‡ºç°æŠ¥é”™ï¼›ä½†æ˜¯ç»è¿‡Babelç¼–è¯‘ä¹‹åçš„ä»£ç å°±å¯ä»¥è¿è¡Œåœ¨IE11ä»¥åŠæ›´ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­äº†ï¼š 123var fn = function fn(num) &#123; return num + 2;&#125; Babelå°±æ˜¯åšäº†è¿™æ ·çš„ç¼–è¯‘è½¬æ¢å·¥ä½œï¼Œæ¥è®©æˆ‘ä»¬ä¸ç”¨è€ƒè™‘æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ï¼Œåªè¦ä¸“å¿ƒäºä»£ç çš„ç¼–å†™å·¥ä½œã€‚ Babelå†å² Babelçš„å‰èº«æ˜¯ä»6to5è¿™ä¸ªåº“å‘å±•è€Œæ¥ï¼Œ6to5çš„ä½œè€…æ˜¯Facebookçš„æ¾³å¤§åˆ©äºšå·¥ç¨‹å¸ˆSebastian McKenzieåœ¨2014å¹´å‘å¸ƒçš„ï¼›ä»å®ƒçš„åå­—æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œä¸»è¦çš„åŠŸèƒ½å°±æ˜¯å°†ES6è½¬æˆES5ï¼Œæˆ‘ä»¬å¦‚ä»Šä¹Ÿè¿˜èƒ½åœ¨npmå®˜ç½‘çœ‹åˆ°è¿™ä¸ªåŒ…ï¼Œä¸è¿‡ä½œè€…æç¤ºå·²ç»è¿ç§»åˆ°Babeläº†ï¼š åœ¨2015å¹´1æœˆä»½ï¼Œ6to5å’ŒEsnextçš„å›¢é˜Ÿå†³å®šä¸€èµ·å¼€å‘6to5ï¼Œå¹¶ä¸”æ”¹åä¸ºBabelï¼Œè§£æå¼•æ“æ”¹åä¸ºBabylon Babelå’ŒBabylonå«ä¹‰ Babylonçš„ç¿»è¯‘æ˜¯å·´æ¯”ä¼¦ï¼Œæ„æŒ‡å·´æ¯”ä¼¦æ–‡æ˜ Babelçš„ç¿»è¯‘æ˜¯å·´åˆ«å¡”ï¼Œåˆåé€šå¤©å¡”ï¼›å½“æ—¶åœ°ä¸Šçš„äººä»¬éƒ½è¯´åŒä¸€ç§è¯­è¨€ï¼Œå½“äººä»¬ç¦»å¼€ä¸œæ–¹ä¹‹åï¼Œä»–ä»¬æ¥åˆ°äº†ç¤ºæ‹¿ä¹‹åœ°ã€‚åœ¨é‚£é‡Œï¼Œäººä»¬æƒ³æ–¹è®¾æ³•çƒ§ç –å¥½è®©ä»–ä»¬èƒ½å¤Ÿé€ å‡ºä¸€åº§åŸå’Œä¸€åº§é«˜è€¸å…¥äº‘çš„å¡”æ¥ä¼ æ’­è‡ªå·±çš„åå£°ï¼Œä»¥å…ä»–ä»¬åˆ†æ•£åˆ°ä¸–ç•Œå„åœ°ã€‚ä¸Šå¸æ¥åˆ°äººé—´åçœ‹åˆ°äº†è¿™åº§åŸå’Œè¿™åº§å¡”ï¼Œè¯´ä¸€ç¾¤åªè¯´ä¸€ç§è¯­è¨€çš„äººä»¥åä¾¿æ²¡æœ‰ä»–ä»¬åšä¸æˆçš„äº‹äº†ï¼›äºæ˜¯ä¸Šå¸å°†ä»–ä»¬çš„è¯­è¨€æ‰“ä¹±ï¼Œè¿™æ ·ä»–ä»¬å°±ä¸èƒ½å¬æ‡‚å¯¹æ–¹è¯´ä»€ä¹ˆäº†ï¼Œè¿˜æŠŠä»–ä»¬åˆ†æ•£åˆ°äº†ä¸–ç•Œå„åœ°ï¼Œè¿™åº§å¡”ä¹Ÿåœæ­¢äº†ä¿®å»ºï¼Œè¿™åº§å¡”å°±è¢«ç§°ä¸ºâ€œå·´åˆ«å¡”â€ã€‚ Babelç‰ˆæœ¬åŠåŒºåˆ« 2015-02-15ï¼Œ6to5é‡å‘½åä¸ºbabel 2015-03-31ï¼Œbabel 5.0å‘å¸ƒ 2015-10-30ï¼Œbabel 6.0å‘å¸ƒ 2018-08-27ï¼Œbabel 7.0å‘å¸ƒ babel5åŠä¹‹å‰æ˜¯ä¸€ä¸ªåŒ…å«CLIå·¥å…·+ç¼–è¯‘å™¨+è½¬æ¢å™¨çš„é›†åˆå·¥å…·åŒ…ï¼›babel6ä¹‹åè¿›è¡Œäº†æ‹†åˆ†ï¼Œé›†åˆåŒ…è¢«åˆ†æˆå¤šä¸ªåŒ…ï¼š babel-cliï¼Œå…¶ä¸­åŒ…å«babelå‘½ä»¤è¡Œç•Œé¢ babel-coreï¼ŒåŒ…æ‹¬äº†Nodeæœ‰å…³çš„APIå’Œrequireé’©å­ babel-polyfillï¼Œå¯ä»¥å»ºç«‹ä¸€ä¸ªå®Œæ•´çš„ES2015ç¯å¢ƒ babel6é»˜è®¤æƒ…å†µä¸‹ä¸æºå¸¦ä»»ä½•è½¬æ¢å™¨ï¼Œéœ€è¦è‡ªè¡Œå®‰è£…æ‰€éœ€çš„æ’ä»¶å’Œè½¬æ¢å™¨ï¼Œé€šè¿‡babel-xxxæ¥å®‰è£…å¯¹åº”çš„å·¥å…·åŒ…ã€‚ è€ŒBabel7ç”¨äº†npmçš„private scopeï¼ŒæŠŠæ‰€æœ‰çš„åŒ…éƒ½æŒ‚è½½@babelä¸‹ï¼Œé€šè¿‡@babel/xxxæ¥å®‰è£…ï¼Œä¸ç”¨åœ¨node_modulesä¸‹çœ‹åˆ°ä¸€å †çš„babel-xxxåŒ…ã€‚ æœ¬æ–‡ä¸»è¦ä»¥Babel7ä½œä¸ºå¼€å‘å·¥å…·ã€‚ @babel/coreå’Œ@babel/cli @babel/coreæˆ‘ä»¬åœ¨å¾ˆå¤šåœ°æ–¹éƒ½çœ‹åˆ°ï¼Œå®ƒæ˜¯Babelè¿›è¡Œè½¬ç çš„æ ¸å¿ƒä¾èµ–åŒ…ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„babel-cliå’Œbabel-nodeéƒ½ä¾èµ–äºå®ƒï¼Œæˆ‘ä»¬é€šè¿‡ä¾‹å­æ¥çœ‹ä¸€ä¸‹å®ƒæ˜¯å¦‚ä½•æ¥è¿›è¡Œè§£æï¼ˆç›¸å…³ä»£ç åœ¨demo0ï¼‰ï¼š 1234567891011121314151617181920var babelCore = require(&quot;@babel/core&quot;);var sourceCode = `let fn = (num) =&gt; num + 2`;var options = &#123; //æ˜¯å¦ç”Ÿæˆè§£æçš„ä»£ç  code: true, //æ˜¯å¦ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ ast: true, //æ˜¯å¦ç”ŸæˆsourceMap sourceMaps: true, plugins: [], presets: [],&#125;;babelCore.transform(sourceCode, options, function (err, result) &#123; console.log(sourceCode); console.log(result.code); console.log(result.map); console.log(result.ast);&#125;); å¯ä»¥å‘ç°åŸæ¥çš„es6ç®­å¤´å‡½æ•°åœ¨ç»“æœä¸­å‡ ä¹åŸå°ä¸åŠ¨çš„è¿”å›å‡ºæ¥äº†ï¼›Babelçš„è¿è¡Œæ–¹å¼æ€»å…±å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼šè§£æï¼ˆparsingï¼‰ã€è½¬æ¢ï¼ˆtransformingï¼‰å’Œç”Ÿæˆï¼ˆgeneratingï¼‰ï¼›è´Ÿè´£è§£æé˜¶æ®µçš„æ’ä»¶æ˜¯@babel/parserï¼Œå…¶ä½œç”¨å°±æ˜¯å°†æºç è§£ææˆASTï¼›è€Œè´Ÿè´£ç”Ÿæˆé˜¶æ®µçš„æ’ä»¶æ˜¯@babel/generatorï¼Œå…¶ä½œç”¨å°±æ˜¯å°†è½¬å¥½å¥½çš„ASTé‡æ–°ç”Ÿæˆä»£ç ã€‚ è€Œ@babel/coreæœ¬èº«ä¸å…·å¤‡è½¬æ¢å¤„ç†çš„åŠŸèƒ½ï¼Œå®ƒæŠŠè½¬æ¢çš„åŠŸèƒ½æ‹†åˆ†åˆ°ä¸€ä¸ªä¸ªæ’ä»¶ï¼ˆpluginsï¼‰ä¸­ï¼›å› æ­¤å½“æˆ‘ä»¬ä¸æ·»åŠ ä»»ä½•æ’ä»¶çš„æ—¶å€™ï¼Œè¾“å…¥è¾“å‡ºä»£ç æ˜¯ç›¸åŒçš„ã€‚ åœ¨@babel/coreè½¬æ¢æ—¶è¿˜æœ‰å‡ ä¸ªå‰¯äº§ç‰©ï¼šcodeã€mastå’Œmapï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡optionsé…ç½®ï¼Œæ ¹æ®éœ€è¦å¯¹è¿™å‡ ä¸ªå‰¯äº§ç‰©è¿›è¡Œé€‰æ‹©æ€§çš„è¾“å‡ºã€‚é™¤äº†transformè¿™ä¸ªè½¬æ¢æ–¹æ³•ï¼Œè¿˜æœ‰transformSyncã€transformAsyncå’ŒtransformFileSyncç­‰åŒæ­¥å¼‚æ­¥APIï¼Œå¯ä»¥åœ¨babelå®˜ç½‘æ‰¾åˆ°ã€‚ @babel/cliæ˜¯Babelè‡ªå¸¦äº†ä¸€ä¸ªå†…ç½®çš„CLIå‘½ä»¤è¡Œå·¥å…·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥ç¼–è¯‘æ–‡ä»¶ï¼›å®ƒæœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œå¯ä»¥é€šè¿‡å…¨å±€å®‰è£…æˆ–è€…æœ¬åœ°å®‰è£…è°ƒç”¨ï¼Œé€‰ç”¨ä¸€ç§å³å¯ï¼Œæ¨èåœ¨é¡¹ç›®æœ¬åœ°å®‰è£…ã€‚ 123456//å…¨å±€å®‰è£…è°ƒç”¨npm install --g @babel/clibabel index.js -o output.js//æœ¬åœ°å®‰è£…è°ƒç”¨npm install --save-dev @babel/clinpx babel index.js -o output.js @babel/cliè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å‚æ•°ï¼š å‘½ä»¤å‚æ•° ç¼©å†™ ä½œç”¨ ç¤ºä¾‹ â€“out-file -o è¾“å‡ºæ–‡ä»¶åç§° babel a.js -o b.js â€“watch -w å®æ—¶ç›‘æ§è¾“å‡º babel a.js -o b.js -w â€“source-maps -s è¾“å‡ºmapæ–‡ä»¶ babel a.js -o b.js -s â€“source-maps inline -s inline è¡Œå†…source map babel a.js -o b.js -s inline â€“out-dir -d ç¼–è¯‘æ–‡ä»¶å¤¹ babel src -d dist â€“ignore æ—  å¿½ç•¥æŸäº›æ–‡ä»¶ babel src -d dist â€“ignore src/**/*.spec.js â€“copy-files æ—  å¤åˆ¶ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ babel src -d dist â€“copy-files â€“plugins æ—  æŒ‡æ˜ä½¿ç”¨æ’ä»¶ babel a.js -o b.js â€“plugins @babel/plugin-transform-arrow-functions â€“presets æ—  æŒ‡æ˜ä½¿ç”¨é¢„è®¾ babel src -d dist â€“presets @babel/preset-env @babel/cliå‘½ä»¤è¡Œçš„å…·ä½“ç”¨æ³•åœ¨demo1 é…ç½®æ–‡ä»¶ æˆ‘ä»¬è™½ç„¶å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­é…ç½®å„ç§æ’ä»¶ï¼ˆpluginsï¼‰æˆ–è€…é¢„è®¾ï¼ˆpresetsï¼Œä¹Ÿå°±æ˜¯ä¸€ç»„æ’ä»¶ï¼‰ï¼Œä½†æ˜¯è¿™æ ·å¹¶ä¸åˆ©äºåæœŸçš„æŸ¥çœ‹æˆ–è€…ç»´æŠ¤ï¼Œè€Œä¸”å¤§å¤šæ—¶å€™babeléƒ½æ˜¯ç»“åˆwebpackæˆ–è€…gulpç­‰æ‰“åŒ…å·¥å…·å¼€å‘ï¼Œä¸ä¼šç›´æ¥é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼ï¼›å› æ­¤Babelæ¨èé€šè¿‡é…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥è¿›è¡Œç®¡ç†ã€‚ Babelçš„é…ç½®æ–‡ä»¶ä¸»è¦æœ‰.babelrcã€.babelrc.jsã€babel.config.jså’Œpackage.jsonï¼Œä»–ä»¬çš„é…ç½®é€‰é¡¹éƒ½æ˜¯ç›¸åŒçš„ï¼Œä½œç”¨ä¹Ÿæ˜¯ä¸€æ ·ï¼Œä¸»è¦åŒºåˆ«åœ¨äºæ ¼å¼è¯­æ³•çš„ä¸åŒï¼Œå› æ­¤æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åªéœ€è¦é€‰æ‹©å…¶ä¸­ä¸€ç§å³å¯ã€‚ å¯¹äº.babelrcï¼Œå®ƒçš„é…ç½®ä¸»è¦æ˜¯JSONæ ¼å¼çš„ï¼Œåƒè¿™æ ·ï¼š 1234&#123; &quot;presets&quot;: [...], &quot;plugins&quot;: [...]&#125; è€Œ.babelrc.jså’Œbabel.config.jsåŒæ ·éƒ½æ˜¯JSè¯­æ³•ï¼Œé€šè¿‡module.exportsè¾“å‡ºé…ç½®ï¼š 123456789101112module.exports = function (api) &#123; api.cache(true); const presets = [ ... ]; const plugins = [ ... ]; if (process.env[&quot;ENV&quot;] === &quot;prod&quot;) &#123; plugins.push(...); &#125; return &#123; presets, plugins &#125;;&#125; æˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®ç¯å¢ƒæ¥è¿›è¡ŒåŠ¨æ€çš„é…ç½®ã€‚è€Œåœ¨package.jsonä¸­ï¼Œéœ€è¦å¢åŠ babelçš„å±æ€§ï¼š 12345678&#123; &quot;name&quot;: &quot;demo&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;babel&quot;: &#123; &quot;presets&quot;: [ ... ], &quot;plugins&quot;: [ ... ], &#125;&#125; æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä¸€äº›æ’ä»¶æˆ–è€…é¢„è®¾ï¼Œæ¥æ‰©å±•@babel/coreçš„è½¬æ¢åŠŸèƒ½ï¼›åªéœ€è¦å°†å¯¹åº”çš„æ’ä»¶æˆ–é¢„è®¾åå­—åŠ å…¥æ•°ç»„å³å¯ï¼›æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ES6ç®­å¤´å‡½æ•°ï¼Œå°±æ˜¯é€šè¿‡@babel/plugin-transform-arrow-functionsè¿™ä¸ªæ’ä»¶æ¥è½¬æ¢ï¼š 1234//.babelrc&#123; &quot;plugins&quot;: [&quot;@babel/plugin-transform-arrow-functions&quot;]&#125; ä½†æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æ’ä»¶å’Œé¢„è®¾è®¾ç½®å‚æ•°ï¼Œå°±ä¸èƒ½ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²çš„å½¢å¼äº†ï¼›è€Œåº”å†åŒ…è£¹ä¸€å±‚æ•°ç»„ï¼Œæ•°ç»„çš„ç¬¬ä¸€é¡¹æ˜¯åç§°ï¼Œç¬¬äºŒé¡¹æ˜¯è®¾ç½®çš„å‚æ•°å¯¹è±¡ï¼š 123456789//.babelrc&#123; &quot;plugins&quot;: [ [ &quot;@babel/plugin-transform-arrow-functions&quot;, &#123; &quot;spec&quot;: true &#125; ] ]&#125; è¿™æ ·æˆ‘ä»¬çš„ç®­å¤´å‡½æ•°å°±èƒ½æ­£å¸¸è½¬æ¢äº†ï¼Œç›¸å…³ä»£ç åœ¨demo2 Babelæ’ä»¶å’Œé¢„è®¾ Babelçš„æ’ä»¶å¤§è‡´å¯ä»¥åˆ†ä¸ºè¯­æ³•æ’ä»¶å’Œè½¬æ¢æ’ä»¶ï¼š è¯­æ³•æ’ä»¶ï¼šä½œç”¨äºè§£æé˜¶æ®µï¼Œä½¿å¾—babelèƒ½å¤Ÿè§£ææ›´å¤šçš„è¯­æ³•ï¼Œå®˜æ–¹çš„è¯­æ³•æ’ä»¶ä»¥babel-plugin-syntaxå¼€å¤´ã€‚ è½¬æ¢æ’ä»¶ï¼šåœ¨è½¬æ¢è¿™ä¸€æ­¥æŠŠæºç è½¬æ¢å¹¶è¾“å‡ºï¼Œå®˜æ–¹çš„è½¬æ¢æ’ä»¶ä»¥babel-plugin-transformï¼ˆæ­£å¼ï¼‰æˆ– babel-plugin-proposalï¼ˆææ¡ˆï¼‰å¼€å¤´ã€‚ è½¬æ¢æ’ä»¶å°†å¯ç”¨ç›¸åº”çš„è¯­æ³•æ’ä»¶ï¼Œå› æ­¤ä¸å¿…åŒæ—¶æŒ‡å®šè¿™ä¸¤ç§æ’ä»¶ã€‚ è¯­æ³•æ’ä»¶è™½åä¸ºæ’ä»¶ï¼Œä½†å…¶æœ¬èº«å¹¶ä¸å…·æœ‰åŠŸèƒ½æ€§ã€‚è¯­æ³•æ’ä»¶æ‰€å¯¹åº”çš„è¯­æ³•åŠŸèƒ½å…¶å®éƒ½å·²åœ¨@babel/parseré‡Œå®ç°ï¼Œæ’ä»¶çš„ä½œç”¨åªæ˜¯å°†å¯¹åº”è¯­æ³•çš„è§£æåŠŸèƒ½æ‰“å¼€ã€‚æ‰€ä»¥æœ¬æ–‡æåŠçš„ Babel æ’ä»¶å°†ä¸“æŒ‡è½¬æ¢æ’ä»¶ã€‚ Babelå®˜ç½‘æä¾›äº†è¿‘ä¸€ç™¾ä¸ªæ’ä»¶ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬çš„ä»£ç ä¸­ä¸€ä¸ªä¸€ä¸ªçš„é…ç½®æ’ä»¶å°±éœ€è¦å¯¹æ¯ä¸€ä¸ªæ’ä»¶æœ‰æ‰€äº†è§£ï¼Œè¿™æ ·å¿…ç„¶ä¼šè€—è´¹å¤§é‡çš„æ—¶é—´ç²¾åŠ›ï¼›ä¸ºæ­¤ï¼ŒBabelæä¾›äº†é¢„è®¾ï¼ˆpresetsï¼‰çš„æ¦‚å¿µï¼Œæ„æ€å°±æ˜¯é¢„å…ˆè®¾ç½®å¥½çš„ä¸€ç³»åˆ—æ’ä»¶åŒ…ï¼›è¿™å°±ç›¸å½“äºè‚¯å¾·åŸºä¸­çš„å¥—é¤ï¼Œå°†ä¼—å¤šäº§å“è¿›è¡Œæ­é…ç»„åˆï¼Œé€‚åˆä¸åŒçš„äººç¾¤éœ€è¦ï¼›æ€»æœ‰ä¸€æ¬¾é€‚åˆæˆ‘ä»¬çš„å¥—é¤ã€‚ æ¯”å¦‚@babel/preset-es2015å°±æ˜¯ç”¨æ¥å°†éƒ¨åˆ†ES6è¯­æ³•è½¬æ¢æˆES5è¯­æ³•ï¼Œ@babel/preset-stage-xå¯ä»¥å°†å¤„äºæŸä¸€é˜¶æ®µçš„jsè¯­æ³•ç¼–è¯‘ä¸ºæ­£å¼ç‰ˆæœ¬çš„jsä»£ç ï¼Œè€Œ@babel/preset-stage-xä¹Ÿå·²ç»è¢«BabelåºŸå¼ƒäº†ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥çœ‹è¿™ç¯‡å®˜æ–¹çš„æ–‡ç«  æˆ‘ä»¬å®é™…ä¼šç”¨åˆ°çš„é¢„è®¾æœ‰ä»¥ä¸‹ï¼š @babel/preset-env @babel/preset-flow @babel/preset-react @babel/preset-typescript æ ¹æ®åå­—æˆ‘ä»¬å¯ä»¥å¤§è‡´çŒœå‡ºæ¯ä¸ªé¢„è®¾çš„ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬é‡ç‚¹äº†è§£ä¸€ä¸‹@babel/preset-envï¼Œå®ƒçš„ä½œç”¨æ˜¯æ ¹æ®ç¯å¢ƒæ¥è½¬æ¢ä»£ç ã€‚ æ‰§è¡Œé¡ºåº æ’ä»¶å’Œé¢„è®¾éƒ½æ˜¯é€šè¿‡æ•°ç»„çš„å½¢å¼åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼Œå¦‚æœæ’ä»¶å’Œé¢„è®¾éƒ½è¦å¤„ç†åŒä¸€ä¸ªä»£ç ç‰‡æ®µï¼Œé‚£ä¹ˆä¼šæ ¹æ®ä»¥ä¸‹æ‰§è¡Œè§„åˆ™æ¥åˆ¤å®šï¼š æ’ä»¶æ¯”é¢„è®¾å…ˆæ‰§è¡Œ æ’ä»¶æ‰§è¡Œé¡ºåºæ˜¯æ’ä»¶æ•°ç»„ä»å‰å‘åæ‰§è¡Œ é¢„è®¾æ‰§è¡Œé¡ºåºæ˜¯é¢„è®¾æ•°ç»„ä»åå‘å‰æ‰§è¡Œ @babel/preset-env æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®˜ç½‘å¯¹å®ƒçš„æè¿°ï¼š @babel/preset-envæ˜¯ä¸€ä¸ªæ™ºèƒ½é¢„è®¾ï¼Œå¯è®©æ‚¨ä½¿ç”¨æœ€æ–°çš„JavaScriptï¼Œè€Œæ— éœ€å¾®è§‚ç®¡ç†ç›®æ ‡ç¯å¢ƒæ‰€éœ€çš„è¯­æ³•è½¬æ¢ï¼ˆä»¥åŠå¯é€‰çš„æµè§ˆå™¨polyfillï¼‰ã€‚è¿™éƒ½ä½¿æ‚¨çš„ç”Ÿæ´»æ›´è½»æ¾ï¼ŒJavaScriptåŒ…æ›´å°ï¼ æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä¸ä¼šå…³å¿ƒBabelç”¨äº†å“ªäº›æ’ä»¶ï¼Œæ”¯æŒå“ªäº›ES6è¯­æ³•ï¼›æˆ‘ä»¬æ›´å¤šå…³å¿ƒçš„æ˜¯æ”¯æŒå“ªäº›æµè§ˆå™¨ç‰ˆæœ¬è¿™ä¸ªå±‚é¢ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ç®­å¤´å‡½æ•°ã€Classã€Constå’Œæ¨¡æ¿å­—ç¬¦ä¸²ï¼š 1234567891011let fun = () =&gt; console.log(&quot;hello babel.js&quot;);class Person &#123; constructor(name) &#123; this.name = name; &#125; say() &#123; console.log(`my name isï¼š$&#123;this.name&#125;`); &#125;&#125;const tom = new Person(&quot;tom&quot;);tom.say(); ä½†æ˜¯å‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®éœ€è¦æ”¯æŒIE10ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¿®æ”¹.babelrcï¼š 123&#123; &quot;presets&quot;: [&quot;@babel/preset-env&quot;]&#125; æˆ–è€…å¯¹å®ƒè¿›è¡Œç¼©å†™ï¼š 123&#123; &quot;presets&quot;: [&quot;@babel/env&quot;]&#125; é€šè¿‡Babelç¼–è¯‘åè¾“å‡ºï¼š 1234567891011121314151617181920212223242526272829function _classCallCheck(instance, Constructor) &#123; if (!(instance instanceof Constructor)) &#123; throw new TypeError(&quot;Cannot call a class as a function&quot;); &#125; &#125;function _defineProperties(target, props) &#123; for (var i = 0; i &lt; props.length; i++) &#123; var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (&quot;value&quot; in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); &#125; &#125;function _createClass(Constructor, protoProps, staticProps) &#123; if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; &#125;var fun = function fun() &#123; return console.log(&#x27;hello babel.js&#x27;);&#125;;var Person = /*#__PURE__*/function () &#123; function Person(name) &#123; _classCallCheck(this, Person); this.name = name; &#125; _createClass(Person, [&#123; key: &quot;say&quot;, value: function say() &#123; console.log(&quot;my name is\\uFF1A&quot;.concat(this.name)); &#125; &#125;]); return Person;&#125;();var tom = new Person(&#x27;tom&#x27;);tom.say(); å¯ä»¥å‘ç°è™½ç„¶æˆ‘ä»¬æ²¡æœ‰é…ç½®ä»»ä½•è½¬æ¢æ’ä»¶ï¼Œä½†æ˜¯ä¸Šé¢å†™çš„çš„ç®­å¤´å‡½æ•°ã€Classã€Constå’Œæ¨¡æ¿å­—ç¬¦ä¸²è¯­æ³•éƒ½å·²ç»è¢«è½¬æ¢äº†ï¼›é»˜è®¤æƒ…å†µä¸‹ï¼Œ@babel/envç­‰äº@babel/preset-es2015ã€@babel/preset-es2016å’Œ@babel/preset-es2017ä¸‰ä¸ªå¥—é¤çš„å åŠ ã€‚ é‚£å¦‚æœæˆ‘ä»¬åªéœ€è¦æ”¯æŒæœ€æ–°çš„Chromeäº†ï¼Œå¯ä»¥ç»§ç»­ä¿®æ”¹.babelrcï¼š 12345678910&#123; &quot;presets&quot;: [ [ &quot;@babel/env&quot;, &#123; &quot;targets&quot;: &quot;last 2 Chrome versions&quot; &#125; ] ]&#125; targetsä¸­çš„å«ä¹‰æ˜¯æœ€æ–°çš„ä¸¤ä¸ªChromeç‰ˆæœ¬ï¼ŒBabelå†æ¬¡ç¼–è¯‘è¾“å‡ºï¼š 1234567891011121314151617&quot;use strict&quot;;let fun = () =&gt; console.log(&quot;hello babel.js&quot;);class Person &#123; constructor(name) &#123; this.name = name; &#125; say() &#123; console.log(`my name isï¼š$&#123;this.name&#125;`); &#125;&#125;const tom = new Person(&quot;tom&quot;);tom.say(); è€Œæœ€æ–°ç‰ˆæœ¬çš„Chromeå·²ç»æ”¯æŒç®­å¤´å‡½æ•°ã€Classã€Constå’Œæ¨¡æ¿å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘æ—¶ä¸ä¼šåœ¨è¿›è¡Œè½¬æ¢ï¼Œç›¸å…³ä»£ç åœ¨demo3ã€‚ ä¸Šé¢çš„targetå­—æ®µä¸å°‘åŒå­¦è‚¯å®šçœ‹ç€å¾ˆçœ¼ç†Ÿï¼Œè¿™ä¸ªå·¥å…·èƒ½å¤Ÿæ ¹æ®é¡¹ç›®ä¸­æŒ‡å®šçš„ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨æ¥è¿›è¡Œé…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ä¸å±•å¼€æ·±å…¥è®¨è®ºäº†ï¼›å®ƒä¹Ÿå¯ä»¥å•ç‹¬åœ¨é¡¹ç›®ä¸­é…ç½®ä¸€ä¸ª.browserslistrcæ–‡ä»¶ï¼š 1last 2 Chrome versions è¿™æ ·å’Œtargetså­—æ®µçš„ä½¿ç”¨æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼›æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¨èä½¿ç”¨browserslistçš„é…ç½®è€Œå¾ˆå°‘å•ç‹¬é…ç½®@babel/preset-envçš„targetsï¼›@babel/preset-envæœ‰ä¸€äº›å¸¸ç”¨çš„é…ç½®é¡¹è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼š targets è™½ç„¶targetsä¸æ¨èä½¿ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯æ¥äº†è§£ä¸€ä¸‹å®ƒçš„ç”¨æ³•ï¼Œå®ƒæ˜¯ç”¨æ¥æè¿°æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æƒ³è¦æ”¯æŒçš„ç›®æ ‡æµè§ˆå™¨ç¯å¢ƒï¼Œå®ƒå¯ä»¥æ˜¯Browserslistæ ¼å¼çš„æŸ¥è¯¢ï¼š 123&#123; &quot;targets&quot;: &quot;&gt; 0.25%, not dead&quot;&#125; æˆ–è€…å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨æ¥æè¿°æ”¯æŒçš„æœ€ä½ç‰ˆæœ¬çš„æµè§ˆå™¨ï¼š 123456&#123; &quot;targets&quot;: &#123; &quot;chrome&quot;: &quot;58&quot;, &quot;ie&quot;: &quot;11&quot; &#125;&#125; å…¶ä»–çš„æµè§ˆå™¨ç‰ˆæœ¬è¿˜å¯ä»¥æ˜¯ï¼šoperaã€edgeã€firefoxã€safariã€iosã€androidã€nodeã€electronç­‰ spec è¿™ä¸ªå±æ€§ä¸»è¦æ˜¯ç»™å…¶ä»–æ’ä»¶ä¼ é€’å‚æ•°ï¼ˆæ¯”å¦‚@babel/plugin-transform-arrow-functionsï¼‰ï¼Œé»˜è®¤æ˜¯falseï¼Œè®¾ä¸ºtrueåï¼Œæˆ‘ä»¬çš„ç®­å¤´å‡½æ•°ä¼šæœ‰ä»¥ä¸‹æ”¹å˜ï¼š å°†ç®­å¤´å‡½æ•°ç”Ÿæˆçš„å‡½æ•°ç”¨.bind(this)åŒ…è£¹ä¸€ä¸‹ï¼Œä»¥ä¾¿åœ¨å‡½æ•°å†…éƒ¨ç»§ç»­ä½¿ç”¨thisï¼Œè€Œä¸æ˜¯é‡å‘½åthisã€‚ åŠ ä¸€ä¸ªæ£€æŸ¥é˜²æ­¢å‡½æ•°è¢«å®ä¾‹åŒ– ç»™ç®­å¤´å‡½æ•°åŠ ä¸€ä¸ªåå­— loose è¿™ä¸ªå±æ€§ä¹Ÿä¸»è¦æ˜¯ç»™å…¶ä»–æ’ä»¶ä¼ é€’å‚æ•°ï¼ˆæ¯”å¦‚@babel/plugin-transform-classesï¼‰ï¼Œé»˜è®¤æ˜¯falseï¼Œç±»çš„æ–¹æ³•ç›´æ¥å®šä¹‰åœ¨æ„é€ å‡½æ•°ä¸Šï¼›è€Œè®¾ç½®ä¸ºtrueåï¼Œç±»çš„æ–¹æ³•è¢«å®šä¹‰åˆ°äº†åŸå‹ä¸Šé¢ï¼Œè¿™æ ·åœ¨ç±»çš„ç»§æ‰¿æ—¶å¯èƒ½ä¼šå¼•èµ·é—®é¢˜ã€‚ include è½¬æ¢æ—¶æ€»æ˜¯ä¼šå¯ç”¨æ’ä»¶çš„æ•°ç»„ï¼Œæ ¼å¼æ˜¯Array&lt;string|RegExp&gt;ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸‹ä¸¤ç§å€¼ï¼š Babelæ’ä»¶ å†…ç½®çš„core-jsï¼Œæ¯”å¦‚es.mapï¼Œes.setç­‰ æ¯”å¦‚æˆ‘ä»¬åœ¨last 2 Chrome versionsç›®æ ‡æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œä¸ä¼šè½¬æ¢ç®­å¤´å‡½æ•°å’ŒClassï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å°†è½¬æ¢ç®­å¤´å‡½æ•°çš„æ’ä»¶é…ç½®åˆ°includeä¸­ï¼Œè¿™æ ·ä¸ç®¡æˆ‘ä»¬çš„ç›®æ ‡æµè§ˆå™¨æ€ä¹ˆæ›´æ¢ï¼Œç®­å¤´å‡½æ•°è¯­æ³•æ€»æ˜¯ä¼šè½¬æ¢ï¼š 1234567891011&#123; &quot;presets&quot;: [ [ &quot;@babel/env&quot;, &#123; &quot;targets&quot;: &quot;last 2 Chrome versions&quot;, &quot;include&quot;: [&quot;@babel/plugin-transform-arrow-functions&quot;] &#125; ] ]&#125; useBuiltInså’Œcorejs useBuiltInsè¿™ä¸ªå±æ€§å†³å®šæ˜¯å¦å¼•å…¥polyfillï¼Œå¯ä»¥é…ç½®ä¸‰ä¸ªå€¼ï¼šfalseï¼ˆä¸å¼•å…¥ï¼‰ã€usageï¼ˆæŒ‰éœ€å¼•å…¥ï¼‰å’Œentryï¼ˆé¡¹ç›®å…¥å£å¤„å¼•å…¥ï¼‰ï¼›corejsè¡¨ç¤ºå¼•å…¥å“ªä¸ªç‰ˆæœ¬çš„core-jsï¼Œå¯ä»¥é€‰æ‹©2ï¼ˆé»˜è®¤ï¼‰æˆ–è€…3ï¼Œåªæœ‰å½“useBuiltInsä¸ä¸ºfalseæ—¶æ‰ä¼šç”Ÿæ•ˆã€‚ @babel/polyfill è™½ç„¶@babel/preset-envå¯ä»¥è½¬æ¢å¤§å¤šé«˜ç‰ˆæœ¬çš„JSè¯­æ³•ï¼Œä½†æ˜¯ä¸€äº›ES6åŸå‹é“¾ä¸Šçš„å‡½æ•°ï¼ˆæ¯”å¦‚æ•°ç»„å®ä¾‹ä¸Šçš„çš„filterã€fillã€findç­‰å‡½æ•°ï¼‰ä»¥åŠæ–°å¢çš„å†…ç½®å¯¹è±¡ï¼ˆæ¯”å¦‚Promiseã€Proxyç­‰å¯¹è±¡ï¼‰ï¼Œæ˜¯ä½ç‰ˆæœ¬æµè§ˆå™¨æœ¬èº«å†…æ ¸å°±ä¸æ”¯æŒï¼Œå› æ­¤@babel/preset-envé¢å¯¹ä»–ä»¬æ—¶ä¹Ÿæ— èƒ½ä¸ºåŠ›ã€‚ æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„filterå‡½æ•°ï¼Œåœ¨IEæµè§ˆå™¨ä¸Šå°±ä¼šå‡ºç°å…¼å®¹æ€§é—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡polyfillï¼ˆå«ç‰‡ï¼‰çš„æ–¹å¼æ¥è§£å†³ï¼Œä¸‹é¢æ˜¯filterå‡½æ•°ç®€å•çš„å…¼å®¹ä»£ç ï¼š 12345678910111213141516171819if (!Array.prototype.filter) &#123; Array.prototype.filter = function (fun /*, thisp*/ ) &#123; var len = this.length; if (typeof fun != &quot;function&quot;) &#123; throw new TypeError(); &#125; var res = new Array(); var thisp = arguments[1]; for (var i = 0; i &lt; len; i++) &#123; if (i in this) &#123; var val = this[i]; if (fun.call(thisp, val, i, this)) &#123; res.push(val); &#125; &#125; &#125; return res; &#125;;&#125; ä½†æ˜¯ESæœ‰é‚£ä¹ˆå¤šå‡½æ•°å’Œå†…ç½®å¯¹è±¡ï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸ªä¸€ä¸ªéƒ½æ‰‹å†™æ¥è§£å†³ï¼Œè¿™å°±åˆ°äº†@babel/polyfillç”¨æ­¦ä¹‹å¤„äº†ï¼›é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£…å®ƒï¼š 1npm install --save @babel/polyfill å®‰è£…å®Œæˆååœ¨éœ€è¦è½¬æ¢çš„æ–‡ä»¶å…¥å£åŠ å…¥å¼•ç”¨ä»£ç ï¼š 1import &#x27;@babel/polyfill&#x27; æˆ–è€…æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨Webpackå…¥å£å¤„è¿›è¡Œå¼•å…¥ï¼š 123module.exports = &#123; entry: [&quot;@babel/polyfill&quot;, &quot;./src/index.js&quot;],&#125;; ç„¶åé€šè¿‡webpackæ¥æ‰“åŒ…ï¼Œè¿™æ ·å°±èƒ½çœ‹åˆ°åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­åŠ å…¥äº†å¾ˆå¤šçš„å…¼å®¹ä»£ç ï¼Œç›¸å…³ä»£ç åœ¨demo4ï¼š å‘ç°æˆ‘ä»¬æ•°ç»„çš„fillã€filterå’ŒfindIndexç­‰æ–¹æ³•éƒ½æ‰“åŒ…è¿›å»äº†ï¼Œä½†æ˜¯çœ‹åˆ°è¿™ä¹ˆå¤šå¯†å¯†éº»éº»çš„å…¼å®¹ä»£ç ï¼Œçœ¼å°–çš„ç«¥é‹è‚¯å®šä¼šå‘ç°ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š æ‰“åŒ…å‡ºæ¥ç”Ÿæˆçš„æ–‡ä»¶éå¸¸çš„å¤§ï¼›æœ‰ä¸€äº›è¯­æ³•ç‰¹æ€§å¯èƒ½æ˜¯æˆ‘ä»¬æ²¡ç”¨åˆ°çš„ï¼Œä½†æ˜¯Webpackä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€å…¨éƒ½å¼•ç”¨è¿›å»äº†ï¼Œå¯¼è‡´æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶éå¸¸åºå¤§ã€‚ æ±¡æŸ“å…¨å±€å˜é‡ï¼›polyfillç»™å¾ˆå¤šç±»çš„åŸå‹é“¾ä¸Šæ·»åŠ å‡½æ•°ï¼Œå¦‚æœæˆ‘ä»¬å¼€å‘çš„æ˜¯ä¸€ä¸ªç±»åº“ç»™å…¶ä»–å¼€å‘è€…ä½¿ç”¨ï¼Œè¿™ç§æƒ…å†µä¼šéå¸¸ä¸å¯æ§ã€‚ å› æ­¤ä»Babel7.4å¼€å§‹@babel/polyfillå°±ä¸æ¨èä½¿ç”¨äº†ï¼Œè€Œæ˜¯ç›´æ¥å¼•å…¥core-jsä¸regenerator-runtimeä¸¤ä¸ªåŒ…ï¼›è€Œ@babel/polyfillæœ¬èº«ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªåŒ…çš„é›†åˆï¼›åœ¨ä¸Šé¢webpackæ‰“åŒ…å‡ºæ¥çš„distæ–‡ä»¶æˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œå¼•ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸¤ä¸ªåŒ…ã€‚é‚£core-jsåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å®ƒæ˜¯JavaScriptæ ‡å‡†åº“çš„polyfill å®ƒå°½å¯èƒ½çš„è¿›è¡Œæ¨¡å—åŒ–ï¼Œè®©ä½ èƒ½é€‰æ‹©ä½ éœ€è¦çš„åŠŸèƒ½ å®ƒå’Œbabelé«˜åº¦é›†æˆï¼Œå¯ä»¥å¯¹core-jsçš„å¼•å…¥è¿›è¡Œæœ€å¤§ç¨‹åº¦çš„ä¼˜åŒ– ç›®å‰æˆ‘ä»¬ä½¿ç”¨çš„é»˜è®¤éƒ½æ˜¯core-js@2ï¼Œä½†å®ƒå·²ç»å°é”äº†åˆ†æ”¯ï¼Œåœ¨æ­¤ä¹‹åçš„ç‰¹æ€§éƒ½åªä¼šæ·»åŠ åˆ°core-js@3ï¼Œå› æ­¤ä¹Ÿæ˜¯æ¨èä½¿ç”¨æœ€æ–°çš„core-js@3ã€‚ @babel/preset-envä¸core-js åœ¨ä¸Šé¢@babel/preset-envé…ç½®ä¸­æœ‰useBuiltInså’Œcorejsä¸¤ä¸ªå±æ€§ï¼Œæ˜¯ç”¨æ¥æ§åˆ¶æ‰€éœ€çš„core-jsç‰ˆæœ¬ï¼›æˆ‘ä»¬ä»¥Object.assignã€filterå’ŒPromiseä¸ºä¾‹ï¼Œç›¸å…³ä»£ç åœ¨demo5ï¼š 123456789Object.assign(&#123;&#125;, &#123;&#125;);[(1, 5, 10, 15)].filter(function (value) &#123; return value &gt; 9;&#125;);let promise = new Promise((resolve, reject) =&gt; &#123; resolve(1);&#125;); ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå¦‚æœæˆ‘ä»¬å°†useBuiltInsé…ç½®ä¸ºéfalseè€Œæ²¡æœ‰æŒ‡å®šcorejsçš„ç‰ˆæœ¬ï¼ŒBabelä¼šæç¤ºæˆ‘ä»¬éœ€è¦é…ç½®corejsçš„ç‰ˆæœ¬ï¼š ç§‰æ‰¿ç€ç”¨æ–°ä¸ç”¨æ—§çš„åŸåˆ™ï¼Œæ¯…ç„¶é€‰æ‹©core-js@3ï¼š 1234567891011&#123; &quot;presets&quot;: [ [ &quot;@babel/preset-env&quot;, &#123; &quot;useBuiltIns&quot;: &quot;usage&quot;, &quot;corejs&quot;: 3 &#125; ] ]&#125; å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æ‰“åŒ…çš„æ–‡ä»¶è‡ªåŠ¨å¼•å…¥äº†core-jsä¸­çš„æ¨¡å—ï¼š 1234567891011121314151617&quot;use strict&quot;;require(&quot;core-js/modules/es.array.filter&quot;);require(&quot;core-js/modules/es.object.assign&quot;);require(&quot;core-js/modules/es.object.to-string&quot;);require(&quot;core-js/modules/es.promise&quot;);Object.assign(&#123;&#125;, &#123;&#125;);[(1, 5, 10, 15)].filter(function (value) &#123; return value &gt; 9;&#125;);var promise = new Promise(function (resolve, reject) &#123; resolve(1);&#125;); è€Œä¸”æˆ‘ä»¬å‘ç°å®ƒåªå¼•å…¥äº†éƒ¨åˆ†æ¨¡å—ï¼›è¿™å°±æ¯”è¾ƒå‰å®³äº†ï¼Œå®ƒä¸ä»…ä¼šè€ƒè™‘åˆ°ä»£ç ä¸­ç”¨åˆ°çš„æ–°ç‰¹æ€§ï¼Œè¿˜ä¼šå‚è€ƒç›®æ ‡æµè§ˆå™¨çš„ç¯å¢ƒæ¥è¿›è¡ŒæŒ‰éœ€å¼•å…¥ï¼›è€ŒuseBuiltInsè®¾ç½®ä¸ºentryçš„æƒ…å†µåˆ™ä¼šå°†core-jsä¸­çš„æ¨¡å—åœ¨å…¥å£å¤„å…¨éƒ¨å¼•å…¥ï¼Œè¿™é‡Œå°±ä¸å†æ¼”ç¤ºã€‚ @babel/runtime æˆ‘ä»¬åœ¨ä¸Šé¢é€šè¿‡@babel/preset-envè½¬æ¢Classç±»æ—¶å‘ç°è¾“å‡ºæ–‡ä»¶çš„å¤´éƒ¨å¤šäº†_classCallCheckã€_definePropertieså’Œ_createClassä¸‰ä¸ªå‡½æ•°å£°æ˜ï¼Œè¿™å°±æ˜¯æ³¨å…¥çš„å‡½æ•°ï¼Œç§°ä¸ºè¾…åŠ©å‡½æ•°ï¼›@babel/preset-envåœ¨è½¬æ¢æ—¶æ³¨å…¥äº†å‡½æ•°å£°æ˜ï¼Œä»¥ä¾¿è¯­æ³•è½¬æ¢åä½¿ç”¨ã€‚ ä½†æ˜¯æˆ‘ä»¬å¼€å‘é¡¹ç›®æ—¶ï¼Œæ–‡ä»¶å°‘åˆ™å‡ åä¸ªï¼Œå¤šä¸ªä¸Šç™¾ä¸ªï¼Œå¦‚æœæ¯ä¸ªæ–‡ä»¶éƒ½æ³¨å…¥äº†å‡½æ•°å£°æ˜ï¼Œå†é€šè¿‡æ‰“åŒ…å·¥å…·æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶åˆä¼šéå¸¸åºå¤§ï¼Œå½±å“æ€§èƒ½ã€‚ å› æ­¤ï¼ŒBabelæä¾›çš„è§£å†³æ€è·¯æ˜¯æŠŠè¿™äº›è¾…åŠ©å‡½æ•°éƒ½æ”¾åˆ°ä¸€ä¸ªnpmåŒ…é‡Œé¢ï¼Œåœ¨æ¯æ¬¡éœ€è¦ä½¿ç”¨çš„æ—¶å€™å°±ä»è¿™ä¸ªåŒ…é‡ŒæŠŠå‡½æ•°requireå‡ºæ¥ï¼›è¿™æ ·å³ä½¿æœ‰å‡ åƒä¸ªæ–‡ä»¶ï¼Œä¹Ÿéƒ½æ˜¯å¯¹å‡½æ•°è¿›è¡Œå¼•ç”¨ï¼Œè€Œä¸æ˜¯å¤åˆ¶ä»£ç ï¼›æœ€åé€šè¿‡webpackç­‰å·¥å…·æ‰“åŒ…æ—¶ï¼Œåªä¼šå°†npmåŒ…ä¸­å¼•ç”¨åˆ°çš„å‡½æ•°æ‰“åŒ…ä¸€æ¬¡ï¼Œè¿™æ ·å°±å¤ç”¨äº†ä»£ç ï¼Œå‡å°‘æ‰“åŒ…æ–‡ä»¶çš„å¤§å°ã€‚ @babel/runtimeå°±æ˜¯è¿™äº›è¾…åŠ©å‡½æ•°çš„é›†åˆåŒ…ï¼Œæˆ‘ä»¬æŸ¥çœ‹@babel/runtimeä¸‹é¢çš„helpersï¼Œå¯ä»¥å‘ç°å¯¼å‡ºäº†å¾ˆå¤šå‡½æ•°ï¼Œä»¥åŠæˆ‘ä»¬ä¸Šé¢æåŠåˆ°çš„_classCallCheckå‡½æ•°ï¼š é¦–å…ˆå½“ç„¶æ˜¯éœ€è¦å®‰è£…@babel/runtimeè¿™ä¸ªåŒ…ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜éœ€è¦å®‰è£…@babel/plugin-transform-runtimeï¼Œè¿™ä¸ªæ’ä»¶çš„ä½œç”¨æ˜¯ç§»é™¤è¾…åŠ©å‡½æ•°ï¼Œå°†å…¶æ›¿æ¢ä¸º@babel/runtime/helpersä¸­å‡½æ•°çš„å¼•ç”¨ã€‚ 12npm install --save @babel/runtimenpm install --save-dev @babel/plugin-transform-runtime ç„¶åä¿®æ”¹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ï¼Œç›¸å…³ä»£ç åœ¨demo6ï¼š 1234&#123; &quot;presets&quot;: [&quot;@babel/env&quot;], &quot;plugins&quot;: [&quot;@babel/transform-runtime&quot;]&#125; å†æ¬¡æ‰“åŒ…å‘ç°æˆ‘ä»¬çš„è¾…åŠ©å‡½æ•°å·²ç»å˜æˆä¸‹é¢çš„å¼•ç”¨æ–¹å¼äº†ï¼š 12345var _interopRequireDefault = require(&quot;@babel/runtime/helpers/interopRequireDefault&quot;);var _classCallCheck2 = _interopRequireDefault(require(&quot;@babel/runtime/helpers/classCallCheck&quot;));var _createClass2 = _interopRequireDefault(require(&quot;@babel/runtime/helpers/createClass&quot;)); @babel/plugin-transform-runtime ä¸Šé¢æˆ‘ä»¬è¯´åˆ°@babel/polyfillä¼šå»ºç«‹ä¸€ä¸ªå®Œæ•´çš„ES2015ç¯å¢ƒï¼Œå› æ­¤é€ æˆäº†å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼›è™½ç„¶ä½¿ç”¨core-jsä¸ä¼šå¼•å…¥å…¨éƒ¨æ¨¡å—ï¼Œä½†æ˜¯ä¹Ÿä¼šæ±¡æŸ“éƒ¨åˆ†å…¨å±€å˜é‡ã€‚ è€Œ@babel/plugin-transform-runtimeé™¤äº†èƒ½å¤Ÿè½¬æ¢ä¸Šé¢çš„è¾…åŠ©å‡½æ•°ï¼Œè¿˜èƒ½å¯¹ä»£ç ä¸­çš„æ–°ç‰¹æ€§APIè¿›è¡Œä¸€ä¸ªè½¬æ¢ï¼Œè¿˜æ˜¯ä»¥æˆ‘ä»¬çš„filterå‡½æ•°å’ŒPromiseå¯¹è±¡ä¸ºä¾‹ï¼Œç›¸å…³ä»£ç åœ¨demo7ï¼š 123456[1, 5, 10, 15].filter((value) =&gt; &#123; return value &gt; 9;&#125;);let promise = new Promise((resolve, reject) =&gt; &#123; resolve(1);&#125;); ç„¶åä¿®æ”¹æˆ‘ä»¬çš„é…ç½®æ–‡ä»¶.babelrcï¼š 1234567891011&#123; &quot;presets&quot;: [&quot;@babel/env&quot;], &quot;plugins&quot;: [ [ &quot;@babel/transform-runtime&quot;, &#123; &quot;corejs&quot;: 3 &#125; ] ]&#125; å†æ¬¡æŸ¥çœ‹æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å‘ç°filterå’ŒPromiseå·²ç»è½¬æ¢æˆäº†å¼•ç”¨çš„æ–¹å¼ï¼š 12345678910111213141516&quot;use strict&quot;;var _interopRequireDefault = require(&quot;@babel/runtime-corejs3/helpers/interopRequireDefault&quot;);var _promise = _interopRequireDefault(require(&quot;@babel/runtime-corejs3/core-js-stable/promise&quot;));var _filter = _interopRequireDefault(require(&quot;@babel/runtime-corejs3/core-js-stable/instance/filter&quot;));var _context;(0, _filter[&quot;default&quot;])(_context = [1, 5, 10, 15]).call(_context, function (value) &#123; return value &gt; 9;&#125;);var promise = new _promise[&quot;default&quot;](function (resolve, reject) &#123; resolve(1);&#125;); æˆ‘ä»¬å‘ç°æ‰“åŒ…å‡ºæ¥çš„æ¨¡å—æ˜¯ä»@babel/runtime-corejs3è¿™ä¸ªåŒ…é‡Œé¢å¼•ç”¨çš„ï¼›ç»è¿‡æŸ¥çœ‹ï¼Œå‘ç°å®ƒä¸‹é¢åŒ…å«äº†ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼šcore-jsã€helperså’Œregeneratorï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‘ç°ï¼š @babel/runtime-corejs2 â‰ˆ @babel/runtime+core-js+regenerator â‰ˆ @babel/runtime+@babel/polyfill @babel/polyfillå’Œ@babel/runtimeçš„åŒºåˆ« ç»è¿‡ä¸‹é¢è¿™ä¹ˆå¤šä¾‹å­ï¼Œæ€»ç»“ä¸€ä¸‹@babel/polyfillå’Œ@babel/runtimeçš„åŒºåˆ«ï¼šå‰è€…æ”¹é€ ç›®æ ‡æµè§ˆå™¨ï¼Œè®©ä½ çš„æµè§ˆå™¨æ‹¥æœ‰æœ¬æ¥ä¸æ”¯æŒçš„ç‰¹æ€§ï¼›åè€…æ”¹é€ ä½ çš„ä»£ç ï¼Œè®©ä½ çš„ä»£ç èƒ½åœ¨æ‰€æœ‰ç›®æ ‡æµè§ˆå™¨ä¸Šè¿è¡Œï¼Œä½†ä¸æ”¹é€ æµè§ˆå™¨ã€‚ ä¸€ä¸ªæ˜¾è€Œæ˜“è§çš„åŒºåˆ«å°±æ˜¯æ‰“å¼€IE11æµè§ˆå™¨ï¼Œå¦‚æœå¼•å…¥äº†@babel/polyfillï¼Œåœ¨æ§åˆ¶å°æˆ‘ä»¬å¯ä»¥æ‰§è¡ŒObject.assign({}, {})ï¼›è€Œå¦‚æœå¼•å…¥äº†@babel/runtimeï¼Œä¼šæç¤ºä½ æŠ¥é”™ï¼Œå› ä¸ºObjectä¸Šæ²¡æœ‰assignå‡½æ•°ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"}]},{"title":"Webpackæ‰‹å†™loaderå’Œplugin","date":"2020-10-12T04:00:00.000Z","path":"2020/10/12/Webpack-Handwrite.html","text":"æˆ‘ä»¬åœ¨WebpackåŸºç¡€ç¯‡ä»‹ç»äº†å¤šç§loaderå’Œpluginä»¥åŠæ¯ç§çš„ç”¨é€”ï¼›é‚£ä¹ˆä»–ä»¬ä¸¤è€…åœ¨webpackå†…éƒ¨æ˜¯å¦‚ä½•è¿›è¡Œå·¥ä½œçš„å‘¢ï¼Ÿè®©æˆ‘ä»¬æ‰‹å†™ä¸€ä¸ªloaderå’Œpluginæ¥çœ‹çœ‹å®ƒå†…éƒ¨çš„åŸç†ï¼Œä»¥ä¾¿åŠ æ·±å¯¹webpackçš„ç†è§£ã€‚ æ‰‹å†™loader æˆ‘ä»¬åœ¨åœ¨Webpacké…ç½®åŸºç¡€ç¯‡ä»‹ç»è¿‡ï¼Œloaderæ˜¯é“¾å¼ä¼ é€’çš„ï¼Œå¯¹æ–‡ä»¶èµ„æºä»ä¸Šä¸€ä¸ªloaderä¼ é€’åˆ°ä¸‹ä¸€ä¸ªï¼Œè€Œloaderçš„å¤„ç†ä¹Ÿéµå¾ªç€ä»ä¸‹åˆ°ä¸Šçš„é¡ºåºï¼Œæˆ‘ä»¬ç®€å•äº†è§£ä¸€ä¸‹loaderçš„å¼€å‘åŸåˆ™ï¼š å•ä¸€åŸåˆ™: æ¯ä¸ªLoaderåªåšä¸€ä»¶äº‹ï¼Œç®€å•æ˜“ç”¨ï¼Œä¾¿äºç»´æŠ¤ï¼› é“¾å¼è°ƒç”¨: Webpack ä¼šæŒ‰é¡ºåºé“¾å¼è°ƒç”¨æ¯ä¸ªLoaderï¼› ç»Ÿä¸€åŸåˆ™: éµå¾ªWebpackåˆ¶å®šçš„è®¾è®¡è§„åˆ™å’Œç»“æ„ï¼Œè¾“å…¥ä¸è¾“å‡ºå‡ä¸ºå­—ç¬¦ä¸²ï¼Œå„ä¸ªLoaderå®Œå…¨ç‹¬ç«‹ï¼Œå³æ’å³ç”¨ï¼› æ— çŠ¶æ€åŸåˆ™ï¼šåœ¨è½¬æ¢ä¸åŒæ¨¡å—æ—¶ï¼Œä¸åº”è¯¥åœ¨loaderä¸­ä¿ç•™çŠ¶æ€ï¼› å› æ­¤æˆ‘ä»¬å°±æ¥å°è¯•å†™ä¸€ä¸ªless-loaderå’Œstyle-loaderï¼Œå°†lessæ–‡ä»¶å¤„ç†åé€šè¿‡styleæ ‡ç­¾çš„æ–¹å¼æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»ã€‚ åŒæ­¥loader loaderé»˜è®¤å¯¼å‡ºä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—åŒ¹é…åˆ°çš„æ–‡ä»¶èµ„æºå­—ç¬¦ä¸²å’ŒSourceMapï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²åå†è¿”å›ç»™ä¸‹ä¸€ä¸ªloaderè¿›è¡Œå¤„ç†ï¼Œå› æ­¤æœ€ç®€å•çš„ä¸€ä¸ªloaderå¦‚ä¸‹ï¼š 123module.exports = function(source, map)&#123; return source&#125; å¯¼å‡ºçš„loaderå‡½æ•°ä¸èƒ½ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œå¾ˆå¤šloaderå†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•éƒ½éœ€è¦é€šè¿‡thisè¿›è¡Œè°ƒç”¨ï¼Œæ¯”å¦‚this.cacheable()æ¥è¿›è¡Œç¼“å­˜ã€this.sourceMapåˆ¤æ–­æ˜¯å¦éœ€è¦ç”ŸæˆsourceMapç­‰ã€‚ æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªloaderæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬è‡ªå·±å†™çš„loaderï¼Œç„¶åæ–°å»ºæˆ‘ä»¬è‡ªå·±çš„style-loaderï¼š 12345678910//loader/style-loader.jsfunction loader(source, map) &#123; let style = ` let style = document.createElement(&#x27;style&#x27;); style.innerHTML = $&#123;JSON.stringify(source)&#125;; document.head.appendChild(style) `; return style;&#125;module.exports = loader; è¿™é‡Œçš„sourceå°±å¯ä»¥çœ‹åšæ˜¯å¤„ç†åçš„cssæ–‡ä»¶å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬æŠŠå®ƒé€šè¿‡styleæ ‡ç­¾çš„å½¢å¼æ’å…¥åˆ°headä¸­ï¼›åŒæ—¶æˆ‘ä»¬ä¹Ÿå‘ç°æœ€åè¿”å›çš„æ˜¯ä¸€ä¸ªJSä»£ç çš„å­—ç¬¦ä¸²ï¼Œwebpackæœ€åä¼šå°†è¿”å›çš„å­—ç¬¦ä¸²æ‰“åŒ…è¿›æ¨¡å—ä¸­ã€‚ å¼‚æ­¥loader ä¸Šé¢çš„style-loaderéƒ½æ˜¯åŒæ­¥æ“ä½œï¼Œæˆ‘ä»¬åœ¨å¤„ç†sourceæ—¶ï¼Œæœ‰æ—¶å€™ä¼šè¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡async/awaitï¼Œé˜»å¡æ“ä½œæ‰§è¡Œï¼›å¦ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡loaderæœ¬èº«æä¾›çš„å›è°ƒå‡½æ•°callbackã€‚ 12345678910//loader/less-loaderconst less = require(&quot;less&quot;);function loader(source) &#123; const callback = this.async(); less.render(source, function (err, res) &#123; let &#123; css &#125; = res; callback(null, css); &#125;);&#125;module.exports = loader; callbackçš„è¯¦ç»†ä¼ å‚æ–¹æ³•å¦‚ä¸‹ï¼š 12345678910callback(&#123; //å½“æ— æ³•è½¬æ¢åŸå†…å®¹æ—¶ï¼Œç»™ Webpack è¿”å›ä¸€ä¸ª Error error: Error | Null, //è½¬æ¢åçš„å†…å®¹ content: String | Buffer, //è½¬æ¢åçš„å†…å®¹å¾—å‡ºåŸå†…å®¹çš„Source Mapï¼ˆå¯é€‰ï¼‰ sourceMap?: SourceMap, //åŸå†…å®¹ç”Ÿæˆ ASTè¯­æ³•æ ‘ï¼ˆå¯é€‰ï¼‰ abstractSyntaxTree?: AST &#125;) æœ‰äº›æ—¶å€™ï¼Œé™¤äº†å°†åŸå†…å®¹è½¬æ¢è¿”å›ä¹‹å¤–ï¼Œè¿˜éœ€è¦è¿”å›åŸå†…å®¹å¯¹åº”çš„Source Mapï¼Œæ¯”å¦‚æˆ‘ä»¬è½¬æ¢lesså’Œscssä»£ç ï¼Œä»¥åŠbabel-loaderè½¬æ¢ES6ä»£ç ï¼Œä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œéœ€è¦å°†Source Mapä¹Ÿä¸€èµ·éšç€å†…å®¹è¿”å›ã€‚ 12345678910//loader/less-loaderconst less = require(&quot;less&quot;);function loader(source) &#123; const callback = this.async(); less.render(source,&#123;sourceMap: &#123;&#125;&#125;, function (err, res) &#123; let &#123; css, map &#125; = res; callback(null, css, map); &#125;);&#125;module.exports = loader; è¿™æ ·æˆ‘ä»¬åœ¨ä¸‹ä¸€ä¸ªloaderå°±èƒ½æ¥æ”¶åˆ°less-loaderè¿”å›çš„sourceMapäº†ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼š Source Mapç”Ÿæˆå¾ˆè€—æ—¶ï¼Œé€šå¸¸åœ¨å¼€å‘ç¯å¢ƒä¸‹æ‰ä¼šç”ŸæˆSource Mapï¼Œå…¶å®ƒç¯å¢ƒä¸‹ä¸ç”¨ç”Ÿæˆã€‚Webpackä¸ºloaderæä¾›äº†this.sourceMapè¿™ä¸ªå±æ€§æ¥å‘Šè¯‰loaderå½“å‰æ„å»ºç¯å¢ƒç”¨æˆ·æ˜¯å¦éœ€è¦ç”ŸæˆSource Mapã€‚ åŠ è½½æœ¬åœ°loader loaderæ–‡ä»¶å‡†å¤‡å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬åŠ è½½åˆ°webpacké…ç½®ä¸­å»ï¼›åœ¨åŸºç¡€ç¯‡ä¸­ï¼Œæˆ‘ä»¬åŠ è½½ç¬¬ä¸‰æ–¹çš„loaderåªéœ€è¦å®‰è£…ååœ¨loaderå±æ€§ä¸­å†™loaderåç§°å³å¯ï¼Œç°åœ¨åŠ è½½æœ¬åœ°loaderéœ€è¦æŠŠloaderçš„è·¯å¾„é…ç½®ä¸Šã€‚ 123456789101112131415module.exports = &#123; module: &#123; rules: [&#123; test: /\\.less/, use: [ &#123; loader: &#x27;./loader/style-loader.js&#x27;, &#125;, &#123; loader: path.resolve(__dirname, &quot;loader&quot;, &quot;less-loader&quot;), &#125;, ], &#125;] &#125;&#125; æˆ‘ä»¬å¯ä»¥åœ¨loaderä¸­é…ç½®æœ¬åœ°loaderçš„ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„ï¼Œä½†æ˜¯è¿™æ ·å†™èµ·æ¥æ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨webpackæä¾›çš„resolveLoaderå±æ€§ï¼Œæ¥å‘Šè¯‰webpackåº”è¯¥å»å“ªé‡Œè§£ææœ¬åœ°loaderã€‚ 123456789101112131415161718module.exports = &#123; module: &#123; rules: [&#123; test: /\\.less/, use: [ &#123; loader: &#x27;style-loader&#x27;, &#125;, &#123; loader: &#x27;less-loader&#x27;, &#125;, ], &#125;] &#125;, resolveLoader:&#123; modules: [path.resolve(__dirname, &#x27;loader&#x27;), &#x27;node_modules&#x27;] &#125;&#125; è¿™æ ·webpackä¼šå…ˆå»loaderæ–‡ä»¶å¤¹ä¸‹æ‰¾loaderï¼Œæ²¡æœ‰æ‰¾åˆ°æ‰å»node_modulesï¼›å› æ­¤æˆ‘ä»¬å†™çš„loaderå°½é‡ä¸è¦å’Œç¬¬ä¸‰æ–¹loaderé‡åï¼Œå¦åˆ™ä¼šå¯¼è‡´ç¬¬ä¸‰æ–¹loaderè¢«è¦†ç›–åŠ è½½ã€‚ å¤„ç†å‚æ•° æˆ‘ä»¬åœ¨é…ç½®loaderæ—¶ï¼Œç»å¸¸ä¼šç»™loaderä¼ é€’å‚æ•°è¿›è¡Œé…ç½®ï¼Œä¸€èˆ¬æ˜¯é€šè¿‡optionså±æ€§æ¥ä¼ é€’çš„ï¼Œä¹Ÿæœ‰åƒurl-loaderé€šè¿‡å­—ç¬¦ä¸²æ¥ä¼ å‚ï¼š 1234&#123; test: /\\.(jpg|png|gif|bmp|jpeg)$/, use: &#x27;url-loader?limt=1024&amp;name=[hash:8].[ext]&#x27;&#125; webpackä¹Ÿæä¾›äº†queryå±æ€§æ¥è·å–ä¼ å‚ï¼›ä½†æ˜¯queryå±æ€§å¾ˆä¸ç¨³å®šï¼Œå¦‚æœåƒä¸Šé¢çš„é€šè¿‡å­—ç¬¦ä¸²æ¥ä¼ å‚ï¼Œqueryå°±è¿”å›å­—ç¬¦ä¸²æ ¼å¼ï¼Œé€šè¿‡optionsæ–¹å¼å°±ä¼šè¿”å›å¯¹è±¡æ ¼å¼ï¼Œè¿™æ ·ä¸åˆ©äºæˆ‘ä»¬å¤„ç†ã€‚å› æ­¤æˆ‘ä»¬å€ŸåŠ©ä¸€ä¸ªå®˜æ–¹çš„åŒ…loader-utilså¸®åŠ©å¤„ç†ï¼Œå®ƒè¿˜æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å·¥å…·ã€‚ 123456789101112131415const &#123; getOptions, parseQuery, stringifyRequest,&#125; = require(&quot;loader-utils&quot;);module.exports = function (source, map) &#123; //è·å–optionså‚æ•° const options = getOptions(this); //è§£æå­—ç¬¦ä¸²ä¸ºå¯¹è±¡ parseQuery(&quot;?param1=foo&quot;) //å°†ç»å¯¹è·¯ç”±è½¬æ¢æˆç›¸å¯¹è·¯å¾„ //ä»¥ä¾¿èƒ½åœ¨requireæˆ–è€…importä¸­ä½¿ç”¨ä»¥é¿å…ç»å¯¹è·¯å¾„ stringifyRequest(this, &quot;test/lib/index.js&quot;)&#125; å¸¸ç”¨çš„å°±æ˜¯getOptionså°†å¤„ç†åçš„å‚æ•°è¿”å›å‡ºæ¥ï¼Œå®ƒå†…éƒ¨çš„å®ç°é€»è¾‘ä¹Ÿéå¸¸çš„ç®€å•ï¼Œä¹Ÿæ˜¯æ ¹æ®queryå±æ€§è¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ˜¯å­—ç¬¦ä¸²çš„è¯è°ƒç”¨parseQueryæ–¹æ³•è¿›è¡Œè§£æï¼Œæºç å¦‚ä¸‹ï¼š 1234567891011121314//loader-utils/lib/getOptions.js&#x27;use strict&#x27;;const parseQuery = require(&#x27;./parseQuery&#x27;);function getOptions(loaderContext) &#123; const query = loaderContext.query; if (typeof query === &#x27;string&#x27; &amp;&amp; query !== &#x27;&#x27;) &#123; return parseQuery(loaderContext.query); &#125; if (!query || typeof query !== &#x27;object&#x27;) &#123; return &#123;&#125;; &#125; return query;&#125;module.exports = getOptions; è·å–åˆ°å‚æ•°åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¯¹è·å–åˆ°çš„optionså‚æ•°è¿›è¡Œå®Œæ•´æ€§æ ¡éªŒï¼Œé¿å…æœ‰äº›å‚æ•°æ¼ä¼ ï¼Œå¦‚æœä¸€ä¸ªä¸ªåˆ¤æ–­æ ¡éªŒæ¯”è¾ƒç¹çï¼Œè¿™å°±ç”¨åˆ°å¦ä¸€ä¸ªå®˜æ–¹åŒ…schema-utilsï¼š 123456789const &#123; getOptions &#125; = require(&quot;loader-utils&quot;);const &#123; validate &#125; = require(&quot;schema-utils&quot;);const schema = require(&quot;./schema.json&quot;);module.exports = function (source, map) &#123; const options = getOptions(this); const configuration = &#123; name: &quot;Loader Name&quot;&#125;; validate(schema, options, configuration); //çœç•¥å…¶ä»–ä»£ç &#125; validateå‡½æ•°å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰“å°è¿”å›å€¼å‘ç°æ˜¯`undefinedï¼Œå› ä¸ºå¦‚æœå‚æ•°ä¸é€šè¿‡çš„è¯ç›´æ¥ä¼šæŠ›å‡ºValidationErrorå¼‚å¸¸ï¼Œç›´æ¥è¿›ç¨‹ä¸­æ–­ï¼›è¿™é‡Œå¼•å…¥äº†ä¸€ä¸ªschema.jsonï¼Œå°±æ˜¯æˆ‘ä»¬å¯¹options``ä¸­å‚æ•°è¿›è¡Œæ ¡éªŒçš„ä¸€ä¸ªjsonæ ¼å¼çš„å¯¹åº”è¡¨ï¼š 123456789101112&#123; &quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: &#123; &quot;source&quot;: &#123; &quot;type&quot;: &quot;boolean&quot; &#125;, &quot;name&quot;: &#123; &quot;type&quot;: &quot;string&quot; &#125;, &#125;, &quot;additionalProperties&quot;: false&#125; propertiesä¸­çš„å¥åå°±æ˜¯æˆ‘ä»¬éœ€è¦æ£€éªŒçš„optionsä¸­çš„å­—æ®µåç§°ï¼ŒadditionalPropertiesä»£è¡¨äº†æ˜¯å¦å…è®¸optionsä¸­è¿˜æœ‰å…¶ä»–é¢å¤–çš„å±æ€§ã€‚ less-loaderæºç åˆ†æ å†™å®Œæˆ‘ä»¬è‡ªå·±ç®€å•çš„less-loaderï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®˜æ–¹çš„less-loaderæºç åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„ï¼Œè¿™é‡Œè´´ä¸Šéƒ¨åˆ†æºç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839import less from &#x27;less&#x27;;import &#123; getOptions &#125; from &#x27;loader-utils&#x27;;import &#123; validate &#125; from &#x27;schema-utils&#x27;;import schema from &#x27;./options.json&#x27;;async function lessLoader(source) &#123; const options = getOptions(this); //æ ¡éªŒå‚æ•° validate(schema, options, &#123; name: &#x27;Less Loader&#x27;, baseDataPath: &#x27;options&#x27;, &#125;); const callback = this.async(); //å¯¹optionsè¿›ä¸€æ­¥å¤„ç†ï¼Œç”Ÿæˆlessæ¸²æŸ“çš„å‚æ•° const lessOptions = getLessOptions(this, options); //æ˜¯å¦ä½¿ç”¨sourceMapï¼Œé»˜è®¤å–optionsä¸­çš„å‚æ•° const useSourceMap = typeof options.sourceMap === &#x27;boolean&#x27; ? options.sourceMap : this.sourceMap; //å¦‚æœä½¿ç”¨sourceMapï¼Œå°±åœ¨æ¸²æŸ“å‚æ•°åŠ å…¥ if (useSourceMap) &#123; lessOptions.sourceMap = &#123; outputSourceFiles: true, &#125;; &#125; let data = source; let result; try &#123; result = await less.render(data, lessOptions); &#125; catch (error) &#123; &#125; const &#123; css, imports &#125; = result; //æœ‰sourceMapå°±è¿›è¡Œå¤„ç† let map = typeof result.map === &#x27;string&#x27; ? JSON.parse(result.map) : result.map; callback(null, css, map);&#125;export default lessLoader; å¯ä»¥çœ‹åˆ°å®˜æ–¹çš„less-loaderå’Œæˆ‘ä»¬å†™çš„ç®€å•çš„loaderæœ¬è´¨ä¸Šéƒ½æ˜¯è°ƒç”¨less.renderå‡½æ•°ï¼Œå¯¹æ–‡ä»¶èµ„æºå­—ç¬¦ä¸²è¿›è¡Œå¤„ç†ï¼Œç„¶åå°†å¤„ç†å¥½åçš„å­—ç¬¦ä¸²å’ŒsourceMapé€šè¿‡callbackè¿”å›ã€‚ loaderä¾èµ– åœ¨loaderä¸­ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¹Ÿä¼šä½¿ç”¨åˆ°å¤–éƒ¨çš„èµ„æºæ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦åœ¨loaderå¯¹è¿™äº›èµ„æºæ–‡ä»¶è¿›è¡Œå£°æ˜ï¼›è¿™äº›å£°æ˜ä¿¡æ¯ä¸»è¦ç”¨äºä½¿å¾—ç¼“å­˜loaderå¤±æ•ˆï¼Œä»¥åŠåœ¨è§‚å¯Ÿæ¨¡å¼(watch mode)ä¸‹é‡æ–°ç¼–è¯‘ã€‚ æˆ‘ä»¬å°è¯•å†™ä¸€ä¸ªbanner-loaderï¼Œåœ¨æ¯ä¸ªjsæ–‡ä»¶èµ„æºåé¢åŠ ä¸Šæˆ‘ä»¬è‡ªå®šä¹‰çš„æ³¨é‡Šå†…å®¹ï¼›å¦‚æœä¼ äº†filenameï¼Œå°±ä»æ–‡ä»¶ä¸­è·å–é¢„è®¾å¥½çš„bannerå†…å®¹ï¼Œé¦–å…ˆæˆ‘ä»¬é¢„è®¾ä¸¤ä¸ªbannerçš„txtï¼š 12345//loader/banner1.txt/* build from banner1 *///loader/banner2.txt/* build from banner2 */ ç„¶ååœ¨æˆ‘ä»¬çš„banner-loaderä¸­æ ¹æ®å‚æ•°æ¥è¿›è¡Œåˆ¤æ–­ï¼š 1234567891011121314151617181920212223//loader/banner-loaderconst fs = require(&quot;fs&quot;);const path = require(&quot;path&quot;);const &#123; getOptions &#125; = require(&quot;loader-utils&quot;);module.exports = function (source) &#123; const options = getOptions(this); if (options.filename) &#123; let txt = &quot;&quot;; if (options.filename == &quot;banner1&quot;) &#123; this.addDependency(path.resolve(__dirname, &quot;./banner1.txt&quot;)); txt = fs.readFileSync(path.resolve(__dirname, &quot;./banner1.txt&quot;)); &#125; else if (options.filename == &quot;banner2&quot;) &#123; this.addDependency(path.resolve(__dirname, &quot;./banner1.txt&quot;)); txt = fs.readFileSync(path.resolve(__dirname, &quot;./banner1.txt&quot;)); &#125; return source + txt; &#125; else if (options.text) &#123; return source + `/* $&#123;options.text&#125; */`; &#125; else &#123; return source; &#125;&#125;; è¿™é‡Œä½¿ç”¨äº†this.addDependencyçš„APIå°†å½“å‰å¤„ç†çš„æ–‡ä»¶æ·»åŠ åˆ°æ–‡ä»¶ä¾èµ–ä¸­ï¼ˆå¹¶ä¸æ˜¯é¡¹ç›®çš„package.jsonï¼‰ã€‚å¦‚æœåœ¨è§‚å¯Ÿæ¨¡å¼ä¸‹ï¼Œä¾èµ–çš„textæ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–ï¼Œé‚£ä¹ˆæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶å†…å®¹ä¹Ÿéšä¹‹å˜åŒ–ã€‚ å¦‚æœä¸æ·»åŠ this.addDependencyçš„è¯é¡¹ç›®å¹¶ä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯åœ¨è§‚å¯Ÿæ¨¡å¼ä¸‹ï¼Œå¦‚æœä¾èµ–çš„æ–‡ä»¶å‘ç”Ÿäº†å˜åŒ–ç”Ÿæˆçš„bundleæ–‡ä»¶å¹¶ä¸èƒ½åŠæ—¶æ›´æ–°ã€‚ ç¼“å­˜åŠ é€Ÿ åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œloaderå¤„ç†éœ€è¦å¤§é‡çš„è®¡ç®—éå¸¸è€—æ€§èƒ½ï¼ˆæ¯”å¦‚babel-loaderï¼‰ï¼Œå¦‚æœæ¯æ¬¡æ„å»ºéƒ½é‡æ–°æ‰§è¡Œç›¸åŒçš„è½¬æ¢æ“ä½œæ¯æ¬¡æ„å»ºéƒ½ä¼šéå¸¸æ…¢ã€‚ å› æ­¤webpacké»˜è®¤ä¼šå°†loaderçš„å¤„ç†ç»“æœæ ‡è®°ä¸ºå¯ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨éœ€è¦è¢«å¤„ç†çš„æ–‡ä»¶æˆ–è€…å…¶ä¾èµ–çš„æ–‡ä»¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒçš„è¾“å‡ºç»“æœå¿…ç„¶æ˜¯ç›¸åŒçš„ï¼›å¦‚æœä¸æƒ³è®©webpackç¼“å­˜è¯¥loaderï¼Œå¯ä»¥ç¦ç”¨ç¼“å­˜ï¼š 12345module.exports = function(source) &#123; // å¼ºåˆ¶ä¸ç¼“å­˜ this.cacheable(false); return source;&#125;; æ‰‹å†™loaderæ‰€æœ‰ä»£ç å‡åœ¨webpackdemo19 æ‰‹å†™plugin åœ¨ Webpack è¿è¡Œçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¼šå¹¿æ’­å‡ºè®¸å¤šäº‹ä»¶ï¼ŒPlugin å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œåœ¨åˆé€‚çš„æ—¶æœºé€šè¿‡Webpackæä¾›çš„APIæ”¹å˜è¾“å‡ºç»“æœã€‚å’Œæ‰‹å†™loaderä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆæ¥å†™ä¸€ä¸ªç®€å•çš„pluginï¼š 12345678//plugins/MyPlugin.jsclass MyPlugin &#123; constructor() &#123; console.log(&quot;Pluginè¢«åˆ›å»ºäº†&quot;); &#125; apply (compiler) &#123;&#125;&#125;module.exports = MyPlugin; pluginçš„æœ¬è´¨æ˜¯ç±»ï¼›æˆ‘ä»¬åœ¨å®šä¹‰pluginæ—¶ï¼Œå…¶å®æ˜¯åœ¨å®šä¹‰ä¸€ä¸ªç±»ï¼›å®šä¹‰å¥½pluginåå°±å¯ä»¥åœ¨webpacké…ç½®ä¸­ä½¿ç”¨è¿™ä¸ªæ’ä»¶ï¼š 1234567//webpack.config.jsconst MyPlugin = require(&#x27;./plugins/MyPlugin&#x27;)module.exports = &#123; plugins: [ new MyPlugin() ],&#125; è¿™æ ·æˆ‘ä»¬çš„æ’ä»¶å°±åœ¨webpackä¸­ç”Ÿæ•ˆäº†ï¼›è¿™æ—¶æœ‰äº›ç«¥é‹å¯èƒ½ä¼šæƒ³èµ·æ¥ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨HtmlWebpackPluginæˆ–è€…CleanWebpackPluginç­‰ä¸€äº›å®˜æ–¹æ’ä»¶æ—¶ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹åŒ–æ’ä»¶ä¼ å…¥å‚æ•°ï¼›é‚£ä¹ˆè¿™é‡Œæˆ‘ä»¬æ˜¯å¦ä¹Ÿèƒ½é€šè¿‡è¿™ç§æ–¹å¼ç»™æˆ‘ä»¬çš„æ’ä»¶ä¼ å‚å‘¢ï¼Ÿ 123456789101112131415//plugins/MyPlugin.jsclass MyPlugin &#123; constructor(options) &#123; console.log(&quot;Pluginè¢«åˆ›å»ºäº†&quot;); console.log(options); this.options = options; &#125; apply (compiler) &#123;&#125;&#125;//webpack.config.jsmodule.exports = &#123; plugins: [ new MyPlugin(&#123; title: &#x27;MyPlugin&#x27; &#125;) ],&#125; æˆ‘ä»¬åœ¨æ„å»ºæ’ä»¶æ—¶å°±èƒ½é€šè¿‡optionsè·å–é…ç½®ä¿¡æ¯ï¼Œå¯¹æ’ä»¶åšä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚åœ¨æ„é€ å‡½æ•°ä¸­æˆ‘ä»¬å‘ç°å¤šäº†ä¸€ä¸ªapplyå‡½æ•°ï¼Œå®ƒä¼šåœ¨webpackè¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œå¹¶ä¸”æ³¨å…¥compilerå¯¹è±¡ï¼›å…¶å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š webpackå¯åŠ¨ï¼Œæ‰§è¡Œnew myPlugin(options)ï¼Œåˆå§‹åŒ–æ’ä»¶å¹¶è·å–å®ä¾‹ åˆå§‹åŒ–complierå¯¹è±¡ï¼Œè°ƒç”¨myPlugin.apply(complier)ç»™æ’ä»¶ä¼ å…¥complierå¯¹è±¡ æ’ä»¶å®ä¾‹è·å–complierï¼Œé€šè¿‡complierç›‘å¬webpackå¹¿æ’­çš„äº‹ä»¶ï¼Œé€šè¿‡complierå¯¹è±¡æ“ä½œwebpack æˆ‘ä»¬å¯ä»¥é€šè¿‡applyå‡½æ•°ä¸­æ³¨å…¥çš„compilerå¯¹è±¡è¿›è¡Œæ³¨å†Œäº‹ä»¶ï¼š 123456789101112class MyPlugin &#123; apply(compiler) &#123; //ä¸æ¨èä½¿ç”¨ï¼Œpluginå‡½æ•°è¢«åºŸå¼ƒäº† // compiler.plugin(&quot;compile&quot;, (compilation) =&gt; &#123; // console.log(&quot;compile&quot;); // &#125;); //æ³¨å†Œå®Œæˆçš„é’©å­ compiler.hooks.done.tap(&quot;MyPlugin&quot;, (compilation) =&gt; &#123; console.log(&quot;compilation done&quot;); &#125;); &#125;&#125; compilerä¸ä»…æœ‰åŒæ­¥çš„é’©å­ï¼Œé€šè¿‡tapå‡½æ•°æ¥æ³¨å†Œï¼Œè¿˜æœ‰å¼‚æ­¥çš„é’©å­ï¼Œé€šè¿‡tapAsyncå’ŒtapPromiseæ¥æ³¨å†Œï¼š 123456789101112131415161718class MyPlugin &#123; apply(compiler) &#123; compiler.hooks.run.tapAsync(&quot;MyPlugin&quot;, (compilation, callback) =&gt; &#123; setTimeout(()=&gt;&#123; console.log(&quot;compilation run&quot;); callback() &#125;, 1000) &#125;); compiler.hooks.emit.tapPromise(&quot;MyPlugin&quot;, (compilation) =&gt; &#123; return new Promise((resolve, reject) =&gt; &#123; setTimeout(()=&gt;&#123; console.log(&quot;compilation emit&quot;); resolve(); &#125;, 1000) &#125;); &#125;); &#125;&#125; è¿™é‡Œåˆæœ‰ä¸€ä¸ªcompilationå¯¹è±¡ï¼Œå®ƒå’Œä¸Šé¢æåˆ°çš„compilerå¯¹è±¡éƒ½æ˜¯Pluginå’Œwebpackä¹‹é—´çš„æ¡¥æ¢ï¼š compilerå¯¹è±¡åŒ…å«äº† Webpack ç¯å¢ƒæ‰€æœ‰çš„çš„é…ç½®ä¿¡æ¯ã€‚è¿™ä¸ªå¯¹è±¡åœ¨å¯åŠ¨ webpack æ—¶è¢«ä¸€æ¬¡æ€§å»ºç«‹ï¼Œå¹¶é…ç½®å¥½æ‰€æœ‰å¯æ“ä½œçš„è®¾ç½®ï¼ŒåŒ…æ‹¬ optionsï¼Œloader å’Œ pluginã€‚å½“åœ¨ webpack ç¯å¢ƒä¸­åº”ç”¨ä¸€ä¸ªæ’ä»¶æ—¶ï¼Œæ’ä»¶å°†æ”¶åˆ°æ­¤ compiler å¯¹è±¡çš„å¼•ç”¨ã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è®¿é—® webpack çš„ä¸»ç¯å¢ƒã€‚ compilationå¯¹è±¡åŒ…å«äº†å½“å‰çš„æ¨¡å—èµ„æºã€ç¼–è¯‘ç”Ÿæˆèµ„æºã€å˜åŒ–çš„æ–‡ä»¶ç­‰ã€‚å½“è¿è¡Œwebpack å¼€å‘ç¯å¢ƒä¸­é—´ä»¶æ—¶ï¼Œæ¯å½“æ£€æµ‹åˆ°ä¸€ä¸ªæ–‡ä»¶å˜åŒ–ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ compilationï¼Œä»è€Œç”Ÿæˆä¸€ç»„æ–°çš„ç¼–è¯‘èµ„æºã€‚compilation å¯¹è±¡ä¹Ÿæä¾›äº†å¾ˆå¤šå…³é”®æ—¶æœºçš„å›è°ƒï¼Œä»¥ä¾›æ’ä»¶åšè‡ªå®šä¹‰å¤„ç†æ—¶é€‰æ‹©ä½¿ç”¨ã€‚ compilerå’Œcompilationçš„åŒºåˆ«åœ¨äºï¼š compilerä»£è¡¨äº†æ•´ä¸ªwebpackä»å¯åŠ¨åˆ°å…³é—­çš„ç”Ÿå‘½å‘¨æœŸï¼Œè€Œcompilationåªæ˜¯ä»£è¡¨äº†ä¸€æ¬¡æ–°çš„ç¼–è¯‘è¿‡ç¨‹ compilerå’Œcompilationæš´éœ²å‡ºè®¸å¤šé’©å­ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚çš„åœºæ™¯è¿›è¡Œè‡ªå®šä¹‰å¤„ç† æ‰‹å†™FileListPlugin äº†è§£äº†compilerå’Œcompilationçš„åŒºåˆ«ï¼Œæˆ‘ä»¬å°±æ¥å°è¯•ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹æ’ä»¶ï¼Œåœ¨æ‰“åŒ…ç›®å½•ç”Ÿæˆä¸€ä¸ªfilelist.mdæ–‡ä»¶ï¼Œæ–‡ä»¶çš„å†…å®¹æ˜¯å°†æ‰€æœ‰æ„å»ºç”Ÿæˆæ–‡ä»¶å±•ç¤ºåœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼š 1234567891011121314151617181920212223class FileListPlugin &#123; apply(compiler)&#123; compiler.hooks.emit.tapAsync(&#x27;FileListPlugin&#x27;, (compilation, callback)=&gt;&#123; var filelist = &#x27;In this build:\\n\\n&#x27;; // éå†æ‰€æœ‰ç¼–è¯‘è¿‡çš„èµ„æºæ–‡ä»¶ï¼Œ // å¯¹äºæ¯ä¸ªæ–‡ä»¶åç§°ï¼Œéƒ½æ·»åŠ ä¸€è¡Œå†…å®¹ã€‚ for (var filename in compilation.assets) &#123; filelist += &#x27;- &#x27; + filename + &#x27;\\n&#x27;; &#125; // å°†è¿™ä¸ªåˆ—è¡¨ä½œä¸ºä¸€ä¸ªæ–°çš„æ–‡ä»¶èµ„æºï¼Œæ’å…¥åˆ° webpack æ„å»ºä¸­ï¼š compilation.assets[&#x27;filelist.md&#x27;] = &#123; source: function() &#123; return filelist; &#125;, size: function() &#123; return filelist.length; &#125; &#125;; callback(); &#125;) &#125;&#125;module.exports = FileListPlugin æˆ‘ä»¬è¿™é‡Œç”¨åˆ°äº†assetså¯¹è±¡ï¼Œå®ƒæ˜¯æ‰€æœ‰æ„å»ºæ–‡ä»¶çš„ä¸€ä¸ªè¾“å‡ºå¯¹è±¡ï¼Œæ‰“å°å‡ºæ¥å¤§æ¦‚é•¿è¿™æ ·ï¼š 1234&#123; &#x27;main.bundle.js&#x27;: &#123; source: [Function: source], size: [Function: size] &#125;, &#x27;index.html&#x27;: &#123; source: [Function: source], size: [Function: size] &#125;&#125; æˆ‘ä»¬æ‰‹åŠ¨åŠ å…¥ä¸€ä¸ªfilelist.mdæ–‡ä»¶çš„è¾“å‡ºï¼›æ‰“åŒ…åæˆ‘ä»¬åœ¨distæ–‡ä»¶å¤¹ä¸­ä¼šå‘ç°å¤šäº†è¿™ä¸ªæ–‡ä»¶ï¼š 1234In this build:- main.bundle.js- index.html è¿™ä¸ªæ’ä»¶å°±å®Œæˆäº†æˆ‘ä»¬çš„é¢„æœŸä»»åŠ¡äº†ã€‚ å‚è€ƒ webpack loaderä»å…¥é—¨åˆ°ç²¾é€šå…¨è§£æ","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"}]},{"title":"å››ç§å®ç°æµè§ˆå™¨æ ‡ç­¾é¡µæ•°æ®é€šä¿¡æ–¹å¼","date":"2020-09-12T04:47:49.000Z","path":"2020/09/12/Tab-Communicate.html","text":"æµè§ˆå™¨å¯ä»¥æ‰“å¼€å¤šä¸ªä¸åŒçš„æ ‡ç­¾é¡µï¼Œæœ‰æ—¶å€™éœ€è¦åœ¨è¿™å¤šä¸ªæ ‡ç­¾é¡µå…±äº«åŒä¸€ä»½æ•°æ®ï¼Œé‚£å¦‚ä½•åœ¨å¤šä¸ªæ ‡ç­¾é¡µä¸­è¿›è¡Œæ•°æ®çš„é€šä¿¡å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å››ç§åœ¨æ ‡ç­¾é¡µä¸­é€šä¿¡çš„æ–¹å¼ã€‚ æˆ‘ä»¬åœ¨ç½‘æ˜“äº‘å¬æ­Œæ—¶ï¼Œå¯ä»¥æ‰“å¼€å¤šä¸ªæ ‡ç­¾é¡µè¿›è¡Œæ’­æ”¾ï¼›ä½†æ˜¯æˆ‘ä»¬å‘ç°åœ¨ä¸€ä¸ªæ ‡ç­¾é¡µæ’­æ”¾çš„åŒæ—¶ï¼Œå…¶ä»–æ ‡ç­¾å¦‚æœæ­£åœ¨æ’­æ”¾ï¼Œéƒ½ä¼šè‡ªåŠ¨çš„åœæ­¢ã€‚ æƒ³æƒ³è¿™æ ·ä¹Ÿæ˜¯åˆç†çš„ï¼Œå› ä¸ºæ¯•ç«Ÿå¦‚æœå¤šä¸ªæ ‡ç­¾é¡µéƒ½åŒæ—¶æ’­æ”¾å£°éŸ³å°±ä¼šå¹²æ‰°ï¼ŒåŒä¸€æ—¶é—´åªèƒ½å­˜åœ¨ä¸€ä¸ªéŸ³ä¹æ’­æ”¾ï¼›å› æ­¤æˆ‘ä»¬ä¹Ÿæ¥å°è¯•å®ç°è¿™æ ·ä¸€ä¸ªéœ€æ±‚ï¼Œåœ¨ä¸åŒæµè§ˆå™¨ä¸­è¿›è¡Œæ•°æ®é€šä¿¡ï¼š æˆ‘ä»¬é¦–å…ˆæ¥å‡†å¤‡ä¸€äº›æ•°æ®ï¼Œå’Œç½‘æ˜“äº‘ä¸€æ ·ï¼Œå‡†å¤‡ä¸€ä¸ªä¸“è¾‘åˆ—è¡¨ï¼Œæ¯ä¸ªä¸“è¾‘åˆ—è¡¨ä¸­æœ‰ä¸åŒçš„æ­Œæ›²ï¼Œå¯ä»¥é€šè¿‡URLå‚æ•°ä¼ é€’idæ¥è·å–ä¸åŒçš„ä¸“è¾‘é¡µé¢ï¼š 12345678910111213141516171819202122&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;box&quot;&gt; &lt;div class=&quot;item header&quot;&gt; &lt;div class=&quot;index&quot;&gt;&lt;/div&gt; &lt;div class=&quot;name&quot;&gt;æ­Œæ›²æ ‡é¢˜&lt;/div&gt; &lt;div class=&quot;time&quot;&gt;æ—¶é•¿&lt;/div&gt; &lt;div class=&quot;singer&quot;&gt;æ­Œæ‰‹&lt;/div&gt; &lt;div class=&quot;album&quot;&gt;ä¸“è¾‘&lt;/div&gt; &lt;/div&gt; &lt;template v-for=&quot;(item, index) in list&quot;&gt; &lt;div :class=&quot;[&#x27;item&#x27;,&#x27;music&#x27;,activeIndex == index ? &#x27;active&#x27;:&#x27;&#x27;]&quot; @click=&quot;clickMusic(item, index)&quot; :key=&quot;index&quot;&gt; &lt;div class=&quot;index&quot;&gt;&#123;&#123;index+1&#125;&#125;&lt;/div&gt; &lt;div class=&quot;name&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/div&gt; &lt;div class=&quot;time&quot;&gt;&#123;&#123;item.time&#125;&#125;&lt;/div&gt; &lt;div class=&quot;singer&quot;&gt;&#123;&#123;item.singer&#125;&#125;&lt;/div&gt; &lt;div class=&quot;album&quot;&gt;&#123;&#123;item.album&#125;&#125;&lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;/div&gt;&lt;/div&gt; 123456789101112131415161718192021222324252627new Vue(&#123; el: &#x27;#app&#x27;, data() &#123; return &#123; list: [], activeIndex: -1, &#125; &#125;, mounted() &#123; const &#123; id = &#x27;1&#x27; &#125; = Qs.parse(window.location.search, &#123; ignoreQueryPrefix: true &#125;) axios(&#123; url: &#x27;/api/list&#x27;, params: &#123; id, &#125; &#125;).then((res) =&gt; &#123; return res.data &#125;).then((res) =&gt; &#123; const &#123; list &#125; = res this.list = list &#125;) &#125;,&#125;) cookie è¦æƒ³åœ¨æ‰€æœ‰çš„æ ‡ç­¾é¡µä¸­å®ç°é€šä¿¡ï¼Œæˆ‘ä»¬å¿…é¡»å°†æ•°æ®å­˜æ”¾åˆ°ä¸€ä¸ªå…¬å…±çš„å­˜å‚¨ç©ºé—´ï¼Œæ‰€æœ‰çš„æ ‡ç­¾é¡µéƒ½èƒ½è·å–å¹¶ä¸”è¿˜èƒ½è¿›è¡Œä¿®æ”¹ï¼›æˆ‘ä»¬çŸ¥é“ï¼Œcookieåœ¨ç”¨æˆ·æ‰€æœ‰æµè§ˆå™¨æ ‡ç­¾é¡µä¸­éƒ½æ˜¯å…±äº«çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æŠŠé€‰ä¸­çš„æ•°æ®å­˜æ”¾åˆ°cookieä¸­å»ï¼š 1234567891011121314151617181920212223242526272829new Vue(&#123; mounted() &#123; setInterval(() =&gt; &#123; let newValue = Cookies.get(&#x27;music&#x27;) if (newValue) &#123; let parse = &#123;&#125; try &#123; parse = JSON.parse(newValue) &#125; catch (error) &#123;&#125; let &#123; list, &#125; = this let activeIndex = -1 list.map((item, index) =&gt; &#123; if (item.name == parse.name) &#123; activeIndex = index &#125; &#125;) this.activeIndex = activeIndex &#125; &#125;, 1000) &#125;, methods: &#123; clickMusic(item, index) &#123; this.activeIndex = index Cookies.set(&#x27;music&#x27;, JSON.stringify(item)) &#125; &#125;&#125;) ç”±äºæ›´æ–°cookieå¹¶ä¸èƒ½è§¦å‘ä»»ä½•äº‹ä»¶ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡å®šæ—¶å™¨setIntervalæ¥ä¸»åŠ¨ç›‘å¬cookieä¸­çš„å€¼æ˜¯å¦æ”¹å˜ï¼›ä»£ç çœ‹èµ·æ¥æ²¡æœ‰é—®é¢˜ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿è¡Œçš„æ•ˆæœï¼š å­˜åœ¨ä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š å®šæ—¶å™¨å­˜åœ¨æ—¶é—´å·®ï¼Œç‚¹å‡»åæœ‰ä¸€å®šçš„å»¶è¿Ÿï¼Œcookieæœ¬èº«çš„å¼Šç«¯ åœ¨åŒä¸€ä¸ªä¸“è¾‘idé¡µé¢ä¸‹ï¼Œç”±äºé€‰ä¸­çš„æ•°æ®æ²¡æœ‰åŒºåˆ†é¡µé¢ï¼Œç›¸åŒéŸ³ä¹itemä¹Ÿä¼šè¢«é€‰ä¸­ å› æ­¤æˆ‘ä»¬éœ€è¦ç»™æ¯ä¸€ä¸ªé¡µé¢åŒºåˆ†ä¸€ä¸ªé¡µé¢idï¼›è¿™ä¸ªé¡µé¢idå¯ä»¥ä»åå°æ¥å£ä¸­è·å–ï¼Œè¿™é‡Œä¸ºäº†ç®€å•å±•ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºé¡µé¢idï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546//çœç•¥å…¶ä»–ä»£ç new Vue(&#123; data() &#123; return &#123; page_id: &#x27;0&#x27;, &#125; &#125;, mounted() &#123; let timestamp = new Date().getTime() this.page_id = timestamp + &#x27;&#x27; setInterval(() =&gt; &#123; let newValue = Cookies.get(&#x27;music&#x27;) if (newValue) &#123; let parse = &#123;&#125; try &#123; parse = JSON.parse(newValue) &#125; catch (error) &#123;&#125; let &#123; list, &#125; = this let activeIndex = -1 list.map((item, index) =&gt; &#123; //æ˜¯å½“å‰é¡µé¢çš„idæ˜¯æ‰é€‰ä¸­æ•°æ® if (item.name == parse.name &amp;&amp; parse.page_id == page_id) &#123; activeIndex = index &#125; &#125;) this.activeIndex = activeIndex &#125; &#125;, 1000) &#125;, methods: &#123; clickMusic(item, index) &#123; this.activeIndex = index let &#123; page_id &#125; = this //å­˜æ”¾åˆ°cookieæ—¶å°†é¡µé¢idå¸¦å…¥ item = Object.assign(&#123; page_id, &#125;, item) Cookies.set(&#x27;music&#x27;, JSON.stringify(item)) &#125; &#125;&#125;) æˆ‘ä»¬è™½ç„¶èƒ½é€šè¿‡ç»™æ¯ä¸ªé¡µé¢åˆ†é…idæ¥è§£å†³é—®é¢˜2ï¼Œä½†æ˜¯ç”±äºå®šæ—¶å™¨çš„å¼Šç«¯ï¼Œcookie+setIntervalçš„æ–¹æ¡ˆä¼šå­˜åœ¨å»¶æ—¶çš„æƒ…å†µã€‚ localStorage localStorageä¹Ÿæ˜¯æµè§ˆå™¨å¤šä¸ªé¡µé¢å…±ç”¨çš„å­˜å‚¨ç©ºé—´ï¼›è€Œä¸”localStorageåœ¨ä¸€ä¸ªé¡µé¢ä¸­æ·»åŠ ã€ä¿®æ”¹æˆ–è€…åˆ é™¤æ—¶ï¼Œéƒ½ä¼šåœ¨éå½“å‰é¡µé¢ä¸­è¢«åŠ¨è§¦å‘ä¸€ä¸ªstorageäº‹ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡åœ¨å…¶ä»–é¡µé¢ä¸­ç›‘å¬storageäº‹ä»¶ï¼Œå³å¯æ‹¿åˆ°storageæ›´æ–°å‰åçš„å€¼ï¼š 123456789101112131415161718192021222324252627282930//çœç•¥å…¶ä»–ä»£ç new Vue(&#123; mounted() &#123; let timestamp = new Date().getTime() this.page_id = timestamp + &#x27;&#x27; window.addEventListener(&#x27;storage&#x27;, (ev) =&gt; &#123; const &#123; key, newValue, &#125; = ev if (key === &#x27;music&#x27; &amp;&amp; newValue) &#123; let parse = &#123;&#125; try &#123; parse = JSON.parse(newValue) &#125; catch (error) &#123;&#125; let &#123; list, page_id &#125; = this let activeIndex = -1 list.map((item, index) =&gt; &#123; if (item.name == parse.name &amp;&amp; parse.page_id == page_id) &#123; activeIndex = index &#125; &#125;) this.activeIndex = activeIndex &#125; &#125;) &#125;,&#125;) ç›¸è¾ƒäºcookieçš„ä¸»åŠ¨ç›‘å¬ï¼ŒlocalStorageçš„è¢«åŠ¨è§¦å‘ä¸ä»…åœ¨ä»£ç æ˜¾å¾—æ›´åŠ å‹å¥½ï¼Œè€Œä¸”è¿˜æå¤§çš„é¿å…äº†å®šæ—¶å™¨å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚ webworker æˆ‘ä»¬åœ¨ã€Šä»ä¸€é“é¢è¯•é¢˜æ¥ç†è§£JSäº‹ä»¶å¾ªç¯ã€‹æåˆ°ï¼Œwebworkeråªèƒ½ç”¨æ¥åšä¸€äº›æ¶ˆè€—CPUçš„é€»è¾‘è¿ç®—ç­‰ï¼›webworkerä¹Ÿåˆ†ä¸ºWorkerå’ŒSharedWorkerï¼Œæ™®é€šçš„workerå¯ä»¥ç›´æ¥ä½¿ç”¨new Worker()åˆ›å»ºï¼Œåªåœ¨å½“å‰é¡µé¢ä¸­ä½¿ç”¨ï¼›è€ŒSharedWorkeré€šè¿‡åå­—æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºï¼Œæ˜¯å¯ä»¥åœ¨å¤šä¸ªæ ‡ç­¾é¡µé¢ä¸­æ•°æ®æ˜¯å…±äº«çš„ï¼› SharedWorkerå’ŒWorkerä¸åŒä¹‹å¤„åœ¨äºå®ƒç¬¬äºŒä¸ªå‚æ•°å¯ä»¥åšç›´æ¥æŒ‡å®šnameï¼Œæˆ–è€…ä½¿ç”¨å¯¹è±¡å‚æ•°ï¼Œå› æ­¤ä¸‹é¢ä¸‰ç§æ„é€ æ–¹å¼æ˜¯ç›¸åŒçš„ï¼š 123new SharedWorker(&#x27;/public/shared.js&#x27;, &#x27;musicWorker&#x27;);new SharedWorker(&#x27;/public/shared.js&#x27;, &#123; name: &#x27;musicWorker&#x27; &#125;);new SharedWorker(&#x27;/public/shared.js&#x27;, &#x27;musicWorker&#x27;, &#123; type: &#x27;classic&#x27; &#125;); æ„é€ äº†SharedWorkerå®ä¾‹å¯¹è±¡åï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡å…¶portå±æ€§è¿›è¡Œé€šä¿¡ï¼Œä¸»è¦çš„APIå¦‚ä¸‹ï¼š 12345const sw = new SharedWorker(&#x27;/public/shared.js&#x27;);//å‘é€æ•°æ®sw.port.postMessage(&#x27;...&#x27;)//ç›‘å¬æ•°æ®sw.port.onmessage = function (event) &#123; // ... &#125; ç”±äºæ„é€ çš„å¤šä¸ªSharedWorkerå®ä¾‹å½¢æˆäº†ä¸€ä¸ªå…±äº«çš„è¿æ¥ï¼Œå› æ­¤åœ¨è¿æ¥æˆåŠŸæ—¶ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªå®ä¾‹åˆ†é…ä¸€ä¸ªå”¯ä¸€idï¼š 12345678910111213141516171819202122232425262728293031323334//main.jsnew Vue(&#123; data() &#123; return &#123; workder_id: 0, sw: &#123;&#125;, &#125; &#125;, mounted() &#123; this.sw = new SharedWorker(&#x27;/public/shared.js&#x27;); this.sw.port.addEventListener(&#x27;message&#x27;, (ev) =&gt; &#123; let &#123; type, data &#125; = ev.data //åˆå§‹åŒ–è¿æ¥æ—¶è¿”å›ä¸€ä¸ªid if (type == &#x27;id&#x27;) &#123; this.workder_id = data &#125; &#125;) this.sw.port.start() &#125;, methods: &#123; clickMusic(item, index) &#123; //çœç•¥éƒ¨åˆ†ä»£ç  //æ¯æ¬¡é€šä¿¡æ—¶å°†idå¸¦ä¸Š this.sw.port.postMessage(&#123; type: &#x27;set&#x27;, id: this.workder_id, data: item &#125;) &#125; &#125;&#125;) æˆ‘ä»¬åœ¨ShareWorkerå†…éƒ¨ç›‘å¬connectäº‹ä»¶ï¼Œå¹¶ä¸”å¤„ç†å†…éƒ¨çš„portäº‹ä»¶ï¼š 12345678910111213141516171819202122232425262728293031323334353637//shared.jsconst connectedClients = new Set()let id = 1//ç»™å…¶ä»–è¿æ¥ç«¯å‘é€æ¶ˆæ¯function sendMessageToClients(payload, currentClientId = null) &#123; connectedClients.forEach((&#123; id, client &#125;) =&gt; &#123; if (currentClientId &amp;&amp; currentClientId == id) return; client.postMessage(payload); &#125;);&#125;//å½“å‰è¿æ¥ç»‘å®šæ¶ˆæ¯ç›‘å¬function setupClient(clientPort) &#123; clientPort.onmessage = (event) =&gt; &#123; const &#123; type, data, id &#125; = event.data; if(type==&#x27;set&#x27;)&#123; sendMessageToClients(&#123; type: &#x27;get&#x27;, data: data, &#125;, id) &#125; &#125;;&#125;self.addEventListener(&quot;connect&quot;, (event) =&gt; &#123; const newClient = event.source; //æ¯æ¬¡è¿æ¥åç»™clientå”¯ä¸€idæ ‡è¯† //å°†æ¯æ¬¡è¿æ¥å­˜åœ¨æ•°ç»„ä¸­ connectedClients.add(&#123; client: newClient, id: id, &#125;); setupClient(newClient); newClient.postMessage(&#123; type: &#x27;id&#x27;, data: id &#125;) id++&#125;); å½“å†™shared.jsï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°é—®é¢˜ï¼Œé‚£ä¹ˆæ€ä¹ˆæ¥è°ƒè¯•sharedworkerå‘¢ï¼Ÿç›´æ¥console.logå¹¶ä¸ä¼šåœ¨æ ‡ç­¾é¡µé¢ä¸­æœ‰è¾“å‡ºï¼›æˆ‘ä»¬æ‰“å¼€æ–°çš„æ ‡ç­¾é¡µchrome://inspectï¼Œé€‰æ‹©Shared workersç„¶åå†é€‰æ‹©å¯¹åº”è„šæœ¬ï¼Œå°±èƒ½æ„‰å¿«çš„è°ƒè¯•äº†ã€‚ websocket websocketä½œä¸ºå…¨åŒå·¥é€šä¿¡ï¼Œè‡ªç„¶å¯ä»¥å®ç°å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´çš„é€šä¿¡ï¼›WebSocketæ˜¯HTML5æ–°å¢çš„åè®®ï¼Œå®ƒçš„ç›®çš„æ˜¯åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹ä¸€ä¸ªä¸å—é™çš„åŒå‘é€šä¿¡çš„é€šé“ã€‚ è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨expressçš„ä¸€ä¸ªæ¡†æ¶express-wsæ¥æ¨¡æ‹ŸwebsocketæœåŠ¡å™¨ï¼›ç”±äºæœåŠ¡å™¨ä¼šå‚¨å­˜å¾ˆå¤šæ ‡ç­¾é¡µçš„è¿æ¥å¯¹è±¡ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªç”¨æˆ·è¿›è¡Œå”¯ä¸€æ ‡è¯†è¿›è¡ŒåŒºåˆ†ï¼›æˆ‘ä»¬ä»æœåŠ¡å™¨è·å–user_idå¹¶ä¿å­˜ã€‚ 12345678910111213141516171819202122232425262728293031323334//çœç•¥å…¶ä»–ä»£ç new Vue(&#123; el: &#x27;#app&#x27;, data() &#123; return &#123; list: [], activeIndex: -1, page_id: &#x27;0&#x27;, ws: null &#125; &#125;, mounted() &#123; let timestamp = new Date().getTime() this.page_id = timestamp + &#x27;&#x27; let store_user_id = Cookies.get(&#x27;user_id&#x27;) if (!!store_user_id) &#123; this.connectWs(store_user_id) &#125; else &#123; axios(&#123; url: &#x27;/api/get_user_id&#x27; &#125;) .then((res) =&gt; &#123; return res.data &#125;) .then((res) =&gt; &#123; let &#123; user_id &#125; = res Cookies.set(&#x27;user_id&#x27;, user_id) this.connectWs(user_id) &#125;) &#125; &#125;,&#125;) é€šè¿‡user_idæˆ‘ä»¬å°±å¯ä»¥å‘websocketæœåŠ¡å™¨è¿æ¥å¹¶å‘èµ·è¯·æ±‚äº†ã€‚ 123456789101112131415161718192021222324252627282930313233343536//çœç•¥å…¶ä»–ä»£ç new Vue(&#123; methods: &#123; clickMusic(item, index) &#123; this.activeIndex = index let &#123; page_id &#125; = this item = Object.assign(&#123; page_id, &#125;, item) this.ws.send(JSON.stringify(item)) &#125;, connectWs(user_id) &#123; var ws = new WebSocket(`ws://localhost:9010/ws/$&#123;user_id&#125;`) ws.onmessage = (e) =&gt; &#123; let parse = &#123;&#125; try &#123; parse = JSON.parse(e.data) &#125; catch (error) &#123;&#125; let &#123; list, page_id &#125; = this let activeIndex = -1 list.map((item, index) =&gt; &#123; if (item.name == parse.name &amp;&amp; parse.page_id == page_id) &#123; activeIndex = index &#125; &#125;) this.activeIndex = activeIndex &#125;; this.ws = ws &#125; &#125;&#125;) åœ¨æ ‡ç­¾é¡µæ¯æ¬¡å’Œwebsocketå»ºç«‹è¿æ¥åï¼Œå°†è¿æ¥å¯¹è±¡å­˜æ”¾åˆ°æ•°ç»„ä¸­ã€‚ 12345678910111213141516171819202122232425262728293031323334//çœç•¥å…¶ä»–ä»£ç const expressWs = require(&quot;express-ws&quot;)(app);let clients = [];let musicNum = null;app.ws(&quot;/ws/:user_id&quot;, function (ws, req) &#123; let &#123; user_id &#125; = req.params; clients.push(&#123; user_id, ws, &#125;); ws.send(&quot;è¿æ¥æˆåŠŸ&quot;); ws.on(&quot;message&quot;, function (msg) &#123; let parsed = &#123;&#125;; try &#123; parsed = JSON.parse(msg); &#125; catch (error) &#123;&#125; musicNum = parsed; for (let i = 0; i &lt; clients.length; i++) &#123; let item = clients[i]; if (item.user_id === user_id &amp;&amp; item !== this) &#123; item.ws.send(msg); &#125; &#125; &#125;); ws.on(&quot;close&quot;, function () &#123; for (let i = 0; i &lt; clients.length; i++) &#123; if (clients[i].ws === this) &#123; clients.splice(i, 1); &#125; &#125; &#125;);&#125;); æœ¬æ–‡æ‰€æœ‰ä»£ç éƒ½åœ¨gitä»“åº“","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"}]},{"title":"Webpacké…ç½®å…¨è§£æï¼ˆä¼˜åŒ–ç¯‡ï¼‰","date":"2020-07-30T04:00:00.000Z","path":"2020/07/30/Webpack-Optimize.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« Webpacké…ç½®å…¨è§£æä»‹ç»äº†Webpackä¸­loaderå’Œpluginsçš„ä¸€äº›åŸºæœ¬ç”¨æ³•ï¼Œå½“loaderå’Œpluginsä½¿ç”¨è¾ƒå¤šåé¡¹ç›®ä¹Ÿä¼šè¶Šæ¥è¶Šè€—æ—¶ï¼Œå› æ­¤è¿™æ¬¡æˆ‘ä»¬ç»§ç»­å­¦ä¹ å¦‚ä½•ä¼˜åŒ–webpackçš„é…ç½®æ¥è®©æˆ‘ä»¬çš„é¡¹ç›®è¿è¡Œçš„æ›´å¿«è€—æ—¶æ›´çŸ­ã€‚ æœ¬æ–‡å°†ä»ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´ã€å‡å°‘æ‰“åŒ…æ–‡ä»¶ã€ç¼“å­˜å’Œå¤šè¿›ç¨‹å››ä¸ªæ–¹é¢æ¥äº†è§£Webpackçš„ä¼˜åŒ–é…ç½®ã€‚ ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´ Webpackä¼šä»Entryå…¥å£å‡ºå‘ï¼Œè§£ææ–‡ä»¶ä¸­çš„å¯¼å…¥æ¨¡å—è¯­å¥ï¼Œå†é€’å½’è§£æï¼›æ¯æ¬¡é‡åˆ°å¯¼å…¥è¯­æ³•æ—¶ä¼šåšä¸¤ä»¶äº‹æƒ…ï¼š æŸ¥æ‰¾å¯¼å…¥æ¨¡å—çš„ä½ç½®ï¼Œæ¯”å¦‚require(&#39;vue&#39;)å°±å»å¼•å…¥/node_modules/vue/dist/vue.runtime.common.jsæ–‡ä»¶ é€šè¿‡ç›¸åº”çš„loaderæ¥è§£æå¯¼å…¥çš„æ¨¡å—ï¼Œæ¯”å¦‚å¼•å…¥çš„jså°±è°ƒç”¨babel-loaderæ¥è½¬æ¢ä»£ç  å½“é¡¹ç›®åªæœ‰å‡ ä¸ªæ–‡ä»¶æ—¶ï¼Œè§£ææ–‡ä»¶æµç¨‹åªæœ‰å‡ ç™¾æ¯«ç§’ï¼Œç„¶è€Œéšç€é¡¹ç›®è§„æ¨¡çš„å¢å¤§ï¼Œè§£ææ–‡ä»¶ä¼šè¶Šæ¥è¶Šè€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬é€šè¿‡webpackçš„é…ç½®æ¥ç¼©å°æˆ‘ä»¬æœç´¢æ¨¡å—çš„èŒƒå›´ ä¼˜åŒ–loaderé…ç½® åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä½¿ç”¨include/excludeå°†node_modulesä¸­çš„æ–‡ä»¶è¿›è¡ŒåŒ…æ‹¬/æ’é™¤ã€‚ 12345678910&#123; rules: [&#123; test: /\\.js$/, use: &#123; loader: &#x27;babel-loader&#x27; &#125;, // exclude: /node_modules/, include: [path.resolve(__dirname, &#x27;src&#x27;)] &#125;]&#125; includeè¡¨ç¤ºå“ªäº›ç›®å½•ä¸­çš„æ–‡ä»¶éœ€è¦è¿›è¡Œbabel-loaderï¼Œexcludeè¡¨ç¤ºå“ªäº›ç›®å½•ä¸­çš„æ–‡ä»¶ä¸è¦è¿›è¡Œbabel-loaderã€‚è¿™æ˜¯å› ä¸ºåœ¨å¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¶å€™ï¼Œå¾ˆå¤šæ¨¡å—å·²ç»æ˜¯æ‰“åŒ…åçš„ï¼Œä¸éœ€è¦å†è¢«å¤„ç†ï¼Œæ¯”å¦‚vueã€jQueryç­‰ï¼›å¦‚æœä¸è®¾ç½®include/excludeå°±ä¼šè¢«loaderå¤„ç†ï¼Œå¢åŠ æ‰“åŒ…æ—¶é—´ã€‚ ä¼˜åŒ–module.noParseé…ç½® å¦‚æœä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—æ²¡æœ‰ä½¿ç”¨AMD/CommonJsè§„èŒƒï¼Œå¯ä»¥ä½¿ç”¨noParseæ¥æ ‡è®°è¿™ä¸ªæ¨¡å—ï¼Œè¿™æ ·Webpackåœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œå°±ä¸è¿›è¡Œè§£æå’Œè½¬æ¢ï¼Œæå‡Webpackçš„æ„å»ºé€Ÿåº¦ï¼›noParseå¯ä»¥æ¥å—ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªå‡½æ•°ï¼š 12345678&#123; module: &#123; //noParse: /jquery|lodash|chartjs/, noParse: function(content)&#123; return /jquery|lodash|chartjs/.test(content) &#125; &#125;&#125; å¯¹äºjQueryã€lodashã€chartjsç­‰ä¸€äº›åº“ï¼Œåºå¤§ä¸”æ²¡æœ‰é‡‡ç”¨æ¨¡å—åŒ–æ ‡å‡†ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸è§£æä»–ä»¬ã€‚ æ³¨ï¼šè¢«ä¸è§£æçš„æ¨¡å—æ–‡ä»¶ä¸­ä¸åº”è¯¥åŒ…å«requireã€importç­‰æ¨¡å—è¯­å¥ ç»è¿‡å¤šæ¬¡æ‰“åŒ…å°è¯•ï¼Œæ‰“åŒ…æ€§èƒ½å¤§æ¦‚èƒ½æå‡10%~20%ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç demoï¼Œ ä¼˜åŒ–resolve.modulesé…ç½® modulesç”¨äºå‘Šè¯‰webpackå»å“ªäº›ç›®å½•ä¸‹æŸ¥æ‰¾å¼•ç”¨çš„æ¨¡å—ï¼Œé»˜è®¤å€¼æ˜¯[&quot;node_modules&quot;]ï¼Œæ„æ€æ˜¯åœ¨./node_modulesæŸ¥æ‰¾æ¨¡å—ï¼Œæ‰¾ä¸åˆ°å†å»../node_modulesï¼Œä»¥æ­¤ç±»æ¨ã€‚ æˆ‘ä»¬ä»£ç ä¸­ä¹Ÿä¼šæœ‰å¤§é‡çš„æ¨¡å—è¢«å…¶ä»–æ¨¡å—ä¾èµ–å’Œå¼•å…¥ï¼Œç”±äºè¿™äº›æ¨¡å—ä½ç½®åˆ†å¸ƒä¸å›ºå®šï¼Œè·¯å¾„æœ‰æ—¶å€™ä¼šå¾ˆé•¿ï¼Œæ¯”å¦‚import &#39;../../src/components/button&#39;ã€import &#39;../../src/utils&#39;ï¼›è¿™æ—¶æˆ‘ä»¬å¯ä»¥åˆ©ç”¨modulesè¿›è¡Œä¼˜åŒ– 123456789&#123; resolve: &#123; modules: [ path.resolve(__dirname, &quot;src&quot;), path.resolve(__dirname, &quot;node_modules&quot;), &quot;node_modules&quot;, ], &#125;,&#125; è¿™æ ·æˆ‘ä»¬å¯ä»¥ç®€å•çš„é€šè¿‡import &#39;components/button&#39;ã€import &#39;utils&#39;è¿›è¡Œå¯¼å…¥ï¼Œwebpackä¼šä¼šä¼˜å…ˆä»srcç›®å½•ä¸‹è¿›è¡ŒæŸ¥æ‰¾ ä¼˜åŒ–resolve.aliasé…ç½® aliasé€šè¿‡åˆ›å»ºimportæˆ–è€…requireçš„åˆ«åï¼ŒæŠŠåŸæ¥å¯¼å…¥æ¨¡å—çš„è·¯å¾„æ˜ å°„æˆä¸€ä¸ªæ–°çš„å¯¼å…¥è·¯å¾„ï¼›å®ƒå’Œresolve.modulesä¸åŒçš„çš„æ˜¯ï¼Œå®ƒçš„ä½œç”¨æ˜¯ç”¨åˆ«åä»£æ›¿å‰é¢çš„è·¯å¾„ï¼Œä¸æ˜¯çœç•¥ï¼›è¿™æ ·çš„å¥½å¤„å°±æ˜¯webpackç›´æ¥ä¼šå»å¯¹åº”åˆ«åçš„ç›®å½•æŸ¥æ‰¾æ¨¡å—ï¼Œå‡å°‘äº†æœç´¢æ—¶é—´ã€‚ 1234567&#123; resolve: &#123; alias: &#123; &#x27;@&#x27;: path.resolve(__dirname, &#x27;src&#x27;), &#125;, &#125;,&#125; è¿™æ ·æˆ‘ä»¬å°±èƒ½é€šè¿‡import Buttom from &#39;@/Button&#39;æ¥å¼•å…¥ç»„ä»¶äº†ï¼›æˆ‘ä»¬ä¸å…‰å¯ä»¥ç»™è‡ªå·±å†™çš„æ¨¡å—è®¾ç½®åˆ«åï¼Œè¿˜å¯ä»¥ç»™ç¬¬ä¸‰æ–¹æ¨¡å—è®¾ç½®åˆ«åï¼š 1234567&#123; resolve: &#123; alias: &#123; &#x27;vue$&#x27;: isDev ? &#x27;vue/dist/vue.runtime.js&#x27; : &#x27;vue/dist/vue.runtime.min.js&#x27;, &#125;, &#125;,&#125; æˆ‘ä»¬åœ¨import Vue from &#39;vue&#39;æ—¶ï¼Œwebpackå°±ä¼šå¸®æˆ‘ä»¬å»vueä¾èµ–åŒ…çš„distæ–‡ä»¶ä¸‹é¢å¼•å…¥å¯¹åº”çš„æ–‡ä»¶ï¼Œå‡å°‘äº†æœç´¢package.jsonçš„æ—¶é—´ã€‚ ä¼˜åŒ–resolve.mainFieldsé…ç½® mainFieldsç”¨æ¥å‘Šè¯‰webpackä½¿ç”¨ç¬¬ä¸‰æ–¹æ¨¡å—ä¸­çš„å“ªä¸ªå­—æ®µæ¥å¯¼å…¥æ¨¡å—ï¼›ç¬¬ä¸‰æ–¹æ¨¡å—ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªpackage.jsonæ–‡ä»¶ç”¨æ¥æè¿°è¿™ä¸ªæ¨¡å—çš„ä¸€äº›å±æ€§ï¼Œæ¯”å¦‚æ¨¡å—å(name)ã€ç‰ˆæœ¬å·(version)ã€ä½œè€…(auth)ç­‰ç­‰ï¼›å…¶ä¸­æœ€é‡è¦çš„å°±æ˜¯æœ‰å¤šä¸ªç‰¹æ®Šçš„å­—æ®µç”¨æ¥å‘Šè¯‰webpackå¯¼å…¥æ–‡ä»¶çš„ä½ç½®ï¼Œæœ‰å¤šä¸ªå­—æ®µçš„åŸå› æ˜¯å› ä¸ºæœ‰äº›æ¨¡å—å¯ä»¥åŒæ—¶ç”¨äºå¤šä¸ªç¯å¢ƒï¼Œè€Œæ¯ä¸ªç¯å¢ƒå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–‡ä»¶ã€‚ mainFieldsçš„é»˜è®¤å€¼å’Œå½“å‰webpacké…ç½®çš„targetå±æ€§æœ‰å…³ï¼š å¦‚æœtargetä¸ºwebworkeræˆ–webï¼ˆé»˜è®¤ï¼‰ï¼ŒmainFieldsé»˜è®¤å€¼ä¸º[&quot;browser&quot;, &quot;module&quot;, &quot;main&quot;] å¦‚æœtargetä¸ºå…¶ä»–ï¼ˆåŒ…æ‹¬nodeï¼‰ï¼ŒmainFieldsé»˜è®¤å€¼ä¸º[&quot;module&quot;, &quot;main&quot;] è¿™å°±æ˜¯è¯´å½“æˆ‘ä»¬require(&#39;vue&#39;)çš„æ—¶å€™ï¼Œwebpackå…ˆå»vueä¸‹é¢æœç´¢browserå­—æ®µï¼Œæ²¡æœ‰æ‰¾åˆ°å†å»æœç´¢moduleå­—æ®µï¼Œæœ€åæœç´¢mainå­—æ®µã€‚ ä¸ºäº†å‡å°‘æœç´¢çš„æ­¥éª¤ï¼Œåœ¨æ˜ç¡®ç¬¬ä¸‰æ–¹æ¨¡å—å…¥å£æ–‡ä»¶æè¿°å­—æ®µæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå­—æ®µè®¾ç½®å°½é‡å°‘ï¼›ä¸€èˆ¬ç¬¬ä¸‰æ–¹æ¨¡å—éƒ½é‡‡ç”¨mainå­—æ®µï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š 12345&#123; resolve: &#123; mainFields: [&quot;main&quot;], &#125;&#125; ä¼˜åŒ–resolve.extensionsé…ç½® extensionså­—æ®µç”¨æ¥åœ¨å¯¼å…¥æ¨¡å—æ—¶ï¼Œè‡ªåŠ¨å¸¦å…¥åç¼€å°è¯•å»åŒ¹é…å¯¹åº”çš„æ–‡ä»¶ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯ï¼š 12345&#123; resolve: &#123; extensions: [&#x27;.js&#x27;, &#x27;.json&#x27;] &#125;&#125; ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨require(&#39;./utils&#39;)æ—¶ï¼ŒWebpackå…ˆåŒ¹é…utils.jsï¼ŒåŒ¹é…ä¸åˆ°å†å»åŒ¹é…utils.jsonï¼Œå¦‚æœè¿˜æ‰¾ä¸åˆ°å°±æŠ¥é”™ã€‚ å› æ­¤extensionsæ•°ç»„è¶Šé•¿ï¼Œæˆ–è€…æ­£ç¡®åç¼€çš„æ–‡ä»¶è¶Šé åï¼ŒåŒ¹é…çš„æ¬¡æ•°è¶Šå¤šä¹Ÿå°±è¶Šè€—æ—¶ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä»ä»¥ä¸‹å‡ ç‚¹æ¥ä¼˜åŒ–ï¼š extensionsæ•°ç»„å°½é‡å°‘ï¼Œé¡¹ç›®ä¸­ä¸å­˜åœ¨çš„æ–‡ä»¶åç¼€ä¸è¦åˆ—è¿›å» å‡ºç°é¢‘ç‡æ¯”è¾ƒé«˜çš„æ–‡ä»¶åç¼€ä¼˜å…ˆæ”¾åˆ°æœ€å‰é¢ åœ¨ä»£ç ä¸­å¯¼å…¥æ–‡ä»¶çš„æ—¶å€™ï¼Œè¦å°½é‡æŠŠåç¼€åå¸¦ä¸Šï¼Œé¿å…æŸ¥æ‰¾ ä»¥ä¸Šå®ä¾‹å®Œæ•´ä»£ç demoã€‚ å‡å°‘æ‰“åŒ…æ–‡ä»¶ åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­ä¸å¯é¿å…ä¼šå¼•å…¥ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œwebpackæ‰“åŒ…æ—¶ä¹Ÿä¼šå°†ç¬¬ä¸‰æ–¹æ¨¡å—ä½œä¸ºä¾èµ–æ‰“åŒ…è¿›bundleä¸­ï¼Œè¿™æ ·å°±ä¼šå¢åŠ æ‰“åŒ…æ–‡ä»¶å°ºå¯¸å’Œå¢åŠ è€—æ—¶ï¼Œå¦‚æœèƒ½åˆç†å¾—å¤„ç†è¿™äº›æ¨¡å—å°±èƒ½æå‡ä¸å°‘webpackçš„æ€§èƒ½ã€‚ æå–å…¬å…±ä»£ç  æˆ‘ä»¬çš„é¡¹ç›®é€šå¸¸æœ‰å¤šä¸ªé¡µé¢æˆ–è€…å¤šä¸ªé¡µé¢æ¨¡å—ï¼ˆå•é¡µé¢ï¼‰ï¼Œå¤šä¸ªé¡µé¢ä¹‹é—´é€šå¸¸éƒ½æœ‰å…¬ç”¨çš„å‡½æ•°æˆ–è€…ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œåœ¨æ¯ä¸ªé¡µé¢ä¸­éƒ½æ‰“åŒ…è¿™äº›æ¨¡å—ä¼šé€ æˆä»¥ä¸‹é—®é¢˜ï¼š èµ„æºé‡å¤åŠ è½½ï¼Œæµªè´¹ç”¨æˆ·æµé‡ æ¯ä¸ªé¡µé¢åŠ è½½èµ„æºå¤šï¼Œé¦–å±å±•ç¤ºæ…¢ åœ¨Webpack4ä¹‹å‰ï¼Œéƒ½æ˜¯é€šè¿‡CommonsChunkPluginæ’ä»¶æ¥æå–å…¬å…±ä»£ç ï¼Œç„¶è€Œå­˜åœ¨ç€ä»¥ä¸‹é—®é¢˜ äº§å‡ºçš„chunkåœ¨å¼•å…¥çš„æ—¶å€™ï¼Œä¼šåŒ…å«é‡å¤çš„ä»£ç  æ— æ³•ä¼˜åŒ–å¼‚æ­¥chunk Webpack4å¼•å…¥äº†SplitChunksPluginæ’ä»¶è¿›è¡Œå…¬å…±æ¨¡å—çš„æŠ½å–ï¼›ç”±äºwebpack4å¼€ç®±å³ç”¨çš„ç‰¹æ€§ï¼Œå®ƒä¸ç”¨å•ç‹¬å®‰è£…ï¼Œé€šè¿‡optimization.splitChunksè¿›è¡Œé…ç½®å³å¯ï¼Œå®˜æ–¹ç»™çš„é»˜è®¤é…ç½®å‚æ•°å¦‚ä¸‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637module.exports = &#123; optimization: &#123; splitChunks: &#123; // ä»£ç åˆ†å‰²æ—¶é»˜è®¤å¯¹å¼‚æ­¥ä»£ç ç”Ÿæ•ˆï¼Œallï¼šæ‰€æœ‰ä»£ç æœ‰æ•ˆï¼Œinitalï¼šåŒæ­¥ä»£ç æœ‰æ•ˆ chunks: &#x27;async&#x27;, // ä»£ç åˆ†å‰²æœ€å°çš„æ¨¡å—å¤§å°ï¼Œå¼•å…¥çš„æ¨¡å—å¤§äº 20000B æ‰åšä»£ç åˆ†å‰² minSize: 20000, // ä»£ç åˆ†å‰²æœ€å¤§çš„æ¨¡å—å¤§å°ï¼Œå¤§äºè¿™ä¸ªå€¼è¦è¿›è¡Œä»£ç åˆ†å‰²ï¼Œä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼ maxSize: 0, // å¼•å…¥çš„æ¬¡æ•°å¤§äºç­‰äº1æ—¶æ‰è¿›è¡Œä»£ç åˆ†å‰² minChunks: 1, // æœ€å¤§çš„å¼‚æ­¥è¯·æ±‚æ•°é‡,ä¹Ÿå°±æ˜¯åŒæ—¶åŠ è½½çš„æ¨¡å—æœ€å¤§æ¨¡å—æ•°é‡ maxAsyncRequests: 30, // å…¥å£æ–‡ä»¶åšä»£ç åˆ†å‰²æœ€å¤šåˆ†æˆ 30 ä¸ª js æ–‡ä»¶ maxInitialRequests: 30, // æ–‡ä»¶ç”Ÿæˆæ—¶çš„è¿æ¥ç¬¦ automaticNameDelimiter: &#x27;~&#x27;, enforceSizeThreshold: 5000, cacheGroups: &#123; vendors: &#123; // ä½äºnode_modulesä¸­çš„æ¨¡å—åšä»£ç åˆ†å‰² test: /[\\\\/]node_modules[\\\\/]/, // æ ¹æ®ä¼˜å…ˆçº§å†³å®šæ‰“åŒ…åˆ°å“ªä¸ªç»„é‡Œï¼Œä¾‹å¦‚ä¸€ä¸ª node_modules ä¸­çš„æ¨¡å—è¿›è¡Œä»£ç  priority: -10 &#125;, // æ—¢æ»¡è¶³ vendorsï¼Œåˆæ»¡è¶³ defaultï¼Œé‚£ä¹ˆæ ¹æ®ä¼˜å…ˆçº§ä¼šæ‰“åŒ…åˆ° vendors ç»„ä¸­ã€‚ default: &#123; // æ²¡æœ‰ test è¡¨æ˜æ‰€æœ‰çš„æ¨¡å—éƒ½èƒ½è¿›å…¥ default ç»„ï¼Œä½†æ˜¯æ³¨æ„å®ƒçš„ä¼˜å…ˆçº§è¾ƒä½ã€‚ // æ ¹æ®ä¼˜å…ˆçº§å†³å®šæ‰“åŒ…åˆ°å“ªä¸ªç»„é‡Œ,æ‰“åŒ…åˆ°ä¼˜å…ˆçº§é«˜çš„ç»„é‡Œã€‚ priority: -20, //å¦‚æœä¸€ä¸ªæ¨¡å—å·²ç»è¢«æ‰“åŒ…è¿‡äº†,é‚£ä¹ˆå†æ‰“åŒ…æ—¶å°±å¿½ç•¥è¿™ä¸ªä¸Šæ¨¡å— reuseExistingChunk: true &#125; &#125; &#125; &#125;&#125;; æˆ‘ä»¬åœ¨homeã€listã€detailä¸‰ä¸ªé¡µé¢åˆ†åˆ«å¼•å…¥äº†vue.jsã€axios.jså’Œå…¬ç”¨çš„å·¥å…·å‡½æ•°æ¨¡å—utils.jsï¼›æˆ‘ä»¬é¦–å…ˆå°†ä½¿ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹æ¨¡å—æå–åˆ°ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†é¡¹ç›®çš„åŸºç¡€è¿è¡Œç¯å¢ƒï¼Œä¸€èˆ¬ç§°ä¸ºvendors.jsï¼›åœ¨æŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—åæˆ‘ä»¬å°†æ¯ä¸ªé¡µé¢éƒ½ä¾èµ–çš„å…¬å…±ä»£ç æå–å‡ºæ¥ï¼Œæ”¾åˆ°common.jsä¸­ã€‚ 12345678910111213141516171819module.exports = &#123; optimization: &#123; splitChunks: &#123; chunks: &#x27;initial&#x27;, cacheGroups: &#123; vendors: &#123; test: /[\\\\/]node_modules[\\\\/]/, priority: 10, name: &#x27;vendors&#x27; &#125;, common: &#123; test: /[\\\\/]src[\\\\/]/, priority: 5, name: &#x27;common&#x27; &#125; &#125; &#125; &#125;&#125; æœ‰æ—¶å€™é¡¹ç›®ä¾èµ–æ¨¡å—æ¯”è¾ƒå¤šï¼Œvendors.jsæ–‡ä»¶ä¼šç‰¹åˆ«å¤§ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å®ƒè¿›ä¸€æ­¥æ‹†åˆ†ï¼ŒæŒ‰ç…§æ¨¡å—åˆ’åˆ†ï¼š 1234567891011121314151617181920212223&#123; //çœç•¥å…¶ä»–é…ç½® cacheGroups: &#123; //æ¶‰åŠvueçš„æ¨¡å— vue: &#123; test: /[\\\\/]node_modules[\\\\/](vue|vuex|vue-router)/, priority: 10, name: &#x27;vue&#x27; &#125;, //å…¶ä»–æ¨¡å— vendors: &#123; test: /[\\\\/]node_modules[\\\\/]/, priority: 9, name: &#x27;vendors&#x27; &#125;, common: &#123; test: /[\\\\/]src[\\\\/]/, priority: 5, name: &#x27;common&#x27; &#125; &#125;&#125; åŠ¨æ€é“¾æ¥DllPlugin DLLå³åŠ¨æ€é“¾æ¥åº“ï¼ˆDynamic-Link Libraryï¼‰çš„ç¼©å†™ï¼Œç†Ÿæ‚‰Windowsç³»ç»Ÿçš„ç«¥é‹åœ¨ç”µè„‘ä¸­ä¹Ÿç»å¸¸èƒ½çœ‹åˆ°åç¼€æ˜¯dllçš„æ–‡ä»¶ï¼Œå¶å°”ç”µè„‘å¼¹æ¡†è­¦å‘Šä¹Ÿæ˜¯å› ä¸ºç”µè„‘ä¸­ç¼ºå¤±äº†æŸäº›dllæ–‡ä»¶ï¼›DLLæœ€åˆç”¨äºèŠ‚çº¦åº”ç”¨ç¨‹åºæ‰€éœ€çš„ç£ç›˜å’Œå†…å­˜ç©ºé—´ï¼Œå½“å¤šä¸ªç¨‹åºä½¿ç”¨åŒä¸€ä¸ªå‡½æ•°åº“æ—¶ï¼ŒDLLå¯ä»¥å‡å°‘åœ¨ç£ç›˜å’Œå†…å­˜ä¸­åŠ è½½ä»£ç çš„é‡å¤é‡ï¼Œæœ‰åŠ©äºä»£ç çš„å¤ç”¨ã€‚ åœ¨Webpackä¸­ä¹Ÿå¼•å…¥äº†DLLçš„æ€æƒ³ï¼ŒæŠŠæˆ‘ä»¬ç”¨åˆ°çš„æ¨¡å—æŠ½ç¦»å‡ºæ¥ï¼Œæ‰“åŒ…åˆ°å•ç‹¬çš„åŠ¨æ€é“¾æ¥åº“ä¸­å»ï¼Œä¸€ä¸ªåŠ¨æ€é“¾æ¥åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªæ¨¡å—ï¼›å½“æˆ‘ä»¬åœ¨å¤šä¸ªé¡µé¢ä¸­ç”¨åˆ°æŸä¸€ä¸ªæ¨¡å—æ—¶ï¼Œä¸å†é‡å¤æ‰“åŒ…ï¼Œè€Œæ˜¯ç›´æ¥å»å¼•å…¥åŠ¨æ€é“¾æ¥åº“ä¸­çš„æ¨¡å—ã€‚ Webpackä¸­é›†æˆäº†å¯¹åŠ¨æ€é“¾æ¥åº“çš„æ”¯æŒï¼Œä¸»è¦ç”¨åˆ°çš„ä¸¤ä¸ªæ’ä»¶ï¼š DllPluginï¼šåˆ›å»ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ DllReferencePluginï¼šåœ¨ä¸»é…ç½®ä¸­å¼•å…¥æ‰“åŒ…å¥½çš„åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ æˆ‘ä»¬é¦–å…ˆä½¿ç”¨DllPluginæ¥åˆ›å»ºåŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ï¼Œåœ¨é¡¹ç›®ä¸‹æ–°å»ºwebpack.dll.jsæ–‡ä»¶ï¼š 1234567891011121314151617181920212223const path = require(&quot;path&quot;);const webpack = require(&quot;webpack&quot;);module.exports = &#123; mode: &quot;production&quot;, entry: &#123; vue: [&quot;vue&quot;, &quot;vuex&quot;, &quot;vue-router&quot;], vendor: [&quot;dayjs&quot;, &quot;axios&quot;, &quot;mint-ui&quot;], &#125;, output: &#123; path: path.resolve(__dirname, &quot;public/vendor&quot;), // æŒ‡å®šæ–‡ä»¶å filename: &quot;[name].dll.js&quot;, //æš´éœ²å…¨å±€å˜é‡çš„åç§° library: &quot;[name]_dll_lib&quot;, &#125;, plugins: [ new webpack.DllPlugin(&#123; path: path.join(__dirname, &quot;public&quot;, &quot;vendor&quot;, &quot;[name].manifest.json&quot;), name: &quot;[name]_dll_lib&quot;, &#125;), ],&#125;; è¿™é‡Œentryè®¾ç½®äº†å¤šä¸ªå…¥å£ï¼Œæ¯ä¸ªå…¥å£ä¹Ÿæœ‰å¤šä¸ªæ¨¡å—æ–‡ä»¶ï¼›ç„¶ååœ¨package.jsonæ·»åŠ æ‰“åŒ…å‘½ä»¤ 12345&#123; &quot;scripts&quot;:&#123; &quot;build:dll&quot;: &quot;webpack --config=webpack.dll.js&quot; &#125;&#125; æ‰§è¡Œnpm run build:dllåï¼Œæˆ‘ä»¬åœ¨/public/vendorç›®å½•ä¸‹å¾—åˆ°äº†æˆ‘ä»¬æ‰“åŒ…åçš„åŠ¨æ€é“¾æ¥åº“çš„æ–‡ä»¶ï¼š 1234â”œâ”€â”€ vendor.dll.jsâ”œâ”€â”€ vendor.manifest.jsonâ”œâ”€â”€ vue.dll.jsâ””â”€â”€ vue.manifest.json ç”Ÿæˆå‡ºæ¥çš„æ‰“åŒ…æ–‡ä»¶æ­£å¥½æ˜¯ä»¥ä¸¤ä¸ªå…¥å£åæ¥å‘½åçš„ï¼Œä»¥vueä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹vue.dll.jsçš„å†…å®¹ï¼š 12345678910111213141516171819202122var vue_dll_lib =/******/ (function(modules) &#123; // çœç•¥webpackBootstrapä»£ç /******/ &#125;)/******/ (&#123;/***/ &quot;./node_modules/vue-router/dist/vue-router.esm.js&quot;:/***/ (function(module, exports, __webpack_require__) &#123; //çœç•¥vue-routeræ¨¡å—ä»£ç /***/ &#125;),/***/ &quot;./node_modules/vue/dist/vue.runtime.esm.js&quot;:/***/ (function(module, exports, __webpack_require__) &#123; //çœç•¥vueæ¨¡å—ä»£ç /***/ &#125;),/***/ &quot;./node_modules/vuex/dist/vuex.esm.js&quot;:/***/ (function(module, exports, __webpack_require__) &#123; //çœç•¥vuexæ¨¡å—ä»£ç /***/ &#125;),/******/ &#125;); å¯ä»¥çœ‹å‡ºï¼ŒåŠ¨æ€é“¾æ¥åº“ä¸­åŒ…å«äº†å¼•å…¥æ¨¡å—çš„æ‰€æœ‰ä»£ç ï¼Œè¿™äº›ä»£ç å­˜åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œé€šè¿‡æ¨¡å—è·¯å¾„ä½œä¸ºé”®åæ¥è¿›è¡Œå¼•ç”¨ï¼›å¹¶ä¸”é€šè¿‡vue_dll_libæš´éœ²åˆ°å…¨å±€ï¼›vue.manifest.jsonåˆ™æ˜¯ç”¨æ¥æè¿°åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶ä¸­åŒ…å«äº†å“ªäº›æ¨¡å—ï¼š 1234567891011121314151617&#123; &quot;name&quot;: &quot;vue_dll_lib&quot;, &quot;content&quot;: &#123; &quot;./node_modules/vue-router/dist/vue-router.esm.js&quot;: &#123; &quot;id&quot;: &quot;./node_modules/vue-router/dist/vue-router.esm.js&quot;, &quot;buildMeta&quot;: &#123;&#125; &#125;, &quot;./node_modules/vue/dist/vue.runtime.esm.js&quot;: &#123; &quot;id&quot;: &quot;./node_modules/vue/dist/vue.runtime.esm.js&quot;, &quot;buildMeta&quot;: &#123;&#125; &#125;, &quot;./node_modules/vuex/dist/vuex.esm.js&quot;: &#123; &quot;id&quot;: &quot;./node_modules/vuex/dist/vuex.esm.js&quot;, &quot;buildMeta&quot;: &#123;&#125; &#125;, &#125;&#125; manifest.jsonæè¿°äº†å¯¹åº”jsæ–‡ä»¶åŒ…å«å“ªäº›æ¨¡å—ï¼Œä»¥åŠå¯¹åº”æ¨¡å—çš„é”®åï¼ˆidï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨æ¨¡æ¿é¡µé¢ä¸­å°±å¯ä»¥å°†åŠ¨æ€é“¾æ¥åº“ä½œä¸ºå¤–é“¾å¼•å…¥ï¼Œå½“Webpackè§£æåˆ°å¯¹åº”æ¨¡å—æ—¶å°±é€šè¿‡å…¨å±€å˜é‡æ¥è·å–æ¨¡å—ï¼š 123456789101112131415&lt;!-- public/index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Document&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;!-- å¼•å…¥åŠ¨æ€é“¾æ¥åº“ --&gt; &lt;script src=&quot;./vendor/vendor.dll.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;./vendor/vue.dll.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; æœ€åæˆ‘ä»¬åœ¨æ‰“åŒ…æ—¶ï¼Œé€šè¿‡DllReferencePluginå°†åŠ¨æ€é“¾æ¥åº“å¼•å…¥åˆ°ä¸»é…ç½®ä¸­ï¼š 12345678910111213//webpack.config.js&#123; plugins: [ new webpack.DllReferencePlugin(&#123; context: path.join(__dirname), manifest: require(&#x27;./public/vendor/vendor.manifest.json&#x27;) &#125;), new webpack.DllReferencePlugin(&#123; context: path.join(__dirname), manifest: require(&#x27;./public/vendor/vue.manifest.json&#x27;) &#125;), ]&#125; æ³¨ï¼šåŠ¨æ€é“¾æ¥åº“æ‰“åŒ…åˆ°/public/vendorç›®å½•ä¸‹ï¼Œè¿˜éœ€è¦é€šè¿‡CopyWebpackPluginæ’ä»¶å°†å®ƒæ‹·è´åˆ°ç”Ÿæˆåçš„ç›®å½•ä¸­ï¼Œå¦åˆ™ä¼šå‡ºç°å¼•ç”¨å¤±è´¥çš„æŠ¥é”™ï¼›æ‰“åŒ…åŠ¨æ€é“¾æ¥åº“æ–‡ä»¶åªéœ€è¦æ‰§è¡Œä¸€æ¬¡ï¼Œé™¤éä»¥åæ¨¡å—å‡çº§æˆ–è€…å¼•å…¥æ–°çš„æ¨¡å—ã€‚ å¼•å…¥åŠ¨æ€é“¾æ¥åº“å¯ä»¥å°†é¡¹ç›®ä¸­ä¸€äº›ä¸ç»å¸¸æ›´æ–°çš„æ¨¡å—æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å†æ¬¡æ‰“åŒ…é¡µé¢é€»è¾‘ä»£ç æ—¶ä¼šå‘ç°æ„å»ºé€Ÿåº¦æœ‰äº†æ¯”è¾ƒå¤§çš„æå‡ï¼Œå¤§æ¦‚30%~40%ï¼Œç›¸å…³ä»£ç åœ¨demo10ã€‚ externals æˆ‘ä»¬åœ¨é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œæœ‰ä¸€äº›ç¬¬ä¸‰æ–¹çš„åº“ä¼šä»CDNå¼•å…¥ï¼ˆæ¯”å¦‚jQueryç­‰ï¼‰ï¼Œå¦‚æœåœ¨bundleä¸­å†æ¬¡æ‰“åŒ…é¡¹ç›®å°±è¿‡äºè‡ƒè‚¿ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é…ç½®externalså°†è¿™äº›åº“åœ¨æ‰“åŒ…çš„æ—¶å€™æ’é™¤åœ¨å¤–ã€‚ 12345678&#123; externals: &#123; &#x27;jquery&#x27;: &quot;jQuery&quot;, &#x27;react&#x27;: &#x27;React&#x27;, &#x27;react-dom&#x27;: &#x27;ReactDOM&#x27;, &#x27;vue&#x27;: &#x27;Vue&#x27; &#125;&#125; è¿™æ ·å°±è¡¨ç¤ºå½“æˆ‘ä»¬é‡åˆ°require(&#39;jquery&#39;)æ—¶ï¼Œä»å…¨å±€å˜é‡å»å¼•ç”¨jQueryï¼Œå…¶ä»–å‡ ä¸ªåŒ…ä¹ŸåŒç†ï¼›è¿™æ ·æ‰“åŒ…æ—¶å°±æŠŠjqueryã€reactã€vueå’Œreact-domä»bundleä¸­å‰”é™¤äº†ï¼Œæœ¬å®ä¾‹å®Œæ•´ä»£ç demoã€‚ Tree Shaking Tree Shakingæœ€æ—©ç”±rollupå®ç°ï¼Œåæ¥webpack2é¡µå®ç°äº†è¿™é¡¹åŠŸèƒ½ï¼›Tree Shakingçš„å­—é¢æ„æ€æ˜¯æ‘‡æ ‘ï¼Œä¸€æ£µæ ‘ä¸Šæœ‰ä¸€äº›æ ‘å¶è™½ç„¶è¿˜æŒ‚ç€ï¼Œä½†æ˜¯å®ƒå¯èƒ½å·²ç»æ­»æ‰äº†ï¼Œé€šè¿‡æ‘‡æ ‘æ–¹å¼æŠŠè¿™äº›æ­»æ‰çš„æ ‘å¶å»é™¤ã€‚ æˆ‘ä»¬é¡¹ç›®ä¸­ä¹Ÿæ˜¯åŒæ ·çš„ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç”¨åˆ°æ–‡ä»¶çš„æ‰€æœ‰æ¨¡å—ï¼Œä½†æ˜¯webpackä»ä¼šå°†æ•´ä¸ªæ–‡ä»¶æ‰“åŒ…è¿›æ¥ï¼Œæ–‡ä»¶ä¸­ä¸€ç›´ç”¨ä¸åˆ°çš„ä»£ç å°±æ˜¯â€œæ­»ä»£ç â€ï¼›è¿™ç§æƒ…å†µå°±ç”¨ç”¨åˆ°Tree Shakingå¸®æˆ‘ä»¬å‰”é™¤è¿™äº›ç”¨ä¸åˆ°çš„ä»£ç æ¨¡å—ã€‚ æ¯”å¦‚æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªutils.jsæ–‡ä»¶å¯¼å‡ºäº†å¾ˆå¤šå·¥å…·æ¨¡å—ï¼Œç„¶ååœ¨index.jsä¸­åªå¼•ç”¨äº†æŸäº›æ¨¡å—ï¼š 123456789101112131415//utils.jsvar toString = Object.prototype.toString;export function isArray(val) &#123; return toString.call(val) === &#x27;[object Array]&#x27;;&#125;export function isFunction(val) &#123; return toString.call(val) === &#x27;[object Function]&#x27;;&#125;export function isDate(val) &#123; return toString.call(val) === &#x27;[object Date]&#x27;;&#125;//index.jsimport &#123; isArray &#125; from &#x27;./utils&#x27;isArray() æˆ‘ä»¬å¸Œæœ›åœ¨ä»£ç ä¸­åªæ‰“åŒ…isArrayå‡½æ•°åˆ°bundleä¸­ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†è®©Tree Shakingç”Ÿæ•ˆï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ES6æ¨¡å—åŒ–çš„è¯­æ³•ï¼Œå› ä¸ºES6æ¨¡å—è¯­æ³•æ˜¯é™æ€åŒ–åŠ è½½æ¨¡å—ï¼Œå®ƒæœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š é™æ€åŠ è½½æ¨¡å—ï¼Œæ•ˆç‡æ¯”CommonJS æ¨¡å—çš„åŠ è½½æ–¹å¼é«˜ ES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶åŠ è½½ï¼Œä½¿å¾—é™æ€åˆ†ææˆä¸ºå¯èƒ½è¿›ä¸€æ­¥æ‹“å®½JSçš„è¯­æ³• å¦‚æœæ˜¯requireï¼Œåœ¨è¿è¡Œæ—¶ç¡®å®šæ¨¡å—ï¼Œé‚£ä¹ˆå°†æ— æ³•å»åˆ†ææ¨¡å—æ˜¯å¦å¯ç”¨ï¼Œåªæœ‰åœ¨ç¼–è¯‘æ—¶åˆ†æï¼Œæ‰ä¸ä¼šå½±å“è¿è¡Œæ—¶çš„çŠ¶æ€ã€‚ ä½¿ç”¨ES6æ¨¡å—åè¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬çš„ä»£ç ä¸€èˆ¬éƒ½é‡‡ç”¨babelè¿›è¡Œç¼–è¯‘ï¼Œè€Œbabelçš„preseté»˜è®¤ä¼šå°†ä»»ä½•æ¨¡å—ç±»å‹ç¼–è¯‘æˆCommonjsï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹.babelrcé…ç½®æ–‡ä»¶ï¼š 1234567891011&#123; &quot;presets&quot;: [ [ &quot;@babel/preset-env&quot;, &#123; //æ·»åŠ modulesï¼šfalse &quot;modules&quot;: false &#125; ] ]&#125; é…ç½®å¥½babelåæˆ‘ä»¬éœ€è¦è®©webpackå…ˆå°†â€œæ­»ä»£ç â€æ ‡è¯†å‡ºæ¥ï¼š 1234567&#123; //å…¶ä»–é…ç½® optimization: &#123; usedExports: true, sideEffects: true, &#125;&#125; è¿è¡Œæ‰“åŒ…å‘½ä»¤åï¼Œå½“æˆ‘ä»¬æ‰“å¼€è¾“å‡ºçš„bundleæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å‘ç°è™½ç„¶ä¸€äº›â€œæ­»ä»£ç â€è¿˜å­˜åœ¨é‡Œé¢ï¼Œä½†æ˜¯åŠ ä¸Šäº†ä¸€ä¸ªunused harmony exportçš„æ ‡è¯† 123456789/* unused harmony export isFunction *//* unused harmony export isDate */var toString = Object.prototype.toString;function isFunction(val) &#123; return toString.call(val) === &#x27;[object Function]&#x27;;&#125;function isDate(val) &#123; return toString.call(val) === &#x27;[object Date]&#x27;;&#125; è™½ç„¶webpackç»™æˆ‘ä»¬æŒ‡å‡ºäº†å“ªäº›å‡½æ•°ç”¨ä¸ä¸Šï¼Œä½†æ˜¯è¿˜éœ€è¦æˆ‘ä»¬é€šè¿‡æ’ä»¶æ¥å‰”é™¤ï¼›ç”±äºuglifyjs-webpack-pluginä¸æ”¯æŒES6è¯­æ³•ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨terser-webpack-pluginçš„æ’ä»¶æ¥ä»£æ›¿å®ƒï¼š 123456789101112131415const TerserJSPlugin = require(&quot;terser-webpack-plugin&quot;);module.exports = &#123; optimization: &#123; usedExports: true, sideEffects: true, minimize: true, minimizer: [ new TerserJSPlugin(&#123; cache: true, parallel: true, sourceMap: false, &#125;), ], &#125;&#125; è¿™æ ·æˆ‘ä»¬å‘ç°æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å°±æ²¡æœ‰å¤šä½™çš„ä»£ç äº†ã€‚ æ³¨ï¼š Tree Shakingåœ¨ç”Ÿäº§ç¯å¢ƒï¼ˆproductionï¼‰æ˜¯é»˜è®¤å¼€å¯çš„ å¯¹äºæˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å®ç°Tree Shakingï¼›ä»¥lodashä¸ºä¾‹ï¼Œå®ƒæ•´ä¸ªåŒ…æœ‰éå¸¸å¤šçš„å‡½æ•°ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„å‡½æ•°éƒ½æ˜¯æˆ‘ä»¬æ‰€ç”¨åˆ°çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹å®ƒæ²¡æœ‰ç”¨åˆ°çš„ä»£ç è¿›è¡Œå‰”é™¤ã€‚ 123//index.jsimport &#123; chunk &#125; from &#x27;lodash&#x27;console.log(chunk([1,2,3,4], 2)) æ‰“åŒ…å‡ºæ¥å‘ç°åŒ…çš„å¤§å°è¿˜æ˜¯èƒ½è¾¾åˆ°70+kbï¼Œå¦‚æœåªå¼•ç”¨äº†chunkä¸åº”è¯¥æœ‰è¿™ä¹ˆå¤§ï¼›æˆ‘ä»¬æ‰“å¼€/node_modules/lodash/index.jså‘ç°ä»–è¿˜æ˜¯ä½¿ç”¨äº†requireçš„æ¨¡å¼å¯¼å…¥å¯¼å‡ºæ¨¡å—ï¼Œå› æ­¤å¯¼è‡´Tree Shakingå¤±è´¥ï¼›æˆ‘ä»¬å…ˆå®‰è£…ä½¿ç”¨ES6æ¨¡å—ç‰ˆæœ¬çš„lodashï¼šnpm i -S lodash-esï¼Œç„¶åä¿®æ”¹å¼•å…¥åŒ…ï¼š 123//index.jsimport &#123; chunk &#125; from &#x27;lodash-es&#x27;console.log(chunk([1,2,3,4], 2)) è¿™æ ·æˆ‘ä»¬ç”Ÿæˆçš„bundleåŒ…å°±å°å¾ˆå¤šï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç demoã€‚ ç¼“å­˜ æˆ‘ä»¬çŸ¥é“webpackä¼šå¯¹ä¸åŒçš„æ–‡ä»¶è°ƒç”¨ä¸åŒçš„loaderè¿›è¡Œè§£æå¤„ç†ï¼Œè§£æçš„è¿‡ç¨‹ä¹Ÿæ˜¯æœ€è€—æ€§èƒ½çš„è¿‡ç¨‹ï¼›æˆ‘ä»¬æ¯æ¬¡æ”¹ä»£ç ä¹Ÿåªæ˜¯ä¿®æ”¹é¡¹ç›®ä¸­çš„å°‘æ•°æ–‡ä»¶ï¼Œé¡¹ç›®ä¸­çš„å¤§éƒ¨åˆ†æ–‡ä»¶æ”¹åŠ¨çš„æ¬¡æ•°ä¸æ˜¯é‚£ä¹ˆé¢‘ç¹ï¼›é‚£ä¹ˆå¦‚æœæˆ‘ä»¬å°†è§£ææ–‡ä»¶çš„ç»“æœç¼“å­˜ä¸‹æ¥ï¼Œä¸‹æ¬¡å‘ç°åŒæ ·çš„æ–‡ä»¶åªéœ€è¦è¯»å–ç¼“å­˜å°±èƒ½æå¤§çš„æå‡è§£æçš„æ€§èƒ½ã€‚ cache-loader cache-loaderå¯ä»¥å°†ä¸€äº›å¯¹æ€§èƒ½æ¶ˆè€—æ¯”è¾ƒå¤§çš„loaderç”Ÿäº§çš„ç»“æœç¼“å­˜åœ¨ç£ç›˜ä¸­ï¼Œç­‰ä¸‹æ¬¡å†æ¬¡æ‰“åŒ…æ—¶å¦‚æœæ˜¯ç›¸åŒçš„ä»£ç å°±å¯ä»¥ç›´æ¥è¯»å–ç¼“å­˜ï¼Œå‡å°‘æ€§èƒ½æ¶ˆè€—ã€‚ æ³¨ï¼šä¿å­˜å’Œè¯»å–ç¼“å­˜ä¹Ÿä¼šäº§ç”Ÿé¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œå› æ­¤cache-loaderé€‚åˆç”¨äºå¯¹æ€§èƒ½æ¶ˆè€—è¾ƒå¤§çš„loaderï¼Œå¦åˆ™åè€Œä¼šå¢åŠ æ€§èƒ½æ¶ˆè€— cache-loaderçš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œå®‰è£…ååœ¨æ‰€éœ€è¦ç¼“å­˜çš„loaderå‰é¢æ·»åŠ å³å¯ï¼ˆå› ä¸ºloaderåŠ è½½çš„é¡ºåºæ˜¯åå‘çš„ï¼‰ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦ç»™babel-loaderæ·»åŠ ç¼“å­˜ï¼š 12345678910111213141516&#123; //çœç•¥å…¶ä»–ä»£ç  rules: [ &#123; test: /\\.js/, use: [ &#123; loader: &#x27;cache-loader&#x27; &#125;, &#123; loader: &quot;babel-loader&quot;, &#125;, ], &#125;, ],&#125; ç„¶è€Œæˆ‘ä»¬å‘ç°ç¬¬ä¸€æ¬¡æ‰“åŒ…çš„é€Ÿåº¦å¹¶æ²¡æœ‰å‘ç”Ÿæ˜æ˜¾å˜åŒ–ï¼Œç”šè‡³å¯èƒ½è¿˜æ¯”åŸæ¥æ‰“åŒ…çš„æ›´æ…¢äº†ï¼›åŒæ—¶è¿˜å¤šäº†/node_modules/.cache/cache-loader/è¿™ä¸ªç›®å½•ï¼Œçœ‹åå­—å°±æ˜¯ä¸€ä¸ªç¼“å­˜æ–‡ä»¶ï¼›æˆ‘ä»¬ç»§ç»­æ‰“åŒ…ï¼Œä¸‹é¢å›¾è¡¨è®°å½•äº†æˆ‘å‡ æ¬¡æ‰“åŒ…çš„è€—æ—¶ï¼š æˆ‘ä»¬å‘ç°ç¬¬ä¸€æ¬¡æ‰“åŒ…æ—¶é—´éƒ½å·®ä¸å¤šï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡å¼€å§‹ç¼“å­˜æ–‡ä»¶å°±å¼€å§‹å‘æŒ¥äº†é‡è¦çš„ä½œç”¨äº†ï¼Œç›´æ¥å‡å°‘äº†75%çš„è€—æ—¶ã€‚ é™¤äº†ä½¿ç”¨cache-loaderï¼Œbabel-loaderä¹Ÿæä¾›ç¼“å­˜åŠŸèƒ½ï¼Œé€šè¿‡cacheDirectoryè¿›è¡Œé…ç½®ï¼š 123456789101112131415&#123; rules: [ &#123; test: /\\.js/, use: [ &#123; loader: &quot;babel-loader&quot;, options: &#123; cacheDirectory: true &#125; &#125;, ], &#125;, ],&#125; åœ¨/node_modules/.cache/babel-loaderä¹Ÿå¤šäº†ç¼“å­˜æ–‡ä»¶ã€‚ç»è¿‡ä¸¤ä¸ªä½¿ç”¨ç»“æœçš„å¯¹æ¯”ï¼Œcache-loaderçš„æ€§èƒ½æå‡æ›´åŠ å‡ºè‰²ä¸€äº›ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç demoã€‚ HardSourceWebpackPlugin HardSourceWebpackPluginä¹Ÿå¯ä»¥ä¸ºæ¨¡å—æä¾›ç¼“å­˜åŠŸèƒ½ï¼ŒåŒæ„ä¹Ÿæ˜¯å°†æ–‡ä»¶ç¼“å­˜åœ¨ç£ç›˜ä¸­ é¦–å…ˆé€šè¿‡npm i -D hard-source-webpack-pluginæ¥å®‰è£…æ’ä»¶ï¼Œå¹¶ä¸”åœ¨é…ç½®ä¸­æ·»åŠ æ’ä»¶ï¼š 1234567var HardSourceWebpackPlugin = require(&#x27;hard-source-webpack-plugin&#x27;);module.exports = &#123; plugins: [ new HardSourceWebpackPlugin() ]&#125; ä¸€èˆ¬HardSourceWebpackPluginé»˜è®¤ç¼“å­˜æ˜¯åœ¨/node_modules/.cache/hard-source/[hash]ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®å®ƒçš„ç¼“å­˜ç›®å½•å’Œä½•æ—¶åˆ›å»ºæ–°çš„ç¼“å­˜å“ˆå¸Œå€¼ã€‚ 1234567891011121314151617181920212223242526272829module.exports = &#123; plugins: [ new HardSourceWebpackPlugin(&#123; //è®¾ç½®ç¼“å­˜ç›®å½•çš„è·¯å¾„ //ç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„ cacheDirectory: &#x27;node_modules/.cache/hard-source/[confighash]&#x27;, //æ„å»ºä¸åŒçš„ç¼“å­˜ç›®å½•åç§° //ä¹Ÿå°±æ˜¯cacheDirectoryä¸­çš„[confighash]å€¼ configHash: function(webpackConfig) &#123; return require(&#x27;node-object-hash&#x27;)(&#123;sort: false&#125;).hash(webpackConfig); &#125;, //ç¯å¢ƒhash //å½“loaderã€pluginæˆ–è€…å…¶ä»–npmä¾èµ–æ”¹å˜æ—¶è¿›è¡Œæ›¿æ¢ç¼“å­˜ environmentHash: &#123; root: process.cwd(), directories: [], files: [&#x27;package-lock.json&#x27;, &#x27;yarn.lock&#x27;], &#125;, //è‡ªåŠ¨æ¸…é™¤ç¼“å­˜ cachePrune: &#123; //ç¼“å­˜æœ€é•¿æ—¶é—´ï¼ˆé»˜è®¤2å¤©ï¼‰ maxAge: 2 * 24 * 60 * 60 * 1000, //æ‰€æœ‰çš„ç¼“å­˜å¤§å°è¶…è¿‡sizeå€¼å°†ä¼šè¢«æ¸…é™¤ //é»˜è®¤50MB sizeThreshold: 50 * 1024 * 1024 &#125;, &#125;) ]&#125; é€šè¿‡å°è¯•å¤šæ¬¡æ‰“åŒ…ï¼Œå‘ç°èƒ½èŠ‚çœå¤§æ¦‚90%çš„æ—¶é—´ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç demoã€‚ å¤šè¿›ç¨‹ æˆ‘ä»¬åœ¨äº‹ä»¶å¾ªç¯ä¸­è®²åˆ°è¿‡ï¼Œjsæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œåœ¨åŒä¸€äº‹ä»¶çº¿ä¸Šåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¤„ç†ä»»åŠ¡ï¼›å› æ­¤åœ¨webpackè§£æåˆ°JSã€CSSã€å›¾ç‰‡æˆ–è€…å­—ä½“æ–‡ä»¶æ—¶ï¼Œå®ƒéœ€è¦ä¸€ä¸ªä¸ªçš„å»è§£æç¼–è¯‘ï¼Œä¸èƒ½åŒæ—¶å¤„ç†å¤šä¸ªä»»åŠ¡ï¼›æˆ‘ä»¬å¯ä»¥é€šè¿‡æ’ä»¶æ¥å°†ä»»åŠ¡åˆ†ç»™å¤šä¸ªå­è¿›ç¨‹å»å¹¶å‘æ‰§è¡Œï¼Œå­è¿›ç¨‹å¤„ç†å®Œæˆåå†å°†ç»“æœå‘é€ç»™ä¸»è¿›ç¨‹ã€‚ happypack happypackä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ†è§£ä»»åŠ¡å’Œç®¡ç†è¿›ç¨‹ï¼Œé€šè¿‡åå­—æˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ä¸€æ¬¾èƒ½å¤Ÿå¸¦æ¥å¿«ä¹çš„æ’ä»¶ã€‚ æˆ‘ä»¬é€šè¿‡npm i -D happypackåå°±èƒ½åœ¨webpackä¸­è¿›è¡Œé…ç½®äº†ï¼š 123456789101112131415161718192021222324252627const happypack = require(&quot;happypack&quot;);module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.js/, exclude: /node_modules/, //å°†jsæ–‡ä»¶å¤„ç†ç»™idä¸ºjsçš„happypackå®ä¾‹ use: &quot;happypack/loader?id=js&quot;, &#125; ], &#125;, plugins: [ //é€šè¿‡idæ ‡è¯†å½“å‰happypackæ˜¯å¤„ç†ä»€ä¹ˆæ–‡ä»¶çš„ new happypack(&#123; id: &quot;js&quot;, //è°ƒç”¨å¤„ç†æ–‡ä»¶çš„loaderï¼Œç”¨æ³•å’Œrulesä¸­ä¸€è‡´ loaders: [&#123; loader: &quot;babel-loader&quot;, &#125;, &#123; loader: &quot;eslint-loader&quot;, &#125;, ], &#125;), ],&#125; æˆ‘ä»¬å°†rules/loaderçš„å¤„ç†å…¨éƒ¨äº¤ç»™äº†happypackè¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”é€šè¿‡idæ¥è°ƒç”¨å…·ä½“çš„å®ä¾‹ï¼Œç„¶ååœ¨å®ä¾‹ä¸­é…ç½®å…·ä½“çš„loaderè¿›è¡Œå¤„ç†ï¼›åœ¨happypackçš„å®ä¾‹ä¸­é™¤äº†idå’Œloadersæˆ‘ä»¬è¿˜å¯ä»¥é…ç½®è¿›ç¨‹æ•°é‡ï¼š 123456789101112131415161718192021222324//å…±äº«è¿›ç¨‹æ± ï¼Œè¿›ç¨‹æ± ä¸­åŒ…å«5ä¸ªå­è¿›ç¨‹var happyThreadPool = happypack.ThreadPool(&#123; size: 5&#125;);&#123; plugins: [ new happypack(&#123; id: &quot;js&quot;, //å¼€å¯å‡ ä¸ªå­è¿›ç¨‹ï¼Œé»˜è®¤3ä¸ª threads: 3, //å…±äº«è¿›ç¨‹æ±  threadPool: happyThreadPool, //æ˜¯å¦å…è®¸ HappyPack è¾“å‡ºæ—¥å¿— verbose: true, loaders: [&#123; loader: &quot;babel-loader&quot;, &#125;, &#123; loader: &quot;eslint-loader&quot;, &#125;, ], &#125;), ],&#125; æ³¨ï¼šthreadså’ŒthreadPoolå­—æ®µåªéœ€è¦é…ç½®ä¸€ä¸ªå³å¯ã€‚ æˆ‘ä»¬é€šè¿‡happypack.ThreadPoolåˆ›å»ºäº†ä¸€ä¸ªåŒ…å«5ä¸ªå­è¿›ç¨‹çš„å…±äº«è¿›ç¨‹æ± ï¼Œæ¯ä¸ªhappypackå®ä¾‹å¯ä»¥é€šè¿‡å…±äº«è¿›ç¨‹æ± æ¥å¤„ç†æ–‡ä»¶ï¼›ç›¸å¯¹äºç»™æ¯ä¸ªhappypackå®ä¾‹åˆ†é…è¿›ç¨‹ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å ç”¨è¿‡å¤šæ— ç”¨çš„è¿›ç¨‹ï¼›æˆ‘ä»¬æ‰“åŒ…çœ‹ä¸€ä¸‹æ‰€è€—æ—¶é—´ï¼š æˆ‘ä»¬å‘ç°æœ‰äº†happypackè€—æ—¶å±…ç„¶è¿˜å¢åŠ äº†20%~30%ï¼Œè¯´å¥½çš„å¤šè¿›ç¨‹å¸¦æ¥å¿«ä¹å‘¢ã€‚ ç”±äºæˆ‘ä»¬çš„é¡¹ç›®ä¸å¤Ÿåºå¤§ï¼Œè€ŒåŠ è½½å¤šè¿›ç¨‹ä¹Ÿéœ€è¦è€—è´¹æ—¶é—´å’Œæ€§èƒ½ï¼Œå› æ­¤æˆ‘ä»¬æ‰ä¼šå‡ºç°ä½¿ç”¨äº†happypackåè€Œå¢åŠ è€—æ—¶çš„æƒ…å†µï¼›æ‰€ä»¥ä¸€èˆ¬happypacké€‚ç”¨äºæ¯”è¾ƒå¤§çš„é¡¹ç›®ä¸­ï¼›æœ¬å®ä¾‹å®Œæ•´ä»£ç demoã€‚ thread-loader æŠŠthread-loaderæ”¾ç½®åœ¨å…¶ä»–loaderä¹‹å‰ï¼Œåœ¨å®ƒä¹‹åçš„loaderå°±ä¼šåœ¨ä¸€ä¸ªå•ç‹¬çš„è¿›ç¨‹æ± ä¸­è¿è¡Œï¼Œä½†æ˜¯åœ¨è¿›ç¨‹æ± ä¸­è¿è¡Œçš„loaderæœ‰ä»¥ä¸‹é™åˆ¶ï¼š è¿™äº› loader ä¸èƒ½äº§ç”Ÿæ–°çš„æ–‡ä»¶ã€‚ è¿™äº› loader ä¸èƒ½ä½¿ç”¨å®šåˆ¶çš„ loader APIï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡æ’ä»¶ï¼‰ã€‚ è¿™äº› loader æ— æ³•è·å– webpack çš„é€‰é¡¹è®¾ç½®ã€‚ å› æ­¤ï¼Œä¹Ÿå°±æ˜¯è¯´åƒMiniCssExtractPlugin.loaderç­‰ä¸€äº›æå–cssçš„loaderæ˜¯ä¸èƒ½ä½¿ç”¨thread-loaderçš„ï¼›è·Ÿhappypackä¸€æ ·ï¼Œå®ƒä¹Ÿåªé€‚åˆç”¨äºæ–‡ä»¶è¾ƒå¤šçš„å¤§é¡¹ç›®ï¼š 12345678910111213module.exports = &#123; module: &#123; rules: [ &#123; test: /\\.js$/, use: [ &quot;thread-loader&quot;, &quot;babel-loader&quot; ] &#125; ] &#125;&#125; æœ¬å®ä¾‹å®Œæ•´ä»£ç demoã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"},{"name":"Webpack","slug":"Webpack","permalink":"https://xieyufei.com/tags/Webpack/"}]},{"title":"æ·±å…¥å­¦ä¹ Axiosæºç ï¼ˆæ„å»ºé…ç½®ï¼‰","date":"2020-07-18T10:56:39.000Z","path":"2020/07/18/Axios-One.html","text":"axiosæ˜¯æˆ‘ä»¬æ—¥å¸¸ä»£ç ä¸­å¸¸ç”¨çš„ä¸€ä¸ªhttpåº“ï¼Œå®ƒå¯ä»¥ç”¨æ¥åœ¨æµè§ˆå™¨æˆ–è€…node.jsä¸­å‘èµ·httpè¯·æ±‚ï¼›å®ƒå¼ºå¤§çš„åŠŸèƒ½å’Œç®€å•æ˜“ç”¨çš„APIå—åˆ°äº†å¹¿å¤§å‰ç«¯ç«¥é‹ä»¬çš„é’çï¼›é‚£ä¹ˆå®ƒå†…éƒ¨æ˜¯å¦‚ä½•æ¥å®ç°çš„å‘¢ï¼Œè®©æˆ‘ä»¬èµ°è¿›å®ƒçš„æºç ä¸–ç•Œä¸€æ¢ç©¶ç«Ÿã€‚ é¦–å…ˆæ¥çœ‹ä¸€ä¸‹axiosæœ‰å“ªäº›ç‰¹æ€§ï¼š ä»æµè§ˆå™¨ä¸­åˆ›å»º XMLHttpRequests ä» node.js åˆ›å»º http è¯·æ±‚ æ”¯æŒ Promise API æ‹¦æˆªè¯·æ±‚å’Œå“åº” è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ® å–æ¶ˆè¯·æ±‚ è‡ªåŠ¨è½¬æ¢ JSON æ•°æ® å®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRF axiosçš„å¤§è‡´å¤„ç†æµç¨‹å¦‚ä¸‹ï¼š å¤šç§è¯·æ±‚æ–¹å¼ axiosé™¤äº†ä»¥ä¸Šçš„ç‰¹æ€§ï¼Œè¿˜æ”¯æŒäº†å¤šç§è¯·æ±‚æ–¹å¼ï¼Œæ–¹ä¾¿æˆ‘ä»¬é€šè¿‡ä¸åŒçš„æ–¹å¼æ¥è¯·æ±‚ã€‚ ç¬¬ä¸€ç§æ–¹å¼axios(option)ã€‚ 123456axios(&#123; url, method, headers, data&#125;) ç¬¬äºŒç§æ–¹å¼axios(url[, config])ã€‚ 12345axios(&#x27;/api/list&#x27;, &#123; method, headers, data&#125;) ç¬¬ä¸‰ç§æ–¹å¼axios.request(url?,option)ï¼Œç¬¬ä¸‰ç§æ–¹å¼åŒç¬¬ä¸€ç§æ–¹å¼æœ¬è´¨ä¸Šä¸€æ ·ã€‚ 123456axios.request(&#123; url, method, headers, data&#125;) ç¬¬å››ç§æ–¹å¼axios.request(url,option)ï¼Œç¬¬å››ç§æ–¹å¼åŒç¬¬ä¸‰ç§æ–¹å¼æœ¬è´¨ä¸Šä¸€æ ·ã€‚ 12345axios.request(url, &#123; method, headers, data&#125;) ç¬¬äº”ç§æ–¹å¼axios[method](url,option)ï¼Œè¿™ç§è¯·æ±‚æ–¹å¼ä¸»è¦é’ˆå¯¹getã€deleteã€headã€optionsæ–¹æ³•ã€‚ 1234axios.get(url,&#123; headers, params&#125;) ç¬¬å…­ç§æ–¹å¼axios[method](url,data,option)ï¼Œè¿™ç§è¯·æ±‚æ–¹å¼ä¸»è¦é’ˆå¯¹postã€putã€patchæ–¹æ³•ã€‚ 123axios.post(url, data, &#123; headers,&#125;) è¿™å…­ç§è¯·æ±‚æ–¹å¼ä¹Ÿæ˜¯æˆ‘ä»¬å¸¸è§çš„æ–¹å¼ï¼›æˆ‘ä»¬å‘ç°å‰ä¸¤ç§è¯·æ±‚æ–¹å¼axiosä½œä¸ºä¸€ä¸ªå‡½æ•°ç›´æ¥æ¥è¯·æ±‚ï¼Œè€Œåé¢å››ç§æ–¹å¼axiosåˆ™æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼›å› æ­¤æˆ‘ä»¬çŒœæµ‹ï¼Œaxiosé¦–å…ˆè‚¯å®šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸ŠåˆæŒ‚è½½äº†requestã€getã€postç­‰å‡½æ•°æ–¹ä¾¿æˆ‘ä»¬å…·ä½“è°ƒç”¨æŸä¸ªæ–¹æ³•ã€‚ ç›®å½•ç»“æ„ çœ‹ä»£ç å‰å…ˆæ¥çœ‹ä¸€ä¸‹é¡¹ç›®çš„æ•´ä½“ç»“æ„ 123456789101112131415161718â”œâ”€â”€ /dist/ # é¡¹ç›®è¾“å‡ºç›®å½•â”œâ”€â”€ /lib/ # é¡¹ç›®æºç ç›®å½•â”‚ â”œâ”€â”€ /cancel/ # å®šä¹‰å–æ¶ˆåŠŸèƒ½â”‚ â”œâ”€â”€ /core/ # ä¸€äº›æ ¸å¿ƒåŠŸèƒ½â”‚ â”‚ â”œâ”€â”€ Axios.js # axiosçš„æ ¸å¿ƒä¸»ç±»â”‚ â”‚ â”œâ”€â”€ dispatchRequest.js # ç”¨æ¥è°ƒç”¨httpè¯·æ±‚é€‚é…å™¨æ–¹æ³•å‘é€è¯·æ±‚â”‚ â”‚ â”œâ”€â”€ InterceptorManager.js # æ‹¦æˆªå™¨æ„é€ å‡½æ•°â”‚ â”‚ â””â”€â”€ settle.js # æ ¹æ®httpå“åº”çŠ¶æ€ï¼Œæ”¹å˜Promiseçš„çŠ¶æ€â”‚ â”œâ”€â”€ /helpers/ # ä¸€äº›è¾…åŠ©æ–¹æ³•â”‚ â”œâ”€â”€ /adapters/ # å®šä¹‰è¯·æ±‚çš„é€‚é…å™¨ xhrã€httpâ”‚ â”‚ â”œâ”€â”€ http.js # å®ç°httpé€‚é…å™¨â”‚ â”‚ â””â”€â”€ xhr.js # å®ç°xhré€‚é…å™¨â”‚ â”œâ”€â”€ axios.js # å¯¹å¤–æš´éœ²æ¥å£â”‚ â”œâ”€â”€ defaults.js # é»˜è®¤é…ç½® â”‚ â””â”€â”€ utils.js # å…¬ç”¨å·¥å…·â”œâ”€â”€ package.json # é¡¹ç›®ä¿¡æ¯â”œâ”€â”€ index.d.ts # é…ç½®TypeScriptçš„å£°æ˜æ–‡ä»¶â””â”€â”€ index.js # å…¥å£æ–‡ä»¶ å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„ä»£ç å¤§å¤šåœ¨/libç›®å½•ä¸‹ã€‚ å·¥å…·å‡½æ•° çœ‹æºç ä¹‹å‰æˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ ä¸€ä¸‹axiosç”¨åˆ°çš„å‡ ä¸ªæ˜“äºæ··æ·†çš„å·¥å…·å‡½æ•°ï¼Œä»¥åŠå®ƒä»¬å…·ä½“æ˜¯ç”¨æ¥å®ç°ä»€ä¹ˆåŠŸèƒ½çš„ã€‚ bind bindå‡½æ•°ç”¨æ¥ç»™æŸä¸€å‡½æ•°æŒ‡å®šè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œå…¶æºç å¦‚ä¸‹ï¼š 12345678910//lib/helpers/bind.jsmodule.exports = function bind(fn, thisArg) &#123; return function wrap() &#123; var args = new Array(arguments.length); for (var i = 0; i &lt; args.length; i++) &#123; args[i] = arguments[i]; &#125; return fn.apply(thisArg, args); &#125;;&#125;; å®ƒçš„å®ç°æ•ˆæœåŒFunction.prototype.bind 1234567891011121314import bind from &#x27;/lib/helpers/bind.js&#x27;var obj = &#123; name: &#x27;hello&#x27;&#125;function showName() &#123; console.log(this.name)&#125;var instance = bind(showName, obj)//æ•ˆæœåŒä¸‹//var instance = showName.bind(obj)instance() forEach forEachç”¨æ¥éå†å¯¹è±¡æˆ–è€…æ•°ç»„ï¼›æˆ‘ä»¬çŸ¥é“å¯¹è±¡éœ€è¦for inéå†ï¼Œè€Œæ•°ç»„ç”¨forå¾ªç¯éå†ï¼ŒforEachå°†ä¸¤è€…éå†çš„æ–¹å¼æ•´åˆåˆ°ä¸€èµ·ï¼Œå…¶æºç å¦‚ä¸‹ï¼š 12345678910111213141516171819202122//lib/utils.jsfunction forEach(obj, fn) &#123; if (obj === null || typeof obj === &#x27;undefined&#x27;) &#123; return; &#125; //å…¼å®¹ä¸æ˜¯æ•°ç»„å¯¹è±¡çš„æƒ…å†µ //å¦‚æœæ˜¯åŸºæœ¬æ•°æ®ç±»å‹åŒæ ·æ”¾åˆ°æ•°ç»„ä¸­éå† if (typeof obj !== &#x27;object&#x27;) &#123; obj = [obj]; &#125; if (isArray(obj)) &#123; for (var i = 0, l = obj.length; i &lt; l; i++) &#123; fn.call(null, obj[i], i, obj); &#125; &#125; else &#123; for (var key in obj) &#123; if (Object.prototype.hasOwnProperty.call(obj, key)) &#123; fn.call(null, obj[key], key, obj); &#125; &#125; &#125;&#125; å¯ä»¥çœ‹å‡ºforEachå¯¹å­—ç¬¦ä¸²æˆ–è€…æ•°å­—ç­‰åŸºæœ¬æ•°æ®ç±»å‹åšäº†å…¼å®¹ï¼Œå¯¹æ•°ç»„å’Œå¯¹è±¡åšäº†ä¸åŒçš„éå†å¤„ç†ï¼›å…¶ä¸­å¦‚æœéå†çš„æ˜¯å¯¹è±¡ï¼Œå›è°ƒå‡½æ•°æ¯æ¬¡è¿”å›å¯¹è±¡çš„å€¼ã€é”®ä»¥åŠå¯¹è±¡æœ¬èº«ã€‚ 123456import &#123; forEach &#125; from &#x27;/lib/utils.js&#x27;forEach([1,2],(elem, index, array)=&gt;&#123;&#125;)forEach(&#123; name: &#x27;hi&#x27;, age: 18&#125;,(value, key, object)=&gt;&#123;&#125;) extend extendå°†ä¸€ä¸ªå¯¹è±¡bä¸Šé¢æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•æ‰©å±•åˆ°å¦ä¸€ä¸ªå¯¹è±¡aä¸Šï¼Œå¹¶ä¸”æŒ‡å®šæ–¹æ³•è°ƒç”¨çš„ä¸Šä¸‹æ–‡ï¼Œå…¶æºç å¦‚ä¸‹ï¼š 1234567891011//lib/utils.jsfunction extend(a, b, thisArg) &#123; forEach(b, function assignValue(val, key) &#123; if (thisArg &amp;&amp; typeof val === &#x27;function&#x27;) &#123; a[key] = bind(val, thisArg); &#125; else &#123; a[key] = val; &#125; &#125;); return a;&#125; è¿™é‡ŒforEachå°±ç”¨æ¥éå†å¯¹è±¡äº†ï¼›aæ˜¯ç›®æ ‡å¯¹è±¡ï¼Œbæ˜¯æºå¯¹è±¡ï¼ŒthisArgæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»£ç å°è¯•ä¸€ä¸‹ï¼š 123456789101112131415161718192021import &#123; extend &#125; from &#x27;/lib/utils.js&#x27;var context = &#123; name: &#x27;context&#x27;&#125;var target = &#123; name: &#x27;target&#x27;, say() &#123; console.log(&#x27;i am target,my name is &#x27; + this.name) &#125;&#125;var source = &#123; name: &#x27;source&#x27;, say() &#123; console.log(&#x27;i am source,my name is &#x27; + this.name) &#125;&#125;extend(target, source, context)//sourcetarget.name//i am source,my name is contexttarget.say() æœ€åè¿è¡Œå¯ä»¥å‘ç°sourceå¯¹è±¡ä¸Šçš„å±æ€§æ–¹æ³•éƒ½èµ‹å€¼åˆ°targetå¯¹è±¡ä¸Šï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯contextå¯¹è±¡äº†ã€‚ merge mergeå‡½æ•°ç”¨æ¥å°†å¤šä¸ªå¯¹è±¡æ·±åº¦åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œå…¶æºç å¦‚ä¸‹ï¼š 1234567891011121314151617181920//lib/utils.jsfunction merge(/* obj1, obj2, obj3, ... */) &#123; var result = &#123;&#125;; function assignValue(val, key) &#123; if (isPlainObject(result[key]) &amp;&amp; isPlainObject(val)) &#123; result[key] = merge(result[key], val); &#125; else if (isPlainObject(val)) &#123; result[key] = merge(&#123;&#125;, val); &#125; else if (isArray(val)) &#123; result[key] = val.slice(); &#125; else &#123; result[key] = val; &#125; &#125; for (var i = 0, l = arguments.length; i &lt; l; i++) &#123; forEach(arguments[i], assignValue); &#125; return result;&#125; isPlainObjectåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªJSåŸç”Ÿå¯¹è±¡ï¼Œå³ä½¿ç”¨Objectæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼›å¦‚æœæ˜¯å¯¹è±¡çš„è¯å°±è¿›è¡Œæ·±åº¦çš„åˆå¹¶ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªdemoæµ‹è¯•ä¸€ä¸‹ï¼š 1234567891011121314151617181920212223242526import &#123; merge &#125; from &#x27;/lib/utils.js&#x27;var obj1 = &#123; a:1, b: &#123; b1:1, b2:2 &#125;&#125;var obj2 = &#123; a:2 b: &#123; b1:4, b3:5 &#125;,&#125;var newObj = merge(obj1, obj2)//æœ€åç»“æœ//&#123;// a:2,// b: &#123;// b1:4,// b2:2,// b3:5// &#125;//&#125; æ„é€ å®ä¾‹ ä»‹ç»å®Œäº†å·¥å…·å‡½æ•°æˆ‘ä»¬å°±çœŸæ­£çš„è¿›å…¥axiosçš„æ ¸å¿ƒæºç éƒ¨åˆ†ï¼›é¦–å…ˆåœ¨index.jsä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°é€šè¿‡module.exports = require(&#39;./lib/axios&#39;);å¯¼å‡ºäº†axiosï¼Œå› æ­¤æˆ‘ä»¬æ‰¾åˆ°/lib/axiosæ–‡ä»¶ï¼š 12345678910111213141516171819202122//çœç•¥éƒ¨åˆ†ä»£ç ///lib/axios.jsvar Axios = require(&#x27;./core/Axios&#x27;);var utils = require(&#x27;./utils&#x27;);var bind = require(&#x27;./helpers/bind&#x27;);//é»˜è®¤é…ç½®var defaults = require(&#x27;./defaults&#x27;);function createInstance(defaultConfig) &#123; //åˆ›å»ºaxioså®ä¾‹ var context = new Axios(defaultConfig); //å°†instanceæŒ‡å‘Axios.prototype.requestå‡½æ•° var instance = bind(Axios.prototype.request, context); //å°†Axios.prototypeä¸Šçš„å±æ€§å’Œæ–¹æ³•æ‰©å±•åˆ°instanceä¸Š utils.extend(instance, Axios.prototype, context); //å°†contextä¸Šçš„å±æ€§å’Œæ–¹æ³•æ‰©å±•åˆ°instanceä¸Š utils.extend(instance, context); return instance;&#125;var axios = createInstance(defaults);module.exports = axios; è¿™æ®µä»£ç çœ‹ä¸Šå»æ¯”è¾ƒç»•ï¼Œä¸è¿‡æˆ‘ä»¬å‘ç°æ ¸å¿ƒéƒ¨åˆ†å°±æ˜¯é€šè¿‡createInstanceåˆ›å»ºäº†ä¸€ä¸ªaxioså®ä¾‹å¯¹è±¡ï¼Œåˆ›å»ºçš„åŒæ—¶ä¼ å…¥äº†defaultConfigå¯¹è±¡ï¼ˆæ ¹æ®åå­—æˆ‘ä»¬ä¹Ÿèƒ½çŒœå‡ºæ¥è¿™æ˜¯é»˜è®¤é…ç½®ï¼‰ï¼Œç„¶åå°†å®ä¾‹å¯¹è±¡å¯¼å‡ºï¼›å› æ­¤createInstanceåˆ›å»ºçš„å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨çš„é‚£ä¸ªaxioså‡½æ•°ã€‚ ç”±äºcreateInstanceåˆ›å»ºæ˜¯é€šè¿‡Axiosæ„é€ å‡½æ•°åˆ›å»ºçš„ï¼Œå› æ­¤æˆ‘ä»¬æŠŠcreateInstanceæ”¾ä¸€æ”¾ï¼Œå…ˆçœ‹ä¸€ä¸‹Axiosæ„é€ å‡½æ•°åšäº†å“ªäº›æ“ä½œï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748var utils = require(&#x27;./../utils&#x27;);var buildURL = require(&#x27;../helpers/buildURL&#x27;);var InterceptorManager = require(&#x27;./InterceptorManager&#x27;);var dispatchRequest = require(&#x27;./dispatchRequest&#x27;);var mergeConfig = require(&#x27;./mergeConfig&#x27;);function Axios(instanceConfig) &#123; //é»˜è®¤é…ç½® this.defaults = instanceConfig; //æ‹¦æˆªå™¨ this.interceptors = &#123; request: new InterceptorManager(), response: new InterceptorManager() &#125;;&#125;Axios.prototype.request = function request(config) &#123; //å…¼å®¹axios.request(url,config)çš„æƒ…å†µ if (typeof config === &#x27;string&#x27;) &#123; config = arguments[1] || &#123;&#125;; config.url = arguments[0]; &#125; else &#123; config = config || &#123;&#125;; &#125; config = mergeConfig(this.defaults, config); var promise = Promise.resolve(config); //çœç•¥éƒ¨åˆ†å‘é€è¯·æ±‚çš„ä»£ç  return promise;&#125;;utils.forEach([&#x27;delete&#x27;, &#x27;get&#x27;, &#x27;head&#x27;, &#x27;options&#x27;], function forEachMethodNoData(method) &#123; Axios.prototype[method] = function(url, config) &#123; return this.request(mergeConfig(config || &#123;&#125;, &#123; method: method, url: url &#125;)); &#125;;&#125;);utils.forEach([&#x27;post&#x27;, &#x27;put&#x27;, &#x27;patch&#x27;], function forEachMethodWithData(method) &#123; Axios.prototype[method] = function(url, data, config) &#123; return this.request(mergeConfig(config || &#123;&#125;, &#123; method: method, url: url, data: data &#125;)); &#125;;&#125;);module.exports = Axios; Axiosæ„é€ å‡½æ•°ä»…ä»…åšäº†ä¸¤ä¸ªäº‹ï¼Œä¸€ä¸ªæ˜¯å°†é»˜è®¤é…ç½®ä¿å­˜åˆ°defaultsï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯æ„é€ äº†interceptorsæ‹¦æˆªå™¨å¯¹è±¡ï¼›Axioså‡½æ•°åœ¨åŸå‹å¯¹è±¡ä¸Šè¿˜æŒ‚è½½äº†requestã€getã€postç­‰å‡½æ•°ï¼Œä½†æ˜¯getã€postç­‰å‡½æ•°æœ€ç»ˆéƒ½æ˜¯é€šè¿‡requestå‡½æ•°æ¥å‘èµ·è¯·æ±‚çš„ã€‚è€Œä¸”requestå‡½æ•°æœ€ç»ˆè¿”å›äº†ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œ å› æ­¤æˆ‘ä»¬æ‰èƒ½é€šè¿‡thenå‡½æ•°æ¥æ”¶åˆ°è¯·æ±‚ç»“æœã€‚å¯¹åŸå‹é“¾ä¸äº†è§£çš„ç«¥é‹å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ä¸€æ–‡è¯»æ‡‚JSä¸­ç±»ã€åŸå‹å’Œç»§æ‰¿ã€‚ äº†è§£äº†Axiosæ„é€ å‡½æ•°çš„æœ¬è´¨ï¼Œè®©æˆ‘ä»¬å†å›åˆ°createInstanceå‡½æ•°ï¼š 1234567function createInstance(defaultConfig) &#123; var context = new Axios(defaultConfig); var instance = bind(Axios.prototype.request, context); utils.extend(instance, Axios.prototype, context); utils.extend(instance, context); return instance;&#125; æˆ‘ä»¬å‘ç°Axiosæ„é€ å‡ºäº†å®ä¾‹å¯¹è±¡contextï¼Œç„¶è€ŒcreateInstanceå¹¶ä¸æ˜¯ç›´æ¥è¿”å›äº†contextå¯¹è±¡ï¼›è¿™æ˜¯å› ä¸ºä¸Šé¢æˆ‘ä»¬ä¹Ÿè¯´äº†axiosæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶è€Œcontextæ˜¯å¯¹è±¡ï¼Œè¿”å›å¯¹è±¡çš„è¯æ˜¯å¹¶ä¸èƒ½ç›´æ¥è°ƒç”¨çš„ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ æˆ‘ä»¬åœ¨Axiosæºç ä¸­å‘ç°ï¼ŒçœŸæ­£è°ƒç”¨çš„æ˜¯AxiosåŸå‹é“¾ä¸Šçš„requestæ–¹æ³•ï¼›å› æ­¤å¯¼å‡ºçš„axioséœ€è¦å…³è”åˆ°requestæ–¹æ³•ï¼Œè¿™é‡Œå·§å¦™çš„é€šè¿‡bindå‡½æ•°è¿›è¡Œå…³è”ï¼Œç”Ÿæˆå…³è”åçš„instanceå‡½æ•°ï¼ŒåŒæ—¶æŒ‡å®šå®ƒçš„è°ƒç”¨ä¸Šä¸‹æ–‡å°±æ˜¯Axiosçš„å®ä¾‹å¯¹è±¡ï¼Œå› æ­¤instanceè°ƒç”¨æ—¶ä¹Ÿèƒ½è·å–åˆ°å®ä¾‹å¯¹è±¡ä¸Šçš„defaultså’Œinterceptorså±æ€§ï¼›ä½†æ˜¯ä»…ä»…å…³è”requestè¿˜ä¸å¤Ÿï¼Œå†é€šè¿‡extendå‡½æ•°å°†AxiosåŸå‹å¯¹è±¡ä¸Šçš„æ‰€æœ‰getã€postç­‰å‡½æ•°æ‰©å±•åˆ°instanceå‡½æ•°ä¸Šï¼Œå› æ­¤è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ‰èƒ½å¤Ÿä½¿ç”¨å¤šç§æ–¹å¼è°ƒç”¨çš„åŸå› æ‰€åœ¨ã€‚ åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åˆ›å»ºå¤šä¸ªaxioså®ä¾‹ï¼Œä½†æ˜¯æŸå‡ ä¸ªaxioså®ä¾‹çš„é…ç½®ï¼ˆç”¨äº†åŒæ ·çš„åŸŸåç­‰ï¼‰æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›æ¯æ¬¡éƒ½è¦å†™é‡å¤çš„é…ç½®ï¼Œaxiosè¿˜æä¾›äº†å¦ä¸€ç§åˆ›å»ºå®ä¾‹æ¨¡æ¿çš„æ–¹å¼ï¼š 1234567const instance = axios.create(&#123; baseURL: &#x27;https://some-domain.com/api/&#x27;, timeout: 1000, headers: &#123;&#x27;X-Custom-Header&#x27;: &#x27;foobar&#x27;&#125;&#125;);instance.get(&#x27;/list&#x27;)instance.post(&#x27;/add&#x27;) é€šè¿‡createå‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæœ‰é»˜è®¤é…ç½®çš„å®ä¾‹ï¼Œè¿™æ ·æˆ‘ä»¬åªéœ€è¦æ„‰å¿«çš„è°ƒç”¨axiosçš„APIæ–¹æ³•å³å¯ï¼›éœ€è¦è¯·æ±‚å…¶ä»–åŸŸååªéœ€è¦å†æ¬¡createå³å¯ï¼Œè¿™ä¹Ÿæ˜¯å·¥å‚æ¨¡å¼çš„ä¸€ç§ä½“ç°ï¼Œå®ƒçš„æºç å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œä¹Ÿæ˜¯é€šè¿‡createInstanceåˆ›å»ºä¸€ä¸ªåˆå¹¶é…ç½®åçš„å®ä¾‹ï¼š 123axios.create = function create(instanceConfig) &#123; return createInstance(mergeConfig(axios.defaults, instanceConfig));&#125;; é…ç½®åˆå¹¶ å®ä¾‹å¯¹è±¡åˆ›å»ºå¥½ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠé…ç½®è¿›è¡Œåˆå¹¶ï¼Œæ–¹ä¾¿åé¢å‘é€è¯·æ±‚ã€‚åœ¨çœ‹æºç å‰ï¼Œæˆ‘ä»¬å‘ç°ä¸Šé¢ä»£ç ä¸­ä¸»è¦æœ‰ä¸¤ç§configï¼Œä¸€ç§æ˜¯defaultConfigï¼Œå³é»˜è®¤é…ç½®ï¼Œåœ¨æ„é€ å®ä¾‹çš„æ—¶å€™ä¼ å…¥ï¼›å¦ä¸€ç§æ˜¯userConfigï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è°ƒç”¨å®ä¾‹è¿›è¡Œè¯·æ±‚æ—¶ä¼ å…¥çš„é…ç½®ï¼›åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œä¹Ÿå‡ºç°äº†å¾ˆå¤šæ¬¡mergeConfigè¿™ä¸ªå‡½æ•°ï¼Œæ ¹æ®å‘½åæˆ‘ä»¬ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼Œè¿™æ˜¯ç”¨æ¥åˆå¹¶ä¸¤ç§é…ç½®çš„ã€‚ é»˜è®¤é…ç½® é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹axiosç»™æˆ‘ä»¬é»˜è®¤é…ç½®äº†å“ªäº›å±æ€§ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//lib/defaultsvar utils = require(&#x27;./utils&#x27;);var DEFAULT_CONTENT_TYPE = &#123; &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27;&#125;;function getDefaultAdapter() &#123; var adapter; if (typeof XMLHttpRequest !== &#x27;undefined&#x27;) &#123; //æµè§ˆå™¨ç¯å¢ƒä½¿ç”¨xhr adapter = require(&#x27;./adapters/xhr&#x27;); &#125; else if (typeof process !== &#x27;undefined&#x27; &amp;&amp; Object.prototype.toString.call(process) === &#x27;[object process]&#x27;) &#123; //nodeç¯å¢ƒä½¿ç”¨http adapter = require(&#x27;./adapters/http&#x27;); &#125; return adapter;&#125;var defaults = &#123; adapter: getDefaultAdapter(), transformRequest: [function transformRequest(data, headers) &#123; //çœç•¥è½¬æ¢è¯·æ±‚æ•°æ®ä»£ç  return data; &#125;], transformResponse: [function transformResponse(data) &#123; if (typeof data === &#x27;string&#x27;) &#123; try &#123; data = JSON.parse(data); &#125; catch (e) &#123; /* Ignore */ &#125; &#125; return data; &#125;], timeout: 0, xsrfCookieName: &#x27;XSRF-TOKEN&#x27;, xsrfHeaderName: &#x27;X-XSRF-TOKEN&#x27;, maxContentLength: -1, maxBodyLength: -1, validateStatus: function validateStatus(status) &#123; return status &gt;= 200 &amp;&amp; status &lt; 300; &#125;&#125;;defaults.headers = &#123; common: &#123; &#x27;Accept&#x27;: &#x27;application/json, text/plain, */*&#x27; &#125;&#125;;utils.forEach([&#x27;delete&#x27;, &#x27;get&#x27;, &#x27;head&#x27;], function forEachMethodNoData(method) &#123; defaults.headers[method] = &#123;&#125;;&#125;);utils.forEach([&#x27;post&#x27;, &#x27;put&#x27;, &#x27;patch&#x27;], function forEachMethodWithData(method) &#123; defaults.headers[method] = utils.merge(DEFAULT_CONTENT_TYPE);&#125;);module.exports = defaults; å¯ä»¥å‘ç°ï¼Œaxioså®šä¹‰äº†é»˜è®¤çš„é€‚é…å™¨ï¼ˆç”¨äºå‘é€è¯·æ±‚ï¼‰ã€è½¬æ¢å™¨ï¼ˆè½¬æ¢è¯·æ±‚å’Œå“åº”æ•°æ®ï¼‰å’Œè¯·æ±‚å¤´ç­‰ä¸€äº›æ•°æ®ï¼›getDefaultAdapterå‡½æ•°ç”¨æ¥è·å–é»˜è®¤çš„é€‚é…å™¨ï¼Œè¿™æ ·åœ¨æµè§ˆå™¨ç«¯å’Œnodeç¯å¢ƒéƒ½å¯ä»¥å‘é€è¯·æ±‚ï¼›å¯ä»¥çœ‹åˆ°axiosç»™æ¯ä¸ªè¯·æ±‚æ–¹æ³•éƒ½å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤çš„è¯·æ±‚å¤´å’Œä¸€ä¸ªå…¬å…±çš„è¯·æ±‚å¤´commonï¼Œåœ¨åé¢å‘é€è¯·æ±‚æ—¶ä¼šæ ¹æ®ä¼ å…¥çš„è¯·æ±‚æ–¹æ³•ç±»å‹ä½¿ç”¨ç›¸åº”çš„è¯·æ±‚å¤´ã€‚ å±æ€§åˆ†ç±» ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹mergeConfigæ˜¯å¦‚ä½•å°†ä¸¤ç§configåˆå¹¶çš„ï¼›é¦–å…ˆmergeConfigå°†æ‰€æœ‰configä¸­ç”¨åˆ°çš„å­—æ®µè¿›è¡Œäº†åˆ’åˆ†ï¼Œåˆ†æˆäº†ä¸‰ç±»ï¼š æ²¡æœ‰åˆå§‹å€¼ï¼Œå…¶å€¼å¿…é¡»ç”±åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å®š éœ€è¦åˆå¹¶çš„å±æ€§ï¼Œè¿™äº›å±æ€§ä¸€èˆ¬éƒ½æ˜¯å¯¹è±¡ï¼Œå¤„ç†æ—¶éœ€è¦å°†å¯¹è±¡è¿›è¡Œåˆå¹¶ æ™®é€šå±æ€§ï¼Œè¿™äº›å±æ€§ä¸€èˆ¬éƒ½æ˜¯å€¼ç±»å‹ï¼Œå¦‚æœuserConfigä¸­æœ‰ï¼Œåˆ™ä»¥userConfigä¸ºå‡†ï¼›æ²¡æœ‰å–defaultConfigçš„å€¼ 1234567891011121314151617181920//å¯ä»¥æŠŠconfig1çœ‹åšdefaultConfig,config2çœ‹åšuserConfigmodule.exports = function mergeConfig(config1, config2) &#123; config2 = config2 || &#123;&#125;; //æœ€ç»ˆè¿”å›åˆå¹¶åçš„é…ç½® var config = &#123;&#125;; //ç¬¬ä¸€ç§å±æ€§ var valueFromConfig2Keys = [&#x27;url&#x27;, &#x27;method&#x27;, &#x27;data&#x27;]; //ç¬¬äºŒç§å±æ€§ var mergeDeepPropertiesKeys = [&#x27;headers&#x27;, &#x27;auth&#x27;, &#x27;proxy&#x27;, &#x27;params&#x27;]; //ç¬¬ä¸‰ç§å±æ€§ var defaultToConfig2Keys = [ &#x27;baseURL&#x27;, &#x27;transformRequest&#x27;, &#x27;transformResponse&#x27;, &#x27;paramsSerializer&#x27;, &#x27;timeout&#x27;, &#x27;timeoutMessage&#x27;, &#x27;withCredentials&#x27;, &#x27;adapter&#x27;, &#x27;responseType&#x27;, &#x27;xsrfCookieName&#x27;, &#x27;xsrfHeaderName&#x27;, &#x27;onUploadProgress&#x27;, &#x27;onDownloadProgress&#x27;, &#x27;decompress&#x27;, &#x27;maxContentLength&#x27;, &#x27;maxBodyLength&#x27;, &#x27;maxRedirects&#x27;, &#x27;transport&#x27;, &#x27;httpAgent&#x27;, &#x27;httpsAgent&#x27;, &#x27;cancelToken&#x27;, &#x27;socketPath&#x27;, &#x27;responseEncoding&#x27; ]; var directMergeKeys = [&#x27;validateStatus&#x27;]; //çœç•¥ä¸‹é¢ä»£ç &#125; å¯¹äºç¬¬ä¸€ç§å±æ€§ï¼Œurlã€methodå’Œdataä¸èƒ½ä»é»˜è®¤é…ç½®ä¸­å–å€¼ï¼Œå› æ­¤å¦‚æœuserConfigä¸­æœ‰å°±ç›´æ¥å–userConfigä¸­çš„å€¼ã€‚ 123456789101112131415function getMergedValue(target, source) &#123; if (utils.isPlainObject(target) &amp;&amp; utils.isPlainObject(source)) &#123; return utils.merge(target, source); &#125; else if (utils.isPlainObject(source)) &#123; return utils.merge(&#123;&#125;, source); &#125; else if (utils.isArray(source)) &#123; return source.slice(); &#125; return source;&#125;utils.forEach(valueFromConfig2Keys, function valueFromConfig2(prop) &#123; if (!utils.isUndefined(config2[prop])) &#123; config[prop] = getMergedValue(undefined, config2[prop]); &#125;&#125;); å¯¹äºç¬¬äºŒç§å±æ€§ï¼Œå¦‚æœuserConfigä¸­æœ‰ï¼Œå°±å°†å…¶ä¸defaultConfigè¿›è¡Œåˆå¹¶ã€‚ 12345678function mergeDeepProperties(prop) &#123; if (!utils.isUndefined(config2[prop])) &#123; config[prop] = getMergedValue(config1[prop], config2[prop]); &#125; else if (!utils.isUndefined(config1[prop])) &#123; config[prop] = getMergedValue(undefined, config1[prop]); &#125;&#125;utils.forEach(mergeDeepPropertiesKeys, mergeDeepProperties); å¯¹äºç¬¬ä¸‰ç§æ™®é€šå±æ€§ï¼Œå¦‚æœuserConfigä¸­æœ‰å°±å–userConfigï¼Œæ²¡æœ‰å°±å–defaultConfigä¸­çš„å€¼ã€‚ 1234567utils.forEach(defaultToConfig2Keys, function defaultToConfig2(prop) &#123; if (!utils.isUndefined(config2[prop])) &#123; config[prop] = getMergedValue(undefined, config2[prop]); &#125; else if (!utils.isUndefined(config1[prop])) &#123; config[prop] = getMergedValue(undefined, config1[prop]); &#125;&#125;); å¯¹äºé™¤è¿™ä¸‰ç§å±æ€§ä¹‹å¤–çš„å…¶ä»–å±æ€§ï¼Œå½“åšç¬¬äºŒç§å±æ€§å¤„ç†ï¼Œé€šè¿‡mergeDeepPropertieså‡½æ•°è¿›è¡Œæ•´åˆã€‚ 1234567891011121314var axiosKeys = valueFromConfig2Keys .concat(mergeDeepPropertiesKeys) .concat(defaultToConfig2Keys) .concat(directMergeKeys);//è·å–ä¸åœ¨ä¸Šè¿°ä¸‰ç§å±æ€§çš„ä¸­çš„å…¶ä»–å±æ€§çš„æ•°ç»„var otherKeys = Object .keys(config1) .concat(Object.keys(config2)) .filter(function filterAxiosKeys(key) &#123; return axiosKeys.indexOf(key) === -1; &#125;);utils.forEach(otherKeys, mergeDeepProperties); æ€»ç»“ axiosçš„æºç è¿˜æ˜¯æœ‰å¾ˆå¤šçš„åœ°æ–¹å€¼å¾—æˆ‘ä»¬æ¥æ·±å…¥å­¦ä¹ çš„ï¼Œæ¯”å¦‚å·¥å…·å‡½æ•°å’Œå®ƒå¦‚ä½•æ„é€ å®ä¾‹ç­‰ï¼›æˆ‘ä»¬æ ¹æ®axiosçš„å¤šç§è¯·æ±‚æ–¹å¼ï¼Œæ‰¾åˆ°äº†å®ƒåœ¨æ„é€ å®ä¾‹æ—¶å·§å¦™çš„ç»‘å®šæ–¹å¼æ¥å®ç°å¤šç§è¯·æ±‚çš„è°ƒç”¨ï¼Œæ„é€ å®ä¾‹åå°±éœ€è¦å°†ç”¨æˆ·ä¼ å…¥çš„é…ç½®å’Œé»˜è®¤çš„é…ç½®è¿›è¡Œæ•´åˆèµ·æ¥ï¼›åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä¼šäº†è§£axiosæ˜¯å¦‚ä½•ä½¿ç”¨æ•´åˆåçš„é…ç½®æ¥é€šè¿‡é€‚é…å™¨å‘èµ·è¯·æ±‚çš„ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"}]},{"title":"æ·±å…¥ç†è§£linear-gradient","date":"2020-07-10T12:48:47.000Z","path":"2020/07/10/Line-Gradient.html","text":"linear-gradientæ˜¯CSS3çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼›åœ¨ä»¥å‰å®ç°æ¸å˜ã€é˜´å½±ç­‰ä¸€äº›é…·ç‚«æ•ˆæœéƒ½æ˜¯é€šè¿‡å›¾ç‰‡æ¥å®ç°çš„ï¼Œä½†æ˜¯é€šè¿‡linear-gradientæˆ‘ä»¬å¯ä»¥å®ç°åŒæ ·ä¸°å¯Œå¤šæ ·çš„æ•ˆæœã€‚ å®šä¹‰åŠè¯­æ³• linear-gradient()ç§°ä¸ºçº¿æ€§è¿‡æ¸¡å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªçº¿æ€§æ¸å˜çš„å›¾åƒã€‚ä¸ºäº†åˆ›å»ºä¸€ä¸ªçº¿æ€§æ¸å˜ï¼Œæˆ‘ä»¬éœ€è¦æœ€å°‘ä¼ å…¥ä¸‰ä¸ªå…ƒç´ ï¼šæ¸å˜æ–¹å‘ã€èµ·å§‹ç‚¹é¢œè‰²å’Œç»ˆæ­¢ç‚¹é¢œè‰²ï¼ˆå¯ä»¥æœ‰å¤šä¸ªç»ˆæ­¢ç‚¹ï¼‰ï¼›å› æ­¤ï¼Œå®ƒçš„è¯­æ³•ä¹Ÿæ˜¯ä¼ å…¥å¤šä¸ªèŠ‚ç‚¹çš„é¢œè‰²å³å¯ï¼š background: linear-gradient(direction, color-stop1, color-stop2, â€¦); directionè¡¨ç¤ºæ¸å˜çš„ä¸€ä¸ªæ–¹å‘ï¼Œcolor-stopè¡¨ç¤ºæ¸å˜æ–¹å‘ä¸Šä¸åŒçš„èŠ‚ç‚¹ï¼›æˆ‘ä»¬å°è¯•æ„å»ºä¸€ä¸ªå½©è™¹è‰²æ¸å˜çš„divï¼š 12345.box&#123; width: 200px; height: 200px; background: linear-gradient(to bottom,red,orange,yellow,green,blue,indigo,violet);&#125; æˆ‘ä»¬å®šä¹‰äº†æ¸å˜æ–¹å‘ä¸Šçº¢æ©™é»„ç»¿é’è“ç´«ä¸ƒä¸ªèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¼šåœ¨divä¸Šè‡ªåŠ¨æ’åˆ—åˆ†å¸ƒï¼ŒèŠ‚ç‚¹ä¸­é—´çš„æ¸å˜éƒ¨åˆ†åˆ™ç”±æµè§ˆå™¨è‡ªåŠ¨è®¡ç®—ç»˜åˆ¶ï¼Œå› æ­¤ä¸€ä¸ªå½©è™¹divå°±å‡ºæ¥äº†ï¼š æ¸å˜çº¿ åœ¨æ¸å˜å®¹å™¨ä¸­ï¼Œç©¿è¿‡å®¹å™¨ä¸­å¿ƒç‚¹å’Œé¢œè‰²åœæ­¢ç‚¹è¿æ¥åœ¨ä¸€èµ·çš„çº¿ç§°ä¸ºæ¸å˜çº¿. è¿™é‡Œçš„æ¸å˜çº¿ä»Aåˆ°Bï¼Œç©¿è¿‡å®¹å™¨çš„ä¸­å¿ƒç‚¹Cï¼›æ¸å˜çº¿ABä¸å®¹å™¨çš„å‚ç›´çº¿å½¢æˆçš„å¤¹è§’Î±ï¼Œç§°ä¸ºæ¸å˜è§’åº¦ã€‚ åœ¨ä¸Šé¢è¯­æ³•ä¸­çš„directionå°±æ˜¯ç”¨æ¥æ§åˆ¶æ¸å˜çº¿çš„æ–¹å‘ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸¤ç§ç±»å‹çš„å€¼ï¼š æ–¹å‘å…³é”®è¯ï¼što topã€to bottomã€to leftã€to rightã€to top rightã€to top leftã€to bottom rightå’Œto bottom left ä½¿ç”¨å¸¦å•ä½çš„æ•°å­—å®šä¹‰æ¸å˜è§’åº¦ï¼šä¾‹å¦‚45degã€1turnç­‰ï¼ˆturnè¡¨ç¤ºåœˆï¼Œ1turn=360degï¼‰ å¦‚æœçœç•¥è§’åº¦å€¼çš„è®¾ç½®ï¼Œé»˜è®¤directionå°±æ˜¯to bottomï¼Œå®ƒè½¬æ¢æˆè§’åº¦å•ä½å°±æ˜¯180degæˆ–è€…0.5turnã€‚ åœ¨ä¸Šå›¾ä¸­ï¼Œæ²¡æœ‰è®¾ç½®directionï¼Œwhiteè‡³redæ¸å˜è‰²æ˜¯ä»ä¸Šè‡³ä¸‹ï¼Œå®ƒå’Œä½¿ç”¨to bottomæ–¹å‘å…³é”®è¯å¾—åˆ°çš„æ•ˆæœæ˜¯ä¸€è‡´çš„ã€‚ å¦å¤–ï¼Œä½¿ç”¨to topå’Œ0degçš„æ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š é™¤äº†leftã€rightã€topå’Œbottomï¼Œå¦å¤–å››ä¸ªä½¿ç”¨äº†é¡¶è§’å…³é”®è¯ï¼Œæ¯”å¦‚ï¼što top rightï¼Œè¡¨ç¤ºä»å®¹å™¨çš„ä¸€ä¸ªé¡¶è§’åˆ°å®ƒçš„å¯¹è§’ï¼Œå› æ­¤ä»–ä»¬çš„è§’åº¦ä¾èµ–äºå®¹å™¨çš„å°ºå¯¸å¤§å°ã€‚ å¯ä»¥çœ‹å‡ºæ¥ï¼Œå¦‚æœå®¹å™¨æ˜¯ä¸€ä¸ªé•¿æ–¹å½¢ï¼Œto top rightè§’åº¦å°±ä¸ä¸º45degã€‚ æ¸å˜èŠ‚ç‚¹ åœ¨ä¸Šé¢demoä¸­å¤šä¸ªæ¸å˜èŠ‚ç‚¹éƒ½æ˜¯æµè§ˆå™¨è‡ªå·±å‡åŒ€åˆ†å¸ƒåè®¡ç®—å‡ºæ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¢œè‰²åé¢æ˜¾ç¤ºçš„å®šä¹‰é¢œè‰²åœ¨æ¸å˜è‰²çš„ä½ç½®ï¼›æ¯ä¸ªä½ç½®å¯ä»¥ç”¨ç™¾åˆ†æ¯”è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨CSSé•¿åº¦å•ä½ï¼ˆpxï¼‰æ¥è¡¨ç¤ºã€‚ æˆ‘ä»¬ç»™æ¯ä¸ªé¢œè‰²å®šä¹‰äº†è‡ªå·±çš„ä½ç½®ï¼Œä»¥ç™¾åˆ†æ¯”ä¸ºå•ä½ï¼Œè¿™äº›å•ä½éƒ½æ˜¯ä»¥æ¸å˜çº¿çš„å¼€å§‹ä½ç½®è¿›è¡Œè®¡ç®—çš„ã€‚ å¦‚æœæˆ‘ä»¬å°†ä¸¤ä¸ªæ¸å˜èŠ‚ç‚¹çš„ä½ç½®é‡åˆï¼Œé‚£ä¹ˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬æƒŠå¥‡çš„å‘ç°ä¹‹å‰çš„æ¸å˜è‰²æ²¡äº†ï¼Œè€Œæ˜¯åˆ†å‰²æˆäº†ä¸åŒçš„è‰²å—ï¼›åŒæ—¶æˆ‘ä»¬å‘ç°ä¸¤è¾¹çš„è‰²å—å‘ˆç°æ¢¯å½¢ï¼›åœ¨é¢è¯•å®Œ50ä¸ªäººåæˆ‘å†™ä¸‹è¿™ç¯‡æ€»ç»“ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡borderå±æ€§æ¥ç”»äº†ä¸‰è§’å½¢å’Œæ¢¯å½¢ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡linear-gradientå¾ˆæ–¹ä¾¿çš„å°±èƒ½ç”»å‡ºæ¥ï¼Œè¿™é‡Œä¸å†æ¼”ç¤ºã€‚ å…¶ä»–æ•ˆæœ linear-gradientè¿˜æœ‰ä¸€äº›ä¸°å¯Œçš„æ•ˆæœ è¿›åº¦æ¡æ•ˆæœ è¿™æ ·çš„è¿›åº¦æ¡æ•ˆæœæˆ‘ä»¬åœ¨æµè§ˆç½‘é¡µçš„æ—¶å€™ç»å¸¸ä¼šçœ‹åˆ°ï¼Œå¾ˆå¤šéƒ½æ˜¯é€šè¿‡å›¾ç‰‡æˆ–è€…animateå®ç°çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡linear-gradientå®ç°ç®€å•çš„é™æ€æ•ˆæœã€‚ 123456789101112.box1 &#123; width: 600px; height: 20px; margin: 20px; border-radius: 4px; background: linear-gradient(45deg, #5BC0DF 0%, #5BC0DF 10%, #76CAE3 10%, #76CAE3 20%, #5BC0DF 20%, #5BC0DF 30%, #76CAE3 30%, #76CAE3 40%, #5BC0DF 40%, #5BC0DF 50%, #76CAE3 50%, #76CAE3 60%, #5BC0DF 60%, #5BC0DF 70%, #76CAE3 70%, #76CAE3 80%, #5BC0DF 80%, #5BC0DF 90%, #76CAE3 90%, #76CAE3 100%);&#125; é€šè¿‡æ¸å˜èŠ‚ç‚¹å‰åç›¸è¿æ¥ï¼Œè¿™æ ·ä¸€ä¸ªå¡é€šé£æ ¼çš„è¿›åº¦æ¡å°±å®Œæˆäº†ã€‚ ç¼ºè§’æ•ˆæœ ç¼ºè§’æŒ‰é’®å¶å°”ä¹Ÿä¼šçœ‹åˆ°ï¼Œå®ƒçš„å®ç°å…¶å®å¾ˆç®€å•ï¼Œå°†æ‹¼æ¥éƒ¨åˆ†çš„é¢œè‰²è®¾ç½®ä¸ºé€æ˜å³å¯ï¼š 123456789101112131415161718.box1 &#123; width: 100px; height: 40px; line-height: 40px; margin: 40px auto; background: linear-gradient(-135deg, transparent 10px, #162e48 10px); text-align: center; color: #fff;&#125;.box2&#123; width: 100px; height: 40px; line-height: 40px; margin: 40px auto; background: linear-gradient(-45deg, transparent 10px, #162e48 10px); text-align: center; color: #fff;&#125; å¼€å…³æ•ˆæœ å¼€å…³æ•ˆæœä¹Ÿæ˜¯å¾ˆå¤šjQueryç»„ä»¶ç»å¸¸ç”¨çš„ 1234567891011121314151617181920&lt;style&gt; .switch_box &#123; display: flex; justify-content: space-around; color: #fff; width: 144px; height: 30px; line-height: 30px; background: linear-gradient(45deg, #162e48 50%, #f00 50%); margin: 50px; &#125; .switch_box.active &#123; background: linear-gradient(45deg, #f00 50%, #162e48 50%); &#125;&lt;/style&gt;&lt;div class=&quot;switch_box active&quot;&gt; &lt;div&gt;ON&lt;/div&gt; &lt;div&gt;OFF&lt;/div&gt;&lt;/div&gt;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"CSS","slug":"CSS","permalink":"https://xieyufei.com/tags/CSS/"}]},{"title":"å¦‚ä½•å›ç­”é¢è¯•å®˜é—®çš„GETå’ŒPOSTåŒºåˆ«è¿™é“é€å‘½é¢˜","date":"2020-06-12T04:00:00.000Z","path":"2020/06/12/Diff-Get-Post.html","text":"åœ¨é¢è¯•ä¸­ï¼ŒGETå’ŒPOSTçš„åŒºåˆ«ä¹Ÿæ˜¯é¢è¯•å®˜éå¸¸å–œæ¬¢é—®çš„é—®é¢˜ä¹‹ä¸€ï¼›å¾ˆå¤šç«¥é‹ä¹ŸèƒŒçš„å¾ˆç†Ÿäº†ï¼ŒGETä¸å®‰å…¨ï¼ŒPOSTå®‰å…¨ç­‰ç­‰ï¼Œç„¶è€Œè¿™äº›å¯èƒ½å¹¶ä¸æ˜¯é¢è¯•å®˜çœŸæ­£æƒ³å¬åˆ°çš„ï¼Œé‚£ä¹ˆGETå’ŒPOSTåŒºåˆ«åˆ°åº•åœ¨å“ªå‘¢ï¼Ÿ æˆ‘ä»¬å°†ä»ä¸‹é¢å…­ä¸ªè§’åº¦æ¥å…·ä½“å‰–æä¸€ä¸‹GETå’ŒPOSTçš„çœŸæ­£åŒºåˆ«ã€‚ å®‰å…¨æ€§è§’åº¦ ä¸€èˆ¬è®¤ä¸ºPOSTåœ¨ä¼ è¾“æ•°æ®æ—¶æ›´åŠ çš„å®‰å…¨ï¼Œå› ä¸ºGETä¼ è¾“æ—¶å°†åœ¨URLä¸­æ˜¾ç¤ºå‚æ•°ï¼Œè€ŒPOSTçš„æ•°æ®åˆ™æ”¾åœ¨äº†è¯·æ±‚ä½“ï¼ˆbodyï¼‰ï¼Œæ‰€ä»¥æ›´å®‰å…¨ã€‚ è¿™ç§æƒ³æ³•çš„ç”±æ¥å¤šåŠæ˜¯å› ä¸ºè¡¨å•formæ•°æ®æäº¤æ—¶é»˜è®¤GETä¼ è¾“æ—¶ä¼šæŠŠè¡¨å•ä¸­çš„å­—ç¬¦æ‹¼æ¥åˆ°URLåä½œä¸ºå‚æ•°ä¼ é€ï¼ŒPOSTä¼ è¾“è¡¨å•æ•°æ®ä¼šæ”¾åœ¨bodyä¸­ï¼›å½“GETæ–¹å¼æäº¤åä¼šæŠŠæäº¤çš„æ•°æ®æ˜¾ç¤ºåœ¨URLä¸Šã€‚ 12345678910&lt;!-- GETæäº¤ --&gt;&lt;form action=&quot;/api/test/get&quot; method=&quot;get&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;password&quot;&gt; &lt;button type=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;&lt;/form&gt;&lt;!-- POSTæäº¤ --&gt;&lt;form action=&quot;/api/test/post&quot; method=&quot;post&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;password&quot;&gt; &lt;button type=&quot;submit&quot;&gt;æäº¤&lt;/button&gt;&lt;/form&gt; ä¸¤ç§æ–¹å¼æäº¤åURLä¸Šçš„å·®åˆ«è®©äººä»¬è§‰å¾—POSTç›¸å¯¹äºGETæ›´å®‰å…¨ã€‚ ç„¶è€Œå®‰å…¨æ€§çš„è¯´æ³•å­˜åœ¨ç€ä¸¤ä¸ªé—®é¢˜ï¼š æŠ“åŒ…åPOSTè¯·æ±‚ä¹Ÿæ˜¯èƒ½çœ‹åˆ°è¯·æ±‚ä½“ï¼ˆbodyï¼‰ä¸­çš„æ•°æ® HTTPè§„èŒƒå¹¶æœªè§„å®šè¯´ GET å°±ä¸èƒ½åœ¨è¯·æ±‚ä½“ï¼ˆbodyï¼‰ä¸­ä¼ è¾“æ•°æ® æ—¢ç„¶HTTPè§„èŒƒæ²¡æœ‰è§„å®šï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå°±ä¸èƒ½ä¼ å‘¢ï¼Ÿæˆ‘è¯•ç€ç”¨axioså’ŒjQueryæ¥åœ¨GETè¯·æ±‚ä½“ä¸­åŠ å…¥æ•°æ®ï¼Œæ— ä¸€ä¾‹å¤–çš„å¤±è´¥äº†ï¼›æ—¢ç„¶æ¡†æ¶é ä¸ä½é‚£å°±ç›´æ¥ç”¨åŸç”Ÿçš„å§ï¼š 12345678910var xhr = new XMLHttpRequest();xhr.onreadystatechange = function()&#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; console.log(xhr.responseText) &#125;&#125;xhr.open(&#x27;GET&#x27;, &#x27;/api/test/get&#x27;, true);xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;);//å‘é€è¯·æ±‚xhr.send(&#x27;password=123&#x27;); æˆ‘ä»¬é€šè¿‡expressæ¥æ¥æ”¶ä¸€ä¸‹ä¼ è¾“çš„æ•°æ®ï¼š 123456789101112131415//å…¶ä»–ä»£ç ç•¥app.get(&#x27;/api/test/get&#x27;, function(req, res)&#123; console.log(req.body, &#x27;get body&#x27;) res.json(&#123; code: 1, type: &#x27;get&#x27; &#125;)&#125;)app.post(&#x27;/api/test/post&#x27;, function(req, res)&#123; console.log(req.body, &#x27;post body&#x27;) res.json(&#123; code: 1, type: &#x27;post&#x27; &#125;)&#125;) æ­£å½“æˆ‘å…´å¥‹çš„å‡†å¤‡æ¥æ”¶æ•°æ®æ—¶ï¼Œç°å®ç‹ ç‹ çš„ç»™äº†æˆ‘ä¸€æ‹³ï¼š 1&#123;&#125; &#x27;get body&#x27; æµè§ˆå™¨å¹¶æ²¡æœ‰å¾€è¯·æ±‚ä½“ä¸­å­˜æ”¾æ•°æ®ï¼Œç›´æ¥æŠŠsendä¸­ä¼ è¾“çš„æ•°æ®ç»™ä¸¢å¼ƒäº†ï¼Œé‚£ä¹ˆGETçš„BODYä¸­çœŸçš„å°±ä¸èƒ½æ”¾æ•°æ®å—ï¼Ÿ ç­”æ¡ˆè‡ªç„¶æ˜¯å¯ä»¥çš„ï¼Œæµè§ˆå™¨ç”±äºè§„èŒƒé—®é¢˜ä¸ä¼šåœ¨GETçš„è¯·æ±‚ä½“ä¸­æ·»åŠ æ•°æ®ï¼Œé‚£æˆ‘ä»¬å¯ä»¥å°è¯•ä¸€ä¸‹é€šè¿‡Fiddlerçš„Composeræ¥æ·»åŠ ï¼š è¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨expressä¸­çœ‹åˆ°GETè¯·æ±‚ä¸­çš„ 1&#123; password: &#x27;fiddler_123456&#x27; &#125; &#x27;get body&#x27; æ—¢ç„¶GETä¹Ÿèƒ½åœ¨Bodyä¸­æ·»åŠ æ•°æ®ï¼Œé‚£ä¹ˆPOSTè¯·æ±‚æ•°æ®çš„å®‰å…¨æ€§å¹¶ä¸æ˜¯é¢è¯•å®˜æœŸæœ›å¬åˆ°çš„å›ç­”ã€‚ æ•°æ®é‡è§’åº¦ å¸¸è§çš„GETå’ŒPOSTåŒºåˆ«è¿˜æœ‰GETä¼ è¾“çš„æ•°æ®æ¯”è¾ƒå°‘ï¼ŒPOSTä¼ è¾“æ•°æ®å¤šï¼›åœ¨HTTPè§„èŒƒä¸­å¹¶æ²¡æœ‰å¯¹URLçš„é•¿åº¦å’Œä¼ è¾“çš„æ•°æ®å¤§å°è¿›è¡Œé™åˆ¶ï¼Œä½†æ˜¯åœ¨å®é™…å¼€å‘æ—¶ï¼Œç”±äºæµè§ˆå™¨å’ŒæœåŠ¡å™¨å‡å¯¹URLçš„é•¿åº¦è¿›è¡Œäº†é™åˆ¶ï¼Œå› æ­¤è¡¨ç°å‡ºäº†GETä¼ è¾“æ•°æ®å°‘çš„ç¼ºç‚¹ã€‚åœ¨ç¬”è€…çš„æµ‹è¯•è¿‡ç¨‹ä¸­ï¼ŒChromeçš„URLé•¿åº¦é™åˆ¶æ¯”è¾ƒå¥½ï¼ŒåŸºæœ¬èƒ½è¾¾åˆ°1mbçš„é™åˆ¶ï¼›è€Œåœ¨IE11ä¸­4kb~5kbçš„æ—¶å€™æµè§ˆå™¨å°±ä¼šè‡ªåŠ¨å°†URLåçš„å‚æ•°ä¸¢å¼ƒäº†ã€‚ è€Œå¯¹äºPOSTè¯·æ±‚ï¼Œç”±äºæ•°æ®æ”¾åœ¨è¯·æ±‚ä½“ä¸­ï¼Œè™½ç„¶ç†è®ºä¸Šä¸ä¼šå—åˆ°é™åˆ¶ï¼Œä½†æ˜¯å®é™…å¼€å‘ä¸­å„ä¸ªæœåŠ¡å™¨ä¹Ÿä¼šå¯¹POSTçš„æ•°æ®å¤§å°è¿›è¡Œä¸€å®šçš„é™åˆ¶ï¼›æ¯”å¦‚nginxé»˜è®¤ä¸Šä¼ å›¾ç‰‡çš„å¤§å°æ˜¯2mbï¼Œå›¾ç‰‡è¶…è¿‡2mbå°±ä¼šæç¤º413 Request Entity Too Largeã€‚ å› æ­¤ä¸ç®¡GETè¿˜æ˜¯POSTï¼Œæ•°æ®ä¼ è¾“å¤§å°éƒ½ä¼šæœ‰é™åˆ¶ï¼Œåªæ˜¯POSTçš„ä¼ è¾“å¤§å°ç›¸å¯¹äºGETæ¥è¯´æ¯”è¾ƒå¤§ï¼›æ•°æ®é‡å¤§å°ä¹Ÿå¹¶ä¸æ˜¯é¢è¯•å®˜æœŸæœ›å¬åˆ°çš„å›ç­”ã€‚ ç¼“å­˜è§’åº¦ GETè¯·æ±‚å¤šæ˜¯ç”¨æ¥è·å–æ•°æ®çš„ï¼Œæ¯”å¦‚ä¸€ä»¶å•†å“çš„ä¿¡æ¯ã€å•†å“åˆ—è¡¨ç­‰ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…ï¼Œå•†å“çš„ä¿¡æ¯ä¸ä¼šé‚£ä¹ˆå¿«çš„å˜åŒ–ï¼Œå› æ­¤å®ƒé€šå¸¸ç”¨äºç¼“å­˜ã€‚ è€ŒPOSTè¯·æ±‚å¤šæ˜¯ç”¨äºå°†è¡¨å•æ•°æ®æäº¤åˆ°æœåŠ¡ç«¯ï¼Œæ¯”å¦‚ä¿®æ”¹å§“åã€ä¿®æ”¹å¯†ç ç­‰æ“ä½œï¼Œéœ€è¦æµè§ˆå™¨å¿…é¡»å‘é€è¯·æ±‚åˆ°è¾¾æœåŠ¡å™¨æ‰èƒ½è¿›è¡Œæ“ä½œï¼Œå› æ­¤POSTè¯·æ±‚ä¸èƒ½è¢«ç¼“å­˜ã€‚ ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬åŒæ—¶å°†GETå’ŒPOSTè¯·æ±‚åœ¨æµè§ˆå™¨ä¸­å¤šæäº¤å‡ æ¬¡ï¼Œä¼šå‘ç°ä¸ç®¡å¤šå°‘æ¬¡æäº¤ï¼ŒPOSTè¯·æ±‚éƒ½æ˜¯200ï¼›è€ŒGETè¯·æ±‚ç¬¬ä¸€æ¬¡200ï¼Œåé¢çš„è¯·æ±‚ä¼š304è¿›è¡Œç¼“å­˜ä¸‹æ¥ã€‚ ç¼–ç è§’åº¦ GETè¯·æ±‚ç”±äºè¯·æ±‚æ•°æ®ä¸€èˆ¬éƒ½æ˜¯åœ¨URLä¸Šï¼Œæ‰€ä»¥GETä¸€èˆ¬éƒ½æ˜¯URLç¼–ç ï¼›è€ŒPOSTè¯·æ±‚ç”±äºè¯·æ±‚å‚æ•°çš„å¤šæ ·æ€§ï¼Œå› æ­¤æœ‰å¤šé‡ç¼–ç æ–¹å¼ï¼›ä¸€èˆ¬POSTè¯·æ±‚æœ‰application/x-www-form-urlencodedã€multipart/form-dataå’Œapplication/jsonä¸‰ç§ä¼ è¾“æ–¹å¼ã€‚ multipart/form-dataä¸€èˆ¬åœ¨ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™é€šè¿‡Html5çš„FormDataæ–°ç‰¹æ€§æ¥æ„é€ ä¸Šä¼ è¡¨å•å¯¹è±¡ä¼šç”¨åˆ°è¿™ç§ç¼–ç æ–¹å¼ï¼Œé€šè¿‡FormDataä¸Šä¼ çš„è¯·æ±‚ç±»ä¼¼è¿™æ ·ï¼š application/x-www-form-urlencodedæ˜¯Formè¡¨å•çš„é»˜è®¤æäº¤æ–¹å¼ï¼Œè¿™ç§æ–¹å¼çš„å¥½å¤„å°±æ˜¯æµè§ˆå™¨éƒ½æ”¯æŒï¼›ä½†æ˜¯ç¼ºç‚¹æ˜¯åœ¨è¯·æ±‚å‘é€å‰éœ€è¦å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–å¤„ç†ï¼Œä»¥é”®å€¼å¯¹å½¢å¼ï¼Œä¾‹å¦‚ï¼škey1=value1&amp;key2=value2çš„å½¢å¼å‘é€åˆ°æœåŠ¡å™¨ï¼›å¦‚æœä½¿ç”¨jQueryçš„ajaxæ–¹æ³•ï¼Œå®ƒå†…éƒ¨å·²ç»å¯¹JSONæ ¼å¼çš„æ•°æ®è¿›è¡Œäº†åºåˆ—åŒ–å¤„ç†äº†ï¼›è€Œä½¿ç”¨axiosé»˜è®¤ä½¿ç”¨application/jsonè¿›è¡Œç¼–ç ï¼Œæˆ–è€…è‡ªå·±é€šè¿‡åŸç”ŸAjaxè¯·æ±‚å°±éœ€è¦è‡ªå·±è¿›è¡Œåºåˆ—åŒ–ã€‚ éšç€JSONè§„èŒƒè¶Šæ¥è¶Šæµè¡Œï¼Œå¹¶ä¸”æµè§ˆå™¨æ”¯æŒç¨‹åº¦æ¯”è¾ƒå¥½ï¼Œapplication/jsonç¼–ç ä¹Ÿè¶Šæ¥è¶Šè¢«æ›´å¤šçš„å¼€å‘è€…ä½¿ç”¨ï¼›é€šè¿‡Content-Typeå‘Šè¯‰æœåŠ¡å™¨ä¸»ä½“å†…å®¹æ˜¯JSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šè¿›è¡Œè§£æï¼›è¿™æ ·çš„å¥½å¤„æ˜¯å‰ç«¯äººå‘˜ä¸éœ€è¦å…³å¿ƒæ•°æ®ç»“æ„çš„å¤æ‚åº¦ï¼Œåªè¦æ˜¯æ ‡å‡†çš„JSONæ ¼å¼å°±èƒ½æäº¤æˆåŠŸã€‚ å¹‚ç­‰æ€§è§’åº¦ åˆæ¬¡çœ‹åˆ°å¹‚ç­‰è¿™ä¸ªè¯å¾ˆå¤šç«¥é‹éƒ½å¾ˆé™Œç”Ÿï¼Œæˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸€ä¸‹å¹‚ç­‰çš„å®šä¹‰ï¼š åœ¨ç¼–ç¨‹ä¸­ï¼Œä¸€ä¸ªå¹‚ç­‰æ“ä½œçš„ç‰¹ç‚¹æ˜¯å…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œæ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚å¹‚ç­‰å‡½æ•°ï¼Œæˆ–å¹‚ç­‰æ–¹æ³•ï¼Œæ˜¯æŒ‡å¯ä»¥ä½¿ç”¨ç›¸åŒå‚æ•°é‡å¤æ‰§è¡Œï¼Œå¹¶èƒ½è·å¾—ç›¸åŒç»“æœçš„å‡½æ•°ã€‚ HTTPçš„å¹‚ç­‰æ˜¯æŒ‡æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œæ— è®ºè°ƒç”¨ä¸€æ¬¡è¿˜æ˜¯ä¸€åƒæ¬¡ï¼Œéƒ½å…·æœ‰åŒæ ·çš„å‰¯ä½œç”¨ã€‚GETè¯·æ±‚ç”¨äºè·å–èµ„æºï¼Œä¸ç®¡è°ƒç”¨å¤šå°‘æ¬¡æ¥å£ï¼Œéƒ½ä¸ä¼šå½±å“è¿”å›çš„èµ„æºï¼›å› æ­¤æˆ‘ä»¬è¯´GETè¯·æ±‚æ˜¯å¹‚ç­‰çš„ã€‚ 12GET /list # è·å–åˆ—è¡¨GET /detail/1 # è·å–è¯¦æƒ… æ¯”å¦‚æˆ‘ä»¬åœ¨è·å–åˆ—è¡¨æ•°æ®æˆ–è€…è·å–è¯¦æƒ…æ•°æ®ï¼Œåªæ˜¯æŸ¥è¯¢æ•°æ®ï¼Œä¸ä¼šå½±å“åˆ°æ•°æ®æœ¬èº«ï¼Œä¹Ÿä¸ä¼šå¯¹èµ„æºäº§ç”Ÿå‰¯ä½œç”¨ï¼›å› æ­¤æˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯å¹‚ç­‰çš„ã€‚ è¿™é‡Œæœ‰çš„å°ä¼™ä¼´å¯èƒ½ä¼šæå‡ºç–‘é—®äº†ï¼Œå¦‚æœé€šè¿‡GETè¯·æ±‚è¿”å›å½“å‰æ—¶é—´ï¼Œé‚£å²‚ä¸æ˜¯è¿”å›çš„ç»“æœæ¯æ—¶æ¯åˆ»éƒ½ä¸ä¸€æ ·å—ï¼Ÿæ€ä¹ˆä¼šå¹‚ç­‰å‘¢ï¼Ÿ æ³¨æ„ï¼Œæˆ‘ä»¬è¿™é‡Œå¼ºè°ƒçš„æ˜¯ä¸€æ¬¡å’ŒNæ¬¡å¯¹èµ„æºäº§ç”Ÿçš„å‰¯ä½œç”¨æ˜¯ç›¸åŒçš„ï¼Œè€Œéå•çº¯çš„æ¯”è¾ƒç»“æœç›¸åŒã€‚æ¯”å¦‚æˆ‘ä»¬GET /news/1ç”¨æ¥è·å–æŸä¸ªæ–°é—»ï¼Œä¸ç®¡æˆ‘ä»¬è°ƒç”¨Næ¬¡è¿”å›çš„éƒ½æ˜¯æ–°é—»ï¼Œæ²¡æœ‰äº§ç”Ÿå‰¯ä½œç”¨ï¼›ä½†æ˜¯æ–°é—»å¶å°”ä¼šæ›´æ–°ï¼Œè¿”å›çš„ç»“æœå¯èƒ½ä¸å°½ç›¸åŒã€‚ è€ŒPOSTè¯·æ±‚å¾ˆæ˜æ˜¾æ˜¯éå¹‚ç­‰çš„ï¼Œå› ä¸ºè¯·æ±‚å¤šæ¬¡ï¼Œéƒ½ä¼šäº§ç”Ÿä¸åŒçš„èµ„æºã€‚æ¯”å¦‚åœ¨æ”¯ä»˜ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨POSTè¯·æ±‚ï¼Œè™½ç„¶æˆ‘ä»¬æ¯æ¬¡å°±æ”¯ä»˜ä¸€å—é’±ï¼Œä½†æ˜¯æ¯æ¬¡å¿…ç„¶ä¼šäº§ç”Ÿä¸åŒçš„è®¢å•ï¼ˆå¦‚æœæ˜¯åŒä¸€ä¸ªè®¢å•ç›¸ä¿¡ä½ è‚¯å®šè¦æŠ•è¯‰çš„ï¼‰ TCPè§’åº¦getä¼šäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼ŒPOSTä¼šäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…ã€‚ getä¼šå‘é€http headerå’Œdataç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ª200ï¼Œè¯·æ±‚æˆåŠŸã€‚ postä¼šå…ˆå‘é€http headerç»™æœåŠ¡ç«¯ï¼Œå‘Šè¯‰æœåŠ¡ç«¯ç­‰ä¸€ä¸‹ä¼šæœ‰æ•°æ®è¿‡æ¥ï¼ŒæœåŠ¡ç«¯è¿”å›100ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯æˆ‘å·²ç»å‡†å¤‡æ¥æ”¶æ•°æ®ï¼Œpoståœ¨å‘é€ä¸€ä¸ªdataç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è¿”å›200ï¼Œè¯·æ±‚æˆåŠŸã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"Webpacké…ç½®å…¨è§£æï¼ˆåŸºç¡€ç¯‡ï¼‰","date":"2020-06-06T04:00:00.000Z","path":"2020/06/06/Webpack-Learned.html","text":"Webpackå‡­å€Ÿå¼ºå¤§çš„åŠŸèƒ½ï¼Œæˆä¸ºæœ€æµè¡Œå’Œæœ€æ´»è·ƒçš„æ‰“åŒ…å·¥å…·ï¼Œä¹Ÿæ˜¯é¢è¯•æ—¶é«˜çº§ç¨‹åºå‘˜å¿…é¡»æŒæ¡çš„â€œè½¯æŠ€èƒ½â€ï¼›ç¬”è€…ç»“åˆåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ç»éªŒï¼Œä»‹ç»webpackçš„ä½¿ç”¨ï¼›æœ¬æ–‡æ˜¯å…¥é—¨ç¯‡ï¼Œä¸»è¦ä»‹ç»webpackçš„å…¥å£ã€è¾“å‡ºå’Œå„ç§loaderã€pluginsçš„ä½¿ç”¨ã€‚ æœ¬æ–‡æ‰€æœ‰çš„demoä»£ç å‡åœ¨WebpackDemo æ¦‚å¿µ æ¥çœ‹ä¸€ä¸‹å®˜ç½‘å¯¹webpackçš„å®šä¹‰ï¼š æœ¬è´¨ä¸Šï¼Œwebpack æ˜¯ä¸€ä¸ªç°ä»£ JavaScript åº”ç”¨ç¨‹åºçš„é™æ€æ¨¡å—æ‰“åŒ…å™¨(module bundler)ã€‚å½“ webpack å¤„ç†åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¼šé€’å½’åœ°æ„å»ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾(dependency graph)ï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºéœ€è¦çš„æ¯ä¸ªæ¨¡å—ï¼Œç„¶åå°†æ‰€æœ‰è¿™äº›æ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚ é¦–å…ˆwebpackæ˜¯ä¸€ä¸ªé™æ€æ¨¡å—æ‰“åŒ…å™¨ï¼Œæ‰€è°“çš„é™æ€æ¨¡å—ï¼ŒåŒ…æ‹¬è„šæœ¬ã€æ ·å¼è¡¨å’Œå›¾ç‰‡ç­‰ç­‰ï¼›webpackæ‰“åŒ…æ—¶é¦–å…ˆéå†æ‰€æœ‰çš„é™æ€èµ„æºï¼Œæ ¹æ®èµ„æºçš„å¼•ç”¨ï¼Œæ„å»ºå‡ºä¸€ä¸ªä¾èµ–å…³ç³»å›¾ï¼Œç„¶åå†å°†æ¨¡å—åˆ’åˆ†ï¼Œæ‰“åŒ…å‡ºä¸€ä¸ªæˆ–å¤šä¸ªbundleã€‚å†æ¬¡ç™½piaoä¸€ä¸‹å®˜ç½‘çš„å›¾ï¼Œç”ŸåŠ¨çš„æè¿°äº†è¿™ä¸ªè¿‡ç¨‹ï¼š æåˆ°webpackï¼Œå°±ä¸å¾—ä¸æwebpackçš„å››ä¸ªæ ¸å¿ƒæ¦‚å¿µ å…¥å£(entry)ï¼šæŒ‡ç¤º webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ è¾“å‡º(output)ï¼šåœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundles loaderï¼šè®© webpack èƒ½å¤Ÿå»å¤„ç†é‚£äº›é JavaScript æ–‡ä»¶ æ’ä»¶(plugins)ï¼šç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ ä½ çš„ç¬¬ä¸€ä¸ªæ‰“åŒ…å™¨ æˆ‘ä»¬é¦–å…ˆåœ¨å…¨å±€å®‰è£…webpackï¼š 1npm install webpack webpack-cli â€“g webpackå¯ä»¥ä¸ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œç›´æ¥é€šè¿‡å‘½ä»¤è¡Œæ„å»ºï¼Œç”¨æ³•å¦‚ä¸‹ï¼š 1webpack &lt;entry&gt; [&lt;entry&gt;] -o &lt;output&gt; è¿™é‡Œçš„entryå’Œoutputå°±å¯¹åº”äº†ä¸Šè¿°æ¦‚å¿µä¸­çš„å…¥å£å’Œè¾“å…¥ï¼Œæˆ‘ä»¬æ¥æ–°å»ºä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼š 1234//demo1/index.jsvar a = 1console.log(a)document.write(&#x27;hello webpack&#x27;) æœ‰äº†å…¥å£æ–‡ä»¶æˆ‘ä»¬è¿˜éœ€è¦é€šè¿‡å‘½ä»¤è¡Œå®šä¹‰ä¸€ä¸‹è¾“å…¥è·¯å¾„dist/bundle.jsï¼š 1webpack index.js -o dist/bundle.js è¿™æ ·webpackå°±ä¼šåœ¨distç›®å½•ç”Ÿæˆæ‰“åŒ…åçš„æ–‡ä»¶ã€‚ æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•æ–°å»ºä¸€ä¸ªhtmlå¼•å…¥æ‰“åŒ…åçš„bundle.jsæ–‡ä»¶æŸ¥çœ‹æ•ˆæœã€‚ é…ç½®æ–‡ä»¶ å‘½ä»¤è¡Œçš„æ‰“åŒ…æ–¹å¼ä»…é™äºç®€å•çš„é¡¹ç›®ï¼Œå¦‚æœæˆ‘ä»¬çš„é¡¹ç›®è¾ƒä¸ºå¤æ‚ï¼Œæœ‰å¤šä¸ªå…¥å£ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ¯æ¬¡æ‰“åŒ…éƒ½æŠŠå…¥å£è®°ä¸‹æ¥ï¼›å› æ­¤ä¸€èˆ¬é¡¹ç›®ä¸­éƒ½ä½¿ç”¨é…ç½®æ–‡ä»¶æ¥è¿›è¡Œæ‰“åŒ…ï¼›é…ç½®æ–‡ä»¶çš„å‘½ä»¤æ–¹å¼å¦‚ä¸‹ï¼š 1webpack [--config webpack.config.js] é…ç½®æ–‡ä»¶é»˜è®¤çš„åç§°å°±æ˜¯webpack.config.jsï¼Œä¸€ä¸ªé¡¹ç›®ä¸­ç»å¸¸ä¼šæœ‰å¤šå¥—é…ç½®æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹ä¸åŒç¯å¢ƒé…ç½®ä¸åŒçš„æ–‡ä»¶ï¼Œé€šè¿‡--configæ¥è¿›è¡Œåˆ‡æ¢ï¼š 1234//ç”Ÿäº§ç¯å¢ƒé…ç½®webpack --config webpack.prod.config.js//å¼€å‘ç¯å¢ƒé…ç½®webpack --config webpack.dev.config.js å¤šç§é…ç½®ç±»å‹ configé…ç½®æ–‡ä»¶é€šè¿‡module.exportså¯¼å‡ºä¸€ä¸ªé…ç½®å¯¹è±¡ï¼š 123456789101112//webpack.config.jsvar path = require(&#x27;path&#x27;);module.exports = &#123; mode: &#x27;development&#x27;, //å…¥å£æ–‡ä»¶ entry: &#x27;./index.js&#x27;, //è¾“å‡ºç›®å½• output: &#123; path: path.resolve(__dirname, &#x27;dist&#x27;), filename: &#x27;bundle.js&#x27; &#125;&#125;; é™¤äº†å¯¼å‡ºä¸ºå¯¹è±¡ï¼Œè¿˜å¯ä»¥å¯¼å‡ºä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°ä¸­ä¼šå¸¦å…¥å‘½ä»¤è¡Œä¸­ä¼ å…¥çš„ç¯å¢ƒå˜é‡ç­‰å‚æ•°ï¼Œè¿™æ ·å¯ä»¥æ›´æ–¹ä¾¿çš„å¯¹ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®ï¼›æ¯”å¦‚æˆ‘ä»¬åœ¨æ‰“åŒ…çº¿ä¸Šæ­£å¼ç¯å¢ƒå’Œçº¿ä¸Šå¼€å‘ç¯å¢ƒå¯ä»¥é€šè¿‡envè¿›è¡ŒåŒºåˆ†ï¼š 123456789var path = require(&#x27;path&#x27;);//env:ç¯å¢ƒå¯¹è±¡module.exports = function(env, argv)&#123; return &#123; //å…¶ä»–é…ç½® entry: &#x27;./index.js&#x27;, output: &#123;&#125; &#125;&#125;; å¦å¤–è¿˜å¯ä»¥å¯¼å‡ºä¸ºä¸€ä¸ªPromiseï¼Œç”¨äºå¼‚æ­¥åŠ è½½é…ç½®ï¼Œæ¯”å¦‚å¯ä»¥åŠ¨æ€åŠ è½½å…¥å£æ–‡ä»¶ï¼š 12345678910module.exports = () =&gt; &#123; return new Promise((resolve, reject)=&gt;&#123; setTimeout(()=&gt;&#123; resolve(&#123; entry: &#x27;./index.js&#x27;, output: &#123;&#125; &#125;) &#125;, 5000) &#125;)&#125; å…¥å£ æ­£å¦‚åœ¨ä¸Šé¢æåˆ°çš„ï¼Œå…¥å£æ˜¯æ•´ä¸ªä¾èµ–å…³ç³»çš„èµ·ç‚¹å…¥å£ï¼›æˆ‘ä»¬å¸¸ç”¨çš„å•å…¥å£é…ç½®æ˜¯ä¸€ä¸ªé¡µé¢çš„å…¥å£ï¼š 123module.exports = &#123; entry: &#x27;./index.js&#x27;,&#125; å®ƒæ˜¯ä¸‹é¢çš„ç®€å†™ï¼š 12345module.exports = &#123; entry: &#123; main: &#x27;./index.js&#x27; &#125;,&#125; ä½†æ˜¯æˆ‘ä»¬ä¸€ä¸ªé¡µé¢å¯èƒ½ä¸æ­¢ä¸€ä¸ªæ¨¡å—ï¼Œå› æ­¤éœ€è¦å°†å¤šä¸ªä¾èµ–æ–‡ä»¶ä¸€èµ·æ³¨å…¥ï¼Œè¿™æ—¶å°±éœ€è¦ç”¨åˆ°æ•°ç»„äº†ï¼Œä»£ç åœ¨demo2ä¸­ï¼š 12345678910module.exports = &#123; entry: [ //è½®æ’­å›¾æ¨¡å— &#x27;./src/banner.js&#x27;, //ä¸»æ¨¡å— &#x27;./src/index.js&#x27;, //åº•éƒ¨æ¨¡å— &#x27;./src/foot.js&#x27; ],&#125; æœ‰æ—¶å€™æˆ‘ä»¬ä¸€ä¸ªé¡¹ç›®å¯èƒ½æœ‰ä¸æ­¢ä¸€ä¸ªé¡µé¢ï¼Œéœ€è¦å°†å¤šä¸ªé¡µé¢åˆ†å¼€æ‰“åŒ…ï¼Œentryæ”¯æŒä¼ å…¥å¯¹è±¡çš„å½¢å¼ï¼Œä»£ç åœ¨demo3ä¸­ï¼š 12345678//demo3module.exports = &#123; entry: &#123; home: &#x27;./src/home.js&#x27;, list: &#x27;./src/list.js&#x27;, detail: [&#x27;./src/detail.js&#x27;, &#x27;./src/common.js&#x27;], &#125;,&#125; è¿™æ ·webpackå°±ä¼šæ„å»ºä¸‰ä¸ªä¸åŒçš„ä¾èµ–å…³ç³»ã€‚ è¾“å‡º outputé€‰é¡¹ç”¨æ¥æ§åˆ¶webpackå¦‚ä½•è¾“å…¥ç¼–è¯‘åçš„æ–‡ä»¶æ¨¡å—ï¼›è™½ç„¶å¯ä»¥æœ‰å¤šä¸ªentryï¼Œä½†æ˜¯åªèƒ½é…ç½®ä¸€ä¸ªoutputï¼š 123456789module.exports = &#123; entry: &#x27;./src/index.js&#x27;, output: &#123; path: path.resolve(__dirname, &#x27;dist&#x27;), filename: &#x27;bundle.js&#x27;, //CDNåœ°å€ publicPath: &#x27;/&#x27;, &#125;,&#125; è¿™é‡Œæˆ‘ä»¬é…ç½®äº†ä¸€ä¸ªå•å…¥å£ï¼Œè¾“å‡ºä¹Ÿå°±æ˜¯bundle.jsï¼›ä½†æ˜¯å¦‚æœå­˜åœ¨å¤šå…¥å£çš„æ¨¡å¼å°±è¡Œä¸é€šäº†ï¼Œwebpackä¼šæç¤ºConflict: Multiple chunks emit assets to the same filenameï¼Œå³å¤šä¸ªæ–‡ä»¶èµ„æºæœ‰ç›¸åŒçš„æ–‡ä»¶åç§°ï¼›webpackæä¾›äº†å ä½ç¬¦æ¥ç¡®ä¿æ¯ä¸€ä¸ªè¾“å‡ºçš„æ–‡ä»¶éƒ½æœ‰å”¯ä¸€çš„åç§°ï¼š 1234567891011module.exports = &#123; entry: &#123; home: &#x27;./src/home.js&#x27;, list: &#x27;./src/list.js&#x27;, detail: [&#x27;./src/detail.js&#x27;, &#x27;./src/common.js&#x27;], &#125;, output: &#123; path: path.resolve(__dirname, &#x27;dist&#x27;), filename: &#x27;[name].bundle.js&#x27;, &#125;,&#125; è¿™æ ·webpackæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶å°±ä¼šæŒ‰ç…§å…¥å£æ–‡ä»¶çš„åç§°æ¥è¿›è¡Œåˆ†åˆ«æ‰“åŒ…ç”Ÿæˆä¸‰ä¸ªä¸åŒçš„bundleæ–‡ä»¶ï¼›è¿˜æœ‰ä»¥ä¸‹ä¸åŒçš„å ä½ç¬¦å­—ç¬¦ä¸²ï¼š å ä½ç¬¦ æè¿° [hash] æ¨¡å—æ ‡è¯†ç¬¦(module identifier)çš„ hash [chunkhash] chunk å†…å®¹çš„ hash [name] æ¨¡å—åç§° [id] æ¨¡å—æ ‡è¯†ç¬¦ [query] æ¨¡å—çš„ queryï¼Œä¾‹å¦‚ï¼Œæ–‡ä»¶å ? åé¢çš„å­—ç¬¦ä¸² åœ¨è¿™é‡Œå¼•å…¥Moduleã€Chunkå’ŒBundleçš„æ¦‚å¿µï¼Œä¸Šé¢ä»£ç ä¸­ä¹Ÿç»å¸¸ä¼šçœ‹åˆ°æœ‰è¿™ä¸¤ä¸ªåè¯çš„å‡ºç°ï¼Œé‚£ä¹ˆä»–ä»¬ä¸‰è€…åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿé¦–å…ˆæˆ‘ä»¬å‘ç°moduleæ˜¯ç»å¸¸å‡ºç°åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­ï¼Œæ¯”å¦‚module.exportsï¼›è€ŒChunkç»å¸¸å’Œentryä¸€èµ·å‡ºç°ï¼ŒBundleæ€»æ˜¯å’Œoutputä¸€èµ·å‡ºç°ã€‚ moduleï¼šæˆ‘ä»¬å†™çš„æºç ï¼Œæ— è®ºæ˜¯commonjsè¿˜æ˜¯amdjsï¼Œéƒ½å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªä¸ªçš„module chunkï¼šå½“æˆ‘ä»¬å†™çš„moduleæºæ–‡ä»¶ä¼ åˆ°webpackè¿›è¡Œæ‰“åŒ…æ—¶ï¼Œwebpackä¼šæ ¹æ®æ–‡ä»¶å¼•ç”¨å…³ç³»ç”Ÿæˆchunkæ–‡ä»¶ï¼Œwebpack ä¼šå¯¹è¿™äº›chunkæ–‡ä»¶è¿›è¡Œä¸€äº›æ“ä½œ bundleï¼šwebpackå¤„ç†å¥½chunkæ–‡ä»¶åï¼Œæœ€åä¼šè¾“å‡ºbundleæ–‡ä»¶ï¼Œè¿™ä¸ªbundleæ–‡ä»¶åŒ…å«äº†ç»è¿‡åŠ è½½å’Œç¼–è¯‘çš„æœ€ç»ˆæºæ–‡ä»¶ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚ æˆ‘ä»¬é€šè¿‡ä¸‹é¢ä¸€å¼ å›¾æ›´æ·±å…¥çš„ç†è§£è¿™ä¸‰ä¸ªæ¦‚å¿µï¼š æ€»ç»“ï¼š moduleï¼Œchunk å’Œ bundle å…¶å®å°±æ˜¯åŒä¸€ä»½é€»è¾‘ä»£ç åœ¨ä¸åŒè½¬æ¢åœºæ™¯ä¸‹çš„å–äº†ä¸‰ä¸ªåå­—ï¼šæˆ‘ä»¬ç›´æ¥å†™å‡ºæ¥çš„æ˜¯moduleï¼Œwebpackå¤„ç†æ—¶æ˜¯chunkï¼Œæœ€åç”Ÿæˆæµè§ˆå™¨å¯ä»¥ç›´æ¥è¿è¡Œçš„bundleã€‚ hashã€chunkhashã€contenthash ç†è§£äº†chunkçš„æ¦‚å¿µï¼Œç›¸ä¿¡ä¸Šé¢è¡¨ä¸­chunkhashå’Œhashçš„åŒºåˆ«ä¹Ÿå¾ˆå®¹æ˜“ç†è§£äº†ï¼› hashï¼šæ˜¯è·Ÿæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œåªè¦é¡¹ç›®é‡Œæœ‰æ–‡ä»¶æ›´æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„hashå€¼éƒ½ä¼šæ›´æ”¹ï¼Œå¹¶ä¸”å…¨éƒ¨æ–‡ä»¶éƒ½å…±ç”¨ç›¸åŒçš„hashå€¼ã€‚ chunkhashï¼šè·Ÿå…¥å£æ–‡ä»¶çš„æ„å»ºæœ‰å…³ï¼Œæ ¹æ®å…¥å£æ–‡ä»¶æ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆæ¯ä¸ªchunkå¯¹åº”çš„hashï¼›å…¥å£æ–‡ä»¶æ›´æ”¹ï¼Œå¯¹åº”chunkçš„hashå€¼ä¼šæ›´æ”¹ã€‚ contenthashï¼šè·Ÿæ–‡ä»¶å†…å®¹æœ¬èº«ç›¸å…³ï¼Œæ ¹æ®æ–‡ä»¶å†…å®¹åˆ›å»ºå‡ºå”¯ä¸€hashï¼Œä¹Ÿå°±æ˜¯è¯´æ–‡ä»¶å†…å®¹æ›´æ”¹ï¼Œhashå°±æ›´æ”¹ã€‚ æ¨¡å¼ åœ¨webpack2å’Œwebpack3ä¸­æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨åŠ å…¥æ’ä»¶æ¥è¿›è¡Œä»£ç çš„å‹ç¼©ã€ç¯å¢ƒå˜é‡çš„å®šä¹‰ï¼Œè¿˜éœ€è¦æ³¨æ„ç¯å¢ƒçš„åˆ¤æ–­ï¼Œååˆ†çš„ç¹çï¼›åœ¨webpack4ä¸­ç›´æ¥æä¾›äº†æ¨¡å¼è¿™ä¸€é…ç½®ï¼Œå¼€ç®±å³å¯ç”¨ï¼›å¦‚æœå¿½ç•¥é…ç½®ï¼Œwebpackè¿˜ä¼šå‘å‡ºè­¦å‘Šã€‚ 1234567891011121314module.exports = &#123; mode: &#x27;development&#x27;,&#125;;//ç›¸å½“äºmodule.exports = &#123; devtool:&#x27;eval&#x27;, plugins: [ new webpack.NamedModulesPlugin(), new webpack.NamedChunksPlugin(), new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;development&quot;) &#125;) ]&#125; å¼€å‘æ¨¡å¼æ˜¯å‘Šè¯‰webpackï¼Œæˆ‘ç°åœ¨æ˜¯å¼€å‘çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯æ‰“åŒ…å‡ºæ¥çš„å†…å®¹è¦å¯¹å¼€å‘å‹å¥½ï¼Œä¾¿äºä»£ç è°ƒè¯•ä»¥åŠå®ç°æµè§ˆå™¨å®æ—¶æ›´æ–°ã€‚ 1234567891011121314module.exports = &#123; mode: &#x27;production&#x27;,&#125;;//ç›¸å½“äºmodule.exports = &#123; plugins: [ new UglifyJsPlugin(/*...*/), new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;production&quot;) &#125;), new webpack.optimize.ModuleConcatenationPlugin(), new webpack.NoEmitOnErrorsPlugin() ]&#125; ç”Ÿäº§æ¨¡å¼ä¸ç”¨å¯¹å¼€å‘å‹å¥½ï¼Œåªéœ€è¦å…³æ³¨æ‰“åŒ…çš„æ€§èƒ½å’Œç”Ÿæˆæ›´å°ä½“ç§¯çš„bundleã€‚çœ‹åˆ°è¿™é‡Œç”¨åˆ°äº†å¾ˆå¤šPluginï¼Œä¸ç”¨æ…Œï¼Œä¸‹é¢æˆ‘ä»¬ä¼šä¸€ä¸€è§£é‡Šä»–ä»¬çš„ä½œç”¨ã€‚ ç›¸ä¿¡å¾ˆå¤šç«¥é‹éƒ½æ›¾æœ‰è¿‡ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¿™è¾¹DefinePluginå®šä¹‰ç¯å¢ƒå˜é‡çš„æ—¶å€™è¦ç”¨JSON.stringify(&quot;production&quot;)ï¼Œç›´æ¥ç”¨&quot;production&quot;ä¸æ˜¯æ›´ç®€å•å—ï¼Ÿ æˆ‘ä»¬é¦–å…ˆæ¥çœ‹ä¸‹JSON.stringify(&quot;production&quot;)ç”Ÿæˆäº†ä»€ä¹ˆï¼›è¿è¡Œç»“æœæ˜¯&quot;&quot;production&quot;&quot;ï¼Œæ³¨æ„è¿™é‡Œï¼Œå¹¶ä¸æ˜¯ä½ çœ¼ç›èŠ±äº†æˆ–è€…å±å¹•ä¸Šæœ‰å°é»‘ç‚¹ï¼Œç»“æœç¡®å®æ¯”&quot;production&quot;å¤šåµŒå¥—äº†ä¸€å±‚å¼•å·ã€‚ æˆ‘ä»¬å¯ä»¥ç®€å•çš„æŠŠDefinePluginè¿™ä¸ªæ’ä»¶ç†è§£ä¸ºå°†ä»£ç é‡Œçš„æ‰€æœ‰process.env.NODE_ENVæ›¿æ¢ä¸ºå­—ç¬¦ä¸²ä¸­çš„å†…å®¹ã€‚å‡å¦‚æˆ‘ä»¬åœ¨ä»£ç ä¸­æœ‰å¦‚ä¸‹åˆ¤æ–­ç¯å¢ƒçš„ä»£ç ï¼š 123456789101112//webpack.config.jsmodule.exports = &#123; plugins: [ new webpack.DefinePlugin(&#123; &quot;process.env.NODE_ENV&quot;: &quot;production&quot; &#125;), ]&#125;//src/index.jsif (process.env.NODE_ENV === &#x27;production&#x27;) &#123; console.log(&#x27;production&#x27;);&#125; è¿™æ ·ç”Ÿæˆå‡ºæ¥çš„ä»£ç å°±ä¼šç¼–è¯‘æˆè¿™æ ·ï¼š 12345//dist/bundle.js//ä»£ç ä¸­å¹¶æ²¡æœ‰å®šä¹‰productionå˜é‡if (production === &#x27;production&#x27;) &#123; console.log(&#x27;production&#x27;);&#125; ä½†æ˜¯æˆ‘ä»¬ä»£ç ä¸­å¯èƒ½å¹¶æ²¡æœ‰å®šä¹‰productionå˜é‡ï¼Œå› æ­¤ä¼šå¯¼è‡´ä»£ç ç›´æ¥æŠ¥é”™ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é€šè¿‡JSON.stringifyæ¥åŒ…è£¹ä¸€å±‚ï¼š 1234567891011121314//webpack.config.jsmodule.exports = &#123; plugins: [ new webpack.DefinePlugin(&#123; //&quot;process.env.NODE_ENV&quot;: JSON.stringify(&quot;production&quot;) //ç›¸å½“äº &quot;process.env.NODE_ENV&quot;: &#x27;&quot;production&quot;&#x27; &#125;), ]&#125;//dist/bundle.jsif (&quot;production&quot; === &#x27;production&#x27;) &#123; console.log(&#x27;production&#x27;);&#125; è¿™æ ·ç¼–è¯‘å‡ºæ¥çš„ä»£ç å°±æ²¡æœ‰é—®é¢˜äº†ã€‚ è‡ªåŠ¨ç”Ÿæˆé¡µé¢ åœ¨ä¸Šé¢çš„ä»£ç ä¸­æˆ‘ä»¬å‘ç°éƒ½æ˜¯æ‰‹åŠ¨æ¥ç”Ÿæˆindex.htmlï¼Œç„¶åå¼•å…¥æ‰“åŒ…åçš„bundleæ–‡ä»¶ï¼Œä½†æ˜¯è¿™æ ·å¤ªè¿‡ç¹çï¼Œè€Œä¸”å¦‚æœç”Ÿæˆçš„bundleæ–‡ä»¶å¼•å…¥äº†hashå€¼ï¼Œæ¯æ¬¡ç”Ÿæˆçš„æ–‡ä»¶åç§°ä¸ä¸€æ ·ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆhtmlçš„æ’ä»¶ï¼›é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…è¿™ä¸ªæ’ä»¶ï¼š 1npm install --save-dev html-webpack-plugin åœ¨demo3ä¸­ï¼Œæˆ‘ä»¬ç”Ÿæˆäº†ä¸‰ä¸ªä¸åŒçš„bundle.jsï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä¸‰ä¸ªä¸åŒçš„é¡µé¢èƒ½åˆ†åˆ«å¼•å…¥è¿™ä¸‰ä¸ªæ–‡ä»¶ï¼Œå¦‚ä¸‹ä¿®æ”¹configæ–‡ä»¶ï¼š 12345678910111213141516171819202122module.exports = &#123; //çœç•¥å…¶ä»–ä»£ç  plugins: [ new HtmlWebpackPlugin(&#123; //å¼•ç”¨çš„æ¨¡æ¿æ–‡ä»¶ template: &#x27;./index.html&#x27;, //ç”Ÿæˆçš„htmlåç§° filename: &#x27;home.html&#x27;, chunks: [&#x27;home&#x27;] &#125;), new HtmlWebpackPlugin(&#123; template: &#x27;./index.html&#x27;, filename: &#x27;list.html&#x27;, chunks: [&#x27;list&#x27;] &#125;), new HtmlWebpackPlugin(&#123; template: &#x27;./index.html&#x27;, filename: &#x27;detail.html&#x27;, chunks: [&#x27;detail&#x27;] &#125;), ]&#125; æˆ‘ä»¬ä»¥index.htmlä½œä¸ºæ¨¡æ¿æ–‡ä»¶ï¼Œç”Ÿæˆhomeã€listã€detailä¸‰ä¸ªä¸åŒçš„é¡µé¢ï¼Œå¹¶ä¸”é€šè¿‡chunksåˆ†åˆ«å¼•å…¥ä¸åŒçš„bundleï¼›å¦‚æœè¿™é‡Œä¸å†™chunksï¼Œæ¯ä¸ªé¡µé¢å°±ä¼šå¼•å…¥æ‰€æœ‰ç”Ÿæˆå‡ºæ¥çš„bundleã€‚ html-webpack-pluginè¿˜æ”¯æŒä»¥ä¸‹å­—æ®µï¼š 1234567891011121314151617181920212223242526272829303132new HtmlWebpackPlugin(&#123; template: &#x27;./index.html&#x27;, filename: &#x27;all.html&#x27;, //é¡µé¢æ³¨å…¥title title: &#x27;html webpack plugin title&#x27;, //é»˜è®¤å¼•å…¥æ‰€æœ‰çš„chunksé“¾æ¥ chunks: &#x27;all&#x27;, //æ³¨å…¥é¡µé¢ä½ç½® inject: true, //å¯ç”¨hash hash: true, favicon: &#x27;&#x27;, //æ’å…¥metaæ ‡ç­¾ meta: &#123; &#x27;viewport&#x27;: &#x27;width=device-width, initial-scale=1.0&#x27; &#125;, minify: &#123; //æ¸…é™¤scriptæ ‡ç­¾å¼•å· removeAttributeQuotes: true, //æ¸…é™¤htmlä¸­çš„æ³¨é‡Š removeComments: true, //æ¸…é™¤htmlä¸­çš„ç©ºæ ¼ã€æ¢è¡Œç¬¦ //å°†htmlå‹ç¼©æˆä¸€è¡Œ collapseWhitespace: false, //å‹ç¼©htmlçš„è¡Œå†…æ ·å¼æˆä¸€è¡Œ minifyCSS: true, //æ¸…é™¤å†…å®¹ä¸ºç©ºçš„å…ƒç´ ï¼ˆæ…ç”¨ï¼‰ removeEmptyElements: false, //æ¸…é™¤styleå’Œlinkæ ‡ç­¾çš„typeå±æ€§ removeStyleLinkTypeAttributes: false &#125;&#125;), ä¸Šé¢è®¾ç½®titleåéœ€è¦åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­è®¾ç½®æ¨¡æ¿å­—ç¬¦ä¸²ï¼š 1&lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt; loader loaderç”¨äºå¯¹æ¨¡å—moduleçš„æºç è¿›è¡Œè½¬æ¢ï¼Œé»˜è®¤webpackåªèƒ½è¯†åˆ«commonjsä»£ç ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ä»£ç ä¸­ä¼šå¼•å…¥æ¯”å¦‚vueã€tsã€lessç­‰æ–‡ä»¶ï¼Œwebpackå°±å¤„ç†ä¸è¿‡æ¥äº†ï¼›loaderæ‹“å±•äº†webpackå¤„ç†å¤šç§æ–‡ä»¶ç±»å‹çš„èƒ½åŠ›ï¼Œå°†è¿™äº›æ–‡ä»¶è½¬æ¢æˆæµè§ˆå™¨èƒ½å¤Ÿæ¸²æŸ“çš„jsã€cssã€‚ module.ruleså…è®¸æˆ‘ä»¬é…ç½®å¤šä¸ªloaderï¼Œèƒ½å¤Ÿå¾ˆæ¸…æ™°çš„çœ‹å‡ºå½“å‰æ–‡ä»¶ç±»å‹åº”ç”¨äº†å“ªäº›loaderï¼Œloaderçš„ä»£ç å‡åœ¨demo4ä¸­ã€‚ 1234567891011121314151617181920&#123; module: &#123; rules: [ &#123; test: /\\.js$/, use: &#123; loader: &#x27;babel-loader&#x27;, options: &#123;&#125; &#125; &#125;, &#123; test: /\\.css$/, use: [ &#123; loader: &#x27;style-loader&#x27; &#125;, &#123; loader: &#x27;css-loader&#x27; &#125; ] &#125;, ] &#125;&#125; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ruleså±æ€§å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å¯¹è±¡è¡¨ç¤ºäº†ä¸åŒçš„åŒ¹é…è§„åˆ™ï¼›testå±æ€§æ—¶ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…ä¸åŒçš„æ–‡ä»¶åç¼€ï¼›useè¡¨ç¤ºåŒ¹é…äº†è¿™ä¸ªæ–‡ä»¶åè°ƒç”¨ä»€ä¹ˆloaderæ¥å¤„ç†ï¼Œå½“æœ‰å¤šä¸ªloaderçš„æ—¶å€™ï¼Œuseå°±éœ€è¦ç”¨åˆ°æ•°ç»„ã€‚ å¤šä¸ªloaderæ”¯æŒé“¾å¼ä¼ é€’ï¼Œèƒ½å¤Ÿå¯¹èµ„æºè¿›è¡Œæµæ°´çº¿å¤„ç†ï¼Œä¸Šä¸€ä¸ªloaderå¤„ç†çš„è¿”å›å€¼ä¼ é€’ç»™ä¸‹ä¸€ä¸ªloaderï¼›loaderå¤„ç†æœ‰ä¸€ä¸ªä¼˜å…ˆçº§ï¼Œä»å³åˆ°å·¦ï¼Œä»ä¸‹åˆ°ä¸Šï¼›åœ¨ä¸Šé¢demoä¸­å¯¹cssçš„å¤„ç†å°±éµä»äº†è¿™ä¸ªä¼˜å…ˆçº§ï¼Œcss-loaderå…ˆå¤„ç†ï¼Œå¤„ç†å¥½äº†å†ç»™style-loaderï¼›å› æ­¤æˆ‘ä»¬å†™loaderçš„æ—¶å€™ä¹Ÿè¦æ³¨æ„å‰åé¡ºåºã€‚ css-loaderå’Œstyle-loader css-loaderå’Œstyle-loaderä»åç§°çœ‹èµ·æ¥åŠŸèƒ½å¾ˆç›¸ä¼¼ï¼Œç„¶è€Œä¸¤è€…çš„åŠŸèƒ½æœ‰ç€å¾ˆå¤§çš„åŒºåˆ«ï¼Œä½†æ˜¯ä»–ä»¬ç»å¸¸ä¼šæˆå¯¹ä½¿ç”¨ï¼›å®‰è£…æ–¹æ³•ï¼š 1npm i -D css-loader style-loader css-loaderç”¨æ¥è§£é‡Š@importå’Œurl()ï¼›style-loaderç”¨æ¥å°†css-loaderç”Ÿæˆçš„æ ·å¼è¡¨é€šè¿‡&lt;style&gt;æ ‡ç­¾ï¼Œæ’å…¥åˆ°é¡µé¢ä¸­å»ã€‚ 123456789101112131415/* /src/head.css */.head&#123; display: flex; background: #666;&#125;/* /src/foot.css */.foot&#123; background: #ccc;&#125;/* /src/index.css */@import &#x27;./head.css&#x27;;@import &#x27;./foot.css&#x27;;.wrap &#123; background: #999;&#125; ç„¶ååœ¨å…¥å£æ–‡ä»¶ä¸­å°†index.csså¼•å…¥ï¼Œå°±èƒ½çœ‹åˆ°æ‰“åŒ…çš„æ•ˆæœï¼Œé¡µé¢ä¸­æ’å…¥äº†ä¸‰ä¸ªstyleæ ‡ç­¾ï¼Œä»£ç åœ¨demo4ï¼š sass-loaderå’Œless-loader è¿™ä¸¤ä¸ªloaderçœ‹åå­—å¤§å®¶ä¹Ÿèƒ½çŒœåˆ°äº†ï¼Œå°±æ˜¯ç”¨æ¥å¤„ç†sasså’Œlessæ ·å¼çš„ã€‚å®‰è£…æ–¹æ³•ï¼š 1npm i -D sass-loader less-loader node-sass åœ¨configä¸­è¿›è¡Œé…ç½®ï¼Œä»£ç åœ¨demo4ï¼š 1234567891011121314151617181920212223&#123; //å…¶ä»–é…ç½® rules: &#123; test: /\\.scss$/, use: [&#123; loader: &#x27;style-loader&#x27; &#125;, &#123; loader: &#x27;css-loader&#x27; &#125;,&#123; loader: &#x27;sass-loader&#x27; &#125;] &#125;,&#123; test: /\\.less$/, use: [&#123; loader: &#x27;style-loader&#x27; &#125;, &#123; loader: &#x27;css-loader&#x27; &#125;,&#123; loader: &#x27;less-loader&#x27; &#125;] &#125;&#125; postcss-loader éƒ½0202å¹´äº†ï¼Œå°ä¼™ä¼´è‚¯å®šä¸æƒ³ä¸€ä¸ªä¸€ä¸ªçš„æ‰‹åŠ¨æ·»åŠ -mozã€-msã€-webkitç­‰æµè§ˆå™¨ç§æœ‰å‰ç¼€ï¼›postcssæä¾›äº†å¾ˆå¤šå¯¹æ ·å¼çš„æ‰©å±•åŠŸèƒ½ï¼›å•¥éƒ½ä¸è¯´ï¼Œå…ˆå®‰è£…èµ·æ¥ï¼š 1npm i -D postcss-loader è€è§„çŸ©ï¼Œè¿˜æ˜¯åœ¨configä¸­è¿›è¡Œé…ç½®ï¼š 1234567891011121314151617181920212223rules: [&#123; test: /\\.scss$/, use: [&#123; loader: &#x27;style-loader&#x27; &#125;, &#123; loader: &#x27;css-loader&#x27; &#125;, &#123; loader: &#x27;postcss-loader&#x27; &#125;,&#123; loader: &#x27;sass-loader&#x27; &#125;]&#125;,&#123; test: /\\.less$/, use: [&#123; loader: &#x27;style-loader&#x27; &#125;, &#123; loader: &#x27;css-loader&#x27; &#125;, &#123; loader: &#x27;postcss-loader&#x27; &#125;,&#123; loader: &#x27;less-loader&#x27; &#125;]&#125;] æ­£å½“æˆ‘ä»¬å…´å†²å†²çš„æ‰“åŒ…çœ‹æ•ˆæœæ—¶ï¼Œå‘ç°æ ·å¼è¿˜æ˜¯è€æ ·å­ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆæ”¹å˜ã€‚ è¿™æ˜¯å› ä¸ºpostcssä¸»è¦åŠŸèƒ½åªæœ‰ä¸¤ä¸ªï¼šç¬¬ä¸€å°±æ˜¯æŠŠcssè§£ææˆJSå¯ä»¥æ“ä½œçš„æŠ½è±¡è¯­æ³•æ ‘ASTï¼Œç¬¬äºŒå°±æ˜¯è°ƒç”¨æ’ä»¶æ¥å¤„ç†ASTå¹¶å¾—åˆ°ç»“æœï¼›æ‰€ä»¥postcssä¸€èˆ¬éƒ½æ˜¯é€šè¿‡æ’ä»¶æ¥å¤„ç†cssï¼Œå¹¶ä¸ä¼šç›´æ¥å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å…ˆå®‰è£…ä¸€äº›æ’ä»¶ï¼š 1npm i -D autoprefixer postcss-plugins-px2rem cssnano åœ¨é¡¹ç›®æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª.browserslistrcæ–‡ä»¶ã€‚ 12&gt; 0.25%last 2 versions æˆ‘ä»¬å°†postcssçš„é…ç½®å•ç‹¬æå–åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„postcss.config.jsï¼š 12345678910module.exports = &#123; plugins: [ //è‡ªåŠ¨æ·»åŠ å‰ç¼€ require(&#x27;autoprefixer&#x27;), //pxè½¬ä¸ºremï¼Œåº”ç”¨äºç§»åŠ¨ç«¯ require(&#x27;postcss-plugins-px2rem&#x27;)(&#123; remUnit: 75 &#125;), //ä¼˜åŒ–åˆå¹¶css require(&#x27;cssnano&#x27;), ]&#125; æœ‰äº†autoprefixeræ’ä»¶ï¼Œæˆ‘ä»¬æ‰“åŒ…åçš„csså°±è‡ªåŠ¨åŠ ä¸Šäº†å‰ç¼€ã€‚ babel-loader å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„ç—›ç›¸ä¿¡å¾ˆå¤šç«¥é‹éƒ½ç»å†è¿‡ï¼Œå†™å®Œä»£ç å‘ç°è‡ªå·±çš„jsä»£ç ä¸èƒ½è¿è¡Œåœ¨IE10æˆ–è€…IE11ä¸Šï¼Œç„¶åå°è¯•ç€å¼•å…¥å„ç§polyfillï¼›babelçš„å‡ºç°ç»™æˆ‘ä»¬æä¾›äº†ä¾¿åˆ©ï¼Œå°†é«˜ç‰ˆæœ¬çš„ES6ç”šè‡³ES7è½¬ä¸ºES5ï¼›æˆ‘ä»¬é¦–å…ˆå®‰è£…babelæ‰€éœ€è¦çš„ä¾èµ–ï¼š 12npm i -D babel-loader @babel/core @babel/preset-env @babel/plugin-transform-runtimenpm i -S @babel/runtime ç„¶ååœ¨configæ·»åŠ loaderå¯¹jsè¿›è¡Œå¤„ç†ï¼š 123456789&#123; //çœç•¥å…¶ä»–é…ç½® rules: [&#123; test: /\\.js/, use: &#123; loader: &#x27;babel-loader&#x27; &#125; &#125;]&#125; åŒæ ·çš„ï¼Œæˆ‘ä»¬æŠŠbabelçš„é…ç½®æå–åˆ°æ ¹ç›®å½•ï¼Œæ–°å»ºä¸€ä¸ª.babelrcæ–‡ä»¶ï¼š 12345678&#123; &quot;presets&quot;: [ &quot;@babel/preset-env&quot; ], &quot;plugins&quot;: [ &quot;@babel/plugin-transform-runtime&quot; ]&#125; æˆ‘ä»¬å¯ä»¥åœ¨index.jsä¸­å°è¯•å†™ä¸€äº›es6çš„è¯­æ³•ï¼Œçœ‹åˆ°ä»£ç ä¼šè¢«è½¬è¯‘æˆes5ï¼Œä»£ç åœ¨demo4ä¸­ã€‚ç”±äºbabel-loaderçš„è½¬è¯‘é€Ÿåº¦å¾ˆæ…¢ï¼Œåœ¨åé¢æˆ‘ä»¬åŠ å…¥äº†æ—¶é—´æ’ä»¶åå¯ä»¥çœ‹åˆ°æ¯ä¸ªloaderçš„è€—æ—¶ï¼Œbabel-loaderæ˜¯æœ€è€—æ—¶é—´ï¼›å› æ­¤æˆ‘ä»¬è¦å°½å¯èƒ½å°‘çš„ä½¿ç”¨babelæ¥è½¬è¯‘æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯¹configè¿›è¡Œæ”¹è¿›ï¼Œ 1234567891011&#123; //çœç•¥å…¶ä»–é…ç½® rules: [&#123; test: /\\.js$/, use: &#123; loader: &#x27;babel-loader&#x27; &#125;, // exclude: /node_modules/, include: [path.resolve(__dirname, &#x27;src&#x27;)] &#125;]&#125; æ­£åˆ™ä¸Šä½¿ç”¨$æ¥è¿›è¡Œç²¾ç¡®åŒ¹é…ï¼Œé€šè¿‡excludeå°†node_modulesä¸­çš„æ–‡ä»¶è¿›è¡Œæ’é™¤ï¼Œincludeå°†åªåŒ¹é…srcä¸­çš„æ–‡ä»¶ï¼›å¯ä»¥çœ‹å‡ºæ¥includeçš„èŒƒå›´æ¯”excludeæ›´ç¼©å°æ›´ç²¾ç¡®ï¼Œå› æ­¤ä¹Ÿæ˜¯æ¨èä½¿ç”¨includeã€‚ file-loaderå’Œurl-loader file-loaderå’Œurl-loaderéƒ½æ˜¯ç”¨æ¥å¤„ç†å›¾ç‰‡ã€å­—ä½“å›¾æ ‡ç­‰æ–‡ä»¶ï¼›url-loaderå·¥ä½œæ—¶åˆ†ä¸¤ç§æƒ…å†µï¼šå½“æ–‡ä»¶å¤§å°å°äºlimitå‚æ•°ï¼Œurl-loaderå°†æ–‡ä»¶è½¬ä¸ºbase-64ç¼–ç ï¼Œç”¨äºå‡å°‘httpè¯·æ±‚ï¼›å½“æ–‡ä»¶å¤§å°å¤§äºlimitå‚æ•°æ—¶ï¼Œè°ƒç”¨file-loaderè¿›è¡Œå¤„ç†ï¼›å› æ­¤æˆ‘ä»¬ä¼˜å…ˆä½¿ç”¨url-loaderï¼Œé¦–å…ˆè¿˜æ˜¯è¿›è¡Œå®‰è£…ï¼Œå®‰è£…url-loaderä¹‹å‰è¿˜éœ€è¦æŠŠfile-loaderå…ˆå®‰è£…ï¼š 1npm i file-loader url-loader -D æ¥ä¸‹æ¥è¿˜æ˜¯ä¿®æ”¹configï¼š 123456789101112131415161718&#123; //çœç•¥å…¶ä»–é…ç½® rules: [&#123; test: /\\.(png|jpg|gif|jpeg|webp|svg|eot|ttf|woff|woff2)$/, use: &#123; loader: &#x27;url-loader&#x27;, options: &#123; //10k limit: 10240, //ç”Ÿæˆèµ„æºåç§° name: &#x27;[name].[hash:8].[ext]&#x27;, //ç”Ÿæˆèµ„æºçš„è·¯å¾„ outputPath: &#x27;imgs/&#x27; &#125;, exclude: /node_modules/, &#125; &#125;]&#125; æˆ‘ä»¬åœ¨cssä¸­ç»™bodyæ·»åŠ ä¸€ä¸ªå°äº10kçš„å±…ä¸­èƒŒæ™¯å›¾ç‰‡ï¼š 1234567body&#123; width: 100vw; height: 100vh; background: url(./bg.png) no-repeat; background-size: 400px 400px; background-position: center center;&#125; æ‰“åŒ…åæŸ¥çœ‹bodyçš„æ ·å¼å¯ä»¥å‘ç°å›¾ç‰‡å·²ç»è¢«æ›¿æ¢æˆbase64æ ¼å¼çš„urläº†ï¼Œä»£ç åœ¨demo4ã€‚ html-withimg-loader å¦‚æœæˆ‘ä»¬åœ¨é¡µé¢ä¸Šå¼•ç”¨ä¸€ä¸ªå›¾ç‰‡ï¼Œä¼šå‘ç°æ‰“åŒ…åçš„htmlè¿˜æ˜¯å¼•ç”¨äº†srcç›®å½•ä¸‹çš„å›¾ç‰‡ï¼Œè¿™æ ·æ˜æ˜¾æ˜¯é”™è¯¯çš„ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªæ’ä»¶å¯¹htmlå¼•ç”¨çš„å›¾ç‰‡è¿›è¡Œå¤„ç†ï¼š 1npm i -D html-withimg-loader è€æ ·å­è¿˜æ˜¯åœ¨configä¸­å¯¹htmlè¿›è¡Œé…ç½®ï¼š 123456789&#123; //çœç•¥å…¶ä»–é…ç½® rules: [&#123; test: /\\.(htm|html)$/, use: &#123; loader: &#x27;html-withimg-loader&#x27; &#125; &#125;]&#125; ç„¶é¹…ï¼Œæ‰“å¼€é¡µé¢å‘ç°å´æ˜¯è¿™æ ·çš„ï¼š è¿™æ˜¯å› ä¸ºåœ¨url-loaderä¸­æŠŠæ¯ä¸ªå›¾ç‰‡ä½œä¸ºä¸€ä¸ªæ¨¡å—æ¥å¤„ç†äº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å»url-loaderä¸­ä¿®æ”¹ï¼š 12345678use: &#123; loader: &#x27;url-loader&#x27;, options: &#123; //10k limit: 10240, esModule: false &#125;&#125; è¿™æ ·æˆ‘ä»¬åœ¨é¡µé¢ä¸Šçš„å›¾ç‰‡å¼•ç”¨ä¹Ÿè¢«ä¿®æ”¹äº†ï¼Œä»£ç åœ¨demo4ä¸­ã€‚ æ³¨ html-withimg-loaderä¼šå¯¼è‡´html-webpack-pluginæ’ä»¶æ³¨å…¥titleçš„æ¨¡æ¿å­—ç¬¦ä¸²&lt;%= htmlWebpackPlugin.options.title %&gt;å¤±æ•ˆï¼ŒåŸå°ä¸åŠ¨çš„å±•ç¤ºåœ¨é¡µé¢ä¸Šï¼›å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬æƒ³ä¿ç•™ä¸¤è€…çš„åŠŸèƒ½éœ€è¦åœ¨é…ç½®configä¸­æŠŠhtml-withimg-loaderåˆ é™¤å¹¶ä¸”é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ¥å¼•ç”¨å›¾ç‰‡ï¼š 1&lt;img src=&quot;&lt;%=require(&#x27;./src/bg1.png&#x27;) %&gt;&quot; alt=&quot;&quot; srcset=&quot;&quot;&gt; vue-loader æœ€åè¯´ä¸€ä¸‹ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„vue-loaderï¼Œçœ‹åå­—å°±çŸ¥é“æ˜¯ç”¨æ¥å¤„ç†vueæ–‡ä»¶çš„ã€‚ 12npm i -D vue-loader vue-template-compilernpm i -S vue æˆ‘ä»¬é¦–å…ˆæ¥åˆ›å»ºä¸€ä¸ªvueæ–‡ä»¶ï¼Œå…·ä½“ä»£ç åœ¨demo5ä¸­ï¼š 123456789101112131415161718192021222324252627//src/App.vue&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;box&quot; @click=&quot;tap&quot;&gt;&#123;&#123;title&#125;&#125;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &#x27;app&#x27;, data()&#123; return &#123; title: &#x27;appå®ä¾‹&#x27; &#125; &#125;, methods: &#123; tap()&#123; this.title = this.title.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125; &#125;&#125;&lt;/script&gt;&lt;style&gt;#app&#123; font-size: 16px; background: #ccc;&#125;&lt;/style&gt; ç„¶ååœ¨webpackçš„å…¥å£æ–‡ä»¶ä¸­å¼•ç”¨å®ƒï¼š 1234567//src/main.jsimport Vue from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;new Vue(&#123; render: h =&gt; h(App)&#125;).$mount(&#x27;#app&#x27;) ä¸è¿‡vue-loaderå’Œå…¶ä»–loaderä¸å¤ªä¸€æ ·ï¼Œé™¤äº†å°†å®ƒå’Œ.vueæ–‡ä»¶ç»‘å®šä¹‹å¤–ï¼Œè¿˜éœ€è¦å¼•å…¥å®ƒçš„ä¸€ä¸ªæ’ä»¶ï¼š 1234567891011121314const VueLoaderPlugin = require(&#x27;vue-loader/lib/plugin&#x27;)module.exports = &#123; module: &#123; rules: [ //çœç•¥å…¶ä»–loader &#123; test: /\\.vue$/, loader: &#x27;vue-loader&#x27; &#125;] &#125;, plugins: [ new VueLoaderPlugin(), ]&#125; è¿™æ ·æˆ‘ä»¬å°±èƒ½æ„‰å¿«çš„åœ¨ä»£ç ä¸­å†™vueäº†ã€‚ æ­å»ºå¼€å‘ç¯å¢ƒ åœ¨ä¸Šé¢çš„demoä¸­æˆ‘ä»¬éƒ½æ˜¯é€šè¿‡å‘½ä»¤è¡Œæ‰“åŒ…ç”Ÿæˆdistæ–‡ä»¶ï¼Œç„¶åç›´æ¥æ‰“å¼€htmlæˆ–è€…é€šè¿‡static-serveræ¥æŸ¥çœ‹é¡µé¢çš„ï¼›ä½†æ˜¯å¼€å‘ä¸­æˆ‘ä»¬å†™å®Œä»£ç æ¯æ¬¡éƒ½æ¥æ‰“åŒ…ä¼šä¸¥é‡å½±å“å¼€å‘çš„æ•ˆç‡ï¼Œæˆ‘ä»¬æœŸæœ›çš„æ˜¯å†™å®Œä»£ç åç«‹å³å°±èƒ½å¤Ÿçœ‹åˆ°é¡µé¢çš„æ•ˆæœï¼›webpack-dev-serverå°±å¾ˆå¥½çš„æä¾›äº†ä¸€ä¸ªç®€å•çš„webæœåŠ¡å™¨ï¼Œèƒ½å¤Ÿå®æ—¶é‡æ–°åŠ è½½ã€‚ é¦–å…ˆåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­å®‰è£…ä¾èµ–ï¼š 1npm i -D webpack webpack-dev-server webpack-dev-serverçš„ç”¨æ³•å’Œwepackä¸€æ ·ï¼Œåªä¸è¿‡ä»–ä¼šé¢å¤–å¯åŠ¨ä¸€ä¸ªexpressçš„æœåŠ¡å™¨ã€‚æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æ–°å»ºä¸€ä¸ªwebpack.dev.config.jsé…ç½®æ–‡ä»¶ï¼Œå•ç‹¬å¯¹å¼€å‘ç¯å¢ƒè¿›è¡Œä¸€ä¸ªé…ç½®ï¼Œç›¸å…³ä»£ç åœ¨demo6ä¸­ï¼š 1234567891011121314151617181920module.exports = &#123; //çœç•¥å…¶ä»–é…ç½® devServer: &#123; //å¯åŠ¨æœåŠ¡å™¨ç«¯å£ port: 9000, //é»˜è®¤æ˜¯localhostï¼Œåªèƒ½æœ¬åœ°è®¿é—® host: &quot;0.0.0.0&quot;, //è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ open: false, //å¯ç”¨æ¨¡å—çƒ­æ›¿æ¢ hot: true, //å¯ç”¨gzipå‹ç¼© compress: true &#125;, plugins: [ //çƒ­æ›´æ–°æ’ä»¶ new webpack.HotModuleReplacementPlugin(&#123; &#125;) ]&#125; é€šè¿‡å‘½ä»¤è¡Œwebpack-dev-serveræ¥å¯åŠ¨æœåŠ¡å™¨ï¼Œå¯åŠ¨åæˆ‘ä»¬å‘ç°æ ¹ç›®å½•å¹¶æ²¡æœ‰ç”Ÿæˆä»»ä½•æ–‡ä»¶ï¼Œå› ä¸ºwebpackæ‰“åŒ…åˆ°äº†å†…å­˜ä¸­ï¼Œä¸ç”Ÿæˆæ–‡ä»¶çš„åŸå› åœ¨äºè®¿é—®å†…å­˜ä¸­çš„ä»£ç æ¯”è®¿é—®æ–‡ä»¶ä¸­çš„ä»£ç æ›´å¿«ã€‚ æˆ‘ä»¬åœ¨public/index.htmlçš„é¡µé¢ä¸Šæœ‰æ—¶å€™ä¼šå¼•ç”¨ä¸€äº›æœ¬åœ°çš„é™æ€æ–‡ä»¶ï¼Œç›´æ¥æ‰“å¼€é¡µé¢çš„ä¼šå‘ç°è¿™äº›é™æ€æ–‡ä»¶çš„å¼•ç”¨å¤±æ•ˆäº†ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹serverçš„å·¥ä½œç›®å½•ï¼ŒåŒæ—¶æŒ‡å®šå¤šä¸ªé™æ€èµ„æºçš„ç›®å½•ï¼š 1234contentBase: [ path.join(__dirname, &quot;public&quot;), path.join(__dirname, &quot;assets&quot;)] çƒ­æ›´æ–°ï¼ˆHot Module Replacemenç®€ç§°HMRï¼‰æ˜¯åœ¨å¯¹ä»£ç è¿›è¡Œä¿®æ”¹å¹¶ä¿å­˜ä¹‹åï¼Œwebpackå¯¹ä»£ç é‡æ–°æ‰“åŒ…ï¼Œå¹¶ä¸”å°†æ–°çš„æ¨¡å—å‘é€åˆ°æµè§ˆå™¨ç«¯ï¼Œæµè§ˆå™¨é€šè¿‡æ–°çš„æ¨¡å—æ›¿æ¢è€çš„æ¨¡å—ï¼Œè¿™æ ·å°±èƒ½åœ¨ä¸åˆ·æ–°æµè§ˆå™¨çš„å‰æä¸‹å®ç°é¡µé¢çš„æ›´æ–°ã€‚ å¯ä»¥çœ‹å‡ºæµè§ˆå™¨å’Œwebpack-dev-serverä¹‹é—´é€šè¿‡ä¸€ä¸ªwebsockè¿›è¡Œè¿æ¥ï¼Œåˆå§‹åŒ–çš„æ—¶å€™clientç«¯ä¿å­˜äº†ä¸€ä¸ªæ‰“åŒ…åçš„hashå€¼ï¼›æ¯æ¬¡æ›´æ–°æ—¶serverç›‘å¬æ–‡ä»¶æ”¹åŠ¨ï¼Œç”Ÿæˆä¸€ä¸ªæœ€æ–°çš„hashå€¼å†æ¬¡é€šè¿‡websocketæ¨é€ç»™clientç«¯ï¼Œclientç«¯å¯¹æ¯”ä¸¤æ¬¡hashå€¼åå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚è¿”å›æ›´æ–°åçš„æ¨¡å—æ–‡ä»¶è¿›è¡Œæ›¿æ¢ã€‚ æˆ‘ä»¬ç‚¹å‡»æºç æ—çš„è¡Œæ•°çœ‹ä¸€ä¸‹ç¼–è¯‘åçš„æºç æ˜¯ä»€ä¹ˆæ ·çš„ï¼š å‘ç°è·Ÿæˆ‘ä»¬çš„æºç å·®è·è¿˜æ˜¯æŒºå¤§çš„ï¼Œæœ¬æ¥æ˜¯ä¸€ä¸ªç®€å•addå‡½æ•°ï¼Œé€šè¿‡webpackçš„æ¨¡å—å°è£…ï¼Œå·²ç»å¾ˆéš¾ç†è§£åŸæ¥ä»£ç çš„å«ä¹‰äº†ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦å°†ç¼–è¯‘åçš„ä»£ç æ˜ å°„å›æºç ï¼›devtoolä¸­ä¸åŒçš„é…ç½®æœ‰ä¸åŒçš„æ•ˆæœå’Œé€Ÿåº¦ï¼Œç»¼åˆæ€§èƒ½å’Œå“è´¨åï¼Œæˆ‘ä»¬ä¸€èˆ¬åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨cheap-module-eval-source-mapï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨source-mapã€‚ 1234module.exports = &#123; devtool: &#x27;cheap-module-eval-source-map&#x27;, //å…¶ä»–é…ç½®&#125; å…¶ä»–å„æ¨¡å¼çš„å¯¹æ¯”ï¼š plugins åœ¨ä¸Šé¢æˆ‘ä»¬ä¹Ÿä»‹ç»äº†DefinePluginã€HtmlWebpackPluginç­‰å¾ˆå¤šæ’ä»¶ï¼Œæˆ‘ä»¬å‘ç°è¿™äº›æ’ä»¶éƒ½èƒ½å¤Ÿä¸åŒç¨‹åº¦çš„å½±å“ç€webpackçš„æ„å»ºè¿‡ç¨‹ï¼Œä¸‹é¢è¿˜æœ‰ä¸€äº›å¸¸ç”¨çš„æ’ä»¶ï¼Œpluginsç›¸å…³ä»£ç åœ¨demo7ä¸­ã€‚ clean-webpack-plugin clean-webpack-pluginç”¨äºåœ¨æ‰“åŒ…å‰æ¸…ç†ä¸Šä¸€æ¬¡é¡¹ç›®ç”Ÿæˆçš„bundleæ–‡ä»¶ï¼Œå®ƒä¼šæ ¹æ®output.pathè‡ªåŠ¨æ¸…ç†æ–‡ä»¶å¤¹ï¼›è¿™ä¸ªæ’ä»¶åœ¨ç”Ÿäº§ç¯å¢ƒç”¨çš„é¢‘ç‡éå¸¸é«˜ï¼Œå› ä¸ºç”Ÿäº§ç¯å¢ƒç»å¸¸ä¼šé€šè¿‡hashç”Ÿæˆå¾ˆå¤šbundleæ–‡ä»¶ï¼Œå¦‚æœä¸è¿›è¡Œæ¸…ç†çš„è¯æ¯æ¬¡éƒ½ä¼šç”Ÿæˆæ–°çš„ï¼Œå¯¼è‡´æ–‡ä»¶å¤¹éå¸¸åºå¤§ï¼›è¿™ä¸ªæ’ä»¶å®‰è£…ä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼š 1npm i -D clean-webpack-plugin å®‰è£…åæˆ‘ä»¬åœ¨configä¸­é…ç½®ä¸€ä¸‹å°±å¯ä»¥äº†ï¼š 1234567891011const &#123; CleanWebpackPlugin &#125; = require(&#x27;clean-webpack-plugin&#x27;);module.exports = &#123; //å…¶ä»–é…ç½® plugins: [ new CleanWebpackPlugin(), new HtmlWebpackPlugin(&#123; template: &#x27;./public/index.html&#x27;, filename: &#x27;index.html&#x27;, &#125;) ]&#125; mini-css-extract-plugin æˆ‘ä»¬ä¹‹å‰çš„æ ·å¼éƒ½æ˜¯é€šè¿‡style-loaderæ’å…¥åˆ°é¡µé¢ä¸­å»ï¼Œä½†æ˜¯ç”Ÿäº§ç¯å¢ƒéœ€è¦å•ç‹¬æŠ½ç¦»æ ·å¼æ–‡ä»¶ï¼Œmini-css-extract-pluginå°±å¯ä»¥å¸®æˆ‘ä»jsä¸­å‰¥ç¦»æ ·å¼ï¼š 1npm i -D mini-css-extract-plugin æˆ‘ä»¬åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨style-loaderï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨mini-css-extract-pluginï¼š 1234567891011121314151617181920212223const MiniCssExtractPlugin = require(&#x27;mini-css-extract-plugin&#x27;);module.exports = &#123; //å…¶ä»–é…ç½® module: &#123; rules: [ &#123; test: /\\.less/, use: [&#123; loader: isDev ? &#x27;style-loader&#x27; : MiniCssExtractPlugin.loader &#125;,&#123; loader: &#x27;css-loader&#x27; &#125;,&#123; loader: &#x27;less-loader&#x27; &#125;] &#125; ] &#125;, plugins: [ new MiniCssExtractPlugin(&#123; filename: &quot;[name].[hash:8].css&quot;, &#125;) ]&#125; å¼•å…¥loaderåï¼Œæˆ‘ä»¬è¿˜éœ€è¦é…ç½®pluginï¼Œæå–çš„cssåŒæ ·æ”¯æŒoutput.filenameä¸­çš„å ä½ç¬¦å­—ç¬¦ä¸²ã€‚ optimize-css-assets-webpack-plugin æˆ‘ä»¬å¯ä»¥å‘ç°è™½ç„¶é…ç½®äº†productionæ¨¡å¼ï¼Œæ‰“åŒ…å‡ºæ¥çš„jså‹ç¼©äº†ï¼Œä½†æ˜¯æ‰“åŒ…å‡ºæ¥çš„cssç¡®æ²¡æœ‰å‹ç¼©ï¼›åœ¨ç”Ÿäº§ç¯å¢ƒæˆ‘ä»¬éœ€è¦å¯¹cssè¿›è¡Œä¸€ä¸‹å‹ç¼©ï¼š 1npm i optimize-css-assets-webpack-plugin -D ç„¶åä¹Ÿæ˜¯å¼•å…¥æ’ä»¶ï¼š 1234567const OptimizeCSSAssetsPlugin = require(&#x27;optimize-css-assets-webpack-plugin&#x27;);module.exports = &#123; //å…¶ä»–é…ç½® plugins: [ new OptimizeCSSAssetsPlugin(), ]&#125; copy-webpack-plugin å’Œdemo6ä¸­ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨public/index.htmlä¸­å¼•å…¥äº†é™æ€èµ„æºï¼Œä½†æ˜¯æ‰“åŒ…çš„æ—¶å€™webpackå¹¶ä¸ä¼šå¸®æˆ‘ä»¬æ‹·è´åˆ°distç›®å½•ï¼Œå› æ­¤copy-webpack-pluginå°±å¯ä»¥å¾ˆå¥½åœ°å¸®æˆ‘åšæ‹·è´çš„å·¥ä½œäº† 1npm i -D copy-webpack-plugin åœ¨configä¸­é…ç½®æˆ‘ä»¬éœ€è¦æ‹·è´çš„æºè·¯å¾„å’Œç›®æ ‡è·¯å¾„ï¼š 1234567891011121314const CopyWebpackPlugin = require(&#x27;copy-webpack-plugin&#x27;);module.exports = &#123; plugins: [ new CopyWebpackPlugin(&#123; patterns: [ &#123; from: &#x27;public/js/*.js&#x27;, to: path.resolve(__dirname, &#x27;dist&#x27;, &#x27;js&#x27;), flatten: true, &#125; ] &#125;), ]&#125; ProvidePlugin ProvidePluginå¯ä»¥å¾ˆå¿«çš„å¸®æˆ‘ä»¬åŠ è½½æƒ³è¦å¼•å…¥çš„æ¨¡å—ï¼Œè€Œä¸ç”¨requireã€‚ä¸€èˆ¬æˆ‘ä»¬åŠ è½½jQueryéœ€è¦å…ˆæŠŠå®ƒimportï¼š 12import $ from &#x27;jquery&#x27;$(&#x27;.box&#x27;).html(&#x27;box&#x27;) ä½†æ˜¯æˆ‘ä»¬åœ¨configä¸­é…ç½®ProvidePluginæ’ä»¶åèƒ½å¤Ÿä¸ç”¨importï¼Œç›´æ¥ä½¿ç”¨$ï¼š 12345678module.exports = &#123; plugins: [ new webpack.ProvidePlugin(&#123; $: &#x27;jquery&#x27;, jQuery: &#x27;jquery&#x27; &#125;), ]&#125; ä½†æ˜¯å¦‚æœåœ¨é¡¹ç›®ä¸­å¼•å…¥äº†å¤ªå¤šæ¨¡å—å¹¶ä¸”æ²¡æœ‰requireä¼šè®©äººæ‘¸ä¸ç€å¤´è„‘ï¼Œå› æ­¤å»ºè®®åŠ è½½ä¸€äº›å¸¸è§çš„æ¯”å¦‚jQueryã€vueã€lodashç­‰ã€‚ loaderå’Œpluginçš„åŒºåˆ« ä»‹ç»äº†è¿™ä¹ˆå¤šloaderå’Œpluginï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ä»–ä»¬ä¸¤è€…çš„åŒºåˆ«ï¼š loaderï¼šç”±äºwebpackåªèƒ½è¯†åˆ«jsï¼Œloaderç›¸å½“äºç¿»è¯‘å®˜çš„è§’è‰²ï¼Œå¸®åŠ©webpackå¯¹å…¶ä»–ç±»å‹çš„èµ„æºè¿›è¡Œè½¬è¯‘çš„é¢„å¤„ç†å·¥ä½œã€‚pluginsï¼špluginsæ‰©å±•äº†webpackçš„åŠŸèƒ½ï¼Œåœ¨webpackè¿è¡Œæ—¶ä¼šå¹¿æ’­å¾ˆå¤šäº‹ä»¶ï¼Œpluginå¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œç„¶åé€šè¿‡webpackæä¾›çš„APIæ¥æ”¹å˜è¾“å‡ºç»“æœã€‚ æ€»ç»“ æœ€åï¼Œä»‹ç»äº†è¿™ä¹ˆå¤šï¼Œæœ¬æ–‡æ˜¯webpackåŸºç¡€ç¯‡ï¼Œè¿˜æœ‰å¾ˆå¤šç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–è¿˜æ²¡æœ‰å†™åˆ°ï¼›å› æ­¤å„ä½çœ‹å®˜æ•¬è¯·æœŸå¾…ä¼˜åŒ–ç¯‡ã€‚ å‚è€ƒï¼š å†æ¥ä¸€æ‰“Webpacké¢è¯•é¢˜Webpack HMR åŸç†è§£æ","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"},{"name":"Webpack","slug":"Webpack","permalink":"https://xieyufei.com/tags/Webpack/"}]},{"title":"ä»é›¶å¼€å§‹æ‰‹å†™Promise","date":"2020-05-20T04:00:00.000Z","path":"2020/05/20/Handwrite-Promise.html","text":"é¢è¯•çš„æ—¶å€™ç»å¸¸ä¼šé—®åˆ°Promiseçš„ä½¿ç”¨ï¼›æœ‰çš„é¢è¯•å®˜å†æ·±å…¥ä¸€ç‚¹ï¼Œä¼šç»§ç»­é—®æ˜¯å¦äº†è§£Promiseçš„å®ç°æ–¹å¼ï¼Œæˆ–è€…æœ‰æ²¡æœ‰é˜…è¯»è¿‡Promiseçš„æºç ï¼›ä»Šå¤©æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹ï¼ŒPromiseåœ¨å†…éƒ¨æ˜¯å¦‚ä½•å®ç°æ¥é“¾å¼è°ƒç”¨çš„ã€‚ ä»€ä¹ˆæ˜¯Promise æ‰€è°“Promiseï¼Œç®€å•è¯´å°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢ä¿å­˜ç€æŸä¸ªæœªæ¥æ‰ä¼šç»“æŸçš„äº‹ä»¶ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼‰çš„ç»“æœã€‚ä»è¯­æ³•ä¸Šè¯´ï¼ŒPromise æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»å®ƒå¯ä»¥è·å–å¼‚æ­¥æ“ä½œçš„æ¶ˆæ¯ã€‚Promiseæä¾›ç»Ÿä¸€çš„APIï¼Œå„ç§å¼‚æ­¥æ“ä½œéƒ½å¯ä»¥ç”¨åŒæ ·çš„æ–¹æ³•è¿›è¡Œå¤„ç†ã€‚ Promiseå‡ºç°ä¹‹å‰éƒ½æ˜¯é€šè¿‡å›è°ƒå‡½æ•°æ¥å®ç°ï¼Œå›è°ƒå‡½æ•°æœ¬èº«æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åµŒå¥—å±‚çº§è¿‡æ·±ï¼Œå¾ˆå®¹æ˜“æ‰è¿›å›è°ƒåœ°ç‹±ã€‚ 12345678const fs = require(&#x27;fs&#x27;);fs.readFile(&#x27;1.txt&#x27;, (err,data) =&gt; &#123; fs.readFile(&#x27;2.txt&#x27;, (err,data) =&gt; &#123; fs.readFile(&#x27;3.txt&#x27;, (err,data) =&gt; &#123; //å¯èƒ½è¿˜æœ‰åç»­ä»£ç  &#125;); &#125;);&#125;); å¦‚æœæ¯æ¬¡è¯»å–æ–‡ä»¶åè¿˜è¦è¿›è¡Œé€»è¾‘çš„åˆ¤æ–­æˆ–è€…å¼‚å¸¸çš„å¤„ç†ï¼Œé‚£ä¹ˆæ•´ä¸ªå›è°ƒå‡½æ•°å°±ä¼šéå¸¸å¤æ‚ä¸”éš¾ä»¥ç»´æŠ¤ã€‚Promiseçš„å‡ºç°æ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªç—›ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢çš„å›è°ƒåµŒå¥—ç”¨Promiseæ”¹å†™ä¸€ä¸‹ï¼š 1234567891011121314151617181920const readFile = function(fileName)&#123; return new Promise((resolve, reject)=&gt;&#123; fs.readFile(fileName, (err, data)=&gt;&#123; if(err)&#123; reject(err) &#125; else &#123; resolve(data) &#125; &#125;) &#125;)&#125;readFile(&#x27;1.txt&#x27;) .then(data =&gt; &#123; return readFile(&#x27;2.txt&#x27;); &#125;).then(data =&gt; &#123; return readFile(&#x27;3.txt&#x27;); &#125;).then(data =&gt; &#123; //... &#125;); Promiseè§„èŒƒ promiseæœ€æ—©æ˜¯åœ¨commonjsç¤¾åŒºæå‡ºæ¥çš„ï¼Œå½“æ—¶æå‡ºäº†å¾ˆå¤šè§„èŒƒã€‚æ¯”è¾ƒæ¥å—çš„æ˜¯promise/Aè§„èŒƒã€‚ä½†æ˜¯promise/Aè§„èŒƒæ¯”è¾ƒç®€å•ï¼Œåæ¥äººä»¬åœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæå‡ºäº†promise/A+è§„èŒƒï¼Œä¹Ÿå°±æ˜¯å®é™…ä¸Šçš„ä¸šå†…æ¨è¡Œçš„è§„èŒƒï¼›es6ä¹Ÿæ˜¯é‡‡ç”¨çš„è¿™ç§è§„èŒƒï¼Œä½†æ˜¯es6åœ¨æ­¤è§„èŒƒä¸Šè¿˜åŠ å…¥äº†Promise.allã€Promise.raceã€Promise.catchã€Promise.resolveã€Promise.rejectç­‰æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡è„šæœ¬æ¥æµ‹è¯•æˆ‘ä»¬å†™çš„Promiseæ˜¯å¦ç¬¦åˆpromise/A+çš„è§„èŒƒã€‚å°†æˆ‘ä»¬å®ç°çš„PromiseåŠ å…¥ä»¥ä¸‹ä»£ç ï¼š 12345678Promise.defer = Promise.deferred = function () &#123; let dfd = &#123;&#125;; dfd.promise = new Promise((resolve, reject) =&gt; &#123; dfd.resolve = resolve; dfd.reject = reject; &#125;); return dfd;&#125; ç„¶åé€šè¿‡module.exportså¯¼å‡ºï¼Œå®‰è£…æµ‹è¯•çš„è„šæœ¬ï¼š 1npm install -g promises-aplus-tests åœ¨å®ç°Promiseçš„ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1promises-aplus-tests promise.js æ¥ä¸‹æ¥ï¼Œè„šæœ¬ä¼šå¯¹ç…§ç€promise/A+çš„è§„èŒƒï¼Œå¯¹æˆ‘ä»¬çš„è„šæœ¬æ¥ä¸€æ¡ä¸€æ¡åœ°è¿›è¡Œæµ‹è¯•ã€‚ PromiseåŸºæœ¬ç»“æ„ æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¹³æ—¶éƒ½æ˜¯æ€ä¹ˆä½¿ç”¨Promiseçš„ï¼š 1234567891011var p = new Promise(function(resolve, reject)&#123; console.log(&#x27;æ‰§è¡Œ&#x27;) setTimeout(function()&#123; resolve(2) &#125;, 1000)&#125;)p.then(function(res)&#123; console.log(&#x27;suc&#x27;,res)&#125;,function(err)&#123; console.log(&#x27;err&#x27;,err)&#125;) é¦–å…ˆçœ‹å‡ºæ¥ï¼ŒPromiseæ˜¯é€šè¿‡æ„é€ å‡½æ•°å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åé€šè¿‡å®ä¾‹å¯¹è±¡ä¸Šçš„thenæ–¹æ³•ï¼Œæ¥å¤„ç†å¼‚æ­¥è¿”å›çš„ç»“æœã€‚åŒæ—¶ï¼Œpromise/A+è§„èŒƒè§„å®šäº†ï¼š promise æ˜¯ä¸€ä¸ªæ‹¥æœ‰ then æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œå…¶è¡Œä¸ºç¬¦åˆæœ¬è§„èŒƒï¼› ä¸€ä¸ª Promise çš„å½“å‰çŠ¶æ€å¿…é¡»ä¸ºä»¥ä¸‹ä¸‰ç§çŠ¶æ€ä¸­çš„ä¸€ç§ï¼šç­‰å¾…æ€ï¼ˆPendingï¼‰ã€æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰å’Œæ‹’ç»æ€ï¼ˆRejectedï¼‰ã€‚ 1234567891011121314151617const PENDING = &#x27;pending&#x27;const FULFILLED = &#x27;fulfilled&#x27;const REJECTED = &#x27;rejected&#x27;function Promise(executor) &#123; var _this = this this.state = PENDING; //çŠ¶æ€ this.value = undefined; //æˆåŠŸç»“æœ this.reason = undefined; //å¤±è´¥åŸå›  function resolve(value) &#123;&#125; function reject(reason) &#123;&#125;&#125;Promise.prototype.then = function (onFulfilled, onRejected) &#123;&#125;;module.exports = Promise; å½“æˆ‘ä»¬å®ä¾‹åŒ–Promiseæ—¶ï¼Œæ„é€ å‡½æ•°ä¼šé©¬ä¸Šè°ƒç”¨ä¼ å…¥çš„æ‰§è¡Œå‡½æ•°executorï¼Œæˆ‘ä»¬å¯ä»¥è¯•ä¸€ä¸‹ï¼š 123let p = new Promise((resolve, reject) =&gt; &#123; console.log(&#x27;æ‰§è¡Œäº†&#x27;);&#125;); å› æ­¤åœ¨Promiseä¸­æ„é€ å‡½æ•°ç«‹é©¬æ‰§è¡Œï¼ŒåŒæ—¶å°†resolveå‡½æ•°å’Œrejectå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥ï¼š 123456789function Promise(executor) &#123; var _this = this this.state = PENDING; //çŠ¶æ€ this.value = undefined; //æˆåŠŸç»“æœ this.reason = undefined; //å¤±è´¥åŸå›  function resolve(value) &#123;&#125; function reject(reason) &#123;&#125; executor(resolve, reject)&#125; ä½†æ˜¯executorä¹Ÿä¼šå¯èƒ½å­˜åœ¨å¼‚å¸¸ï¼Œå› æ­¤é€šè¿‡try/catchæ¥æ•è·ä¸€ä¸‹å¼‚å¸¸æƒ…å†µï¼š 12345try &#123; executor(resolve, reject);&#125; catch (e) &#123; reject(e);&#125; ä¸å¯å˜ promise/A+è§„èŒƒä¸­è§„å®šï¼Œå½“Promiseå¯¹è±¡å·²ç»ç”±ç­‰å¾…æ€ï¼ˆPendingï¼‰æ”¹å˜ä¸ºæ‰§è¡Œæ€ï¼ˆFulfilledï¼‰æˆ–è€…æ‹’ç»æ€ï¼ˆRejectedï¼‰åï¼Œå°±ä¸èƒ½å†æ¬¡æ›´æ”¹çŠ¶æ€ï¼Œä¸”ç»ˆå€¼ä¹Ÿä¸å¯æ”¹å˜ã€‚ å› æ­¤æˆ‘ä»¬åœ¨å›è°ƒå‡½æ•°resolveå’Œrejectä¸­åˆ¤æ–­ï¼Œåªèƒ½æ˜¯pendingçŠ¶æ€çš„æ—¶å€™æ‰èƒ½æ›´æ”¹çŠ¶æ€ï¼š 123456789101112function resolve(value) &#123; if(_this.state === PENDING)&#123; _this.state = FULFILLED _this.value = value &#125;&#125;function reject(reason) &#123; if(_this.state === PENDING)&#123; _this.state = REJECTED _this.reason = reason &#125;&#125; æˆ‘ä»¬æ›´æ”¹çŠ¶æ€çš„åŒæ—¶ï¼Œå°†å›è°ƒå‡½æ•°ä¸­æˆåŠŸçš„ç»“æœæˆ–è€…å¤±è´¥çš„åŸå› éƒ½ä¿å­˜åœ¨å¯¹åº”çš„å±æ€§ä¸­ï¼Œæ–¹ä¾¿ä»¥åæ¥è·å–ã€‚ thenå®ç° å½“Promiseçš„çŠ¶æ€æ”¹å˜ä¹‹åï¼Œä¸ç®¡æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½ä¼šè§¦å‘thenå›è°ƒå‡½æ•°ã€‚å› æ­¤ï¼Œthençš„å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯æ ¹æ®çŠ¶æ€çš„ä¸åŒï¼Œæ¥è°ƒç”¨ä¸åŒå¤„ç†ç»ˆå€¼çš„å‡½æ•°ã€‚ 12345678Promise.prototype.then = function (onFulfilled, onRejected) &#123; if(this.state === FULFILLED)&#123; typeof onFulfilled === &#x27;function&#x27; &amp;&amp; onFulfilled(this.value) &#125; if(this.state === REJECTED)&#123; typeof onRejected === &#x27;function&#x27; &amp;&amp; onRejected(this.reason) &#125;&#125;; åœ¨è§„èŒƒä¸­ä¹Ÿè¯´äº†ï¼ŒonFulfilledå’ŒonRejectedæ˜¯å¯é€‰çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯¹ä¸¤ä¸ªå€¼è¿›è¡Œä¸€ä¸‹ç±»å‹çš„åˆ¤æ–­ï¼š onFulfilled å’Œ onRejected éƒ½æ˜¯å¯é€‰å‚æ•°ã€‚å¦‚æœ onFulfilled ä¸æ˜¯å‡½æ•°ï¼Œå…¶å¿…é¡»è¢«å¿½ç•¥ã€‚å¦‚æœ onRejected ä¸æ˜¯å‡½æ•°ï¼Œå…¶å¿…é¡»è¢«å¿½ç•¥ ä»£ç å†™åˆ°è¿™é‡Œï¼Œè²Œä¼¼è¯¥æœ‰çš„å®ç°æ–¹å¼éƒ½æœ‰äº†ï¼Œæˆ‘ä»¬æ¥å†™ä¸ªdemoæµ‹è¯•ä¸€ä¸‹ï¼š 123456789101112var myP = new Promise(function(resolve, reject)&#123; console.log(&#x27;æ‰§è¡Œ&#x27;) setTimeout(function()&#123; reject(3) &#125;, 1000)&#125;);myP.then(function(res)&#123; console.log(res)&#125;,function(err)&#123; console.log(err)&#125;); ç„¶é¹…ï¼Œå¾ˆé—æ†¾ï¼Œè¿è¡Œèµ·æ¥æˆ‘ä»¬å‘ç°åªæ‰“å°äº†æ„é€ å‡½æ•°ä¸­çš„æ‰§è¡Œï¼Œä¸‹é¢çš„thenå‡½æ•°æ ¹æœ¬éƒ½æ²¡æœ‰æ‰§è¡Œã€‚æˆ‘ä»¬æ•´ç†ä¸€ä¸‹ä»£ç çš„è¿è¡Œæµç•…ï¼š å½“thené‡Œé¢å‡½æ•°è¿è¡Œæ—¶ï¼Œresolveç”±äºæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè¿˜æ²¡æœ‰æ¥å¾—åŠä¿®æ”¹stateï¼Œæ­¤æ—¶è¿˜æ˜¯PENDINGçŠ¶æ€ï¼›å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹å¼‚æ­¥çš„æƒ…å†µåšä¸€ä¸‹å¤„ç†ã€‚ æ”¯æŒå¼‚æ­¥ é‚£ä¹ˆå¦‚ä½•è®©æˆ‘ä»¬çš„Promiseæ¥æ”¯æŒå¼‚æ­¥å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å‚è€ƒå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼Œåœ¨æ‰§è¡Œthenæ–¹æ³•çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰è¿˜æ˜¯PENDINGçŠ¶æ€ï¼Œå°±æŠŠå›è°ƒå‡½æ•°å¯„å­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå½“çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå»æ•°ç»„ä¸­å–å‡ºå›è°ƒå‡½æ•°ï¼›å› æ­¤æˆ‘ä»¬å…ˆåœ¨Promiseä¸­å®šä¹‰ä¸€ä¸‹å˜é‡ï¼š 1234function Promise(executor) &#123; this.onFulfilled = [];//æˆåŠŸçš„å›è°ƒ this.onRejected = []; //å¤±è´¥çš„å›è°ƒ&#125; è¿™æ ·ï¼Œå½“thenæ‰§è¡Œæ—¶ï¼Œå¦‚æœè¿˜æ˜¯PENDINGçŠ¶æ€ï¼Œæˆ‘ä»¬ä¸æ˜¯é©¬ä¸Šå»æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè€Œæ˜¯å°†å…¶å­˜å‚¨èµ·æ¥ï¼š 123456789101112Promise.prototype.then = function (onFulfilled, onRejected) &#123; if(this.state === FULFILLED)&#123; typeof onFulfilled === &#x27;function&#x27; &amp;&amp; onFulfilled(this.value) &#125; if(this.state === REJECTED)&#123; typeof onRejected === &#x27;function&#x27; &amp;&amp; onRejected(this.reason) &#125; if(this.state === PENDING)&#123; typeof onFulfilled === &#x27;function&#x27; &amp;&amp; this.onFulfilled.push(onFulfilled) typeof onRejected === &#x27;function&#x27; &amp;&amp; this.onRejected.push(onRejected) &#125;&#125;; å­˜å‚¨èµ·æ¥åï¼Œå½“resolveæˆ–è€…rejectå¼‚æ­¥æ‰§è¡Œçš„æ—¶å€™å°±å¯ä»¥æ¥è°ƒç”¨äº†ï¼š 1234567891011121314function resolve(value) &#123; if(_this.state === PENDING)&#123; _this.state = FULFILLED _this.value = value _this.onFulfilled.forEach(fn =&gt; fn(value)) &#125;&#125;function reject(reason) &#123; if(_this.state === PENDING)&#123; _this.state = REJECTED _this.reason = reason _this.onRejected.forEach(fn =&gt; fn(reason)) &#125;&#125; æœ‰ç«¥é‹å¯èƒ½ä¼šæå‡ºç–‘é—®äº†ï¼Œä¸ºä»€ä¹ˆè¿™è¾¹onFulfilledå’ŒonRejectedè¦å­˜åœ¨æ•°ç»„ä¸­ï¼Œç›´æ¥ç”¨ä¸€ä¸ªå˜é‡æ¥æ”¶ä¸æ˜¯ä¹Ÿå¯ä»¥ä¹ˆï¼Ÿä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213var p = new Promise((resolve, reject)=&gt;&#123; setTimeout(()=&gt;&#123; resolve(4) &#125;, 0)&#125;)p.then((res)=&gt;&#123; //4 res console.log(res, &#x27;res&#x27;)&#125;)p.then((res1)=&gt;&#123; //4 res1 console.log(res1, &#x27;res1&#x27;)&#125;) æˆ‘ä»¬åˆ†åˆ«è°ƒç”¨äº†ä¸¤æ¬¡thenï¼Œå¦‚æœæ˜¯ä¸€ä¸ªå˜é‡çš„è¯ï¼Œæœ€åè‚¯å®šåªä¼šè¿è¡Œåä¸€ä¸ªthenï¼ŒæŠŠä¹‹å‰çš„è¦†ç›–äº†ï¼Œå¦‚æœæ˜¯æ•°ç»„çš„è¯ï¼Œä¸¤ä¸ªthenéƒ½èƒ½æ­£å¸¸è¿è¡Œã€‚ è‡³æ­¤ï¼Œæˆ‘ä»¬è¿è¡Œdemoï¼Œå°±èƒ½å¦‚æ„¿ä»¥å¿çš„çœ‹åˆ°è¿è¡Œç»“æœäº†ï¼›ä¸€ä¸ªå››åè¡Œå·¦å³çš„ç®€å•Promiseå«ç‰‡å°±æ­¤å®Œæˆäº†ã€‚è¿™é‡Œè´´ä¸€ä¸‹å®Œæ•´çš„ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243const PENDING = &#x27;pending&#x27;const FULFILLED = &#x27;fulfilled&#x27;const REJECTED = &#x27;rejected&#x27;function Promise(executor) &#123; var _this = this this.state = PENDING; //çŠ¶æ€ this.value = undefined; //æˆåŠŸç»“æœ this.reason = undefined; //å¤±è´¥åŸå›  this.onFulfilled = [];//æˆåŠŸçš„å›è°ƒ this.onRejected = []; //å¤±è´¥çš„å›è°ƒ function resolve(value) &#123; if(_this.state === PENDING)&#123; _this.state = FULFILLED _this.value = value _this.onFulfilled.forEach(fn =&gt; fn(value)) &#125; &#125; function reject(reason) &#123; if(_this.state === PENDING)&#123; _this.state = REJECTED _this.reason = reason _this.onRejected.forEach(fn =&gt; fn(reason)) &#125; &#125; try &#123; executor(resolve, reject); &#125; catch (e) &#123; reject(e); &#125;&#125;Promise.prototype.then = function (onFulfilled, onRejected) &#123; if(this.state === FULFILLED)&#123; typeof onFulfilled === &#x27;function&#x27; &amp;&amp; onFulfilled(this.value) &#125; if(this.state === REJECTED)&#123; typeof onRejected === &#x27;function&#x27; &amp;&amp; onRejected(this.reason) &#125; if(this.state === PENDING)&#123; typeof onFulfilled === &#x27;function&#x27; &amp;&amp; this.onFulfilled.push(onFulfilled) typeof onRejected === &#x27;function&#x27; &amp;&amp; this.onRejected.push(onRejected) &#125;&#125;; é“¾å¼è°ƒç”¨then ç›¸ä¿¡ä¸Šé¢çš„Promiseå«ç‰‡åº”è¯¥å¾ˆå®¹æ˜“ç†è§£ï¼Œä¸‹é¢é“¾å¼è°ƒç”¨æ‰æ˜¯Promiseçš„éš¾ç‚¹å’Œæ ¸å¿ƒç‚¹ï¼›æˆ‘ä»¬å¯¹ç…§promise/A+è§„èŒƒï¼Œä¸€æ­¥ä¸€æ­¥åœ°æ¥å®ç°ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹è§„èŒƒæ˜¯å¦‚ä½•æ¥å®šä¹‰çš„ï¼š then æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ª promise å¯¹è±¡ promise2 = promise1.then(onFulfilled, onRejected); ä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªthenæ–¹æ³•éƒ½è¦è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œè¿™æ ·æˆ‘ä»¬çš„thenæ–¹æ³•æ‰èƒ½ä¸æ–­çš„é“¾å¼è°ƒç”¨ï¼›å› æ­¤ä¸Šé¢çš„ç®€å•å«ç‰‡ä¸­thenæ–¹æ³•å°±ä¸é€‚ç”¨äº†ï¼Œå› ä¸ºå®ƒä»€ä¹ˆéƒ½æ²¡æœ‰è¿”å›ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œç®€å•çš„æ”¹å†™ï¼Œä¸è®ºthenè¿›è¡Œä»€ä¹ˆæ“ä½œï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼š 12345Promise.prototype.then = function (onFulfilled, onRejected) &#123; let promise2 = new Promise((resolve, reject)=&gt;&#123; &#125;) return promise2&#125; æˆ‘ä»¬ç»§ç»­çœ‹thençš„æ‰§è¡Œè¿‡ç¨‹ï¼š å¦‚æœ onFulfilled æˆ–è€… onRejected è¿”å›ä¸€ä¸ªå€¼ x ï¼Œåˆ™è¿è¡Œä¸‹é¢çš„ Promise è§£å†³è¿‡ç¨‹ï¼š[[Resolve]](promise2, x) å¦‚æœ onFulfilled æˆ–è€… onRejected æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ e ï¼Œåˆ™ promise2 å¿…é¡»æ‹’ç»æ‰§è¡Œï¼Œå¹¶è¿”å›æ‹’å›  e å¦‚æœ onFulfilled ä¸æ˜¯å‡½æ•°ä¸” promise1 æˆåŠŸæ‰§è¡Œï¼Œ promise2 å¿…é¡»æˆåŠŸæ‰§è¡Œå¹¶è¿”å›ç›¸åŒçš„å€¼ å¦‚æœ onRejected ä¸æ˜¯å‡½æ•°ä¸” promise1 æ‹’ç»æ‰§è¡Œï¼Œ promise2 å¿…é¡»æ‹’ç»æ‰§è¡Œå¹¶è¿”å›ç›¸åŒçš„æ®å›  é¦–å…ˆç¬¬ä¸€ç‚¹ï¼Œæˆ‘ä»¬çŸ¥é“onFulfilledå’ŒonRejectedæ‰§è¡Œä¹‹åéƒ½ä¼šæœ‰ä¸€ä¸ªè¿”å›å€¼xï¼Œå¯¹è¿”å›å€¼xå¤„ç†å°±éœ€è¦ç”¨åˆ°Promiseè§£å†³è¿‡ç¨‹ï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸‹é¢å†è¯´ï¼›ç¬¬äºŒç‚¹éœ€è¦å¯¹onFulfilledå’ŒonRejectedè¿›è¡Œå¼‚å¸¸å¤„ç†ï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼›ç¬¬ä¸‰å’Œç¬¬å››ç‚¹ï¼Œè¯´çš„å…¶å®æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœonFulfilledå’ŒonRejectedä¸¤ä¸ªå‚æ•°æ²¡æœ‰ä¼ ï¼Œåˆ™ç»§ç»­å¾€ä¸‹ä¼ ï¼ˆå€¼çš„ä¼ é€’ç‰¹æ€§ï¼‰ï¼›ä¸¾ä¸ªä¾‹å­ï¼š 123456789101112var p = new Promise(function(resolve, reject)&#123; setTimeout(function()&#123; resolve(3) &#125;, 1000)&#125;);p.then(1,1).then(&#x27;&#x27;,&#x27;&#x27;).then().then(function(res)&#123; //3 console.log(res)&#125;) è¿™é‡Œä¸ç®¡onFulfilledå’ŒonRejectedä¼ ä»€ä¹ˆå€¼ï¼Œåªè¦ä¸æ˜¯å‡½æ•°ï¼Œå°±ç»§ç»­å‘ä¸‹ä¼ å…¥ï¼Œç›´åˆ°æœ‰å‡½æ•°è¿›è¡Œæ¥æ”¶ï¼›å› æ­¤æˆ‘ä»¬å¯¹thenæ–¹æ³•è¿›è¡Œå¦‚ä¸‹å®Œå–„ï¼š 1234567891011121314151617181920212223//_thisæ˜¯promise1çš„å®ä¾‹å¯¹è±¡var _this = thisonFulfilled = typeof onFulfilled === &#x27;function&#x27; ? onFulfilled : value =&gt; valueonRejected = typeof onRejected === &#x27;function&#x27; ? onRejected : reason =&gt; &#123; throw reason &#125;var promise2 = new Promise((resolve, reject)=&gt;&#123; if(_this.state === FULFILLED)&#123; let x = onFulfilled(_this.value) resolvePromise(promise2, x, resolve, reject) &#125; else if(_this.state === REJECTED)&#123; let x = onRejected(_this.reason) resolvePromise(promise2, x ,resolve, reject) &#125; else if(_this.state === PENDING)&#123; _this.onFulfilled.push(()=&gt;&#123; let x = onFulfilled(_this.value) resolvePromise(promise2, x, resolve, reject) &#125;) _this.onRejected.push(()=&gt;&#123; let x = onRejected(_this.reason) resolvePromise(promise2, x ,resolve, reject) &#125;) &#125;&#125;) æˆ‘ä»¬å‘ç°å‡½æ•°ä¸­æœ‰ä¸€ä¸ªresolvePromiseï¼Œå°±æ˜¯ä¸Šé¢è¯´çš„Promiseè§£å†³è¿‡ç¨‹ï¼Œå®ƒæ˜¯å¯¹æ–°çš„promise2å’Œä¸Šä¸€ä¸ªæ‰§è¡Œç»“æœ x çš„å¤„ç†ï¼Œç”±äºå…·æœ‰å¤ç”¨æ€§ï¼Œæˆ‘ä»¬æŠŠå®ƒæŠ½æˆä¸€ä¸ªå•ç‹¬çš„å‡½æ•°ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šé¢è§„èŒƒä¸­å®šä¹‰çš„ç¬¬ä¸€ç‚¹ã€‚ ç”±äºthençš„å›è°ƒæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æŠŠonFulfilledå’ŒonRejectedæ‰§è¡Œæ”¾åˆ°å¼‚æ­¥ä¸­å»æ‰§è¡Œï¼ŒåŒæ—¶åšä¸€ä¸‹é”™è¯¯çš„å¤„ç†ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041//å…¶ä»–ä»£ç ç•¥if(_this.state === FULFILLED)&#123; setTimeout(()=&gt;&#123; try &#123; let x = onFulfilled(_this.value) resolvePromise(promise2, x, resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;)&#125; else if(_this.state === REJECTED)&#123; setTimeout(()=&gt;&#123; try &#123; let x = onRejected(_this.reason) resolvePromise(promise2, x ,resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;)&#125; else if(_this.state === PENDING)&#123; _this.onFulfilled.push(()=&gt;&#123; setTimeout(()=&gt;&#123; try &#123; let x = onFulfilled(_this.value) resolvePromise(promise2, x, resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;) &#125;) _this.onRejected.push(()=&gt;&#123; setTimeout(()=&gt;&#123; try &#123; let x = onRejected(_this.reason) resolvePromise(promise2, x ,resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;) &#125;)&#125; Promiseè§£å†³è¿‡ç¨‹ Promise è§£å†³è¿‡ç¨‹æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ“ä½œï¼Œå…¶éœ€è¾“å…¥ä¸€ä¸ª promise å’Œä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬è¡¨ç¤ºä¸º [[Resolve]](promise, x)ï¼Œå¦‚æœ x æœ‰ then æ–¹æ³•ä¸”çœ‹ä¸Šå»åƒä¸€ä¸ª Promise ï¼Œè§£å†³ç¨‹åºå³å°è¯•ä½¿ promise æ¥å— x çš„çŠ¶æ€ï¼›å¦åˆ™å…¶ç”¨ x çš„å€¼æ¥æ‰§è¡Œ promise ã€‚ è¿™æ®µè¯æ¯”è¾ƒæŠ½è±¡ï¼Œé€šä¿—ä¸€ç‚¹çš„æ¥è¯´å°±æ˜¯promiseçš„è§£å†³è¿‡ç¨‹éœ€è¦ä¼ å…¥ä¸€ä¸ªæ–°çš„promiseå’Œä¸€ä¸ªå€¼xï¼Œå¦‚æœä¼ å…¥çš„xæ˜¯ä¸€ä¸ªthenableçš„å¯¹è±¡ï¼ˆå…·æœ‰thenæ–¹æ³•ï¼‰ï¼Œå°±æ¥å—xçš„çŠ¶æ€ï¼š 123456//promise2ï¼šæ–°çš„Promiseå¯¹è±¡//xï¼šä¸Šä¸€ä¸ªthençš„è¿”å›å€¼//resolveï¼špromise2çš„resolve//rejectï¼špromise2çš„rejectfunction resolvePromise(promise2, x, resolve, reject) &#123;&#125; å®šä¹‰å¥½å‡½æ•°åï¼Œæ¥çœ‹å…·ä½“çš„æ“ä½œè¯´æ˜ï¼š x ä¸ promise ç›¸ç­‰ å¦‚æœ promise å’Œ x æŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œä»¥ TypeError ä¸ºæ®å› æ‹’ç»æ‰§è¡Œ promise x ä¸º Promise å¦‚æœ x å¤„äºç­‰å¾…æ€ï¼Œ promise éœ€ä¿æŒä¸ºç­‰å¾…æ€ç›´è‡³ x è¢«æ‰§è¡Œæˆ–æ‹’ç» å¦‚æœ x å¤„äºæ‰§è¡Œæ€ï¼Œç”¨ç›¸åŒçš„å€¼æ‰§è¡Œ promise å¦‚æœ x å¤„äºæ‹’ç»æ€ï¼Œç”¨ç›¸åŒçš„æ®å› æ‹’ç» promise x ä¸ºå¯¹è±¡æˆ–å‡½æ•° æŠŠ x.then èµ‹å€¼ç»™ then å¦‚æœå– x.then çš„å€¼æ—¶æŠ›å‡ºé”™è¯¯ e ï¼Œåˆ™ä»¥ e ä¸ºæ®å› æ‹’ç» promise å¦‚æœ then æ˜¯å‡½æ•°ï¼Œå°† x ä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸ this è°ƒç”¨ä¹‹ã€‚ä¼ é€’ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å«åš resolvePromise ï¼Œç¬¬äºŒä¸ªå‚æ•°å«åš rejectPromise: å¦‚æœ resolvePromise ä»¥å€¼ y ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™è¿è¡Œ [[Resolve]](promise, y) å¦‚æœ rejectPromise ä»¥æ®å›  r ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™ä»¥æ®å›  r æ‹’ç» promise å¦‚æœ resolvePromise å’Œ rejectPromise å‡è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«åŒä¸€å‚æ•°è°ƒç”¨äº†å¤šæ¬¡ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨é¦–æ¬¡è°ƒç”¨å¹¶å¿½ç•¥å‰©ä¸‹çš„è°ƒç”¨ å¦‚æœ then ä¸æ˜¯å‡½æ•°ï¼Œä»¥ x ä¸ºå‚æ•°æ‰§è¡Œ promise å¦‚æœ x ä¸ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œä»¥ x ä¸ºå‚æ•°æ‰§è¡Œ promise é¦–å…ˆç¬¬ä¸€ç‚¹ï¼Œå¦‚æœxå’Œpromiseç›¸ç­‰ï¼Œè¿™æ˜¯ä¸€ç§ä»€ä¹ˆæƒ…å†µå‘¢ï¼Œå°±æ˜¯ç›¸å½“äºæŠŠè‡ªå·±è¿”å›å‡ºå»äº†ï¼š 1234567var p = new Promise(function(resolve, reject)&#123; resolve(3)&#125;);//Uncaught (in promise) TypeError: Chaining cycle detected for promise #&lt;Promise&gt;var p2 = p.then(function()&#123; return p2&#125;) è¿™æ ·ä¼šé™·å…¥ä¸€ä¸ªæ­»å¾ªç¯ä¸­ï¼Œå› æ­¤æˆ‘ä»¬é¦–å…ˆè¦æŠŠè¿™ç§æƒ…å†µç»™æ’é™¤æ‰ï¼š 12345function resolvePromise(promise2, x, resolve, reject) &#123; if (promise2 === x) &#123; reject(new TypeError(&#x27;Chaining cycle&#x27;)); &#125;&#125; æ¥ä¸‹æ¥å°±æ˜¯å¯¹ä¸åŒæƒ…å†µçš„åˆ¤æ–­äº†ï¼Œé¦–å…ˆæˆ‘ä»¬æŠŠ x ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°çš„æƒ…å†µç»™åˆ¤æ–­å‡ºæ¥ï¼š 1234567891011function resolvePromise(promise2, x, resolve, reject) &#123; if (promise2 === x) &#123; reject(new TypeError(&#x27;Chaining cycle&#x27;)); &#125; if (x !== null &amp;&amp; (typeof x === &#x27;object&#x27; || typeof x === &#x27;function&#x27;)) &#123; //å‡½æ•°æˆ–å¯¹è±¡ &#125; else &#123; //æ™®é€šå€¼ resolve(x) &#125;&#125; å¦‚æœ x ä¸ºå¯¹è±¡æˆ–å‡½æ•°ï¼Œå°±æŠŠ x.then èµ‹å€¼ç»™ thenå¥½ç†è§£ï¼Œä½†æ˜¯ç¬¬äºŒç‚¹å–thenæœ‰å¯èƒ½ä¼šæŠ¥é”™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºéœ€è¦è€ƒè™‘åˆ°æ‰€æœ‰å‡ºé”™çš„æƒ…å†µï¼ˆé˜²å°äººä¸é˜²å›å­ï¼‰ï¼Œå¦‚æœæœ‰äººå®ç°Promiseå¯¹è±¡çš„æ—¶å€™ä½¿ç”¨Object.defineProperty()æ¶æ„æŠ›é”™ï¼Œå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå°±åƒè¿™æ ·ï¼š 12345678var Promise = &#123;&#125;;Object.defineProperty(Promise, &#x27;then&#x27;, &#123; get: function()&#123; throw Error(&#x27;error&#x27;) &#125;&#125;)//Uncaught Error: errorPromise.then å› æ­¤ï¼Œæˆ‘ä»¬å–thençš„æ—¶å€™ä¹Ÿéœ€è¦try/catchï¼š 123456789//å…¶ä»–ä»£ç ç•¥if (x !== null &amp;&amp; (typeof x === &#x27;object&#x27; || typeof x === &#x27;function&#x27;)) &#123; //å‡½æ•°æˆ–å¯¹è±¡ try &#123; let then = x.then &#125; catch(e)&#123; reject(e) &#125;&#125; å–å‡ºthenåï¼Œå›åˆ°3.3ï¼Œåˆ¤æ–­å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå°±å°† x ä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸ this è°ƒç”¨ï¼ŒåŒæ—¶ä¼ å…¥ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚ 123456789101112131415//å…¶ä»–ä»£ç ç•¥try &#123; let then = x.then if(typeof then === &#x27;function&#x27;)&#123; then.call(x, (y)=&gt;&#123; resolve(y) &#125;, (r) =&gt;&#123; reject(r) &#125;) &#125; else &#123; resolve(x) &#125;&#125; catch(e)&#123; reject(e)&#125; è¿™æ ·ï¼Œæˆ‘ä»¬çš„é“¾å¼è°ƒç”¨å°±èƒ½é¡ºåˆ©çš„è°ƒç”¨èµ·æ¥äº†ï¼›ä½†æ˜¯è¿˜æœ‰ä¸€ç§ç‰¹æ®Šçš„æƒ…å†µï¼Œå¦‚æœresolveçš„yå€¼è¿˜æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¿™æ—¶å°±åº”è¯¥ç»§ç»­æ‰§è¡Œï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š 1234567891011121314var p1 = new Promise((resolve, reject)=&gt;&#123; resolve(&#x27;p1&#x27;)&#125;)p1.then((res)=&gt;&#123; return new Promise((resolve, reject)=&gt;&#123; resolve(new Promise((resolve, reject)=&gt;&#123; resolve(&#x27;p2&#x27;) &#125;)) &#125;)&#125;).then((res1)=&gt;&#123; //Promise &#123;state: &quot;fulfilled&quot;, value: &quot;p2&quot;&#125; console.log(res1)&#125;) è¿™æ—¶å€™ç¬¬äºŒä¸ªthenæ‰“å°å‡ºæ¥çš„æ˜¯ä¸€ä¸ªpromiseå¯¹è±¡ï¼›æˆ‘ä»¬åº”è¯¥ç»§ç»­é€’å½’è°ƒç”¨resolvePromiseï¼ˆå‚è€ƒè§„èŒƒ3.3.1ï¼‰ï¼Œå› æ­¤ï¼Œæœ€ç»ˆresolvePromiseçš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829303132function resolvePromise(promise2, x, resolve, reject)&#123; if(promise2 === x)&#123; reject(new TypeError(&#x27;Chaining cycle&#x27;)) &#125; if(x &amp;&amp; typeof x === &#x27;object&#x27; || typeof x === &#x27;function&#x27;)&#123; let used; try &#123; let then = x.then if(typeof then === &#x27;function&#x27;)&#123; then.call(x, (y)=&gt;&#123; if (used) return; used = true resolvePromise(promise2, y, resolve, reject) &#125;, (r) =&gt;&#123; if (used) return; used = true reject(r) &#125;) &#125; else &#123; if (used) return; used = true resolve(x) &#125; &#125; catch(e)&#123; if (used) return; used = true reject(e) &#125; &#125; else &#123; resolve(x) &#125;&#125; åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„Promiseä¹Ÿèƒ½å¤Ÿå®Œæ•´çš„å®ç°é“¾å¼è°ƒç”¨äº†ï¼›ç„¶åæŠŠä»£ç ç”¨promises-aplus-testsæµ‹è¯•ä¸€ä¸‹ï¼Œå®Œç¾çš„é€šè¿‡äº†872é¡¹æµ‹è¯•ã€‚ å®Œæ•´Promiseä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132const PENDING = &#x27;pending&#x27;const FULFILLED = &#x27;fulfilled&#x27;const REJECTED = &#x27;rejected&#x27;function Promise(executor) &#123; var _this = this this.state = PENDING; //çŠ¶æ€ this.value = undefined; //æˆåŠŸç»“æœ this.reason = undefined; //å¤±è´¥åŸå›  this.onFulfilled = [] this.onRejected = [] function resolve(value) &#123; if(_this.state === PENDING)&#123; _this.state = FULFILLED _this.value = value _this.onFulfilled.forEach(fn =&gt; fn(value)) &#125; &#125; function reject(reason) &#123; if(_this.state === PENDING)&#123; _this.state = REJECTED _this.reason = reason _this.onRejected.forEach(fn =&gt; fn(reason)) &#125; &#125; try &#123; executor(resolve, reject) &#125; catch (error) &#123; reject(error) &#125;&#125;Promise.prototype.then = function (onFulfilled, onRejected) &#123; var _this = this onFulfilled = typeof onFulfilled === &#x27;function&#x27; ? onFulfilled : value =&gt; value onRejected = typeof onRejected === &#x27;function&#x27; ? onRejected : reason =&gt; &#123; throw reason &#125; var promise2 = new Promise((resolve, reject)=&gt;&#123; if(_this.state === FULFILLED)&#123; setTimeout(()=&gt;&#123; try &#123; let x = onFulfilled(_this.value) resolvePromise(promise2, x, resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;) &#125; else if(_this.state === REJECTED)&#123; setTimeout(()=&gt;&#123; try &#123; let x = onRejected(_this.reason) resolvePromise(promise2, x ,resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;) &#125; else if(_this.state === PENDING)&#123; _this.onFulfilled.push(()=&gt;&#123; setTimeout(()=&gt;&#123; try &#123; let x = onFulfilled(_this.value) resolvePromise(promise2, x, resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;) &#125;) _this.onRejected.push(()=&gt;&#123; setTimeout(()=&gt;&#123; try &#123; let x = onRejected(_this.reason) resolvePromise(promise2, x ,resolve, reject) &#125; catch (error) &#123; reject(error) &#125; &#125;) &#125;) &#125; &#125;) return promise2&#125;;function resolvePromise(promise2, x, resolve, reject)&#123; if(promise2 === x)&#123; reject(new TypeError(&#x27;Chaining cycle&#x27;)) &#125; if(x &amp;&amp; typeof x === &#x27;object&#x27; || typeof x === &#x27;function&#x27;)&#123; let used; try &#123; let then = x.then if(typeof then === &#x27;function&#x27;)&#123; then.call(x, (y)=&gt;&#123; if (used) return; used = true resolvePromise(promise2, y, resolve, reject) &#125;, (r) =&gt;&#123; if (used) return; used = true reject(r) &#125;) &#125; else &#123; if (used) return; used = true resolve(x) &#125; &#125; catch(e)&#123; if (used) return; used = true reject(e) &#125; &#125; else &#123; resolve(x) &#125;&#125;Promise.defer = Promise.deferred = function () &#123; let dfd = &#123;&#125;; dfd.promise = new Promise((resolve, reject) =&gt; &#123; dfd.resolve = resolve; dfd.reject = reject; &#125;); return dfd;&#125;module.exports = Promise; å‚è€ƒpromise/Aè§„èŒƒï¼ˆè‹±æ–‡ï¼‰promise/A+è§„èŒƒï¼ˆè‹±æ–‡ï¼‰promise/A+è§„èŒƒï¼ˆä¸­æ–‡ï¼‰","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Promise","slug":"Promise","permalink":"https://xieyufei.com/tags/Promise/"}]},{"title":"Promise A+ è§„èŒƒï¼ˆä¸­æ–‡ç¿»è¯‘ï¼‰","date":"2020-05-19T04:00:00.000Z","path":"2020/05/19/Promises-A-Plus.html","text":"è‹±æ–‡åŸæ–‡ï¼šPromise/A+å›¾çµè¯‘æ–‡ï¼šã€ç¿»è¯‘ã€‘Promises/A+è§„èŒƒ è¯‘è€…åºï¼šä¸€å¹´å‰æ›¾è¯‘è¿‡ Promise/A+ è§„èŒƒï¼Œé€‚æ—¶å®Œå…¨ä¸æ‡‚ Promise çš„æ€æƒ³ï¼Œçº¯ç²¹å°†ç¿»è¯‘çš„è¿‡ç¨‹å½“ä½œå­¦ä¹ ï¼Œæ—§æ–‡è¯‘ä¸‹æ¥è¯˜å±ˆè±ç‰™ï¼Œè¯»èµ·æ¥ååˆ†ä¸é¡ºç•…ã€‚è°çŸ¥è¿™æ ·ä¸€ç¯‡æ‹™è¯‘ï¼Œä¸€å¹´ä¹‹é—´ç«Ÿç„¶ç‚¹å‡»æ•°åƒï¼Œæˆä¸ºè°·æ­Œæœç´¢çš„å¤´æ¡ã€‚ä»Šæ—¥åœ¨ç†è§£ä¹‹åé‡è¯‘æ­¤è§„èŒƒï¼Œä»¥é£¨è¯»è€…ã€‚ ä¸€ä¸ªå¼€æ”¾ã€å¥å…¨ä¸”é€šç”¨çš„ JavaScript Promise æ ‡å‡†ã€‚ç”±å¼€å‘è€…åˆ¶å®šï¼Œä¾›å¼€å‘è€…å‚è€ƒã€‚ è¯‘æ–‡æœ¯è¯­ è§£å†³ï¼ˆfulfillï¼‰ï¼šæŒ‡ä¸€ä¸ª promise æˆåŠŸæ—¶è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œï¼Œå¦‚çŠ¶æ€çš„æ”¹å˜ã€å›è°ƒçš„æ‰§è¡Œã€‚è™½ç„¶è§„èŒƒä¸­ç”¨ fulfill æ¥è¡¨ç¤ºè§£å†³ï¼Œä½†åœ¨åä¸–çš„ promise å®ç°å¤šä»¥ resolve æ¥æŒ‡ä»£ä¹‹ã€‚ æ‹’ç»ï¼ˆrejectï¼‰ï¼šæŒ‡ä¸€ä¸ª promise å¤±è´¥æ—¶è¿›è¡Œçš„ä¸€ç³»åˆ—æ“ä½œã€‚ ç»ˆå€¼ï¼ˆeventual valueï¼‰ï¼šæ‰€è°“ç»ˆå€¼ï¼ŒæŒ‡çš„æ˜¯ promise è¢«è§£å†³æ—¶ä¼ é€’ç»™è§£å†³å›è°ƒçš„å€¼ï¼Œç”±äº promise æœ‰ä¸€æ¬¡æ€§çš„ç‰¹å¾ï¼Œå› æ­¤å½“è¿™ä¸ªå€¼è¢«ä¼ é€’æ—¶ï¼Œæ ‡å¿—ç€ promise ç­‰å¾…æ€çš„ç»“æŸï¼Œæ•…ç§°ä¹‹ç»ˆå€¼ï¼Œæœ‰æ—¶ä¹Ÿç›´æ¥ç®€ç§°ä¸ºå€¼ï¼ˆvalueï¼‰ã€‚ æ®å› ï¼ˆreasonï¼‰ï¼šä¹Ÿå°±æ˜¯æ‹’ç»åŸå› ï¼ŒæŒ‡åœ¨ promise è¢«æ‹’ç»æ—¶ä¼ é€’ç»™æ‹’ç»å›è°ƒçš„å€¼ã€‚ Promise è¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœï¼Œä¸ä¹‹è¿›è¡Œäº¤äº’çš„æ–¹å¼ä¸»è¦æ˜¯ then æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ³¨å†Œäº†ä¸¤ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºæ¥æ”¶ promise çš„ç»ˆå€¼æˆ–æœ¬ promise ä¸èƒ½æ‰§è¡Œçš„åŸå› ã€‚ æœ¬è§„èŒƒè¯¦ç»†åˆ—å‡ºäº† then æ–¹æ³•çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œæ‰€æœ‰éµå¾ª Promises/A+ è§„èŒƒå®ç°çš„ promise å‡å¯ä»¥æœ¬æ ‡å‡†ä½œä¸ºå‚ç…§åŸºç¡€æ¥å®æ–½ then æ–¹æ³•ã€‚å› è€Œæœ¬è§„èŒƒæ˜¯ååˆ†ç¨³å®šçš„ã€‚å°½ç®¡ Promise/A+ ç»„ç»‡æœ‰æ—¶å¯èƒ½ä¼šä¿®è®¢æœ¬è§„èŒƒï¼Œä½†ä¸»è¦æ˜¯ä¸ºäº†å¤„ç†ä¸€äº›ç‰¹æ®Šçš„è¾¹ç•Œæƒ…å†µï¼Œä¸”è¿™äº›æ”¹åŠ¨éƒ½æ˜¯å¾®å°ä¸”å‘ä¸‹å…¼å®¹çš„ã€‚å¦‚æœæˆ‘ä»¬è¦è¿›è¡Œå¤§è§„æ¨¡ä¸å…¼å®¹çš„æ›´æ–°ï¼Œæˆ‘ä»¬ä¸€å®šä¼šåœ¨äº‹å…ˆè¿›è¡Œè°¨æ…åœ°è€ƒè™‘ã€è¯¦å°½çš„æ¢è®¨å’Œä¸¥æ ¼çš„æµ‹è¯•ã€‚ ä»å†å²ä¸Šè¯´ï¼Œæœ¬è§„èŒƒå®é™…ä¸Šæ˜¯æŠŠä¹‹å‰ Promise/A è§„èŒƒ ä¸­çš„å»ºè®®æ˜ç¡®æˆä¸ºäº†è¡Œä¸ºæ ‡å‡†ï¼šæˆ‘ä»¬ä¸€æ–¹é¢æ‰©å±•äº†åŸæœ‰è§„èŒƒçº¦å®šä¿—æˆçš„è¡Œä¸ºï¼Œä¸€æ–¹é¢åˆ å‡äº†åŸè§„èŒƒçš„ä¸€äº›ç‰¹ä¾‹æƒ…å†µå’Œæœ‰é—®é¢˜çš„éƒ¨åˆ†ã€‚ æœ€åï¼Œæ ¸å¿ƒçš„ Promises/A+ è§„èŒƒä¸è®¾è®¡å¦‚ä½•åˆ›å»ºã€è§£å†³å’Œæ‹’ç» promiseï¼Œè€Œæ˜¯ä¸“æ³¨äºæä¾›ä¸€ä¸ªé€šç”¨çš„ then æ–¹æ³•ã€‚ä¸Šè¿°å¯¹äº promises çš„æ“ä½œæ–¹æ³•å°†æ¥åœ¨å…¶ä»–è§„èŒƒä¸­å¯èƒ½ä¼šæåŠã€‚ æœ¯è¯­ Promisepromise æ˜¯ä¸€ä¸ªæ‹¥æœ‰ then æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œå…¶è¡Œä¸ºç¬¦åˆæœ¬è§„èŒƒï¼› thenableæ˜¯ä¸€ä¸ªå®šä¹‰äº† then æ–¹æ³•çš„å¯¹è±¡æˆ–å‡½æ•°ï¼Œæ–‡ä¸­è¯‘ä½œâ€œæ‹¥æœ‰ then æ–¹æ³•â€ï¼› å€¼ï¼ˆvalueï¼‰æŒ‡ä»»ä½• JavaScript çš„åˆæ³•å€¼ï¼ˆåŒ…æ‹¬ undefined , thenable å’Œ promiseï¼‰ï¼› å¼‚å¸¸ï¼ˆexceptionï¼‰æ˜¯ä½¿ç”¨ throw è¯­å¥æŠ›å‡ºçš„ä¸€ä¸ªå€¼ã€‚ æ®å› ï¼ˆreasonï¼‰è¡¨ç¤ºä¸€ä¸ª promise çš„æ‹’ç»åŸå› ã€‚ è¦æ±‚ Promise çš„çŠ¶æ€ä¸€ä¸ª Promise çš„å½“å‰çŠ¶æ€å¿…é¡»ä¸ºä»¥ä¸‹ä¸‰ç§çŠ¶æ€ä¸­çš„ä¸€ç§ï¼šç­‰å¾…æ€ï¼ˆPendingï¼‰ã€æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰å’Œæ‹’ç»æ€ï¼ˆRejectedï¼‰ã€‚ ç­‰å¾…æ€ï¼ˆPendingï¼‰å¤„äºç­‰å¾…æ€æ—¶ï¼Œpromise éœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š å¯ä»¥è¿ç§»è‡³æ‰§è¡Œæ€æˆ–æ‹’ç»æ€ æ‰§è¡Œæ€ï¼ˆFulfilledï¼‰å¤„äºæ‰§è¡Œæ€æ—¶ï¼Œpromise éœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š ä¸èƒ½è¿ç§»è‡³å…¶ä»–ä»»ä½•çŠ¶æ€ å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¸å¯å˜çš„ç»ˆå€¼ æ‹’ç»æ€ï¼ˆRejectedï¼‰å¤„äºæ‹’ç»æ€æ—¶ï¼Œpromise éœ€æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š ä¸èƒ½è¿ç§»è‡³å…¶ä»–ä»»ä½•çŠ¶æ€ å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¸å¯å˜çš„æ®å›  è¿™é‡Œçš„ä¸å¯å˜æŒ‡çš„æ˜¯æ’ç­‰ï¼ˆå³å¯ç”¨ === åˆ¤æ–­ç›¸ç­‰ï¼‰ï¼Œè€Œä¸æ˜¯æ„å‘³ç€æ›´æ·±å±‚æ¬¡çš„ä¸å¯å˜ï¼ˆè¯‘è€…æ³¨ï¼š ç›–æŒ‡å½“ value æˆ– reason ä¸æ˜¯åŸºæœ¬å€¼æ—¶ï¼Œåªè¦æ±‚å…¶å¼•ç”¨åœ°å€ç›¸ç­‰ï¼Œä½†å±æ€§å€¼å¯è¢«æ›´æ”¹ï¼‰ã€‚ Then æ–¹æ³•ä¸€ä¸ª promise å¿…é¡»æä¾›ä¸€ä¸ª then æ–¹æ³•ä»¥è®¿é—®å…¶å½“å‰å€¼ã€ç»ˆå€¼å’Œæ®å› ã€‚ promise çš„ then æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼š 1promise.then(onFulfilled, onRejected) å‚æ•°å¯é€‰onFulfilled å’Œ onRejected éƒ½æ˜¯å¯é€‰å‚æ•°ã€‚ å¦‚æœ onFulfilled ä¸æ˜¯å‡½æ•°ï¼Œå…¶å¿…é¡»è¢«å¿½ç•¥ å¦‚æœ onRejected ä¸æ˜¯å‡½æ•°ï¼Œå…¶å¿…é¡»è¢«å¿½ç•¥ onFulfilled ç‰¹æ€§å¦‚æœ onFulfilled æ˜¯å‡½æ•°ï¼š å½“ promise æ‰§è¡Œç»“æŸåå…¶å¿…é¡»è¢«è°ƒç”¨ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸º promise çš„ç»ˆå€¼ åœ¨ promise æ‰§è¡Œç»“æŸå‰å…¶ä¸å¯è¢«è°ƒç”¨ å…¶è°ƒç”¨æ¬¡æ•°ä¸å¯è¶…è¿‡ä¸€æ¬¡ onRejected ç‰¹æ€§å¦‚æœ onRejected æ˜¯å‡½æ•°ï¼š å½“ promise è¢«æ‹’ç»æ‰§è¡Œåå…¶å¿…é¡»è¢«è°ƒç”¨ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•°ä¸º promise çš„æ®å›  åœ¨ promise è¢«æ‹’ç»æ‰§è¡Œå‰å…¶ä¸å¯è¢«è°ƒç”¨ å…¶è°ƒç”¨æ¬¡æ•°ä¸å¯è¶…è¿‡ä¸€æ¬¡ è°ƒç”¨æ—¶æœºonFulfilled å’Œ onRejected åªæœ‰åœ¨æ‰§è¡Œç¯å¢ƒå †æ ˆä»…åŒ…å«å¹³å°ä»£ç æ—¶æ‰å¯è¢«è°ƒç”¨[æ³¨1][1] è°ƒç”¨è¦æ±‚onFulfilled å’Œ onRejected å¿…é¡»è¢«ä½œä¸ºå‡½æ•°è°ƒç”¨ï¼ˆå³æ²¡æœ‰ this å€¼ï¼‰[æ³¨2][2] å¤šæ¬¡è°ƒç”¨then æ–¹æ³•å¯ä»¥è¢«åŒä¸€ä¸ª promise è°ƒç”¨å¤šæ¬¡ å½“ promise æˆåŠŸæ‰§è¡Œæ—¶ï¼Œæ‰€æœ‰ onFulfilled éœ€æŒ‰ç…§å…¶æ³¨å†Œé¡ºåºä¾æ¬¡å›è°ƒ å½“ promise è¢«æ‹’ç»æ‰§è¡Œæ—¶ï¼Œæ‰€æœ‰çš„ onRejected éœ€æŒ‰ç…§å…¶æ³¨å†Œé¡ºåºä¾æ¬¡å›è°ƒ è¿”å›then æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ª promise å¯¹è±¡ [æ³¨3][3] 1promise2 = promise1.then(onFulfilled, onRejected); å¦‚æœ onFulfilled æˆ–è€… onRejected è¿”å›ä¸€ä¸ªå€¼ x ï¼Œåˆ™è¿è¡Œä¸‹é¢çš„ Promise è§£å†³è¿‡ç¨‹ï¼š[[Resolve]](promise2, x) å¦‚æœ onFulfilled æˆ–è€… onRejected æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ e ï¼Œåˆ™ promise2 å¿…é¡»æ‹’ç»æ‰§è¡Œï¼Œå¹¶è¿”å›æ‹’å›  e å¦‚æœ onFulfilled ä¸æ˜¯å‡½æ•°ä¸” promise1 æˆåŠŸæ‰§è¡Œï¼Œ promise2 å¿…é¡»æˆåŠŸæ‰§è¡Œå¹¶è¿”å›ç›¸åŒçš„å€¼ å¦‚æœ onRejected ä¸æ˜¯å‡½æ•°ä¸” promise1 æ‹’ç»æ‰§è¡Œï¼Œ promise2 å¿…é¡»æ‹’ç»æ‰§è¡Œå¹¶è¿”å›ç›¸åŒçš„æ®å›  è¯‘è€…æ³¨ï¼š ç†è§£ä¸Šé¢çš„â€œè¿”å›â€éƒ¨åˆ†éå¸¸é‡è¦ï¼Œå³ï¼šä¸è®º promise1 è¢« reject è¿˜æ˜¯è¢« resolve æ—¶ promise2 éƒ½ä¼šè¢« resolveï¼Œåªæœ‰å‡ºç°å¼‚å¸¸æ—¶æ‰ä¼šè¢« rejectedã€‚ Promise è§£å†³è¿‡ç¨‹Promise è§£å†³è¿‡ç¨‹ æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ“ä½œï¼Œå…¶éœ€è¾“å…¥ä¸€ä¸ª promise å’Œä¸€ä¸ªå€¼ï¼Œæˆ‘ä»¬è¡¨ç¤ºä¸º [[Resolve]](promise, x)ï¼Œå¦‚æœ x æœ‰ then æ–¹æ³•ä¸”çœ‹ä¸Šå»åƒä¸€ä¸ª Promise ï¼Œè§£å†³ç¨‹åºå³å°è¯•ä½¿ promise æ¥å— x çš„çŠ¶æ€ï¼›å¦åˆ™å…¶ç”¨ x çš„å€¼æ¥æ‰§è¡Œ promise ã€‚ è¿™ç§ thenable çš„ç‰¹æ€§ä½¿å¾— Promise çš„å®ç°æ›´å…·æœ‰é€šç”¨æ€§ï¼šåªè¦å…¶æš´éœ²å‡ºä¸€ä¸ªéµå¾ª Promise/A+ åè®®çš„ then æ–¹æ³•å³å¯ï¼›è¿™åŒæ—¶ä¹Ÿä½¿éµå¾ª Promise/A+ è§„èŒƒçš„å®ç°å¯ä»¥ä¸é‚£äº›ä¸å¤ªè§„èŒƒä½†å¯ç”¨çš„å®ç°èƒ½è‰¯å¥½å…±å­˜ã€‚ è¿è¡Œ [[Resolve]](promise, x) éœ€éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š x ä¸ promise ç›¸ç­‰å¦‚æœ promise å’Œ x æŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œä»¥ TypeError ä¸ºæ®å› æ‹’ç»æ‰§è¡Œ promise x ä¸º Promiseå¦‚æœ x ä¸º Promise ï¼Œåˆ™ä½¿ promise æ¥å— x çš„çŠ¶æ€ [æ³¨4][4]ï¼š å¦‚æœ x å¤„äºç­‰å¾…æ€ï¼Œ promise éœ€ä¿æŒä¸ºç­‰å¾…æ€ç›´è‡³ x è¢«æ‰§è¡Œæˆ–æ‹’ç» å¦‚æœ x å¤„äºæ‰§è¡Œæ€ï¼Œç”¨ç›¸åŒçš„å€¼æ‰§è¡Œ promise å¦‚æœ x å¤„äºæ‹’ç»æ€ï¼Œç”¨ç›¸åŒçš„æ®å› æ‹’ç» promise x ä¸ºå¯¹è±¡æˆ–å‡½æ•°å¦‚æœ x ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°ï¼š æŠŠ x.then èµ‹å€¼ç»™ then [æ³¨5][5] å¦‚æœå– x.then çš„å€¼æ—¶æŠ›å‡ºé”™è¯¯ e ï¼Œåˆ™ä»¥ e ä¸ºæ®å› æ‹’ç» promise å¦‚æœ then æ˜¯å‡½æ•°ï¼Œå°† x ä½œä¸ºå‡½æ•°çš„ä½œç”¨åŸŸ this è°ƒç”¨ä¹‹ã€‚ä¼ é€’ä¸¤ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å«åš resolvePromise ï¼Œç¬¬äºŒä¸ªå‚æ•°å«åš rejectPromise: å¦‚æœ resolvePromise ä»¥å€¼ y ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™è¿è¡Œ [[Resolve]](promise, y) å¦‚æœ rejectPromise ä»¥æ®å›  r ä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œåˆ™ä»¥æ®å›  r æ‹’ç» promise å¦‚æœ resolvePromise å’Œ rejectPromise å‡è¢«è°ƒç”¨ï¼Œæˆ–è€…è¢«åŒä¸€å‚æ•°è°ƒç”¨äº†å¤šæ¬¡ï¼Œåˆ™ä¼˜å…ˆé‡‡ç”¨é¦–æ¬¡è°ƒç”¨å¹¶å¿½ç•¥å‰©ä¸‹çš„è°ƒç”¨ å¦‚æœè°ƒç”¨ then æ–¹æ³•æŠ›å‡ºäº†å¼‚å¸¸ eï¼š å¦‚æœ resolvePromise æˆ– rejectPromise å·²ç»è¢«è°ƒç”¨ï¼Œåˆ™å¿½ç•¥ä¹‹ å¦åˆ™ä»¥ e ä¸ºæ®å› æ‹’ç» promise å¦‚æœ then ä¸æ˜¯å‡½æ•°ï¼Œä»¥ x ä¸ºå‚æ•°æ‰§è¡Œ promise å¦‚æœ x ä¸ä¸ºå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œä»¥ x ä¸ºå‚æ•°æ‰§è¡Œ promise å¦‚æœä¸€ä¸ª promise è¢«ä¸€ä¸ªå¾ªç¯çš„ thenable é“¾ä¸­çš„å¯¹è±¡è§£å†³ï¼Œè€Œ [[Resolve]](promise, thenable) çš„é€’å½’æ€§è´¨åˆä½¿å¾—å…¶è¢«å†æ¬¡è°ƒç”¨ï¼Œæ ¹æ®ä¸Šè¿°çš„ç®—æ³•å°†ä¼šé™·å…¥æ— é™é€’å½’ä¹‹ä¸­ã€‚ç®—æ³•è™½ä¸å¼ºåˆ¶è¦æ±‚ï¼Œä½†ä¹Ÿé¼“åŠ±æ–½è€…æ£€æµ‹è¿™æ ·çš„é€’å½’æ˜¯å¦å­˜åœ¨ï¼Œè‹¥æ£€æµ‹åˆ°å­˜åœ¨åˆ™ä»¥ä¸€ä¸ªå¯è¯†åˆ«çš„ TypeError ä¸ºæ®å› æ¥æ‹’ç» promise [æ³¨6][6]ã€‚ æ³¨é‡Š æ³¨1 è¿™é‡Œçš„å¹³å°ä»£ç æŒ‡çš„æ˜¯å¼•æ“ã€ç¯å¢ƒä»¥åŠ promise çš„å®æ–½ä»£ç ã€‚å®è·µä¸­è¦ç¡®ä¿ onFulfilled å’Œ onRejected æ–¹æ³•å¼‚æ­¥æ‰§è¡Œï¼Œä¸”åº”è¯¥åœ¨ then æ–¹æ³•è¢«è°ƒç”¨çš„é‚£ä¸€è½®äº‹ä»¶å¾ªç¯ä¹‹åçš„æ–°æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚è¿™ä¸ªäº‹ä»¶é˜Ÿåˆ—å¯ä»¥é‡‡ç”¨â€œå®ä»»åŠ¡ï¼ˆmacro-taskï¼‰â€æœºåˆ¶æˆ–è€…â€œå¾®ä»»åŠ¡ï¼ˆmicro-taskï¼‰â€æœºåˆ¶æ¥å®ç°ã€‚ç”±äº promise çš„å®æ–½ä»£ç æœ¬èº«å°±æ˜¯å¹³å°ä»£ç ï¼ˆè¯‘è€…æ³¨ï¼š å³éƒ½æ˜¯ JavaScriptï¼‰ï¼Œæ•…ä»£ç è‡ªèº«åœ¨å¤„ç†åœ¨å¤„ç†ç¨‹åºæ—¶å¯èƒ½å·²ç»åŒ…å«ä¸€ä¸ªä»»åŠ¡è°ƒåº¦é˜Ÿåˆ—æˆ–[ã€è·³æ¿ã€]ã€‚ è¯‘è€…æ³¨ï¼š è¿™é‡ŒæåŠäº† macrotask å’Œ microtask ä¸¤ä¸ªæ¦‚å¿µï¼Œè¿™è¡¨ç¤ºå¼‚æ­¥ä»»åŠ¡çš„ä¸¤ç§åˆ†ç±»ã€‚åœ¨æŒ‚èµ·ä»»åŠ¡æ—¶ï¼ŒJS å¼•æ“ä¼šå°†æ‰€æœ‰ä»»åŠ¡æŒ‰ç…§ç±»åˆ«åˆ†åˆ°è¿™ä¸¤ä¸ªé˜Ÿåˆ—ä¸­ï¼Œé¦–å…ˆåœ¨ macrotask çš„é˜Ÿåˆ—ï¼ˆè¿™ä¸ªé˜Ÿåˆ—ä¹Ÿè¢«å«åš task queueï¼‰ä¸­å–å‡ºç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œæ‰§è¡Œå®Œæ¯•åå–å‡º microtask é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡é¡ºåºæ‰§è¡Œï¼›ä¹‹åå†å– macrotask ä»»åŠ¡ï¼Œå‘¨è€Œå¤å§‹ï¼Œç›´è‡³ä¸¤ä¸ªé˜Ÿåˆ—çš„ä»»åŠ¡éƒ½å–å®Œã€‚ ä¸¤ä¸ªç±»åˆ«çš„å…·ä½“åˆ†ç±»å¦‚ä¸‹ï¼š macro-task: scriptï¼ˆæ•´ä½“ä»£ç ï¼‰, setTimeout, setInterval, setImmediate, I/O, UI rendering micro-task: process.nextTick, Promisesï¼ˆè¿™é‡ŒæŒ‡æµè§ˆå™¨å®ç°çš„åŸç”Ÿ Promiseï¼‰, Object.observe, MutationObserver è¯¦è§ stackoverflow è§£ç­” æ³¨2 ä¹Ÿå°±æ˜¯è¯´åœ¨ ä¸¥æ ¼æ¨¡å¼ï¼ˆstrictï¼‰ ä¸­ï¼Œå‡½æ•° this çš„å€¼ä¸º undefined ï¼›åœ¨éä¸¥æ ¼æ¨¡å¼ä¸­å…¶ä¸ºå…¨å±€å¯¹è±¡ã€‚ æ³¨3 ä»£ç å®ç°åœ¨æ»¡è¶³æ‰€æœ‰è¦æ±‚çš„æƒ…å†µä¸‹å¯ä»¥å…è®¸ promise2 === promise1 ã€‚æ¯ä¸ªå®ç°éƒ½è¦æ–‡æ¡£è¯´æ˜å…¶æ˜¯å¦å…è®¸ä»¥åŠåœ¨ä½•ç§æ¡ä»¶ä¸‹å…è®¸ promise2 === promise1 ã€‚ æ³¨4 æ€»ä½“æ¥è¯´ï¼Œå¦‚æœ x ç¬¦åˆå½“å‰å®ç°ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºå®ƒæ˜¯çœŸæ­£çš„ promise ã€‚è¿™ä¸€è§„åˆ™å…è®¸é‚£äº›ç‰¹ä¾‹å®ç°æ¥å—ç¬¦åˆå·²çŸ¥è¦æ±‚çš„ Promises çŠ¶æ€ã€‚ æ³¨5 è¿™æ­¥æˆ‘ä»¬å…ˆæ˜¯å­˜å‚¨äº†ä¸€ä¸ªæŒ‡å‘ x.then çš„å¼•ç”¨ï¼Œç„¶åæµ‹è¯•å¹¶è°ƒç”¨è¯¥å¼•ç”¨ï¼Œä»¥é¿å…å¤šæ¬¡è®¿é—® x.then å±æ€§ã€‚è¿™ç§é¢„é˜²æªæ–½ç¡®ä¿äº†è¯¥å±æ€§çš„ä¸€è‡´æ€§ï¼Œå› ä¸ºå…¶å€¼å¯èƒ½åœ¨æ£€ç´¢è°ƒç”¨æ—¶è¢«æ”¹å˜ã€‚ æ³¨6 å®ç°ä¸åº”è¯¥å¯¹ thenable é“¾çš„æ·±åº¦è®¾é™ï¼Œå¹¶å‡å®šè¶…å‡ºæœ¬é™åˆ¶çš„é€’å½’å°±æ˜¯æ— é™å¾ªç¯ã€‚åªæœ‰çœŸæ­£çš„å¾ªç¯é€’å½’æ‰åº”èƒ½å¯¼è‡´ TypeError å¼‚å¸¸ï¼›å¦‚æœä¸€æ¡æ— é™é•¿çš„é“¾ä¸Š thenable å‡ä¸ç›¸åŒï¼Œé‚£ä¹ˆé€’å½’ä¸‹å»æ°¸è¿œæ˜¯æ­£ç¡®çš„è¡Œä¸ºã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Promise","slug":"Promise","permalink":"https://xieyufei.com/tags/Promise/"}]},{"title":"Vueä¸­$nextTickæºç è§£æ","date":"2020-04-23T03:00:00.000Z","path":"2020/04/23/Vue-nextTick.html","text":"åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°nextTickï¼Œç®€å•çš„ç†è§£å°±æ˜¯å®ƒå°±æ˜¯ä¸€ä¸ªsetTimeoutå‡½æ•°ï¼Œå°†å‡½æ•°æ”¾åˆ°å¼‚æ­¥åå»å¤„ç†ï¼›å°†å®ƒæ›¿æ¢æˆsetTimeoutå¥½åƒä¹Ÿèƒ½è·‘èµ·æ¥ï¼Œä½†å®ƒä»…ä»…è¿™ä¹ˆç®€å•å—ï¼Ÿé‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ç›´æ¥ç”¨setTimeoutå‘¢ï¼Ÿè®©æˆ‘ä»¬æ·±å…¥å‰–æä¸€ä¸‹ã€‚ å‘ç°é—®é¢˜ è®°å¾—ä¹‹å‰æœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œå°±æ˜¯æ ¹æ®æ–‡å­—çš„è¡Œæ•°æ¥æ˜¾ç¤ºå±•å¼€æ›´å¤šçš„ä¸€ä¸ªæŒ‰é’®ï¼Œå› æ­¤æˆ‘ä»¬åœ¨Vueä¸­ç»™æ•°æ®èµ‹å€¼ä¹‹åéœ€è¦è·å–æ–‡å­—é«˜åº¦ã€‚ 1234567891011121314151617&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;msg&quot;&gt; &#123;&#123;msg&#125;&#125; &lt;/div&gt;&lt;/div&gt;new Vue(&#123; el: &#x27;#app&#x27;, data: function()&#123; return &#123; msg: &#x27;&#x27; &#125; &#125;, mounted()&#123; this.msg = &#x27;æˆ‘æ˜¯æµ‹è¯•æ–‡å­—&#x27; console.log(document.querySelector(&#x27;.msg&#x27;).offsetHeight) //0 &#125;&#125;) è¿™æ—¶ä¸ç®¡æ€ä¹ˆè·å–ï¼Œæ–‡å­—çš„Divé«˜åº¦éƒ½æ˜¯0ï¼›ä½†æ˜¯ç›´æ¥è·å–å´æ˜¯æœ‰å€¼ï¼š åŒæ ·çš„æƒ…å†µä¹Ÿå‘ç”Ÿåœ¨ç»™å­ç»„ä»¶ä¼ å‚ä¸Šï¼›æˆ‘ä»¬ç»™å­ç»„ä»¶ä¼ å‚æ•°åï¼Œåœ¨å­ç»„ä»¶ä¸­è°ƒç”¨å‡½æ•°æŸ¥çœ‹å‚æ•°ã€‚ 1234567891011121314151617181920212223242526&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;msg&quot;&gt; &lt;form-report ref=&quot;child&quot; :name=&quot;childName&quot;&gt;&lt;/form-report&gt; &lt;/div&gt;&lt;/div&gt;Vue.component(&#x27;form-report&#x27;, &#123; props: [&#x27;name&#x27;], methods: &#123; showName()&#123; console.log(&#x27;å­ç»„ä»¶nameï¼š&#x27;+this.name) &#125; &#125;, template: &#x27;&lt;div&gt;&#123;&#123;name&#125;&#125;&lt;/div&gt;&#x27;&#125;)new Vue(&#123; el: &#x27;#app&#x27;, data: function()&#123; return &#123; childName: &#x27;&#x27;, &#125; &#125;, mounted()&#123; this.childName = &#x27;æˆ‘æ˜¯å­ç»„ä»¶åå­—&#x27; this.$refs.child.showName() &#125;&#125;) è™½ç„¶é¡µé¢ä¸Šå±•ç¤ºäº†å­ç»„ä»¶çš„nameï¼Œä½†æ˜¯æ‰“å°å‡ºæ¥å´æ˜¯ç©ºå€¼ï¼š å¼‚æ­¥æ›´æ–° æˆ‘ä»¬å‘ç°ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜çš„å‘ç”Ÿï¼Œä¸ç®¡å­ç»„ä»¶è¿˜æ˜¯çˆ¶ç»„ä»¶ï¼Œéƒ½æ˜¯åœ¨ç»™dataä¸­èµ‹å€¼åç«‹é©¬å»æŸ¥çœ‹æ•°æ®å¯¼è‡´çš„ã€‚ç”±äºâ€œæŸ¥çœ‹æ•°æ®â€è¿™ä¸ªåŠ¨ä½œæ˜¯åŒæ­¥æ“ä½œçš„ï¼Œè€Œä¸”éƒ½æ˜¯åœ¨èµ‹å€¼ä¹‹åï¼›å› æ­¤æˆ‘ä»¬çŒœæµ‹ä¸€ä¸‹ï¼Œç»™æ•°æ®èµ‹å€¼æ“ä½œæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œå¹¶æ²¡æœ‰é©¬ä¸Šæ‰§è¡Œï¼ŒVueå®˜ç½‘å¯¹æ•°æ®æ“ä½œæ˜¯è¿™ä¹ˆæè¿°çš„ï¼š å¯èƒ½ä½ è¿˜æ²¡æœ‰æ³¨æ„åˆ°ï¼ŒVue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚ ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨è®¾ç½®this.msg = &#39;some thing&#39;çš„æ—¶å€™ï¼ŒVueå¹¶æ²¡æœ‰é©¬ä¸Šå»æ›´æ–°DOMæ•°æ®ï¼Œè€Œæ˜¯å°†è¿™ä¸ªæ“ä½œæ”¾è¿›ä¸€ä¸ªé˜Ÿåˆ—ä¸­ï¼›å¦‚æœæˆ‘ä»¬é‡å¤æ‰§è¡Œçš„è¯ï¼Œé˜Ÿåˆ—è¿˜ä¼šè¿›è¡Œå»é‡æ“ä½œï¼›ç­‰å¾…åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„æ‰€æœ‰æ•°æ®å˜åŒ–å®Œæˆä¹‹åï¼Œä¼šå°†é˜Ÿåˆ—ä¸­çš„äº‹ä»¶æ‹¿å‡ºæ¥å¤„ç†ã€‚ è¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†æå‡æ€§èƒ½ï¼Œå› ä¸ºå¦‚æœåœ¨ä¸»çº¿ç¨‹ä¸­æ›´æ–°DOMï¼Œå¾ªç¯100æ¬¡å°±è¦æ›´æ–°100æ¬¡DOMï¼›ä½†æ˜¯å¦‚æœç­‰äº‹ä»¶å¾ªç¯å®Œæˆä¹‹åæ›´æ–°DOMï¼Œåªéœ€è¦æ›´æ–°1æ¬¡ã€‚è¿˜ä¸äº†è§£äº‹ä»¶å¾ªç¯çš„ç«¥é‹ï¼Œå¯ä»¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ä»ä¸€é“é¢è¯•é¢˜æ¥ç†è§£JSäº‹ä»¶å¾ªç¯ ä¸ºäº†åœ¨æ•°æ®æ›´æ–°æ“ä½œä¹‹åæ“ä½œDOMï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨Vue.nextTick(callback)ï¼›è¿™æ ·å›è°ƒå‡½æ•°ä¼šåœ¨DOMæ›´æ–°å®Œæˆåè¢«è°ƒç”¨ï¼Œå°±å¯ä»¥æ‹¿åˆ°æœ€æ–°çš„DOMå…ƒç´ äº†ã€‚ 123456789101112//ç¬¬ä¸€ä¸ªdemothis.msg = &#x27;æˆ‘æ˜¯æµ‹è¯•æ–‡å­—&#x27;this.$nextTick(()=&gt;&#123; //20 console.log(document.querySelector(&#x27;.msg&#x27;).offsetHeight)&#125;)//ç¬¬äºŒä¸ªdemothis.childName = &#x27;æˆ‘æ˜¯å­ç»„ä»¶åå­—&#x27;this.$nextTick(()=&gt;&#123; //å­ç»„ä»¶nameï¼šæˆ‘æ˜¯å­ç»„ä»¶åå­— this.$refs.child.showName()&#125;) nextTickæºç åˆ†æ äº†è§£äº†nextTickçš„ç”¨æ³•å’ŒåŸç†ä¹‹åï¼Œæˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹Vueæ˜¯æ€ä¹ˆæ¥å®ç°è¿™æ³¢â€œæ“ä½œâ€çš„ã€‚ VueæŠŠnextTickçš„æºç å•ç‹¬æŠ½åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œ/src/core/util/next-tick.jsï¼Œåˆ æ‰æ³¨é‡Šä¹Ÿå°±å¤§æ¦‚å…­ä¸ƒåè¡Œçš„æ ·å­ï¼Œè®©æˆ‘ä»¬é€æ®µæ¥åˆ†æã€‚ 12345678910111213141516171819202122232425262728const callbacks = []let pending = falselet timerFuncexport function nextTick (cb?: Function, ctx?: Object) &#123; let _resolve callbacks.push(() =&gt; &#123; if (cb) &#123; try &#123; cb.call(ctx) &#125; catch (e) &#123; handleError(e, ctx, &#x27;nextTick&#x27;) &#125; &#125; else if (_resolve) &#123; _resolve(ctx) &#125; &#125;) if (!pending) &#123; pending = true timerFunc() &#125; // $flow-disable-line if (!cb &amp;&amp; typeof Promise !== &#x27;undefined&#x27;) &#123; return new Promise(resolve =&gt; &#123; _resolve = resolve &#125;) &#125;&#125; æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°nextTickè¿™ä¸ªå‡½æ•°å®šä¹‰çš„åœ°æ–¹ï¼Œçœ‹çœ‹å®ƒå…·ä½“åšäº†ä»€ä¹ˆæ“ä½œï¼›çœ‹åˆ°å®ƒåœ¨å¤–å±‚å®šä¹‰äº†ä¸‰ä¸ªå˜é‡ï¼Œæœ‰ä¸€ä¸ªå˜é‡çœ‹åå­—å°±å¾ˆç†Ÿæ‚‰ï¼šcallbacksï¼Œå°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¯´çš„é˜Ÿåˆ—ï¼›åœ¨nextTickçš„å¤–å±‚å®šä¹‰å˜é‡å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡è°ƒç”¨$nextTickçš„è¿‡ç¨‹å…¶å®å°±æ˜¯åœ¨å‘callbacksæ–°å¢å›è°ƒå‡½æ•°çš„è¿‡ç¨‹ã€‚ callbacksæ–°å¢å›è°ƒå‡½æ•°ååˆæ‰§è¡Œäº†timerFuncå‡½æ•°ï¼Œpendingç”¨æ¥æ ‡è¯†åŒä¸€ä¸ªæ—¶é—´åªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚é‚£ä¹ˆè¿™ä¸ªtimerFuncå‡½æ•°æ˜¯åšä»€ä¹ˆç”¨çš„å‘¢ï¼Œæˆ‘ä»¬ç»§ç»­æ¥çœ‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536export let isUsingMicroTask = falseif (typeof Promise !== &#x27;undefined&#x27; &amp;&amp; isNative(Promise)) &#123; //åˆ¤æ–­1ï¼šæ˜¯å¦åŸç”Ÿæ”¯æŒPromise const p = Promise.resolve() timerFunc = () =&gt; &#123; p.then(flushCallbacks) if (isIOS) setTimeout(noop) &#125; isUsingMicroTask = true&#125; else if (!isIE &amp;&amp; typeof MutationObserver !== &#x27;undefined&#x27; &amp;&amp; ( isNative(MutationObserver) || MutationObserver.toString() === &#x27;[object MutationObserverConstructor]&#x27;)) &#123; //åˆ¤æ–­2ï¼šæ˜¯å¦åŸç”Ÿæ”¯æŒMutationObserver let counter = 1 const observer = new MutationObserver(flushCallbacks) const textNode = document.createTextNode(String(counter)) observer.observe(textNode, &#123; characterData: true &#125;) timerFunc = () =&gt; &#123; counter = (counter + 1) % 2 textNode.data = String(counter) &#125; isUsingMicroTask = true&#125; else if (typeof setImmediate !== &#x27;undefined&#x27; &amp;&amp; isNative(setImmediate)) &#123; //åˆ¤æ–­3ï¼šæ˜¯å¦åŸç”Ÿæ”¯æŒsetImmediate timerFunc = () =&gt; &#123; setImmediate(flushCallbacks) &#125;&#125; else &#123; //åˆ¤æ–­4ï¼šä¸Šé¢éƒ½ä¸è¡Œï¼Œç›´æ¥ç”¨setTimeout timerFunc = () =&gt; &#123; setTimeout(flushCallbacks, 0) &#125;&#125; è¿™é‡Œå‡ºç°äº†å¥½å‡ ä¸ªisNativeå‡½æ•°ï¼Œè¿™æ˜¯ç”¨æ¥åˆ¤æ–­æ‰€ä¼ å‚æ•°æ˜¯å¦åœ¨å½“å‰ç¯å¢ƒåŸç”Ÿå°±æ”¯æŒï¼›ä¾‹å¦‚æŸäº›æµè§ˆå™¨ä¸æ”¯æŒPromiseï¼Œè™½ç„¶æˆ‘ä»¬ä½¿ç”¨äº†å«ç‰‡(polify)ï¼Œä½†æ˜¯isNative(Promise)è¿˜æ˜¯ä¼šè¿”å›falseã€‚ å¯ä»¥çœ‹å‡ºè¿™è¾¹ä»£ç å…¶å®æ˜¯åšäº†å››ä¸ªåˆ¤æ–­ï¼Œå¯¹å½“å‰ç¯å¢ƒè¿›è¡Œä¸æ–­çš„é™çº§å¤„ç†ï¼Œå°è¯•ä½¿ç”¨åŸç”Ÿçš„Promise.thenã€MutationObserverå’ŒsetImmediateï¼Œä¸Šè¿°ä¸‰ä¸ªéƒ½ä¸æ”¯æŒæœ€åä½¿ç”¨setTimeoutï¼›é™çº§å¤„ç†çš„ç›®çš„éƒ½æ˜¯å°†flushCallbackså‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡(åˆ¤æ–­1å’Œåˆ¤æ–­2)æˆ–è€…å®ä»»åŠ¡(åˆ¤æ–­3å’Œåˆ¤æ–­4)ï¼Œç­‰å¾…ä¸‹ä¸€æ¬¡äº‹ä»¶å¾ªç¯æ—¶æ¥æ‰§è¡Œã€‚MutationObserveræ˜¯Html5çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œç”¨æ¥ç›‘å¬ç›®æ ‡DOMç»“æ„æ˜¯å¦æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯ä»£ç ä¸­æ–°å»ºçš„textNodeï¼›å¦‚æœæ”¹å˜äº†å°±æ‰§è¡ŒMutationObserveræ„é€ å‡½æ•°ä¸­çš„å›è°ƒå‡½æ•°ï¼Œä¸è¿‡æ˜¯å®ƒæ˜¯åœ¨å¾®ä»»åŠ¡ä¸­æ‰§è¡Œçš„ã€‚ é‚£ä¹ˆæœ€ç»ˆæˆ‘ä»¬é¡ºè—¤æ‘¸ç“œæ‰¾åˆ°äº†æœ€ç»ˆçš„å¤§bossï¼šflushCallbacksï¼›nextTickä¸é¡¾ä¸€åˆ‡çš„è¦æŠŠå®ƒæ”¾å…¥å¾®ä»»åŠ¡æˆ–è€…å®ä»»åŠ¡ä¸­å»æ‰§è¡Œï¼Œå®ƒç©¶ç«Ÿæ˜¯ä½•æ–¹ç¥åœ£å‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥ä¸€ç¹å®ƒçš„çœŸå®¹ï¼š 12345678function flushCallbacks () &#123; pending = false const copies = callbacks.slice(0) callbacks.length = 0 for (let i = 0; i &lt; copies.length; i++) &#123; copies[i]() &#125;&#125; æœ¬æ¥ä»¥ä¸ºæœ‰å¤šå¤æ‚çš„flushCallbacksï¼Œå±…ç„¶ä¸è¿‡çŸ­çŸ­çš„8è¡Œã€‚å®ƒæ‰€åšçš„äº‹æƒ…ä¹Ÿéå¸¸çš„ç®€å•ï¼ŒæŠŠcallbacksæ•°ç»„å¤åˆ¶ä¸€ä»½ï¼Œç„¶åæŠŠcallbacksç½®ä¸ºç©ºï¼Œæœ€åæŠŠå¤åˆ¶å‡ºæ¥çš„æ•°ç»„ä¸­çš„æ¯ä¸ªå‡½æ•°ä¾æ¬¡æ‰§è¡Œä¸€éï¼›æ‰€ä»¥å®ƒçš„ä½œç”¨ä»…ä»…æ˜¯ç”¨æ¥æ‰§è¡Œcallbacksä¸­çš„å›è°ƒå‡½æ•°ã€‚ æ€»ç»“ åˆ°è¿™é‡Œï¼Œæ•´ä½“nextTickçš„ä»£ç éƒ½åˆ†æå®Œæ¯•äº†ï¼Œæ€»ç»“ä¸€ä¸‹å®ƒçš„æµç¨‹å°±æ˜¯ï¼š æŠŠå›è°ƒå‡½æ•°æ”¾å…¥callbacksç­‰å¾…æ‰§è¡Œ å°†æ‰§è¡Œå‡½æ•°æ”¾åˆ°å¾®ä»»åŠ¡æˆ–è€…å®ä»»åŠ¡ä¸­ äº‹ä»¶å¾ªç¯åˆ°äº†å¾®ä»»åŠ¡æˆ–è€…å®ä»»åŠ¡ï¼Œæ‰§è¡Œå‡½æ•°ä¾æ¬¡æ‰§è¡Œcallbacksä¸­çš„å›è°ƒ å†å›åˆ°æˆ‘ä»¬å¼€å¤´è¯´çš„setTimeoutï¼Œå¯ä»¥çœ‹å‡ºæ¥nextTickæ˜¯å¯¹setTimeoutè¿›è¡Œäº†å¤šç§å…¼å®¹æ€§çš„å¤„ç†ï¼Œå®½æ³›çš„ä¹Ÿå¯ä»¥ç†è§£ä¸ºå°†å›è°ƒå‡½æ•°æ”¾å…¥setTimeoutä¸­æ‰§è¡Œï¼›ä¸è¿‡nextTickä¼˜å…ˆæ”¾å…¥å¾®ä»»åŠ¡æ‰§è¡Œï¼Œè€ŒsetTimeoutæ˜¯å®ä»»åŠ¡ï¼Œå› æ­¤nextTickä¸€èˆ¬æƒ…å†µä¸‹æ€»æ˜¯å…ˆäºsetTimeoutæ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­å°è¯•ä¸€ä¸‹ï¼š 12345678910setTimeout(()=&gt;&#123; console.log(1)&#125;, 0)this.$nextTick(()=&gt;&#123; console.log(2)&#125;)this.$nextTick(()=&gt;&#123; console.log(3)&#125;)//è¿è¡Œç»“æœ 2 3 1 æœ€åéªŒè¯çŒœæƒ³ï¼Œå½“å‰å®ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œä¼˜å…ˆæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡ï¼Œæœ€åå†æ‰§è¡Œå®ä»»åŠ¡ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"}]},{"title":"ä¸€æ–‡è¯»æ‡‚JSä¸­ç±»ã€åŸå‹å’Œç»§æ‰¿","date":"2020-04-10T04:12:12.000Z","path":"2020/04/10/Js-Class-Inherit.html","text":"å¾ˆå¤šå‰ç«¯å°ä¼™ä¼´ï¼ŒåŒ…æ‹¬æˆ‘è‡ªå·±åœ¨å¼€å§‹å­¦ä¹ JSæ—¶å¯¹__proto__å’Œptototypeè¿™ä¸¤ä¸ªæ¦‚å¿µæ—¶éƒ½æ˜¯ä¸€è„¸æ‡µé€¼ï¼Œé¢è¯•æ—¶é‡åˆ°åŸå‹é“¾çš„é—®é¢˜æ€»æ˜¯ç‘Ÿç‘Ÿå‘æŠ–ï¼›ä¸è¿‡çœŸæ­£çš„å‹‡å£«æ•¢äºç›´é¢éš¾é¢˜ï¼Œç»è¿‡å¯¹åŸå‹é“¾ä¸æ–­çš„æ¢ç´¢ï¼Œæœ¬æ–‡å¯¹JSä¸­ç±»å’ŒåŸå‹çš„æ¦‚å¿µè¿›è¡Œäº†æ·±å…¥çš„è®²è§£ï¼ŒåŒæ—¶ä»åŸå‹æ–¹é¢æ¥äº†è§£JSä¸­ç»§æ‰¿æ˜¯ä»€ä¹ˆã€‚ æ„é€ å‡½æ•°å’Œå¯¹è±¡ é¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œåœ¨å…¶ä»–è¯­è¨€ä¸­æ˜¯æ€ä¹ˆæ¥å®šä¹‰ç±»çš„ã€‚åœ¨JAVAä¸­ç±»å¯ä»¥çœ‹å‡ºæ˜¯åˆ›å»ºå¯¹è±¡çš„æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å®šä¹‰ç±»ï¼š 1234567891011public class Person&#123; String breed; int age; String color; void barking()&#123; &#125; void hungry()&#123; &#125; void sleeping()&#123; &#125;&#125; ä½†æ˜¯ES6ä¹‹å‰éƒ½æ²¡æœ‰classï¼Œé‚£ä¹ˆJSæ€ä¹ˆå®šä¹‰ç±»å‘¢ï¼Ÿåœ¨JSä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°ï¼ˆå³JAVAä¸­çš„ç±»ï¼‰æ¥åˆ›å»ºå¯¹è±¡ã€‚æ‰€è°“æ„é€ å‡½æ•°ï¼Œå°±æ˜¯æä¾›äº†ä¸€ä¸ªç”Ÿæˆå¯¹è±¡çš„æ¨¡æ¿å¹¶æè¿°å¯¹è±¡çš„åŸºæœ¬ç»“æ„çš„å‡½æ•°ã€‚ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå¯ä»¥ç”Ÿæˆå¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ç›¸åŒçš„ç»“æ„ã€‚æ€»çš„æ¥è¯´ï¼Œæ„é€ å‡½æ•°å°±æ˜¯å¯¹è±¡çš„æ¨¡æ¿ï¼Œå¯¹è±¡å°±æ˜¯æ„é€ å‡½æ•°çš„å®ä¾‹ã€‚ 12345678910111213// Personç±»function Person(name) &#123; // å®ä¾‹å±æ€§ this.name = name // å®ä¾‹æ–¹æ³• this.sayName = function() &#123; return this.name &#125;&#125;var person1 = new Person(&#x27;xyf1&#x27;)var person2 = new Person(&#x27;xyf2&#x27;)//trueconsole.log(person1.constructor === Person) æˆ‘ä»¬é€šè¿‡newæ¥æ„å»ºå®ä¾‹åŒ–å¯¹è±¡ï¼Œç±»å‡½æ•°ä¸­çš„thisæ€»æ˜¯æŒ‡å‘å®ä¾‹åŒ–çš„å¯¹è±¡ï¼Œæ¯ä¸€ä¸ªå®ä¾‹å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªä¸å¯æšä¸¾çš„å±æ€§constructorå±æ€§æ¥æŒ‡å‘æ„é€ å‡½æ•°ï¼Œå³Personã€‚ æˆ‘ä»¬æŠŠperson1æ‰“å°å‡ºæ¥çœ‹ä¸€ä¸‹åˆ°åº•æœ‰ä»€ä¹ˆï¼š å®ä¾‹å¯¹è±¡ä¸­å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨ç±»ä¸­å®šä¹‰çš„nameå±æ€§å’ŒsayNameæ–¹æ³•éƒ½æœ‰äº†ï¼Œä½†æ˜¯constructorå±æ€§å¹¶æ²¡æœ‰ï¼Œä½†æ˜¯å´èƒ½å–åˆ°å€¼ã€‚ æ„é€ å‡½æ•°ç¼ºç‚¹ æ‰€æœ‰çš„å®ä¾‹å¯¹è±¡éƒ½ä¼šå•ç‹¬åˆ›å»ºè‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸åŒå®ä¾‹å¯¹è±¡ä¹‹é—´æ— æ³•å…±äº«é€šç”¨çš„å±æ€§ã€‚ 123456//xyf1person1.sayName()//xyf2person2.sayName()//falseperson1.sayName === person2.sayName ä½†æ˜¯æœ‰çš„å±æ€§æˆ–è€…æ–¹æ³•æ˜¯å…±æœ‰çš„ï¼Œæˆ‘ä»¬å¸Œæœ›æ¯ä¸ªå®ä¾‹å¯¹è±¡åˆ›å»ºçš„æ—¶å€™å°±èƒ½æœ‰ï¼Œæ¯”å¦‚è¯´æ¯ä¸ªäººå¤©ç”Ÿå°±ä¼šå“­ï¼ˆcryï¼‰ï¼Œä¸ç”¨ä¸€å‡ºç”Ÿçš„æ—¶å€™è¿˜è¦â€œæ‰‹æŠŠæ‰‹æ•™â€ã€‚ åŸå‹å¯¹è±¡prototype ä¸ºäº†è§£å†³å®ä¾‹å¯¹è±¡ä¹‹é—´å…±äº«å±æ€§çš„é—®é¢˜ï¼ŒJSæä¾›äº†prototypeå±æ€§ã€‚ 123456789101112131415function Person(name) &#123; // å®ä¾‹å±æ€§ this.name = name // å®ä¾‹æ–¹æ³• this.sayName = function() &#123; return this.name &#125;&#125;Person.prototype.cry = function()&#123; console.log(&#x27;cry&#x27;)&#125;var person1 = new Person(&#x27;xyf1&#x27;)var person2 = new Person(&#x27;xyf2&#x27;)//trueperson1.cry === person2.cry prototypeæ˜¯ä»ä¸€ä¸ªå‡½æ•°æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼Œå³å‡½æ•°æ‰æœ‰prototypeå±æ€§ã€‚å®ƒçš„ä½œç”¨æ˜¯è®©è¯¥æ„é€ å‡½æ•°åˆ›å»ºçš„æ‰€æœ‰å®ä¾‹å¯¹è±¡ä»¬éƒ½èƒ½æ‰¾åˆ°å…¬ç”¨çš„å±æ€§å’Œæ–¹æ³•ã€‚ä»»ä½•å‡½æ•°åœ¨åˆ›å»ºå®ä¾‹å¯¹è±¡çš„æ—¶å€™ï¼Œå…¶å®ä¼šå…³è”è¯¥å‡½æ•°çš„prototypeå¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬ç»§ç»­æŠŠåŸå‹å›¾è¡¥å……å®Œæ•´ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹åŸå‹å¯¹è±¡çš„å¼•ç”¨ï¼Œä½†æ˜¯ä»éœ€è¦æŠŠconstructorå±æ€§æŒ‡å‘å›æ„é€ å‡½æ•°ï¼›ä¸Šé¢çš„cryå‡½æ•°ç»‘å®šæˆ‘ä»¬å¯ä»¥è¿™æ ·æ”¹å†™ï¼š 123456Person.prototype = &#123; constructor: Person, cry: function()&#123; console.log(&#x27;cry&#x27;) &#125;&#125; åŸå‹é“¾ æœ‰äº†åŸå‹å¯¹è±¡ï¼Œæˆ‘ä»¬çŸ¥é“äº†ï¼Œå®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œæœ‰å¯èƒ½æ˜¯å®šä¹‰åœ¨è‡ªèº«ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯å®šä¹‰åœ¨ä»–çš„åŸå‹å¯¹è±¡ä¸Šã€‚é€šè¿‡ä¸Šé¢çš„cryå‡½æ•°æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå®ä¾‹å¯¹è±¡èƒ½å¤Ÿç›´æ¥è·å–åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆè·å–çš„å‘¢ï¼Ÿåœ¨ä¸Šé¢æ‰“å°çš„person1ä¸­æˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ªç‰¹åˆ«çš„å±æ€§__proto__å±•å¼€çœ‹ä¸€ä¸‹ï¼š å› æ­¤__proto__æŒ‡å‘äº†å®ä¾‹å¯¹è±¡çš„åŸå‹å¯¹è±¡ï¼›å½“ä½ è®¿é—®ä¸€ä¸ªå¯¹è±¡ä¸Šæ²¡æœ‰çš„å±æ€§æ—¶ï¼Œå¯¹è±¡å°±ä¼šå»__proto__ä¸Šé¢æ‰¾ï¼Œå¦‚æœè¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Œå°±ä¼šç»§ç»­æ‰¾åŸå‹å¯¹è±¡çš„__proto__ï¼Œç›´åˆ°åŸå‹å¯¹è±¡ä¸ºnullï¼›å› æ­¤__proto__æ„æˆäº†ä¸€æ¡åŸå‹é“¾ã€‚ åŒæ—¶æˆ‘ä»¬ä¹Ÿè§£ç­”äº†ä¸Šé¢å®ä¾‹å¯¹è±¡ä¸Šæ²¡æœ‰constructorå±æ€§çš„é—®é¢˜ï¼Œconstructorå±æ€§çœŸæ­£å­˜åœ¨äºåŸå‹å¯¹è±¡ä¸Šï¼Œæ‰€ä»¥å®ä¾‹å¯¹è±¡æ‰èƒ½è·å–åˆ°ï¼Œæˆ‘ä»¬ç»§ç»­å®Œå–„åŸå‹å›¾ï¼ˆè™šçº¿è¡¨ç¤ºè¯¥å±æ€§æˆ–æ–¹æ³•å¹¶ä¸æ˜¯çœŸæ­£å­˜åœ¨ï¼‰ï¼š åŒæ—¶ï¼ŒåŸå‹å¯¹è±¡ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆè‚¯å®šä¹Ÿæœ‰å®ƒè‡ªå·±çš„åŸå‹å¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒçš„åŸå‹å¯¹è±¡æ˜¯è°å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“ï¼ŒJSä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½æ˜¯Objectçš„å®ä¾‹ï¼Œå¹¶ç»§æ‰¿Object.prototypeçš„å±æ€§å’Œæ–¹æ³•ï¼›å­—é¢é‡var a = &#123;&#125;å®é™…ä¸Šä¹Ÿæ˜¯new Object()çš„è¯­æ³•ç³–ï¼Œå› æ­¤ï¼š 12345678var obj1 = &#123;&#125;var obj2 = new Object()//trueobj1.__proto__ === Object.prototype//trueobj2.__proto__ === Object.prototype//truePerson.prototype.__proto__ === Object.prototype æˆ‘ä»¬ç»§ç»­å®Œå–„åŸå‹å›¾ï¼š constructor æˆ‘ä»¬è¯´è¿‡constructorç”¨æ¥æŒ‡å‘æ„é€ å‡½æ•°ï¼›åŒæ—¶ï¼ŒconstructorçœŸæ­£å­˜åœ¨äºåŸå‹å¯¹è±¡ä¸Šï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸‹é¢çš„ç­‰å¼å…³ç³»ï¼š 12//truePerson.prototype.constructor === Person åœ¨å­¦æ•°æ®ç±»å‹åˆ¤æ–­çš„æ—¶å€™å­¦è¿‡ï¼Œconstructorå¯ä»¥ç”¨æ¥è¿›è¡Œæ•°æ®ç±»å‹çš„åˆ¤æ–­ï¼š 123456console.log((2).constructor === Number); // true console.log((true).constructor === Boolean);// true console.log((&#x27;str&#x27;).constructor === String);// true console.log(([]).constructor === Array);// true console.log((function() &#123;&#125;).constructor === Function);// true console.log((&#123;&#125;).constructor === Object);// true è¿™ç§æ–¹å¼çœ‹èµ·æ¥èƒ½åˆ¤æ–­æ‰€æœ‰ç±»å‹ï¼Œä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬æ›´æ”¹äº†åŸå‹å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼å°±ä¸å¯é äº†ã€‚ 123456function Fn()&#123;&#125;;Fn.prototype = new Array(); var f = new Fn();console.log(f.constructor===Fn); // falseconsole.log(f.constructor===Array); // true åœ¨JSä¸­ï¼Œå‡½æ•°æœ¬èº«ä¹Ÿå¯ä»¥çœ‹æˆæ˜¯å¯¹è±¡ï¼Œå¯¹è¿™ç§åˆæ˜¯å‡½æ•°ï¼Œåˆæ˜¯å¯¹è±¡ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„ç§°å‘¼ï¼šå‡½æ•°å¯¹è±¡ï¼›æˆ‘ä»¬è°ƒç”¨å‡½æ•°çš„fn.callå’Œfn.applyå…¶å®è°ƒç”¨çš„æ˜¯ç»§æ‰¿è‡ªå…¶åŸå‹å¯¹è±¡ä¸Šçš„Function.prototype.callå’ŒFunction.prototype.applyï¼Œå› æ­¤å‡½æ•°éƒ½æ˜¯Functionå‡½æ•°çš„å®ä¾‹å¯¹è±¡ï¼›æ—¢ç„¶æ˜¯å®ä¾‹å¯¹è±¡ï¼Œæ‰€ä»¥Personå‡½æ•°ä¹Ÿæ‹¥æœ‰__proto__å’Œconstructorå±æ€§ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å‡½æ•°çš„å±æ€§ï¼š 123456789101112//Æ’ Function() &#123; [native code] &#125;console.log(Person.constructor)//truePerson.constructor === Function//falsePerson.hasOwnProperty(&#x27;constructor&#x27;)//Æ’ () &#123; [native code] &#125;console.log(Person.__proto__)//truePerson.__proto__.hasOwnProperty(&#x27;constructor&#x27;)//trueFunction.prototype.hasOwnProperty(&#x27;constructor&#x27;) å¯ä»¥çœ‹å‡ºæ¥ï¼ŒPersonæ„é€ å‡½æ•°å’ŒJSæ™®é€šçš„å¯¹è±¡æ²¡æœ‰ä»»ä½•åŒºåˆ«ï¼Œæœ‰è‡ªå·±çš„constructorå±æ€§ï¼ŒæŒ‡å‘Functionå‡½æ•°ï¼Œè¯´æ˜Personå‡½æ•°æ˜¯Functionå‡½æ•°çš„å®ä¾‹å¯¹è±¡ï¼›è€Œä¸”constructorå±æ€§ä¸åœ¨Personæœ¬èº«ï¼Œè€Œåœ¨å…¶åŸå‹å¯¹è±¡Function.prototypeä¸Šï¼Œå› æ­¤æˆ‘ä»¬å†æ¬¡å®Œå–„ä¸€ä¸‹åŸå‹å›¾ï¼š é¸¡ç”Ÿè›‹è›‹ç”Ÿé¸¡ åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å‘ç°æœ€ç»ˆåŸå‹å›¾æŒ‡å‘äº†å››ä¸ªåŸºæœ¬çš„ä¸œè¥¿ï¼šObjectã€Object.prototypeã€Functionå’ŒFunction.prototypeï¼Œä»–ä»¬ä¹‹é—´çš„å…³ç³»æ˜¯æ•´ä¸ªåŸå‹å…³ç³»é‡Œé¢æœ€éš¾ç†è§£çš„ï¼Œä¸ºäº†é¿å…å¹²æ‰°ï¼Œæˆ‘ä»¬ç»™ä»–ä»¬å››ä¸ªå•ç‹¬å¼€ä¸ªå›¾ï¼š æˆ‘ä»¬çŸ¥é“Objectå‡½æ•°å’ŒPersonå‡½æ•°ä¸€æ ·ï¼Œéƒ½æ˜¯å‡½æ•°å¯¹è±¡ï¼Œå› æ­¤éƒ½æ˜¯Functionå‡½æ•°çš„å®ä¾‹å¯¹è±¡ã€‚ 12345678910//trueObject.constructor === Function//trueObject instanceof Function//trueObject instanceof Object//falseObject.hasOwnProperty(&#x27;constructor&#x27;)//trueObject.__proto__ === Function.prototype å› æ­¤æˆ‘ä»¬å®Œå–„Objectå’ŒFunctionçš„å…³ç³»ï¼š æ—¢ç„¶Objectæ˜¯æ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬åˆæƒ³èµ·Functionä¹Ÿèƒ½é€šè¿‡new Function()æ¥æ„é€ åŒ¿åå‡½æ•°ï¼ŒåŒæ—¶è‡ªå·±åˆæ˜¯è‡ªå·±çš„constructorã€‚ 12345678910//trueFunction.constructor === Function//trueFunction instanceof Object//trueFunction instanceof Function//falseFunction.hasOwnProperty(&#x27;constructor&#x27;)//trueFunction.__proto__ === Function.prototype åŒæ—¶æˆ‘ä»¬çŒœæµ‹Function.prototypeå’ŒPerson.prototypeä¸€æ ·æ˜¯ä¸ªå¯¹è±¡ï¼Œå› æ­¤å®ƒçš„åŸå‹å¯¹è±¡è‚¯å®šå°±æ˜¯Object.prototypeã€‚ 12//trueFunction.prototype.__proto__ === Object.prototype æˆ‘ä»¬ç»§ç»­å®Œå–„åŸå‹å›¾ï¼š è¿™æ ·ï¼Œæ•´ä¸ªåŸå‹é“¾æœ€æœ‰æ„æ€çš„ä¸€å¹•å‡ºç°äº†ï¼›Objectæ˜¯æ„é€ å‡½æ•°ï¼Œç»§æ‰¿äº†Function.prototypeï¼›Functionå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œç»§æ‰¿äº†Object.prototypeï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯å…ˆæœ‰äº†Objectï¼Œè¿˜æ˜¯å…ˆæœ‰Functionï¼Ÿè¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ— è§£çš„æ‚–è®ºã€‚ æˆ‘ä»¬å‘ç°å¯¼è‡´é¸¡å’Œè›‹é—®é¢˜çš„æ ¹æœ¬åŸå› åœ¨äºFunction.__proto__æŒ‡å‘äº†Function.prototypeï¼Œè®©Functionç»§æ‰¿äº†Object.prototypeä¸Šçš„æ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å¯¹Function.prototypeæ¥è¿›ä¸€æ­¥çš„äº†è§£ï¼š 12345678910//functiontypeof Function.prototype//undefinedFunction.prototype()//trueFunction.prototype instanceof Object//falseFunction.prototype instanceof Function//undefinedFunction.prototype.prototype æˆ‘ä»¬å‘ç°Function.prototypeæ˜¯ä¸ªç‰¹æ®Šçš„å‡½æ•°å¯¹è±¡ï¼Œä½†æ˜¯æ²¡æœ‰prototypeå±æ€§ï¼›é’ˆå¯¹ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬æ¢³ç†äº†ä»¥ä¸‹å‡ ç‚¹ï¼š Function.prototypeåƒæ™®é€šå‡½æ•°ä¸€æ ·å¯ä»¥è°ƒç”¨ï¼Œä½†æ€»æ˜¯è¿”å›undefined Function.prototypeç»§æ‰¿äºObject.prototypeï¼Œå¹¶ä¸”æ²¡æœ‰prototypeè¿™ä¸ªå±æ€§ å› æ­¤Function.prototypeæ˜¯ä¸ªæ ‡å‡†çš„å†…ç½®å¯¹è±¡ï¼Œå®ƒç»§æ‰¿äºObject.prototypeï¼Œè€Œæˆ‘ä»¬çŸ¥é“Object.prototype===nullï¼Œè¯´æ˜åŸå‹é“¾åˆ°Object.prototypeå°±ç»ˆæ­¢äº†ã€‚ ç»“è®ºï¼šå…ˆæœ‰ Object.prototypeï¼ˆåŸå‹é“¾é¡¶ç«¯ï¼‰ï¼ŒFunction.prototype ç»§æ‰¿ Object.prototype è€Œäº§ç”Ÿï¼Œæœ€åï¼ŒFunction å’ŒObjectå’Œå…¶å®ƒæ„é€ å‡½æ•°ç»§æ‰¿Function.prototypeè€Œäº§ç”Ÿã€‚ é™æ€å±æ€§å’Œæ–¹æ³• æ‰€è°“çš„é™æ€æ–¹æ³•ï¼Œæ˜¯æŒ‡ä¸éœ€è¦å£°æ˜ç±»çš„å®ä¾‹å°±å¯ä»¥ä½¿ç”¨çš„æ–¹æ³•ã€‚åœ¨JAVAä¸­æˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ç±»ä¸­åŠ ä¸€ä¸ªstaticå®šä¹‰é™æ€æ–¹æ³• 123456789public class Person&#123; static int num = 0; public static void say() &#123; System.out.println(&quot;hello&quot;); &#125; public static void main(String[] args)&#123; Person.say(); &#125;&#125; åœ¨ES5ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥å°†å®ƒä½œä¸ºç±»å‡½æ•°çš„å±æ€§å³å¯ï¼š 12345678910function Person()&#123;&#125;Person.staticSay = function()&#123; console.log(&#x27;static say&#x27;) //Æ’ Person()&#123;&#125; console.log(this)&#125;Person.num = 10Person.staticSay()//10console.log(Person.num) é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯å®ä¾‹æ–¹æ³•å¯ä»¥è®¿é—®åˆ°å®ä¾‹å¯¹è±¡ï¼Œå¯ä»¥å¯¹å®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œé™æ€æ–¹æ³•ä¸€èˆ¬ç”¨äºè·Ÿå®ä¾‹æ— å…³çš„æ“ä½œã€‚é™æ€æ–¹æ³•æœ€å¸¸è§çš„æ˜¯åœ¨jQueryçš„ä¸€äº›å·¥å…·å‡½æ•°ä¸­ï¼Œæ¯”å¦‚$.ajax()ã€$.trim()ï¼Œå¯ä»¥çœ‹å‡ºæ¥è¿™ä¸¤ä¸ªå‡½æ•°ä¹Ÿæ˜¯ç›´æ¥å®šä¹‰åœ¨jQueryå¯¹è±¡ï¼ˆå³$å¯¹è±¡ï¼‰ä¸Šçš„ï¼Œå› ä¸ºå…¶ä¸éœ€è¦è·å–DOMå…ƒç´ $(â€˜divâ€™)ã€‚ æ‰‹å†™instanceof é™¤äº†constructorï¼Œæˆ‘ä»¬è¿˜æœ‰instanceofæ¥è¿›è¡Œæ•°æ®ç±»å‹çš„åˆ¤æ–­ï¼›instanceofä¸»è¦ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªå®ä¾‹æ˜¯å¦å±äºæŸç§ç±»å‹ï¼Œè®©æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹instanceofçš„ç®€å•ç”¨æ³•ï¼š 123456//true[] instanceof Array//trueperson1 instanceof Person//trueperson1 instanceof Object instanceofç¬¬ä¸€ä¸ªå˜é‡æ˜¯ä¸€ä¸ªå¯¹è±¡Aï¼Œç¬¬äºŒä¸ªå˜é‡æ˜¯ä¸€ä¸ªå‡½æ•°Bï¼Œæ²¿ç€Açš„åŸå‹é“¾__proto__ä¸€ç›´å‘ä¸Šæ‰¾ï¼Œå¦‚æœèƒ½æ‰¾åˆ°ä¸€ä¸ª__proto__ç­‰äºBçš„prototypeï¼Œåˆ™è¿”å›trueï¼›å¦‚æœæ‰¾åˆ°ç»ˆç‚¹è¿˜æ²¡æ‰¾åˆ°åˆ™è¿”å›falseã€‚ 1234567891011121314151617function _instanceOf(A, B)&#123; if(!A || !B)&#123; return false &#125; var O = B.prototype A = A.__proto__ while(true)&#123; if(A === null)&#123; return false &#125; else if(O === A)&#123; return true &#125; else &#123; //æ¯æ¬¡å¾ªç¯ç»§ç»­æ‰¾__proto__ A = A.__proto__ &#125; &#125;&#125; æ‰‹å†™new é€šè¿‡ä¸Šé¢çš„çš„åŸå‹é“¾ï¼Œæˆ‘ä»¬çŸ¥é“äº†newæœ¬è´¨ä¸Šå°±æ˜¯è°ƒç”¨æ„é€ å‡½æ•°ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡èƒ½å¤Ÿè®¿é—®æ„é€ å‡½æ•°çš„çš„åŸå‹å¯¹è±¡ï¼Œå› ä¸ºæˆ‘ä»¬æ¥å°è¯•æ¨¡æ‹Ÿä¸€ä¸‹newçš„å®ç°ã€‚ 12345678function myNew(Fn)&#123; var obj = new Object() Fn.call(obj) obj.__proto__ = Fn.prototype return obj&#125;var newObj = myNew(Person)console.log(newObj) æˆ‘ä»¬é¦–å…ˆæ„å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼›ç„¶åå°†ç©ºå¯¹è±¡ä½œä¸ºthisï¼Œè°ƒç”¨æ„é€ å‡½æ•°ç»‘å®šå‚æ•°ï¼›æœ€åå°†è¯¥å¯¹è±¡çš„__proto__æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚ å¯ä»¥çœ‹åˆ°ç”Ÿæˆå‡ºæ¥çš„å¯¹è±¡è¯¥æœ‰çš„å±æ€§éƒ½æœ‰äº†ï¼ŒåŸå‹é“¾ä¹Ÿç»‘å®šæˆåŠŸäº†ï¼Œä½†æ˜¯å­˜åœ¨çš„é—®é¢˜å°±æ˜¯ä¸èƒ½è¿›è¡Œä¼ å‚ï¼Œå› æ­¤æˆ‘ä»¬è¿›è¡Œä¸€ä¸‹æ”¹è¿›ï¼š 12345678function myNew(Fn, ...param)&#123; var obj = new Object() Fn.call(obj, ...param) obj.__proto__ = Fn.prototype return obj&#125;var newObj = myNew(Person, &#x27;new obj&#x27;)console.log(newObj) å¯ä»¥çœ‹åˆ°è¿”å›çš„å¯¹è±¡å·²ç»å’ŒåŸç”Ÿnewç”Ÿæˆå‡ºæ¥çš„å‡ ä¹ä¸€æ¨¡ä¸€æ ·äº†ã€‚ä½†æ˜¯æˆ‘ä»¬å¯¹æ„é€ å‡½æ•°è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼š 1234567891011function Person(name) &#123; this.name = name this.sayName = function() &#123; return this.name &#125; return 2// return &#x27;hello&#x27;// return &#123;a:3&#125;// return []// return function()&#123;&#125;&#125; æˆ‘ä»¬åœ¨æ„é€ å‡½æ•°ä¸­è¿”å›äº†å¤šç§ç±»å‹ï¼Œç»è¿‡æµ‹è¯•å‘ç°ï¼šå¦‚æœæ„é€ å‡½æ•°è¿”å›å¼•ç”¨ç±»å‹ï¼Œnewç”Ÿæˆçš„å°±æ˜¯è¿”å›çš„å¯¹è±¡ï¼›å¦‚æœè¿”å›åŸºæœ¬æ•°æ®ç±»å‹ï¼Œnewç”Ÿæˆæ–°çš„å¯¹è±¡ã€‚å› æ­¤æˆ‘ä»¬ç»ˆæç‰ˆçš„newå‡½æ•°å¦‚ä¸‹ï¼š 1234567function myNew(Fn, ...param)&#123; var obj = new Object() var result = Fn.call(obj, ...param) obj.__proto__ = Fn.prototype return typeof result === &#x27;object&#x27; || typeof result === &#x27;function&#x27; ? result : obj&#125; ES5ç»§æ‰¿ æ‰€è°“çš„ç»§æ‰¿ï¼Œå°±æ˜¯æŠŠå­ç±»ç»§æ‰¿çˆ¶ç±»æ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼›åŒæ—¶æˆ‘ä»¬ä¹ŸçŸ¥é“çˆ¶ç±»ä¸Šçš„å±æ€§å’Œæ–¹æ³•ä¸ä»…åœ¨è‡ªèº«æ„é€ å‡½æ•°ï¼ŒåŸå‹é“¾ä¸Šä¹Ÿä¼šæœ‰å±æ€§å’Œæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦ç»§æ‰¿è¿‡æ¥ã€‚ æ—¢ç„¶ç»§æ‰¿æ˜¯ç»§æ‰¿çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸Šé¢çš„myNewå‡½æ•°ä¹Ÿç›¸å½“äºæ˜¯ä¸€ç§ç»§æ‰¿ï¼›è®©æˆ‘ä»¬å†çœ‹çœ‹çœ‹è¿˜æœ‰å“ªäº›ç»§æ‰¿çš„æ–¹å¼ã€‚ åŸå‹é“¾ç»§æ‰¿123456789101112131415function Parent () &#123; this.name = &#x27;xyf&#x27;; this.sayName = function() &#123; return this.name &#125;&#125;Parent.prototype.cry = function () &#123; console.log(&#x27;cry&#x27;)&#125;function Child () &#123;&#125;Child.prototype = new Parent();var child1 = new Child();console.log(child1.sayName())child1.cry() æˆ‘ä»¬æŠŠçˆ¶ç±»çš„å®ä¾‹æŒ‚è½½åˆ°å­ç±»çš„åŸå‹ä¸Šï¼Œé‚£ä¹ˆæ‰€æœ‰çš„å­ç±»å°±èƒ½è®¿é—®åˆ°çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•äº†ï¼Œä½†æ˜¯ç”±äºæ‰€æœ‰å­ç±»å…±äº«åŸå‹å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š é—®é¢˜1ï¼šçˆ¶ç±»å¼•ç”¨ç±»å‹çš„å±æ€§è¢«å­ç±»å…±äº«ï¼Œä¸€æ—¦æ”¹å˜ï¼Œæ‰€æœ‰å­ç±»å®ä¾‹å¼•ç”¨çš„éƒ½å°†æ”¹å˜ã€‚ 123456789101112131415function Parent () &#123; this.name = [&#x27;xyf1&#x27;, &#x27;xyf2&#x27;];&#125;function Child () &#123;&#125;Child.prototype = new Parent();var child1 = new Child();child1.name.push(&#x27;xyf3&#x27;)//[&quot;xyf1&quot;, &quot;xyf2&quot;, &quot;xyf3&quot;]console.log(child1.name);var child2 = new Child();//[&quot;xyf1&quot;, &quot;xyf2&quot;, &quot;xyf3&quot;]console.log(child2.name); é—®é¢˜2ï¼šåˆ›å»ºå­ç±»å®ä¾‹çš„æ—¶å€™ï¼Œä¸èƒ½å‘çˆ¶ç±»ä¼ å‚æ•°ã€‚ é—®é¢˜3ï¼šä¸èƒ½ç»§æ‰¿é™æ€æ–¹æ³•ã€‚ æ„é€ å‡½æ•°ç»§æ‰¿123456789101112131415161718192021function Parent (name) &#123; this.name = name; this.color = [&#x27;red&#x27;,&#x27;yellow&#x27;]&#125;Parent.prototype.cry = function()&#123; console.log(&#x27;cry&#x27;)&#125;function Child (name) &#123; Parent.call(this, name);&#125;var child1 = new Child(&#x27;xyf&#x27;);child1.color.push(&#x27;blue&#x27;);//[&#x27;red&#x27;,&#x27;yellow&#x27;,&#x27;blue&#x27;]console.log(child1.color);//undefinedconsole.log(child1.cry)var child2 = new Child(&#x27;corner&#x27;);//[&#x27;red&#x27;,&#x27;yellow&#x27;]console.log(child2.color); æ¯æ¬¡åˆ›å»ºå­ç±»å®ä¾‹çš„æ—¶å€™è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œé¿å…äº†å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œä¹Ÿå¯ä»¥å‘çˆ¶ç±»ä¼ å‚æ•°ï¼›ä½†æ˜¯æ²¡æœ‰ç»§æ‰¿çˆ¶ç±»åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚ ç»„åˆç»§æ‰¿1234567891011function Parent (name) &#123; this.name = name; this.color = [&#x27;red&#x27;,&#x27;yellow&#x27;]&#125;Parent.prototype.cry = function()&#123; console.log(&#x27;cry&#x27;)&#125;function Child (name) &#123; Parent.call(this, name);&#125;Child.prototype = new Parent() èåˆäº†åŸå‹é“¾ç»§æ‰¿å’Œæ„é€ å‡½æ•°ç»§æ‰¿çš„ä¼˜ç‚¹ï¼Œæ˜¯JSä¸­å¸¸ç”¨çš„ç»§æ‰¿æ–¹å¼ã€‚ ES6ç»§æ‰¿ ES6æ–°å¢äº†classå…³é”®è¯ï¼Œç”¨æ¥å®šä¹‰ä¸€ä¸ªç±»ï¼Œå’ŒJAVAä¸­çš„æœ‰ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰ï¼›ä½†æ˜¯æœ¬è´¨ä¸Šå…¶å®æ˜¯ES5æ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼Œå¤§å¤šéƒ¨åˆ†åŠŸèƒ½ES5éƒ½èƒ½å®ç°ï¼š 123456789101112131415161718192021222324class Person&#123; constructor(name)&#123; this.name = name &#125; sayName()&#123; return this.name &#125; static staticSay() &#123; console.log(&#x27;static say&#x27;); &#125;&#125;Person.prototype.cry = function()&#123; console.log(&#x27;cry&#x27;)&#125;//static sayPerson.staticSay()var person1 = new Person(&#x27;corner&#x27;)//cryperson1.cry()//cornerperson1.sayName()//trueperson1.constructor === Person ES6çš„ç»§æ‰¿å¯ä»¥é€šè¿‡extendså…³é”®è¯å®ç°ï¼Œæ¯”ES5çš„ä¿®æ”¹åŸå‹é“¾å®ç°ç»§æ‰¿è¦æ›´æ¸…æ™°å’Œæ–¹ä¾¿ï¼š 123456789101112131415161718192021222324252627282930313233class Person&#123; constructor(name)&#123; this.name = name &#125; sayName()&#123; return this.name &#125; static staticSay() &#123; console.log(&#x27;static say&#x27;); &#125;&#125;Person.prototype.cry = function()&#123; console.log(&#x27;cry&#x27;)&#125;class Child extends Person&#123; constructor(name,color)&#123; super(name) this.color = color &#125; sayColor()&#123; return &#x27;my color is:&#x27;+ this.color &#125;&#125;var child1 = new Child(&#x27;child1&#x27;, &#x27;black&#x27;)//child1console.log(child1.sayName())//my color is:blackconsole.log(child1.sayColor())//crychild1.cry()//static sayChild.staticSay() å¯ä»¥å¾ˆæ¸…æ™°çš„çœ‹å‡ºæ¥å­ç±»ç»§æ‰¿äº†çˆ¶ç±»æœ¬èº«ä»¥åŠåŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚åŒæ—¶ï¼Œåœ¨ES5ä¸­æ‰€æœ‰çš„ç»§æ‰¿æˆ‘ä»¬å‘ç°éƒ½ä¸æ”¯æŒé™æ€å‡½æ•°çš„ç»§æ‰¿ï¼Œä½†æ˜¯åœ¨ES6ä¸­æ”¯æŒã€‚ å‚è€ƒ ä»protoå’Œprototypeæ¥æ·±å…¥ç†è§£JSå¯¹è±¡å’ŒåŸå‹é“¾","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"Vueä¸­ç»„ä»¶é€šä¿¡çš„æ–¹å¼","date":"2020-03-20T03:00:00.000Z","path":"2020/03/20/Vue-Communicate.html","text":"vueæ˜¯æ•°æ®é©±åŠ¨è§†å›¾æ›´æ–°çš„æ¡†æ¶, æ‰€ä»¥å¯¹äºvueæ¥è¯´ç»„ä»¶é—´çš„æ•°æ®é€šä¿¡éå¸¸é‡è¦ï¼›æˆ‘ä»¬å¸¸ç”¨çš„æ–¹å¼è«è¿‡äºé€šè¿‡propsä¼ å€¼ç»™å­ç»„ä»¶ï¼Œä½†æ˜¯vueè¿˜æœ‰å…¶ä»–å¾ˆå¤šä¸å¸¸ç”¨çš„é€šä¿¡æ–¹å¼ï¼Œäº†è§£ä»–ä»¬ï¼Œä¹Ÿè®¸åœ¨ä»¥ååœ¨å†™ä»£ç çš„æ—¶å€™èƒ½ç»™ä½ å¸¦æ¥æ›´å¤šçš„æ€è·¯å’Œé€‰æ‹©ã€‚ prop/$emit çˆ¶ç»„ä»¶é€šè¿‡propçš„æ–¹å¼å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè€Œé€šè¿‡$emitå­ç»„ä»¶å¯ä»¥å‘çˆ¶ç»„ä»¶é€šä¿¡ã€‚ 123456789101112131415161718192021222324//Parent.vue&lt;template&gt; &lt;div&gt; å½“å‰é€‰ä¸­ï¼š&#123;&#123; current &#125;&#125; &lt;Child :list=&quot;list&quot; @change=&quot;changeCurrent&quot;&gt;&lt;/Child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./child&quot;;export default &#123; data() &#123; return &#123; current: 0, list: [&quot;çº¢æ¥¼æ¢¦&quot;, &quot;æ°´æµ’ä¼ &quot;, &quot;ä¸‰å›½æ¼”ä¹‰&quot;, &quot;è¥¿æ¸¸è®°&quot;] &#125;; &#125;, components: &#123; Child &#125;, methods: &#123; changeCurrent(num) &#123; this.current = num; &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬å¯ä»¥é€šè¿‡propå‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼›ç”¨ä¸€ä¸ªå½¢è±¡çš„æ¯”å–»æ¥è¯´ï¼Œçˆ¶å­ç»„ä»¶ä¹‹é—´çš„æ•°æ®ä¼ é€’ç›¸å½“äºè‡ªä¸Šè€Œä¸‹çš„ä¸‹æ°´ç®¡å­ï¼Œç®¡å­ä¸­çš„æ°´å°±åƒæ•°æ®ï¼Œæ°´åªèƒ½ä»ä¸Šå¾€ä¸‹æµï¼Œä¸èƒ½é€†æµã€‚è¿™ä¹Ÿæ­£æ˜¯Vueçš„è®¾è®¡ç†å¿µä¹‹å•å‘æ•°æ®æµã€‚è€Œpropæ­£æ˜¯ç®¡é“ä¸ç®¡é“ä¹‹é—´çš„ä¸€ä¸ªè¡”æ¥å£ï¼Œè¿™æ ·æ°´ï¼ˆæ•°æ®ï¼‰æ‰èƒ½å¾€ä¸‹æµã€‚ 12345678910111213141516171819202122232425//Child.vue&lt;template&gt; &lt;div&gt; &lt;template v-for=&quot;(item, index) in list&quot;&gt; &lt;div @click=&quot;clickItem(index)&quot; :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt; &lt;/template&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; props: &#123; list: &#123; type: Array, default: () =&gt; &#123; return []; &#125; &#125; &#125;, methods: &#123; clickItem(index) &#123; this.$emit(&quot;change&quot;, index); &#125; &#125;&#125;;&lt;/script&gt; åœ¨å­ç»„ä»¶ä¸­æˆ‘ä»¬é€šè¿‡propså¯¹è±¡å®šä¹‰äº†æ¥æ”¶çˆ¶ç»„ä»¶å€¼çš„ç±»å‹å’Œé»˜è®¤å€¼ï¼Œç„¶åé€šè¿‡$emit()è§¦å‘çˆ¶ç»„ä»¶ä¸­çš„è‡ªå®šä¹‰äº‹ä»¶ã€‚prop/$emitä¼ é€’æ•°æ®çš„æ–¹å¼åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨çš„éå¸¸å¤šï¼Œä¸€èˆ¬æ¶‰åŠåˆ°ç»„ä»¶å¼€å‘éƒ½æ˜¯åŸºäºé€šè¿‡è¿™ç§æ–¹å¼ï¼›é€šè¿‡çˆ¶ç»„ä»¶ä¸­æ³¨å†Œå­ç»„ä»¶ï¼Œå¹¶åœ¨å­ç»„ä»¶æ ‡ç­¾ä¸Šç»‘å®šå¯¹è‡ªå®šä¹‰äº‹ä»¶çš„ç›‘å¬ã€‚ä»–çš„ä¼˜ç‚¹æ˜¯ä¼ å€¼å–å€¼æ–¹ä¾¿ç®€æ´æ˜äº†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯ï¼š ç”±äºæ•°æ®æ˜¯å•å‘ä¼ é€’ï¼Œå¦‚æœå­ç»„ä»¶éœ€è¦æ”¹å˜çˆ¶ç»„ä»¶çš„propså€¼æ¯æ¬¡éœ€è¦ç»™å­ç»„ä»¶ç»‘å®šå¯¹åº”çš„ç›‘å¬äº‹ä»¶ã€‚ å¦‚æœçˆ¶ç»„ä»¶éœ€è¦ç»™å­™ç»„ä»¶ä¼ å€¼ï¼Œéœ€è¦å­ç»„ä»¶è¿›è¡Œè½¬å‘ï¼Œè¾ƒä¸ºä¸ä¾¿ã€‚ .syncä¿®é¥°ç¬¦ æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å­ç»„ä»¶èƒ½å¤Ÿâ€œç›´æ¥ä¿®æ”¹â€çˆ¶ç»„ä»¶çš„propå€¼ï¼Œä½†æ˜¯åŒå‘ç»‘å®šä¼šå¸¦æ¥ç»´æŠ¤ä¸Šçš„é—®é¢˜ï¼›vueæä¾›äº†ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡è¯­æ³•ç³–.syncä¿®é¥°ç¬¦ã€‚ .syncä¿®é¥°ç¬¦åœ¨ vue1.x çš„æ—¶å€™æ›¾ä½œä¸ºåŒå‘ç»‘å®šåŠŸèƒ½å­˜åœ¨ï¼Œå³å­ç»„ä»¶å¯ä»¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¸­çš„å€¼ã€‚ä½†æ˜¯å®ƒè¿åäº†å•å‘æ•°æ®æµçš„è®¾è®¡ç†å¿µï¼Œæ‰€ä»¥åœ¨ vue2.0 çš„æ—¶å€™è¢«å¹²æ‰äº†ã€‚ä½†æ˜¯åœ¨ vue2.3.0+ ä»¥ä¸Šç‰ˆæœ¬åˆé‡æ–°å¼•å…¥äº†ã€‚ä½†æ˜¯è¿™æ¬¡å®ƒåªæ˜¯ä½œä¸ºä¸€ä¸ªç¼–è¯‘æ—¶çš„è¯­æ³•ç³–å­˜åœ¨ã€‚å®ƒä¼šè¢«æ‰©å±•ä¸ºä¸€ä¸ªè‡ªåŠ¨æ›´æ–°çˆ¶ç»„ä»¶å±æ€§çš„v-onç›‘å¬å™¨ã€‚è¯´ç™½äº†å°±æ˜¯è®©æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œæ›´æ–°çˆ¶ç»„ä»¶ä¸­çš„å€¼äº†ï¼Œä»è€Œä½¿æ•°æ®æ”¹åŠ¨æ¥æºæ›´åŠ çš„æ˜æ˜¾ã€‚ 12345678910111213141516171819202122//Parent.vue&lt;template&gt; &lt;div&gt; &lt;Child :msg.sync=&quot;msg&quot; :num.sync=&quot;num&quot;&gt;&lt;/Child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./child&quot;;export default &#123; name: &quot;way2&quot;, components: &#123; Child &#125;, data() &#123; return &#123; msg: &quot;hello every guys&quot;, num: 0 &#125;; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬åœ¨Childç»„ä»¶ä¼ å€¼æ—¶ç»™æ¯ä¸ªå€¼æ·»åŠ ä¸€ä¸ª.syncä¿®é¥°ï¼Œåœ¨ç¼–è¯‘æ—¶ä¼šè¢«æ‰©å±•ä¸ºå¦‚ä¸‹ä»£ç ï¼š 1&lt;Child :msg=&quot;msg&quot; @update.msg=&quot;val =&gt; msg = val&quot; :num.sync=&quot;num&quot; @update.num=&quot;val =&gt; num = val&quot;&gt;&lt;/Child&gt; å› æ­¤å­ç»„ä»¶ä¸­åªéœ€è¦æ˜¾ç¤ºçš„è§¦å‘updateçš„æ›´æ–°äº‹ä»¶ï¼š 1234567891011121314151617181920212223242526272829303132333435363738//Child.vue&lt;template&gt; &lt;div&gt; &lt;div @click=&quot;clickRevert&quot;&gt;ç‚¹å‡»æ›´æ–°å­—ç¬¦ä¸²ï¼š&#123;&#123; msg &#125;&#125;&lt;/div&gt; &lt;div&gt;å½“å‰å€¼ï¼š&#123;&#123; num &#125;&#125;&lt;/div&gt; &lt;div @click=&quot;clickOpt(&#x27;add&#x27;)&quot; class=&quot;opt&quot;&gt;+&lt;/div&gt; &lt;div @click=&quot;clickOpt(&#x27;sub&#x27;)&quot; class=&quot;opt&quot;&gt;-&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; props: &#123; msg: &#123; type: String, default: &quot;&quot; &#125;, num: &#123; type: Number, default: 0 &#125; &#125;, methods: &#123; clickRevert() &#123; let &#123; msg &#125; = this; this.$emit(&quot;update:msg&quot;,msg.split(&quot;&quot;).reverse().join(&quot;&quot;)); &#125;, clickOpt(type = &quot;&quot;) &#123; let &#123; num &#125; = this; if (type == &quot;add&quot;) &#123; num++; &#125; else &#123; num--; &#125; this.$emit(&quot;update:num&quot;, num); &#125; &#125;&#125;;&lt;/script&gt; è¿™ç§â€œåŒå‘ç»‘å®šâ€çš„æ“ä½œæ˜¯ä¸æ˜¯çœ‹ç€ä¼¼æ›¾ç›¸è¯†ï¼Ÿæ˜¯çš„ï¼Œv-modelæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§è¯­æ³•ç³–ï¼Œåªä¸è¿‡å®ƒè§¦å‘çš„ä¸æ˜¯updateæ–¹æ³•è€Œæ˜¯inputæ–¹æ³•ï¼›è€Œä¸”v-modelæ²¡æœ‰.syncæ¥çš„æ›´åŠ çµæ´»ï¼Œv-modelåªèƒ½ç»‘å®šä¸€ä¸ªå€¼ã€‚ æ€»ç»“ï¼š.syncä¿®é¥°ç¬¦ä¼˜åŒ–äº†çˆ¶å­ç»„ä»¶é€šä¿¡çš„ä¼ å€¼æ–¹å¼ï¼Œä¸éœ€è¦åœ¨çˆ¶ç»„ä»¶å†å†™å¤šä½™çš„å‡½æ•°æ¥ä¿®æ”¹èµ‹å€¼ã€‚ $attrså’Œ$listeners å½“éœ€è¦ç”¨åˆ°ä»Aåˆ°Cçš„è·¨çº§é€šä¿¡æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘ç°propä¼ å€¼éå¸¸éº»çƒ¦ï¼Œä¼šæœ‰å¾ˆå¤šå†—ä½™ç¹ççš„è½¬å‘æ“ä½œï¼›å¦‚æœCä¸­çš„çŠ¶æ€æ”¹å˜è¿˜éœ€è¦ä¼ é€’ç»™Aï¼Œä½¿ç”¨äº‹ä»¶è¿˜éœ€è¦ä¸€çº§ä¸€çº§çš„å‘ä¸Šä¼ é€’ï¼Œä»£ç å¯è¯»æ€§å°±æ›´å·®äº†ã€‚ å› æ­¤vue2.4+ç‰ˆæœ¬æä¾›äº†æ–°çš„æ–¹æ¡ˆï¼š$attrså’Œ$listenersï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹å®˜ç½‘å¯¹$attrsçš„æè¿°ï¼š åŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­ä¸ä½œä¸º prop è¢«è¯†åˆ« (ä¸”è·å–) çš„ç‰¹æ€§ç»‘å®š (class å’Œ style é™¤å¤–)ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½• prop æ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®š (class å’Œ style é™¤å¤–)ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ v-bind=â€$attrsâ€ ä¼ å…¥å†…éƒ¨ç»„ä»¶â€”â€”åœ¨åˆ›å»ºé«˜çº§åˆ«çš„ç»„ä»¶æ—¶éå¸¸æœ‰ç”¨ã€‚ è¿™ä¸€å¤§æ®µè¯ç¬¬ä¸€æ¬¡è¯»éå¸¸çš„ç»•å£ï¼Œè€Œä¸”æ™¦æ¶©éš¾æ‡‚ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæˆ‘ä»¬ç›´æ¥ä¸Šä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132//Parent.vue&lt;template&gt; &lt;div&gt; &lt;Child :notUse=&quot;&#x27;not-use&#x27;&quot; :childMsg=&quot;childMsg&quot; :grandChildMsg=&quot;grandChildMsg&quot; @onChildMsg=&quot;onChildMsg&quot; @onGrandChildMsg=&quot;onGrandChildMsg&quot; &gt;&lt;/Child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./child&quot;;export default &#123; data() &#123; return &#123; childMsg: &quot;hello child&quot;, grandChildMsg: &quot;hello grand child&quot; &#125;; &#125;, components: &#123; Child &#125;, methods: &#123; onChildMsg(msg) &#123; this.childMsg = msg; &#125;, onGrandChildMsg(msg) &#123; this.grandChildMsg = msg; &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬é¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªmsgï¼Œä¸€ä¸ªç»™å­ç»„ä»¶å±•ç¤ºï¼Œå¦ä¸€ä¸ªç»™å­™ç»„ä»¶å±•ç¤ºï¼Œé¦–å…ˆå°†è¿™ä¸¤ä¸ªæ•°æ®ä¼ é€’åˆ°å­ç»„ä»¶ä¸­ï¼ŒåŒæ—¶å°†ä¸¤ä¸ªæ”¹å˜msgçš„å‡½æ•°ä¼ å…¥ã€‚ 12345678910111213141516171819202122232425262728//child.vue&lt;template&gt; &lt;div class=&quot;box&quot;&gt; &lt;div @click=&quot;clickMsg&quot;&gt;&#123;&#123; childMsg &#125;&#125;&lt;/div&gt; &lt;div&gt;$attrs: &#123;&#123; $attrs &#125;&#125;&lt;/div&gt; &lt;GrandChild v-bind=&quot;$attrs&quot; v-on=&quot;$listeners&quot;&gt;&lt;/GrandChild&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import GrandChild from &quot;./grand-child&quot;;export default &#123; props: &#123; childMsg: &#123; type: String &#125; &#125;, methods: &#123; clickMsg() &#123; let &#123; childMsg &#125; = this; this.$emit( &quot;onChildMsg&quot;, childMsg.split(&quot;&quot;).reverse().join(&quot;&quot;) ); &#125; &#125;, components: &#123; GrandChild &#125;&#125;;&lt;/script&gt; åœ¨å­ç»„ä»¶ä¸­æˆ‘ä»¬é€šè¿‡propsè·å–å­ç»„ä»¶æ‰€éœ€è¦çš„å‚æ•°ï¼Œå³childMsgï¼›å‰©ä½™çš„å‚æ•°å°±è¢«å½’åˆ°äº†$attrså¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é¡µé¢ä¸­å±•ç¤ºå‡ºæ¥ï¼Œç„¶åæŠŠå®ƒç»§ç»­å¾€å­™ç»„ä»¶ä¸­ä¼ ï¼›åŒæ—¶æŠŠæ‰€æœ‰çš„ç›‘å¬å‡½æ•°å½’åˆ°$listenersï¼Œä¹Ÿç»§ç»­å¾€ä¸‹ä¼ ã€‚ 12345678910111213141516171819202122//grand-child.vue&lt;template&gt; &lt;div class=&quot;box1&quot; @click=&quot;clickMsg&quot;&gt;grand-child:&#123;&#123; grandChildMsg &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; props: &#123; grandChildMsg: &#123; type: String &#125; &#125;, methods: &#123; clickMsg() &#123; let &#123; grandChildMsg &#125; = this; this.$emit( &quot;onGrandChildMsg&quot;, grandChildMsg.split(&quot;&quot;).reverse().join(&quot;&quot;) ); &#125; &#125;&#125;;&lt;/script&gt; åœ¨å­™ç»„ä»¶ä¸­æˆ‘ä»¬ç»§ç»­å–å‡ºæ‰€éœ€è¦çš„æ•°æ®è¿›è¡Œå±•ç¤ºæˆ–è€…æ“ä½œï¼Œè¿è¡Œç»“æœå¦‚ä¸‹ï¼š å½“æˆ‘ä»¬åœ¨ç»„ä»¶ä¸Šèµ‹äºˆä¸€ä¸ªépropå£°æ˜æ—¶ï¼Œæ¯”å¦‚childç»„ä»¶ä¸Šçš„notuseå’Œgrandchildmsgå±æ€§æˆ‘ä»¬æ²¡æœ‰ç”¨åˆ°ï¼Œç¼–è¯‘ä¹‹åçš„ä»£ç ä¼šæŠŠè¿™ä¸ªå±æ€§å½“æˆåŸå§‹å±æ€§å¯¹å¾…ï¼Œæ·»åŠ åˆ°htmlåŸç”Ÿæ ‡ç­¾ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬æŸ¥çœ‹ä»£ç æ˜¯è¿™æ ·çš„ï¼š è¿™æ ·ä¼šå¾ˆéš¾çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»„ä»¶ä¸ŠåŠ ä¸ŠinheritAttrså±æ€§å°†å®ƒå»æ‰ï¼š 1234export default &#123; mounted()&#123;&#125;, inheritAttrs: false,&#125; æ€»ç»“ï¼š$attrså’Œ$listenerså¾ˆå¥½çš„è§£å†³äº†è·¨ä¸€çº§ç»„ä»¶ä¼ å€¼çš„é—®é¢˜ã€‚ provideå’Œinject è™½ç„¶$attrså’Œ$listenerså¯ä»¥å¾ˆæ–¹ä¾¿çš„ä»çˆ¶ç»„ä»¶ä¼ å€¼åˆ°å­™ç»„ä»¶ï¼Œä½†æ˜¯å¦‚æœè·¨äº†ä¸‰å››çº§ï¼Œå¹¶ä¸”æƒ³è¦çš„æ•°æ®å·²ç»è¢«ä¸Šçº§ç»„ä»¶å–å‡ºæ¥ï¼Œè¿™æ—¶$attrså°±ä¸èƒ½è§£å†³äº†ã€‚ provide/injectæ˜¯vue2.2+ç‰ˆæœ¬æ–°å¢çš„å±æ€§ï¼Œç®€å•æ¥è¯´å°±æ˜¯çˆ¶ç»„ä»¶ä¸­é€šè¿‡provideæ¥æä¾›å˜é‡, ç„¶åå†å­ç»„ä»¶ä¸­é€šè¿‡injectæ¥æ³¨å…¥å˜é‡ã€‚è¿™é‡Œinjectæ³¨å…¥çš„å˜é‡ä¸åƒ$attrsï¼Œåªèƒ½å‘ä¸‹ä¸€å±‚ï¼›injectä¸è®ºå­ç»„ä»¶åµŒå¥—æœ‰å¤šæ·±ï¼Œéƒ½èƒ½è·å–åˆ°ã€‚ 123456789101112131415161718192021222324252627282930//Parent.vue&lt;template&gt; &lt;div&gt; &lt;Child&gt;&lt;/Child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./child&quot;;export default &#123; components: &#123; Child &#125;, data() &#123; return &#123; childmsg: &quot;hello child&quot;, grandmsg: &quot;hello grand child&quot; &#125;; &#125;, provide() &#123; return &#123; childmsg: this.childmsg, grandmsg: this.grandmsg &#125;; &#125;, mounted() &#123; setTimeout(() =&gt; &#123; this.childmsg = &quot;hello new child&quot;; this.grandmsg = &quot;hello new grand child&quot;; &#125;, 2000); &#125;,&#125;;&lt;/script&gt; æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶é€šè¿‡provideæ³¨å…¥äº†ä¸¤ä¸ªå˜é‡ï¼Œå¹¶ä¸”åœ¨ä¸¤ç§’ä¹‹åä¿®æ”¹å˜é‡çš„å€¼ï¼Œç„¶åå°±åœ¨å­ç»„ä»¶å’Œå­™ç»„ä»¶å–å‡ºæ¥ã€‚ 12345678910111213141516171819202122232425262728//child.vue&lt;template&gt; &lt;div class=&quot;box&quot;&gt; &lt;div&gt;child-msg:&#123;&#123; childmsg &#125;&#125;&lt;/div&gt; &lt;div&gt;grand-msg:&#123;&#123; grandmsg &#125;&#125;&lt;/div&gt; &lt;GrandChild&gt;&lt;/GrandChild&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import GrandChild from &quot;./grand-child&quot;;export default &#123; inject: [&quot;childmsg&quot;, &quot;grandmsg&quot;], components: &#123; GrandChild &#125;,&#125;;&lt;/script&gt;//grand-child.vue&lt;template&gt; &lt;div class=&quot;box&quot;&gt; &lt;div&gt;child-msg:&#123;&#123; childmsg &#125;&#125;&lt;/div&gt; &lt;div&gt;grand-msg:&#123;&#123; grandmsg &#125;&#125;&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;GrandChild&quot;, inject: [&quot;childmsg&quot;, &quot;grandmsg&quot;],&#125;;&lt;/script&gt; å¯ä»¥çœ‹åˆ°å­ç»„ä»¶å’Œå­™ç»„ä»¶éƒ½èƒ½å–å‡ºå€¼ï¼Œå¹¶ä¸”æ¸²æŸ“å‡ºæ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€æ—¦å­ç»„ä»¶æ³¨å…¥äº†æŸä¸ªæ•°æ®ï¼Œåœ¨dataä¸­å°±ä¸èƒ½å†å£°æ˜è¿™ä¸ªæ•°æ®äº†ã€‚ åŒæ—¶ï¼Œè¿‡äº†ä¸¤ç§’åæˆ‘ä»¬å‘ç°childmsgå’Œgrandmsgçš„å€¼å¹¶æ²¡æœ‰æŒ‰ç…§é¢„æœŸçš„æ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è¯´å­ç»„ä»¶å¹¶æ²¡æœ‰å“åº”ä¿®æ”¹åçš„å€¼ï¼Œå®˜ç½‘çš„ä»‹ç»æ˜¯è¿™ä¹ˆè¯´çš„ï¼š æç¤ºï¼šprovide å’Œ inject ç»‘å®šå¹¶ä¸æ˜¯å¯å“åº”çš„ã€‚è¿™æ˜¯åˆ»æ„ä¸ºä¹‹çš„ã€‚ç„¶è€Œï¼Œå¦‚æœä½ ä¼ å…¥äº†ä¸€ä¸ªå¯ç›‘å¬çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå…¶å¯¹è±¡çš„å±æ€§è¿˜æ˜¯å¯å“åº”çš„ã€‚ vueå¹¶æ²¡æœ‰æŠŠprovideå’Œinjectè®¾è®¡æˆå“åº”å¼çš„ï¼Œè¿™æ˜¯vueæ•…æ„çš„ï¼Œä½†æ˜¯å¦‚æœä¼ å…¥äº†ä¸€ä¸ªå¯ç›‘å¬çš„å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥å“åº”äº†ï¼š 12345678910111213141516171819202122export default &#123; data() &#123; return &#123; respondData: &#123; name: &quot;hello respond&quot; &#125; &#125;; &#125;, provide() &#123; return &#123; respondData: this.respondData &#125;; &#125;, mounted() &#123; setTimeout(() =&gt; &#123; this.respondData.name = this.respondData.name .split(&quot;&quot;) .reverse() .join(&quot;&quot;); &#125;, 2000); &#125;,&#125; é‚£ä¹ˆä¸ºä»€ä¹ˆä¸Šé¢çš„propså’Œ$attrséƒ½æ˜¯å“åº”å¼çš„ï¼Œè¿ç ´åâ€œå•å‘æ•°æ®æµâ€çš„.syncä¿®é¥°ç¬¦éƒ½æ˜¯å“åº”å¼çš„ï¼Œä½†åˆ°äº†provide/injectå°±ä¸æ˜¯å“åº”å¼çš„äº†å‘¢ï¼Ÿåœ¨ç½‘ä¸Šæ‰¾äº†åŠå¤©çš„èµ„æ–™ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç¡®åˆ‡çš„ç­”æ¡ˆï¼Œæœ¬æ–‡å°±æ­¤ç»“æŸã€‚ å°±è¿™ä¹ˆç»“æŸäº†å—ï¼Ÿå½“ç„¶æ²¡æœ‰ï¼åœ¨ä¸€(zi)ä¸ª(ji)å“¥(xue)ä»¬(xi)çš„å¸®(yuan)åŠ©(ma)ä¸‹ï¼Œæˆ‘æ€»ç®—æ‰¾åˆ°äº†ç­”æ¡ˆã€‚é¦–å…ˆæˆ‘ä»¬è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæœ‰å¤šä¸ªå­ç»„ä»¶åŒæ—¶ä¾èµ–äºä¸€ä¸ªçˆ¶ç»„ä»¶æä¾›çš„æ•°æ®ï¼Œé‚£ä¹ˆä¸€æ—¦çˆ¶ç»„ä»¶ä¿®æ”¹äº†è¯¥å€¼ï¼Œé‚£ä¹ˆæ‰€æœ‰ç»„ä»¶éƒ½ä¼šå—åˆ°å½±å“ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çœ‹åˆ°çš„ï¼›è¿™ä¸€æ–¹é¢å¢åŠ äº†è€¦åˆåº¦ï¼Œå¦ä¸€æ–¹é¢ä½¿å¾—æ•°æ®å˜åŒ–ä¸å¯æ§åˆ¶ã€‚æ¥ç€çœ‹ä¸€ä¸‹vueæ˜¯æ€ä¹ˆæ¥å®ç°provide/injectçš„ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//src/core/instance/inject.js//éƒ¨åˆ†æ ¸å¿ƒæºç export function initProvide (vm: Component) &#123; const provide = vm.$options.provide if (provide) &#123; vm._provided = typeof provide === &#x27;function&#x27; ? provide.call(vm) : provide &#125;&#125;export function initInjections (vm: Component) &#123; const result = resolveInject(vm.$options.inject, vm) if (result) &#123; observerState.shouldConvert = false Object.keys(result).forEach(key =&gt; &#123; defineReactive(vm, key, result[key]) &#125;) observerState.shouldConvert = true &#125;&#125;export function resolveInject (inject: any, vm: Component): ?Object &#123; if (inject) &#123; const result = Object.create(null) const keys = hasSymbol ? Reflect.ownKeys(inject).filter(key =&gt; &#123; return Object.getOwnPropertyDescriptor(inject, key).enumerable &#125;) : Object.keys(inject) for (let i = 0; i &lt; keys.length; i++) &#123; const key = keys[i] const provideKey = inject[key].from let source = vm while (source) &#123; if (source._provided &amp;&amp; provideKey in source._provided) &#123; result[key] = source._provided[provideKey] break &#125; source = source.$parent &#125; if (!source) &#123; if (&#x27;default&#x27; in inject[key]) &#123; const provideDefault = inject[key].default result[key] = typeof provideDefault === &#x27;function&#x27; ? provideDefault.call(vm) : provideDefault &#125; &#125; &#125; return result &#125;&#125; å¯ä»¥çœ‹åˆ°åˆå§‹åŒ–provideçš„æ—¶å€™å°†çˆ¶ç»„ä»¶çš„provideæŒ‚è½½åˆ°_providedï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªå“åº”å¼çš„å¯¹è±¡ï¼›ç„¶åå­ç»„ä»¶é€šè¿‡$parentå‘ä¸ŠæŸ¥æ‰¾æ‰€æœ‰çˆ¶ç»„ä»¶çš„_providedè·å–ç¬¬ä¸€ä¸ªæœ‰ç›®æ ‡å±æ€§çš„å€¼ï¼Œç„¶åéå†ç»‘å®šåˆ°å­ç»„ä»¶ä¸Šï¼›å› ä¸ºåªæ˜¯åˆå§‹åŒ–çš„æ—¶å€™ç»‘å®šçš„ï¼Œè€Œä¸”_providedä¹Ÿä¸æ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥é€ æˆäº†provide/injectçš„è¿™ç§ç‰¹æ€§ã€‚ é‚£ä¹ˆprovide/injectè¿™ä¹ˆå±é™©ï¼Œåˆä¸æ˜¯å“åº”å¼çš„ï¼Œå®ƒèƒ½æ‹¿æ¥åšä»€ä¹ˆå‘¢ï¼Ÿæ‰“å¼€element-uiçš„æºç æœç´¢provideï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°éå¸¸å¤šçš„ç»„ä»¶ä½¿ç”¨äº†provide/injectï¼Œæˆ‘ä»¬å°±æ‹¿formã€form-itemå’Œbuttonä¸¾ä¸ªä¾‹å­ã€‚ formå’Œform-iteméƒ½å¯ä»¥ä¼ å…¥ä¸€ä¸ªå±æ€§sizeæ¥æ§åˆ¶å­ç»„ä»¶çš„å°ºå¯¸ï¼Œä½†æ˜¯å­ç»„ä»¶çš„ä½ç½®æ˜¯ä¸å›ºå®šçš„ï¼Œå¯èƒ½ä¼šåµŒå¥—äº†å¥½å‡ å±‚el-rowæˆ–è€…el-colï¼Œå¦‚æœä¸€å±‚ä¸€å±‚çš„é€šè¿‡propsä¼ sizeä¸‹å»ä¼šå¾ˆç¹çï¼Œè¿™æ˜¯provide/injectå°±æ´¾ä¸Šç”¨å¤„äº†ã€‚ 123456789101112131415161718192021222324252627//form-item.vueexport default &#123; provide() &#123; return &#123; elFormItem: this &#125;; &#125;,&#125;//button.vueexport default &#123; inject: &#123; elForm: &#123; default: &#x27;&#x27; &#125;, elFormItem: &#123; default: &#x27;&#x27; &#125; &#125;, computed: &#123; _elFormItemSize() &#123; return (this.elFormItem || &#123;&#125;).elFormItemSize; &#125;, buttonSize() &#123; return this.size || this._elFormItemSize || (this.$ELEMENT || &#123;&#125;).size; &#125;, &#125;,&#125; æˆ‘ä»¬é€šè¿‡çˆ¶ç»„ä»¶å°†elFormItemæœ¬èº«æ³¨å…¥åˆ°å­ç»„ä»¶ä¸­ï¼Œå­ç»„ä»¶é€šè¿‡injectè·å–çˆ¶ç»„ä»¶æœ¬èº«ç„¶ååŠ¨æ€åœ°è®¡ç®—buttonSizeã€‚ æ€»ç»“ï¼šprovide/injectèƒ½å¤Ÿè§£å†³å¤šå±‚ç»„ä»¶åµŒå¥—ä¼ å€¼çš„é—®é¢˜ï¼Œä½†æ˜¯æ˜¯éå“åº”çš„ï¼Œå³provideä¸injectä¹‹é—´æ²¡æœ‰ç»‘å®šï¼Œæ³¨å…¥çš„å€¼æ˜¯åœ¨å­ç»„ä»¶åˆå§‹åŒ–è¿‡ç¨‹ä¸­å†³å®šçš„ã€‚ EventBus EventBusæˆ‘åˆšå¼€å§‹ç›´æ¥ç¿»è¯‘ç†è§£ä¸ºäº‹ä»¶è½¦ï¼Œä½†æ¯”è¾ƒå®˜æ–¹çš„ç¿»è¯‘æ˜¯äº‹ä»¶æ€»çº¿ã€‚å®ƒçš„å®è´¨å°±æ˜¯åˆ›å»ºä¸€ä¸ªvueå®ä¾‹ï¼Œé€šè¿‡ä¸€ä¸ªç©ºçš„vueå®ä¾‹ä½œä¸ºæ¡¥æ¢å®ç°vueç»„ä»¶é—´çš„é€šä¿¡ã€‚å®ƒæ˜¯å®ç°éçˆ¶å­ç»„ä»¶é€šä¿¡çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä¸Šä¸‹å¹³è¡Œåœ°é€šçŸ¥å…¶ä»–ç»„ä»¶ï¼Œä½†ä¹Ÿå°±æ˜¯å¤ªæ–¹ä¾¿æ‰€ä»¥è‹¥ä½¿ç”¨ä¸æ…ï¼Œå°±ä¼šé€ æˆéš¾ä»¥ç»´æŠ¤çš„â€œç¾éš¾â€ã€‚ 123//utils/event-bus.jsimport Vue from &quot;vue&quot;;export default new Vue(); é¦–å…ˆåˆ›é€ ä¸€ä¸ªç©ºçš„vueå¯¹è±¡å¹¶å°†å…¶å¯¼å‡ºï¼Œä»–æ˜¯ä¸€ä¸ªä¸å…·å¤‡DOMçš„ç»„ä»¶ï¼Œå®ƒå…·æœ‰çš„ä»…ä»…åªæ˜¯å®ƒå®ä¾‹æ–¹æ³•è€Œå·²ï¼Œå› æ­¤å®ƒéå¸¸çš„è½»ä¾¿ã€‚ 123//main.jsimport bus from &quot;@/utils/event-bus&quot;;Vue.prototype.$bus = bus; å°†å…¶æŒ‚è½½åˆ°å…¨å±€ï¼Œå˜æˆå…¨å±€çš„äº‹ä»¶æ€»çº¿ï¼Œè¿™æ ·åœ¨ç»„ä»¶ä¸­å°±èƒ½å¾ˆæ–¹ä¾¿çš„è°ƒç”¨äº†ã€‚ 1234567891011121314151617//Parent.vue&lt;template&gt; &lt;div class=&quot;box&quot;&gt; &lt;Child1&gt;&lt;/Child1&gt; &lt;Child2&gt;&lt;/Child2&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child1 from &quot;./child1&quot;;import Child2 from &quot;./child2&quot;;export default &#123; components: &#123; Child1, Child2 &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬å…ˆå®šä¹‰äº†ä¸¤ä¸ªå­ç»„ä»¶child1å’Œchild2ï¼Œæˆ‘ä»¬å¸Œæœ›è¿™ä¸¤ä¸ªç»„ä»¶èƒ½å¤Ÿç›´æ¥ç»™å¯¹æ–¹å‘é€æ¶ˆæ¯ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//child1.vue&lt;template&gt; &lt;div&gt; &lt;div class=&quot;send&quot; @click=&quot;clickSend&quot;&gt;å‘é€æ¶ˆæ¯&lt;/div&gt; &lt;template v-for=&quot;(item, index) in msgList&quot;&gt; &lt;div :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt; &lt;/template&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; msgList: [] &#125;; &#125;, mounted() &#123; this.$bus.$on(&quot;getMsg1&quot;, res =&gt; &#123; this.msgList.push(res); &#125;); &#125;, methods: &#123; clickSend() &#123; this.$bus.$emit(&quot;getMsg2&quot;, &quot;hello from1:&quot; + parseInt(Math.random() * 20)); &#125; &#125;&#125;;&lt;/script&gt;//child2.vue&lt;template&gt; &lt;div&gt; &lt;div class=&quot;send&quot; @click=&quot;clickSend&quot;&gt;å‘é€æ¶ˆæ¯&lt;/div&gt; &lt;template v-for=&quot;(item, index) in msgList&quot;&gt; &lt;div :key=&quot;index&quot;&gt;&#123;&#123; item &#125;&#125;&lt;/div&gt; &lt;/template&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; msgList: [] &#125;; &#125;, mounted() &#123; this.$bus.$on(&quot;getMsg2&quot;, res =&gt; &#123; this.msgList.push(res); &#125;); &#125;, methods: &#123; clickSend() &#123; this.$bus.$emit(&quot;getMsg1&quot;, &quot;hello from2:&quot; + parseInt(Math.random() * 20)); &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬åˆå§‹åŒ–æ—¶åœ¨child1å’Œchild2ä¸­åˆ†åˆ«æ³¨å†Œäº†ä¸¤ä¸ªæ¥æ”¶äº‹ä»¶ï¼Œç„¶åç‚¹å‡»æŒ‰é’®æ—¶åˆ†åˆ«è§¦å‘è¿™ä¸¤ä¸ªè‡ªå®šä¹‰çš„äº‹ä»¶ï¼Œå¹¶ä¼ å…¥æ•°æ®ï¼Œæœ€åä¸¤ä¸ªç»„ä»¶åˆ†åˆ«èƒ½æ¥æ”¶åˆ°å¯¹æ–¹å‘é€çš„æ¶ˆæ¯ï¼Œæœ€åæ•ˆæœå¦‚ä¸‹ï¼š å‰é¢ä¹Ÿæåˆ°è¿‡ï¼Œå¦‚æœä½¿ç”¨ä¸å–„ï¼ŒEventBusä¼šæ˜¯ä¸€ç§ç¾éš¾ï¼Œåˆ°åº•æ˜¯ä»€ä¹ˆæ ·çš„â€œç¾éš¾â€äº†ï¼Ÿå¤§å®¶éƒ½çŸ¥é“vueæ˜¯å•é¡µåº”ç”¨ï¼Œå¦‚æœä½ åœ¨æŸä¸€ä¸ªé¡µé¢åˆ·æ–°äº†ä¹‹åï¼Œä¸ä¹‹ç›¸å…³çš„EventBusä¼šè¢«ç§»é™¤ï¼Œè¿™æ ·å°±å¯¼è‡´ä¸šåŠ¡èµ°ä¸ä¸‹å»ã€‚è¿˜è¦å°±æ˜¯å¦‚æœä¸šåŠ¡æœ‰åå¤æ“ä½œçš„é¡µé¢ï¼ŒEventBusåœ¨ç›‘å¬çš„æ—¶å€™å°±ä¼šè§¦å‘å¾ˆå¤šæ¬¡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸å¤§çš„éšæ‚£ã€‚è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¥½å¥½å¤„ç†EventBusåœ¨é¡¹ç›®ä¸­çš„å…³ç³»ã€‚é€šå¸¸ä¼šç”¨åˆ°ï¼Œåœ¨é¡µé¢æˆ–ç»„ä»¶é”€æ¯æ—¶ï¼ŒåŒæ—¶ç§»é™¤EventBusäº‹ä»¶ç›‘å¬ã€‚ 12345export default&#123; destroyed()&#123; $EventBus.$off(&#x27;event-name&#x27;) &#125;&#125; æ€»ç»“ï¼šEventBuså¯ä»¥ç”¨æ¥å¾ˆæ–¹ä¾¿çš„å®ç°å…„å¼Ÿç»„ä»¶å’Œè·¨çº§ç»„ä»¶çš„é€šä¿¡ï¼Œä½†æ˜¯ä½¿ç”¨ä¸å½“æ—¶ä¹Ÿä¼šå¸¦æ¥å¾ˆå¤šé—®é¢˜ï¼›æ‰€ä»¥é€‚åˆé€»è¾‘å¹¶ä¸å¤æ‚çš„å°é¡µé¢ï¼Œé€»è¾‘å¤æ‚æ—¶è¿˜æ˜¯å»ºè®®ä½¿ç”¨vuexã€‚ vuex åœ¨vueç»„ä»¶å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°éœ€è¦å°†å½“å‰ç»„ä»¶çš„çŠ¶æ€ä¼ é€’ç»™å…¶ä»–éçˆ¶å­ç»„ä»¶ç»„ä»¶ï¼Œæˆ–è€…ä¸€ä¸ªçŠ¶æ€éœ€è¦å…±äº«ç»™å¤šä¸ªç»„ä»¶ï¼Œè¿™æ—¶é‡‡ç”¨ä¸Šé¢çš„æ–¹å¼å°±ä¼šéå¸¸éº»çƒ¦ã€‚vueæä¾›äº†å¦ä¸€ä¸ªåº“vuexæ¥è§£å†³æ•°æ®ä¼ é€’çš„é—®é¢˜ï¼›åˆšå¼€å§‹ä¸Šæ‰‹ä¼šæ„Ÿè§‰vuexéå¸¸çš„éº»çƒ¦ï¼Œå¾ˆå¤šæ¦‚å¿µä¹Ÿå®¹æ˜“æ··æ·†ï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œæœ¬æ–‡ä¸æ·±å…¥è®²è§£vuexã€‚ vuexå®ç°äº†å•å‘çš„æ•°æ®æµï¼Œåœ¨å…¨å±€å®šä¹‰äº†ä¸€ä¸ªStateå¯¹è±¡ç”¨æ¥å­˜å‚¨æ•°æ®ï¼Œå½“ç»„ä»¶è¦ä¿®æ”¹Stateä¸­çš„æ•°æ®æ—¶ï¼Œå¿…é¡»é€šè¿‡Mutationè¿›è¡Œæ“ä½œã€‚ 1234567891011121314151617181920212223242526272829303132//store/count.jsexport default &#123; namespaced: true, state: &#123; num: 1 &#125;, mutations: &#123; ADD_NUM(state) &#123; state.num = state.num + 1; &#125;, SUB_NUM(state) &#123; state.num = state.num - 1; &#125; &#125;, actions: &#123; ADD_SYNC(&#123; commit &#125;) &#123; setTimeout(() =&gt; &#123; commit(&quot;ADD_NUM&quot;); &#125;, 1000); &#125;, SUB_SYNC(&#123; commit &#125;) &#123; setTimeout(() =&gt; &#123; commit(&quot;SUB_NUM&quot;); &#125;, 1000); &#125; &#125;&#125;;//store/index.jsimport count from &quot;./count&quot;;export default new Vuex.Store(&#123; modules: &#123; count &#125;,&#125;); æˆ‘ä»¬é¦–å…ˆåœ¨å…¨å±€å®šä¹‰äº†count.jsæ¨¡å—ç”¨æ¥å­˜æ”¾æ•°æ®å’Œä¿®æ”¹æ•°æ®çš„æ–¹æ³•ï¼Œç„¶ååœ¨å…¨å±€å¼•å…¥ã€‚ 12345678910111213141516171819202122232425262728293031323334//child.vue&lt;template&gt; &lt;div&gt; &lt;div&gt;å½“å‰ï¼š&#123;&#123; num &#125;&#125;&lt;/div&gt; &lt;div class=&quot;opt&quot; @click=&quot;clickAdd&quot;&gt;+&lt;/div&gt; &lt;div class=&quot;opt&quot; @click=&quot;clickSub&quot;&gt;-&lt;/div&gt; &lt;div class=&quot;opt&quot; @click=&quot;clickAddSync&quot;&gt;a+&lt;/div&gt; &lt;div class=&quot;opt&quot; @click=&quot;clickSubSync&quot;&gt;a-&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; name: &quot;Child&quot;, computed: &#123; num() &#123; return this.$store.state.count.num; &#125; &#125;, methods: &#123; clickAdd() &#123; this.$store.commit(&quot;count/ADD_NUM&quot;); &#125;, clickSub() &#123; this.$store.commit(&quot;count/SUB_NUM&quot;); &#125;, clickAddSync() &#123; this.$store.dispatch(&quot;count/ADD_SYNC&quot;); &#125;, clickSubSync() &#123; this.$store.dispatch(&quot;count/SUB_SYNC&quot;); &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬å°±å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸­æ¥è°ƒç”¨mutationså’Œactionsä¸­çš„æ–¹æ³•æ“ä½œæ•°æ®äº†ã€‚vuexåœ¨æ•°æ®ä¼ å€¼å’Œæ“ä½œæ•°æ®ç»´æŠ¤èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ã€‚ $refs æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨vueä¸­ç›´æ¥æ¥æ“ä½œDOMå…ƒç´ ï¼Œæ¯”å¦‚è·å–DIVçš„é«˜åº¦ï¼Œæˆ–è€…ç›´æ¥è°ƒç”¨å­ç»„ä»¶çš„ä¸€äº›å‡½æ•°ï¼›è™½ç„¶åŸç”Ÿçš„JSä¹Ÿèƒ½è·å–åˆ°ï¼Œä½†æ˜¯vueä¸ºæˆ‘ä»¬æä¾›äº†æ›´æ–¹ä¾¿çš„ä¸€ä¸ªå±æ€§ï¼š$refsã€‚å¦‚æœåœ¨æ™®é€šçš„DOMå…ƒç´ ä¸Šä½¿ç”¨ï¼Œè·å–åˆ°çš„å°±æ˜¯DOMå…ƒç´ ï¼›å¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œè·å–çš„å°±æ˜¯ç»„ä»¶çš„å®ä¾‹å¯¹è±¡ã€‚ 12345678910111213141516171819//child.vue&lt;template&gt; &lt;div&gt;åˆå§‹åŒ–:&#123;&#123; num &#125;&#125;&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; num: 0 &#125;; &#125;, methods: &#123; addNum() &#123; this.num += 1; &#125;, subNum() &#123; this.num -= 1; &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬é¦–å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„å­ç»„ä»¶ï¼Œæœ‰ä¸¤ä¸ªå‡½æ•°ç”¨æ¥å¢å‡numçš„å€¼ã€‚ 1234567891011121314151617181920212223242526272829&lt;template&gt; &lt;div&gt; &lt;Child ref=&quot;child&quot;&gt;&lt;/Child&gt; &lt;div class=&quot;opt&quot; ref=&quot;opt_add&quot; @click=&quot;clickAddBtn&quot;&gt;+&lt;/div&gt; &lt;div class=&quot;opt&quot; ref=&quot;opt_sub&quot; @click=&quot;clickSubBtn&quot;&gt;-&lt;/div&gt; &lt;div class=&quot;opt&quot; ref=&quot;opt_show&quot; @click=&quot;clickShowBtn&quot;&gt;show&lt;/div&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./child&quot;;export default &#123; components: &#123; Child &#125;, data() &#123; return &#123;&#125;; &#125;, methods: &#123; clickAddBtn() &#123; this.$refs.child.addNum(); &#125;, clickSubBtn() &#123; this.$refs.child.subNum(); &#125;, clickShowBtn() &#123; console.log(this.$refs.child); console.log(this.$refs.child.num); &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬ç»™å­ç»„ä»¶å¢åŠ ä¸€ä¸ªrefå±æ€§childï¼Œç„¶åé€šè¿‡$refs.childæ¥è·å–å­ç»„ä»¶çš„å®ä¾‹ï¼Œé€šè¿‡å®ä¾‹æ¥è°ƒç”¨å­ç»„ä»¶ä¸­çš„å‡½æ•°ã€‚ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è·å–åˆ°çš„æ˜¯ä¸€ä¸ªVueComponentå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…æ‹¬äº†å­ç»„ä»¶çš„æ‰€æœ‰æ•°æ®å’Œå‡½æ•°ï¼Œå¯ä»¥å¯¹å­ç»„ä»¶è¿›è¡Œä¸€äº›æ“ä½œã€‚ $parentå’Œ$children å¦‚æœé¡µé¢æœ‰å¤šä¸ªç›¸åŒçš„å­ç»„ä»¶éœ€è¦æ“ä½œçš„è¯ï¼Œ$refsä¸€ä¸ªä¸€ä¸ªæ“ä½œèµ·æ¥æ¯”è¾ƒç¹çï¼Œvueæä¾›äº†å¦å¤–çš„å±æ€§ï¼š$parentå’Œ$childrenæ¥ç»Ÿä¸€é€‰æ‹©ã€‚ 12345678910111213141516171819202122232425262728293031323334//child.vue&lt;template&gt; &lt;div&gt;child&lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123; mounted() &#123; console.log(this.$parent.show()); console.log(&quot;Child&quot;, this.$children, this.$parent); &#125;&#125;;&lt;/script&gt;//Parent.vue&lt;template&gt; &lt;div&gt; parent &lt;Child&gt;&lt;/Child&gt; &lt;Child&gt;&lt;/Child&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import Child from &quot;./child&quot;;export default &#123; components: &#123; Child &#125;, mounted() &#123; console.log(&quot;Parent&quot;, this.$children, this.$parent); &#125;, methods: &#123; show() &#123; return &quot;to child data&quot;; &#125; &#125;&#125;;&lt;/script&gt; æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­æ’å…¥äº†ä¸¤ä¸ªç›¸åŒçš„å­ç»„ä»¶ï¼Œåœ¨å­ç»„ä»¶ä¸­é€šè¿‡$parentè°ƒç”¨äº†çˆ¶ç»„ä»¶çš„å‡½æ•°ï¼Œå¹¶åœ¨çˆ¶ç»„ä»¶é€šè¿‡$childrenè·å–å­ç»„ä»¶å®ä¾‹çš„æ•°ç»„ã€‚ æˆ‘ä»¬åœ¨Parentä¸­æ‰“å°å‡º$parentå±æ€§çœ‹åˆ°æ˜¯æœ€å¤–å±‚#appçš„å®ä¾‹ã€‚ å¸¸è§ä½¿ç”¨åœºæ™¯å¯ä»¥åˆ†ä¸ºä¸‰ç±»: çˆ¶å­ç»„ä»¶é€šä¿¡: props; $parent/$children; provide/inject; $ref; $attrs/$listeners å…„å¼Ÿç»„ä»¶é€šä¿¡: EventBus; Vuex è·¨çº§é€šä¿¡: EventBus; Vuex; provide/inject; $attrs/$listeners","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"},{"name":"ç»„ä»¶åŒ–","slug":"Componentization","permalink":"https://xieyufei.com/tags/Componentization/"}]},{"title":"å¯¹JSäº‹ä»¶æµçš„ç†è§£","date":"2020-03-06T03:00:00.000Z","path":"2020/03/06/Js-Events.html","text":"åœ¨JSäº‹ä»¶å¾ªç¯ä¸­ï¼Œæˆ‘ä»¬æ¥è§¦äº†å¾ˆå¤šJSè‡ªå·±è§¦å‘çš„äº‹ä»¶ã€‚ä½†æ˜¯å½“æˆ‘ä»¬åœ¨ç½‘é¡µä¸Šè¿›è¡ŒæŸäº›ç±»å‹çš„äº¤äº’æ—¶ï¼Œä¹Ÿä¼šè§¦å‘äº‹ä»¶ï¼Œæ¯”å¦‚åœ¨æŸäº›å†…å®¹ä¸Šçš„ç‚¹å‡»ã€é¼ æ ‡ç»è¿‡æŸä¸ªç‰¹å®šå…ƒç´ æˆ–æŒ‰ä¸‹é”®ç›˜ä¸Šçš„æŸäº›æŒ‰é”®ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹äº§ç”Ÿä¸€ä¸ªäº‹ä»¶æ—¶ï¼Œè¯¥äº‹ä»¶ä¼šåœ¨å…ƒç´ ç»“ç‚¹ä¸æ ¹èŠ‚ç‚¹ä¹‹é—´æŒ‰ç‰¹å®šçš„é¡ºåºä¼ æ’­ï¼Œè·¯å¾„æ‰€ç»è¿‡çš„èŠ‚ç‚¹éƒ½ä¼šæ”¶åˆ°è¯¥äº‹ä»¶ï¼Œè¿™ä¸ªä¼ æ’­è¿‡ç¨‹ç§°ä¸ºDOMäº‹ä»¶æµã€‚ ä»€ä¹ˆæ˜¯äº‹ä»¶ JavaScriptå’ŒHTMLä¹‹é—´çš„äº¤äº’æ˜¯é€šè¿‡äº‹ä»¶å®ç°çš„ã€‚äº‹ä»¶ï¼Œå°±æ˜¯æ–‡æ¡£æˆ–æµè§ˆå™¨çª—å£å‘ç”Ÿçš„ä¸€äº›ç‰¹å®šçš„äº¤äº’ç¬é—´ã€‚å¯ä»¥ä½¿ç”¨ç›‘å¬å™¨ï¼ˆæˆ–äº‹ä»¶å¤„ç†ç¨‹åºï¼‰æ¥é¢„å®šäº‹ä»¶ï¼Œä»¥ä¾¿äº‹ä»¶å‘ç”Ÿæ—¶æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚é€šä¿—çš„è¯´ï¼Œè¿™ç§æ¨¡å‹å…¶å®å°±æ˜¯ä¸€ä¸ªè§‚å¯Ÿè€…æ¨¡å¼ã€‚ï¼ˆäº‹ä»¶æ˜¯å¯¹è±¡ä¸»é¢˜ï¼Œè€Œè¿™ä¸€ä¸ªä¸ªçš„ç›‘å¬å™¨å°±æ˜¯ä¸€ä¸ªä¸ªè§‚å¯Ÿè€…ï¼‰ ä»€ä¹ˆæ˜¯äº‹ä»¶æµ äº‹ä»¶æµæè¿°çš„å°±æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚è€Œæ—©æœŸçš„IEå’ŒNetscapeæå‡ºäº†å®Œå…¨ç›¸åçš„äº‹ä»¶æµæ¦‚å¿µï¼ŒIEäº‹ä»¶æµæ˜¯äº‹ä»¶å†’æ³¡ï¼Œè€ŒNetscapeçš„äº‹ä»¶æµå°±æ˜¯äº‹ä»¶æ•è·ã€‚ äº‹ä»¶å†’æ³¡äº‹ä»¶æ•è· IEæå‡ºçš„äº‹ä»¶æµæ˜¯äº‹ä»¶å†’æ³¡ï¼Œå³ä»ä¸‹è‡³ä¸Šï¼Œä»ç›®æ ‡è§¦å‘çš„å…ƒç´ é€çº§å‘ä¸Šä¼ æ’­ï¼Œç›´åˆ°windowå¯¹è±¡ã€‚ è€ŒNetscapeçš„äº‹ä»¶æµå°±æ˜¯äº‹ä»¶æ•è·ï¼Œå³ä»documenté€çº§å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ ã€‚ç”±äºIEä½ç‰ˆæœ¬æµè§ˆå™¨ä¸æ”¯æŒï¼Œæ‰€ä»¥å¾ˆå°‘ä½¿ç”¨äº‹ä»¶æ•è·ã€‚ åæ¥ECMAScriptåœ¨DOM2ä¸­å¯¹äº‹ä»¶æµè¿›è¡Œäº†è¿›ä¸€æ­¥è§„èŒƒï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯ä¸Šè¿°äºŒè€…çš„ç»“åˆã€‚ DOM2çº§äº‹ä»¶è§„å®šçš„äº‹ä»¶æµåŒ…æ‹¬ä¸‰ä¸ªé˜¶æ®µï¼šï¼ˆ1ï¼‰äº‹ä»¶æ•è·é˜¶æ®µï¼ˆ2ï¼‰å¤„äºç›®æ ‡é˜¶æ®µï¼ˆ3ï¼‰äº‹ä»¶å†’æ³¡é˜¶æ®µ DOMäº‹ä»¶å¤„ç† DOMèŠ‚ç‚¹ä¸­æœ‰äº†äº‹ä»¶ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦å¯¹äº‹ä»¶è¿›è¡Œå¤„ç†ï¼Œè€ŒDOMäº‹ä»¶å¤„ç†åˆ†ä¸º4ä¸ªçº§åˆ«ï¼šDOM0çº§äº‹ä»¶å¤„ç†ï¼ŒDOM0çº§äº‹ä»¶å¤„ç†ï¼ŒDOM2çº§äº‹ä»¶å¤„ç†å’ŒDOM3çº§äº‹ä»¶å¤„ç†ã€‚ å…¶ä¸­DOM1çº§äº‹ä»¶å¤„ç†æ ‡å‡†ä¸­å¹¶æ²¡æœ‰å®šä¹‰ç›¸å…³çš„å†…å®¹ï¼Œæ‰€ä»¥æ²¡æœ‰æ‰€è°“çš„DOM1äº‹ä»¶å¤„ç†ï¼›DOM3çº§äº‹ä»¶åœ¨DOM2çº§äº‹ä»¶çš„åŸºç¡€ä¸Šæ·»åŠ äº†æ›´å¤šçš„äº‹ä»¶ç±»å‹ã€‚ DOM0 DOM0çº§äº‹ä»¶å…·æœ‰æå¥½çš„è·¨æµè§ˆå™¨ä¼˜åŠ¿ï¼Œä¼šä»¥æœ€å¿«çš„é€Ÿåº¦ç»‘å®šã€‚ç¬¬ä¸€ç§æ–¹å¼æ˜¯å†…è”æ¨¡å‹ï¼ˆè¡Œå†…ç»‘å®šï¼‰ï¼Œå°†å‡½æ•°åç›´æ¥ä½œä¸ºhtmlæ ‡ç­¾ä¸­å±æ€§çš„å±æ€§å€¼ã€‚ 123456&lt;div onclick=&quot;btnClick()&quot;&gt;click&lt;/div&gt;&lt;script&gt;function btnClick()&#123; console.log(&quot;hello&quot;);&#125;&lt;/script&gt; å†…è”æ¨¡å‹çš„ç¼ºç‚¹æ˜¯ä¸ç¬¦åˆw3cä¸­å…³äºå†…å®¹ä¸è¡Œä¸ºåˆ†ç¦»çš„åŸºæœ¬è§„èŒƒã€‚ç¬¬äºŒç§æ–¹å¼æ˜¯è„šæœ¬æ¨¡å‹ï¼ˆåŠ¨æ€ç»‘å®šï¼‰ï¼Œé€šè¿‡åœ¨JSä¸­é€‰ä¸­æŸä¸ªèŠ‚ç‚¹ï¼Œç„¶åç»™èŠ‚ç‚¹æ·»åŠ onclickå±æ€§ã€‚ 1234567&lt;div id=&quot;btn&quot;&gt;ç‚¹å‡»&lt;/div&gt;&lt;script&gt;var btn=document.getElementById(&quot;btn&quot;);btn.onclick=function()&#123; console.log(&quot;hello&quot;);&#125;&lt;/script&gt; ç‚¹å‡»è¾“å‡ºhelloï¼Œæ²¡æœ‰é—®é¢˜ï¼›å¦‚æœæˆ‘ä»¬ç»™å…ƒç´ æ·»åŠ ä¸¤ä¸ªäº‹ä»¶ 12345678910&lt;div id=&quot;btn&quot;&gt;ç‚¹å‡»&lt;/div&gt;&lt;script&gt;var btn=document.getElementById(&quot;btn&quot;);btn.onclick=function()&#123; console.log(&quot;hello&quot;);&#125;btn.onclick=function()&#123; console.log(&quot;hello again&quot;);&#125;&lt;/script&gt; è¿™æ—¶å€™åªæœ‰è¾“å‡ºhello againï¼Œå¾ˆæ˜æ˜¾ï¼Œç¬¬ä¸€ä¸ªäº‹ä»¶å‡½æ•°è¢«ç¬¬äºŒä¸ªäº‹ä»¶å‡½æ•°ç»™è¦†ç›–æ‰ï¼Œæ‰€ä»¥è„šæœ¬æ¨¡å‹çš„ç¼ºç‚¹æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹åªèƒ½æ·»åŠ ä¸€æ¬¡åŒç±»å‹äº‹ä»¶ã€‚è®©æˆ‘ä»¬æŠŠdivæ‰©å±•åˆ°3ä¸ªã€‚ 1234567891011121314151617181920212223&lt;div id=&quot;btn3&quot;&gt; btn3 &lt;div id=&quot;btn2&quot;&gt; btn2 &lt;div id=&quot;btn1&quot;&gt; btn1 &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script&gt; let btn1 = document.getElementById(&quot;btn1&quot;); let btn2 = document.getElementById(&quot;btn2&quot;); let btn3 = document.getElementById(&quot;btn3&quot;); btn1.onclick=function()&#123; console.log(1) &#125; btn2.onclick=function()&#123; console.log(2) &#125; btn3.onclick=function()&#123; console.log(3) &#125;&lt;/script&gt; å½“æˆ‘ä»¬ç‚¹å‡»btn3çš„æ—¶å€™è¾“å‡º3ï¼Œé‚£å½“æˆ‘ä»¬ç‚¹å‡»btn1çš„æ—¶å€™å‘¢ï¼Ÿ æˆ‘ä»¬å‘ç°æœ€å…ˆè§¦å‘çš„æ˜¯æœ€åº•å±‚btn1çš„äº‹ä»¶ï¼Œæœ€åæ‰æ˜¯é¡¶å±‚btn3çš„äº‹ä»¶ï¼Œå› æ­¤å¾ˆæ˜æ˜¾æ˜¯äº‹ä»¶å†’æ³¡ã€‚DOM0çº§åªæ”¯æŒå†’æ³¡é˜¶æ®µã€‚ DOM2 è¿›ä¸€æ­¥è§„èŒƒä¹‹åï¼Œæœ‰äº†DOM2çº§äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå…¶ä¸­å®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼š addEventListener() â€”æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨ removeEventListener() â€”åˆ é™¤äº‹ä»¶ä¾¦å¬å™¨ å‡½æ•°å‡æœ‰3ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å¤„ç†çš„äº‹ä»¶åç¬¬äºŒä¸ªå‚æ•°æ˜¯ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºçš„å‡½æ•°ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œé»˜è®¤falseè¡¨ç¤ºä½¿ç”¨å†’æ³¡æœºåˆ¶ï¼Œtrueè¡¨ç¤ºæ•è·æœºåˆ¶ã€‚ 12345678910111213&lt;div id=&quot;btn&quot;&gt;ç‚¹å‡»&lt;/div&gt; &lt;script&gt;var btn=document.getElementById(&quot;btn&quot;);btn.addEventListener(&quot;click&quot;,hello,false);btn.addEventListener(&quot;click&quot;,helloagain,false);function hello()&#123; console.log(&quot;hello&quot;);&#125;function helloagain()&#123; console.log(&quot;hello again&quot;);&#125;&lt;/script&gt; è¿™æ—¶å€™ä¸¤ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºéƒ½èƒ½å¤ŸæˆåŠŸè§¦å‘ï¼Œè¯´æ˜å¯ä»¥ç»‘å®šå¤šä¸ªäº‹ä»¶å¤„ç†ç¨‹åºï¼Œä½†æ˜¯æ³¨æ„ï¼Œå¦‚æœå®šä¹‰äº†ä¸€æ‘¸ä¸€æ ·æ—¶ç›‘å¬æ–¹æ³•ï¼Œæ˜¯ä¼šå‘ç”Ÿè¦†ç›–çš„ï¼Œå³åŒæ ·çš„äº‹ä»¶å’Œäº‹ä»¶æµæœºåˆ¶ä¸‹ç›¸åŒæ–¹æ³•åªä¼šè§¦å‘ä¸€æ¬¡ï¼Œ 12345678910&lt;div id=&quot;btn&quot;&gt;ç‚¹å‡»&lt;/div&gt; &lt;script&gt;var btn=document.getElementById(&quot;btn&quot;);btn.addEventListener(&quot;click&quot;,hello,false);btn.addEventListener(&quot;click&quot;,hello,false);function hello()&#123; console.log(&quot;hello&quot;);&#125;&lt;/script&gt; è¿™æ—¶å€™helloåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼›è®©æˆ‘ä»¬æŠŠdivæ‰©å±•åˆ°3ä¸ªã€‚ 1234567891011121314151617181920212223&lt;div id=&quot;btn3&quot;&gt; btn3 &lt;div id=&quot;btn2&quot;&gt; btn2 &lt;div id=&quot;btn1&quot;&gt; btn1 &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script&gt; let btn1 = document.getElementById(&#x27;btn1&#x27;); let btn2 = document.getElementById(&#x27;btn2&#x27;); let btn3 = document.getElementById(&#x27;btn3&#x27;); btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(1) &#125;, true) btn2.addEventListener(&#x27;click&#x27;,function()&#123; console.log(2) &#125;, true) btn3.addEventListener(&#x27;click&#x27;,function()&#123; console.log(3) &#125;, true)&lt;/script&gt; è¿™æ—¶å€™çœ‹åˆ°é¡ºåºå’ŒDOM0ä¸­çš„é¡ºåºåè¿‡æ¥äº†ï¼Œæœ€å¤–å±‚çš„btnæœ€å…ˆè§¦å‘ï¼Œå› ä¸ºaddEventListeneræœ€åä¸€ä¸ªå‚æ•°æ˜¯trueï¼Œæ•è·é˜¶æ®µè¿›è¡Œå¤„ç†ã€‚ é‚£ä¹ˆå†’æ³¡å’Œæ•è·é˜¶æ®µè°å…ˆæ‰§è¡Œå‘¢ï¼Ÿæˆ‘ä»¬ç»™æ¯ä¸ªå…ƒç´ åˆ†åˆ«ç»‘å®šäº†å†’æ³¡å’Œæ•è·ä¸¤ä¸ªäº‹ä»¶ã€‚ 1234567891011121314151617181920btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn1æ•è·&#x27;)&#125;, true)btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn1å†’æ³¡&#x27;)&#125;, false)btn2.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn2æ•è·&#x27;)&#125;, true)btn2.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn2å†’æ³¡&#x27;)&#125;, false)btn3.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn3æ•è·&#x27;)&#125;, true)btn3.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn2å†’æ³¡&#x27;)&#125;, false) æˆ‘ä»¬çœ‹åˆ°å…ˆæ‰§è¡Œæ•è·é˜¶æ®µçš„å¤„ç†ç¨‹åºï¼Œåæ‰§è¡Œå†’æ³¡é˜¶æ®µçš„å¤„ç†ç¨‹åºï¼Œæˆ‘ä»¬æŠŠé¡ºåºæ¢ä¸€ä¸‹å†çœ‹è¿è¡Œç»“æœï¼š 1234567891011121314151617181920btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn1å†’æ³¡&#x27;)&#125;, false)btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn1æ•è·&#x27;)&#125;, true)btn2.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn2å†’æ³¡&#x27;)&#125;, false)btn2.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn2æ•è·&#x27;)&#125;, true)btn3.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn3å†’æ³¡&#x27;)&#125;, false)btn3.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn3æ•è·&#x27;)&#125;, true) æˆ‘ä»¬å‘ç°åœ¨è§¦å‘çš„ç›®æ ‡å…ƒç´ ä¸Šä¸åŒºåˆ†å†’æ³¡è¿˜æ˜¯æ•è·ï¼ŒæŒ‰ç»‘å®šçš„é¡ºåºæ¥æ‰§è¡Œã€‚ é˜»æ­¢å†’æ³¡ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç‚¹å‡»äº‹ä»¶ä¸å†ç»§ç»­å‘ä¸Šå†’æ³¡ï¼Œæˆ‘ä»¬åœ¨btn2ä¸ŠåŠ ä¸ŠstopPropagationå‡½æ•°ï¼Œé˜»æ­¢ç¨‹åºå†’æ³¡ã€‚ 123456789101112131415161718192021btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn1å†’æ³¡&#x27;)&#125;, false)btn1.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn1æ•è·&#x27;)&#125;, true)btn2.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn2å†’æ³¡&#x27;)&#125;, false)btn2.addEventListener(&#x27;click&#x27;,function(ev)&#123; ev.stopPropagation(); console.log(&#x27;btn2æ•è·&#x27;)&#125;, true)btn3.addEventListener(&#x27;click&#x27;,function()&#123; console.log(&#x27;btn3å†’æ³¡&#x27;)&#125;, false)btn3.addEventListener(&#x27;click&#x27;,function(e)&#123; console.log(&#x27;btn3æ•è·&#x27;)&#125;, true) å¯ä»¥çœ‹åˆ°btn2æ•è·é˜¶æ®µæ‰§è¡Œåä¸å†ç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚ äº‹ä»¶å§”æ‰˜ å¦‚æœæœ‰å¤šä¸ªDOMèŠ‚ç‚¹éœ€è¦ç›‘å¬äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œç»™æ¯ä¸ªDOMç»‘å®šç›‘å¬å‡½æ•°ï¼Œä¼šæå¤§çš„å½±å“é¡µé¢çš„æ€§èƒ½ï¼Œå› ä¸ºæˆ‘ä»¬é€šè¿‡äº‹ä»¶å§”æ‰˜æ¥è¿›è¡Œä¼˜åŒ–ï¼Œäº‹ä»¶å§”æ‰˜åˆ©ç”¨çš„å°±æ˜¯å†’æ³¡çš„åŸç†ã€‚ 123456789101112131415&lt;ul&gt; &lt;li&gt;1&lt;/li&gt; &lt;li&gt;2&lt;/li&gt; &lt;li&gt;3&lt;/li&gt; &lt;li&gt;4&lt;/li&gt; &lt;li&gt;5&lt;/li&gt;&lt;/ul&gt;&lt;script&gt; var li_list = document.getElementsByTagName(&#x27;li&#x27;) for(let index = 0;index&lt;li_list.length;index++)&#123; li_list[index].addEventListener(&#x27;click&#x27;, function(ev)&#123; console.log(ev.currentTarget.innerHTML) &#125;) &#125;&lt;/script&gt; æ­£å¸¸æƒ…å†µæˆ‘ä»¬ç»™æ¯ä¸€ä¸ªliéƒ½ä¼šç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œä½†æ˜¯å¦‚æœè¿™æ—¶å€™liæ˜¯åŠ¨æ€æ¸²æŸ“çš„ï¼Œæ•°æ®åˆç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œæ¯æ¬¡æ¸²æŸ“åï¼ˆæœ‰æ–°å¢çš„æƒ…å†µï¼‰æˆ‘ä»¬è¿˜éœ€è¦é‡æ–°æ¥ç»‘å®šï¼Œåˆç¹çåˆè€—æ€§èƒ½ï¼›è¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†ç»‘å®šäº‹ä»¶å§”æ‰˜åˆ°liçš„çˆ¶çº§å…ƒç´ ï¼Œå³ulã€‚ 1234var ul_dom = document.getElementsByTagName(&#x27;ul&#x27;)ul_dom[0].addEventListener(&#x27;click&#x27;, function(ev)&#123; console.log(ev.target.innerHTML)&#125;) ä¸Šé¢ä»£ç ä¸­æˆ‘ä»¬ä½¿ç”¨äº†ä¸¤ç§è·å–ç›®æ ‡å…ƒç´ çš„æ–¹å¼ï¼Œtargetå’ŒcurrentTargetï¼Œé‚£ä¹ˆä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼š targetè¿”å›è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼Œä¸ä¸€å®šæ˜¯ç»‘å®šäº‹ä»¶çš„å…ƒç´  currentTargetè¿”å›çš„æ˜¯ç»‘å®šäº‹ä»¶çš„å…ƒç´  å› æ­¤æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹äº‹ä»¶å§”æ‰˜çš„ä¼˜ç‚¹: æé«˜æ€§èƒ½:æ¯ä¸€ä¸ªå‡½æ•°éƒ½ä¼šå ç”¨å†…å­˜ç©ºé—´ï¼Œåªéœ€æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºä»£ç†æ‰€æœ‰äº‹ä»¶ï¼Œæ‰€å ç”¨çš„å†…å­˜ç©ºé—´æ›´å°‘ã€‚ åŠ¨æ€ç›‘å¬:ä½¿ç”¨äº‹ä»¶å§”æ‰˜å¯ä»¥è‡ªåŠ¨ç»‘å®šåŠ¨æ€æ·»åŠ çš„å…ƒç´ ï¼Œå³æ–°å¢çš„èŠ‚ç‚¹ä¸éœ€è¦ä¸»åŠ¨æ·»åŠ ä¹Ÿå¯ä»¥ä¸€æ ·å…·æœ‰å’Œå…¶ä»–å…ƒç´ ä¸€æ ·çš„äº‹ä»¶ã€‚ å‚è€ƒJSäº‹ä»¶æµå’Œäº‹ä»¶å§”æ‰˜ä½ çœŸçš„ç†è§£äº‹ä»¶å†’æ³¡å’Œäº‹ä»¶æ•è·å—ï¼Ÿå‰ç«¯å°çŸ¥è¯†â€“JavaScriptäº‹ä»¶æµ","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"js","slug":"js","permalink":"https://xieyufei.com/tags/js/"}]},{"title":"Vueå®ä¾‹ä¸ºä»€ä¹ˆåªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ ï¼Ÿ","date":"2020-02-29T03:00:00.000Z","path":"2020/02/29/Vue-One-Root.html","text":"æˆ‘ä»¬åœ¨åˆå­¦Vueæ—¶ï¼Œç¬¬ä¸€ä¸ªä¸Šæ‰‹çš„ä¾‹å­åŸºæœ¬éƒ½æ˜¯ new Vue({el:â€™#appâ€™})ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆVueå®ä¾‹åªèƒ½æŒ‚è½½åœ¨ä¸€ä¸ªdivä¸Šå‘¢ï¼ŸåŒæ ·çš„å½“æˆ‘ä»¬å¼€å§‹å†™ç¬¬ä¸€ä¸ªVueé¡µé¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¯•å›¾åœ¨templateæ ‡ç­¾ä¸‹å†™ä¸¤ä¸ªdivï¼ŒVueæé†’æˆ‘ä»¬åªèƒ½å†™ä¸€ä¸ªå…ƒç´ ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆåªèƒ½æœ‰ä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿå¾ˆå¤šæ—¶å€™æˆ‘ä»¬éƒ½å·²ç»ä¹ ä»¥ä¸ºå¸¸ï¼Œä½†æ˜¯å´è¯´ä¸ä¸Šæ¥ä¸ºä»€ä¹ˆã€‚ ç¬”è€…å…¥å‘Vueä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¯¹Vueä¹Ÿç®—äº†è§£ï¼ŒVuexã€Vue-Routerä¹Ÿç”¨äº†ä¸å°‘ï¼›ä½†æ˜¯å‰å‡ å¤©ä¸€çœ‹åˆ°è¿™ä¸ªé¢è¯•é—®é¢˜å´æ„Ÿè§‰ä¸€ä¸‹å­å›ç­”ä¸ä¸Šäº†ï¼Œæƒ³æ¥æ¯æ¬¡å†™ä»£ç ä¹Ÿéƒ½æ˜¯æ‹¿æ¥å°±ç”¨ï¼Œä¹Ÿæ²¡æœ‰ä»”ç»†çš„æ€è€ƒè¿‡é‡Œé¢çš„åŸå› ï¼›æ¯æ¯æŠ¥é”™äº†å°±æ¢ä¸€ç§å†™æ³•ï¼Œèƒ½ç”¨å°±è¡Œï¼Œä»…æ­¤è€Œå·²ã€‚ è¿™ä¸ªé—®é¢˜è¦ä»ä¸¤ä¸ªæ–¹é¢æ¥è¯´ï¼š new Vue({el:â€™#appâ€™}) å•æ–‡ä»¶ç»„ä»¶ä¸­ï¼Œtemplateä¸‹çš„å…ƒç´ div Vueå®ä¾‹ å½“æˆ‘ä»¬å®ä¾‹åŒ–Vueçš„æ—¶å€™ï¼Œå¡«å†™ä¸€ä¸ªelé€‰é¡¹ï¼Œæ¥æŒ‡å®šæˆ‘ä»¬çš„SPAå…¥å£ï¼š 1234let vm = new Vue(&#123; el:&#x27;#app&#x27;, data:&#123; msg: &#x27;Hi boy&#x27; &#125;&#125;) 123&lt;body&gt; &lt;div id=&#x27;app&#x27;&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;&lt;/body&gt; å¦‚æœæˆ‘ä»¬æŠŠä»£ç æ”¹é€ ä¸€ä¸‹ï¼Œå˜æˆä¸¤ä¸ªå…¥å£ã€‚ 1234let vm = new Vue(&#123; el:&#x27;.app&#x27;, data:&#123; msg: &#x27;Hi boy&#x27; &#125;&#125;) 1234&lt;body&gt; &lt;div class=&#x27;app&#x27;&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt; &lt;div class=&#x27;app&#x27;&gt;&#123;&#123;msg&#125;&#125;&lt;/div&gt;&lt;/body&gt; è¿™æ—¶å€™ä¼šå‘ç°åªæœ‰ç¬¬ä¸€ä¸ªdivè¢«æ¸²æŸ“å‡ºæ¥ï¼Œè€Œç¬¬äºŒä¸ªdivè¿˜æ˜¯åŸå°ä¸åŠ¨ã€‚æˆ‘ä»¬ç®€å•æ¥çœ‹ä¸€ä¸‹Vueçš„æºç æ˜¯å¦‚ä½•å®ç°çš„ 123456789101112131415Vue.prototype.$mount = function ( el?: string | Element, hydrating?: boolean): Component &#123; el = el &amp;&amp; query(el) /* istanbul ignore if */ if (el === document.body || el === document.documentElement) &#123; process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; warn( `Do not mount Vue to &lt;html&gt; or &lt;body&gt; - mount to normal elements instead.` ) return this &#125; //ä»¥ä¸‹çœç•¥æ— å…³ä»£ç  //...&#125; å¯ä»¥çœ‹åˆ°æŒ‚è½½å‡½æ•°ä¼ äº†ä¸€ä¸ªelå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æ˜¯stringç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªelementå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯domèŠ‚ç‚¹ã€‚æœ€é‡è¦çš„æ˜¯el = el &amp;&amp; query(el)è¿™ä¸€è¡Œä»£ç ï¼Œé‚£å°±ç»§ç»­çœ‹ä¸€ä¸‹queryå‡½æ•°æ˜¯åšä»€ä¹ˆçš„ï¼š 1234567891011121314151617/** * Query an element selector if it&#x27;s not an element already. */export function query (el: string | Element): Element &#123; if (typeof el === &#x27;string&#x27;) &#123; const selected = document.querySelector(el) if (!selected) &#123; process.env.NODE_ENV !== &#x27;production&#x27; &amp;&amp; warn( &#x27;Cannot find element: &#x27; + el ) return document.createElement(&#x27;div&#x27;) &#125; return selected &#125; else &#123; return el &#125;&#125; é¦–å…ˆqueryå‡½æ•°åˆ¤æ–­æ˜¯å¦æ˜¯stringç±»å‹ï¼Œå¦‚æœæ˜¯stringç±»å‹ï¼Œå°±é€šè¿‡querySelectorå‡½æ•°è·å–é¡µé¢ä¸­çš„å…ƒç´ ï¼Œä½†æ˜¯querySelectorä»…ä»…è¿”å›åŒ¹é…æŒ‡å®šé€‰æ‹©å™¨çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆç¬¬äºŒä¸ªdivä¼šåŸå°ä¸åŠ¨ã€‚ Vueå…¶å®å¹¶ä¸çŸ¥é“å“ªä¸€ä¸ªæ‰æ˜¯æˆ‘ä»¬çš„å…¥å£ï¼Œå› ä¸ºå¯¹äºä¸€ä¸ªå…¥å£æ¥è®²ï¼Œè¿™ä¸ªå…¥å£å°±æ˜¯ä¸€ä¸ªVueç±»ï¼ŒVueéœ€è¦æŠŠè¿™ä¸ªå…¥å£é‡Œé¢çš„æ‰€æœ‰ä¸œè¥¿æ‹¿æ¥æ¸²æŸ“ã€å¤„ç†ï¼Œæœ€åå†é‡æ–°æ’å…¥åˆ°domä¸­ã€‚å¦‚æœåŒæ—¶è®¾ç½®äº†å¤šä¸ªå…¥å£ï¼Œé‚£ä¹ˆvueå°±ä¸çŸ¥é“å“ªä¸€ä¸ªæ‰æ˜¯è¿™ä¸ªç±»ã€‚ å•æ–‡ä»¶ç»„ä»¶ å½“æˆ‘ä»¬åœ¨vue-cliè„šæ‰‹æ¶æ­å»ºçš„vueå¼€å‘ç¯å¢ƒä¸‹ä½¿ç”¨å•æ–‡ä»¶ç»„ä»¶æ—¶ï¼Œä¸€èˆ¬ä¼šè¿™ä¹ˆå†™ï¼š 12345&lt;template&gt; &lt;div class=&quot;box&quot;&gt; è¿™é‡Œæ˜¯é¡µé¢å†…å®¹ &lt;/div&gt;&lt;/template&gt; å¦‚æœæˆ‘ä»¬å°è¯•åœ¨templateæ ‡ç­¾ä¸‹å†™ä¸¤ä¸ªdivï¼Œé‚£ä¹ˆç¼–è¾‘å™¨ä¼šæç¤ºæˆ‘ä»¬The template root requires exactly one elementã€‚é‚£è¿™é‡Œä¸ºä»€ä¹ˆtemplateä¸‹ä¹Ÿå¿…é¡»æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªdivå‘¢ï¼Ÿ è¿™é‡Œæˆ‘ä»¬è¦å…ˆçœ‹ä¸€çœ‹templateè¿™ä¸ªæ ‡ç­¾ï¼Œè¿™ä¸ªæ ‡ç­¾æ˜¯HTML5å‡ºæ¥çš„æ–°æ ‡ç­¾ï¼Œå®ƒæœ‰ä¸‰ä¸ªç‰¹æ€§ï¼š éšè—æ€§ï¼šè¯¥æ ‡ç­¾ä¸ä¼šæ˜¾ç¤ºåœ¨é¡µé¢çš„ä»»ä½•åœ°æ–¹ï¼Œå³ä¾¿é‡Œé¢æœ‰å¤šå°‘å†…å®¹ï¼Œå®ƒæ°¸è¿œéƒ½æ˜¯éšè—çš„çŠ¶æ€ï¼› ä»»æ„æ€§ï¼šè¯¥æ ‡ç­¾å¯ä»¥å†™åœ¨é¡µé¢çš„ä»»ä½•åœ°æ–¹ï¼Œç”šè‡³æ˜¯headã€bodyã€sciprtæ ‡ç­¾å†…ï¼› æ— æ•ˆæ€§ï¼šè¯¥æ ‡ç­¾é‡Œçš„ä»»ä½•HTMLå†…å®¹éƒ½æ˜¯æ— æ•ˆçš„ï¼Œä¸ä¼šèµ·ä»»ä½•ä½œç”¨ï¼› ä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡innerHTMLæ¥è·å–åˆ°é‡Œé¢çš„å†…å®¹ã€‚ çŸ¥é“äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å†æ¥çœ‹.vueçš„å•æ–‡ä»¶ç»„ä»¶ã€‚å…¶å®æœ¬è´¨ä¸Šï¼Œä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶ä¼šè¢«å„ç§å„æ ·çš„loaderå¤„ç†æˆä¸º.jsæ–‡ä»¶ï¼ˆå› ä¸ºå½“ä½ importä¸€ä¸ªå•æ–‡ä»¶ç»„ä»¶å¹¶æ‰“å°å‡ºæ¥çš„æ—¶å€™ï¼Œæ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼‰ï¼Œé€šè¿‡templateçš„ä»»æ„æ€§æˆ‘ä»¬çŸ¥é“ï¼ŒtemplateåŒ…è£¹çš„HTMLå¯ä»¥å†™åœ¨ä»»ä½•åœ°æ–¹ï¼Œé‚£ä¹ˆå¯¹äºä¸€ä¸ª.vueæ¥è®²ï¼Œè¿™ä¸ªtemplateé‡Œé¢çš„å†…å®¹å°±æ˜¯ä¼šè¢«vueå¤„ç†ä¸ºè™šæ‹Ÿdomå¹¶æ¸²æŸ“çš„å†…å®¹ï¼Œå¯¼è‡´ç»“æœåˆå›åˆ°äº†å¼€å§‹ ï¼šæ—¢ç„¶ä¸€ä¸ª.vueå•æ–‡ä»¶ç»„ä»¶æ˜¯ä¸€ä¸ªvueå®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹çš„å…¥å£åœ¨å“ªé‡Œï¼Ÿ å¦‚æœåœ¨templateä¸‹æœ‰å¤šä¸ªdivï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•æŒ‡å®šè¿™ä¸ªvueå®ä¾‹çš„æ ¹å…¥å£ï¼Ÿä¸ºäº†è®©ç»„ä»¶èƒ½å¤Ÿæ­£å¸¸çš„ç”Ÿæˆä¸€ä¸ªvueå®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªdivä¼šè¢«è‡ªç„¶çš„å¤„ç†æˆç¨‹åºçš„å…¥å£ã€‚ é€šè¿‡è¿™ä¸ªâ€˜æ ¹èŠ‚ç‚¹â€™ï¼Œæ¥é€’å½’éå†æ•´ä¸ªvueâ€˜æ ‘â€™ä¸‹çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œå¹¶å¤„ç†ä¸ºvdomï¼Œæœ€åå†æ¸²æŸ“æˆçœŸæ­£çš„HTMLï¼Œæ’å…¥åœ¨æ­£ç¡®çš„ä½ç½®ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"Vue","slug":"Vue","permalink":"https://xieyufei.com/tags/Vue/"}]},{"title":"ä»ä¸€é“é¢è¯•é¢˜æ¥ç†è§£JSäº‹ä»¶å¾ªç¯","date":"2019-12-30T03:00:00.000Z","path":"2019/12/30/Quiz-Eventloop.html","text":"ä¸Šå‘¨ä¸€ä¸ªæœ‹å‹å‘äº†æŸäº’è”ç½‘å…¬å¸çš„ç¬”è¯•é¢˜ç»™æˆ‘çœ‹ï¼Œå…¶ä¸­æœ‰ä¸€é“é¢˜æ¯”è¾ƒæœ‰æ„æ€ï¼Œè€ƒå¯Ÿäº†å¯¹JSäº‹ä»¶å¾ªç¯çš„ç†è§£ï¼Œæ‰€ä»¥æ•…äº‹çš„å¼€å§‹è®©æˆ‘ä»¬ä»ä¸€é“å¤æ‚çš„é¢è¯•é¢˜å¼€å§‹ã€‚ã€‚ã€‚ ä¸€é“é¢è¯•é¢˜ è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœï¼Œå¹¶è¯´æ˜åŸå› ï¼š 1234567891011121314151617181920212223242526async function async1()&#123; console.log(&#x27;async1 start&#x27;) await async2() console.log(&#x27;async1 end&#x27;)&#125;async function async2()&#123; console.log(&#x27;async2&#x27;)&#125;console.log(&#x27;script start&#x27;)setTimeout(function()&#123; console.log(&#x27;setTimeOut&#x27;)&#125;, 0)async1()new Promise(function(resolve)&#123; console.log(&#x27;promise1&#x27;) resolve()&#125;).then(function()&#123; console.log(&#x27;promise2&#x27;) &#125;)console.log(&#x27;script end&#x27;) å…ˆè´´ä¸€ä¸‹åœ¨æµè§ˆå™¨é‡Œçš„è¿è¡Œçš„ç»“æœï¼ˆå¦‚æœè·Ÿä½ çš„æ€è·¯ä¸€æ¨¡ä¸€æ ·çš„è¯ï¼Œå¤§ä½¬è¯·ç›´æ¥Ctrl+F4ï¼‰ï¼š 12345678//script start//async1 start//async2//promise1//script end//async1 end//promise2//setTimeOut å¦‚æœè·Ÿä½ çš„æ€è·¯ä¸ä¸€æ ·çš„è¯ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä»¬ä»ç®€å•çš„å¼€å§‹ä¸€ç‚¹ç‚¹å‰–æè¿™é“é¢è¯•é¢˜ã€‚ å•çº¿ç¨‹ é¦–å…ˆæˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒJavaScriptæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œæ‰€è°“å•çº¿ç¨‹æŒ‡çš„æ˜¯åœ¨JavaScriptå¼•æ“ä¸­è´Ÿè´£è§£é‡Šå’Œæ‰§è¡Œä»£ç çš„çº¿ç¨‹åªæœ‰ä¸€ä¸ªï¼Œé€šå¸¸ç§°ä¸ºä¸»çº¿ç¨‹ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆJavaScriptå¿…é¡»æ˜¯å•çº¿ç¨‹çš„è¯­è¨€ï¼Œè€Œä¸èƒ½åƒä»–çš„è€å¤§å“¥Javaä¸€æ ·ï¼Œæ‰‹åŠ¨å¼€å¯å¤šä¸ªçº¿ç¨‹å‘¢ï¼Ÿ å› ä¸ºè¿™æ˜¯ç”±äºJavaScriptæ‰€è¿è¡Œçš„æµè§ˆå™¨ç¯å¢ƒå†³å®šï¼Œä»–åªèƒ½æ˜¯å•çº¿ç¨‹çš„ã€‚è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœJavaScriptèƒ½å¼€å¯å¤šä¸ªçº¿ç¨‹ï¼Œé¡µé¢ä¸Šæœ‰ä¸€ä¸ªdivï¼Œæˆ‘ä»¬åŒæ—¶åœ¨å¤šä¸ªçº¿ç¨‹ä¸­æ¥æ”¹å˜è¿™ä¸ªdivä¸­çš„å†…å®¹ï¼Œé‚£ä¹ˆæœ€ç»ˆè¿™ä¸ªdivä¼šå˜æˆä»€ä¹ˆæ ·å­è°ä¹Ÿç¡®å®šä¸äº†ï¼Œæœ€ååªèƒ½å¬å¤©ç”±å‘½ï¼Œçœ‹å“ªä¸ªçº¿ç¨‹æ˜¯æœ€åä¸€ä¸ªè¿è¡Œç»“æŸçš„ã€‚ å› æ­¤å¤šçº¿ç¨‹å¸¦æ¥äº†å¾ˆå¤šçš„ä¸ç¡®å®šæ€§ï¼Œä¸ºäº†é¿å…è¿™ç§é—®é¢˜ï¼ŒJavaScriptå¿…é¡»æ˜¯å•çº¿ç¨‹ã€‚ å¯èƒ½æœ‰çš„åŒå­¦åˆä¼šè¯´äº†ï¼ŒJavaScriptä¸æ˜¯å¯ä»¥é€šè¿‡Web Workerå¼€å¯å¤šçº¿ç¨‹ä¹ˆï¼Ÿæ˜¯çš„ï¼ŒWeb Workeræ˜¯å¯ä»¥å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯è¿™ä¸ªæ–°å¼€çº¿ç¨‹çš„åŠŸèƒ½è¢«é™åˆ¶äº†ï¼Œåªèƒ½åšä¸€äº›æ¶ˆè€—CPUçš„é€»è¾‘è¿ç®—ç­‰ï¼Œæ•°æ®ä¼ è¾“ä¹Ÿæ˜¯é€šè¿‡å›è°ƒçš„æ–¹å¼æ¥è¿›è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„æ‰§è¡Œï¼›è€Œä¸”æœ€æœ€é‡è¦çš„æ˜¯ï¼ŒWeb Workerä¸èƒ½æ¥æ“ä½œdomï¼Œç¬”è€…ç»è¿‡å°è¯•å‘ç°ï¼Œåœ¨æ–°å¼€çš„çº¿ç¨‹ä¸­ç”šè‡³éƒ½ä¸èƒ½è·å–åˆ°documentå’Œwindowå¯¹è±¡ã€‚ æ‰€ä»¥è¿˜æ˜¯æ²¡æœ‰æ”¹å˜JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œè¿™ä¸€æ ¸å¿ƒåŸåˆ™ã€‚å½“ç„¶ï¼Œè™½ç„¶JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œä½†æ˜¯è¿˜æ˜¯å­˜åœ¨å…¶ä»–çº¿ç¨‹çš„ï¼›ä¾‹å¦‚ï¼šå¤„ç†Ajaxè¯·æ±‚çš„çº¿ç¨‹ã€å®šæ—¶å™¨çš„çº¿ç¨‹ã€è¯»å†™æ–‡ä»¶çš„çº¿ç¨‹ï¼ˆnodejsä¸­ï¼‰ç­‰ã€‚ åŒæ­¥ä»»åŠ¡å’Œå¼‚æ­¥ä»»åŠ¡ å› ä¸ºJavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„ï¼Œæ‰€æœ‰çš„ä»»åŠ¡åªèƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ’é˜Ÿæ‰§è¡Œï¼›ä½†æ˜¯å¦‚æœæŸä¸ªä»»åŠ¡ç‰¹åˆ«è€—æ—¶ï¼Œæ¯”å¦‚Ajaxè¯·æ±‚ä¸€ä¸ªæ¥å£ï¼Œå¯èƒ½1sè¿”å›ç»“æœï¼Œä¹Ÿå¯èƒ½10sæ‰è¿”å›ï¼Œæœ‰å¾ˆå¤šçš„ä¸ç¡®å®šå› ç´ ï¼ˆç½‘ç»œå»¶è¿Ÿç­‰ï¼‰ï¼›å¦‚æœè¿™äº›ä»»åŠ¡ä¹Ÿæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­å»ï¼Œé‚£ä¹ˆä¼šé˜»å¡æµè§ˆå™¨ï¼ˆç”¨æˆ·é™¤äº†ç­‰ï¼Œä¸èƒ½è¿›è¡Œå…¶ä»–æ“ä½œï¼‰ã€‚ äºæ˜¯ï¼Œæµè§ˆå™¨å°±æŠŠè¿™äº›ä»»åŠ¡åˆ†æ´¾åˆ°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­å»ï¼Œå¹¶ä¸”è·Ÿä»–ä»¬è¯´ï¼šä½ ä»¬è‡ªå·±å»åå°ç©å„¿ï¼Œç­‰ä½ ä»¬å¥½äº†å†è¿‡æ¥é€šçŸ¥æˆ‘ï¼å…ˆæ¥çœ‹ç®€å•çš„ä¾‹å­æ¥ç†è§£ä¸€ä¸‹åŒæ­¥å’Œå¼‚æ­¥ä»»åŠ¡ï¼š 1234567console.log(&#x27;start&#x27;)setTimeout(function() &#123; console.log(&#x27;setTimeout&#x27;)&#125;, 0)console.log(&#x27;end&#x27;) å½“ä¸»çº¿ç¨‹æ‰§è¡Œåˆ°setTimeoutçš„æ—¶å€™ï¼Œè™½ç„¶æ˜¯å»¶è¿Ÿäº†0sï¼Œä½†æ˜¯å¹¶ä¸ä¼šé©¬ä¸Šæ¥è¿è¡Œï¼Œè€Œæ˜¯æ”¾åˆ°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç­‰ä¸‹é¢çš„åŒæ­¥ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œå®Œäº†ï¼Œå†æ¥æ‰§è¡Œå¼‚æ­¥é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œæ‰€ä»¥è¿è¡Œç»“æœæ˜¯ï¼šstartã€endã€setTimeoutã€‚ ä½†å¦‚æœåŒæ­¥ä»»åŠ¡ä¸­æœ‰ç‰¹åˆ«è€—æ—¶çš„æ“ä½œï¼Œé˜»å¡äº†setTimeoutçš„å®šæ—¶æ‰§è¡Œï¼Œé‚£ä¹ˆsetTimeoutå°±ä¸ä¼šæŒ‰æ—¶æ¥å®Œæˆã€‚æ¥çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š 12345678910111213console.log(&#x27;start&#x27;)console.time(&#x27;now&#x27;)let list = []setTimeout(function() &#123; console.timeEnd(&#x27;now&#x27;)&#125;, 1000)for(let i = 0;i&lt;9999999;i++)&#123; let now = new Date() list.push(i)&#125; è™½ç„¶æˆ‘ä»¬è®©setTimeout1såæ‰§è¡Œï¼Œä½†æ˜¯forå¾ªç¯å ç”¨äº†å¤ªå¤šçš„çº¿ç¨‹èµ„æºï¼Œå®é™…æ‰§è¡Œä¼šåœ¨2såã€‚æ‰€ä»¥äº‹ä»¶å¾ªç¯çš„æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š æ‰€æœ‰ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆã€‚ ä¸»çº¿ç¨‹å‘ç°æœ‰å¼‚æ­¥ä»»åŠ¡ï¼Œå°±åœ¨â€œä»»åŠ¡é˜Ÿåˆ—â€ä¹‹ä¸­åŠ å…¥ä¸€ä¸ªä»»åŠ¡äº‹ä»¶ã€‚ ä¸€æ—¦â€œæ‰§è¡Œæ ˆâ€ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–â€œä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆå…ˆè¿›å…ˆå‡ºåŸåˆ™ï¼‰ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆå¹¶å¼€å§‹æ‰§è¡Œã€‚ ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ï¼Œè¿™æ ·çš„ä¸€ä¸ªå¾ªç¯ç§°ä¸ºäº‹ä»¶å¾ªç¯ã€‚ å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡ å¦‚æœä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œå“ªä¸ªä»»åŠ¡å‘¢ï¼Ÿäºæ˜¯åœ¨å¼‚æ­¥ä»»åŠ¡ä¸­ï¼Œä¹Ÿè¿›è¡Œäº†ç­‰çº§åˆ’åˆ†ï¼Œåˆ†ä¸ºå®ä»»åŠ¡ï¼ˆmacrotaskï¼‰å’Œå¾®ä»»åŠ¡ï¼ˆmicrotaskï¼‰ï¼›ä¸åŒçš„APIæ³¨å†Œçš„ä»»åŠ¡ä¼šä¾æ¬¡è¿›å…¥è‡ªèº«å¯¹åº”çš„é˜Ÿåˆ—ä¸­ï¼Œç„¶åç­‰å¾…äº‹ä»¶å¾ªç¯å°†å®ƒä»¬ä¾æ¬¡å‹å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œã€‚ å®ä»»åŠ¡åŒ…æ‹¬ï¼š script(æ•´ä½“ä»£ç ) setTimeout, setInterval, setImmediate, I/O UI rendering å¾®ä»»åŠ¡åŒ…æ‹¬ï¼š process.nextTick Promise Object.observe(å·²åºŸå¼ƒ) MutationObserver(html5æ–°ç‰¹æ€§) æˆ‘ä»¬å¯ä»¥æŠŠæ•´ä½“çš„JSä»£ç ä¹Ÿçœ‹æˆæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹ä¹Ÿæ˜¯ä»å®ä»»åŠ¡å¼€å§‹çš„ã€‚æˆ‘ä»¬æŠŠä¸Šé¢äº‹ä»¶å¾ªç¯çš„æ­¥éª¤æ›´æ–°ä¸€ä¸‹ï¼š æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¾®ä»»åŠ¡å°±åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°å®ä»»åŠ¡å°±åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ— å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œæ£€æŸ¥å½“å‰å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¦‚æœæœ‰ï¼Œå°±ä¾æ¬¡æ‰§è¡Œï¼ˆä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼‰ å¼€å§‹ä¸‹ä¸€ä¸ªå®ä»»åŠ¡ è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š 12345678910111213141516console.log(&#x27;start&#x27;)setTimeout(function() &#123; console.log(&#x27;timeout&#x27;);&#125;, 0)new Promise(function(resolve) &#123; console.log(&#x27;promise&#x27;); //æ³¨æ„è¿™è¾¹è°ƒç”¨resolve //ä¸ç„¶thenæ–¹æ³•ä¸ä¼šæ‰§è¡Œ resolve()&#125;).then(function() &#123; console.log(&#x27;then&#x27;);&#125;)console.log(&#x27;end&#x27;); åˆ†æä¸€ä¸‹æ‰§è¡Œæµç¨‹ï¼š åˆšå¼€å§‹æ‰“å°start é‡åˆ°setTimeoutï¼Œæ”¾å…¥å®ä»»åŠ¡ä¸­ï¼Œç­‰å¾…æ‰§è¡Œ é‡åˆ°new Promiseçš„å›è°ƒå‡½æ•°ï¼ŒåŒæ­¥æ‰§è¡Œï¼Œæ‰“å°promise å½“resolveåï¼Œthenæ–¹æ³•ä¼šæ”¾å…¥å¾®ä»»åŠ¡ï¼Œç­‰å¾…æ‰§è¡Œ æ‰“å°endï¼Œè¿™æ—¶æ•´ä¸ªæ‰§è¡Œæ ˆæ¸…ç©ºäº†ï¼Œå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—å„æœ‰ä¸€ä¸ªå›è°ƒæ–¹æ³• å…ˆæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°then æ‰§è¡Œå®ä»»åŠ¡ï¼Œæ‰“å°timeout æˆ‘ä»¬æŠŠPromiseè¿›è¡Œä¸€ä¸‹æ”¹å˜ï¼Œçœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­ï¼š 12345678910async function async1() &#123; console.log(&#x27;async1 start&#x27;) await async2() console.log(&#x27;async1 end&#x27;)&#125;async function async2() &#123; console.log(&#x27;async2&#x27;)&#125;async1()console.log(&#x27;script end&#x27;) åˆšå¼€å§‹æˆ‘ä»¬ä¼šæƒ³å½“ç„¶çš„è®¤ä¸ºæ‰§è¡Œé¡ºåºæ˜¯ï¼šasync1 start â€“&gt; async2 â€“&gt; async1 end â€“&gt; script endã€‚ä½†æ˜¯å½“çœŸæ­£ç†è§£äº†asyncå‡½æ•°çš„æœ¬è´¨åï¼Œæˆ‘ä»¬çŸ¥é“asyncå‡½æ•°è¿˜æ˜¯åŸºäºPromiseçš„ä¸€äº›å°è£…ï¼Œè€ŒPromiseæ˜¯å±äºå¾®ä»»åŠ¡çš„ä¸€ç§ï¼›å› æ­¤ä¼šæŠŠawait async2()åé¢çš„æ‰€æœ‰ä»£ç æ”¾åˆ°Promiseçš„thenå›è°ƒå‡½æ•°ä¸­å»ï¼Œå› æ­¤ï¼Œå¦‚æœæŠŠä¸Šé¢ä»£ç è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼Œä¼šå¥½ç†è§£å¾ˆå¤šï¼š 1234567891011async function async1() &#123; console.log(&#x27;async1 start&#x27;) new Promise(function(resolve)&#123; console.log(&#x27;async2&#x27;) resolve() &#125;).then(function()&#123; console.log(&#x27;async1 end&#x27;) &#125;)&#125;async1()console.log(&#x27;script end&#x27;) æ ¹æ®ä¸Šé¢å¯¹å¾®ä»»åŠ¡çš„ç†è§£ï¼Œconsole.log(&#39;async1 end&#39;)ä¼šæ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ‰€ä»¥å®é™…æ‰§è¡Œé¡ºåºæ˜¯ï¼šasync1 start â€“&gt; async2 â€“&gt; script end â€“&gt; async1 endã€‚ æœ€åæ¥çœ‹é‚£é“é¢è¯•é¢˜ï¼Œç›¸ä¿¡å·²ç»ä¸éš¾ç†è§£äº†ã€‚ ç¬¬ä¸€è½®å¾ªç¯å¼€å§‹ æ‰“å°script start å‘ç°setTimeoutï¼Œæ”¾å…¥å®ä»»åŠ¡1 æ‰“å°async1 start æ‰“å°async2 æŠŠawait async2å‡½æ•°åé¢çš„å›è°ƒæ”¾å…¥å¾®ä»»åŠ¡1 æ‰“å°promise1 æŠŠthenä¸­çš„å‡½æ•°æ”¾å…¥å¾®ä»»åŠ¡2 æ‰“å°script end è°ƒç”¨æ ˆæ¸…ç©ºï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡1ï¼Œæ‰“å°async1 end æ‰§è¡Œå¾®ä»»åŠ¡2ï¼Œæ‰“å°promise2 å¾®ä»»åŠ¡æ‰§è¡Œå®Œï¼Œç¬¬ä¸€è½®å¾ªç¯ç»“æŸ å¼€å§‹å®ä»»åŠ¡1ï¼Œæ‰“å°setTimeOut ç»“æŸï¼Œå®Œç¾æ’’èŠ±","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"æºç å‰–æBullshitæ–‡ç« ç”Ÿæˆå™¨","date":"2019-12-16T10:56:39.000Z","path":"2019/12/16/Article-Generate.html","text":"å‰æ®µæ—¶é—´ï¼Œæœ‰ä¸€ä¸ªå«â€œç‹—å±ä¸é€šæ–‡ç« ç”Ÿæˆå™¨â€çš„é¡¹ç›®ä¸€ä¸‹å­å¸å¼•äº†å¤§å®¶çš„å…´è¶£ï¼Œè¿˜å¼•èµ·å„å¤§ç§‘æŠ€åª’ä½“ï¼›36Krã€æ–°æµªä¸“æ ITä¹‹å®¶éƒ½ä¸çº¦è€ŒåŒçš„åˆŠæ–‡æŠ¥é“ã€‚ç„¶è€Œï¼Œç»¼çœ‹æ•´ä¸ªé¡¹ç›®ï¼Œé™¤å»READMEã€LICENSEå’Œgitignoreï¼Œä¸€å…±å°±6ä¸ªæ–‡ä»¶ï¼Œå´è¾¾åˆ°äº†æƒŠäººçš„11.6kçš„Starå’Œ2.2kçš„Forkï¼Œå¹³å‡ä¸‹æ¥æ¯ä¸ªæ–‡ä»¶æœ‰å°†è¿‘2kçš„Starã€‚ä½ å¯èƒ½ä¼šå‘å‡ºç–‘é—®äº†ï¼Œè¿™ç©¶ç«Ÿæ˜¯äººæ€§çš„æ‰­æ›²è¿˜æ˜¯é“å¾·çš„æ²¦ä¸§ï¼Ÿä»Šå¤©å°±è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒç©¶ç«Ÿæœ‰ä½•é»‘ç§‘æŠ€èƒ½è‡ªåŠ¨ç”Ÿæˆæ–‡ç« ã€‚ äº‹æƒ…çš„èµ·å› æ¥æºäºçŸ¥ä¹ä¸Šçš„ä¸€ç¯‡æé—®ï¼Œæœ‰äººæé—®â€œå­¦ç”Ÿä¼šé€€ä¼šç”³è¯·å…­åƒå­—æ€ä¹ˆå†™ï¼Ÿâ€äºæ˜¯ä¹ï¼Œå„è·¯å¤§ç¥çº·çº·å‰æ¥çŒ®è®¡çŒ®ç­–ï¼Œæœ‰å¤åˆ¶ç²˜è´´å…­åƒå­—â€œä¸å¹²äº†â€çš„ï¼Œæœ‰å¤åˆ¶ç²˜è´´å…­åƒå­—ã€Šé“å¾·ç»ã€‹çš„ï¼Œæ›´æœ‰æè®®ä½¿ç”¨ç¾äººè®¡æ’©å­¦é•¿çš„ï¼›ç„¶è€Œå…¶ä¸­çš„ä¸€ä¸ªå›ç­”æ¨ªç©ºå‡ºä¸–ï¼Œç­”ä¸»éšæ‰‹å°±å†™äº†ä¸€ä¸ªå¼€æºé¡¹ç›®ç‹—å±ä¸é€šæ–‡ç« ç”Ÿæˆå™¨ï¼›é€šè¿‡è¯¥é¡¹ç›®ï¼Œå¿«é€Ÿç”Ÿæˆäº†ä¸€ç¯‡ç›¸å…³æ–‡ç« ï¼Œä¸ä»…è§£å†³äº†é¢˜ä¸»çš„é—®é¢˜ï¼Œè¿˜å¾—åˆ°äº†å¹¿å¤§ç½‘å‹çš„è®¤åŒã€‚ æ–‡ç« å¤ªé•¿äº†ï¼Œè¿™è¾¹å°±ä¸æ”¾å®Œæ•´ç‰ˆçš„äº†ï¼Œæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥å»çŸ¥ä¹è§‚æ‘©ä¸€ä¸‹åŸæ–‡ã€Šå­¦ç”Ÿä¼šé€€ä¼šç”³è¯·å…­åƒå­—æ€ä¹ˆå†™?ã€‹ï¼Œæˆ‘è¯•äº†ä¸‹ï¼Œæœç„¶æ˜¯æ»‘åˆ°åº•éƒ½éœ€è¦åŠåˆ†é’Ÿä¹‹ä¹…ã€‚ è¯¥é¡¹ç›®ä¸€å¼€å§‹ä¸ºpython3ç‰ˆæœ¬ï¼Œåæ¥æœ‰ç½‘å‹æ•´ç†äº†ç½‘é¡µç‰ˆçš„ï¼Œç°åœ¨æˆ‘ä»¬å¸¸ç”¨çš„æ˜¯ç”±suulnnkaä¿®æ”¹çš„åœ¨çº¿ç‰ˆæœ¬ï¼Œå¯¹é¡µé¢çš„æ ·å¼è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå°†ç”Ÿæˆçš„ä¸»é¢˜æ”¾å…¥queryå‚æ•°ä¸­ï¼Œä½¿ç”¨æ›´åŠ çš„æ–¹ä¾¿ï¼Œè¿™é‡Œæˆ‘ä»¬éšæœºæ¥ç”Ÿæˆä¸€ç¯‡æ–‡ç« çœ‹ä¸€ä¸‹æ•ˆæœï¼š å¯ä»¥çœ‹å‡ºæ•´ç¯‡æ–‡ç« è™½ç„¶åºŸè¯è¿ç¯‡ã€ç‹—å±ä¸é€šï¼Œä½†æ˜¯æ®µæ®µæ‰£é¢˜ï¼Œæ—å¾åšå¼•ï¼Œå¼•ç”¨å„ç§åäººåè¨€ï¼Œä»€ä¹ˆçˆ±è¿ªç”Ÿæ›¾ç»æåˆ°ï¼Œä»€ä¹ˆåº·å¾·æ›¾ç»è¯´è¿‡ï¼Œæ¯ä¸€æ®µè¯´çš„è²Œä¼¼éƒ½æœ‰ç†æœ‰æ®ï¼Œä»¤äººæ— æ³•åé©³ã€‚ é‚£ä¹ˆä½œè€…åˆ°åº•æ˜¯å¦‚ä½•æ¥ç”Ÿæˆè¿™ä¹ˆä¸€é•¿ä¸²çš„é•¿ç¯‡å¤§è®ºçš„å‘¢ï¼Ÿæœ€å¼€å§‹æˆ‘è¿˜çŒœæµ‹æ˜¯ä¸æ˜¯é€šè¿‡æŸç§ç¥ç»ç½‘ç»œç®—æ³•æ¥å°†æ¯ä¸€æ®µè¯æ‹¼æ¥èµ·æ¥ï¼Œä½†æ˜¯ä½œè€…å¾ˆæ˜ç¡®çš„åœ¨READMEä¸­å†™é“ï¼š é„™äººæ‰ç–å­¦æµ…å¹¶ä¸ä¼šä»»ä½•è‡ªç„¶è¯­è¨€å¤„ç†ç›¸å…³ç®—æ³•. è€Œä¸”ç›®å‰æ¯”è¾ƒåçˆ±ç®€å•æœ‰æ•ˆçš„æ–¹å¼è¾¾åˆ°ç›®çš„æ–¹å¼. é™¤éæ’åˆ°äº†å¤©èŠ±æ¿, å¦åˆ™æš‚æ—¶ä¸ä¼šå¼•å…¥ä»»ä½•ç¥ç»ç½‘ç»œç­‰ç®—æ³•. ä¸è¿‡æ¬¢è¿ä»»ä½•äººå¦å¼€åˆ†æ”¯å®ç°æ›´å¤æ‚, æ•ˆæœæ›´å¥½çš„ç®—æ³•. ä¸è¿‡é™¤éæ•ˆæœæ‹”ç¾¤, å¦åˆ™é„™äººæš‚æ—¶ä¸ä¼šèåˆ. å¾ˆæ˜æ˜¾ï¼Œä½œè€…åªæ˜¯é€šè¿‡æŸç§ç®€å•æœ‰æ•ˆçš„æ–¹å¼æ¥å®ç°è¿™ä¸ªåŠŸèƒ½çš„ï¼Œé‚£è®©æˆ‘æ¥æ·±æ‰’ä¸€ä¸‹æºç ï¼Œçœ‹çœ‹è¿™ç§åˆ°åº•æ˜¯æ€ä¹ˆæ ·ä¸€ç§ç®€å•æœ‰æ•ˆçš„æ–¹å¼ã€‚ é¦–å…ˆæ”¾åœ¨é¡¹ç›®å¼€å§‹çš„æ˜¯å®šä¹‰çš„ä¸€äº›è®ºè¿°ã€åäººåè¨€ã€å‰åå«è¯ä»¥åŠç”¨åˆ°çš„å…¬ç”¨å‡½æ•°ç­‰ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647let è®ºè¿° = [ &#x27;ç°åœ¨ï¼Œè§£å†³ä¸»é¢˜çš„é—®é¢˜ï¼Œæ˜¯éå¸¸éå¸¸é‡è¦çš„ã€‚ æ‰€ä»¥ï¼Œ &#x27;, &#x27;æˆ‘ä»¬ä¸å¾—ä¸é¢å¯¹ä¸€ä¸ªéå¸¸å°´å°¬çš„äº‹å®ï¼Œé‚£å°±æ˜¯ï¼Œ &#x27;, //çœç•¥è‹¥å¹²è®ºè¿°]let åäººåè¨€ = [ &#x27;ä¼å°”æ³°æ›¾ç»è¯´è¿‡ï¼Œä¸ç»å·¨å¤§çš„å›°éš¾ï¼Œä¸ä¼šæœ‰ä¼Ÿå¤§çš„äº‹ä¸šã€‚è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€&#x27;, &#x27;å¯Œå‹’æ›¾ç»è¯´è¿‡ï¼Œè‹¦éš¾ç£¨ç‚¼ä¸€äº›äººï¼Œä¹Ÿæ¯ç­å¦ä¸€äº›äººã€‚è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€&#x27;, &quot;æ–‡æ£®ç‰¹Â·çš®å°”æ›¾ç»è¯´è¿‡ï¼Œæ”¹å˜ä½ çš„æƒ³æ³•ï¼Œä½ å°±æ”¹å˜äº†è‡ªå·±çš„ä¸–ç•Œã€‚è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€&quot;, //çœç•¥è‹¥å¹²åäººåè¨€]let åé¢å«è¯ = [ &quot;è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€ã€‚ &quot;, &quot;å¸¦ç€è¿™å¥è¯ï¼Œæˆ‘ä»¬è¿˜è¦æ›´åŠ æ…é‡çš„å®¡è§†è¿™ä¸ªé—®é¢˜ï¼š &quot;, &quot;è¿™å¯å‘äº†æˆ‘ï¼Œ &quot;, &quot;æˆ‘å¸Œæœ›è¯¸ä½ä¹Ÿèƒ½å¥½å¥½åœ°ä½“ä¼šè¿™å¥è¯ã€‚ &quot;, &quot;è¿™å¥è¯è¯­è™½ç„¶å¾ˆçŸ­ï¼Œä½†ä»¤æˆ‘æµ®æƒ³è”ç¿©ã€‚ &quot;,]let å‰é¢å«è¯ = [ &quot;æ›¾ç»è¯´è¿‡&quot;, &quot;åœ¨ä¸ç»æ„é—´è¿™æ ·è¯´è¿‡&quot;,]function éšä¾¿å–ä¸€å¥(åˆ—è¡¨)&#123; let åæ ‡ = Math.floor( Math.random() * åˆ—è¡¨.length ); return åˆ—è¡¨[åæ ‡];&#125;function éšä¾¿å–ä¸€ä¸ªæ•°(æœ€å°å€¼ = 0,æœ€å¤§å€¼ = 100)&#123; let æ•°å­— = Math.random()*( æœ€å¤§å€¼ - æœ€å°å€¼ ) + æœ€å°å€¼; return æ•°å­—;&#125;function æ¥ç‚¹åäººåè¨€()&#123; let åè¨€ = éšä¾¿å–ä¸€å¥(åäººåè¨€) åè¨€ = åè¨€.replace(&quot;æ›¾ç»è¯´è¿‡&quot;, éšä¾¿å–ä¸€å¥(å‰é¢å«è¯) ) åè¨€ = åè¨€.replace(&quot;è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€&quot;, éšä¾¿å–ä¸€å¥(åé¢å«è¯) ) return åè¨€&#125;function æ¥ç‚¹è®ºè¿°()&#123; let å¥å­ = éšä¾¿å–ä¸€å¥(è®ºè¿°); å¥å­ = å¥å­.replace(RegExp(&quot;ä¸»é¢˜&quot;, &quot;g&quot;),ä¸»é¢˜); return å¥å­;&#125;function å¢åŠ æ®µè½(ç« èŠ‚)&#123; if(ç« èŠ‚[ç« èŠ‚.length-1] === &quot; &quot;)&#123; ç« èŠ‚ = ç« èŠ‚.slice(0,-2) &#125; return &quot; &quot; + ç« èŠ‚ + &quot;ã€‚ &quot;&#125; åœ¨å¹¿å¤§ç½‘å‹çš„å¸®åŠ©ä¸‹ï¼Œæ•´ç†äº†ä¸€ç™¾æ¡çš„åäººåè¨€ï¼Œæ•´ç†çš„æ ¼å¼éƒ½æ˜¯å›ºå®šçš„ï¼šäººå+æ›¾ç»è¯´è¿‡+ä¸€æ®µè¯+è¿™ä¸ç¦ä»¤æˆ‘æ·±æ€ï¼Œç„¶åæŠŠæ›¾ç»è¯´è¿‡æ›¿æ¢å‰é¢å«è¯ï¼ŒæŠŠè¿™ä¸ç¦ä»¤æˆ‘æ·±æ€æ›¿æ¢æˆåé¢å«è¯ã€‚å…¬ç”¨å‡½æ•°å®šä¹‰å¥½äº†ï¼Œæœ€æ ¸å¿ƒæœ€ç²¾å½©çš„éƒ¨åˆ†å°±æ˜¯ç”Ÿæˆæ–‡ç« çš„ä»£ç äº†ï¼š 1234567891011121314151617181920212223242526272829function ç”Ÿæˆæ–‡ç« ()&#123; ä¸»é¢˜ = $(&#x27;input&#x27;).value let æ–‡ç«  = [] for(let ç©º in ä¸»é¢˜)&#123; let ç« èŠ‚ = &quot;&quot;; let ç« èŠ‚é•¿åº¦ = 0; while( ç« èŠ‚é•¿åº¦ &lt; 6000 )&#123; let éšæœºæ•° = éšä¾¿å–ä¸€ä¸ªæ•°(); if(éšæœºæ•° &lt; 5 &amp;&amp; ç« èŠ‚.length &gt; 200)&#123; ç« èŠ‚ = å¢åŠ æ®µè½(ç« èŠ‚); æ–‡ç« .push(ç« èŠ‚); ç« èŠ‚ = &quot;&quot;; &#125;else if(éšæœºæ•° &lt; 20)&#123; let å¥å­ = æ¥ç‚¹åäººåè¨€(); ç« èŠ‚é•¿åº¦ = ç« èŠ‚é•¿åº¦ + å¥å­.length; ç« èŠ‚ = ç« èŠ‚ + å¥å­; &#125;else&#123; let å¥å­ = æ¥ç‚¹è®ºè¿°(); ç« èŠ‚é•¿åº¦ = ç« èŠ‚é•¿åº¦ + å¥å­.length; ç« èŠ‚ = ç« èŠ‚ + å¥å­; &#125; &#125; ç« èŠ‚ = å¢åŠ æ®µè½(ç« èŠ‚); æ–‡ç« .push(ç« èŠ‚); &#125; let æ’ç‰ˆ = &quot;&lt;div&gt;&quot; + æ–‡ç« .join(&quot;&lt;/div&gt;&lt;div&gt;&quot;) + &quot;&lt;/div&gt;&quot;; $(&quot;#è®ºæ–‡&quot;).innerHTML = æ’ç‰ˆ;&#125; é¦–å…ˆä½œè€…çš„æ€è·¯æ˜¯æŠŠä¸€ç¯‡æ–‡ç« ä½œä¸ºä¸€ä¸ªæ•°ç»„å­˜èµ·æ¥ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªç« èŠ‚ï¼Œè¿™é‡Œçš„ç« èŠ‚å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè‡ªç„¶æ®µï¼Œæ˜¯æ–‡ç« çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼›æœ€åå†æŠŠæ•´ä¸ªæ•°ç»„é€šè¿‡divæ‹¼æ¥èµ·æ¥ã€‚å…¶ä¸­ï¼Œæœ€é‡è¦çš„å°±æ˜¯å¦‚ä½•æ¥ç”Ÿæˆä¸€ä¸ªç« èŠ‚ã€‚ åˆšå¼€å§‹æˆ‘å¯¹for(let ç©º in ä¸»é¢˜)è¿™ä¸ªéå†æ„Ÿåˆ°ååˆ†å›°æƒ‘ï¼Œä¸»é¢˜å¾ˆå¥½ç†è§£æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯å°†å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦éå†å‡ºæ¥æœ‰ä»€ä¹ˆä½œç”¨ä¹ˆï¼Ÿç»è¿‡å¤šæ¬¡debugï¼ŒçŒœæµ‹å…¶å®æ˜¯ä¸ºäº†å¤šç”Ÿæˆå‡ æ¬¡ç« èŠ‚ï¼Œå‡‘å­—æ•°è€Œå·²ï¼›åŸæœ¬6000å­—ï¼Œç»è¿‡å¤šæ¬¡éå†ï¼Œå®é™…å¯èƒ½ä¼šè¿œè¶…6000å­—ï¼Œè¾¾åˆ°å¥½å‡ ä¸‡çš„å­—æ•°ï¼ˆ6000*ä¸»é¢˜å­—æ•°ï¼‰ï¼›å› æ­¤åœ¨suulnnkaæ”¹ç‰ˆåçš„å‡½æ•°ä¸­ï¼Œä¹Ÿå°†è¿™æ®µä»£ç ä¼˜åŒ–æˆäº†while( æ–‡ç« é•¿åº¦ &lt; 12000 )ï¼Œæ§åˆ¶æ•´ç¯‡æ–‡ç« çš„å­—æ•°ç•¥å¤§äº12000å­—ã€‚ éšä¾¿å–ä¸€ä¸ªæ•°å‡½æ•°ç”¨æ¥ç”Ÿæˆä¸€ä¸ª0åˆ°100çš„éšæœºæ•°ï¼Œé¦–å…ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹éšæœºæ•° &lt; 20çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯15%çš„æ¦‚ç‡ï¼ˆ20-5ï¼‰ç”¨æ¥åœ¨ç« èŠ‚ä¸­æ·»åŠ ä¸€å¥åäººåè¨€ï¼›ç„¶å80%çš„æ¦‚ç‡ï¼ˆ100-5-15ï¼‰ç”¨æ¥åœ¨ç« èŠ‚ä¸­æ·»åŠ ä¸€å¥è®ºè¿°ï¼›æœ€åæˆ‘ä»¬å›åˆ°æœ€éš¾ç†è§£çš„éšæœºæ•° &lt; 5çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯5%çš„æ¦‚ç‡æ¥å°†è¿™æ®µç« èŠ‚ç»™ç»“æŸæ‰ï¼Œé€šè¿‡æŠŠç« èŠ‚æœ€åä¸¤ä¸ªå­—ç¬¦æˆªå–æ›¿æ¢æˆå¥å·ï¼Œç„¶åæŠŠç« èŠ‚pushåˆ°æ–‡ç« ä¸­ï¼Œæœ€åæŠŠç« èŠ‚å˜é‡çš„å†…å®¹ç»™æ¸…ç©ºäº†ã€‚ é€šè¿‡å¯¹æºç çš„åˆ†æï¼Œæˆ‘ä»¬çœ‹å‡ºä½œè€…çš„æ–¹æ³•ç¡®å®å¾ˆç®€å•æœ‰æ•ˆï¼Œé€šè¿‡é¢„å­˜çš„åäººåè¨€å’Œå¤§æ®µè®ºè¿°æ¥ç”Ÿæˆæ–‡ç« ï¼›ä¹Ÿæ­£æ˜¯å› ä¸ºç®€å•ï¼Œæ‰€ä»¥æ•´ä¸ªç”Ÿæˆå‡ºæ¥çš„æ–‡ç« é‡å¤ç‡åé«˜äº†ï¼›å› æ­¤ä½œè€…ä¹Ÿæ„è¯†åˆ°è¿™ä¸ªé—®é¢˜ï¼Œåœ¨é¡¹ç›®ä¸­æ˜ç¡®è¡¨ç¤ºä¸‹ä¸€æ­¥è®¡åˆ’æ˜¯é˜²æ­¢æ–‡ç« è¿‡äºå†…å®¹é‡å¤ã€‚ å¹¿å¤§ç½‘å‹è¿˜åœ¨æ­¤åŸºç¡€ä¸Šå¼€å‘äº†æ—¥è¯­ç‰ˆçš„å’Œå˜´è‡­ç‰ˆçš„ï¼ˆLOLå–·äººç¥å™¨ï¼Ÿï¼‰ï¼Œæ›´æœ‰ç½‘å‹è°ƒä¾ƒæå°ç’ç¦»å©šå®£è¨€éƒ½æ˜¯ç”¨è¿™ä¸ªé¡¹ç›®ç”Ÿæˆçš„ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å‘ç°é¡¹ç›®ä¸­çš„ä»£ç ä½¿ç”¨äº†å¤§é‡çš„ä¸­æ–‡å‡½æ•°åå’Œä¸­æ–‡å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡çŸ¥é“äº†ç¼–ç¨‹ä¸­è¿˜èƒ½ä½¿ç”¨ä¸­æ–‡å˜é‡åï¼Œå¤ªç¡¬æ ¸äº†ã€‚ä½œè€…ä¹Ÿåœ¨é¡¹ç›®ä¸­è¡¨ç¤ºï¼Œä½¿ç”¨ä¸­æ–‡å˜é‡ååªæ˜¯å› ä¸ºæ‡’å¾—åˆ‡è‹±æ–‡è¾“å…¥æ³•ï¼Œäºæ˜¯ï¼Œåˆ†æ”¯ä½œè€…è¿˜ç‰¹åœ°å¸®å¿™æŠŠæ¼ç½‘çš„è‹±æ–‡å˜é‡åï¼Œä¹Ÿç»™æ”¹æˆäº†ä¸­æ–‡ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æºç ","slug":"SourceCode","permalink":"https://xieyufei.com/tags/SourceCode/"}]},{"title":"é¢è¯•å®Œ50ä¸ªäººåæˆ‘å†™ä¸‹è¿™ç¯‡æ€»ç»“","date":"2019-11-08T13:50:00.000Z","path":"2019/11/08/Front-Summary.html","text":"2019å¹´çš„æ˜¥èŠ‚æ¥çš„ä¼¼ä¹æ ¼å¤–çš„æ—©ï¼Œè¿‡å®Œå¹´ç›¸ä¿¡å¾ˆå¤šç«¥é‹éƒ½å¼€å§‹è ¢è ¢æ¬²åŠ¨äº†ï¼›ç¬”è€…æ€»ç»“äº†å¤šç¯‡æ•™ç¨‹ï¼Œç»“åˆå¹³æ—¶è‡ªå·±çš„é¢è¯•ç»å†ï¼Œæ•´ç†äº†è¿™ä»½æ–‡æ¡£ï¼Œå¸Œæœ›å¸®åŠ©å¤§å®¶æ¥çªå‡»ä¸€ä¸‹å‰ç«¯çŸ¥è¯†çš„ç›²åŒºã€‚ ä¸€ã€CSSç›’æ¨¡å‹ CSSç›’æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç›’å­ï¼Œå°è£…å‘¨å›´çš„HTMLå…ƒç´ ï¼Œå®ƒåŒ…æ‹¬ï¼šè¾¹è·marginï¼Œè¾¹æ¡†borderï¼Œå¡«å……paddingï¼Œå’Œå®é™…å†…å®¹contentã€‚ç›’æ¨¡å‹å…è®¸æˆ‘ä»¬åœ¨å…¶å®ƒå…ƒç´ å’Œå‘¨å›´å…ƒç´ è¾¹æ¡†ä¹‹é—´çš„ç©ºé—´æ”¾ç½®å…ƒç´ ã€‚ box-sizing: content-boxï¼ˆW3Cç›’æ¨¡å‹ï¼Œåˆåæ ‡å‡†ç›’æ¨¡å‹ï¼‰ï¼šå…ƒç´ çš„å®½é«˜å¤§å°è¡¨ç°ä¸ºå†…å®¹çš„å¤§å°ã€‚ box-sizing: border-boxï¼ˆIEç›’æ¨¡å‹ï¼Œåˆåæ€ªå¼‚ç›’æ¨¡å‹ï¼‰ï¼šå…ƒç´ çš„å®½é«˜è¡¨ç°ä¸ºå†…å®¹ + å†…è¾¹è· + è¾¹æ¡†çš„å¤§å°ã€‚èƒŒæ™¯ä¼šå»¶ä¼¸åˆ°è¾¹æ¡†çš„å¤–æ²¿ã€‚ CSS3çš„æ–°ç‰¹æ€§ word-wrap æ–‡å­—æ¢è¡Œ text-overflow è¶…è¿‡æŒ‡å®šå®¹å™¨çš„è¾¹ç•Œæ—¶å¦‚ä½•æ˜¾ç¤º text-decoration æ–‡å­—æ¸²æŸ“ text-shadowæ–‡å­—é˜´å½± gradientæ¸å˜æ•ˆæœ transitionè¿‡æ¸¡æ•ˆæœ transition-durationï¼šè¿‡æ¸¡çš„æŒç»­æ—¶é—´ transformæ‹‰ä¼¸ï¼Œå‹ç¼©ï¼Œæ—‹è½¬ï¼Œåç§»ç­‰å˜æ¢ animationåŠ¨ç”» transitionå’Œanimationçš„åŒºåˆ«ï¼š Animationå’Œtransitionå¤§éƒ¨åˆ†å±æ€§æ˜¯ç›¸åŒçš„ï¼Œä»–ä»¬éƒ½æ˜¯éšæ—¶é—´æ”¹å˜å…ƒç´ çš„å±æ€§å€¼ï¼Œä»–ä»¬çš„ä¸»è¦åŒºåˆ«æ˜¯transitionéœ€è¦è§¦å‘ä¸€ä¸ªäº‹ä»¶æ‰èƒ½æ”¹å˜å±æ€§ï¼Œè€Œanimationä¸éœ€è¦è§¦å‘ä»»ä½•äº‹ä»¶çš„æƒ…å†µä¸‹æ‰ä¼šéšæ—¶é—´æ”¹å˜å±æ€§å€¼ï¼Œå¹¶ä¸”transitionä¸º2å¸§ï¼Œä»from â€¦. toï¼Œè€Œanimationå¯ä»¥ä¸€å¸§ä¸€å¸§çš„ã€‚ CSSé€‰æ‹©å™¨åŠå…¶ä¼˜å…ˆçº§ !important å†…è”æ ·å¼style=â€â€ IDé€‰æ‹©å™¨#id ç±»é€‰æ‹©å™¨/å±æ€§é€‰æ‹©å™¨/ä¼ªç±»é€‰æ‹©å™¨.class.active[href=â€â€] å…ƒç´ é€‰æ‹©å™¨/å…³ç³»é€‰æ‹©å™¨/ä¼ªå…ƒç´ é€‰æ‹©å™¨html+div&gt;span::after é€šé…ç¬¦é€‰æ‹©å™¨* BFCBFCï¼ˆBlock Formatting Contextï¼‰æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ˜¯Webé¡µé¢ä¸­ç›’æ¨¡å‹å¸ƒå±€çš„CSSæ¸²æŸ“æ¨¡å¼ï¼ŒæŒ‡ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸæˆ–è€…è¯´æ˜¯ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ã€‚ BFCåº”ç”¨ é˜²æ­¢marginé‡å  æ¸…é™¤å†…éƒ¨æµ®åŠ¨ è‡ªé€‚åº”ä¸¤ï¼ˆå¤šï¼‰æ å¸ƒå±€ é˜²æ­¢å­—ä½“ç¯ç»• è§¦å‘BFCæ¡ä»¶ æ ¹å…ƒç´  floatçš„å€¼ä¸ä¸ºnone overflowçš„å€¼ä¸ä¸ºvisible displayçš„å€¼ä¸ºinline-blockã€table-cellã€table-caption positionçš„å€¼ä¸ºabsoluteã€fixed BFCçš„ç‰¹æ€§ å†…éƒ¨çš„Boxä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½®ã€‚ å‚ç›´æ–¹å‘ä¸Šçš„è·ç¦»ç”±marginå†³å®š bfcçš„åŒºåŸŸä¸ä¼šä¸floatçš„å…ƒç´ åŒºåŸŸé‡å ã€‚ è®¡ç®—bfcçš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®— bfcå°±æ˜¯é¡µé¢ä¸Šçš„ä¸€ä¸ªç‹¬ç«‹å®¹å™¨ï¼Œå®¹å™¨é‡Œé¢çš„å­å…ƒç´ ä¸ä¼šå½±å“å¤–é¢å…ƒç´ ã€‚ divæ°´å¹³å±…ä¸­ è¡Œå†…å…ƒç´  123.parent &#123; text-align: center;&#125; å—çº§å…ƒç´  123.son &#123; margin: 0 auto;&#125; flexå¸ƒå±€ 1234.parent &#123; display: flex; justify-content: center;&#125; ç»å¯¹å®šä½å®šå®½ 123456.son &#123; position: absolute; width: å®½åº¦; left: 50%; margin-left: -0.5*å®½åº¦&#125; ç»å¯¹å®šä½ä¸å®šå®½ 12345.son &#123; position: absolute; left: 50%; transform: translate(-50%, 0);&#125; left/right: 0 1234567.son &#123; position: absolute; width: å®½åº¦; left: 0; right: 0; margin: 0 auto;&#125; divå‚ç›´å±…ä¸­ è¡Œå†…å…ƒç´  123456.parent &#123; height: é«˜åº¦;&#125;.son &#123; line-height: é«˜åº¦;&#125; table 1234567.parent &#123; display: table;&#125;.son &#123; display: table-cell; vertical-align: middle;&#125; flex 1234.parent &#123; display: flex; align-items: center;&#125; ç»å¯¹å®šä½å®šé«˜ 123456.son &#123; position: absolute; top: 50%; height: é«˜åº¦; margin-top: -0.5é«˜åº¦;&#125; ç»å¯¹å®šä½ä¸å®šé«˜12345.son &#123; position: absolute; top: 50%; transform: translate( 0, -50%);&#125; top/bottom: 0;1234567.son &#123; position: absolute; height: é«˜åº¦; top: 0; bottom: 0; margin: auto 0;&#125; ç»å¯¹å®šä½å’Œç›¸å¯¹å®šä½ absolute ç»å¯¹å®šä½ ç›¸å¯¹äºæœ€è¿‘çš„å·²å®šä½çš„ç¥–å…ˆå…ƒç´ , æœ‰å·²å®šä½(æŒ‡positionä¸æ˜¯staticçš„å…ƒç´ )ç¥–å…ˆå…ƒç´ , ä»¥æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ ä¸ºå‚è€ƒæ ‡å‡†ã€‚å¦‚æœæ— å·²å®šä½ç¥–å…ˆå…ƒç´ , ä»¥bodyå…ƒç´ ä¸ºåç§»å‚ç…§åŸºå‡†, å®Œå…¨è„±ç¦»äº†æ ‡å‡†æ–‡æ¡£æµã€‚ fixed å›ºå®šå®šä½çš„å…ƒç´ ä¼šç›¸å¯¹äºè§†çª—æ¥å®šä½,è¿™æ„å‘³ç€å³ä¾¿é¡µé¢æ»šåŠ¨ï¼Œå®ƒè¿˜æ˜¯ä¼šåœç•™åœ¨ç›¸åŒçš„ä½ç½®ã€‚ä¸€ä¸ªå›ºå®šå®šä½å…ƒç´ ä¸ä¼šä¿ç•™å®ƒåŸæœ¬åœ¨é¡µé¢åº”æœ‰çš„ç©ºéš™ã€‚ å…±åŒç‚¹ï¼šæ”¹å˜è¡Œå†…å…ƒç´ çš„å‘ˆç°æ–¹å¼ï¼Œéƒ½è„±ç¦»äº†æ–‡æ¡£æµï¼›ä¸åŒç‚¹ï¼šabsoluteçš„â€æ ¹å…ƒç´ â€œæ˜¯å¯ä»¥è®¾ç½®çš„ï¼Œfixedçš„â€œæ ¹å…ƒç´ â€å›ºå®šä¸ºæµè§ˆå™¨çª—å£ flexå¸ƒå±€é‡‡ç”¨ Flex å¸ƒå±€çš„å…ƒç´ ï¼Œç§°ä¸º Flex å®¹å™¨ï¼ˆflex containerï¼‰ï¼Œç®€ç§°â€å®¹å™¨â€ã€‚å®ƒçš„æ‰€æœ‰å­å…ƒç´ è‡ªåŠ¨æˆä¸ºå®¹å™¨æˆå‘˜ï¼Œç§°ä¸º Flex é¡¹ç›®ï¼ˆflex itemï¼‰ï¼Œç®€ç§°â€œé¡¹ç›®â€ã€‚ çˆ¶å…ƒç´ å±æ€§ å±æ€§å å±æ€§å€¼ å¤‡æ³¨ display flex å®šä¹‰äº†ä¸€ä¸ªflexå®¹å™¨ï¼Œå®ƒçš„ç›´æ¥å­å…ƒç´ ä¼šæ¥å—è¿™ä¸ªflexç¯å¢ƒ flex-direction row,row-reverse,column,column-reverse å†³å®šä¸»è½´çš„æ–¹å‘ flex-wrap nowrap,wrap,wrap-reverse å¦‚æœä¸€æ¡è½´çº¿æ’ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œ flex-flow [flex-direction] , [flex-wrap] æ˜¯flex-directionå±æ€§å’Œflex-wrapå±æ€§çš„ç®€å†™å½¢å¼ï¼Œé»˜è®¤å€¼ä¸ºrow nowrap justify-content flex-start,flex-end,center,space-between,space-around è®¾ç½®æˆ–æ£€ç´¢å¼¹æ€§ç›’å­å…ƒç´ åœ¨ä¸»è½´ï¼ˆæ¨ªè½´ï¼‰æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ align-items flex-start,flex-end,center,baseline,stretch è®¾ç½®æˆ–æ£€ç´¢å¼¹æ€§ç›’å­å…ƒç´ åœ¨ä¾§è½´ï¼ˆçºµè½´ï¼‰æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ å­å…ƒç´ å±æ€§ å±æ€§å å±æ€§å€¼ å¤‡æ³¨ order [int] é»˜è®¤æƒ…å†µä¸‹flex orderä¼šæŒ‰ç…§ä¹¦å†™é¡ºåºå‘ˆç°ï¼Œå¯ä»¥é€šè¿‡orderå±æ€§æ”¹å˜ï¼Œæ•°å€¼å°çš„åœ¨å‰é¢ï¼Œè¿˜å¯ä»¥æ˜¯è´Ÿæ•°ã€‚ flex-grow [number] è®¾ç½®æˆ–æ£€ç´¢å¼¹æ€§ç›’çš„æ‰©å±•æ¯”ç‡,æ ¹æ®å¼¹æ€§ç›’å­å…ƒç´ æ‰€è®¾ç½®çš„æ‰©å±•å› å­ä½œä¸ºæ¯”ç‡æ¥åˆ†é…å‰©ä½™ç©ºé—´ flex-shrink [number] è®¾ç½®æˆ–æ£€ç´¢å¼¹æ€§ç›’çš„æ”¶ç¼©æ¯”ç‡,æ ¹æ®å¼¹æ€§ç›’å­å…ƒç´ æ‰€è®¾ç½®çš„æ”¶ç¼©å› å­ä½œä¸ºæ¯”ç‡æ¥æ”¶ç¼©ç©ºé—´ flex-basis [length], auto è®¾ç½®æˆ–æ£€ç´¢å¼¹æ€§ç›’ä¼¸ç¼©åŸºå‡†å€¼ align-self auto,flex-start,flex-end,center,baseline,stretch è®¾ç½®æˆ–æ£€ç´¢å¼¹æ€§ç›’å­å…ƒç´ åœ¨ä¾§è½´ï¼ˆçºµè½´ï¼‰æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ï¼Œå¯ä»¥è¦†ç›–çˆ¶å®¹å™¨align-itemsçš„è®¾ç½® è®©å…ƒç´ æ¶ˆå¤±visibility:hiddenã€display:noneã€z-index=-1ã€opacityï¼š0 opacityï¼š0,è¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¹¶ä¸”ï¼Œå¦‚æœè¯¥å…ƒç´ å·²ç»ç»‘å®šäº†ä¸€äº›äº‹ä»¶ï¼Œå¦‚clickäº‹ä»¶ä¹Ÿèƒ½è§¦å‘ visibility:hidden,è¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œä½†æ˜¯ä¸ä¼šè§¦å‘è¯¥å…ƒç´ å·²ç»ç»‘å®šçš„äº‹ä»¶ display:none, æŠŠå…ƒç´ éšè—èµ·æ¥ï¼Œå¹¶ä¸”ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¯ä»¥ç†è§£æˆåœ¨é¡µé¢ä¸­æŠŠè¯¥å…ƒç´ åˆ æ‰ z-index=-1ç½®äºå…¶ä»–å…ƒç´ ä¸‹é¢ æ¸…é™¤æµ®åŠ¨ åœ¨æµ®åŠ¨å…ƒç´ åé¢æ·»åŠ  clear:both çš„ç©º div å…ƒç´ ï¼Œ 12345&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt; &lt;div style=&quot;clear:both&quot;&gt;&lt;/div&gt;&lt;/div&gt; ç»™çˆ¶å…ƒç´ æ·»åŠ  overflow:hidden æˆ–è€… auto æ ·å¼ï¼Œè§¦å‘BFCã€‚ 1234&lt;div class=&quot;container&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt;&lt;/div&gt; 123456.container&#123; width: 300px; background-color: #aaa; overflow:hidden; zoom:1; /*IE6*/&#125; ä½¿ç”¨ä¼ªå…ƒç´ ï¼Œä¹Ÿæ˜¯åœ¨å…ƒç´ æœ«å°¾æ·»åŠ ä¸€ä¸ªç‚¹å¹¶å¸¦æœ‰ clear: both å±æ€§çš„å…ƒç´ å®ç°çš„ã€‚ 1234&lt;div class=&quot;container clearfix&quot;&gt; &lt;div class=&quot;left&quot;&gt;&lt;/div&gt; &lt;div class=&quot;right&quot;&gt;&lt;/div&gt;&lt;/div&gt; 12345678910.clearfix&#123; zoom: 1; /*IE6*/&#125;.clearfix:after&#123; content: &quot;.&quot;; height: 0; clear: both; display: block; visibility: hidden;&#125; æ¨èä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•ï¼Œä¸ä¼šåœ¨é¡µé¢æ–°å¢divï¼Œæ–‡æ¡£ç»“æ„æ›´åŠ æ¸…æ™°ã€‚ calcå‡½æ•°calcå‡½æ•°æ˜¯css3æ–°å¢çš„åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨calc()è®¡ç®—borderã€marginã€padingã€font-sizeå’Œwidthç­‰å±æ€§è®¾ç½®åŠ¨æ€å€¼ã€‚ 123456789#div1 &#123; position: absolute; left: 50px; width: calc( 100% / (100px * 2) ); //å…¼å®¹å†™æ³• width: -moz-calc( 100% / (100px * 2) ); width: -webkit-calc( 100% / (100px * 2) ); border: 1px solid black;&#125; æ³¨æ„ç‚¹ï¼š éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿ç®—ç¬¦å‰åéƒ½éœ€è¦ä¿ç•™ä¸€ä¸ªç©ºæ ¼ï¼Œä¾‹å¦‚ï¼šwidth: calc(100% - 10px); calc()å‡½æ•°æ”¯æŒ â€œ+â€, â€œ-â€œ, â€œ*â€, â€œ/â€œ è¿ç®—; å¯¹äºä¸æ”¯æŒ calc() çš„æµè§ˆå™¨ï¼Œæ•´ä¸ªå±æ€§å€¼è¡¨è¾¾å¼å°†è¢«å¿½ç•¥ã€‚ä¸è¿‡æˆ‘ä»¬å¯ä»¥å¯¹é‚£äº›ä¸æ”¯æŒ calc()çš„æµè§ˆå™¨ï¼Œä½¿ç”¨ä¸€ä¸ªå›ºå®šå€¼ä½œä¸ºå›é€€ã€‚ ç§»åŠ¨ç«¯remremå®˜æ–¹å®šä¹‰ã€The font size of the root elementã€ï¼Œå³æ ¹å…ƒç´ çš„å­—ä½“å¤§å°ã€‚remæ˜¯ä¸€ä¸ªç›¸å¯¹çš„CSSå•ä½ï¼Œ1remç­‰äºhtmlå…ƒç´ ä¸Šfont-sizeçš„å¤§å°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªè¦è®¾ç½®htmlä¸Šfont-sizeçš„å¤§å°ï¼Œå°±å¯ä»¥æ”¹å˜1remæ‰€ä»£è¡¨çš„å¤§å°ã€‚ 12345678(function () &#123; var html = document.documentElement; function onWindowResize() &#123; html.style.fontSize = html.getBoundingClientRect().width / 20 + &#x27;px&#x27;; &#125; window.addEventListener(&#x27;resize&#x27;, onWindowResize); onWindowResize();&#125;)(); ç§»åŠ¨ç«¯1pxä¸€èˆ¬æ¥è¯´ï¼Œåœ¨PCç«¯æµè§ˆå™¨ä¸­ï¼Œè®¾å¤‡åƒç´ æ¯”ï¼ˆdprï¼‰ç­‰äº1ï¼Œ1ä¸ªcssåƒç´ å°±ä»£è¡¨1ä¸ªç‰©ç†åƒç´ ï¼›ä½†æ˜¯åœ¨retinaå±å¹•ä¸­ï¼Œdpræ™®éæ˜¯2æˆ–3ï¼Œ1ä¸ªcssåƒç´ ä¸å†ç­‰äº1ä¸ªç‰©ç†åƒç´ ï¼Œå› æ­¤æ¯”å®é™…è®¾è®¡ç¨¿çœ‹èµ·æ¥ç²—ä¸å°‘ã€‚ ä¼ªå…ƒç´ +scale 123456789101112131415161718192021&lt;style&gt; .box&#123; width: 100%; height: 1px; margin: 20px 0; position: relative; &#125; .box::after&#123; content: &#x27;&#x27;; position: absolute; bottom: 0; width: 100%; height: 1px; transform: scaleY(0.5); transform-origin: 0 0; background: red; &#125;&lt;/style&gt;&lt;div class=&quot;box&quot;&gt;&lt;/div&gt; border-image 12345div&#123; border-width: 1px 0px; -webkit-border-image: url(border.png) 2 0 stretch; border-image: url(border.png) 2 0 stretch;&#125; ä¸¤è¾¹å®½åº¦å›ºå®šä¸­é—´è‡ªé€‚åº”çš„ä¸‰æ å¸ƒå±€åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆéœ€è¦æ—¥å¸¸æŒæ¡çš„é‡è¦å¸ƒå±€æ–¹å¼ã€‚ä¸¤è€…çš„åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯ä¸ºäº†å®ç°ä¸€ä¸ªä¸¤ä¾§å®½åº¦å›ºå®šï¼Œä¸­é—´å®½åº¦è‡ªé€‚åº”çš„ä¸‰æ å¸ƒå±€ã€‚ åœ£æ¯å¸ƒå±€123456789101112131415161718192021222324252627282930&lt;style&gt;body&#123; min-width: 550px;&#125;#container&#123; padding-left: 200px; padding-right: 150px;&#125;#container .column&#123; float: left;&#125;#center&#123; width: 100%;&#125;#left&#123; width: 200px; margin-left: -100%; position: relative; right: 200px;&#125;#right&#123; width: 150px; margin-right: -150px;&#125;&lt;/style&gt;&lt;div id=&quot;container&quot;&gt; &lt;div id=&quot;center&quot; class=&quot;column&quot;&gt;center&lt;/div&gt; &lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;left&lt;/div&gt; &lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;right&lt;/div&gt;&lt;/div&gt; åŒé£ç¿¼å¸ƒå±€1234567891011121314151617181920212223242526272829&lt;style&gt;body &#123; min-width: 500px;&#125;#container &#123; width: 100%;&#125;.column &#123; float: left;&#125;#center &#123; margin-left: 200px; margin-right: 150px;&#125;#left &#123; width: 200px; margin-left: -100%;&#125;#right &#123; width: 150px; margin-left: -150px;&#125;&lt;/style&gt;&lt;div id=&quot;container&quot; class=&quot;column&quot;&gt; &lt;div id=&quot;center&quot;&gt;center&lt;/div&gt;&lt;/div&gt;&lt;div id=&quot;left&quot; class=&quot;column&quot;&gt;left&lt;/div&gt;&lt;div id=&quot;right&quot; class=&quot;column&quot;&gt;right&lt;/div&gt; ä¼ªç±»å’Œä¼ªå…ƒç´ csså¼•å…¥ä¼ªç±»å’Œä¼ªå…ƒç´ æ¦‚å¿µæ˜¯ä¸ºäº†æ ¼å¼åŒ–æ–‡æ¡£æ ‘ä»¥å¤–çš„ä¿¡æ¯ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼ªç±»å’Œä¼ªå…ƒç´ éƒ½æ˜¯ç”¨æ¥ä¿®é¥°ä¸åœ¨æ–‡æ¡£æ ‘ä¸­çš„éƒ¨åˆ†ã€‚ ä¼ªç±»ä¼ªç±»å­˜åœ¨çš„æ„ä¹‰æ˜¯ä¸ºäº†é€šè¿‡é€‰æ‹©å™¨æ‰¾åˆ°é‚£äº›ä¸å­˜åœ¨DOMæ ‘ä¸­çš„ä¿¡æ¯ä»¥åŠä¸èƒ½è¢«å¸¸è§„CSSé€‰æ‹©å™¨è·å–åˆ°çš„ä¿¡æ¯ã€‚ è·å–ä¸å­˜åœ¨äºDOMæ ‘ä¸­çš„ä¿¡æ¯ã€‚æ¯”å¦‚æ ‡ç­¾çš„:linkã€visitedç­‰ï¼Œè¿™äº›ä¿¡æ¯ä¸å­˜åœ¨äºDOMæ ‘ç»“æ„ä¸­ï¼Œåªèƒ½é€šè¿‡CSSé€‰æ‹©å™¨æ¥è·å–ï¼› è·å–ä¸èƒ½è¢«å¸¸è§„CSSé€‰æ‹©å™¨è·å–çš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼šè¦è·å–ç¬¬ä¸€ä¸ªå­å…ƒç´ ï¼Œæˆ‘ä»¬æ— æ³•ç”¨å¸¸è§„çš„CSSé€‰æ‹©å™¨è·å–ï¼Œä½†å¯ä»¥é€šè¿‡ :first-child æ¥è·å–åˆ°ã€‚ ä¼ªå…ƒç´ ä¼ªå…ƒç´ ç”¨äºåˆ›å»ºä¸€äº›ä¸åœ¨æ–‡æ¡£æ ‘ä¸­çš„å…ƒç´ ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æ ·å¼ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡:beforeæ¥åœ¨ä¸€ä¸ªå…ƒç´ å‰å¢åŠ ä¸€äº›æ–‡æœ¬ï¼Œå¹¶ä¸ºè¿™äº›æ–‡æœ¬æ·»åŠ æ ·å¼ã€‚è™½ç„¶ç”¨æˆ·å¯ä»¥çœ‹åˆ°è¿™äº›æ–‡æœ¬ï¼Œä½†æ˜¯è¿™äº›æ–‡æœ¬å®é™…ä¸Šä¸åœ¨æ–‡æ¡£æ ‘ä¸­ã€‚å¸¸è§çš„ä¼ªå…ƒç´ æœ‰ï¼š::beforeï¼Œ::afterï¼Œ::first-lineï¼Œ::first-letterï¼Œ::selectionã€::placeholderç­‰ å› æ­¤ï¼Œä¼ªç±»ä¸ä¼ªå…ƒç´ çš„åŒºåˆ«åœ¨äºï¼šæœ‰æ²¡æœ‰åˆ›å»ºä¸€ä¸ªæ–‡æ¡£æ ‘ä¹‹å¤–çš„å…ƒç´ ã€‚ ::afterå’Œ:afterçš„åŒºåˆ«åœ¨å®é™…çš„å¼€å‘å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æœ‰äººæŠŠä¼ªå…ƒç´ å†™æˆ:afterï¼Œè¿™å®é™…æ˜¯ CSS2 ä¸ CSS3æ–°æ—§æ ‡å‡†çš„è§„å®šä¸åŒè€Œå¯¼è‡´çš„ã€‚ CSS2 ä¸­çš„ä¼ªå…ƒç´ ä½¿ç”¨1ä¸ªå†’å·ï¼Œåœ¨ CSS3 ä¸­ï¼Œä¸ºäº†åŒºåˆ†ä¼ªç±»å’Œä¼ªå…ƒç´ ï¼Œè§„å®šä¼ªå…ƒç´ ä½¿ç”¨2ä¸ªå†’å·ã€‚æ‰€ä»¥ï¼Œå¯¹äº CSS2 æ ‡å‡†çš„è€ä¼ªå…ƒç´ ï¼Œæ¯”å¦‚:first-lineï¼Œ:first-letterï¼Œ:beforeï¼Œ:afterï¼Œå†™ä¸€ä¸ªå†’å·æµè§ˆå™¨ä¹Ÿèƒ½è¯†åˆ«ï¼Œä½†å¯¹äº CSS3 æ ‡å‡†çš„æ–°ä¼ªå…ƒç´ ï¼Œæ¯”å¦‚::selectionï¼Œå°±å¿…é¡»å†™2ä¸ªå†’å·äº†ã€‚ CSSç”»åœ†åŠåœ†æ‰‡å½¢ä¸‰è§’æ¢¯å½¢12345678910111213141516171819202122232425262728293031div&#123; margin: 50px; width: 100px; height: 100px; background: red;&#125;/* åŠåœ† */.half-circle&#123; height: 50px; border-radius: 50px 50px 0 0;&#125;/* æ‰‡å½¢ */.sector&#123; border-radius: 100px 0 0;&#125;/* ä¸‰è§’ */.triangle&#123; width: 0px; height: 0px; background: none; border: 50px solid red; border-color: red transparent transparent transparent;&#125;/* æ¢¯å½¢ */.ladder&#123; width: 50px; height: 0px; background: none; border: 50px solid red; border-color: red transparent transparent transparent;&#125; white-spaceå‡ ä¸ªå±æ€§å€¼çš„åŒºåˆ«cssä¸­white-spaceè¿™ä¸ªå±æ€§ï¼Œç”¨æ¥è®¾ç½®å…ƒç´ å¯¹å†…å®¹ä¸­çš„ç©ºæ ¼çš„å¤„ç†æ–¹å¼ï¼Œæœ‰å‡ ä¸ªå¯é€‰å€¼ï¼šnormal,nowrap,pre,pre-wrap,pre-lineã€‚æ²¡æœ‰è®¾ç½®white-spaceå±æ€§ï¼Œåˆ™é»˜è®¤ä¸ºwhite-space:normalã€‚å…¶ä»–å‡ ä¸ªå±æ€§åŒºåˆ«å¦‚ä¸‹ï¼š white-space:nowrapä¸æ¢è¡Œ white-space:preä¿ç•™ç©ºæ ¼ä¸æ¢è¡Œ white-space:pre-wrapä¿ç•™ç©ºæ ¼æ¢è¡Œ white-space:pre-lineåˆå¹¶ç©ºæ ¼æ¢è¡Œ demoå¦‚ä¸‹ï¼š 1234567891011121314151617181920212223242526272829&lt;style&gt;.nowrap-box&#123; white-space: nowrap;&#125;.pre-box&#123; white-space: pre;&#125;.pre-wrap-box&#123; white-space: pre-wrap;&#125;.pre-line-box&#123; white-space: pre-line;&#125;&lt;/style&gt;&lt;div class=&quot;nowrap-box&quot;&gt; è°¢å°é£å‰ç«¯æµ‹è¯•white-space:nowrapå±æ€§ã€‚åˆ†äº«å‰ç«¯æœ€æ–°æŠ€æœ¯æ–‡ç« ã€å·¥å…·èµ„æºï¼Œä¸“æ³¨å‰ç«¯æŠ€æœ¯å¼€å‘ã€‚å…³æ³¨æˆ‘ä»¬ï¼Œæ¯å¤©è¯»å£¹ç¯‡æ–‡ç« ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚å…¬ä¼—å·ï¼šå‰ç«¯å£¹è¯»&lt;/div&gt;&lt;div class=&quot;pre-box&quot;&gt; è°¢å°é£å‰ç«¯æµ‹è¯•white-space:preå±æ€§ã€‚ åˆ†äº«å‰ç«¯æœ€æ–°æŠ€æœ¯æ–‡ç« ã€å·¥å…·èµ„æºï¼Œä¸“æ³¨å‰ç«¯æŠ€æœ¯å¼€å‘ã€‚å…³æ³¨æˆ‘ä»¬ï¼Œæ¯å¤©è¯»å£¹ç¯‡æ–‡ç« ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥&lt;br/&gt; å…¬ä¼—å·ï¼šå‰ç«¯å£¹è¯»&lt;/div&gt;&lt;div class=&quot;pre-wrap-box&quot;&gt; è°¢å°é£å‰ç«¯æµ‹è¯•white-space:pre-wrapå±æ€§ã€‚ åˆ†äº«å‰ç«¯æœ€æ–°æŠ€æœ¯æ–‡ç« ã€å·¥å…·èµ„æºï¼Œä¸“æ³¨å‰ç«¯æŠ€æœ¯å¼€å‘ã€‚å…³æ³¨æˆ‘ä»¬ï¼Œæ¯å¤©è¯»å£¹ç¯‡æ–‡ç« ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥&lt;br/&gt; å…¬ä¼—å·ï¼šå‰ç«¯å£¹è¯»&lt;/div&gt;&lt;div class=&quot;pre-line-box&quot;&gt; è°¢å°é£å‰ç«¯æµ‹è¯•white-space:pre-lineå±æ€§ã€‚ åˆ†äº«å‰ç«¯æœ€æ–°æŠ€æœ¯æ–‡ç« ã€å·¥å…·èµ„æºï¼Œä¸“æ³¨å‰ç«¯æŠ€æœ¯å¼€å‘ã€‚å…³æ³¨æˆ‘ä»¬ï¼Œæ¯å¤©è¯»å£¹ç¯‡æ–‡ç« ï¼Œå’Œæˆ‘ä»¬ä¸€èµ·å­¦ä¹ è¿›æ­¥&lt;br/&gt; å…¬ä¼—å·ï¼šå‰ç«¯å£¹è¯»&lt;/div&gt; å±æ€§å æºç ç©ºæ ¼ æºç æ¢è¡Œ bræ¢è¡Œ å®¹å™¨è¾¹ç•Œæ¢è¡Œ normal åˆå¹¶ å¿½ç•¥ æ¢è¡Œ æ¢è¡Œ nowrap åˆå¹¶ å¿½ç•¥ æ¢è¡Œ ä¸æ¢è¡Œ pre ä¿ç•™ æ¢è¡Œ æ¢è¡Œ ä¸æ¢è¡Œ pre-wrap ä¿ç•™ æ¢è¡Œ æ¢è¡Œ æ¢è¡Œ pre-line åˆå¹¶ æ¢è¡Œ æ¢è¡Œ æ¢è¡Œ æµè§ˆå™¨è§£æCSSä¸ºä»€ä¹ˆä»å³å¼€å§‹CSSé€‰æ‹©å™¨çš„è§£ææ˜¯ä»å³å‘å·¦è§£æçš„ã€‚è‹¥ä»å·¦å‘å³çš„åŒ¹é…ï¼Œå‘ç°ä¸ç¬¦åˆè§„åˆ™ï¼Œéœ€è¦è¿›è¡Œå›æº¯ï¼Œä¼šæŸå¤±å¾ˆå¤šæ€§èƒ½ã€‚è‹¥ä»å³å‘å·¦åŒ¹é…ï¼Œå…ˆæ‰¾åˆ°æ‰€æœ‰çš„æœ€å³èŠ‚ç‚¹ï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå‘ä¸Šå¯»æ‰¾å…¶çˆ¶èŠ‚ç‚¹ç›´åˆ°æ‰¾åˆ°æ ¹å…ƒç´ æˆ–æ»¡è¶³æ¡ä»¶çš„åŒ¹é…è§„åˆ™ï¼Œåˆ™ç»“æŸè¿™ä¸ªåˆ†æ”¯çš„éå†ã€‚æ¯”å¦‚.box .left p,ä¼šåœ¨é¡µé¢ä¸­æ‰¾åˆ°æ‰€æœ‰çš„pæ ‡ç­¾ï¼Œç„¶ååœ¨pæ ‡ç­¾ä¸­æ‰¾å…¶çˆ¶å…ƒç´ æœ‰.leftç±»çš„på…ƒç´ ï¼Œå†æ‰¾ç¥–çˆ¶å…ƒç´ æœ‰.boxçš„pæ ‡ç­¾ã€‚ ä¸¤ç§åŒ¹é…è§„åˆ™çš„æ€§èƒ½å·®åˆ«å¾ˆå¤§ï¼Œæ˜¯å› ä¸ºä»å³å‘å·¦çš„åŒ¹é…åœ¨ç¬¬ä¸€æ­¥å°±ç­›é€‰æ‰äº†å¤§é‡çš„ä¸ç¬¦åˆæ¡ä»¶çš„æœ€å³èŠ‚ç‚¹ï¼ˆå¶å­èŠ‚ç‚¹ï¼‰ï¼Œè€Œä»å·¦å‘å³çš„åŒ¹é…è§„åˆ™çš„æ€§èƒ½éƒ½æµªè´¹åœ¨äº†å¤±è´¥çš„æŸ¥æ‰¾ä¸Šé¢ã€‚ CSSå¦‚ä½•æ€§èƒ½ä¼˜åŒ– é¿å…è¿‡åº¦çº¦æŸ é¿å…åä»£é€‰æ‹©ç¬¦ é¿å…é“¾å¼é€‰æ‹©ç¬¦ ä½¿ç”¨ç´§å‡‘çš„è¯­æ³• é¿å…ä¸å¿…è¦çš„å‘½åç©ºé—´ é¿å…ä¸å¿…è¦çš„é‡å¤ æœ€å¥½ä½¿ç”¨è¡¨ç¤ºè¯­ä¹‰çš„åå­—ã€‚ä¸€ä¸ªå¥½çš„ç±»ååº”è¯¥æ˜¯æè¿°ä»–æ˜¯ä»€ä¹ˆè€Œä¸æ˜¯åƒä»€ä¹ˆ é¿å…!importantï¼Œå¯ä»¥é€‰æ‹©å…¶ä»–é€‰æ‹©å™¨ å°½å¯èƒ½çš„ç²¾ç®€è§„åˆ™ï¼Œå¯ä»¥åˆå¹¶ä¸åŒç±»é‡Œçš„é‡å¤è§„åˆ™ äºŒã€JSJSæ•°æ®ç±»å‹JSåŸºæœ¬æœ‰5ç§ç®€å•æ•°æ®ç±»å‹ï¼šStringï¼ŒNumberï¼ŒBooleanï¼ŒNullï¼ŒUndefinedã€‚å¼•ç”¨æ•°æ®ç±»å‹ï¼šObjectï¼ŒArrayï¼ŒFunctionã€‚ åˆ¤æ–­æ•°æ®ç±»å‹çš„æ–¹æ³•åœ¨å†™ä¸šåŠ¡é€»è¾‘çš„æ—¶å€™ï¼Œç»å¸¸è¦ç”¨åˆ°JSæ•°æ®ç±»å‹çš„åˆ¤æ–­ï¼Œé¢è¯•å¸¸è§çš„æ¡ˆä¾‹æ·±æµ…æ‹·è´ä¹Ÿè¦ç”¨åˆ°æ•°æ®ç±»å‹çš„åˆ¤æ–­ã€‚ typeof12345678console.log(typeof 2); // numberconsole.log(typeof true); // booleanconsole.log(typeof &#x27;str&#x27;); // stringconsole.log(typeof undefined); // undefinedconsole.log(typeof []); // object console.log(typeof &#123;&#125;); // objectconsole.log(typeof function()&#123;&#125;); // functionconsole.log(typeof null); // object ä¼˜ç‚¹ï¼šèƒ½å¤Ÿå¿«é€ŸåŒºåˆ†åŸºæœ¬æ•°æ®ç±»å‹ç¼ºç‚¹ï¼šä¸èƒ½å°†Objectã€Arrayå’ŒNullåŒºåˆ†ï¼Œéƒ½è¿”å›object instanceof123456console.log(2 instanceof Number); // falseconsole.log(true instanceof Boolean); // false console.log(&#x27;str&#x27; instanceof String); // false console.log([] instanceof Array); // trueconsole.log(function()&#123;&#125; instanceof Function); // trueconsole.log(&#123;&#125; instanceof Object); // true ä¼˜ç‚¹ï¼šèƒ½å¤ŸåŒºåˆ†Arrayã€Objectå’ŒFunctionï¼Œé€‚åˆç”¨äºåˆ¤æ–­è‡ªå®šä¹‰çš„ç±»å®ä¾‹å¯¹è±¡ç¼ºç‚¹ï¼šNumberï¼ŒBooleanï¼ŒStringåŸºæœ¬æ•°æ®ç±»å‹ä¸èƒ½åˆ¤æ–­ Object.prototype.toString.call()12345678910var toString = Object.prototype.toString; console.log(toString.call(2)); //[object Number]console.log(toString.call(true)); //[object Boolean]console.log(toString.call(&#x27;str&#x27;)); //[object String]console.log(toString.call([])); //[object Array]console.log(toString.call(function()&#123;&#125;)); //[object Function]console.log(toString.call(&#123;&#125;)); //[object Object]console.log(toString.call(undefined)); //[object Undefined]console.log(toString.call(null)); //[object Null] ä¼˜ç‚¹ï¼šç²¾å‡†åˆ¤æ–­æ•°æ®ç±»å‹ç¼ºç‚¹ï¼šå†™æ³•ç¹çä¸å®¹æ˜“è®°ï¼Œæ¨èè¿›è¡Œå°è£…åä½¿ç”¨ var,let,constçš„åŒºåˆ«let ä¸º ES6 æ–°æ·»åŠ ç”³æ˜å˜é‡çš„å‘½ä»¤ï¼Œå®ƒç±»ä¼¼äº varï¼Œä½†æ˜¯æœ‰ä»¥ä¸‹ä¸åŒï¼š var å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„å‡½æ•°å†…ï¼Œä¸”å­˜åœ¨å˜é‡æå‡ç°è±¡ let å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„ä»£ç å—å†…ï¼Œä¸å­˜åœ¨å˜é‡æå‡ constå£°æ˜çš„å˜é‡ä¸å…è®¸ä¿®æ”¹ nullå’ŒundefinedåŒºåˆ«Undefinedç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œå³undefinedã€‚å½“å£°æ˜çš„å˜é‡è¿˜æœªè¢«åˆå§‹åŒ–æ—¶ï¼Œå˜é‡çš„é»˜è®¤å€¼ä¸ºundefinedã€‚ç”¨æ³•ï¼š å˜é‡è¢«å£°æ˜äº†ï¼Œä½†æ²¡æœ‰èµ‹å€¼æ—¶ï¼Œå°±ç­‰äºundefinedã€‚ è°ƒç”¨å‡½æ•°æ—¶ï¼Œåº”è¯¥æä¾›çš„å‚æ•°æ²¡æœ‰æä¾›ï¼Œè¯¥å‚æ•°ç­‰äºundefinedã€‚ å¯¹è±¡æ²¡æœ‰èµ‹å€¼çš„å±æ€§ï¼Œè¯¥å±æ€§çš„å€¼ä¸ºundefinedã€‚ å‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œé»˜è®¤è¿”å›undefinedã€‚ Nullç±»å‹ä¹Ÿåªæœ‰ä¸€ä¸ªå€¼ï¼Œå³nullã€‚nullç”¨æ¥è¡¨ç¤ºå°šæœªå­˜åœ¨çš„å¯¹è±¡ï¼Œå¸¸ç”¨æ¥è¡¨ç¤ºå‡½æ•°ä¼å›¾è¿”å›ä¸€ä¸ªä¸å­˜åœ¨çš„å¯¹è±¡ã€‚ç”¨æ³• ä½œä¸ºå‡½æ•°çš„å‚æ•°ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°çš„å‚æ•°ä¸æ˜¯å¯¹è±¡ã€‚ ä½œä¸ºå¯¹è±¡åŸå‹é“¾çš„ç»ˆç‚¹ã€‚ å®šä¹‰å‡½æ•°çš„æ–¹æ³• å‡½æ•°å£°æ˜ 12345//ES5function getSum()&#123;&#125;function ()&#123;&#125;//åŒ¿åå‡½æ•°//ES6()=&gt;&#123;&#125; å‡½æ•°è¡¨è¾¾å¼ 1234//ES5var getSum=function()&#123;&#125;//ES6let getSum=()=&gt;&#123;&#125; æ„é€ å‡½æ•° 1const getSum = new Function(&#x27;a&#x27;, &#x27;b&#x27; , &#x27;return a + b&#x27;) JSä½œç”¨åŸŸçš„ç†è§£ JSä¸­çš„ä½œç”¨åŸŸåˆ†ä¸ºä¸¤ç§ï¼šå…¨å±€ä½œç”¨åŸŸå’Œå‡½æ•°ä½œç”¨åŸŸã€‚å‡½æ•°ä½œç”¨åŸŸä¸­å®šä¹‰çš„å˜é‡ï¼Œåªèƒ½åœ¨å‡½æ•°ä¸­è°ƒç”¨ï¼Œå¤–ç•Œæ— æ³•è®¿é—®ã€‚æ²¡æœ‰å—çº§ä½œç”¨åŸŸå¯¼è‡´äº†ifæˆ–forè¿™æ ·çš„é€»è¾‘è¯­å¥ä¸­å®šä¹‰çš„å˜é‡å¯ä»¥è¢«å¤–ç•Œè®¿é—®ï¼Œå› æ­¤ES6ä¸­æ–°å¢äº†letå’Œconstå‘½ä»¤æ¥è¿›è¡Œå—çº§ä½œç”¨åŸŸçš„å£°æ˜ã€‚ æ›´å¤šä½œç”¨åŸŸçš„äº†è§£å¯ä»¥çœ‹JSä½œç”¨åŸŸ é—­åŒ…çš„ç†è§£ ç®€å•æ¥è¯´é—­åŒ…å°±æ˜¯åœ¨å‡½æ•°é‡Œé¢å£°æ˜å‡½æ•°ï¼Œæœ¬è´¨ä¸Šè¯´å°±æ˜¯åœ¨å‡½æ•°å†…éƒ¨å’Œå‡½æ•°å¤–éƒ¨æ­å»ºèµ·ä¸€åº§æ¡¥æ¢ï¼Œä½¿å¾—å­å‡½æ•°å¯ä»¥è®¿é—®çˆ¶å‡½æ•°ä¸­æ‰€æœ‰çš„å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯åä¹‹ä¸å¯ä»¥ï¼Œè¿™åªæ˜¯é—­åŒ…çš„ä½œç”¨ä¹‹ä¸€ï¼Œå¦ä¸€ä¸ªä½œç”¨ï¼Œåˆ™æ˜¯ä¿æŠ¤å˜é‡ä¸å—å¤–ç•Œæ±¡æŸ“ï¼Œä½¿å…¶ä¸€ç›´å­˜åœ¨å†…å­˜ä¸­ï¼Œåœ¨å·¥ä½œä¸­æˆ‘ä»¬è¿˜æ˜¯å°‘ä½¿ç”¨é—­åŒ…çš„å¥½ï¼Œå› ä¸ºé—­åŒ…å¤ªæ¶ˆè€—å†…å­˜ï¼Œä¸åˆ°ä¸‡ä¸å¾—å·²çš„æ—¶å€™å°½é‡ä¸ä½¿ç”¨ã€‚ æ›´å¤šé—­åŒ…çš„å†…å®¹å¯ä»¥çœ‹JSé—­åŒ… æ•°ç»„å»é‡123456789101112let arr = [1,&#x27;1&#x27;,2,&#x27;2&#x27;,1,2,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;];function unique1(arr)&#123; let result = [arr[0]]; for (let i = 1; i &lt; arr.length; i++) &#123; let item = arr[i]; if(result.indexOf(item) == -1)&#123; result.push(item); &#125; &#125; return result;&#125;console.log(unique1(arr)); æ›´å¤šJSå»é‡çš„æ–¹æ³•JSæ•°ç»„å»é‡ call,applyå’ŒbindåŒºåˆ«ä¸‰ä¸ªå‡½æ•°çš„ä½œç”¨éƒ½æ˜¯å°†å‡½æ•°ç»‘å®šåˆ°ä¸Šä¸‹æ–‡ä¸­ï¼Œç”¨æ¥æ”¹å˜å‡½æ•°ä¸­thisçš„æŒ‡å‘ï¼›ä¸‰è€…çš„ä¸åŒç‚¹åœ¨äºè¯­æ³•çš„ä¸åŒã€‚ 12fun.call(thisArg[, arg1[, arg2[, ...]]])fun.apply(thisArg, [argsArray]) æ‰€ä»¥applyå’Œcallçš„åŒºåˆ«æ˜¯callæ–¹æ³•æ¥å—çš„æ˜¯è‹¥å¹²ä¸ªå‚æ•°åˆ—è¡¨ï¼Œè€Œapplyæ¥æ”¶çš„æ˜¯ä¸€ä¸ªåŒ…å«å¤šä¸ªå‚æ•°çš„æ•°ç»„ã€‚ è€Œbind()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°, å½“è¢«è°ƒç”¨æ—¶ï¼Œå°†å…¶thiså…³é”®å­—è®¾ç½®ä¸ºæä¾›çš„å€¼ï¼Œåœ¨è°ƒç”¨æ–°å‡½æ•°æ—¶ï¼Œåœ¨ä»»ä½•æä¾›ä¹‹å‰æä¾›ä¸€ä¸ªç»™å®šçš„å‚æ•°åºåˆ—ã€‚ 12var bindFn = fun.bind(thisArg[, arg1[, arg2[, ...]]])bindFn() Demosï¼š 1234567891011121314151617181920212223242526var name = &#x27;window&#x27;;var sayName = function (param) &#123; console.log(&#x27;my name is:&#x27; + this.name + &#x27;,my param is &#x27; + param)&#125;;//my name is:window,my param is window paramsayName(&#x27;window param&#x27;)var callObj = &#123; name: &#x27;call&#x27;&#125;;//my name is:call,my param is call paramsayName.call(callObj, &#x27;call param&#x27;);var applyObj = &#123; name: &#x27;apply&#x27;&#125;;//my name is:apply,my param is apply paramsayName.apply(applyObj, [&#x27;apply param&#x27;]);var bindObj = &#123; name: &#x27;bind&#x27;&#125;var bindFn = sayName.bind(bindObj, &#x27;bind param&#x27;)//my name is:bind,my param is bind parambindFn(); ==å’Œ===åŒºåˆ« ==ï¼Œ ä¸¤è¾¹å€¼ç±»å‹ä¸åŒçš„æ—¶å€™ï¼Œè¦å…ˆè¿›è¡Œç±»å‹è½¬æ¢ï¼Œå†æ¯”è¾ƒ ===ï¼Œä¸åšç±»å‹è½¬æ¢ï¼Œç±»å‹ä¸åŒçš„ä¸€å®šä¸ç­‰ã€‚ ==ç±»å‹è½¬æ¢è¿‡ç¨‹ï¼š å¦‚æœç±»å‹ä¸åŒï¼Œè¿›è¡Œç±»å‹è½¬æ¢ åˆ¤æ–­æ¯”è¾ƒçš„æ˜¯å¦æ˜¯ null æˆ–è€…æ˜¯ undefined, å¦‚æœæ˜¯, è¿”å› true . åˆ¤æ–­ä¸¤è€…ç±»å‹æ˜¯å¦ä¸º string å’Œ number, å¦‚æœæ˜¯, å°†å­—ç¬¦ä¸²è½¬æ¢æˆ number åˆ¤æ–­å…¶ä¸­ä¸€æ–¹æ˜¯å¦ä¸º boolean, å¦‚æœæ˜¯, å°† boolean è½¬ä¸º number å†è¿›è¡Œåˆ¤æ–­ åˆ¤æ–­å…¶ä¸­ä¸€æ–¹æ˜¯å¦ä¸º object ä¸”å¦ä¸€æ–¹ä¸º stringã€number æˆ–è€… symbol , å¦‚æœæ˜¯, å°† object è½¬ä¸ºåŸå§‹ç±»å‹å†è¿›è¡Œåˆ¤æ–­ ç»å…¸é¢è¯•é¢˜ï¼š[] == ![] ä¸ºä»€ä¹ˆæ˜¯true è½¬åŒ–æ­¥éª¤ï¼š !è¿ç®—ç¬¦ä¼˜å…ˆçº§æœ€é«˜ï¼Œ![]ä¼šè¢«è½¬ä¸ºä¸ºfalseï¼Œå› æ­¤è¡¨è¾¾å¼å˜æˆäº†ï¼š[] == false æ ¹æ®ä¸Šé¢ç¬¬(4)æ¡è§„åˆ™ï¼Œå¦‚æœæœ‰ä¸€æ–¹æ˜¯booleanï¼Œå°±æŠŠbooleanè½¬ä¸ºnumberï¼Œå› æ­¤è¡¨è¾¾å¼å˜æˆäº†ï¼š[] == 0 æ ¹æ®ä¸Šé¢ç¬¬(5)æ¡è§„åˆ™ï¼ŒæŠŠæ•°ç»„è½¬ä¸ºåŸå§‹ç±»å‹ï¼Œè°ƒç”¨æ•°ç»„çš„toString()æ–¹æ³•ï¼Œ[]è½¬ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå› æ­¤è¡¨è¾¾å¼å˜æˆäº†ï¼š&#39;&#39; == 0 æ ¹æ®ä¸Šé¢ç¬¬(3)æ¡è§„åˆ™ï¼Œä¸¤è¾¹æ•°æ®ç±»å‹ä¸ºstringå’Œnumberï¼ŒæŠŠç©ºå­—ç¬¦ä¸²è½¬ä¸º0ï¼Œå› æ­¤è¡¨è¾¾å¼å˜æˆäº†ï¼š0 == 0 ä¸¤è¾¹æ•°æ®ç±»å‹ç›¸åŒï¼Œ0==0ä¸ºtrue æ·±æ‹·è´å’Œæµ…æ‹·è´æµ…æ‹·è´ 1234567function simpleClone(obj) &#123; var result = &#123;&#125;; for (var i in obj) &#123; result[i] = obj[i]; &#125; return result;&#125; æ·±æ‹·è´ï¼Œéå†å¯¹è±¡ä¸­çš„æ¯ä¸€ä¸ªå±æ€§ 123456789101112131415161718function deepClone(obj) &#123; let result; if (typeof obj == &#x27;object&#x27;) &#123; result = isArray(obj) ? [] : &#123;&#125; for (let i in obj) &#123; result[i] = isObject(obj[i])||isArray(obj[i])?deepClone(obj[i]):obj[i] &#125; &#125; else &#123; result = obj &#125; return result&#125;function isObject(obj) &#123; return Object.prototype.toString.call(obj) == &quot;[object Object]&quot;&#125;function isArray(obj) &#123; return Object.prototype.toString.call(obj) == &quot;[object Array]&quot;&#125; é˜²æŠ–å’ŒèŠ‚æµ é˜²æŠ– 123456789function debounce(fn, delay) &#123; let timer = null; return function () &#123; if (timer) clearTimeout(timer); timer = setTimeout(() =&gt; &#123; fn.apply(this, arguments); &#125;, delay); &#125;&#125; èŠ‚æµ 123456789101112131415161718function throttle(fn, cycle) &#123; let start = Date.now(); let now; let timer; return function () &#123; now = Date.now(); clearTimeout(timer); if (now - start &gt;= cycle) &#123; fn.apply(this, arguments); start = now; &#125; else &#123; timer = setTimeout(() =&gt; &#123; fn.apply(this, arguments); &#125;, cycle); &#125; &#125;&#125; cookie,sessionStorageå’ŒlocalStorage cookieç”¨æ¥ä¿å­˜ç™»å½•ä¿¡æ¯ï¼Œå¤§å°é™åˆ¶ä¸º4KBå·¦å³ localStorageæ˜¯Html5æ–°å¢çš„ï¼Œç”¨äºæœ¬åœ°æ•°æ®å­˜å‚¨ï¼Œä¿å­˜çš„æ•°æ®æ²¡æœ‰è¿‡æœŸæ—¶é—´ï¼Œä¸€èˆ¬æµè§ˆå™¨å¤§å°é™åˆ¶åœ¨5MB sessionStorageæ¥å£æ–¹æ³•å’ŒlocalStorageç±»ä¼¼ï¼Œä½†ä¿å­˜çš„æ•°æ®çš„åªä¼šåœ¨å½“å‰ä¼šè¯ä¸­ä¿å­˜ä¸‹æ¥ï¼Œé¡µé¢å…³é—­åä¼šè¢«æ¸…ç©ºã€‚ åç§° ç”Ÿå‘½æœŸ å¤§å°é™åˆ¶ ä¸æœåŠ¡å™¨é€šä¿¡ cookie ä¸€èˆ¬ç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå¯è®¾ç½®å¤±æ•ˆæ—¶é—´ã€‚å¦‚æœåœ¨æµè§ˆå™¨ç«¯ç”ŸæˆCookieï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨åå¤±æ•ˆ 4KB æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨HTTPå¤´ä¸­ï¼Œå¦‚æœä½¿ç”¨cookieä¿å­˜è¿‡å¤šæ•°æ®ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ localStorage é™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜ 5MB ä»…åœ¨æµè§ˆå™¨ä¸­ä¿å­˜ï¼Œä¸ä¸æœåŠ¡å™¨é€šä¿¡ sessionStorage ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨åè¢«æ¸…é™¤ 5MB ä»…åœ¨æµè§ˆå™¨ä¸­ä¿å­˜ï¼Œä¸ä¸æœåŠ¡å™¨é€šä¿¡ 0.1+0.2!=0.3æ€ä¹ˆå¤„ç†æŠŠéœ€è¦è®¡ç®—çš„æ•°å­—å‡çº§ï¼ˆä¹˜ä»¥10çš„næ¬¡å¹‚ï¼‰æˆè®¡ç®—æœºèƒ½å¤Ÿç²¾ç¡®è¯†åˆ«çš„æ•´æ•°ï¼Œç­‰è®¡ç®—å®Œæˆåå†è¿›è¡Œé™çº§ï¼ˆé™¤ä»¥10çš„næ¬¡å¹‚ï¼‰ï¼Œå³ï¼š 1(0.1*10 + 0.2*10)/10 == 0.3 //true æ›´å¤šå…³äºæµ®ç‚¹æ•°ç²¾åº¦å¤„ç†è¯·çœ‹JSä¸­æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜ JSå®ç°ç»§æ‰¿é¦–å…ˆåˆ›å»ºä¸€ä¸ªçˆ¶ç±» 1234567891011121314// å®šä¹‰ä¸€ä¸ªåŠ¨ç‰©ç±»function Animal(name, color) &#123; // å±æ€§ this.name = name || &#x27;Animal&#x27;; this.color = color || [&#x27;black&#x27;]; // å®ä¾‹æ–¹æ³• this.sleep = function () &#123; console.log(this.name + &#x27;æ­£åœ¨ç¡è§‰ï¼&#x27;); &#125;&#125;// åŸå‹æ–¹æ³•Animal.prototype.eat = function (food) &#123; console.log(this.name + &#x27;æ­£åœ¨åƒï¼š&#x27; + food);&#125;; åŸå‹é“¾ç»§æ‰¿newäº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ä¸ªç©ºå¯¹è±¡æŒ‡å‘Animalå¹¶ä¸”Cat.prototypeæŒ‡å‘äº†è¿™ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ç§å°±æ˜¯åŸºäºåŸå‹é“¾çš„ç»§æ‰¿ã€‚ 1234567891011121314function Cat(name) &#123; this.name = name || &#x27;tom&#x27;&#125;Cat.prototype = new Animal()var cat = new Cat()cat.color.push(&#x27;red&#x27;)cat.sleep() //tomæ­£åœ¨ç¡è§‰ï¼cat.eat(&#x27;fish&#x27;) //tomæ­£åœ¨åƒï¼šfishconsole.log(cat.color) //[&quot;black&quot;, &quot;red&quot;]console.log(cat instanceof Animal) //trueconsole.log(cat instanceof Cat) //truevar new_cat = new Cat()console.log(new_cat.color) //[&quot;black&quot;, &quot;red&quot;] ç‰¹ç‚¹ï¼šåŸºäºåŸå‹é“¾ï¼Œæ—¢æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯å­ç±»çš„å®ä¾‹ã€‚ ç¼ºç‚¹ï¼š1.æ— æ³•å®ç°å¤šç»§æ‰¿ï¼›2.æ‰€æœ‰æ–°å®ä¾‹éƒ½ä¼šå…±äº«çˆ¶ç±»å®ä¾‹çš„å±æ€§ã€‚ æ„é€ ç»§æ‰¿12345678910111213function Dog(name) &#123; Animal.call(this) this.name = name || &#x27;mica&#x27;&#125;var dog = new Dog()dog.color.push(&#x27;blue&#x27;)dog.sleep() // micaæ­£åœ¨ç¡è§‰ï¼dog.eat(&#x27;bone&#x27;) //Uncaught TypeError: dog.eat is not a functionconsole.log(dog.color) //[&quot;black&quot;, &quot;blue&quot;]console.log(dog instanceof Animal) //falseconsole.log(dog instanceof Dog) //truevar new_dog = new Dog()console.log(new_dog.color) //[&quot;black&quot;] ç‰¹ç‚¹ï¼šå¯ä»¥å®ç°å¤šç»§æ‰¿ï¼ˆcallå¤šä¸ªï¼‰ï¼Œè§£å†³äº†æ‰€æœ‰å®ä¾‹å…±äº«çˆ¶ç±»å®ä¾‹å±æ€§çš„é—®é¢˜ã€‚ ç¼ºç‚¹ï¼š1.åªèƒ½ç»§æ‰¿çˆ¶ç±»å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼›2.ä¸èƒ½ç»§æ‰¿åŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ã€‚ ç»„åˆç»§æ‰¿123456789101112131415function Mouse(name)&#123; Animal.call(this) this.name = name || &#x27;jerry&#x27;&#125;Mouse.prototype = new Animal()Mouse.prototype.constructor = Mousevar mouse = new Mouse()mouse.color.push(&#x27;yellow)mouse.sleep() //jerryæ­£åœ¨ç¡è§‰ï¼mouse.eat(&#x27;carrot&#x27;) //jerryæ­£åœ¨åƒï¼šcarrotconsole.log(mouse instanceof Animal)//trueconsole.log(mouse instanceof Mouse)//truevar new_mouse = new Mouse()console.log(new_mouse.color) //[&quot;black&quot;] ç‰¹ç‚¹ï¼šå¯ä»¥ç»§æ‰¿å®ä¾‹å±æ€§/æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿åŸå‹å±æ€§/æ–¹æ³• ç¼ºç‚¹ï¼šè°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸¤ä»½å®ä¾‹ ä¸‰ã€vuemvcå’Œmvvmç†è§£MVCMVCå³Model View Controllerï¼Œç®€å•æ¥è¯´å°±æ˜¯é€šè¿‡controllerçš„æ§åˆ¶å»æ“ä½œmodelå±‚çš„æ•°æ®ï¼Œå¹¶ä¸”è¿”å›ç»™viewå±‚å±•ç¤ºã€‚ View æ¥å—ç”¨æˆ·äº¤äº’è¯·æ±‚ View å°†è¯·æ±‚è½¬äº¤ç»™Controllerå¤„ç† Controller æ“ä½œModelè¿›è¡Œæ•°æ®æ›´æ–°ä¿å­˜ æ•°æ®æ›´æ–°ä¿å­˜ä¹‹åï¼ŒModelä¼šé€šçŸ¥Viewæ›´æ–° View æ›´æ–°å˜åŒ–æ•°æ®ä½¿ç”¨æˆ·å¾—åˆ°åé¦ˆ MVVMMVVMå³Model-View-ViewModelï¼Œå°†å…¶ä¸­çš„ View çš„çŠ¶æ€å’Œè¡Œä¸ºæŠ½è±¡åŒ–ï¼Œè®©æˆ‘ä»¬å¯ä»¥å°†UIå’Œä¸šåŠ¡é€»è¾‘åˆ†å¼€ã€‚MVVMçš„ä¼˜ç‚¹æ˜¯ä½è€¦åˆã€å¯é‡ç”¨æ€§ã€ç‹¬ç«‹å¼€å‘ã€‚ View æ¥æ”¶ç”¨æˆ·äº¤äº’è¯·æ±‚ View å°†è¯·æ±‚è½¬äº¤ç»™ViewModel ViewModel æ“ä½œModelæ•°æ®æ›´æ–° Model æ›´æ–°å®Œæ•°æ®ï¼Œé€šçŸ¥ViewModelæ•°æ®å‘ç”Ÿå˜åŒ– ViewModel æ›´æ–°Viewæ•°æ® MVVMæ¨¡å¼å’ŒMVCæœ‰äº›ç±»ä¼¼ï¼Œä½†æœ‰ä»¥ä¸‹ä¸åŒ ViewModel æ›¿æ¢äº† Controllerï¼Œåœ¨UIå±‚ä¹‹ä¸‹ ViewModel å‘ View æš´éœ²å®ƒæ‰€éœ€è¦çš„æ•°æ®å’ŒæŒ‡ä»¤å¯¹è±¡ ViewModel æ¥æ”¶æ¥è‡ª Model çš„æ•°æ® æ¦‚æ‹¬èµ·æ¥ï¼ŒMVVMæ˜¯ç”±MVCå‘å±•è€Œæ¥ï¼Œé€šè¿‡åœ¨Modelä¹‹ä¸Šè€Œåœ¨Viewä¹‹ä¸‹å¢åŠ ä¸€ä¸ªéè§†è§‰çš„ç»„ä»¶å°†æ¥è‡ªModelçš„æ•°æ®æ˜ å°„åˆ°Viewä¸­ã€‚ å“åº”åŸç†vueé‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.definePropertyåŠ«æŒdataå±æ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒã€‚ ç”Ÿå‘½å‘¨æœŸå‡½æ•° beforeCreate(åˆ›å»ºå‰) vueå®ä¾‹çš„æŒ‚è½½å…ƒç´ $elå’Œæ•°æ®å¯¹è±¡ dataéƒ½æ˜¯undefined, è¿˜æœªåˆå§‹åŒ– created(åˆ›å»ºå) å®Œæˆäº† dataæ•°æ®åˆå§‹åŒ–, elè¿˜æœªåˆå§‹åŒ– beforeMount(è½½å…¥å‰) vueå®ä¾‹çš„$elå’Œdataéƒ½åˆå§‹åŒ–äº†, ç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ mounted(è½½å…¥å) æ­¤è¿‡ç¨‹ä¸­è¿›è¡Œajaxäº¤äº’ beforeUpdate(æ›´æ–°å‰) updated(æ›´æ–°å) beforeDestroy(é”€æ¯å‰) destroyed(é”€æ¯å) ç»„ä»¶dataä¸ºä»€ä¹ˆè¿”å›å‡½æ•°ç»„ä»¶ä¸­çš„dataå†™æˆä¸€ä¸ªå‡½æ•°ï¼Œæ•°æ®ä»¥å‡½æ•°è¿”å›å€¼å½¢å¼å®šä¹‰ï¼Œè¿™æ ·æ¯å¤ç”¨ä¸€æ¬¡ç»„ä»¶ï¼Œå°±ä¼šè¿”å›ä¸€ä»½æ–°çš„dataã€‚å¦‚æœå•çº¯çš„å†™æˆå¯¹è±¡å½¢å¼ï¼Œå°±ä½¿å¾—æ‰€æœ‰ç»„ä»¶å®ä¾‹å…±ç”¨äº†ä¸€ä»½dataï¼Œé€ æˆäº†æ•°æ®æ±¡æŸ“ã€‚ vueç»™å¯¹è±¡æ–°å¢å±æ€§é¡µé¢æ²¡æœ‰å“åº”ç”±äºVueä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹å±æ€§æ‰§è¡Œgetter/setterè½¬åŒ–ï¼Œæ‰€ä»¥å±æ€§å¿…é¡»åœ¨dataå¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®©Vueå°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚Vueæä¾›äº†$setæ–¹æ³•ç”¨æ¥è§¦å‘è§†å›¾æ›´æ–°ã€‚ 12345678910111213export default &#123; data()&#123; return &#123; obj: &#123; name: &#x27;fei&#x27; &#125; &#125; &#125;, mounted()&#123; this.$set(this.obj, &#x27;sex&#x27;, &#x27;man&#x27;) &#125;&#125; v-ifå’Œv-showåŒºåˆ«v-if æ˜¯çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å™¨å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºï¼›ä¹Ÿæ˜¯æƒ°æ€§çš„ï¼šå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ—¶æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶ï¼Œæ‰ä¼šå¼€å§‹æ¸²æŸ“æ¡ä»¶å—ã€‚ v-show å°±ç®€å•å¾—å¤šâ€”â€”ä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäº CSS çš„ â€œdisplayâ€ å±æ€§è¿›è¡Œåˆ‡æ¢ã€‚ æ‰€ä»¥ï¼Œv-if é€‚ç”¨äºåœ¨è¿è¡Œæ—¶å¾ˆå°‘æ”¹å˜æ¡ä»¶ï¼Œä¸éœ€è¦é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ï¼›v-show åˆ™é€‚ç”¨äºéœ€è¦éå¸¸é¢‘ç¹åˆ‡æ¢æ¡ä»¶çš„åœºæ™¯ã€‚ v-modelåŒå‘ç»‘å®šåŸç†v-modelæœ¬è´¨ä¸Šæ˜¯è¯­æ³•ç³–ï¼Œv-model åœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„å±æ€§å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ã€‚ text å’Œ textarea å…ƒç´ ä½¿ç”¨ value å±æ€§å’Œ input äº‹ä»¶ checkbox å’Œ radio ä½¿ç”¨ checked å±æ€§å’Œ change äº‹ä»¶ select å­—æ®µå°† value ä½œä¸º prop å¹¶å°† change ä½œä¸ºäº‹ä»¶ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥v-modelè¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š 123&lt;input v-model=&quot;sth&quot; /&gt;// ç­‰åŒäº&lt;input :value=&quot;sth&quot; @input=&quot;sth = $event.target.value&quot; /&gt; è¿™ä¸ªè¯­æ³•ç³–å¿…é¡»æ˜¯å›ºå®šçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å±æ€§å¿…é¡»ä¸ºvalueï¼Œæ–¹æ³•åå¿…é¡»ä¸ºï¼šinputã€‚ çŸ¥é“äº†v-modelçš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸Šå®ç°v-modelã€‚ 12345678910111213141516171819202122232425//Parent&lt;template&gt; &#123;&#123;num&#125;&#125; &lt;Child v-model=&quot;num&quot;&gt;&lt;/template&gt;export default &#123; data()&#123; return &#123; num: 0 &#125; &#125;&#125;//Child&lt;template&gt; &lt;div @click=&quot;add&quot;&gt;Add&lt;/div&gt;&lt;/template&gt;export default &#123; props: [&#x27;value&#x27;], methods:&#123; add()&#123; this.$emit(&#x27;input&#x27;, this.value + 1) &#125; &#125;&#125; keyçš„ä½œç”¨ è®©vueç²¾å‡†çš„è¿½è¸ªåˆ°æ¯ä¸€ä¸ªå…ƒç´ ï¼Œé«˜æ•ˆçš„æ›´æ–°è™šæ‹ŸDOMã€‚ è§¦å‘è¿‡æ¸¡ 123&lt;transition&gt; &lt;span :key=&quot;text&quot;&gt;&#123;&#123; text &#125;&#125;&lt;/span&gt;&lt;/transition&gt; å½“textæ”¹å˜æ—¶ï¼Œè¿™ä¸ªå…ƒç´ çš„keyå±æ€§å°±å‘ç”Ÿäº†æ”¹å˜ï¼Œåœ¨æ¸²æŸ“æ›´æ–°æ—¶ï¼ŒVueä¼šè®¤ä¸ºè¿™é‡Œæ–°äº§ç”Ÿäº†ä¸€ä¸ªå…ƒç´ ï¼Œè€Œè€çš„å…ƒç´ ç”±äºkeyä¸å­˜åœ¨äº†ï¼Œæ‰€ä»¥ä¼šè¢«åˆ é™¤ï¼Œä»è€Œè§¦å‘äº†è¿‡æ¸¡ã€‚ scopedå±æ€§ä½œç”¨ åœ¨Vueæ–‡ä»¶ä¸­çš„styleæ ‡ç­¾ä¸Šæœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œscopedã€‚å½“ä¸€ä¸ªstyleæ ‡ç­¾æ‹¥æœ‰scopedå±æ€§æ—¶å€™ï¼Œå®ƒçš„cssæ ·å¼åªèƒ½ç”¨äºå½“å‰çš„Vueç»„ä»¶ï¼Œå¯ä»¥ä½¿ç»„ä»¶çš„æ ·å¼ä¸ç›¸äº’æ±¡æŸ“ã€‚å¦‚æœä¸€ä¸ªé¡¹ç›®çš„æ‰€æœ‰styleæ ‡ç­¾éƒ½åŠ ä¸Šäº†scopedå±æ€§ï¼Œç›¸å½“äºå®ç°äº†æ ·å¼çš„æ¨¡å—åŒ–ã€‚ scopedå±æ€§çš„å®ç°åŸç†æ˜¯ç»™æ¯ä¸€ä¸ªdomå…ƒç´ æ·»åŠ äº†ä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„åŠ¨æ€å±æ€§ï¼Œç»™cssé€‰æ‹©å™¨é¢å¤–æ·»åŠ ä¸€ä¸ªå¯¹åº”çš„å±æ€§é€‰æ‹©å™¨ï¼Œæ¥é€‰æ‹©ç»„ä»¶ä¸­çš„domã€‚ 12345678&lt;template&gt; &lt;div class=&quot;box&quot;&gt;dom&lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.box&#123; background:red;&#125;&lt;/style&gt; vueå°†ä»£ç è½¬è¯‘æˆå¦‚ä¸‹ï¼š 123456.box[data-v-11c6864c]&#123; background:red;&#125;&lt;template&gt; &lt;div class=&quot;box&quot; data-v-11c6864c&gt;dom&lt;/div&gt;&lt;/template&gt; scopedæ ·å¼ç©¿é€scopedè™½ç„¶é¿å…äº†ç»„ä»¶é—´æ ·å¼æ±¡æŸ“ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦ä¿®æ”¹ç»„ä»¶ä¸­çš„æŸä¸ªæ ·å¼ï¼Œä½†æ˜¯åˆä¸æƒ³å»é™¤scopedå±æ€§ã€‚ ä½¿ç”¨/deep/ 1234567891011121314151617//Parent&lt;template&gt;&lt;div class=&quot;wrap&quot;&gt; &lt;Child /&gt;&lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot; scoped&gt;.wrap /deep/ .box&#123; background: red;&#125;&lt;/style&gt;//Child&lt;template&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/template&gt; ä½¿ç”¨ä¸¤ä¸ªstyleæ ‡ç­¾ 1234567891011121314151617181920//Parent&lt;template&gt;&lt;div class=&quot;wrap&quot;&gt; &lt;Child /&gt;&lt;/div&gt;&lt;/template&gt;&lt;style lang=&quot;scss&quot; scoped&gt;//å…¶ä»–æ ·å¼&lt;/style&gt;&lt;style lang=&quot;scss&quot;&gt;.wrap .box&#123; background: red;&#125;&lt;/style&gt;//Child&lt;template&gt; &lt;div class=&quot;box&quot;&gt;&lt;/div&gt;&lt;/template&gt; refçš„ä½œç”¨ è·å–domå…ƒç´ this.$refs.box è·å–å­ç»„ä»¶ä¸­çš„datathis.$refs.box.msg è°ƒç”¨å­ç»„ä»¶ä¸­çš„æ–¹æ³•this.$refs.box.open() computedå’ŒwatchåŒºåˆ«1.å½“é¡µé¢ä¸­æœ‰æŸäº›æ•°æ®ä¾èµ–å…¶ä»–æ•°æ®è¿›è¡Œå˜åŠ¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨è®¡ç®—å±æ€§computedã€‚ 1234567891011121314&lt;template&gt;&#123;&#123;fullName&#125;&#125;&lt;/template&gt;export default &#123; data()&#123; return &#123; firstName: &#x27;xie&#x27;, lastName: &#x27;yu fei&#x27;, &#125; &#125;, computed:&#123; fullName: function()&#123; return this.firstName + &#x27; &#x27; + this.lastName &#125; &#125;&#125; 2.watchç”¨äºè§‚å¯Ÿå’Œç›‘å¬é¡µé¢ä¸Šçš„vueå®ä¾‹ï¼Œå¦‚æœè¦åœ¨æ•°æ®å˜åŒ–çš„åŒæ—¶è¿›è¡Œå¼‚æ­¥æ“ä½œæˆ–è€…æ˜¯æ¯”è¾ƒå¤§çš„å¼€é”€ï¼Œé‚£ä¹ˆwatchä¸ºæœ€ä½³é€‰æ‹©ã€‚ 123456789101112131415161718&lt;template&gt;&#123;&#123;fullName&#125;&#125;&lt;/template&gt;export default &#123; data()&#123; return &#123; firstName: &#x27;xie&#x27;, lastName: &#x27;xiao fei&#x27;, fullName: &#x27;xie xiao fei&#x27; &#125; &#125;, watch:&#123; firstName(val) &#123; this.fullName = val + &#x27; &#x27; + this.lastName &#125;, lastName(val) &#123; this.fullName = this.firstName + &#x27; &#x27; + val &#125; &#125;&#125; vueè·¯ç”±æœ‰å‡ ç§æ¨¡å¼ hashæ¨¡å¼ å³åœ°å€æ URLä¸­çš„#ç¬¦å·ï¼Œå®ƒçš„ç‰¹ç‚¹åœ¨äºï¼šhash è™½ç„¶å‡ºç°URLä¸­ï¼Œä½†ä¸ä¼šè¢«åŒ…å«åœ¨HTTPè¯·æ±‚ä¸­ï¼Œå¯¹åç«¯å®Œå…¨æ²¡æœ‰å½±å“ï¼Œä¸éœ€è¦åå°è¿›è¡Œé…ç½®ï¼Œå› æ­¤æ”¹å˜hashä¸ä¼šé‡æ–°åŠ è½½é¡µé¢ã€‚ historyæ¨¡å¼ åˆ©ç”¨äº†HTML5 History Interface ä¸­æ–°å¢çš„pushState() å’ŒreplaceState() æ–¹æ³•ï¼ˆéœ€è¦ç‰¹å®šæµè§ˆå™¨æ”¯æŒï¼‰ã€‚historyæ¨¡å¼æ”¹å˜äº†è·¯ç”±åœ°å€ï¼Œå› ä¸ºéœ€è¦åå°é…ç½®åœ°å€ã€‚ ç»„ä»¶ä¹‹é—´çš„ä¼ å€¼é€šä¿¡ çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ å€¼é€šè¿‡props å­ç»„ä»¶ç»™çˆ¶ç»„ä»¶ä¼ å€¼é€šè¿‡$emitè§¦å‘å›è°ƒ å…„å¼Ÿç»„ä»¶é€šä¿¡ï¼Œé€šè¿‡å®ä¾‹ä¸€ä¸ªvueå®ä¾‹eventBusä½œä¸ºåª’ä»‹ï¼Œè¦ç›¸äº’é€šä¿¡çš„å…„å¼Ÿç»„ä»¶ä¹‹ä¸­ï¼Œéƒ½å¼•å…¥eventBus 1234567891011121314151617181920212223//main.jsimport Vue from &#x27;vue&#x27;export const eventBus = new Vue()//brother1.vueimport eventBus from &#x27;@/main.js&#x27;export default&#123; methods: &#123; toBus () &#123; eventBus.$emit(&#x27;greet&#x27;, &#x27;hi brother&#x27;) &#125; &#125;&#125;//brother2import eventBus from &#x27;@/main.js&#x27;export default&#123; mounted()&#123; eventBus.$on(&#x27;greet&#x27;, (msg)=&gt;&#123; this.msg = msg &#125;) &#125;&#125; axiosæ‹¦æˆªå™¨æ€ä¹ˆé…12345678910111213141516// æ·»åŠ è¯·æ±‚æ‹¦æˆªå™¨axios.interceptors.request.use(function (config) &#123; // åœ¨å‘é€è¯·æ±‚ä¹‹å‰åšäº›ä»€ä¹ˆ return config;&#125;, function (error) &#123; // å¯¹è¯·æ±‚é”™è¯¯åšäº›ä»€ä¹ˆ return Promise.reject(error);&#125;);// æ·»åŠ å“åº”æ‹¦æˆªå™¨axios.interceptors.response.use(function (response) &#123; // å¯¹å“åº”æ•°æ®åšç‚¹ä»€ä¹ˆ return response; &#125;, function (error) &#123; // å¯¹å“åº”é”™è¯¯åšç‚¹ä»€ä¹ˆ return Promise.reject(error); &#125;); å››ã€æµè§ˆå™¨æµè§ˆå™¨æ¸²æŸ“æœºåˆ¶ æ„å»ºDOMæ ‘ï¼ˆparseï¼‰ï¼šæ¸²æŸ“å¼•æ“è§£æHTMLæ–‡æ¡£ï¼Œé¦–å…ˆå°†æ ‡ç­¾è½¬æ¢æˆDOMæ ‘ä¸­çš„DOM node æ„å»ºæ¸²æŸ“æ ‘ï¼ˆconstructï¼‰ï¼šè§£æå¯¹åº”çš„CSSæ ·å¼æ–‡ä»¶ä¿¡æ¯ å¸ƒå±€æ¸²æŸ“æ ‘ï¼ˆreflow/layoutï¼‰ï¼šä»æ ¹èŠ‚ç‚¹é€’å½’è°ƒç”¨ï¼Œè®¡ç®—æ¯ä¸€ä¸ªå…ƒç´ çš„å¤§å°ã€ä½ç½®ç­‰ï¼Œç»™å‡ºæ¯ä¸ªèŠ‚ç‚¹æ‰€åº”è¯¥åœ¨å±å¹•ä¸Šå‡ºç°çš„ç²¾ç¡®åæ ‡ï¼› ç»˜åˆ¶æ¸²æŸ“æ ‘ï¼ˆpaint/repaintï¼‰ï¼šéå†æ¸²æŸ“æ ‘ï¼Œä½¿ç”¨UIåç«¯å±‚æ¥ç»˜åˆ¶æ¯ä¸ªèŠ‚ç‚¹ã€‚ é‡ç»˜å’Œé‡æ’çš„åŒºåˆ«é‡ç»˜ï¼ˆrepaintæˆ–redrawï¼‰ï¼šå½“ç›’å­çš„ä½ç½®ã€å¤§å°ä»¥åŠå…¶ä»–å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²ã€å­—ä½“å¤§å°ç­‰éƒ½ç¡®å®šä¸‹æ¥ä¹‹åï¼Œæµè§ˆå™¨ä¾¿æŠŠè¿™äº›åŸè‰²éƒ½æŒ‰ç…§å„è‡ªçš„ç‰¹æ€§ç»˜åˆ¶ä¸€éï¼Œå°†å†…å®¹å‘ˆç°åœ¨é¡µé¢ä¸Šã€‚é‡ç»˜æ˜¯æŒ‡ä¸€ä¸ªå…ƒç´ å¤–è§‚çš„æ”¹å˜æ‰€è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚ é‡ç»˜å‘ç”Ÿåœ¨å…ƒç´ çš„å¯è§çš„å¤–è§‚è¢«æ”¹å˜ï¼Œä½†å¹¶æ²¡æœ‰å½±å“åˆ°å¸ƒå±€çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼Œä»…ä¿®æ”¹DOMå…ƒç´ çš„å­—ä½“é¢œè‰²ï¼ˆåªæœ‰Repaintï¼Œå› ä¸ºä¸éœ€è¦è°ƒæ•´å¸ƒå±€ï¼‰ é‡æ’ï¼ˆé‡æ„/å›æµ/reflowï¼‰ï¼šå½“æ¸²æŸ“æ ‘ä¸­çš„ä¸€éƒ¨åˆ†(æˆ–å…¨éƒ¨)å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æ„å»º, è¿™å°±ç§°ä¸ºå›æµ(reflow)ã€‚æ¯ä¸ªé¡µé¢è‡³å°‘éœ€è¦ä¸€æ¬¡å›æµï¼Œå°±æ˜¯åœ¨é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™ã€‚ è§¦å‘é‡æ’çš„æ¡ä»¶ï¼šä»»ä½•é¡µé¢å¸ƒå±€å’Œå‡ ä½•å±æ€§çš„æ”¹å˜éƒ½ä¼šè§¦å‘é‡æ’ï¼š é¡µé¢æ¸²æŸ“åˆå§‹åŒ–(æ— æ³•é¿å…) æ·»åŠ æˆ–åˆ é™¤å¯è§çš„DOMå…ƒç´  å…ƒç´ ä½ç½®çš„æ”¹å˜ï¼Œæˆ–è€…ä½¿ç”¨åŠ¨ç”» å…ƒç´ å°ºå¯¸çš„æ”¹å˜â€”â€”å¤§å°ï¼Œå¤–è¾¹è·ï¼Œè¾¹æ¡† æµè§ˆå™¨çª—å£å°ºå¯¸çš„å˜åŒ– å¡«å……å†…å®¹çš„æ”¹å˜ï¼Œæ¯”å¦‚æ–‡æœ¬çš„æ”¹å˜æˆ–å›¾ç‰‡å¤§å°æ”¹å˜è€Œå¼•èµ·çš„è®¡ç®—å€¼å®½åº¦å’Œé«˜åº¦çš„æ”¹å˜ é‡æ’å¿…å®šä¼šå¼•å‘é‡ç»˜ï¼Œä½†é‡ç»˜ä¸ä¸€å®šä¼šå¼•å‘é‡æ’ã€‚ å‡ ç§è¯·æ±‚æ–¹æ³•GETã€POSTã€HEADã€PUTã€DELETEã€CONNECTã€OPTIONSã€TRACE getå’ŒpoståŒºåˆ« è¯·æ±‚æ–¹å¼ GET POST å‚æ•°ä½ç½® å‚æ•°æ‹¼æ¥åˆ°urlçš„åé¢ å‚æ•°åœ¨è¯·æ±‚ä½“ä¸­ å‚æ•°å¤§å° å—é™äºæµè§ˆå™¨urlå¤§å°ï¼Œä¸€èˆ¬ä¸è¶…è¿‡32K 1G æœåŠ¡å™¨æ•°æ®æ¥æ”¶ æ¥æ”¶1æ¬¡ æ ¹æ®æ•°æ®å¤§å°ï¼Œå¯åˆ†å¤šæ¬¡æ¥æ”¶ é€‚ç”¨åœºæ™¯ ä»æœåŠ¡å™¨ç«¯è·å–æ•°æ® å‘æœåŠ¡å™¨æäº¤æ•°æ® å®‰å…¨æ€§ å‚æ•°æºå¸¦åœ¨urlä¸­ï¼Œå®‰å…¨æ€§ä½ ç›¸å¯¹äºGETè¯·æ±‚ï¼Œå®‰å…¨æ€§æ›´é«˜ å¦‚ä½•è§£å†³è·¨åŸŸ CORS jsonp æœåŠ¡å™¨ä»£ç† æ›´å¤šCORSè¯·çœ‹å½»åº•è¯»æ‡‚å‰ç«¯è·¨åŸŸCORS JSONPåŸç†ç”±äºæµè§ˆå™¨çš„åŒæºç­–ç•¥é™åˆ¶ï¼Œä¸å…è®¸è·¨åŸŸè¯·æ±‚ï¼›ä½†æ˜¯é¡µé¢ä¸­çš„ scriptã€imgã€iframeæ ‡ç­¾æ˜¯ä¾‹å¤–ï¼Œä¸å—åŒæºç­–ç•¥é™åˆ¶ã€‚ Jsonp å°±æ˜¯åˆ©ç”¨scriptæ ‡ç­¾è·¨åŸŸç‰¹æ€§è¿›è¡Œè¯·æ±‚ã€‚ JSONP çš„åŸç†å°±æ˜¯ï¼Œå…ˆåœ¨å…¨å±€æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå®šä¹‰å›è°ƒæ•°æ®çš„å¤„ç†ï¼›ä¸æœåŠ¡ç«¯çº¦å®šå¥½ä¸€ä¸ªåŒåå›è°ƒå‡½æ•°åï¼ŒæœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚åï¼Œå°†è¿”å›ä¸€æ®µ Javascriptï¼Œåœ¨è¿™æ®µ Javascript ä»£ç ä¸­è°ƒç”¨äº†çº¦å®šå¥½çš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”å°†æ•°æ®ä½œä¸ºå‚æ•°è¿›è¡Œä¼ é€’ã€‚å½“ç½‘é¡µæ¥æ”¶åˆ°è¿™æ®µ Javascript ä»£ç åï¼Œå°±ä¼šæ‰§è¡Œè¿™ä¸ªå›è°ƒå‡½æ•°ã€‚ JSONPç¼ºç‚¹ï¼šå®ƒåªæ”¯æŒGETè¯·æ±‚ï¼Œè€Œä¸æ”¯æŒPOSTè¯·æ±‚ç­‰å…¶ä»–ç±»å‹çš„HTTPè¯·æ±‚ã€‚ ç¼“å­˜çš„ç†è§£ç¼“å­˜åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å¼ºç¼“å­˜ä¸è¿‡æœåŠ¡å™¨ï¼Œåå•†ç¼“å­˜éœ€è¦è¿‡æœåŠ¡å™¨ï¼Œåå•†ç¼“å­˜è¿”å›çš„çŠ¶æ€ç æ˜¯304ã€‚ä¸¤ç±»ç¼“å­˜æœºåˆ¶å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå¼ºç¼“å­˜çš„ä¼˜å…ˆçº§é«˜äºåå•†ç¼“å­˜ã€‚å½“æ‰§è¡Œå¼ºç¼“å­˜æ—¶ï¼Œå¦‚è‹¥ç¼“å­˜å‘½ä¸­ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œä¸å†è¿›è¡Œç¼“å­˜åå•†ã€‚ å¼ºç¼“å­˜ Expires cache-control åå•†ç¼“å­˜ Last-Modified å’Œ If-Modified-Since Etag å’Œ If-None-Match æ›´å¤šç¼“å­˜å†…å®¹è¯·çœ‹å‰ç«¯ä¹Ÿè¦æ‡‚Httpç¼“å­˜æœºåˆ¶ XSSå’ŒCSRFåŒºåˆ« è·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆCross Site Scripting)ï¼Œä¸ºäº†ä¸å’Œå±‚å æ ·å¼è¡¨ CSS æ··æ·†ï¼Œæ•…å°†è·¨ç«™è„šæœ¬æ”»å‡»ç¼©å†™ä¸º XSSã€‚æ¶æ„æ”»å‡»è€…å¾€ Web é¡µé¢é‡Œæ’å…¥æ¶æ„ Script ä»£ç ï¼Œå½“ç”¨æˆ·æµè§ˆè¯¥é¡µä¹‹æ—¶ï¼ŒåµŒå…¥å…¶ä¸­ Web é‡Œé¢çš„ Script ä»£ç ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ¶æ„æ”»å‡»ç”¨æˆ·çš„ç›®çš„ã€‚ è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼ˆCross-site request forgeryï¼‰ï¼Œæ˜¯ä¼ªé€ è¯·æ±‚ï¼Œå†’å……ç”¨æˆ·åœ¨ç«™å†…çš„æ­£å¸¸æ“ä½œã€‚æˆ‘ä»¬çŸ¥é“ï¼Œç»å¤§å¤šæ•°ç½‘ç«™æ˜¯é€šè¿‡ cookie ç­‰æ–¹å¼è¾¨è¯†ç”¨æˆ·èº«ä»½ï¼Œå†äºˆä»¥æˆæƒçš„ã€‚æ‰€ä»¥è¦ä¼ªé€ ç”¨æˆ·çš„æ­£å¸¸æ“ä½œï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯é€šè¿‡ XSS æˆ–é“¾æ¥æ¬ºéª—ç­‰é€”å¾„ï¼Œè®©ç”¨æˆ·åœ¨æœ¬æœºï¼ˆå³æ‹¥æœ‰èº«ä»½ cookie çš„æµè§ˆå™¨ç«¯ï¼‰å‘èµ·ç”¨æˆ·æ‰€ä¸çŸ¥é“çš„è¯·æ±‚ã€‚ åŒºåˆ«ï¼š åŸç†ä¸åŒï¼ŒCSRFæ˜¯åˆ©ç”¨ç½‘ç«™Aæœ¬èº«çš„æ¼æ´ï¼Œå»è¯·æ±‚ç½‘ç«™Açš„apiï¼›XSSæ˜¯å‘ç›®æ ‡ç½‘ç«™æ³¨å…¥JSä»£ç ï¼Œç„¶åæ‰§è¡ŒJSé‡Œçš„ä»£ç ã€‚ CSRFéœ€è¦ç”¨æˆ·å…ˆç™»å½•ç›®æ ‡ç½‘ç«™è·å–cookieï¼Œè€ŒXSSä¸éœ€è¦ç™»å½• CSRFçš„ç›®æ ‡æ˜¯ç”¨æˆ·ï¼ŒXSSçš„ç›®æ ‡æ˜¯æœåŠ¡å™¨ XSSæ˜¯åˆ©ç”¨åˆæ³•ç”¨æˆ·è·å–å…¶ä¿¡æ¯ï¼Œè€ŒCSRFæ˜¯ä¼ªé€ æˆåˆæ³•ç”¨æˆ·å‘èµ·è¯·æ±‚ HTTPä¸HTTPSçš„åŒºåˆ« HTTPçš„URLç”±http://èµ·å§‹ä¸”é»˜è®¤ä½¿ç”¨ç«¯å£80ï¼Œè€ŒHTTPSçš„URLç”±https://èµ·å§‹ä¸”é»˜è®¤ä½¿ç”¨ç«¯å£443 HTTPæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼ŒHTTPSåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„ SSL åŠ å¯†ä¼ è¾“åè®® HTTPçš„è¿æ¥å¾ˆç®€å•ï¼Œæ˜¯æ— çŠ¶æ€çš„ï¼ŒHTTPS åè®®æ˜¯ç”± SSL+HTTP åè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯” http åè®®å®‰å…¨ HTTPçŠ¶æ€ç 1xxè¡¨ç¤ºå®¢æˆ·ç«¯åº”è¯¥ç»§ç»­å‘é€è¯·æ±‚ 2xxè¡¨ç¤ºæˆåŠŸçš„è¯·æ±‚ 200è¡¨ç¤ºOKï¼Œæ­£å¸¸è¿”å›ä¿¡æ¯ 201è¡¨ç¤ºè¯·æ±‚æˆåŠŸä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº 202è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ¥å—äº†è¯·æ±‚ï¼Œä½†è¿˜æœªå¤„ç† 3xxè¡¨ç¤ºé‡å®šå‘ 301è¡¨ç¤ºæ°¸ä¹…é‡å®šå‘ï¼Œè¯·æ±‚çš„ç½‘é¡µå·²ç»æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½® 302è¡¨ç¤ºä¸´æ—¶é‡å®šå‘ 304è¡¨ç¤ºè‡ªä»ä¸Šä¸€æ¬¡è¯·æ±‚ä»¥æ¥ï¼Œé¡µé¢çš„å†…å®¹æ²¡æœ‰æ”¹å˜è¿‡ 4xxè¡¨ç¤ºå®¢æˆ·ç«¯é”™è¯¯ 401è¡¨ç¤ºæœåŠ¡å™¨æ— æ³•ç†è§£è¯·æ±‚çš„æ ¼å¼ 402è¡¨ç¤ºè¯·æ±‚æœªæˆæƒ 403è¡¨ç¤ºç¦æ­¢è®¿é—® 404è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œä¸€èˆ¬æ˜¯è·¯å¾„å†™é”™äº† 5xxè¡¨ç¤ºæœåŠ¡å™¨é”™è¯¯ 500è¡¨ç¤ºæœ€å¸¸è§çš„æœåŠ¡å™¨é”™è¯¯ 503è¡¨ç¤ºæœåŠ¡å™¨æš‚æ—¶æ— æ³•å¤„ç†è¯·æ±‚ äº”ã€æ€§èƒ½ä¼˜åŒ– ä½¿ç”¨CDN gzipå‹ç¼© æ–‡æœ¬å‹ç¼© åˆå¹¶è¯·æ±‚ é›ªç¢§å›¾ å›¾ç‰‡æ‡’åŠ è½½ ç¼“å­˜èµ„æº å‡å°‘DOMæ“ä½œ å…­ã€å‚è€ƒflexCSSæ¸…é™¤æµ®åŠ¨åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€çš„ç†è§£ä¸æ€è€ƒä¸€å›¾ç§’æ‡‚å‡½æ•°é˜²æŠ–å’Œå‡½æ•°èŠ‚æµwebå‰ç«¯é¢è¯•æ€»ç»“å…¬å¸è¦æ±‚ä¼šä½¿ç”¨æ¡†æ¶vueï¼Œé¢è¯•é¢˜ä¼šè¢«é—®åŠå“ªäº›30é“Vueé¢è¯•é¢˜æ€»ç»“äº†17å¹´åˆåˆ°18å¹´åˆç™¾åœºå‰ç«¯é¢è¯•çš„é¢è¯•ç»éªŒé¢è¯•åˆ†äº«ï¼šä¸¤å¹´å·¥ä½œç»éªŒæˆåŠŸé¢è¯•é˜¿é‡ŒP6æ€»ç»“","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"å½»åº•è¯»æ‡‚å‰ç«¯è·¨åŸŸCORS","date":"2019-08-29T10:56:39.000Z","path":"2019/08/29/Cors.html","text":"å‰ç«¯å°ä¼™ä¼´åœ¨ä½¿ç”¨AJAXçš„æ—¶å€™ï¼Œç›¸ä¿¡å¯¹No Access-Control-Allow-Origin headerè¿™æ ·çš„æŠ¥é”™æç¤ºæ„Ÿåˆ°å¾ˆå¤´ç–¼ï¼Œæ€ä¹ˆè¯·æ±‚åˆè·¨åŸŸäº†ã€‚ æ–‡ç« çš„å¼€å§‹ï¼Œè®©æˆ‘ä»¬ä»ä¸€ä¸ªå°æ•…äº‹å¼€å§‹ã€‚ã€‚ã€‚ ä¸€ä¸ªå°æ•…äº‹ åœ¨å¼€å‘ä¸­ï¼Œå‰ç«¯çš„ç«¥é‹ä»¬æ¯æ¬¡çœ‹åˆ°æµè§ˆå™¨ä¸‹é¢å‡ºç°ä¸€é•¿ä¸²çº¢è‰²çš„è·¨åŸŸæŠ¥é”™å°±ä¼šå¾ˆæ¼ç«ï¼Œä¸åœçš„å¿µå¨ç€ï¼šé‚£ä¸ªè°è°è°ï¼Œåˆæ²¡æœ‰ç»™æˆ‘åŠ è·¨åŸŸå¤´ï¼›åç«¯å°ä¼™ä¼´åˆä¼šæ¯«ä¸ç¤ºå¼±åœ°åå‡»é“ï¼šä¸å°±æ˜¯Access-Control-Allow-Origin: *ä¹ˆï¼Ÿå·²ç»æœ‰äº†å•Šï¼é‚£ä¸ºä»€ä¹ˆè¿˜ä¼šæŠ¥é”™ï¼Ÿè‚¯å®šæ˜¯ä½ æ²¡åŠ å¥½ï¼ äºæ˜¯ï¼Œä¸€åœºç”©é”…å¤§æˆ˜å³å°†å¼€å§‹â€¦ è°åº”è¯¥äº†è§£è·¨åŸŸ è¯´å®è¯ï¼Œæ¯ä¸€ä¸ªå‰åç«¯å¼€å‘éƒ½åº”è¯¥è¦äº†è§£è·¨åŸŸçš„ç”¨æ³•ã€‚ å‰ç«¯çš„å°ä¼™ä¼´å¯èƒ½ä¼šè§‰å¾—è·¨åŸŸé—®é¢˜åº”è¯¥éƒ½æ˜¯åç«¯æ¥å£æ¥å¤„ç†çš„ï¼Œä½†æ˜¯å¦‚æœå¤šäº†è§£ä¸€äº›HTTPè¯·æ±‚å“åº”å¤´çš„ï¼Œèƒ½å¤Ÿæ›´å¿«çš„å®šä½é—®é¢˜ï¼Œæ›´å¿«çš„è§£å†³æ¥å£å¼‚å¸¸ï¼Œæ–¹ä¾¿æ’æŸ¥è°ƒè¯•ï¼Œæ‰€ä»¥å¸Œæœ›èƒ½å¤Ÿè€ä¸‹å¿ƒæŠŠè¿™ç¯‡æ–‡ç« çœ‹å®Œã€‚ ä»€ä¹ˆæ—¶å€™ä¼šè·¨åŸŸ åœ¨MDNä¸­ï¼Œå¯¹è·¨åŸŸæ˜¯è¿™ä¹ˆè§£é‡Šçš„ï¼š è·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨ è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„Webåº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨ä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ªè·¨åŸŸ HTTP è¯·æ±‚ã€‚ ç®€å•æ¥è¯´å°±æ˜¯å½“ä½ å‘ä¸åŒâ€œåŸŸâ€çš„æœåŠ¡å™¨å‘èµ·ç½‘ç»œè¯·æ±‚çš„æ—¶å€™ï¼Œè¿™ä¸ªè¯·æ±‚å°±è·¨åŸŸäº†ã€‚è¿™é‡Œä¸åŒâ€œåŸŸâ€æŒ‡çš„æ˜¯ä¸åŒçš„åè®®ã€åŸŸåã€ç«¯å£ï¼Œæœ‰ä»»ä½•ä¸€ä¸ªä¸åŒæ—¶ï¼Œæµè§ˆå™¨éƒ½è§†ä¸ºè·¨åŸŸã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨postmanã€fiddlerç­‰ä¸€äº›å·¥å…·æ¨¡æ‹Ÿå‘èµ·httpè¯·æ±‚çš„æ—¶å€™ï¼Œä¸ä¼šé‡åˆ°è·¨åŸŸçš„æƒ…å†µï¼›å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ä¸åŒåŸŸåçš„æ—¶å€™ï¼Œè™½ç„¶è¯·æ±‚æ­£å¸¸å‘å‡ºäº†ï¼Œä½†æ˜¯æµè§ˆå™¨åœ¨è¯·æ±‚è¿”å›æ—¶ä¼šè¿›è¡Œä¸€ç³»åˆ—çš„æ ¡éªŒï¼Œåˆ¤æ–­æ­¤æ¬¡è¯·æ±‚æ˜¯å¦â€œåˆæ³•â€ï¼›å¦‚æœä¸åˆæ³•ï¼Œè¿”å›ç»“æœå°±è¢«æµè§ˆå™¨æ‹¦æˆªäº†ã€‚ æˆ‘ä»¬åœ¨è¿›è¡ŒPOSTæˆ–å…¶ä»–è·¨åŸŸè¯·æ±‚æ—¶ï¼Œä¼šå‘ç°åªæœ‰ä¸€ä¸ªOPTIONSè¯·æ±‚ï¼Œå¹¶æ²¡æœ‰æˆ‘ä»¬æƒ³è¦çš„è¯·æ±‚æ–¹æ³•ã€‚ ç¥ç§˜çš„OPTIONSè¯·æ±‚ æˆ‘ä»¬æ²¡æœ‰å‘é€OPTIONSè¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒæ˜¯ä»å“ªé‡Œæ¥çš„å‘¢ï¼Ÿå®ƒçš„åç§°å«CORSè¯·æ±‚é¢„æ£€ï¼Œé¦–å…ˆæ¥çœ‹ä¸€ä¸‹å®˜æ–¹å¯¹å®ƒçš„å®šä¹‰æ˜¯ï¼š HTTPçš„OPTIONSæ–¹æ³•ç”¨äºè·å–ç›®çš„èµ„æºæ‰€æ”¯æŒçš„é€šä¿¡é€‰é¡¹ã€‚å®¢æˆ·ç«¯å¯ä»¥å¯¹ç‰¹å®šçš„URLä½¿ç”¨OPTIONSæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å¯¹æ•´ç«™ï¼ˆé€šè¿‡å°† URL è®¾ç½®ä¸ºâ€œ*â€ï¼‰ä½¿ç”¨è¯¥æ–¹æ³•ã€‚ é€‰é¡¹ æ˜¯å¦å…è®¸ å¤‡æ³¨ Request has body No æ²¡æœ‰è¯·æ±‚ä½“ Successful response has body No æˆåŠŸçš„å“åº”æœ‰å“åº”ä½“ Safe Yes å®‰å…¨ Idempotent Yes å¯†ç­‰æ€§ï¼Œä¸å˜æ€§ï¼ŒåŒä¸€ä¸ªæ¥å£è¯·æ±‚å¤šå°‘æ¬¡éƒ½ä¸€æ · Cacheable No ä¸èƒ½ç¼“å­˜ Allowed in HTML forms No ä¸èƒ½åœ¨è¡¨å•é‡Œä½¿ç”¨ æ ¹æ®å®˜ç½‘çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å‘ç°å®ƒæ²¡æœ‰è¯·æ±‚ä½“ï¼Œä¸èƒ½è®¾ç½®dataï¼Œä¹Ÿä¸èƒ½ç›´æ¥å‘èµ·OPTIONSè¯·æ±‚ã€‚ç®€è¨€ä¹‹ï¼ŒOPTIONSè¯·æ±‚æ˜¯ç”¨äºè¯·æ±‚æœåŠ¡å™¨å¯¹äºæŸäº›æ¥å£ç­‰èµ„æºçš„æ”¯æŒæƒ…å†µçš„ï¼ŒåŒ…æ‹¬å„ç§è¯·æ±‚æ–¹æ³•ã€å¤´éƒ¨çš„æ”¯æŒæƒ…å†µï¼Œä»…ä½œæŸ¥è¯¢ä½¿ç”¨ã€‚ è®©æˆ‘ä»¬è¯¦ç»†åœ°çœ‹ä¸€ä¸‹OPTIONSè¯·æ±‚çš„çœŸå®é¢ç›®å§ï¼Œæˆ‘ä»¬é¦–å…ˆæ„é€ ä¸€ä¸ªPOSTè¯·æ±‚ï¼š 1234567891011var instance = axios.create(&#123; baseURL: &#x27;http://192.168.0.100:8081&#x27;&#125;)instance(&#123; url: &#x27;/post&#x27;, method: &#x27;post&#x27;, data:&#123; url: &#x27;xieyufei.com&#x27; &#125;&#125;) å¯ä»¥çœ‹åˆ°OPTIONSè¯·æ±‚å¤´å¾ˆç®€å•ï¼Œéƒ½æ²¡æœ‰è¯·æ±‚çš„bodyï¼Œæœ‰ä¸¤ä¸ªå­—æ®µAccess-Control-Request-Headerså’ŒAccess-Control-Request-Methodæ˜¯æ–°å‡ºç°çš„ï¼Œä¸‹é¢ä¼šè¯´åˆ°è¿™ä¸¤ä¸ªå­—æ®µçš„ç”¨æ³•ï¼›é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘OPTIONSè¯·æ±‚å‘¢ï¼Œè¿™é‡Œæ¶‰åŠåˆ°ä¸¤ç§CORSè¯·æ±‚ã€‚ ä¸¤ç§è¯·æ±‚ æµè§ˆå™¨å°†CORSè¯·æ±‚åˆ†æˆä¸¤ç±»ï¼šç®€å•è¯·æ±‚ï¼ˆsimple requestï¼‰å’Œéç®€å•è¯·æ±‚ï¼ˆnot-so-simple requestï¼‰ï¼Œç®€å•è¯·æ±‚ä¸ä¼šè§¦å‘CORSé¢„æ£€è¯·æ±‚ã€‚ ç®€å•è¯·æ±‚ åªè¦åŒæ—¶æ»¡è¶³ä»¥ä¸‹ä¸¤å¤§æ¡ä»¶ï¼Œå°±å±äºç®€å•è¯·æ±‚ï¼š è¯·æ±‚æ–¹æ³•æ˜¯ä»¥ä¸‹ä¸‰ç§æ–¹æ³•ä¹‹ä¸€ HEAD GET POST HTTPçš„å¤´ä¿¡æ¯ä¸è¶…å‡ºä»¥ä¸‹å‡ ç§å­—æ®µ Accept Accept-Language Content-Language Content-Type åªé™äºä¸‰ä¸ªå€¼ application/x-www-form-urlencodedã€multipart/form-dataã€text/plain DPR Downlink Save-Data Viewport-Width Viewport-Width å› æ­¤æˆ‘ä»¬åªè¦æŠŠä¸Šé¢çš„è¯·æ±‚åŠ ä¸€ä¸ªè¯·æ±‚å¤´Content-Typeï¼Œå°±èƒ½ä¸è§¦å‘OPTIONSè¯·æ±‚ã€‚ 12345678910instance(&#123; url: &#x27;/post&#x27;, method: &#x27;post&#x27;, headers:&#123; &#x27;Content-Type&#x27;: &#x27;application/x-www-form-urlencoded&#x27; &#125;, data:&#123; url: &#x27;xieyufei.com&#x27; &#125;&#125;) éç®€å•è¯·æ±‚ ä¸‹é¢ï¼Œæˆ‘ä»¬çš„é‡ç‚¹æ¥äº†ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œajaxè¯·æ±‚æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨è¯·æ±‚å¤´åŠ ä¸€ä¸‹è‡ªå®šä¹‰çš„æ•°æ®ï¼Œå› æ­¤å¤§å¤šæ•°è¯·æ±‚éƒ½æ˜¯éç®€å•è¯·æ±‚ã€‚éç®€å•è¯·æ±‚æ¶‰åŠä»¥ä¸‹å‡ ä¸ªè¯·æ±‚å’Œå“åº”çš„å¤´éƒ¨çš„å­—æ®µï¼š å­—æ®µå ä½ç½® ç”¨æ³• å¤‡æ³¨ Origin è¯·æ±‚å¤´ origin è¡¨æ˜é¢„æ£€è¯·æ±‚æˆ–å®é™…è¯·æ±‚çš„æºç«™ Access-Control-Request-Method è¯·æ±‚å¤´ method å°†å®é™…è¯·æ±‚æ‰€ä½¿ç”¨çš„ HTTP æ–¹æ³•å‘Šè¯‰æœåŠ¡å™¨ã€‚ Access-Control-Request-Headers è¯·æ±‚å¤´ field-name[, field-name]* å°†å®é™…è¯·æ±‚æ‰€æºå¸¦çš„å¤´éƒ¨å­—æ®µå‘Šè¯‰æœåŠ¡å™¨ã€‚ Access-Control-Allow-Origin å“åº”å¤´ origin or * å¯¹äºä¸éœ€è¦æºå¸¦èº«ä»½å‡­è¯çš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯ä»¥æŒ‡å®šè¯¥å­—æ®µçš„å€¼ä¸ºé€šé…ç¬¦ï¼Œè¡¨ç¤ºå…è®¸æ¥è‡ªæ‰€æœ‰åŸŸçš„è¯·æ±‚ Access-Control-Allow-Methods å“åº”å¤´ method[, method]* æŒ‡æ˜äº†å®é™…è¯·æ±‚æ‰€å…è®¸ä½¿ç”¨çš„ HTTP æ–¹æ³•ã€‚ Access-Control-Allow-Headers å“åº”å¤´ field-name[, field-name]* æŒ‡æ˜äº†å®é™…è¯·æ±‚ä¸­å…è®¸æºå¸¦çš„å¤´éƒ¨å­—æ®µã€‚ Access-Control-Allow-Credentials å“åº”å¤´ true æŒ‡å®šäº†å½“æµè§ˆå™¨çš„credentialsè®¾ç½®ä¸ºtrueæ—¶æ˜¯å¦å…è®¸æµè§ˆå™¨è¯»å–responseçš„å†…å®¹ Access-Control-Max-Age å“åº”å¤´ delta-seconds æŒ‡å®šäº†è¯·æ±‚çš„ç»“æœèƒ½å¤Ÿè¢«ç¼“å­˜å¤šä¹… åœ¨ä¸Šé¢çš„OPTIONSè¯·æ±‚ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°è¡¨æ ¼ä¸­çš„ä¸‰ä¸ªè¯·æ±‚å¤´éƒ¨éƒ½åœ¨è¯¥æ¬¡è¯·æ±‚ä¸­å‡ºç°äº†ï¼ŒAccess-Control-Request-Methodå’ŒAccess-Control-Request-Headersç”¨æ¥è¯¢é—®æœåŠ¡å™¨ï¼Œä¸‹é¢æˆ‘è¦ç”¨POSTæ–¹æ³•å’ŒContent-Typeå¤´éƒ¨æ¥è¯·æ±‚ï¼Œä½ å°±è¯´ä½ ç­”ä¸ç­”åº”å§ï¼Ÿ åœ¨æœåŠ¡å™¨ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™æ¥å…è®¸è¯·æ±‚è·¨åŸŸï¼š 1234567891011121314151617181920const express = require(&#x27;express&#x27;)const app = express()const PORT = 8081let allowCrossDomain = function (req, res, next) &#123; res.header(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;) res.header(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;POST&#x27;) res.header(&#x27;Access-Control-Allow-Headers&#x27;, &#x27;content-type&#x27;) next()&#125;app.use(allowCrossDomain)app.post(&#x27;/post&#x27;, (req, res) =&gt; &#123; res.json(&#123; msg: &#x27;hi post&#x27; &#125;)&#125;)app.listen(PORT) è¿™é‡Œæœ‰æˆ‘ä»¬åç«¯å°ä¼™ä¼´å¾ˆç†Ÿæ‚‰çš„Access-Control-Allow-Origin: *ï¼Œç”¨æ¥è¡¨æ˜æ‰€æœ‰çš„originéƒ½å…è®¸è·¨åŸŸï¼Œç›¸å½“äºå‘Šè¯‰æµè§ˆå™¨ï¼š è¿™æ ·æˆ‘ä»¬å°±èƒ½çœ‹åˆ°æˆ‘ä»¬æœŸå¾…å·²ä¹…çš„POSTè¯·æ±‚ï¼ŒåŒæ—¶è¿”å›çš„å¤´éƒ¨ä¿¡æ¯ä¸­å¸¦ä¸Šäº†CORSçš„å“åº”å¤´ï¼›åŒæ—¶æˆ‘ä»¬å¯ä»¥çœ‹åˆ°axiosé»˜è®¤çš„Content-Typeæ˜¯application/json;charset=UTF-8ï¼Œä¸åœ¨ä»…é™çš„ä¸‰ä¸ªå€¼ä¸­ï¼Œå› æ­¤ä¼šè§¦å‘OPTIONSè¯·æ±‚ã€‚ å…¶ä»–å¤´éƒ¨ä¿¡æ¯ é™¤äº†content-typeï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€äº›è‡ªå·±å®šä¹‰çš„ä¿¡æ¯ï¼Œæ¯”å¦‚éœ€è¦ä¼ ç»™åå°çš„tokenä¹‹ç±»çš„ã€‚ 12345678910111213141516//æµè§ˆå™¨ç«¯instance(&#123; url: &#x27;/put&#x27;, method: &#x27;put&#x27;, headers:&#123; &#x27;X-Custom-Header&#x27;: &#x27;xieyufei-head&#x27; &#125;, data:&#123; url: &#x27;xieyufei.com&#x27; &#125;&#125;)//æœåŠ¡å™¨ç«¯res.header(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;)res.header(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;POST,PUT&#x27;)res.header(&#x27;Access-Control-Allow-Headers&#x27;, &#x27;content-type, X-Custom-Header&#x27;) è·¨åŸŸè·å–Cookie é»˜è®¤æƒ…å†µä¸‹ï¼ŒCookieæ˜¯ä¸åŒ…æ‹¬åœ¨CORSçš„è¯·æ±‚ä¸­ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬åˆéœ€è¦ç”¨åˆ°Cookieæ¥ä¼ è¾“æ•°æ®ï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„Access-Control-Allow-Credentialså­—æ®µå°±æ´¾ä¸Šç”¨å¤„äº†ï¼Œå¦ä¸€æ–¹é¢ï¼Œéœ€è¦åœ¨AJAXè¯·æ±‚ä¸­æ‰“å¼€withCredentialså±æ€§ï¼›æˆ‘ä»¬å†æŠŠä»£ç è¿›è¡Œå¦‚ä¸‹æ”¹é€ ï¼š 12345678910111213141516//æœåŠ¡å™¨ç«¯res.header(&#x27;Access-Control-Allow-Credentials&#x27;, &#x27;true&#x27;)//æµè§ˆå™¨ç«¯instance(&#123; url: &#x27;/put&#x27;, method: &#x27;put&#x27;, //æ–°å¢withCredentials withCredentials: true, headers:&#123; &#x27;X-Custom-Header&#x27;: &#x27;xieyufei-head&#x27; &#125;, data:&#123; url: &#x27;xieyufei.com&#x27; &#125;&#125;) å½“æˆ‘ä»¬æ»¡æ€€æœŸå¾…æ‰“å¼€æµè§ˆå™¨å‡†å¤‡æ¥æ”¶Cookieæ—¶ï¼Œå´å‘ç°åˆæŠ¥é”™äº†ï¼š ç»è¿‡å¯¹é”™è¯¯ä¿¡æ¯ä»”ç»†é˜…è¯»ï¼Œå‘ç°è¿™æ¬¡æŠ¥é”™è·Ÿä¸Šé¢çš„è·¨åŸŸæŠ¥é”™ä¸å®Œå…¨ä¸€æ ·ï¼Œå¤§æ¦‚çš„æ„æ€æ˜¯å½“è¯·æ±‚çš„èº«ä»½å‡­è¯åŒ…æ‹¬çš„æ—¶å€™ï¼ŒAccess-Control-Allow-Originä¸èƒ½æ˜¯é€šé…ç¬¦â€™*â€™ï¼ˆwildcardï¼‰ã€‚å› æ­¤æˆ‘ä»¬å¤§æ¦‚äº†è§£åˆ°äº†é”™è¯¯çš„åŸå› æ˜¯åœ¨é€šé…ç¬¦ä¸Šé¢ï¼Œæˆ‘ä»¬å¯¹ä»£ç å†è¿›è¡Œä¸€ä¸‹æ”¹é€ ï¼š 1234567891011121314const cookieParser = require(&#x27;cookie-parser&#x27;); app.use(cookieParser())res.header(&#x27;Access-Control-Allow-Origin&#x27;, &#x27;*&#x27;)res.header(&#x27;Access-Control-Allow-Methods&#x27;, &#x27;POST&#x27;)res.header(&#x27;Access-Control-Allow-Headers&#x27;, &#x27;content-type, X-Custom-Header&#x27;)res.header(&#x27;Access-Control-Allow-Credentials&#x27;, &#x27;true&#x27;)app.post(&#x27;/post&#x27;, (req, res) =&gt; &#123; console.log(req.cookies, &#x27;cookie&#x27;) res.json(&#123; msg: &#x27;hi post&#x27; &#125;)&#125;) è¿™æ—¶å€™å°±èƒ½çœ‹åˆ°æˆ‘ä»¬æƒ³è¦çš„Cookieäº†ã€‚ æ€»ç»“ CORSå†…å®¹å…¶å®æ¥è¯´ä¸æ˜¯å¾ˆå¤šï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯è€ƒéªŒåŠ¨æ‰‹å®è·µèƒ½åŠ›ï¼Œé¢è¯•æ—¶ä¸€èˆ¬ä¹Ÿä¼šé—®åˆ°ï¼Œå› æ­¤é€šè¿‡expressæ­å»ºæœåŠ¡å™¨æ¥åŠ æ·±å¯¹CORSçŸ¥è¯†çš„äº†è§£ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"è·¨åŸŸ","slug":"CrossDomain","permalink":"https://xieyufei.com/tags/CrossDomain/"}]},{"title":"JSçš„thisæŒ‡å‘","date":"2019-03-06T13:36:00.000Z","path":"2019/03/06/This-Point.html","text":"jså‡½æ•°ä¸­thisæ˜¯é¢è¯•å®˜æœ€å–œæ¬¢è€ƒå¯Ÿçš„ï¼Œæ•´ç†ä¸€ä¸‹å¸¸ç”¨çš„thisæŒ‡å‘çš„çŸ¥è¯†ç‚¹ã€‚ ä¸€ã€å…¨å±€ä¸Šä¸‹æ–‡éä¸¥æ ¼æ¨¡å¼å’Œä¸¥æ ¼æ¨¡å¼ä¸­thiséƒ½æ˜¯æŒ‡å‘é¡¶å±‚å¯¹è±¡ 12this.myname = &#x27;xyf&#x27;console.log(this) //Window &#123;myname: &#x27;xyf&#x27;, â€¦&#125; äºŒã€å‡½æ•°ä¸Šä¸‹æ–‡æ™®é€šå‡½æ•°åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ™®é€šå‡½æ•°çš„thisæŒ‡å‘window &#123;.line-numbers&#125;123456var myname = &#x27;xyf&#x27;var sayName = function()&#123; console.log(this === window) // true console.log(this.myname) // &#x27;xyf&#x27;&#125;sayName() è¿™é‡Œçš„sayName()ç›¸å½“äºè°ƒç”¨äº†window.sayName()ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ™®é€šå‡½æ•°çš„thisæŒ‡å‘undefined 1234567&#x27;use strict&#x27;var myname = &#x27;xyf&#x27;var sayName = function()&#123; console.log(this === window) // false console.log(this.myname) // æŠ¥é”™ï¼Œå› ä¸ºthisæ˜¯undefined&#125;sayName() åœ¨ES5ä¸­ï¼Œvarä¼šç»™é¡¶å±‚å¯¹è±¡ä¸­ï¼ˆæµè§ˆå™¨æ˜¯windowï¼‰æ·»åŠ å±æ€§ï¼Œè€Œä½¿ç”¨letåˆ™ä¸ä¼šã€‚ 123456let myname = &#x27;xyf&#x27;let sayName = function()&#123; console.log(this === window) // true console.log(this.myname) // undefined&#125;sayName() å¯¹è±¡ä¸­çš„å‡½æ•°å¯¹è±¡ä¸­çš„å‡½æ•°thisæŒ‡å‘å¯¹è±¡æœ¬èº« 12345678910111213141516var myname = &#x27;outside name&#x27;var sayName = function()&#123; console.log(this.myname)&#125;var person = &#123; myname: &#x27;inside name&#x27;, sayName: sayName, other: &#123; myname: &#x27;other name&#x27;, sayName: sayName, &#125;&#125;person.sayName() // &#x27;inside name&#x27;person.other.sayName() // &#x27;other name&#x27; å°†å¯¹è±¡ä¸­çš„å‡½æ•°èµ‹å€¼æˆå˜é‡ï¼Œè¿™æ ·åˆå˜æˆæ™®é€šå‡½æ•°ï¼ŒthisæŒ‡å‘é¡¶å±‚å¯¹è±¡ã€‚ 12var newSayName = person.sayName;newSayName() // &#x27;outside name&#x27; æ‰€ä»¥ï¼Œé€šè¿‡ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ï¼Œå‡½æ•°çš„å®šä¹‰ä½ç½®ä¸å½±å“å…¶thisæŒ‡å‘,thisæŒ‡å‘åªå’Œè°ƒç”¨å‡½æ•°çš„å¯¹è±¡æœ‰å…³ã€‚ callã€applyã€bindæ”¹å˜thisæŒ‡å‘é€šè¿‡callã€applyã€bindå¯ä»¥æ”¹å˜å‡½æ•°thisçš„æŒ‡å‘ è¯­æ³•ï¼š 12fun.call(thisArg, arg1, arg2, ...)fun.apply(thisArg, [arg1, arg2, ...]) thisArgæ˜¯funå‡½æ•°åœ¨è¿è¡Œæ—¶æŒ‡å®šçš„thisçš„å€¼ã€‚ä½†æ˜¯æŒ‡å®šçš„thiså€¼ä¸ä¸€å®šå°±æ˜¯è¯¥å‡½æ•°æ‰§è¡Œæ—¶çœŸæ­£çš„thiså€¼ã€‚å¦‚æœè¿™ä¸ªå‡½æ•°å¤„äºéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŒ‡å®šä¸ºnullå’Œundefinedçš„thiså€¼ä¼šè‡ªåŠ¨æŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆwindowsä¸­å°±æ˜¯windowå¯¹è±¡ï¼‰ï¼›æŒ‡å®šä¸ºåŸå§‹å€¼ï¼ˆæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼‰çš„thisä¼šæŒ‡å‘è¯¥åŸå§‹å€¼çš„è‡ªåŠ¨åŒ…è£…å¯¹è±¡ï¼› 123456789101112var sayName = function(name1,name2)&#123; console.log(this, name1, name2) &#125;// Number &#123;1&#125; &#x27;a&#x27; &#x27;b&#x27;sayName.call(1, &#x27;a&#x27;, &#x27;b&#x27;)// Window &#123; â€¦ &#125; &#x27;a&#x27; &#x27;b&#x27;sayName.call(null, &#x27;a&#x27;, &#x27;b&#x27;)// Window &#123; â€¦ &#125; &#x27;a&#x27; &#x27;b&#x27;sayName.call(undefined, &#x27;a&#x27;, &#x27;b&#x27;) applyå’Œcallç±»ä¼¼ã€‚åªæ˜¯å‚æ•°ä¸ä¸€æ ·ã€‚å®ƒçš„å‚æ•°æ˜¯æ•°ç»„ï¼ˆæˆ–è€…ç±»æ•°ç»„ï¼‰ã€‚ 1sayName.apply(1, [&#x27;a&#x27;, &#x27;b&#x27;]) ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒæŒ‡å‘nullå’Œundefinedçš„thiså€¼è¿˜æ˜¯æŒ‡å‘åŸæ¥çš„ã€‚ 1234567var sayName = function(name1,name2)&#123; &#x27;use strict&#x27; console.log(this, name1, name2) &#125;sayName.call(null, &#x27;a&#x27;, &#x27;b&#x27;)// null &#x27;a&#x27; &#x27;b&#x27; bindå’Œcallå’Œapplyçš„è°ƒç”¨æ–¹å¼ç›¸åŒï¼Œç¬¬ä¸€ä¸ªå€¼ä¹Ÿæ˜¯ä¿®æ”¹thisçš„æŒ‡å‘ï¼Œåªä¸è¿‡bindè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚ æ„é€ å‡½æ•°è°ƒç”¨æ¨¡å¼1234567function Dog(name)&#123; this.name = name; console.log(this)&#125;var puppy = new Dog(&#x27;apple&#x27;)// Dog &#123;name: &quot;apple&quot;&#125; ç”±æ­¤å¯çŸ¥ï¼Œnewæ“ä½œç¬¦è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘ç”Ÿæˆçš„æ–°å¯¹è±¡ã€‚ åŸå‹é“¾ä¸­çš„è°ƒç”¨æ¨¡å¼12345678910function Dog(name)&#123; this.name = name;&#125;var puppy = new Dog(&#x27;apple&#x27;)Dog.prototype.bark = function()&#123; console.log(this, this.name)&#125;puppy.bark()//Dog &#123;name: &quot;apple&quot;&#125; &quot;apple&quot; ç®­å¤´å‡½æ•°è°ƒç”¨æ¨¡å¼å…ˆçœ‹ç®­å¤´å‡½æ•°å’Œæ™®é€šå‡½æ•°çš„é‡è¦åŒºåˆ«ï¼š æ²¡æœ‰è‡ªå·±çš„thisã€superã€argumentså’Œnew.targetç»‘å®šã€‚ ä¸èƒ½ä½¿ç”¨newæ¥è°ƒç”¨ã€‚ æ²¡æœ‰åŸå‹å¯¹è±¡ã€‚ ä¸å¯ä»¥æ”¹å˜thisçš„ç»‘å®šã€‚ å½¢å‚åç§°ä¸èƒ½é‡å¤ã€‚ ç®­å¤´å‡½æ•°ä¸­æ²¡æœ‰thisç»‘å®šï¼Œå¿…é¡»é€šè¿‡æŸ¥æ‰¾ä½œç”¨åŸŸé“¾æ¥å†³å®šå…¶å€¼ã€‚ å¦‚æœç®­å¤´å‡½æ•°è¢«éç®­å¤´å‡½æ•°åŒ…å«ï¼Œåˆ™thisç»‘å®šçš„æ˜¯æœ€è¿‘ä¸€å±‚éç®­å¤´å‡½æ•°çš„thisï¼Œå¦åˆ™thisçš„å€¼åˆ™è¢«è®¾ç½®ä¸ºå…¨å±€å¯¹è±¡ã€‚ æ¯”å¦‚ï¼š 123456789101112131415var name = &#x27;out&#x27;var people = &#123; name: &#x27;xyf&#x27;, sayName: function()&#123; var arrowFun = () =&gt; &#123; console.log(this.name) &#125; arrowFun() &#125;, arrowSayName: () =&gt; &#123; console.log(this.name) &#125;&#125;people.sayName()people.arrowSayName() æ€»ç»“å¦‚æœè¦åˆ¤æ–­ä¸€ä¸ªè¿è¡Œä¸­å‡½æ•°çš„ this ç»‘å®šï¼Œ å°±éœ€è¦æ‰¾åˆ°è¿™ä¸ªå‡½æ•°çš„ç›´æ¥è°ƒç”¨ä½ç½®ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"å‰ç«¯ä¹Ÿè¦æ‡‚Httpç¼“å­˜æœºåˆ¶","date":"2018-08-06T13:00:00.000Z","path":"2018/08/06/Http-Cache.html","text":"æœ€è¿‘åœ¨çœ‹é¢è¯•é¢˜çš„æ—¶å€™æ€»ä¼šçœ‹åˆ°æœ‰ä¸€äº›å…³äºHttpç¼“å­˜çš„é¢˜ç›®ï¼Œä½†æ˜¯æ€»æ˜¯ä¸€çŸ¥åŠè§£ï¼Œä¸ç”šç†è§£ï¼›å°¤å…¶æ˜¯Httpå¤´ä¿¡æ¯ä¸­æœ‰ä¸€å¤§å †çš„å­—æ®µï¼Œä»€ä¹ˆif-modified-sinceï¼Œä»€ä¹ˆif-none-matchï¼ŒçœŸæ˜¯ä»¤äººå¤´ç–¼ã€‚åæ¥çªç„¶æƒ³åˆ°ï¼Œè¦æ˜¯èƒ½é€šè¿‡è‡ªå·±æ„å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œè‡ªå·±æ·»åŠ å¤´ä¿¡æ¯ï¼Œç„¶åçœ‹å®ç°çš„æ•ˆæœï¼Œä¸å°±æ›´å¥½äº†ä¹ˆã€‚è¯´å¹²å°±å¹²ï¼Œåœ¨ç½‘ä¸Šå„ç§æ‰¾èµ„æ–™ï¼Œç„¶åå†ä½¿ç”¨expressjsæ·»åŠ å„ç§å¤´ä¿¡æ¯ï¼Œå°±èƒ½å¤Ÿå¾ˆå¥½çš„ç†è§£Httpç¼“å­˜äº†ã€‚ Httpç®€ä»‹ æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡æ˜¯é€šè¿‡HTTPåè®®ï¼ŒHTTPåè®®æ°¸è¿œéƒ½æ˜¯å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å™¨å›é€å“åº”ã€‚æ¨¡å‹å¦‚ä¸‹ï¼š HTTPæŠ¥æ–‡å°±æ˜¯æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´é€šä¿¡æ—¶å‘é€åŠå“åº”çš„æ•°æ®å—ã€‚æµè§ˆå™¨å‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®ï¼Œå‘é€è¯·æ±‚(request)æŠ¥æ–‡ï¼›æœåŠ¡å™¨å‘æµè§ˆå™¨è¿”å›æ•°æ®ï¼Œè¿”å›å“åº”(response)æŠ¥æ–‡ã€‚æŠ¥æ–‡ä¿¡æ¯ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š æŠ¥æ–‡å¤´éƒ¨ï¼šä¸€äº›é™„åŠ ä¿¡æ¯ï¼ˆcookieï¼Œç¼“å­˜ä¿¡æ¯ç­‰ï¼‰ï¼Œä¸ç¼“å­˜ç›¸å…³çš„è§„åˆ™ä¿¡æ¯ï¼Œå‡åŒ…å«åœ¨å¤´éƒ¨ä¸­ æ•°æ®ä¸»ä½“éƒ¨åˆ†ï¼šHTTPè¯·æ±‚çœŸæ­£æƒ³è¦ä¼ è¾“çš„æ•°æ®å†…å®¹ æœ¬æ–‡ç”¨åˆ°çš„ä¸€äº›æŠ¥æ–‡å¤´å¦‚ä¸‹ï¼š å­—æ®µåç§° å­—æ®µæ‰€å± Pragma é€šç”¨å¤´ Expires å“åº”å¤´ Cache-Control é€šç”¨å¤´ Last-Modified å“åº”å¤´ If-Modified-Sice è¯·æ±‚å¤´ ETag å“åº”å¤´ If-None-Match è¯·æ±‚å¤´ Httpç¼“å­˜çš„åˆ†ç±» Httpç¼“å­˜å¯ä»¥åˆ†ä¸ºä¸¤å¤§ç±»ï¼Œå¼ºåˆ¶ç¼“å­˜ï¼ˆä¹Ÿç§°å¼ºç¼“å­˜ï¼‰å’Œåå•†ç¼“å­˜ã€‚ä¸¤ç±»ç¼“å­˜è§„åˆ™ä¸åŒï¼Œå¼ºåˆ¶ç¼“å­˜åœ¨ç¼“å­˜æ•°æ®æœªå¤±æ•ˆçš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦å†å’ŒæœåŠ¡å™¨å‘ç”Ÿäº¤äº’ï¼›è€Œåå•†ç¼“å­˜ï¼Œé¡¾åæ€ä¹‰ï¼Œéœ€è¦è¿›è¡Œæ¯”è¾ƒåˆ¤æ–­æ˜¯å¦å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‚ ä¸¤ç±»ç¼“å­˜è§„åˆ™å¯ä»¥åŒæ—¶å­˜åœ¨ï¼Œå¼ºåˆ¶ç¼“å­˜ä¼˜å…ˆçº§é«˜äºåå•†ç¼“å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ‰§è¡Œå¼ºåˆ¶ç¼“å­˜çš„è§„åˆ™æ—¶ï¼Œå¦‚æœç¼“å­˜ç”Ÿæ•ˆï¼Œç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸å†æ‰§è¡Œåå•†ç¼“å­˜è§„åˆ™ã€‚ åŸå§‹æ¨¡å‹ æˆ‘ä»¬å…ˆç®€å•æ­å»ºä¸€ä¸ªExpressçš„æœåŠ¡å™¨ï¼Œä¸åŠ ä»»ä½•ç¼“å­˜ä¿¡æ¯å¤´ã€‚ 12345678910111213141516171819202122232425262728const express = require(&#x27;express&#x27;);const app = express();const port = 8080;const fs = require(&#x27;fs&#x27;);const path = require(&#x27;path&#x27;);app.get(&#x27;/&#x27;,(req,res) =&gt; &#123; res.send(`&lt;!DOCTYPE html&gt; &lt;html lang=&quot;en&quot;&gt; &lt;head&gt; &lt;title&gt;Document&lt;/title&gt; &lt;/head&gt; &lt;body&gt; Http Cache Demo &lt;script src=&quot;/demo.js&quot;&gt;&lt;/script&gt; &lt;/body&gt; &lt;/html&gt;`)&#125;)app.get(&#x27;/demo.js&#x27;,(req, res)=&gt;&#123; let jsPath = path.resolve(__dirname,&#x27;./static/js/demo.js&#x27;); let cont = fs.readFileSync(jsPath); res.end(cont)&#125;)app.listen(port,()=&gt;&#123; console.log(`listen on $&#123;port&#125;`) &#125;) æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼š è¯·æ±‚è¿‡ç¨‹å¦‚ä¸‹ï¼š æµè§ˆå™¨è¯·æ±‚é™æ€èµ„æºdemo.js æœåŠ¡å™¨è¯»å–ç£ç›˜æ–‡ä»¶demo.jsï¼Œè¿”ç»™æµè§ˆå™¨ æµè§ˆå™¨å†æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨åˆé‡æ–°è¯»å–ç£ç›˜æ–‡ä»¶ a.jsï¼Œè¿”ç»™æµè§ˆå™¨ã€‚ å¾ªç¯è¯·æ±‚ã€‚ã€‚ çœ‹å¾—å‡ºæ¥è¿™ç§è¯·æ±‚æ–¹å¼çš„æµé‡ä¸è¯·æ±‚æ¬¡æ•°æœ‰å…³ï¼ŒåŒæ—¶ï¼Œç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š æµªè´¹ç”¨æˆ·æµé‡ æµªè´¹æœåŠ¡å™¨èµ„æºï¼ŒæœåŠ¡å™¨è¦è¯»ç£ç›˜æ–‡ä»¶ï¼Œç„¶åå‘é€æ–‡ä»¶åˆ°æµè§ˆå™¨ æµè§ˆå™¨è¦ç­‰å¾…jsä¸‹è½½å¹¶ä¸”æ‰§è¡Œåæ‰èƒ½æ¸²æŸ“é¡µé¢ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹åœ¨å¤´ä¿¡æ¯ä¸­æ·»åŠ ç¼“å­˜ä¿¡æ¯ã€‚ ä¸€ã€å¼ºåˆ¶ç¼“å­˜ å¼ºåˆ¶ç¼“å­˜åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼ŒExpireså’ŒCache-Controlã€‚ Expires Expiresçš„å€¼æ˜¯æœåŠ¡å™¨å‘Šè¯‰æµè§ˆå™¨çš„ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆå€¼ä¸ºGMTæ—¶é—´ï¼Œå³æ ¼æ—å°¼æ²»æ—¶é—´ï¼‰ï¼Œå³ä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œå¦‚æœæµè§ˆå™¨ç«¯çš„å½“å‰æ—¶é—´è¿˜æ²¡æœ‰åˆ°è¾¾è¿‡æœŸæ—¶é—´ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜æ•°æ®ã€‚ä¸‹é¢é€šè¿‡æˆ‘ä»¬çš„ExpressæœåŠ¡å™¨æ¥è®¾ç½®ä¸€ä¸‹Expireså“åº”å¤´ä¿¡æ¯ã€‚ 1234567891011121314//å…¶ä»–ä»£ç ...const moment = require(&#x27;moment&#x27;);app.get(&#x27;/demo.js&#x27;,(req, res)=&gt;&#123; let jsPath = path.resolve(__dirname,&#x27;./static/js/demo.js&#x27;); let cont = fs.readFileSync(jsPath); res.setHeader(&#x27;Expires&#x27;, getGLNZ()) //2åˆ†é’Ÿ res.end(cont)&#125;)function getGLNZ()&#123; return moment().utc().add(2,&#x27;m&#x27;).format(&#x27;ddd, DD MMM YYYY HH:mm:ss&#x27;)+&#x27; GMT&#x27;;&#125;//å…¶ä»–ä»£ç ... æˆ‘ä»¬åœ¨demo.jsä¸­æ·»åŠ äº†ä¸€ä¸ªExpireså“åº”å¤´ï¼Œä¸è¿‡ç”±äºæ˜¯æ ¼æ—å°¼æ²»æ—¶é—´ï¼Œæ‰€ä»¥é€šè¿‡momentjsè½¬æ¢ä¸€ä¸‹ã€‚ç¬¬ä¸€æ¬¡è¯·æ±‚çš„æ—¶å€™è¿˜æ˜¯ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼ŒåŒæ—¶ä¼šæŠŠè¿‡æœŸæ—¶é—´å’Œæ–‡ä»¶ä¸€èµ·è¿”å›ç»™æˆ‘ä»¬ï¼›ä½†æ˜¯å½“æˆ‘ä»¬åˆ·æ–°çš„æ—¶å€™ï¼Œæ‰æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼š å¯ä»¥çœ‹å‡ºæ–‡ä»¶æ˜¯ç›´æ¥ä»ç¼“å­˜ï¼ˆmemory cacheï¼‰ä¸­è¯»å–çš„ï¼Œå¹¶æ²¡æœ‰å‘èµ·è¯·æ±‚ã€‚æˆ‘ä»¬åœ¨è¿™è¾¹è®¾ç½®è¿‡æœŸæ—¶é—´ä¸ºä¸¤åˆ†é’Ÿï¼Œä¸¤åˆ†é’Ÿè¿‡åå¯ä»¥åˆ·æ–°ä¸€ä¸‹é¡µé¢çœ‹åˆ°æµè§ˆå™¨å†æ¬¡å‘é€è¯·æ±‚äº†ã€‚ è™½ç„¶è¿™ç§æ–¹å¼æ·»åŠ äº†ç¼“å­˜æ§åˆ¶ï¼ŒèŠ‚çœæµé‡ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜çš„ï¼š ç”±äºæµè§ˆå™¨æ—¶é—´å’ŒæœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥ï¼Œå¦‚æœæµè§ˆå™¨è®¾ç½®äº†ä¸€ä¸ªå¾ˆåçš„æ—¶é—´ï¼Œè¿‡æœŸæ—¶é—´ä¸€ç›´æ²¡æœ‰ç”¨ ç¼“å­˜è¿‡æœŸåï¼Œä¸ç®¡æ–‡ä»¶æœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼ŒæœåŠ¡å™¨éƒ½ä¼šå†æ¬¡è¯»å–æ–‡ä»¶è¿”å›ç»™æµè§ˆå™¨ ä¸è¿‡Expires æ˜¯HTTP 1.0çš„ä¸œè¥¿ï¼Œç°åœ¨é»˜è®¤æµè§ˆå™¨å‡é»˜è®¤ä½¿ç”¨HTTP 1.1ï¼Œæ‰€ä»¥å®ƒçš„ä½œç”¨åŸºæœ¬å¿½ç•¥ã€‚ Cache-Control é’ˆå¯¹æµè§ˆå™¨å’ŒæœåŠ¡å™¨æ—¶é—´ä¸åŒæ­¥ï¼ŒåŠ å…¥äº†æ–°çš„ç¼“å­˜æ–¹æ¡ˆï¼›è¿™æ¬¡æœåŠ¡å™¨ä¸æ˜¯ç›´æ¥å‘Šè¯‰æµè§ˆå™¨è¿‡æœŸæ—¶é—´ï¼Œè€Œæ˜¯å‘Šè¯‰ä¸€ä¸ªç›¸å¯¹æ—¶é—´Cache-Control=10ç§’ï¼Œæ„æ€æ˜¯10ç§’å†…ï¼Œç›´æ¥ä½¿ç”¨æµè§ˆå™¨ç¼“å­˜ã€‚ 123456app.get(&#x27;/demo.js&#x27;,(req, res)=&gt;&#123; let jsPath = path.resolve(__dirname,&#x27;./static/js/demo.js&#x27;); let cont = fs.readFileSync(jsPath); res.setHeader(&#x27;Cache-Control&#x27;, &#x27;public,max-age=120&#x27;) //2åˆ†é’Ÿ res.end(cont)&#125;) äºŒã€åå•†ç¼“å­˜ å¼ºåˆ¶ç¼“å­˜çš„å¼Šç«¯å¾ˆæ˜æ˜¾ï¼Œå³æ¯æ¬¡éƒ½æ˜¯æ ¹æ®æ—¶é—´æ¥åˆ¤æ–­ç¼“å­˜æ˜¯å¦è¿‡æœŸï¼›ä½†æ˜¯å½“åˆ°è¾¾è¿‡æœŸæ—¶é—´åï¼Œå¦‚æœæ–‡ä»¶æ²¡æœ‰æ”¹åŠ¨ï¼Œå†æ¬¡å»è·å–æ–‡ä»¶å°±æœ‰ç‚¹æµªè´¹æœåŠ¡å™¨çš„èµ„æºäº†ã€‚åå•†ç¼“å­˜æœ‰ä¸¤ç»„æŠ¥æ–‡ç»“åˆä½¿ç”¨ï¼š Last-Modifiedå’ŒIf-Modified-Since ETagå’ŒIf-None-Match Last-Modified ä¸ºäº†èŠ‚çœæœåŠ¡å™¨çš„èµ„æºï¼Œå†æ¬¡æ”¹è¿›æ–¹æ¡ˆã€‚æµè§ˆå™¨å’ŒæœåŠ¡å™¨åå•†ï¼ŒæœåŠ¡å™¨æ¯æ¬¡è¿”å›æ–‡ä»¶çš„åŒæ—¶ï¼Œå‘Šè¯‰æµè§ˆå™¨æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šæœ€è¿‘çš„ä¿®æ”¹æ—¶é—´ã€‚è¯·æ±‚è¿‡ç¨‹å¦‚ä¸‹ï¼š æµè§ˆå™¨è¯·æ±‚é™æ€èµ„æºdemo.js æœåŠ¡å™¨è¯»å–ç£ç›˜æ–‡ä»¶demo.jsï¼Œè¿”ç»™æµè§ˆå™¨ï¼ŒåŒæ—¶å¸¦ä¸Šæ–‡ä»¶ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´ Last-Modifiedï¼ˆGMTæ ‡å‡†æ ¼å¼ï¼‰ å½“æµè§ˆå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶è¿‡æœŸæ—¶ï¼Œæµè§ˆå™¨å¸¦ä¸Šè¯·æ±‚å¤´If-Modified-Sinceï¼ˆç­‰äºä¸Šä¸€æ¬¡è¯·æ±‚çš„Last-Modifiedï¼‰è¯·æ±‚æœåŠ¡å™¨ æœåŠ¡å™¨æ¯”è¾ƒè¯·æ±‚å¤´é‡Œçš„If-Modified-Sinceå’Œæ–‡ä»¶çš„ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´ã€‚å¦‚æœæœä¸€è‡´å°±ç»§ç»­ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼ˆ304ï¼‰ï¼Œå¦‚æœä¸ä¸€è‡´å°±å†æ¬¡è¿”å›æ–‡ä»¶å†…å®¹å’ŒLast-Modifiedã€‚ å¾ªç¯è¯·æ±‚ã€‚ã€‚ ä»£ç å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š 12345678910111213141516app.get(&#x27;/demo.js&#x27;,(req, res)=&gt;&#123; let jsPath = path.resolve(__dirname,&#x27;./static/js/demo.js&#x27;) let cont = fs.readFileSync(jsPath); let status = fs.statSync(jsPath) let lastModified = status.mtime.toUTCString() if(lastModified === req.headers[&#x27;if-modified-since&#x27;])&#123; res.writeHead(304, &#x27;Not Modified&#x27;) res.end() &#125; else &#123; res.setHeader(&#x27;Cache-Control&#x27;, &#x27;public,max-age=5&#x27;) res.setHeader(&#x27;Last-Modified&#x27;, lastModified) res.writeHead(200, &#x27;OK&#x27;) res.end(cont) &#125;&#125;) æˆ‘ä»¬å¤šæ¬¡åˆ·æ–°é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼š è™½ç„¶è¿™ä¸ªæ–¹æ¡ˆæ¯”å‰é¢ä¸‰ä¸ªæ–¹æ¡ˆæœ‰äº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œæµè§ˆå™¨æ£€æµ‹æ–‡ä»¶æ˜¯å¦æœ‰ä¿®æ”¹ï¼Œå¦‚æœæ²¡æœ‰å˜åŒ–å°±ä¸å†å‘é€æ–‡ä»¶ï¼›ä½†æ˜¯è¿˜æ˜¯æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š ç”±äºLast-Modifiedä¿®æ”¹æ—¶é—´æ˜¯GMTæ—¶é—´ï¼Œåªèƒ½ç²¾ç¡®åˆ°ç§’ï¼Œå¦‚æœæ–‡ä»¶åœ¨1ç§’å†…æœ‰å¤šæ¬¡æ”¹åŠ¨ï¼ŒæœåŠ¡å™¨å¹¶ä¸çŸ¥é“æ–‡ä»¶æœ‰æ”¹åŠ¨ï¼Œæµè§ˆå™¨æ‹¿ä¸åˆ°æœ€æ–°çš„æ–‡ä»¶ å¦‚æœæœåŠ¡å™¨ä¸Šæ–‡ä»¶è¢«å¤šæ¬¡ä¿®æ”¹äº†ä½†æ˜¯å†…å®¹å´æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼ŒæœåŠ¡å™¨éœ€è¦å†æ¬¡é‡æ–°è¿”å›æ–‡ä»¶ã€‚ ETag ä¸ºäº†è§£å†³æ–‡ä»¶ä¿®æ”¹æ—¶é—´ä¸ç²¾ç¡®å¸¦æ¥çš„é—®é¢˜ï¼ŒæœåŠ¡å™¨å’Œæµè§ˆå™¨å†æ¬¡åå•†ï¼Œè¿™æ¬¡ä¸è¿”å›æ—¶é—´ï¼Œè¿”å›æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ETagã€‚åªæœ‰å½“æ–‡ä»¶å†…å®¹æ”¹å˜æ—¶ï¼ŒETagæ‰æ”¹å˜ã€‚è¯·æ±‚è¿‡ç¨‹å¦‚ä¸‹ï¼š æµè§ˆå™¨è¯·æ±‚é™æ€èµ„æºdemo.js æœåŠ¡å™¨è¯»å–ç£ç›˜æ–‡ä»¶demo.jsï¼Œè¿”ç»™æµè§ˆå™¨ï¼ŒåŒæ—¶å¸¦ä¸Šæ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ETag å½“æµè§ˆå™¨ä¸Šçš„ç¼“å­˜æ–‡ä»¶è¿‡æœŸæ—¶ï¼Œæµè§ˆå™¨å¸¦ä¸Šè¯·æ±‚å¤´If-None-Matchï¼ˆç­‰äºä¸Šä¸€æ¬¡è¯·æ±‚çš„ETagï¼‰è¯·æ±‚æœåŠ¡å™¨ æœåŠ¡å™¨æ¯”è¾ƒè¯·æ±‚å¤´é‡Œçš„If-None-Matchå’Œæ–‡ä»¶çš„ETagã€‚å¦‚æœä¸€è‡´å°±ç»§ç»­ä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼ˆ304ï¼‰ï¼Œå¦‚æœä¸ä¸€è‡´å°±å†æ¬¡è¿”å›æ–‡ä»¶å†…å®¹å’ŒETagã€‚ å¾ªç¯è¯·æ±‚ã€‚ã€‚ 12345678910111213141516const md5 = require(&#x27;md5&#x27;);app.get(&#x27;/demo.js&#x27;,(req, res)=&gt;&#123; let jsPath = path.resolve(__dirname,&#x27;./static/js/demo.js&#x27;); let cont = fs.readFileSync(jsPath); let etag = md5(cont); if(req.headers[&#x27;if-none-match&#x27;] === etag)&#123; res.writeHead(304, &#x27;Not Modified&#x27;); res.end(); &#125; else &#123; res.setHeader(&#x27;ETag&#x27;, etag); res.writeHead(200, &#x27;OK&#x27;); res.end(cont); &#125;&#125;) è¯·æ±‚ç»“æœå¦‚ä¸‹ï¼š ä¸€äº›é¢å¤–çš„ä¸œè¥¿ åœ¨æŠ¥æ–‡å¤´çš„è¡¨æ ¼ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªå­—æ®µå«Pragmaï¼Œè¿™æ˜¯ä¸€æ®µå°˜å°çš„å†å²â€¦. åœ¨â€œé¥è¿œçš„â€http1.0æ—¶ä»£ï¼Œç»™å®¢æˆ·ç«¯è®¾å®šç¼“å­˜æ–¹å¼å¯é€šè¿‡ä¸¤ä¸ªå­—æ®µâ€“Pragmaå’ŒExpiresã€‚è™½ç„¶è¿™ä¸¤ä¸ªå­—æ®µæ—©å¯æŠ›å¼ƒï¼Œä½†ä¸ºäº†åšhttpåè®®çš„å‘ä¸‹å…¼å®¹ï¼Œä½ è¿˜æ˜¯å¯ä»¥çœ‹åˆ°å¾ˆå¤šç½‘ç«™ä¾æ—§ä¼šå¸¦ä¸Šè¿™ä¸¤ä¸ªå­—æ®µã€‚ å…³äºPragma å½“è¯¥å­—æ®µå€¼ä¸ºno-cacheçš„æ—¶å€™ï¼Œä¼šå‘Šè¯‰æµè§ˆå™¨ä¸è¦å¯¹è¯¥èµ„æºç¼“å­˜ï¼Œå³æ¯æ¬¡éƒ½å¾—å‘æœåŠ¡å™¨å‘ä¸€æ¬¡è¯·æ±‚æ‰è¡Œã€‚ 12res.setHeader(&#x27;Pragma&#x27;, &#x27;no-cache&#x27;) //ç¦æ­¢ç¼“å­˜res.setHeader(&#x27;Cache-Control&#x27;, &#x27;public,max-age=120&#x27;) //2åˆ†é’Ÿ é€šè¿‡Pragmaæ¥ç¦æ­¢ç¼“å­˜ï¼Œé€šè¿‡Cache-Controlè®¾ç½®ä¸¤åˆ†é’Ÿç¼“å­˜ï¼Œä½†æ˜¯é‡æ–°è®¿é—®æˆ‘ä»¬ä¼šå‘ç°æµè§ˆå™¨ä¼šå†æ¬¡å‘èµ·ä¸€æ¬¡è¯·æ±‚ï¼Œè¯´æ˜äº†Pragmaçš„ä¼˜å…ˆçº§é«˜äºCache-Control å…³äºCache-Control æˆ‘ä»¬çœ‹åˆ°Cache-Controlä¸­æœ‰ä¸€ä¸ªå±æ€§æ˜¯publicï¼Œé‚£ä¹ˆè¿™ä»£è¡¨äº†ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå…¶å®Cache-Controlä¸å…‰æœ‰max-ageï¼Œå®ƒå¸¸è§çš„å–å€¼privateã€publicã€no-cacheã€max-ageï¼Œno-storeï¼Œé»˜è®¤å€¼ä¸ºprivateï¼Œå„ä¸ªå–å€¼çš„å«ä¹‰å¦‚ä¸‹ï¼š private: å®¢æˆ·ç«¯å¯ä»¥ç¼“å­˜ public: å®¢æˆ·ç«¯å’Œä»£ç†æœåŠ¡å™¨éƒ½å¯ç¼“å­˜ max-age=xxx: ç¼“å­˜çš„å†…å®¹å°†åœ¨ xxx ç§’åå¤±æ•ˆ no-cache: éœ€è¦ä½¿ç”¨å¯¹æ¯”ç¼“å­˜æ¥éªŒè¯ç¼“å­˜æ•°æ® no-store: æ‰€æœ‰å†…å®¹éƒ½ä¸ä¼šç¼“å­˜ï¼Œå¼ºåˆ¶ç¼“å­˜ï¼Œå¯¹æ¯”ç¼“å­˜éƒ½ä¸ä¼šè§¦å‘ æ‰€ä»¥æˆ‘ä»¬åœ¨åˆ·æ–°é¡µé¢çš„æ—¶å€™ï¼Œå¦‚æœåªæŒ‰F5åªæ˜¯å•çº¯çš„å‘é€è¯·æ±‚ï¼ŒæŒ‰Ctrl+F5ä¼šå‘ç°è¯·æ±‚å¤´ä¸Šå¤šäº†ä¸¤ä¸ªå­—æ®µPragma: no-cacheå’ŒCache-Control: no-cacheã€‚ ç¼“å­˜çš„ä¼˜å…ˆçº§ ä¸Šé¢æˆ‘ä»¬è¯´è¿‡å¼ºåˆ¶ç¼“å­˜çš„ä¼˜å…ˆçº§é«˜äºåå•†ç¼“å­˜ï¼ŒPragmaçš„ä¼˜å…ˆçº§é«˜äºCache-Controlï¼Œé‚£ä¹ˆå…¶ä»–ç¼“å­˜çš„ä¼˜å…ˆçº§é¡ºåºæ€ä¹ˆæ ·å‘¢ï¼Ÿç½‘ä¸ŠæŸ¥é˜…äº†èµ„æ–™å¾—å‡ºä»¥ä¸‹é¡ºåºï¼ˆPSï¼šæœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥éªŒè¯ä¸€ä¸‹æ­£ç¡®æ€§å‘Šè¯‰æˆ‘ï¼‰ï¼š Pragma &gt; Cache-Control &gt; Expires &gt; ETag &gt; Last-Modified å‚è€ƒèµ„æ–™ï¼š httpç¼“å­˜ä¼˜å…ˆçº§é—®é¢˜å½»åº•å¼„æ‡‚HTTPç¼“å­˜æœºåˆ¶åŠåŸç†HTTPç¼“å­˜æ§åˆ¶å°ç»“æµ…è°ˆæµè§ˆå™¨httpçš„ç¼“å­˜æœºåˆ¶é€šè¿‡expressæ¡†æ¶ç®€å•å®è·µå‡ ç§è®¾ç½®HTTPå¯¹ç¼“å­˜çš„æ§åˆ¶","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æµè§ˆå™¨","slug":"Browser","permalink":"https://xieyufei.com/tags/Browser/"}]},{"title":"JSä¸­æµ®ç‚¹æ•°ç²¾åº¦é—®é¢˜","date":"2018-03-07T12:48:47.000Z","path":"2018/03/07/JS-Decimal-Accuracy.html","text":"æœ€è¿‘åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œæ¶‰åŠåˆ°å•†å“ä»·æ ¼çš„è®¡ç®—ï¼Œç»å¸¸ä¼šå‡ºç°è®¡ç®—å‡ºç°ç²¾åº¦é—®é¢˜ã€‚åˆšå¼€å§‹è‰è‰äº†äº‹ï¼Œç›´æ¥ç”¨toFixedå°±è§£å†³äº†é—®é¢˜ï¼Œå¹¶æ²¡æœ‰å¥½å¥½çš„æ€è€ƒä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚åæ¥æ…¢æ…¢çš„ï¼Œé—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œè¿toFixedä¹Ÿå‡ºç°äº†ï¼ˆå…æ‚²ï¼‰ï¼Œåæ¥ç»è¿‡æœç´¢ç½‘ä¸Šçš„å„ç§åšå®¢å’Œè®ºå›ï¼Œæ•´ç†æ€»ç»“äº†ä¸€ä¸‹ã€‚ é—®é¢˜çš„å‘ç° æ€»ç»“äº†ä¸€ä¸‹ï¼Œä¸€å…±æœ‰ä»¥ä¸‹ä¸¤ç§é—®é¢˜ æµ®ç‚¹æ•°è¿ç®—åçš„ç²¾åº¦é—®é¢˜ åœ¨è®¡ç®—å•†å“ä»·æ ¼åŠ å‡ä¹˜é™¤æ—¶ï¼Œå¶å°”ä¼šå‡ºç°ç²¾åº¦é—®é¢˜ï¼Œä¸€äº›å¸¸è§çš„ä¾‹å­å¦‚ä¸‹ï¼š 1234567891011121314151617// åŠ æ³• =====================0.1 + 0.2 = 0.300000000000000040.7 + 0.1 = 0.79999999999999990.2 + 0.4 = 0.6000000000000001// å‡æ³• =====================1.5 - 1.2 = 0.300000000000000040.3 - 0.2 = 0.09999999999999998 // ä¹˜æ³• =====================19.9 * 100 = 1989.99999999999980.8 * 3 = 2.400000000000000435.41 * 100 = 3540.9999999999995// é™¤æ³• =====================0.3 / 0.1 = 2.99999999999999960.69 / 10 = 0.06899999999999999 toFixedå¥‡è‘©é—®é¢˜ åœ¨é‡åˆ°æµ®ç‚¹æ•°è¿ç®—åå‡ºç°çš„ç²¾åº¦é—®é¢˜æ—¶ï¼Œåˆšå¼€å§‹æˆ‘æ˜¯ä½¿ç”¨toFixed(2)æ¥è§£å†³çš„ï¼Œå› ä¸ºåœ¨W3schoolå’Œèœé¸Ÿæ•™ç¨‹ï¼ˆä»–ä»¬å‡è¡¨ç¤ºè¿™é”…ä¸èƒŒï¼‰ä¸Šæ˜ç¡®å†™ç€å®šä¹‰ï¼štoFixed()æ–¹æ³•å¯æŠŠNumberå››èˆäº”å…¥ä¸ºæŒ‡å®šå°æ•°ä½æ•°çš„æ•°å­—ã€‚ ä½†æ˜¯åœ¨chromeä¸‹æµ‹è¯•ç»“æœä¸å¤ªä»¤äººæ»¡æ„ï¼š 1234561.35.toFixed(1) // 1.4 æ­£ç¡®1.335.toFixed(2) // 1.33 é”™è¯¯1.3335.toFixed(3) // 1.333 é”™è¯¯1.33335.toFixed(4) // 1.3334 æ­£ç¡®1.333335.toFixed(5) // 1.33333 é”™è¯¯1.3333335.toFixed(6) // 1.333333 é”™è¯¯ ä½¿ç”¨IETesteråœ¨IEä¸‹é¢æµ‹è¯•çš„ç»“æœå´æ˜¯æ­£ç¡®çš„ã€‚ ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸ºä»€ä¹ˆ0.1+0.2ä¼šç­‰äº0.30000000000000004ï¼Œè€Œä¸æ˜¯0.3ã€‚é¦–å…ˆï¼Œæƒ³è¦çŸ¥é“ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿè¿™æ ·çš„é—®é¢˜ï¼Œè®©æˆ‘ä»¬å›åˆ°å¤§å­¦é‡Œå­¦çš„å¤ï¼ˆkuï¼‰æ‚ï¼ˆzaoï¼‰çš„è®¡ç®—æœºç»„æˆåŸç†ã€‚è™½ç„¶å·²ç»å…¨éƒ¨è¿˜ç»™å¤§å­¦è€å¸ˆäº†ï¼Œä½†æ˜¯æ²¡å…³ç³»ï¼Œæˆ‘ä»¬è¿˜æœ‰ç™¾åº¦å˜›ã€‚ æµ®ç‚¹æ•°çš„å­˜å‚¨ å’Œå…¶å®ƒè¯­è¨€å¦‚Javaå’ŒPythonä¸åŒï¼ŒJavaScriptä¸­æ‰€æœ‰æ•°å­—åŒ…æ‹¬æ•´æ•°å’Œå°æ•°éƒ½åªæœ‰ä¸€ç§ç±»å‹ â€” Numberã€‚å®ƒçš„å®ç°éµå¾ª IEEE 754 æ ‡å‡†ï¼Œä½¿ç”¨64ä½å›ºå®šé•¿åº¦æ¥è¡¨ç¤ºï¼Œä¹Ÿå°±æ˜¯æ ‡å‡†çš„ double åŒç²¾åº¦æµ®ç‚¹æ•°ï¼ˆç›¸å…³çš„è¿˜æœ‰float 32ä½å•ç²¾åº¦ï¼‰ã€‚ è¿™æ ·çš„å­˜å‚¨ç»“æ„ä¼˜ç‚¹æ˜¯å¯ä»¥å½’ä¸€åŒ–å¤„ç†æ•´æ•°å’Œå°æ•°ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´ã€‚ 64ä½æ¯”ç‰¹åˆå¯åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š ç¬¦å·ä½Sï¼šç¬¬ 1 ä½æ˜¯æ­£è´Ÿæ•°ç¬¦å·ä½ï¼ˆsignï¼‰ï¼Œ0ä»£è¡¨æ­£æ•°ï¼Œ1ä»£è¡¨è´Ÿæ•° æŒ‡æ•°ä½Eï¼šä¸­é—´çš„ 11 ä½å­˜å‚¨æŒ‡æ•°ï¼ˆexponentï¼‰ï¼Œç”¨æ¥è¡¨ç¤ºæ¬¡æ–¹æ•° å°¾æ•°ä½Mï¼šæœ€åçš„ 52 ä½æ˜¯å°¾æ•°ï¼ˆmantissaï¼‰ï¼Œè¶…å‡ºçš„éƒ¨åˆ†è‡ªåŠ¨è¿›ä¸€èˆé›¶ æµ®ç‚¹æ•°çš„è¿ç®— é‚£ä¹ˆJavaScriptåœ¨è®¡ç®—0.1+0.2æ—¶åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ é¦–å…ˆï¼Œåè¿›åˆ¶çš„0.1å’Œ0.2ä¼šè¢«è½¬æ¢æˆäºŒè¿›åˆ¶çš„ï¼Œä½†æ˜¯ç”±äºæµ®ç‚¹æ•°ç”¨äºŒè¿›åˆ¶è¡¨ç¤ºæ—¶æ˜¯æ— ç©·çš„ï¼š 120.1 -&gt; 0.0001 1001 1001 1001...(1100å¾ªç¯)0.2 -&gt; 0.0011 0011 0011 0011...(0011å¾ªç¯) IEEE 754 æ ‡å‡†çš„ 64 ä½åŒç²¾åº¦æµ®ç‚¹æ•°çš„å°æ•°éƒ¨åˆ†æœ€å¤šæ”¯æŒ53ä½äºŒè¿›åˆ¶ä½ï¼Œæ‰€ä»¥ä¸¤è€…ç›¸åŠ ä¹‹åå¾—åˆ°äºŒè¿›åˆ¶ä¸ºï¼š 10.0100110011001100110011001100110011001100110011001100 å› æµ®ç‚¹æ•°å°æ•°ä½çš„é™åˆ¶è€Œæˆªæ–­çš„äºŒè¿›åˆ¶æ•°å­—ï¼Œå†è½¬æ¢ä¸ºåè¿›åˆ¶ï¼Œå°±æˆäº†0.30000000000000004ã€‚æ‰€ä»¥åœ¨è¿›è¡Œç®—æœ¯è®¡ç®—æ—¶ä¼šäº§ç”Ÿè¯¯å·®ã€‚ è§£å†³æ–¹æ³• é’ˆå¯¹ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ï¼Œç½‘ä¸Šæœäº†ä¸€æ³¢è§£å†³æ–¹æ³•ï¼ŒåŸºæœ¬éƒ½å¤§åŒå°å¼‚çš„ï¼Œåˆ†åˆ«æ¥çœ‹ä¸€ä¸‹ã€‚ è§£å†³toFixed é’ˆå¯¹toFixedçš„å…¼å®¹æ€§é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠtoFixé‡å†™ä¸€ä¸‹æ¥è§£å†³ï¼Œä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263// toFixedå…¼å®¹æ–¹æ³•Number.prototype.toFixed = function(len)&#123; if(len&gt;20 || len&lt;0)&#123; throw new RangeError(&#x27;toFixed() digits argument must be between 0 and 20&#x27;); &#125; // .123è½¬ä¸º0.123 var number = Number(this); if (isNaN(number) || number &gt;= Math.pow(10, 21)) &#123; return number.toString(); &#125; if (typeof (len) == &#x27;undefined&#x27; || len == 0) &#123; return (Math.round(number)).toString(); &#125; var result = number.toString(), numberArr = result.split(&#x27;.&#x27;); if(numberArr.length&lt;2)&#123; //æ•´æ•°çš„æƒ…å†µ return padNum(result); &#125; var intNum = numberArr[0], //æ•´æ•°éƒ¨åˆ† deciNum = numberArr[1],//å°æ•°éƒ¨åˆ† lastNum = deciNum.substr(len, 1);//æœ€åä¸€ä¸ªæ•°å­— if(deciNum.length == len)&#123; //éœ€è¦æˆªå–çš„é•¿åº¦ç­‰äºå½“å‰é•¿åº¦ return result; &#125; if(deciNum.length &lt; len)&#123; //éœ€è¦æˆªå–çš„é•¿åº¦å¤§äºå½“å‰é•¿åº¦ 1.3.toFixed(2) return padNum(result) &#125; //éœ€è¦æˆªå–çš„é•¿åº¦å°äºå½“å‰é•¿åº¦ï¼Œéœ€è¦åˆ¤æ–­æœ€åä¸€ä½æ•°å­— result = intNum + &#x27;.&#x27; + deciNum.substr(0, len); if(parseInt(lastNum, 10)&gt;=5)&#123; //æœ€åä¸€ä½æ•°å­—å¤§äº5ï¼Œè¦è¿›ä½ var times = Math.pow(10, len); //éœ€è¦æ”¾å¤§çš„å€æ•° var changedInt = Number(result.replace(&#x27;.&#x27;,&#x27;&#x27;));//æˆªå–åè½¬ä¸ºæ•´æ•° changedInt++;//æ•´æ•°è¿›ä½ changedInt /= times;//æ•´æ•°è½¬ä¸ºå°æ•°ï¼Œæ³¨ï¼šæœ‰å¯èƒ½è¿˜æ˜¯æ•´æ•° result = padNum(changedInt+&#x27;&#x27;); &#125; return result; //å¯¹æ•°å­—æœ«å°¾åŠ 0 function padNum(num)&#123; var dotPos = num.indexOf(&#x27;.&#x27;); if(dotPos === -1)&#123; //æ•´æ•°çš„æƒ…å†µ num += &#x27;.&#x27;; for(var i = 0;i&lt;len;i++)&#123; num += &#x27;0&#x27;; &#125; return num; &#125; else &#123; //å°æ•°çš„æƒ…å†µ var need = len - (num.length - dotPos - 1); for(var j = 0;j&lt;need;j++)&#123; num += &#x27;0&#x27;; &#125; return num; &#125; &#125;&#125; æˆ‘ä»¬é€šè¿‡åˆ¤æ–­æœ€åä¸€ä½æ˜¯å¦å¤§äºç­‰äº5æ¥å†³å®šéœ€ä¸éœ€è¦è¿›ä½ï¼Œå¦‚æœéœ€è¦è¿›ä½å…ˆæŠŠå°æ•°ä¹˜ä»¥å€æ•°å˜ä¸ºæ•´æ•°ï¼ŒåŠ 1ä¹‹åï¼Œå†é™¤ä»¥å€æ•°å˜ä¸ºå°æ•°ï¼Œè¿™æ ·å°±ä¸ç”¨ä¸€ä½ä¸€ä½çš„è¿›è¡Œåˆ¤æ–­ã€‚ è§£å†³æµ®ç‚¹æ•°è¿ç®—ç²¾åº¦ æ—¢ç„¶æˆ‘ä»¬å‘ç°äº†æµ®ç‚¹æ•°çš„è¿™ä¸ªé—®é¢˜ï¼Œåˆä¸èƒ½ç›´æ¥è®©ä¸¤ä¸ªæµ®ç‚¹æ•°è¿ç®—ï¼Œé‚£æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥æŠŠéœ€è¦è®¡ç®—çš„æ•°å­—å‡çº§ï¼ˆä¹˜ä»¥10çš„næ¬¡å¹‚ï¼‰æˆè®¡ç®—æœºèƒ½å¤Ÿç²¾ç¡®è¯†åˆ«çš„æ•´æ•°ï¼Œç­‰è®¡ç®—å®Œæˆåå†è¿›è¡Œé™çº§ï¼ˆé™¤ä»¥10çš„næ¬¡å¹‚ï¼‰ï¼Œè¿™æ˜¯å¤§éƒ¨åˆ†å˜æˆè¯­è¨€å¤„ç†ç²¾åº¦é—®é¢˜å¸¸ç”¨çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š 120.1 + 0.2 == 0.3 //false(0.1*10 + 0.2*10)/10 == 0.3 //true ä½†æ˜¯è¿™æ ·å°±èƒ½å®Œç¾è§£å†³ä¹ˆï¼Ÿç»†å¿ƒçš„è¯»è€…å¯èƒ½åœ¨ä¸Šé¢çš„ä¾‹å­é‡Œå·²ç»å‘ç°äº†é—®é¢˜ï¼š 135.41 * 100 = 3540.9999999999995 çœ‹æ¥è¿›è¡Œæ•°å­—å‡çº§ä¹Ÿä¸æ˜¯å®Œå…¨çš„å¯é å•Šï¼ˆå…æ‚²ï¼‰ã€‚ ä½†æ˜¯é­”é«˜ä¸€å°ºé“é«˜ä¸€ä¸ˆï¼Œè¿™æ ·å°±èƒ½éš¾ä½æˆ‘ä»¬ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥å°†æµ®ç‚¹æ•°toStringåindexOf(â€˜.â€™)ï¼Œè®°å½•ä¸€ä¸‹å°æ•°ä½çš„é•¿åº¦ï¼Œç„¶åå°†å°æ•°ç‚¹æŠ¹æ‰ï¼Œå®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106 /*** method ** * add / subtract / multiply /divide * floatObj.add(0.1, 0.2) &gt;&gt; 0.3 * floatObj.multiply(19.9, 100) &gt;&gt; 1990 * */var floatObj = function() &#123; /* * åˆ¤æ–­objæ˜¯å¦ä¸ºä¸€ä¸ªæ•´æ•° */ function isInteger(obj) &#123; return Math.floor(obj) === obj &#125; /* * å°†ä¸€ä¸ªæµ®ç‚¹æ•°è½¬æˆæ•´æ•°ï¼Œè¿”å›æ•´æ•°å’Œå€æ•°ã€‚å¦‚ 3.14 &gt;&gt; 314ï¼Œå€æ•°æ˜¯ 100 * @param floatNum &#123;number&#125; å°æ•° * @return &#123;object&#125; * &#123;times:100, num: 314&#125; */ function toInteger(floatNum) &#123; var ret = &#123;times: 1, num: 0&#125; if (isInteger(floatNum)) &#123; ret.num = floatNum return ret &#125; var strfi = floatNum + &#x27;&#x27; var dotPos = strfi.indexOf(&#x27;.&#x27;) var len = strfi.substr(dotPos+1).length var times = Math.pow(10, len) var intNum = Number(floatNum.toString().replace(&#x27;.&#x27;,&#x27;&#x27;)) ret.times = times ret.num = intNum return ret &#125; /* * æ ¸å¿ƒæ–¹æ³•ï¼Œå®ç°åŠ å‡ä¹˜é™¤è¿ç®—ï¼Œç¡®ä¿ä¸ä¸¢å¤±ç²¾åº¦ * æ€è·¯ï¼šæŠŠå°æ•°æ”¾å¤§ä¸ºæ•´æ•°ï¼ˆä¹˜ï¼‰ï¼Œè¿›è¡Œç®—æœ¯è¿ç®—ï¼Œå†ç¼©å°ä¸ºå°æ•°ï¼ˆé™¤ï¼‰ * * @param a &#123;number&#125; è¿ç®—æ•°1 * @param b &#123;number&#125; è¿ç®—æ•°2 * @param digits &#123;number&#125; ç²¾åº¦ï¼Œä¿ç•™çš„å°æ•°ç‚¹æ•°ï¼Œæ¯”å¦‚ 2, å³ä¿ç•™ä¸ºä¸¤ä½å°æ•° * @param op &#123;string&#125; è¿ç®—ç±»å‹ï¼Œæœ‰åŠ å‡ä¹˜é™¤ï¼ˆadd/subtract/multiply/divideï¼‰ * */ function operation(a, b, digits, op) &#123; var o1 = toInteger(a) var o2 = toInteger(b) var n1 = o1.num var n2 = o2.num var t1 = o1.times var t2 = o2.times var max = t1 &gt; t2 ? t1 : t2 var result = null switch (op) &#123; case &#x27;add&#x27;: if (t1 === t2) &#123; // ä¸¤ä¸ªå°æ•°ä½æ•°ç›¸åŒ result = n1 + n2 &#125; else if (t1 &gt; t2) &#123; // o1 å°æ•°ä½ å¤§äº o2 result = n1 + n2 * (t1 / t2) &#125; else &#123; // o1 å°æ•°ä½ å°äº o2 result = n1 * (t2 / t1) + n2 &#125; return result / max case &#x27;subtract&#x27;: if (t1 === t2) &#123; result = n1 - n2 &#125; else if (t1 &gt; t2) &#123; result = n1 - n2 * (t1 / t2) &#125; else &#123; result = n1 * (t2 / t1) - n2 &#125; return result / max case &#x27;multiply&#x27;: result = (n1 * n2) / (t1 * t2) return result case &#x27;divide&#x27;: result = (n1 / n2) * (t2 / t1) return result &#125; &#125; // åŠ å‡ä¹˜é™¤çš„å››ä¸ªæ¥å£ function add(a, b, digits) &#123; return operation(a, b, digits, &#x27;add&#x27;) &#125; function subtract(a, b, digits) &#123; return operation(a, b, digits, &#x27;subtract&#x27;) &#125; function multiply(a, b, digits) &#123; return operation(a, b, digits, &#x27;multiply&#x27;) &#125; function divide(a, b, digits) &#123; return operation(a, b, digits, &#x27;divide&#x27;) &#125; // exports return &#123; add: add, subtract: subtract, multiply: multiply, divide: divide &#125;&#125;(); å¦‚æœè§‰å¾—floatObjè°ƒç”¨éº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Number.prototypeä¸Šæ·»åŠ å¯¹åº”çš„è¿ç®—æ–¹æ³•ã€‚ å‚è€ƒé“¾æ¥ï¼š å…³äºjsæµ®ç‚¹æ•°è®¡ç®—ç²¾åº¦ä¸å‡†ç¡®é—®é¢˜çš„è§£å†³åŠæ³• jsä¸­toFixedç²¾åº¦é—®é¢˜çš„è§£å†³åŠæ³• JavaScript æµ®ç‚¹æ•°é™·é˜±åŠè§£æ³•","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"js","slug":"js","permalink":"https://xieyufei.com/tags/js/"}]},{"title":"JSæ—¶é—´å¤„ç†æ’ä»¶MomentJS","date":"2017-12-06T12:48:47.000Z","path":"2017/12/06/JS-Moment.html","text":"ç¬”è€…åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦å¯¹æ—¥æœŸå’Œæ—¶é—´è¿›è¡Œä¸€äº›å¤„ç†å’Œæ“ä½œï¼Œä½†æ˜¯æ¯æ¬¡éƒ½ç”¨JSè‡ªå¸¦çš„Dateå¯¹è±¡å¾ˆä¸æ–¹ä¾¿ï¼Œè¿˜è¦å†™ä¸€å †ç¹ççš„ä»£ç ï¼Œåç»­ç»´æŠ¤èµ·æ¥ä¹Ÿå¾ˆç—›è‹¦ã€‚åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹JSå¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ’ä»¶ï¼Œå‘ç°äº†MomentJSå¾ˆå¥½ç”¨ï¼Œå­¦ä¹ äº†ä¸€ä¸‹å®ƒçš„è¯­æ³•ï¼Œå‘ç°ååˆ†çš„ç®€æ´æ˜“æ‡‚ï¼Œè€Œä¸”å¯æ‰©å±•æ€§å¾ˆå¼ºï¼Œè°ƒç”¨æ–¹æ³•çµæ´»ã€‚å¾ˆå¤šçš„æ–¹æ³•è°ƒç”¨å½¢å¼å¤šæ ·ï¼Œæ”¯æŒå¤šç§ä¼ å‚æ•°æ–¹å¼ã€‚ä¸‹é¢ç®€å•çš„æ•´ç†äº†ä¸€ä¸‹ä½¿ç”¨æ–¹å¼ æ„é€ Momentå¯¹è±¡ MomentJSå°†æ—¶é—´å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œmomentå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¾ˆå¤šç§æ„é€ æ–¹å¼ï¼Œå¯ä»¥æ”¯æŒä¼ å…¥å­—ç¬¦ä¸²ã€æ•°ç»„å’Œå¯¹è±¡çš„å½¢å¼æ¥æ„é€ ã€‚ å½“å‰ç³»ç»Ÿæ—¶é—´ å¦‚æœä»€ä¹ˆéƒ½ä¸ä¼ ï¼Œå°±è·å–å½“å‰çš„ç³»ç»Ÿæ—¶é—´ã€‚ 1var now = moment() å­—ç¬¦ä¸²æ„é€  å¯ä»¥ä¼ å…¥å­—ç¬¦ä¸²ï¼Œé¦–å…ˆä¼šæ£€æŸ¥å­—ç¬¦ä¸²çš„æ ¼å¼æ˜¯å¦ç¬¦åˆISO 8601çš„æ ¼å¼ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œå°±è°ƒç”¨new Date(string)æ¥æ„é€ ã€‚ å·²çŸ¥æ ¼å¼å­—ç¬¦ä¸²12345moment(&#x27;2017-01-02&#x27;); //å¹´æœˆæ—¥moment(&#x27;2017-01-02 13&#x27;); //å¹´æœˆæ—¥ å°æ—¶moment(&#x27;2017-01-02 13:12&#x27;); //å¹´æœˆæ—¥ å°æ—¶åˆ†é’Ÿmoment(&#x27;2017-01-02 13:12:52&#x27;); //å¹´æœˆæ—¥ å°æ—¶åˆ†é’Ÿç§’moment(&#x27;2017-01-02 13:12:52.123&#x27;); //å¹´æœˆæ—¥ å°æ—¶åˆ†é’Ÿç§’ æ¯«ç§’ å­—ç¬¦ä¸²+æ ¼å¼ å‡å¦‚æ—¥æœŸçš„æ ¼å¼ä¸ç¬¦åˆISO 8601çš„æ ¼å¼ï¼Œä½†æ˜¯ä½ çŸ¥é“è¾“å…¥çš„å­—ç¬¦ä¸²çš„æ ¼å¼ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼è§£æï¼Œè§£æçš„è¯­æ³•æœ‰ä»¥ä¸‹å››ç§æ ¼å¼ï¼š 1234moment(String, String);moment(String, String, String);moment(String, String, Boolean);moment(String, String, String, Boolean); ç¬¬ä¸€ç§å·²çŸ¥æŸä¸ªæ—¶é—´çš„æ ¼å¼ï¼Œå°†æ ¼å¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ 1moment(&#x27;12-25-1995 12/43/53&#x27;, &#x27;MM-DD-YYYY HH/mm/ss&#x27;) æ ¼å¼å­—æ¯ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹è¡¨ Input Example Description YYYY 2014 4ä½æ•°å¹´ä»½ YY 14 2ä½æ•°å¹´ä»½ Q 1..4 å­£åº¦ï¼Œå°†æœˆä»½è®¾ç½®æˆå­£åº¦çš„ç¬¬ä¸€ä¸ªæœˆ M MM 1..12 æœˆä»½ MMM MMMM Jan..December æœˆä»½åç§° D DD 1..31 ä¸€ä¸ªæœˆçš„ç¬¬å‡ å¤© DDD DDDD 1..365 ä¸€å¹´çš„ç¬¬å‡ å¤© H HH 0..23 24å°æ—¶åˆ¶ h hh 1..12 12å°æ—¶åˆ¶ m mm 0..59 åˆ†é’Ÿ s ss 0..59 ç§’ ç¬¬äºŒç§ï¼Œå¯ä»¥å°†å½“åœ°åŒºåŸŸçš„å…³é”®ç¬¦ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ã€‚ 12moment(&#x27;2012 juillet&#x27;, &#x27;YYYY MMM&#x27;, &#x27;fr&#x27;);moment(&#x27;2012 July&#x27;, &#x27;YYYY MMM&#x27;, &#x27;en&#x27;); MomentJSçš„åŒ¹é…æ¨¡å¼æ˜¯ååˆ†å®½æ¾çš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›æˆ‘ä»¬ä¸æƒ³è¦çš„è¡Œä¸ºã€‚ä»2.3.0ç‰ˆæœ¬å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æœ€åä¼ å…¥ä¸€ä¸ªå¸ƒå°”å€¼æ¥è®©Momentä½¿ç”¨ä¸¥æ ¼æ¨¡å¼åŒ¹é…ã€‚ä¸¥æ ¼æ¨¡å¼è¦æ±‚è¾“å…¥çš„å­—ç¬¦ä¸²å’Œæ ¼å¼è¦å®Œå…¨ç›¸åŒã€‚ 123moment(&#x27;It is 2012-05-25&#x27;, &#x27;YYYY-MM-DD&#x27;).isValid(); // truemoment(&#x27;It is 2012-05-25&#x27;, &#x27;YYYY-MM-DD&#x27;, true).isValid(); // falsemoment(&#x27;2012-05-25&#x27;, &#x27;YYYY-MM-DD&#x27;, true).isValid(); // true å­—ç¬¦ä¸²+å¤šæ ¼å¼ å‡å¦‚ä½ ä¸çŸ¥é“è¾“å…¥çš„å­—ç¬¦ä¸²ç¡®åˆ‡æ˜¯ç”¨çš„å“ªç§æ ¼å¼ï¼Œä½†æ˜¯çŸ¥é“æ˜¯æŸäº›æ ¼å¼ä¸­çš„ä¸€ç§ï¼Œå¯ä»¥å°†å¤šç§æ ¼å¼ç”¨æ•°ç»„çš„å½¢å¼ä¼ å…¥ï¼Œå°†ä¼šä»¥æœ€å…ˆåŒ¹é…åˆ°çš„æ ¼å¼ä¸ºè¾“å‡ºç»“æœã€‚ 1moment(&quot;12-25-1995&quot;, [&quot;MM-DD-YYYY&quot;, &quot;YYYY-MM-DD&quot;]); å¯¹è±¡ æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼æ¥åˆ›å»ºmomentå¯¹è±¡ï¼Œä¼ å…¥çš„å¯¹è±¡ä¸­åŒ…æ‹¬ä¸€äº›æ—¶é—´å•ä½çš„å±æ€§ã€‚ 1234moment(&#123; y :2010, M :3, d :5, h :15, m :10, s :3, ms :123&#125;);moment(&#123; year :2010, month :3, day :5, hour :15, minute :10, second :3, millisecond :123&#125;);moment(&#123; years:2010, months:3, days:5, hours:15, minutes:10, seconds:3, milliseconds:123&#125;);moment(&#123; years:2010, months:3, date:5, hours:15, minutes:10, seconds:3, milliseconds:123&#125;); ä¸Šé¢ä»£ç ä¸­çš„dayå’Œdateéƒ½è¡¨ç¤ºå½“å‰æœˆçš„ç¬¬å‡ å¤©ã€‚ Date å¯¹è±¡ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¼ å…¥JSåŸç”Ÿçš„Dateå¯¹è±¡æ¥åˆ›å»ºmomentå¯¹è±¡ã€‚ 12var day = new Date(2011, 9, 16);var dayWrapper = moment(day); æ•°ç»„ æˆ‘ä»¬å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•°å­—çš„æ•°ç»„æ¥åˆ›å»ºmomentå¯¹è±¡ï¼Œæ•°ç»„ä¸­æ¯ä¸ªæ¯ä¸ªæ•°å­—ä»£è¡¨çš„å«ä¹‰å¦‚ä¸‹ï¼š 123// [å¹´, æœˆ, æ—¥, æ—¶, åˆ†, ç§’, æ¯«ç§’]moment([2010, 1, 14, 15, 25, 50, 125]);//2010å¹´2æœˆ14æ—¥15æ—¶25åˆ†50ç§’125æ¯«ç§’ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šæ•°ç»„ä¸­çš„æœˆã€æ—¶ã€åˆ†ã€ç§’ã€æ¯«ç§’éƒ½æ˜¯ä»0å¼€å§‹çš„ï¼Œè€Œå¹´å’Œæ—¥éƒ½æ˜¯ä»1å¼€å§‹çš„ã€‚ å–å€¼andèµ‹å€¼ MomentJSä½¿ç”¨å¯ä»¥é‡è½½çš„getå’Œsetæ–¹æ³•ï¼Œè·Ÿæˆ‘ä»¬ä»¥å‰åœ¨jQueryä¸­çš„å½¢å¼å¾ˆç›¸ä¼¼ã€‚æˆ‘ä»¬å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•ä¸ä¼ å‚æ•°ä½œæ¥è·å–ï¼Œä¼ å…¥å‚æ•°ä½œæ¥è®¾ç½®ã€‚ è‡ªå¸¦å‡½æ•°è·å–æˆ–è€…è®¾ç½®æ¯«ç§’ï¼Œè®¾ç½®çš„èŒƒå›´0åˆ°999 1234moment().millisecond(Number);moment().millisecond(); // Numbermoment().milliseconds(Number);moment().milliseconds(); // Number è·å–æˆ–è€…è®¾ç½®ç§’ï¼Œè®¾ç½®çš„èŒƒå›´0åˆ°59 1234moment().second(Number);moment().second(); // Numbermoment().seconds(Number);moment().seconds(); // Number è·å–æˆ–è€…è®¾ç½®åˆ†é’Ÿï¼Œè®¾ç½®çš„èŒƒå›´0åˆ°59 1234moment().minute(Number);moment().minute(); // Numbermoment().minutes(Number);moment().minutes(); // Number è·å–æˆ–è€…è®¾ç½®å°æ—¶ï¼Œè®¾ç½®çš„èŒƒå›´0åˆ°23 1234moment().hour(Number);moment().hour(); // Numbermoment().hours(Number);moment().hours(); // Number è·å–æˆ–è€…è®¾ç½®æ—¥æœŸï¼Œè®¾ç½®çš„èŒƒå›´1åˆ°31 1234moment().date(Number);moment().date(); // Numbermoment().dates(Number);moment().dates(); // Number è·å–æˆ–è€…è®¾ç½®æ˜ŸæœŸï¼Œè®¾ç½®çš„èŒƒå›´0ï¼ˆå‘¨æ—¥ï¼‰åˆ°6ï¼ˆå‘¨å…­ï¼‰ 1234moment().day(Number|String);moment().day(); // Numbermoment().days(Number|String);moment().days(); // Number è·å–æˆ–è€…è®¾ç½®ä¸€å¹´ä¸­çš„å¤©æ•°ï¼Œè®¾ç½®çš„èŒƒå›´1åˆ°366 12moment().dayOfYear(Number);moment().dayOfYear(); // Number è·å–æˆ–è€…è®¾ç½®ä¸€å¹´ä¸­çš„å‘¨ 1234moment().week(Number);moment().week(); // Numbermoment().weeks(Number);moment().weeks(); // Number è·å–æˆ–è€…è®¾ç½®ä¸€å¹´ä¸­çš„æœˆä»½ï¼Œè®¾ç½®çš„èŒƒå›´0åˆ°11 1234moment().month(Number|String);moment().month(); // Numbermoment().months(Number|String);moment().months(); // Number è·å–æˆ–è€…è®¾ç½®å­£åº¦ï¼Œè®¾ç½®çš„èŒƒå›´1åˆ°4 12moment().quarter(); // Numbermoment().quarter(Number); è·å–æˆ–è€…è®¾ç½®å¹´ï¼Œè®¾ç½®çš„èŒƒå›´-270000åˆ°270000 1234moment().year(Number);moment().year(); // Numbermoment().years(Number);moment().years(); // Number å–å€¼andèµ‹å€¼å‡½æ•° é™¤äº†ä¸Šé¢çš„è¿™ä¹ˆå¤šå‡½æ•°å¤–ï¼ŒMomentJSè¿˜æœ‰ä¸€ä¸ªç”¨æ¥ç»Ÿä¸€å–å€¼å’Œèµ‹å€¼çš„å‡½æ•°ï¼Œgetå’Œsetã€‚ 1234567moment().get(&#x27;year&#x27;);moment().get(&#x27;month&#x27;); // 0 to 11moment().get(&#x27;date&#x27;);moment().get(&#x27;hour&#x27;);moment().get(&#x27;minute&#x27;);moment().get(&#x27;second&#x27;);moment().get(&#x27;millisecond&#x27;); setå‡½æ•°æ¥æ”¶å•ä½ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå•ä½çš„å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚å¦‚æœè¦è®¾ç½®å¤šä¸ªå€¼çš„è¯ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ã€‚ 123456789moment().set(&#x27;year&#x27;, 2013);moment().set(&#x27;month&#x27;, 3); //å››æœˆmoment().set(&#x27;date&#x27;, 1);moment().set(&#x27;hour&#x27;, 13);moment().set(&#x27;minute&#x27;, 20);moment().set(&#x27;second&#x27;, 30);moment().set(&#x27;millisecond&#x27;, 123);moment().set(&#123;&#x27;year&#x27;: 2013, &#x27;month&#x27;: 3&#125;); max/minå‡½æ•° maxå‡½æ•°å¯ä»¥è¿”å›ç»™å®šçš„momentå¯¹è±¡ä¸­æœ€å¤§çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æœ€é è¿‘æœªæ¥çš„å®ä¾‹ã€‚ 123var a = moment(&#x27;2017-12-01&#x27;);var b = moment(&#x27;2017-12-06&#x27;);moment.max(a, b); // b minå‡½æ•°å¯ä»¥è¿”å›ç»™å®šçš„momentå¯¹è±¡ä¸­æœ€å°çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯æœ€é è¿‘è¿‡å»çš„å®ä¾‹ã€‚ 123var a = moment(&#x27;2017-12-01&#x27;);var b = moment(&#x27;2017-12-06&#x27;);moment.min(a, b); // a æ“ä½œ æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ—¶é—´è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œæœ€å¸¸è§çš„å°±æ˜¯åŠ å‡è®¡ç®—ã€‚MomentJSæä¾›äº†å¾ˆå¤šæ–¹æ³•ç»™æˆ‘ä»¬æ¥è¿›è¡Œè°ƒç”¨ã€‚ MomentJSä½¿ç”¨çš„æ¨¡å¼è·ŸjQueryç›¸ä¼¼ï¼Œéƒ½æ˜¯ä½¿ç”¨çš„å‡½æ•°çš„é“¾å¼è°ƒç”¨ï¼Œå¯ä»¥è®©æˆ‘ä»¬å°†æ“ä½œé“¾å¼æ‰§è¡Œä¸‹å»ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567moment() .add(7, &#x27;days&#x27;) .subtract(1, &#x27;months&#x27;) .year(2009) .hours(0) .minutes(0) .seconds(0); addåŠ æ³• addå‡½æ•°è®©æˆ‘ä»¬æŠŠMomentå¯¹è±¡çš„æ—¶é—´å¾€åé€€ï¼Œå®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š 123moment().add(Number, String);moment().add(Duration);moment().add(Object); æˆ‘ä»¬å¯ä»¥ä¼ å…¥æƒ³è¦çš„å¢åŠ çš„æ—¶é—´æ•°é‡å’Œæ—¶é—´å•ä½ï¼Œæ¯”å¦‚è¦å¾€åæ¨è¿Ÿ7å¤©ï¼š 1moment().add(7, &#x27;days&#x27;); å½“ç„¶ï¼Œaddå‡½æ•°ä¹Ÿå…è®¸æˆ‘ä»¬æä¾›æ—¶é—´å•ä½çš„ç¼©å†™ï¼š 1moment().add(7, &#x27;d&#x27;); æ—¶é—´å•ä½ ç¼©å†™ years y quarters Q months M weeks W days d hours h minutes m seconds s milliseconds ms å¦‚æœæƒ³è¦åŒæ—¶å¢åŠ ä¸åŒæ—¶é—´å•ä½ï¼Œå¯ä»¥ä»¥å¯¹è±¡çš„å½¢å¼ä¼ å…¥ï¼š 12moment().add(7, &#x27;days&#x27;).add(1, &#x27;months&#x27;);moment().add(&#123;days:7,months:1&#125;); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåŸå§‹æ—¥æœŸçš„å¤©æ•°æ¯”æ–°å¢åçš„æ—¥æœŸçš„æœˆä»½çš„æ€»å¤©æ•°è¿˜è¦å¤šï¼Œå°±å˜ä¸ºè¯¥æœˆçš„æœ€åä¸€å¤©ï¼š 123456// 01-31moment([2010, 0, 31]); // 02-28 moment([2010, 0, 31]).add(1, &#x27;months&#x27;); //2æœˆä»½æ²¡æœ‰31å·ï¼Œè‡ªåŠ¨å˜ä¸ºæœ€åä¸€å¤©ï¼Œå³28å· subtractå‡æ³• subtractå‡½æ•°çš„ç”¨æ³•å’Œaddç›¸ä¼¼ï¼Œä¸åŒçš„æ˜¯æŠŠæ—¶é—´å¾€å‰æ¨ã€‚ 123moment().subtract(Number, String);moment().subtract(Duration);moment().subtract(Object); startOfå¼€å§‹æ—¶é—´ startOfå‡½æ•°å°†Momentå¯¹è±¡çš„æ—¶é—´è®¾ç½®ä¸ºä¼ å…¥å•ä½çš„å¼€å§‹æ—¶é—´ã€‚ 12345678910moment() //å½“å‰æ—¶é—´2017-12-09moment().startOf(&#x27;year&#x27;); //ä»Šå¹´å¹´åˆ2017-01-01moment().startOf(&#x27;month&#x27;); //è¿™ä¸ªæœˆå¼€å§‹2017-12-01moment().startOf(&#x27;quarter&#x27;);//è¿™ä¸ªå­£åº¦å¼€å§‹2017-10-01moment().startOf(&#x27;week&#x27;); //è¿™å‘¨å¼€å§‹2017-12-03ï¼ˆå‘¨æ—¥ä¸ºå¼€å§‹ï¼‰moment().startOf(&#x27;isoWeek&#x27;);//è¿™å‘¨å¼€å§‹2017-12-04ï¼ˆæ ¹æ®ISO 8601ï¼Œå‘¨ä¸€ä¸ºå¼€å§‹ï¼‰moment().startOf(&#x27;day&#x27;); //ä»Šå¤©çš„å¼€å§‹æ—¶é—´2017-12-09 00:00:00:000moment().startOf(&#x27;hour&#x27;); //ä»Šå¤©å½“å‰å°æ—¶å¼€å§‹2017-12-09 13:00:00:000moment().startOf(&#x27;minute&#x27;); //ä»Šå¤©å½“å‰åˆ†é’Ÿå¼€å§‹2017-12-09 13:14:00:000moment().startOf(&#x27;second&#x27;); //ä»Šå¤©å½“å‰ç§’é’Ÿå¼€å§‹2017-12-09 13:14:15:000 endOfç»“æŸæ—¶é—´ endOfå‡½æ•°å°†Momentå¯¹è±¡çš„æ—¶é—´è®¾ç½®ä¸ºä¼ å…¥å•ä½çš„ç»“æŸæ—¶é—´ã€‚ä½¿ç”¨æ–¹å¼å’ŒstartOfç›¸ä¼¼ã€‚ 1moment().endOf(String); æ˜¾ç¤º å½“æˆ‘ä»¬è§£æå’Œæ“ä½œå®ŒMomentå¯¹è±¡åï¼Œæˆ‘ä»¬å°±éœ€è¦å¯¹æœ€åçš„ç»“æœè¿›è¡Œå±•ç¤ºã€‚ formatæ ¼å¼åŒ– formatå‡½æ•°æ¥æ”¶tokenå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”å°†tokenæ›¿æ¢æˆå¯¹åº”çš„å€¼ã€‚ 123moment().format(); // &quot;2014-09-08T08:02:17-05:00&quot; (ISO 8601)moment().format(&quot;dddd, MMMM Do YYYY, h:mm:ss a&quot;); // &quot;Sunday, February 14th 2010, 3:25:50 pm&quot;moment().format(&quot;ddd, hA&quot;); // &quot;Sun, 3PM&quot; å¯¹åº”çš„å…³ç³»å¦‚ä¸‹è¡¨ï¼š - Token è¾“å…¥ æœˆ M 1 2 .. 11 12 Mo 1st 2nd â€¦ 11th 12th MM 01 02 â€¦ 11 12 MMM Jan Feb â€¦ Nov Dec MMMM January February â€¦ November December å­£åº¦ Q 1 2 3 4 æœˆä»½ä¸­çš„å¤© D 1 2 â€¦ 30 31 Do 1st 2nd â€¦ 30th 31st DD 01 02 â€¦ 30 31 å¹´ä»½ä¸­çš„å¤© DDD 1 2 â€¦ 365 366 DDDo st 2nd â€¦ 365th 366th DDDD 001 002 â€¦ 365 366 æ˜ŸæœŸä¸­çš„å¤© d 0 1 â€¦ 5 6 do 0th 1st â€¦ 5th 6th dd Su Mo â€¦ Fr Sa ddd Sun Mon â€¦ Fri Sat dddd Sunday Monday â€¦ Friday Saturday å¹´ä¸­çš„æ˜ŸæœŸ w 1 2 â€¦ 52 53 wo 1st 2nd â€¦ 52nd 53rd ww 01 02 â€¦ 52 53 å¹´ YY 70 71 â€¦ 29 30 YYYY 1970 1971 â€¦ 2029 2030 AM/PM A AM PM a am pm å°æ—¶ H 0 1 â€¦ 22 23 HH 00 01 â€¦ 22 23 h 1 2 â€¦ 11 12 hh 01 02 â€¦ 11 12 åˆ†é’Ÿ m 0 1 â€¦ 58 59 mm 00 01 â€¦ 58 59 ç§’ s 0 1 â€¦ 58 59 ss 00 01 â€¦ 58 59 æ¯«ç§’ ms 000 001 â€¦ 998 999 diffæ—¶å·® è¯­æ³• 123moment().diff(Moment|String|Number|Date|Array);moment().diff(Moment|String|Number|Date|Array, String);moment().diff(Moment|String|Number|Date|Array, String, Boolean); diffå‡½æ•°å¯ä»¥å¸®æˆ‘ä»¬è·å–åˆ°ä¸¤ä¸ªMomentå¯¹è±¡çš„æ—¶é—´å·®ï¼Œé»˜è®¤çš„å•ä½æ˜¯æ¯«ç§’ã€‚ 123var a = moment([2017, 12, 29]);var b = moment([2017, 12, 28]);a.diff(b) // 86400000 é™¤äº†å¾—åˆ°æ¯«ç§’ä¸ºå•ä½ï¼Œdiffå‡½æ•°è¿˜æ”¯æŒè·å–å…¶ä»–çš„æ—¶é—´å•ä½ï¼Œå°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ï¼š 123var a = moment([2007, 0, 29]);var b = moment([2007, 0, 28]);a.diff(b, &#x27;days&#x27;) // 1 æ”¯æŒçš„æµ‹é‡å•ä½æœ‰yearsã€monthsã€weeksã€daysã€hoursã€minutesã€secondså’Œmillisecondsã€‚é»˜è®¤è¿”å›çš„æ•°å€¼ä¼šå‘ä¸‹å–èˆï¼Œå»æ‰å°æ•°ã€‚å‡å¦‚æƒ³è¦ç²¾ç¡®ä¸€ç‚¹ï¼Œå¾—åˆ°å°æ•°ç±»å‹çš„æ•°å€¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªtrueã€‚ 1234var a = moment([2008, 6]);var b = moment([2007, 0]);a.diff(b, &#x27;years&#x27;); // 1a.diff(b, &#x27;years&#x27;, true); // 1.5 daysInMonthè·å–å½“å‰æœˆä»½çš„å¤©æ•° daysInMonthè·å–å½“å‰æœˆçš„æ€»å¤©æ•° 12moment(&quot;2012-02&quot;, &quot;YYYY-MM&quot;).daysInMonth() // 29moment(&quot;2012-01&quot;, &quot;YYYY-MM&quot;).daysInMonth() // 31 toDateè½¬ä¸ºDateå¯¹è±¡ å°†Momentå¯¹è±¡è½¬ä¸ºjsåŸç”Ÿçš„Dateå¯¹è±¡ toArrayè½¬ä¸ºæ•°ç»„ è¿”å›æ—¶é—´æ•°ç»„ï¼Œå’Œæ„é€ Momentå¯¹è±¡æ—¶ä¼ å…¥çš„æ•°ç»„ä»£è¡¨çš„å«ä¹‰ç›¸åŒã€‚ 1moment().toArray(); // [2017, 12, 9, 13, 40, 16, 154]; toObject å°†Momentå¯¹è±¡è½¬ä¸ºåŒ…å«å¹´æœˆæ—¥æ—¶åˆ†ç§’æ¯«ç§’çš„å¯¹è±¡ã€‚ 123456789moment().toObject() // &#123; // years: 2017 // months: 12 // date: 9, // hours: 13, // minutes: 40, // seconds: 18, // milliseconds: 600 // &#125; æŸ¥è¯¢ æŸ¥è¯¢æ“ä½œä¸»è¦ç”¨æ¥åˆ¤æ–­Momentæ˜¯å¦æ»¡è¶³æŸäº›æ¡ä»¶ã€‚ isBeforeæ˜¯å¦ä¹‹å‰12moment().isBefore(Moment|String|Number|Date|Array);moment().isBefore(Moment|String|Number|Date|Array, String); isBeforeåˆ¤æ–­ä¸€ä¸ªmomentå¯¹è±¡æ˜¯å¦åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¹‹å‰ã€‚ 1moment(&#x27;2010-10-20&#x27;).isBefore(&#x27;2010-10-21&#x27;); // true é»˜è®¤çš„æ¯”è¾ƒå•ä½æ˜¯æ¯«ç§’ï¼Œä½†æ˜¯å‡å¦‚æˆ‘ä»¬æƒ³è¦é™åˆ¶åˆ°å…¶ä»–çš„æ—¶é—´å•ä½ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ã€‚æ¥å—çš„å•ä½å’ŒstartOfæ”¯æŒçš„å•ä½ä¸€æ ·ã€‚ 123console.log(moment(&#x27;2017-11-03&#x27;).isBefore(&#x27;2017-11-06&#x27;))console.log(moment(&#x27;2017-11-03&#x27;).isBefore(&#x27;2017-11-06&#x27;, &#x27;year&#x27;))console.log(moment(&#x27;2017-11-03&#x27;).isBefore(&#x27;2018-11-06&#x27;, &#x27;year&#x27;)) isSameæ˜¯å¦ç›¸åŒ12moment().isSame(Moment|String|Number|Date|Array);moment().isSame(Moment|String|Number|Date|Array, String); isSameåˆ¤æ–­ä¸€ä¸ªmomentå¯¹è±¡æ˜¯å¦å’Œå¦ä¸€ä¸ªmomentå¯¹è±¡ç›¸åŒã€‚ 12moment(&#x27;2010-10-20&#x27;).isSame(&#x27;2010-10-20&#x27;); // truemoment(&#x27;2010-10-20&#x27;).isSame(&#x27;2010-10-21&#x27;); // false åŒæ ·çš„ï¼Œæˆ‘ä»¬å¦‚æœè¦å°†æ¯”è¾ƒçš„å•ä½æ”¹ä¸ºå…¶ä»–çš„ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ã€‚æ¥å—çš„å•ä½å’ŒstartOfæ”¯æŒçš„å•ä½ä¸€æ ·ã€‚ 12moment(&#x27;2010-10-20&#x27;).isSame(&#x27;2009-12-31&#x27;, &#x27;year&#x27;); // falsemoment(&#x27;2010-10-20&#x27;).isSame(&#x27;2010-01-01&#x27;, &#x27;year&#x27;); // true å½“ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°æ—¶ï¼Œå®ƒä¼šåŒ¹é…æ‰€æœ‰ç›¸åŒæˆ–è€…æ›´å¤§çš„å•ä½ã€‚æ¯”å¦‚ä¼ å…¥äº†æœˆä»½ï¼Œå°†ä¼šæ¯”è¾ƒå¹´å’Œæœˆï¼Œä¼ å…¥äº†æ—¥æœŸï¼Œå°†ä¼šæ¯”è¾ƒå¹´æœˆæ—¥ 12345// false, ä¸åŒçš„å¹´moment(&#x27;2010-01-01&#x27;).isSame(&#x27;2011-01-01&#x27;, &#x27;month&#x27;);// false, ä¸åŒçš„æœˆmoment(&#x27;2010-01-01&#x27;).isSame(&#x27;2010-02-01&#x27;, &#x27;day&#x27;); isAfteræ˜¯å¦ä¹‹å isBeforeåˆ¤æ–­ä¸€ä¸ªmomentå¯¹è±¡æ˜¯å¦åœ¨æŸä¸ªæ—¶é—´ç‚¹ä¹‹åã€‚æ¥å—çš„å•ä½å’ŒstartOfæ”¯æŒçš„å•ä½ä¸€æ ·ã€‚ 1moment(&#x27;2010-10-20&#x27;).isAfter(&#x27;2010-10-19&#x27;); // true isBetweenæ˜¯å¦ä¹‹é—´123moment().isBetween(moment-like, moment-like);moment().isBetween(moment-like, moment-like, String);//moment-like è¡¨ç¤º Moment|String|Number|Date|Array åˆ¤æ–­ä¸€ä¸ªmomentå¯¹è±¡æ˜¯å¦åœ¨ä¸¤ä¸ªå…¶ä»–æ—¶é—´ç‚¹ä¹‹é—´ã€‚ 1moment(&#x27;2017-10-20&#x27;).isBetween(&#x27;2017-10-19&#x27;, &#x27;2017-10-25&#x27;); // true ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºé™åˆ¶çš„å•ä½ã€‚æ¥å—çš„å•ä½å’ŒstartOfæ”¯æŒçš„å•ä½ä¸€æ ·ã€‚ 12moment(&#x27;2010-10-20&#x27;).isBetween(&#x27;2010-01-01&#x27;, &#x27;2012-01-01&#x27;, &#x27;year&#x27;); // falsemoment(&#x27;2010-10-20&#x27;).isBetween(&#x27;2009-12-31&#x27;, &#x27;2012-01-01&#x27;, &#x27;year&#x27;); // true isLeapYearæ˜¯å¦é—°å¹´ æ˜¯é—°å¹´å°±è¿”å›trueï¼Œä¸æ˜¯å°±è¿”å›falseã€‚ 123moment([2000]).isLeapYear() // truemoment([2001]).isLeapYear() // falsemoment([2100]).isLeapYear() // false isMoment æ˜¯å¦Momentå¯¹è±¡ åˆ¤æ–­æ˜¯å¦Momentå¯¹è±¡ 123moment.isMoment() // falsemoment.isMoment(new Date()) // falsemoment.isMoment(moment()) // true isDateæ˜¯å¦Dateå¯¹è±¡ åˆ¤æ–­æ˜¯å¦Dateå¯¹è±¡ 123moment.isDate(); // falsemoment.isDate(new Date()); // truemoment.isDate(moment()); // false","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"js","slug":"js","permalink":"https://xieyufei.com/tags/js/"}]},{"title":"Nodejsæ–‡ä»¶ä¸Šä¼ ","date":"2017-09-25T07:17:49.000Z","path":"2017/09/25/Nodejs-File-Upload.html","text":"ç¬”è€…ç”¨nodejsåšé¡¹ç›®æ—¶éœ€è¦ç”¨åˆ°æ–‡ä»¶ä¸Šä¼ çš„åŠŸèƒ½ï¼Œåœ¨ç½‘ä¸Šæœç´¢äº†å¾ˆå¤šæ•™ç¨‹ï¼Œæ‰¾åˆ°äº†ä¸€ä¸ªexpressçš„ä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç†multipart/form-dataç±»å‹çš„è¡¨å•æ•°æ®ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†è¡¨å•ä¸­çš„æ–‡ä»¶æ•°æ®ä¿å­˜åˆ°æœåŠ¡å™¨ã€‚ ä»‹ç» multeræ˜¯ä¸€ä¸ªnode.jsæ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶ï¼Œå®ƒæ˜¯åœ¨ busboyçš„åŸºç¡€ä¸Šå¼€å‘çš„ï¼Œä¸Šä¼ çš„è¡¨å•æ•°æ®å¿…é¡»æ˜¯multipart/form-dataç±»å‹ï¼Œä¸ç„¶ä¼šæŠ¥é”™ã€‚ ç®€å•çš„ç”¨æ³•å®šä¹‰å­˜å‚¨å™¨ Multerä½œä¸ºexpressçš„ä¸€ä¸ªä¸­é—´ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„è‡ªå®šä¹‰ä¸Šä¼ çš„æ–‡ä»¶ç›®å½•ä»¥åŠä¿å­˜çš„æ–‡ä»¶åã€‚å…ˆçœ‹ä¸€ä¸ªæœ€ç®€å•çš„ç”¨æ³•ï¼Œdemo1åœ°å€ï¼š 1234567891011121314151617var express = require(&#x27;express&#x27;);var multer = require(&#x27;multer&#x27;);var app = express();var upload = multer(&#123; storage: multer.diskStorage(&#123; destination: function (req, file, cb) &#123; cb(null, &#x27;./uploads/&#x27;); &#125;, filename: function (req, file, cb) &#123; //file.originalnameä¸Šä¼ æ–‡ä»¶çš„åŸå§‹æ–‡ä»¶å var changedName = (new Date().getTime())+&#x27;-&#x27;+file.originalname; cb(null, changedName); &#125; &#125;)&#125;); æˆ‘ä»¬å…ˆåˆ›å»ºäº†ä¸€ä¸ªuploadå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­destinationå‡½æ•°ç”¨æ¥å®šä¹‰ä¸Šä¼ æ–‡ä»¶çš„å­˜å‚¨çš„æ–‡ä»¶å¤¹ï¼›filenameå‡½æ•°ç”¨æ¥ä¿®æ”¹ä¸Šä¼ æ–‡ä»¶å­˜å‚¨åˆ°æœåŠ¡å™¨çš„æ–‡ä»¶åç§°ï¼Œè¿™é‡Œæˆ‘ä»¬æˆ‘ä»¬åŠ ä¸Šä¸€ä¸ªæ—¶é—´æˆ³ç®€å•åŒºåˆ†ä¸€ä¸‹ã€‚è¿™ä¸¤ä¸ªå‡½æ•°éƒ½æ˜¯é€šè¿‡å›è°ƒå‡½æ•°æ¥å®ç°çš„ã€‚æ¯æ¬¡ä¸Šä¼ çš„æ—¶å€™è¿™ä¸¤ä¸ªå‡½æ•°éƒ½ä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå¦‚æœæ˜¯å¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼Œé‚£ä¸ªè¿™ä¸¤ä¸ªå‡½æ•°å°±è°ƒç”¨å¤šæ¬¡ï¼Œè°ƒç”¨é¡ºåºæ˜¯å…ˆè°ƒç”¨destinationï¼Œç„¶åè°ƒç”¨filenameã€‚ åœ¨ä¸¤ä¸ªå‡½æ•°ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªfileå¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰ä¸Šä¼ çš„æ–‡ä»¶å¯¹è±¡ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼š fieldnameï¼šä¸Šä¼ çš„å­—æ®µå originalnameï¼šä¸Šä¼ çš„æ–‡ä»¶å encodingï¼šæ–‡ä»¶çš„ç¼–ç ç±»å‹ mimetypeï¼šæ–‡ä»¶çš„MIMEç±»å‹ é™„ï¼šä¸€äº›å¸¸ç”¨çš„MIMEç±»å‹ å®šä¹‰è·¯ç”±å›è°ƒ12345678910111213141516171819202122232425//å•ä¸ªæ–‡ä»¶ä¸Šä¼ app.post(&#x27;/upload/single&#x27;,upload.single(&#x27;singleFile&#x27;),(req,res)=&gt;&#123; console.log(req.file); res.json(&#123; code: &#x27;0000&#x27;, type:&#x27;single&#x27;, originalname: req.file.originalname &#125;)&#125;);//å¤šä¸ªæ–‡ä»¶ä¸Šä¼ app.post(&#x27;/upload/multer&#x27;,upload.array(&#x27;multerFile&#x27;),(req,res)=&gt;&#123; console.log(req.files); let fileList = []; req.files.map((elem)=&gt;&#123; fileList.push(&#123; originalname: elem.originalname &#125;) &#125;); res.json(&#123; code: &#x27;0000&#x27;, type:&#x27;multer&#x27;, fileList:fileList &#125;);&#125;); åœ¨expressä¸­å®šä¹‰è·¯ç”±çš„å›è°ƒå‡½æ•°æ—¶ï¼ŒæŠŠå®šä¹‰å¥½äº†çš„uploadå¯¹è±¡ä½œä¸ºä¸­é—´ä»¶æ·»åŠ è¿›å»ã€‚å¦‚æœæ˜¯å•ä¸ªæ–‡ä»¶å°±ç”¨singleæ–¹æ³•ï¼Œå¦‚æœæ˜¯å¤šä¸ªæ–‡ä»¶å°±ç”¨arrayæ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½éœ€è¦ä¼ ä¸€ä¸ªé¡µé¢ä¸Šå®šä¹‰å¥½çš„å­—æ®µåã€‚ åœ¨è·¯ç”±çš„å›è°ƒå‡½æ•°ä¸­ï¼Œrequestå¯¹è±¡å·²ç»æœ‰äº†fileå±æ€§ï¼ˆå•ä¸ªæ–‡ä»¶ä¸Šä¼ ï¼‰æˆ–fileså±æ€§ï¼ˆå¤šä¸ªæ–‡ä»¶ä¸Šä¼ ï¼‰ï¼Œfileså±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä»¥ä¸‹å±æ€§ï¼š fieldnameï¼šä¸Šä¼ çš„å­—æ®µå originalnameï¼šä¸Šä¼ çš„æ–‡ä»¶å encodingï¼šæ–‡ä»¶çš„ç¼–ç ç±»å‹ mimetypeï¼šæ–‡ä»¶çš„MIMEç±»å‹ destinationï¼šå­˜å‚¨çš„ç›®å½•ï¼ˆå’Œdestinationå›è°ƒå‡½æ•°ä¸­çš„ç›®å½•åä¸€è‡´ï¼‰ filenameï¼šä¿å­˜çš„æ–‡ä»¶åï¼ˆå’Œfilenameå›è°ƒå‡½æ•°ä¸­çš„æ–‡ä»¶åä¸€è‡´ï¼‰ pathï¼šä¿å­˜çš„ç›¸å¯¹è·¯å¾„ sizeï¼šæ–‡ä»¶çš„å¤§å°ï¼ˆå•ä½ï¼šå­—èŠ‚byteï¼‰ æˆ‘ä»¬å¯ä»¥å‘ç°åœ¨è·¯ç”±çš„å›è°ƒå‡½æ•°ä¸­çš„fileå¯¹è±¡æ¯”diskStorageä¸­çš„fileå¯¹è±¡å¤šäº†å‡ ä¸ªå±æ€§ï¼Œè¿™æ˜¯å› ä¸ºåœ¨diskStorageä¸­æ–‡ä»¶è¿˜æ²¡æœ‰ä¿å­˜ï¼Œåªèƒ½çŸ¥é“æ–‡ä»¶çš„å¤§è‡´å±æ€§ï¼›è€Œè·¯ç”±çš„å›è°ƒå‡½æ•°æ–‡ä»¶å·²ç»åœ¨æœåŠ¡å™¨ä¸Šä¿å­˜å¥½äº†ï¼Œæ–‡ä»¶çš„ä¿å­˜è·¯å¾„ä»¥åŠæ–‡ä»¶çš„å¤§å°éƒ½æ˜¯å·²çŸ¥çš„ã€‚ æ··åˆä¸Šä¼  æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦ç”¨å­—æ®µåæ¥å¯¹ä¸Šä¼ çš„æ–‡ä»¶è¿›è¡Œä¸€ä¸‹åˆ’åˆ†ï¼Œæ¯”å¦‚è¯´ä¸Šä¼ å¤šä¸ªå›¾ç‰‡çš„æ—¶å€™å¯èƒ½æœ‰èº«ä»½è¯è¿˜æœ‰å¤´åƒã€‚è™½ç„¶å¯ä»¥åˆ†å¼€æ”¾åˆ°ä¸¤ä¸ªæ¥å£ä¸­ï¼Œä½†æ˜¯ä¼šäº§ç”Ÿå…¶ä»–ä¸€ç³»åˆ—çš„éº»çƒ¦äº‹ã€‚multeræ”¯æŒå¯¹å›¾ç‰‡è¿›è¡Œå­—æ®µåçš„åˆ’åˆ†ã€‚demo3åœ°å€ 1234567891011121314151617181920212223242526272829303132333435//å¤šå­—æ®µåä¸Šä¼ let multipleFields = upload.fields([ &#123;name:&#x27;avatar&#x27;&#125;, &#123;name:&#x27;gallery&#x27;, maxCount:3&#125;,]);app.post(&#x27;/upload/fields&#x27;, (req,res)=&gt;&#123; multipleFields(req,res,(err) =&gt; &#123; console.log(req.files); if(!!err)&#123; console.log(err.message); res.json(&#123; code: &#x27;2000&#x27;, type: &#x27;field&#x27;, msg:err.message &#125;) return; &#125; var fileList = []; for(let item in req.files)&#123; var fieldItem = req.files[item]; fieldItem.map((elem) =&gt; &#123; fileList.push(&#123; fieldname: elem.fieldname, originalname: elem.originalname &#125;) &#125;); &#125; res.json(&#123; code: &#x27;0000&#x27;, type: &#x27;field&#x27;, fileList: fileList, msg:&#x27;&#x27; &#125;) &#125;);&#125;); åœ¨è¿™è¾¹ä¹Ÿæœ‰req.fileså±æ€§ï¼Œä½†æ˜¯è¿™ä¸ªå±æ€§å¹¶ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œæ˜¯ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æœ‰å¤šä¸ªå±æ€§ï¼Œæ¯ä¸ªå±æ€§åéƒ½æ˜¯ä¸€ä¸ªå­—æ®µåï¼Œæ¯ä¸ªå±æ€§ä¸‹é¢åˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸‹é¢æ‰æ˜¯ä¸€ä¸ªä¸ªçš„æ–‡ä»¶å¯¹è±¡ï¼Œç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š 123456789101112&#123; &quot;avatar&quot;:[&#123; fieldname: &quot;&quot;, originalname: &quot;&quot; //... &#125;], &quot;gallery&quot;:[&#123; fieldname: &quot;&quot;, originalname: &quot;&quot; //... &#125;]&#125; è¿‡æ»¤æ–‡ä»¶ä¸Šä¼  åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œæœ‰æ—¶å€™ä¼šä¸Šä¼ ä¸€äº›æˆ‘ä»¬ä¸éœ€è¦çš„æ–‡ä»¶ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¸€äº›ä¸éœ€è¦çš„æ–‡ä»¶ç»™è¿‡æ»¤æ‰ã€‚demo2åœ°å€ã€‚ æ–‡ä»¶ç±»å‹è¿‡æ»¤12345678910var upload = multer(&#123; //...å…¶ä»–ä»£ç  fileFilter: function(req, file, cb)&#123; if(file.mimetype == &#x27;image/png&#x27;)&#123; cb(null, true) &#125; else &#123; cb(null, false) &#125; &#125;&#125;); åœ¨å®šä¹‰å­˜å‚¨å™¨çš„æ—¶å€™ï¼Œæ–°å¢ä¸€ä¸ªfileFilterå‡½æ•°ï¼Œç”¨æ¥è¿‡æ»¤æ‰æˆ‘ä»¬ä¸éœ€è¦çš„æ–‡ä»¶ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­æˆ‘ä»¬ä¼ å…¥true/falseæ¥ä»£è¡¨æ˜¯å¦è¦ä¿å­˜ï¼›å¦‚æœä¼ äº†falseï¼Œé‚£ä¹ˆdestinationå‡½æ•°å’Œfilenameå‡½æ•°ä¹Ÿä¸ä¼šè°ƒç”¨äº†ã€‚ æ–‡ä»¶å¤§å°å’Œæ•°é‡è¿‡æ»¤123456789var upload = multer(&#123; //...å…¶ä»–ä»£ç  limits:&#123; //é™åˆ¶æ–‡ä»¶å¤§å°10kb fileSize: 10*1000, //é™åˆ¶æ–‡ä»¶æ•°é‡ files: 5 &#125;&#125;); åœ¨å®šä¹‰å­˜å‚¨å™¨çš„æ—¶å€™ï¼Œæ–°å¢ä¸€ä¸ªlimitså¯¹è±¡ï¼Œç”¨æ¥æ§åˆ¶ä¸Šä¼ çš„ä¸€äº›ä¿¡æ¯ï¼Œå®ƒæœ‰ä»¥ä¸‹ä¸€äº›å±æ€§ï¼š fieldNameSizeï¼šfield åå­—æœ€å¤§é•¿åº¦ï¼Œé»˜è®¤å€¼ï¼š100 bytes fieldSizeï¼šfield å€¼çš„æœ€å¤§é•¿åº¦ï¼Œé»˜è®¤å€¼ï¼š1MB fieldsï¼šéæ–‡ä»¶ field çš„æœ€å¤§æ•°é‡ fileSizeï¼šåœ¨multipartè¡¨å•ä¸­, æ–‡ä»¶æœ€å¤§é•¿åº¦ (å­—èŠ‚å•ä½) filesï¼šåœ¨multipartè¡¨å•ä¸­, æ–‡ä»¶æœ€å¤§æ•°é‡ partsï¼šåœ¨multipartè¡¨å•ä¸­, partä¼ è¾“çš„æœ€å¤§æ•°é‡(fields + files) åœ¨è¿™è¾¹æˆ‘ä»¬æŠŠfileSizeçš„å€¼è®¾ç½®å¾—å°ä¸€ç‚¹ï¼Œè®¾ä¸º10kbæ–¹ä¾¿æµ‹è¯•çœ‹æ•ˆæœï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ—¶å€™ä¼šå‘ç°æœ‰æŠ¥é”™ã€‚å› ä¸ºä¸Šä¼ çš„æ–‡ä»¶å¤§å°å¾ˆå®¹æ˜“å°±ä¼šè¶…è¿‡10KBï¼Œå¯¼è‡´æœ‰æŠ¥é”™å‡ºç°ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨è·¯ç”±å›è°ƒé‡Œå¯¹é”™è¯¯çš„æƒ…å†µè¿›è¡Œæ•è·ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758//å•ä¸ªæ–‡ä»¶ä¸Šä¼ let singleUpload = upload.single(&#x27;singleFile&#x27;);app.post(&#x27;/upload/single&#x27;,(req,res)=&gt;&#123; singleUpload(req,res,(err)=&gt;&#123; if(!!err)&#123; console.log(err.message) res.json(&#123; code: &#x27;2000&#x27;, type:&#x27;single&#x27;, originalname: &#x27;&#x27;, msg: err.message &#125;) return; &#125; if(!!req.file)&#123; res.json(&#123; code: &#x27;0000&#x27;, type:&#x27;single&#x27;, originalname: req.file.originalname, msg: &#x27;&#x27; &#125;) &#125; else &#123; res.json(&#123; code: &#x27;1000&#x27;, type:&#x27;single&#x27;, originalname: &#x27;&#x27;, msg: &#x27;&#x27; &#125;) &#125; &#125;);&#125;);//å¤šä¸ªæ–‡ä»¶ä¸Šä¼ let multerUpload = upload.array(&#x27;multerFile&#x27;);app.post(&#x27;/upload/multer&#x27;, (req,res)=&gt;&#123; multerUpload(req,res,(err)=&gt;&#123; if(!!err)&#123; res.json(&#123; code: &#x27;2000&#x27;, type:&#x27;multer&#x27;, fileList:[], msg: err.message &#125;); &#125; let fileList = []; req.files.map((elem)=&gt;&#123; fileList.push(&#123; originalname: elem.originalname &#125;) &#125;); res.json(&#123; code: &#x27;0000&#x27;, type:&#x27;multer&#x27;, fileList:fileList, msg:&#x27;&#x27; &#125;); &#125;);&#125;); æ‰€æœ‰çš„demoä»£ç éƒ½åœ¨è¿™ä¸ªä»“åº“é‡Œ","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"}]},{"title":"Gitå­¦ä¹ ","date":"2017-09-11T01:48:00.000Z","path":"2017/09/11/Git-Learning.html","text":"å¯¹Gitçš„å‘½ä»¤å’Œç†è§£è¿›è¡Œæ›´æ·±å±‚æ¬¡çš„å‰–æã€‚åˆ†æ”¯ç®¡ç†æ˜¯Gitçš„ä¸€ä¸ªç‰¹è‰²ï¼ŒåŒæ—¶ä¹Ÿæ˜¯Gitçš„ä¸€ä¸ªéš¾ç‚¹ï¼Œä½†æ˜¯ç”¨å¥½äº†åˆ†æ”¯ç®¡ç†å¯¹æˆ‘ä»¬çš„é¡¹ç›®å¼€å‘ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚ ä¸€ã€Gitä»€ä¹ˆæ˜¯Gitã€‚ç™¾åº¦ç™¾ç§‘çš„è§£é‡Šï¼š åˆ†å¸ƒå¼VSé›†ä¸­å¼é‚£åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæœ‰ä½•ä¸åŒå‘¢ï¼Ÿé¦–å…ˆï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿæ ¹æœ¬æ²¡æœ‰â€œä¸­å¤®æœåŠ¡å™¨â€ï¼Œæ¯ä¸ªäººçš„ç”µè„‘ä¸Šéƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œè¿™æ ·ï¼Œä½ å·¥ä½œçš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦è”ç½‘äº†ï¼Œå› ä¸ºç‰ˆæœ¬åº“å°±åœ¨ä½ è‡ªå·±çš„ç”µè„‘ä¸Šã€‚æ—¢ç„¶æ¯ä¸ªäººç”µè„‘ä¸Šéƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„ç‰ˆæœ¬åº“ï¼Œé‚£å¤šä¸ªäººå¦‚ä½•åä½œå‘¢ï¼Ÿæ¯”æ–¹è¯´ä½ åœ¨è‡ªå·±ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œä½ çš„åŒäº‹ä¹Ÿåœ¨ä»–çš„ç”µè„‘ä¸Šæ”¹äº†æ–‡ä»¶Aï¼Œè¿™æ—¶ï¼Œä½ ä»¬ä¿©ä¹‹é—´åªéœ€æŠŠå„è‡ªçš„ä¿®æ”¹æ¨é€ç»™å¯¹æ–¹ï¼Œå°±å¯ä»¥äº’ç›¸çœ‹åˆ°å¯¹æ–¹çš„ä¿®æ”¹äº†ã€‚ å’Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç›¸æ¯”ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„å®‰å…¨æ€§è¦é«˜å¾ˆå¤šï¼Œå› ä¸ºæ¯ä¸ªäººç”µè„‘é‡Œéƒ½æœ‰å®Œæ•´çš„ç‰ˆæœ¬åº“ï¼ŒæŸä¸€ä¸ªäººçš„ç”µè„‘åæ‰äº†ä¸è¦ç´§ï¼Œéšä¾¿ä»å…¶ä»–äººé‚£é‡Œå¤åˆ¶ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚è€Œé›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„ä¸­å¤®æœåŠ¡å™¨è¦æ˜¯å‡ºäº†é—®é¢˜ï¼Œæ‰€æœ‰äººéƒ½æ²¡æ³•å¹²æ´»äº†ã€‚ åœ¨å®é™…ä½¿ç”¨åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„æ—¶å€™ï¼Œå…¶å®å¾ˆå°‘åœ¨ä¸¤äººä¹‹é—´çš„ç”µè„‘ä¸Šæ¨é€ç‰ˆæœ¬åº“çš„ä¿®æ”¹ï¼Œå› ä¸ºå¯èƒ½ä½ ä»¬ä¿©ä¸åœ¨ä¸€ä¸ªå±€åŸŸç½‘å†…ï¼Œä¸¤å°ç”µè„‘äº’ç›¸è®¿é—®ä¸äº†ï¼Œä¹Ÿå¯èƒ½ä»Šå¤©ä½ çš„åŒäº‹ç—…äº†ï¼Œä»–çš„ç”µè„‘å‹æ ¹æ²¡æœ‰å¼€æœºã€‚å› æ­¤ï¼Œåˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé€šå¸¸ä¹Ÿæœ‰ä¸€å°å……å½“â€œä¸­å¤®æœåŠ¡å™¨â€çš„ç”µè„‘ï¼Œä½†è¿™ä¸ªæœåŠ¡å™¨çš„ä½œç”¨ä»…ä»…æ˜¯ç”¨æ¥æ–¹ä¾¿â€œäº¤æ¢â€å¤§å®¶çš„ä¿®æ”¹ï¼Œæ²¡æœ‰å®ƒå¤§å®¶ä¹Ÿä¸€æ ·å¹²æ´»ï¼Œåªæ˜¯äº¤æ¢ä¿®æ”¹ä¸æ–¹ä¾¿è€Œå·²ã€‚ äºŒã€æ¦‚å¿µç†è§£ç‰ˆæœ¬åº“ä»€ä¹ˆæ˜¯ç‰ˆæœ¬åº“ï¼Ÿç‰ˆæœ¬åº“åˆåä»“åº“ï¼Œè‹±æ–‡årepository,ä½ å¯ä»¥ç®€å•çš„ç†è§£ä¸€ä¸ªç›®å½•ï¼Œè¿™ä¸ªç›®å½•é‡Œé¢çš„æ‰€æœ‰æ–‡ä»¶éƒ½å¯ä»¥è¢«Gitç®¡ç†èµ·æ¥ï¼Œæ¯ä¸ªæ–‡ä»¶çš„ä¿®æ”¹ï¼Œåˆ é™¤ï¼ŒGitéƒ½èƒ½è·Ÿè¸ªï¼Œä»¥ä¾¿ä»»ä½•æ—¶åˆ»éƒ½å¯ä»¥è¿½è¸ªå†å²ï¼Œæˆ–è€…åœ¨å°†æ¥æŸä¸ªæ—¶åˆ»è¿˜å¯ä»¥å°†æ–‡ä»¶â€è¿˜åŸâ€ã€‚git cloneå‘½ä»¤ä¼šæŠŠé¡¹ç›®çš„ç‰ˆæœ¬åº“ä¸€èµ·å…‹éš†åˆ°æœ¬åœ°ï¼Œå°±æ˜¯.gitç›®å½•ï¼Œè¿™ä¸ªç›®å½•æ˜¯Gitæ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬çš„ï¼Œæ²¡äº‹åƒä¸‡ä¸è¦æ‰‹åŠ¨ä¹±æ”¹è¿™ä¸ªç›®å½•é‡Œé¢çš„æ–‡ä»¶ï¼Œå¦åˆ™ï¼Œä¼šæŠŠgitä»“åº“ç»™ç ´åäº†ã€‚ å·¥ä½œåŒºå’Œæš‚å­˜åŒºå·¥ä½œåŒºï¼šå°±æ˜¯åœ¨ç”µè„‘é‡Œèƒ½çœ‹åˆ°çš„ç›®å½•ï¼Œæ¯”å¦‚react-stageç›®å½•å°±æ˜¯ä¸€ä¸ªå·¥ä½œåŒºæš‚å­˜åŒºï¼šåœ¨ç‰ˆæœ¬åº“ä¸­ã€‚ ä¸‰ã€ä¸€äº›å¸¸ç”¨å‘½ä»¤æäº¤ä¿®æ”¹1234git pull * ä»è¿œç¨‹ä»“åº“æ‹‰å–git add . * å°†æ–‡ä»¶æ·»åŠ åˆ°æš‚å­˜åŒºgit commit -m &#x27;è¯´æ˜&#x27; * å°†æš‚å­˜åŒºçš„ä¿®æ”¹æäº¤åˆ°å½“å‰åˆ†æ”¯git push * æ¨é€åˆ°è¿œç¨‹ä»“åº“ æŸ¥çœ‹å½“å‰çŠ¶æ€1git status ç”¨æ¥æŸ¥çœ‹å½“å‰å·¥ä½œåŒºå’Œæš‚å­˜åŒºçš„çŠ¶æ€ã€‚å¯ä»¥åŠ -sæŸ¥çœ‹çŠ¶æ€çš„ç®€å†™å½¢å¼ã€‚ 1git status -s 1.é¢œè‰²åŒºåˆ†ï¼šçº¢è‰²è¡¨ç¤ºåœ¨å·¥ä½œåŒºï¼Œç»¿è‰²è¡¨ç¤ºåœ¨æš‚å­˜åŒºã€‚ 2.å­—ç¬¦åŒºåˆ†ï¼š ?? è¡¨ç¤ºæ–°å»ºçš„ä¸åœ¨ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶ M è¡¨ç¤ºä¿®æ”¹æ–‡ä»¶(Modify) A è¡¨ç¤ºæ·»åŠ æ–‡ä»¶åè¿½è¸ªäº†è¯¥æ–‡ä»¶(Add) D è¡¨ç¤ºåˆ é™¤æ–‡ä»¶(Delete) æŸ¥çœ‹ä¿®æ”¹æŸ¥çœ‹å·¥ä½œåŒºçš„ä¿®æ”¹ 1git diff [filename] æŸ¥çœ‹æ—¥å¿—æŸ¥çœ‹ä»è¿‘åˆ°è¿œçš„æ—¥å¿—ä¿¡æ¯ã€‚ 1git log å¦‚æœè§‰å¾—ä¿¡æ¯å¤ªå¤šï¼Œå¯ä»¥æ·»åŠ --pretty=onelineæŸ¥çœ‹ç¼©ç•¥ä¿¡æ¯ 1git log --pretty=oneline æ’¤é”€ä¿®æ”¹1ã€æ’¤é”€å·¥ä½œåŒºä¿®æ”¹ 1git checkout [filename] 2ã€æ’¤é”€åˆ†æ”¯ä¸Šçš„ä¿®æ”¹ 1git reset --hard [LogId] å››ã€åˆ†æ”¯ç®¡ç†ä¸ºäº†ç†è§£Gitåˆ†æ”¯çš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦å›é¡¾ä¸€ä¸‹Gitæ˜¯å¦‚ä½•å‚¨å­˜æ•°æ®çš„ã€‚Gitä¿å­˜çš„ä¸æ˜¯æ–‡ä»¶å·®å¼‚æˆ–è€…å˜åŒ–é‡ï¼Œè€Œåªæ˜¯ä¸€ç³»åˆ—æ–‡ä»¶å¿«ç…§ã€‚ å½“ä½¿ç”¨git commitæ–°å»ºä¸€ä¸ªæäº¤å¯¹è±¡å‰ï¼ŒGitä¼šå…ˆè®¡ç®—æ¯ä¸€ä¸ªå­ç›®å½•ï¼ˆæœ¬ä¾‹ä¸­å°±æ˜¯é¡¹ç›®æ ¹ç›®å½•ï¼‰çš„æ ¡éªŒå’Œï¼Œç„¶ååœ¨ Git ä»“åº“ä¸­å°†è¿™äº›ç›®å½•ä¿å­˜ä¸ºæ ‘ï¼ˆtreeï¼‰å¯¹è±¡ã€‚ä¹‹å Git åˆ›å»ºçš„æäº¤å¯¹è±¡ï¼Œé™¤äº†åŒ…å«ç›¸å…³æäº¤ä¿¡æ¯ä»¥å¤–ï¼Œè¿˜åŒ…å«ç€æŒ‡å‘è¿™ä¸ªæ ‘å¯¹è±¡ï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰çš„æŒ‡é’ˆï¼Œå¦‚æ­¤å®ƒå°±å¯ä»¥åœ¨å°†æ¥éœ€è¦çš„æ—¶å€™ï¼Œé‡ç°æ­¤æ¬¡å¿«ç…§çš„å†…å®¹äº†ã€‚ Git ä¸­çš„åˆ†æ”¯ï¼Œå…¶å®æœ¬è´¨ä¸Šä»…ä»…æ˜¯ä¸ªæŒ‡å‘ commit å¯¹è±¡çš„å¯å˜æŒ‡é’ˆã€‚Git ä¼šä½¿ç”¨ master ä½œä¸ºåˆ†æ”¯çš„é»˜è®¤åå­—ã€‚åœ¨è‹¥å¹²æ¬¡æäº¤åï¼Œä½ å…¶å®å·²ç»æœ‰äº†ä¸€ä¸ªæŒ‡å‘æœ€åä¸€æ¬¡æäº¤å¯¹è±¡çš„ master åˆ†æ”¯ï¼Œå®ƒåœ¨æ¯æ¬¡æäº¤çš„æ—¶å€™éƒ½ä¼šè‡ªåŠ¨å‘å‰ç§»åŠ¨ã€‚ åˆ›å»ºåˆ†æ”¯1git branch [branch-name] é€šè¿‡git branchè¿™ç§æ–¹å¼åˆ›å»ºçš„åˆ†æ”¯ä»…ä»…æ˜¯åœ¨æœ¬åœ°åˆ›å»ºäº†åˆ†æ”¯ï¼Œè¿œç¨‹ä»“åº“æ˜¯æ²¡æœ‰è¿™ä¸ªåˆ†æ”¯çš„ã€‚å› ä¸ºæ²¡æœ‰å…³è”ï¼Œæäº¤çš„ä¿®æ”¹æ˜¯ä¸èƒ½pushåˆ°è¿œç¨‹ä»“åº“çš„ã€‚ ä¸€èˆ¬éƒ½æ˜¯ä»è¿œç¨‹ä»“åº“æ‹‰å–å·²æœ‰çš„åˆ†æ”¯ã€‚ 1git checkout -b [branch-name] origin/[branch-name] æäº¤æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“1git push --set-upstream origin test æˆ–è€… 1git push origin [branch-name] åˆ‡æ¢åˆ†æ”¯1git checkout [branch-name] æŸ¥çœ‹åˆ†æ”¯æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯ä»¥åŠæ‰€åœ¨çš„åˆ†æ”¯ 1git branch æŸ¥çœ‹æœ¬åœ°æ‰€æœ‰çš„åˆ†æ”¯ä»¥åŠè¿œç¨‹ä»“åº“æ‰€æœ‰çš„åˆ†æ”¯ 1git branch --all åˆ é™¤åˆ†æ”¯åˆ é™¤æœ¬åœ°åˆ†æ”¯ 1git branch -d [branch-name] å¦‚æœè¦åˆ é™¤çš„åˆ†æ”¯ä¸Šæœ‰æäº¤æ¨é€åˆ°è¿œç¨‹æˆ–è€…mergeåˆ°å…¶ä»–åˆ†æ”¯ï¼Œé‚£ä¹ˆè¿™æ ·åˆ é™¤ä¼šå¤±è´¥ï¼Œå¯ä»¥ç”¨å¼ºåˆ¶åˆ é™¤ï¼š 1git branch -D [branch-name] åˆ é™¤è¿œç¨‹åˆ†æ”¯ 1git push origin -d [branch-name] åˆå¹¶åˆ†æ”¯å°†å…¶ä»–åˆ†æ”¯commitçš„å†…å®¹åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚ 1git merge [branch-name] äº”ã€Gitæœ€ä½³å®è·µåˆå§‹åŒ–gitæµç¨‹åœ¨cloneé¡¹ç›®åä½¿ç”¨git flow initåˆå§‹åŒ–gitæµç¨‹ï¼Œé€‰é¡¹å…¨éƒ¨å›è½¦é»˜è®¤å°±è¡Œã€‚è¿™ä¸ªæ“ä½œåªéœ€è¦åœ¨cloneåæ‰§è¡Œä¸€æ¬¡ï¼Œä»¥åéƒ½ä¸éœ€è¦äº†ã€‚ 123git clone [url]git checkout -b develop origin/developgit flow init åˆ†æ”¯è¯´æ˜ï¼š masterä¸ºçº¿ä¸Šåˆ†æ”¯ã€‚ developä¸ºæœ€æ–°æœ€ç¨³å½“çš„å¼€å‘åˆ†æ”¯ã€‚ feature/xxä¸ºå½“å‰å¼€å‘ç‰¹æ€§çš„åˆ†æ”¯ã€‚ hotfixä¸ºbugä¿®å¤åˆ†æ”¯ åˆ›å»ºè‡ªå·±çš„ç‰¹æ€§åˆ†æ”¯å¹¶æäº¤12git flow feature start [myName]git push origin [feature/myName] åœ¨è‡ªå·±çš„ç‰¹æ€§åˆ†æ”¯å¼€å‘å®Œæˆåï¼š 12git checkout developgit merge [feature/myName] ä¸‹æ¬¡å¼€å‘å‰ï¼š 1234git checkout developgit pullgit checkout [feature/myName]git merge develop","tags":[{"name":"git","slug":"git","permalink":"https://xieyufei.com/tags/git/"}]},{"title":"JSæ•°ç»„å»é‡","date":"2017-09-02T01:58:00.000Z","path":"2017/09/02/JS-Array-Remove-Duplicate.html","text":"ç¬”è€…åœ¨åšé¡¹ç›®çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œéœ€è¦å¯¹æ•°ç»„è¿›è¡Œå»é‡æ“ä½œã€‚åœ¨ç½‘ä¸Šæ‰¾åˆ°äº†å„ç§è§£å†³çš„æ–¹æ³•ï¼Œæ•´ç†äº†ä¸€ä¸‹ï¼Œç®€å•åˆ†æä¸€ä¸‹æ¯ç§çš„ä¼˜ç¼ºç‚¹ã€‚ ç¬¬ä¸€ç§æ–¹æ³•éå†å¾ªç¯ ç¬¬ä¸€ç§æ–¹æ³•ä¹Ÿæ˜¯æœ€ä¸€èˆ¬ã€æœ€å¸¸ç”¨çš„åŠæ³•ï¼Œä½¿ç”¨æ•°ç»„çš„indexOf()æ–¹æ³•ã€‚ 1234567891011121314let arr = [1,&#x27;1&#x27;,2,&#x27;2&#x27;,1,2,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;];function unique1(arr)&#123; let result = [arr[0]]; for (let i = 1; i &lt; arr.length; i++) &#123; let item = arr[i]; if(result.indexOf(item) == -1)&#123; result.push(item); &#125; &#125; return result;&#125;console.log(unique1(arr)); ä½†æ˜¯indexOfæ–¹æ³•å†…éƒ¨å®ç°ä¹Ÿæ˜¯å»éå†æ•°ç»„çŸ¥é“æ‰¾åˆ°ç›®æ ‡ä¸ºæ­¢ï¼Œå¦‚æœå¾…å»é‡çš„æ•°ç»„å¾ˆé•¿ä¸”é‡å¤çš„å…ƒç´ å°‘ï¼Œåˆ™ä¼šè€—è´¹äº†å¤§é‡çš„æ—¶é—´ã€‚ ç¬¬äºŒç§æ–¹æ³•å­˜æ”¾Hashå¯¹è±¡ ç¬¬äºŒç§æ–¹æ³•æ˜¯å°†æ•°ç»„æ‰€æœ‰çš„å…ƒç´ è½¬å˜æˆå¯¹è±¡çš„é”®åï¼Œåˆ©ç”¨å¯¹è±¡é”®åçš„ä¸å¯é‡å¤çš„ç‰¹æ€§æ¥å»é‡ã€‚ 1234567891011121314151617let arr = [1,&#x27;1&#x27;,2,&#x27;2&#x27;,1,2,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;];function unique2(arr)&#123; let result = []; let obj =&#123;&#125;; for(let i =0;i&lt;arr.length;i++)&#123; let item = arr[i]; if(!obj[item])&#123; result.push(item); obj[item] = 1; &#125; &#125; return result;&#125;console.log(unique2(arr)) åœ¨æ—¶é—´æ¶ˆè€—ä¸Šæ¥çœ‹ï¼Œè¿™ç§æ–¹æ³•æ¯”ç¬¬ä¸€ç§æ–¹æ³•è¦å¿«å¾ˆå¤šï¼Œå› ä¸ºä»å¯¹è±¡ä¸­å–å±æ€§å€¼æ¶ˆè€—çš„æ—¶é—´å‡ ä¹å¯ä»¥ä¸è®¡ï¼Œä½†æ˜¯å­˜åœ¨ä»¥ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š ç”±äºéœ€è¦å­˜æ”¾Hashå¯¹è±¡ï¼Œå› æ­¤åœ¨å†…å­˜å ç”¨ä¸Šæ¯”ç¬¬ä¸€ç§æ–¹æ³•ä¼šå¤šå ç”¨æ›´å¤šçš„å†…å­˜ç©ºé—´ï¼Œå°±æ˜¯æ‰€è°“çš„ç©ºé—´æ¢æ—¶é—´ã€‚ ä»ä¸Šé¢çš„æ’åºç»“æœæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œâ€™12â€™ä¸åœ¨ç»“æœä¸­ã€‚å› ä¸ºåœ¨é”®åä¸­ï¼ŒStringç±»å‹çš„â€™12â€™å’ŒNumberç±»å‹çš„12å¯¹äºHashå¯¹è±¡æ¥è¯´éƒ½æ˜¯ä¸€æ ·çš„ã€‚ ç¬¬ä¸‰ç§æ–¹æ³•æ’åºæ¯”è¾ƒ ç¬¬ä¸‰ç§æ–¹æ³•åˆ©ç”¨æ•°ç»„åŸç”Ÿçš„sort()æ–¹æ³•ï¼Œå°†æ•°ç»„å…ˆè¿›è¡Œæ’åºï¼Œæ’åºåæ¯”è¾ƒç›¸é‚»ä¸¤ä¸ªå…ƒç´ çš„å€¼ã€‚ 123456789101112131415let arr = [1,&#x27;1&#x27;,2,&#x27;2&#x27;,1,2,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;];function unique3(arr) &#123; let result = [arr[0]]; arr = arr.sort(); for (let i = 1; i &lt; arr.length; i++) &#123; let item = arr[i]; if (item !== result[result.length - 1]) &#123; result.push(item) &#125; &#125; return result;&#125;console.log(unique3(arr)) è¿™ç§æ–¹æ³•æ¯”indexOf()æ¶ˆè€—çš„æ—¶é—´è¦çŸ­ï¼Œæ¯”å­˜æ”¾Hashå¯¹è±¡å ç”¨çš„å†…å­˜è¦å°ï¼Œç®—æ˜¯ä¸€ç§æŠ˜ä¸­ä¸¤è€…çš„æ–¹æ³•ã€‚ä½†æ˜¯ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å»é‡åçš„æ•°ç»„çš„é¡ºåºå‘ç”Ÿäº†æ”¹å˜ã€‚ ç¬¬å››ç§æ–¹æ³•åˆ©ç”¨Setç±»å‹ å¦‚æœä½ å¼€å‘ç¯å¢ƒæ”¯æŒES6ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯æœ€ç®€æ´çš„ã€‚ 1234567let arr = [1,&#x27;1&#x27;,2,&#x27;2&#x27;,1,2,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;,&#x27;x&#x27;,&#x27;y&#x27;,&#x27;f&#x27;];function unique4(arr)&#123; return Array.from(new Set(arr));&#125;console.log(unique4(arr));","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"å‰ç«¯è°ƒè¯•å‘Šåˆ«ç¬¨åŠæ³•","date":"2017-06-13T11:56:39.000Z","path":"2017/06/13/Fiddler-Usage.html","text":"ç¬”è€…å‰ä¸€é˜µåœ¨åšå¾®ä¿¡ç«™é¡¹ç›®çš„æ—¶å€™åœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸å°‘çš„é—®é¢˜ï¼Œæ¯æ¬¡è°ƒè¯•æ¥å£çš„æ—¶å€™éƒ½éœ€è¦ç”¨console.logå°†æ•°æ®æ‰“å°å‡ºæ¥ï¼Œå¦‚æœæœ‰æ—¶å€™æƒ³è¦ä¿®æ”¹æ¥å£æ•°æ®è¿˜å¾ˆä¸æ–¹ä¾¿ã€‚é’ˆå¯¹ä¸Šé¢è°ƒè¯•çš„ç—›ç‚¹ï¼Œç¬”è€…å¯¹Fiddlerçš„ç”¨æ³•è¿›è¡Œäº†ç®€å•çš„å­¦ä¹ ï¼Œåˆ†äº«ä¸€ä¸‹å­¦ä¹ çš„å¿ƒå¾—ã€‚ ä»‹ç» é¦–å…ˆæ¥ä»‹ç»ä¸€ä¸‹Fiddlerã€‚Fiddleræ˜¯ä½äºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯çš„HTTPä»£ç†ï¼Œä¹Ÿæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„httpæŠ“åŒ…å·¥å…·ä¹‹ä¸€ ã€‚ å®ƒèƒ½å¤Ÿè®°å½•å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ‰€æœ‰HTTPè¯·æ±‚ï¼Œå¯ä»¥é’ˆå¯¹ç‰¹å®šçš„HTTPè¯·æ±‚ï¼Œåˆ†æè¯·æ±‚æ•°æ®ã€è®¾ç½®æ–­ç‚¹ã€è°ƒè¯•webåº”ç”¨ã€ä¿®æ”¹è¯·æ±‚çš„æ•°æ®ï¼Œç”šè‡³å¯ä»¥ä¿®æ”¹æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼ŒåŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ˜¯webè°ƒè¯•çš„åˆ©å™¨ã€‚ æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼ŒFiddlerè¿™è´§å±…ç„¶è¿˜èƒ½è®¾ç½®æ–­ç‚¹ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒFiddlerè¿˜èƒ½ä¿®æ”¹è¯·æ±‚æ•°æ®æˆ–è€…ä¿®æ”¹è¿”å›æ•°æ®ã€‚è¿™æ ·åœ¨è°ƒè¯•çš„æ—¶å€™å¯ä»¥éšæ„çš„å°†æœåŠ¡å™¨çš„è¿”å›æ•°æ®ä¿®æ”¹æˆæˆ‘ä»¬æƒ³è¦çš„æ•°æ®äº†ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒFiddlerè¿˜èƒ½å¤Ÿæ‹¦æˆªæ‰‹æœºç«¯çš„æ•°æ®ï¼Œèƒ½å¤Ÿçœ‹åˆ°æ‰‹æœºç«¯å‘é€çš„è¯·æ±‚å’Œè¯·æ±‚ç»“æœï¼Œä¸è¿‡è¦è¿›è¡Œä¸€ä¸ªå°å°çš„è®¾ç½®ã€‚å¥½äº†ï¼Œä»‹ç»äº†è¿™ä¹ˆå¤šï¼Œæ¥çœ‹ä¸€ä¸‹Fiddlerçš„åŸç†ï¼š æ—¢ç„¶Fiddleræ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¹‹é—´çš„ä»£ç†ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯æ‰€æœ‰å‘èµ·çš„è¯·æ±‚éƒ½ä¼šç»è¿‡Fiddlerï¼Œç„¶åå†å‘é€åˆ°å¯¹åº”çš„æœåŠ¡å™¨ï¼›åŒæ ·ï¼ŒæœåŠ¡å™¨æ‰€æœ‰çš„å“åº”æ•°æ®ä¹Ÿä¼šç»è¿‡Fiddlerå†å‘é€åˆ°å®¢æˆ·ç«¯ã€‚ ç•Œé¢ å®‰è£…å®ŒFiddlerï¼Œæ‰“å¼€ç•Œé¢å¦‚ä¸‹,æ•´ä¸ªç•Œé¢å¯ä»¥åˆ†ä¸ºäº”ä¸ªéƒ¨åˆ†ï¼š æœ€ä¸Šé¢çš„çº¢è‰²åŒºåŸŸæ˜¯èœå•æ ï¼Œä¸»è¦æœ‰ä¿å­˜/å¯¼å…¥è¯·æ±‚ã€è‡ªå®šä¹‰è§„åˆ™ã€è®¾ç½®é€‰é¡¹ç­‰åŠŸèƒ½ã€‚ ä¸­é—´çš„è“è‰²åŒºåŸŸæ˜¯å·¥å…·æ ï¼Œé’ˆå¯¹å½“å‰è¯·æ±‚çš„æ“ä½œï¼ŒåŒ…æ‹¬æ¸…é™¤è¯·æ±‚ã€æ¢å¤æ–­ç‚¹ã€æŸ¥æ‰¾è¯·æ±‚ã€‚ å·¦ä¾§æ˜¯è¯·æ±‚æ•°æ®çš„é¢æ¿ï¼Œæ‰€æœ‰Fiddleræ•è·åˆ°çš„è¯·æ±‚éƒ½ä¼šåœ¨è¿™ä¸ªé¢æ¿é‡Œï¼Œæ¯ä¸€ä¸ªå­—æ®µçš„å«ä¹‰å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ å³ä¾§æ˜¯æ•°æ®ç»Ÿè®¡çš„é¢æ¿ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™è¾¹çœ‹åˆ°æ¯ä¸ªè¯·æ±‚çš„è¯¦ç»†ç»Ÿè®¡æ•°æ®ï¼ˆåŒ…æ‹¬è¯·æ±‚å¤´ã€å“åº”å¤´ã€å“åº”ä¸»ä½“ã€è¯·æ±‚æ—¶é—´ï¼‰ï¼Œè¿˜å¯ä»¥è®¾ç½®è¿‡æ»¤æ¡ä»¶ï¼ŒæŠŠæˆ‘ä»¬éœ€è¦çš„è¯·æ±‚è¿‡æ»¤å‡ºæ¥ã€‚ å‘½ä»¤è¡Œè¾“å…¥QuickExecå¯ä»¥è¾“å…¥å‘½ä»¤è¿›è¡Œä¸€äº›å¿«æ·æ“ä½œã€‚ é…ç½® Fiddlerç®€å•ä»‹ç»å®Œäº†ï¼Œä¸‹é¢æ¥çœ‹ä¸‹Fiddlerçš„ä¸€äº›é…ç½®ã€‚ ç”µè„‘è®¾ç½®ä»£ç† Fiddleræ‰“å¼€åä¼šè‡ªåŠ¨æ›´æ”¹IEçš„ä»£ç†è®¾ç½®ï¼Œç”±äºChromeé»˜è®¤ä»£ç†è®¾ç½®æ˜¯è·ŸIEå…³è”åœ¨ä¸€èµ·çš„ï¼Œå› æ­¤Chromeä¸ç”¨è¿›è¡Œé…ç½®ï¼Œä½†æ˜¯ç«ç‹ä½¿ç”¨ç‹¬ç«‹çš„ä»£ç†è®¾ç½®ï¼Œå› æ­¤éœ€è¦å•ç‹¬é…ç½®ã€‚ é¦–å…ˆæŸ¥çœ‹Fiddlerçš„ç›‘å¬ç«¯å£ã€‚åœ¨Fiddlerä¸­é€‰æ‹©Tools =&gt; Fiddler Options =&gt; connectionsï¼Œæ‰“å¼€å¦‚ä¸‹ç•Œé¢ï¼š å…¶ä¸­çš„Fiddler Listens on portå°±æ˜¯Fiddlerçš„ç›‘å¬ç«¯å£ï¼Œæˆ‘ä»¬åªè¦ä»£ç†åˆ°è¿™ä¸ªç«¯å£å°±å¯ä»¥ç”¨Fiddlerè¿›è¡Œç›‘å¬äº†ã€‚ç„¶åæŠŠAllow remote computers to connectè¿™ä¸€è¡Œå‰é¢çš„å‹¾æ‰“ä¸Šï¼Œå…è®¸å…¶ä»–ç”µè„‘æ¥è¿æ¥ã€‚ Firefoxæ‰‹åŠ¨è®¾ç½®å¦‚ä¸‹ï¼Œæ‰“å¼€å·¥å…· =&gt; é€‰é¡¹ =&gt; é«˜çº§ =&gt; ç½‘ç»œ =&gt; è®¾ç½®ï¼Œç„¶åè¿›è¡Œå¦‚ä¸‹è®¾ç½®ã€‚ ä¸è¿‡ä¸Šé¢çš„æ‰‹åŠ¨è®¾ç½®æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£…ä¸€ä¸ªFiddlerHookæ’ä»¶ï¼Œå®‰è£…å¥½åå¯ç”¨è¿™ä¸ªæ’ä»¶å°±è¡Œã€‚ æ‰‹æœºç«¯è®¾ç½®ä»£ç† Fiddlerä¸ä»…èƒ½å¤Ÿä»£ç†ç”µè„‘çš„è¯·æ±‚ï¼Œä¹Ÿèƒ½å¤Ÿä»£ç†æ‰‹æœºç«¯çš„è¯·æ±‚ï¼Œå½“æˆ‘ä»¬å¼€å‘å¾®ä¿¡ç«™æˆ–è€…æ‰‹æœºç«™çš„æ—¶å€™ï¼Œå°±å¯ä»¥å¾ˆæ–¹ä¾¿æˆ‘ä»¬æ¥è¿›è¡Œè°ƒè¯•ã€‚ IOSè®¾ç½® IOSé€‰æ‹©å¯¹åº”çš„æ— çº¿ç½‘è®¾ç½®ï¼Œç„¶åæ‰¾åˆ°HTTPä»£ç†ï¼ŒæœåŠ¡å™¨ä¸€æ å¡«å†™ç”µè„‘çš„IPåœ°å€ï¼Œç«¯å£å·æ˜¯Fiddlerç«¯å£å·ï¼Œé»˜è®¤8888ã€‚ Androidè®¾ç½® åœ¨Androidä¸­ï¼Œé•¿æŒ‰æ‰€è¿æ¥çš„æ— çº¿ç½‘ï¼Œç„¶åä¿®æ”¹ç½‘ç»œï¼Œåœ¨ä»£ç†çš„é€‰é¡¹å¡é‡Œé€‰æ‹©æ‰‹åŠ¨ã€‚åŒæ ·ï¼ŒæœåŠ¡å™¨ä¸€æ å¡«å†™ç”µè„‘çš„IPåœ°å€ï¼Œç«¯å£å·é»˜è®¤8888. æ•è·HTTPS é»˜è®¤æƒ…å†µä¸‹ï¼ŒFiddlerä¸ä¼šæ•è·HTTPSä¼šè¯ï¼Œå› æ­¤å¦‚æœä¸å¼€å¯HTTPSæ•è·çš„è¯è‡ªåŠ¨åº”ç­”å™¨æ˜¯ä¸ä¼šæ›¿æ¢HTTPSçš„ä¼šè¯ã€‚æ‰“å¼€Tools =&gt; Fiddler Options =&gt; HTTPS å¼¹å‡ºæ¡†éœ€è¦å®‰è£…ä¸€ä¸ªè¯ä¹¦ï¼Œç„¶åå…¨ç¨‹ç‚¹Yeså°±å¯ä»¥äº†ã€‚ åŠŸèƒ½ç»Ÿè®¡ç»“æœ Fiddlerçš„ç»Ÿè®¡é€‰é¡¹å¡ä¸­æ˜¾ç¤ºäº†å½“å‰Sessionçš„åŸºæœ¬ä¿¡æ¯ï¼Œåœ¨é€‰é¡¹å¡çš„æœ€ä¸Šæ–¹æ˜¾ç¤ºçš„æ˜¯æ–‡æœ¬ä¿¡æ¯ï¼Œæœ€ä¸‹æ–¹æ˜¯ä¸ªé¥¼å›¾ï¼ŒæŒ‰MIMEç±»å‹æ˜¾ç¤ºæµé‡ã€‚ä½¿ç”¨Statisticsé¡µç­¾ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡é€‰æ‹©å¤šä¸ªä¼šè¯æ¥å¾—æ¥è¿™å‡ ä¸ªä¼šè¯çš„æ€»çš„ä¿¡æ¯ç»Ÿè®¡ï¼Œæ¯”å¦‚å¤šä¸ªè¯·æ±‚å’Œä¼ è¾“çš„å­—èŠ‚æ•°ã€‚ é€‰æ‹©ç¬¬ä¸€ä¸ªè¯·æ±‚å’Œæœ€åä¸€ä¸ªè¯·æ±‚ï¼Œå¯è·å¾—æ•´ä¸ªé¡µé¢åŠ è½½æ‰€æ¶ˆè€—çš„æ€»ä½“æ—¶é—´ã€‚ä»æ¡å½¢å›¾è¡¨ä¸­è¿˜å¯ä»¥åˆ†åˆ«å‡ºå“ªäº›è¯·æ±‚è€—æ—¶æœ€å¤šï¼Œä»è€Œå¯¹é¡µé¢çš„è®¿é—®è¿›è¡Œè®¿é—®é€Ÿåº¦ä¼˜åŒ–ã€‚ æŸ¥çœ‹è¯·æ±‚å¤´å’Œå“åº”ç»“æœ åœ¨å·¦ä¾§è¯·æ±‚æ•°æ®åˆ—è¡¨ä¸­é€‰ä¸­ä¸€æ¡è®°å½•ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°Insprctorsé¢æ¿ï¼Œè¿™ä¸ªé¢æ¿åˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªï¼Œä¸Šé¢æ˜¯è¯·æ±‚å¤´çš„ä¸€äº›ä¿¡æ¯ï¼Œä¸‹é¢æ˜¯è¿”å›çš„å“åº”ä¸»ä½“ã€‚ è‡ªåŠ¨åº”ç­”å™¨ åœ¨æ—¥å¸¸å·¥ä½œä¸­ï¼Œæœ‰æ—¶å€™è„šæœ¬æ ·å¼æˆ–è€…é¡µé¢æœ‰ç‚¹é—®é¢˜æ˜¯å®¶å¸¸ä¾¿é¥­ï¼Œç»å¸¸éœ€è¦å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚ä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦å‘å¸ƒåˆ°æµ‹è¯•ç¯å¢ƒæ‰èƒ½çœ‹åˆ°æ•ˆæœå¾ˆéº»çƒ¦ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨è‡ªå·±æœ¬æœºå°±èƒ½çœ‹åˆ°è°ƒè¯•çš„æ•ˆæœã€‚Fiddlerå°±æä¾›äº†è‡ªåŠ¨åº”ç­”å™¨è¿™ä¸ªåŠŸèƒ½ï¼Œèƒ½è®©æˆ‘ä»¬ç›´æ¥çœ‹åˆ°æ•ˆæœã€‚ æ‰“å¼€AutoResponderé¢æ¿ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ URLåŒ¹é…è§„åˆ™ï¼Œè®©è¯·æ±‚çš„URLä»æœ¬åœ°è¿”å›æ–‡ä»¶è€Œä¸æ˜¯ä»æœåŠ¡å™¨ã€‚ ä¾‹å¦‚ç°åœ¨éœ€è¦å°†çº¿ä¸Šåœ°å€http://xieyufei.comæ›¿æ¢ä¸ºæœ¬åœ°çš„ä¸€ä¸ªHTMLæ–‡ä»¶ï¼Œé¦–å…ˆå‹¾é€‰Enable rulesä½¿æ‰€æœ‰çš„åŒ¹é…è§„åˆ™ç”Ÿæ•ˆï¼Œç„¶åå‹¾é€‰Unmatched request passthroughï¼Œè®©æ²¡æœ‰åŒ¹é…åˆ°çš„è§„åˆ™é€šè¿‡ï¼ˆå¦‚æœä¸å‹¾é€‰è¿™ä¸ªï¼Œæ‰“å¼€å…¶ä»–ç½‘é¡µä¼šå¤±è´¥ï¼‰ã€‚ ç„¶åç‚¹Add rulesæ¥æ–°å¢ä¸€ä¸ªåŒ¹é…è§„åˆ™ï¼Œåœ¨xä¸‹é¢çš„Rule Editorè¾“å…¥è¦æ›¿æ¢çš„URLå’Œæœ¬åœ°æ–‡ä»¶çš„è·¯å¾„ï¼Œç„¶åSaveå°±æ·»åŠ æˆåŠŸäº†ã€‚ è™½ç„¶è¿™æ ·æ·»åŠ åŒ¹é…æˆåŠŸäº†ï¼Œä½†æ˜¯äº§ç”Ÿäº†ä¸€ä¸ªå¿ƒå¾—é—®é¢˜ï¼Œç”±äºæ˜¯åŒ¹é…URLï¼Œæ‰€ä»¥åªè¦æ˜¯URLä¸­å¸¦æœ‰http://xieyufei.coméƒ½ä¼šè¢«æ›¿æ¢æ‰ï¼Œæ‰€ä»¥è¯¥åŸŸåä¸‹æ‰€æœ‰çš„è„šæœ¬ã€æ ·å¼ä»¥åŠå­é¡µé¢éƒ½ä¼šè¢«æ›¿æ¢ï¼Œè¿™æ ·æ˜¾ç„¶ä¸åˆ©äºæˆ‘ä»¬è°ƒè¯•ã€‚ä½†æ˜¯Fiddleræä¾›äº†å¦å¤–çš„å››ç§åŒ¹é…è§„åˆ™ã€‚ å‰ç¼€ä¸ºâ€œEXACT:â€è¡¨ç¤ºå®Œå…¨åŒ¹é…ï¼ˆå¤§å°å†™æ•æ„Ÿï¼‰ å‰ç¼€ä¸ºâ€œNOT:â€è¡¨ç¤ºå‘ç°å°±ä¸åŒ¹é… å‰ç¼€ä¸ºâ€œREGEX:â€è¡¨ç¤ºä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… å‰ç¼€ä¸ºâ€œREGEX:(?insx)â€è¡¨ç¤ºåŒ¹é…æ–¹å¼å…¶ä¸­ï¼š iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼› nè¡¨ç¤ºæŒ‡å®šçš„å”¯ä¸€æœ‰æ•ˆçš„æ•è·æ˜¯æ˜¾å¼å‘½åæˆ–ç¼–å·çš„å½¢å¼ï¼› sè¡¨ç¤ºå•è¡Œæ¨¡å¼ï¼› xè¡¨ç¤ºç©ºæ ¼è¯´æ˜çš„ï¼› å› æ­¤ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„åŒ¹é…è§„åˆ™ï¼Œæ”¹ä¸ºEXACT:http://xieyufei.comå°±å¯ä»¥äº†ã€‚è¿˜æœ‰ä¸€ä¸ªå°Tipsï¼š å°†å·¦ä¾§çš„ä¼šè¯åˆ—è¡¨ä¸­é€‰æ‹©ä¸€æ¡æ•°æ®ï¼Œç›´æ¥æ‹–æ‹½åˆ°AutoResponderé¢æ¿ä¼šç›´æ¥ç”ŸæˆåŒ¹é…è§„åˆ™ã€‚ ç‚¹å‡»Rule Editorçš„ç¬¬äºŒä¸ªè¾“å…¥æ¡†æ—è¾¹çš„å°ä¸‰è§’æ‰¾åˆ°Find a fileå¯ä»¥é€‰æ‹©æ–‡ä»¶è·¯å¾„ã€‚ Test...å¯ä»¥æµ‹è¯•åŒ¹é…è§„åˆ™ã€‚ åœ¨åŒ¹é…è§„åˆ™ä¸Šå³å‡»ä¼šæœ‰é€‰é¡¹æ¡†ï¼Œä½ æƒŠä¸æƒŠå–œï¼Œæ„ä¸æ„å¤–ã€‚ æ„é€ å™¨ æ„é€ å™¨composerç”¨æ¥åˆ›å»ºä¸€ä¸ªHTTPè¯·æ±‚ç„¶åå‘é€åˆ°æœåŠ¡å™¨ã€‚å¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥è®²ä¼šè¯åˆ—è¡¨ä¸­æ‹–æ‹½ä¸€ä¸ªå·²æœ‰çš„è¯·æ±‚è¿‡æ¥ã€‚ Parsedè¯·æ±‚ æ‰“å¼€Composeré¢æ¿ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯Parsedé€‰é¡¹å¡ï¼Œåœ¨è¡¨å•ä¸­æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œæ¯”å¦‚å¯¹baidu.comå‘é€ä¸€ä¸ªè¯·æ±‚ã€‚ç‚¹å‡»ExecuteæŒ‰é’®ï¼Œè¿™ä¸ªè¯·æ±‚å°±å‘é€å‡ºå»äº†ã€‚è¿™æ—¶å€™åœ¨ä¼šè¯åˆ—è¡¨ä¸­å°±å¤šäº†ä¸€æ¬¡è¯·æ±‚ã€‚ Rawè¯·æ±‚ ç¬¬äºŒä¸ªé€‰é¡¹å¡æ˜¯Rawï¼Œä¹Ÿæ˜¯åŸå§‹è¯·æ±‚ï¼Œå¦‚æœç†Ÿæ‚‰HTTPè¯·æ±‚ï¼Œå¯ä»¥ç›´æ¥æ‰‹åŠ¨è¾“å…¥ã€‚ ScratchPadæš‚å­˜ ç¬¬ä¸‰ä¸ªé€‰é¡¹å¡æ˜¯ScratchPadï¼Œå¯ä»¥åŒæ—¶ä¿å­˜å¤šæ¡åŸå§‹è¯·æ±‚ï¼Œç„¶åé€‰æ‹©æ€§çš„å‘é€ã€‚é«˜äº®é€‰ä¸­ä½ è¦å‘é€çš„è¯·æ±‚ï¼Œç„¶åç‚¹å‡»Executeå°±å‘é€å‡ºå»äº†ã€‚ Optionsé€‰é¡¹ å‡ ä¸ªé€‰é¡¹è¯´æ˜ï¼š Inspector Sessionï¼šä½¿ç”¨åŒä¸€ä¸ª Session è¿›è¡Œè¿æ¥ï¼ˆåŒä¸€ä¸ªåŸŸåæˆ–è€…ä¸»æœºçš„æƒ…å†µä¸‹ï¼‰ Fix Content-Length Headerï¼š å½“ä½ å‘é€ Post è¯·æ±‚æ—¶ï¼Œè‡ªåŠ¨åŠ ä¸Šæˆ–è€…ä¿®æ­£ Header ä¸­çš„ Content-Length. Follow Redirectï¼šè‡ªåŠ¨æ ¹è¸ª HTTP çŠ¶æ€ç ä¸º 301 å’Œ 302 ä¸­è¿”å›å¸¦ Location çš„è¯·æ±‚ã€‚ Automatically Authenticateï¼šè‡ªåŠ¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚ Tear Offï¼šå°† Composer å˜æˆä¸€ä¸ªæµ®åŠ¨çª—å£ã€‚ è¿‡æ»¤å™¨ æœ‰æ—¶å€™è¯·æ±‚åˆ·æ–°ä¸€ä¸ªé¡µé¢ä¼šæœ‰å¾ˆå¤šçš„è¯·æ±‚ï¼Œçœ‹å¾—çœ¼èŠ±ç¼­ä¹±ï¼Œä½†æ˜¯ç»å¤§å¤šæ•°è¯·æ±‚å¯èƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¯¹è¯·æ±‚è¿›è¡Œä¸€äº›è¿‡æ»¤ã€‚ åœ¨Zone Filterä¸­æœ‰ä¸‰ä¸ªé€‰é¡¹ï¼Œåˆ†åˆ«è¿‡æ»¤ä»¥ä¸‹è¯·æ±‚ï¼š No Zone Filterï¼šä¸è¿‡æ»¤ Show only Intranet Hostsï¼šä»…æ˜¾ç¤ºå†…ç½‘çš„è¯·æ±‚ Show only Internet Hostsï¼šä»…æ˜¾ç¤ºå¤–ç½‘çš„è¯·æ±‚ åœ¨Host Filterä¸­æœ‰å››ä¸ªé€‰é¡¹ï¼Œåˆ†åˆ«è¿‡æ»¤ä»¥ä¸‹è¯·æ±‚ No Host Filterï¼šä¸è¿‡æ»¤ Hide the following Hostsï¼šéšè—ä¸‹é¢çš„ä¸»æœº Show only the following Hostsï¼šä»…æ˜¾ç¤ºä¸‹é¢çš„ä¸»æœº Flag the following Hostsï¼šæ ‡è®°ä¸‹é¢çš„ä¸»æœº å‘½ä»¤è¡Œè¾“å…¥ å‘½ä»¤è¡ŒQuickExecå…è®¸æˆ‘ä»¬å¿«é€Ÿçš„æ‰§è¡Œä¸€äº›è„šæœ¬å‘½ä»¤ã€‚ selectå‘½ä»¤ selectå‘½ä»¤ç”¨æ¥é€‰æ‹©æ‰€æœ‰ç±»å‹ä¸ºæŒ‡å®šç±»å‹çš„HTTPè¯·æ±‚ï¼Œå³æ ¹æ®è¯·æ±‚çš„content-typeæ¥é€‰æ‹©æ‰€æœ‰åŒä¸€ç±»å‹çš„ã€‚å¸¸ç”¨çš„select cssé€‰æ‹©æ‰€æœ‰çš„æ ·å¼è¯·æ±‚ï¼Œselect imageé€‰æ‹©æ‰€æœ‰çš„å›¾ç‰‡è¯·æ±‚ã€‚ allbutå‘½ä»¤ allbutå‘½ä»¤ç”¨äºæ¸…é™¤é™¤äº†æŒ‡å®šç±»å‹ä¹‹å¤–çš„å…¶ä»–HTTPè¯·æ±‚ï¼Œä»…ä¿ç•™æŒ‡å®šç±»å‹ã€‚ä¾‹å¦‚allbut imageä»…ä¿ç•™å›¾ç‰‡çš„è¯·æ±‚ã€‚å¦‚æœè·Ÿä¸€ä¸ªä¸å­˜åœ¨çš„ç±»å‹ï¼Œæ‰§è¡Œæ•ˆæœå’Œcslï¼Œå‘½ä»¤ç›¸åŒï¼Œæ¸…é™¤æ‰€æœ‰çš„è¯·æ±‚ã€‚ ?textå‘½ä»¤ å½“ä½ åœ¨é—®å·åè¾“å…¥ä¸€äº›æ–‡æœ¬çš„æ—¶å€™ï¼ŒFiddlerä¼šé«˜äº®URLä¸­å¸¦æœ‰è¿™äº›æ–‡æœ¬çš„æ‰€æœ‰è¯·æ±‚ã€‚ &gt;sizeå’Œ&lt;sizeå‘½ä»¤ å¤§äºå·å°äºå·å‘½ä»¤é€‰æ‹©å“åº”ä¸»ä½“çš„å¤§å°å¤§äºï¼ˆæˆ–è€…å°äºï¼‰æŒ‡å®šå¤§å°ã€‚ =statuså’Œ=methodå‘½ä»¤ ç­‰å·å‘½ä»¤ç”¨äºé€‰æ‹©çŠ¶æ€ç ç­‰äºæŒ‡å®šçŠ¶æ€ç æˆ–è€…æŒ‡å®šè¯·æ±‚æ–¹æ³•çš„ä¼šè¯ã€‚ @hostå‘½ä»¤ é€‰æ‹©åŒ…å«æŒ‡å®šHOSTçš„å…¨éƒ¨è¯·æ±‚ã€‚ boldå‘½ä»¤ å¦‚æœä»¥åçš„è¯·æ±‚çš„URLä¸­å¸¦æœ‰æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆå°†ä¼šè¢«åŠ ç²—æ˜¾ç¤ºã€‚bold /bar.aspxè¡¨ç¤ºåŠ ç²—URLå¸¦æœ‰bar.aspxã€‚å†æ¬¡æ‰§è¡Œboldä¼šæ¸…é™¤åŠ ç²—ã€‚ bpafterï¼ˆbpuï¼‰ã€bpsã€ã€bpvï¼ˆbpmï¼‰ è¿™å‡ ä¸ªå‘½ä»¤ç”¨äºæ‰¹é‡è®¾ç½®æ–­ç‚¹ã€‚ bpafterå’Œbpu: ä¸­æ–­URLåŒ…å«æŒ‡å®šå­—ç¬¦çš„å…¨éƒ¨ä¼šè¯ bps: ä¸­æ–­å“åº”çŠ¶æ€ä¸ºæŒ‡å®šå­—ç¬¦çš„å…¨éƒ¨ä¼šè¯ bpvå’Œbpm: ä¸­æ–­æŒ‡å®šè¯·æ±‚æ–¹å¼çš„å…¨éƒ¨ä¼šè¯ clså‘½ä»¤ æ¸…é™¤è¯·æ±‚åˆ—è¡¨ã€‚ æ–­ç‚¹è°ƒè¯• è™½ç„¶bpafterå’Œbpuéƒ½æ˜¯ç”¨äºä¸­æ–­URLåŒ…å«æŒ‡å®šå­—ç¬¦çš„å…¨éƒ¨ä¼šè¯ï¼Œä½†æ˜¯æ‰“æ–­ç‚¹çš„æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ã€‚bpuæ˜¯åœ¨æµè§ˆå™¨å‘é€è¯·æ±‚çš„æ—¶å€™è¿›è¡Œæ–­ç‚¹ï¼Œå¯ä»¥å¯¹è¯·æ±‚å‚æ•°è¿›è¡Œä¿®æ”¹ï¼›è€Œbpafteræ˜¯åœ¨æœåŠ¡å™¨å“åº”çš„åè¿›è¡Œæ–­ç‚¹ï¼Œå¯ä»¥å¯¹å“åº”ç»“æœè¿›è¡Œä¿®æ”¹ã€‚ æˆ‘ä»¬ä½¿ç”¨ç”¨expressæ¨¡æ‹Ÿç®€å•çš„ajaxè¯·æ±‚ã€‚ 12345678910111213var express = require(&#x27;express&#x27;);var path = require(&#x27;path&#x27;);var app = express();var port = process.env.PORT || 8088;app.get(&#x27;/test&#x27;,function(req,res)&#123; var params = req.param(&#x27;name&#x27;) || &#x27;&#x27;; res.json(&#123;name:&#x27;request name is &#x27;+params&#125;);&#125;);var server=app.listen(port,function()&#123; console.log(&#x27;server is listening on port:&#x27;+port);&#125;); ä¿®æ”¹è¯·æ±‚å‚æ•°bpu æˆ‘ä»¬è¾“å…¥å‘½ä»¤ bpu /testï¼Œç„¶åFiddlerå°±ä¼šè¿›å…¥ç­‰å¾…ã€‚åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼Œè¿™æ—¶å€™æµè§ˆå™¨å°±ä¼šè¿›å…¥ç­‰å¾…çš„çŠ¶æ€ã€‚åœ¨ä¼šè¯åˆ—è¡¨ä¸­é€‰æ‹©è¿›å…¥æ–­ç‚¹çŠ¶æ€çš„è¯·æ±‚ï¼Œç„¶åä¿®æ”¹è¯·æ±‚å‚æ•°ï¼Œä¿®æ”¹å®Œåç‚¹å‡»Run to Completionç»“æŸæ–­ç‚¹ã€‚è¿™æ—¶å€™ï¼Œæµè§ˆå™¨é¡µé¢ä¹Ÿç»“æŸç­‰å¾…ï¼Œå‡ºç°ä¿®æ”¹åçš„ç»“æœã€‚ è°ƒè¯•å®Œåæˆ‘ä»¬ä¸éœ€è¦Fiddlerå†è¿›è¡Œæ–­ç‚¹ï¼Œå¯ä»¥è¾“å…¥bpuæ¸…é™¤æ‰€æœ‰bpuçš„æ–­ç‚¹ã€‚ ä¿®æ”¹å“åº”ç»“æœbpafter åŒæ ·ï¼Œæˆ‘ä»¬è¾“å…¥å‘½ä»¤ bpafter /testï¼Œç„¶åFiddlerå°±ä¼šè¿›å…¥ç­‰å¾…ã€‚åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€ï¼Œè¿™æ—¶å€™æµè§ˆå™¨å°±ä¼šè¿›å…¥ç­‰å¾…çš„çŠ¶æ€ã€‚åœ¨ä¼šè¯åˆ—è¡¨ä¸­é€‰æ‹©è¿›å…¥æ–­ç‚¹çŠ¶æ€çš„è¯·æ±‚ï¼Œç„¶åä¿®æ”¹å“åº”ç»“æœï¼Œä¿®æ”¹å®Œåç‚¹å‡»Run to Completionç»“æŸæ–­ç‚¹ã€‚è¿™æ—¶å€™ï¼Œæµè§ˆå™¨é¡µé¢ä¹Ÿç»“æŸç­‰å¾…ï¼Œå‡ºç°ä¿®æ”¹åçš„ç»“æœã€‚ è°ƒè¯•å®Œåæˆ‘ä»¬ä¸éœ€è¦Fiddlerå†è¿›è¡Œæ–­ç‚¹ï¼Œå¯ä»¥è¾“å…¥bpafteræ¸…é™¤æ‰€æœ‰bpafterçš„æ–­ç‚¹ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æµè§ˆå™¨","slug":"Browser","permalink":"https://xieyufei.com/tags/Browser/"},{"name":"æŠ€å·§","slug":"Tips","permalink":"https://xieyufei.com/tags/Tips/"}]},{"title":"åŸç”ŸJSå‘é€å¼‚æ­¥æ•°æ®è¯·æ±‚","date":"2017-06-07T12:47:49.000Z","path":"2017/06/07/Raw-Js-Ajax.html","text":"åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™éœ€è¦ç”¨åˆ°å¼‚æ­¥æ•°æ®è¯·æ±‚ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ—¶å€™æ²¡æœ‰æ¡†æ¶çš„ä¾èµ–ï¼Œå°±éœ€è¦ç”¨åˆ°åŸç”ŸJSè¿›è¡Œå¼‚æ­¥æ•°æ®è¯·æ±‚ã€‚è¿™æ—¶å€™æ— éæœ‰ä¸¤ç§è¯·æ±‚æ–¹å¼ï¼Œä¸€ç§æ˜¯AJAXï¼Œå¦ä¸€ä¸ªæ˜¯JSONPã€‚é€šè¿‡åŸç”ŸJSå¯¹å¼‚æ­¥è¯·æ±‚è¿›è¡Œç®€å•çš„å°è£…ã€‚ AJAX AJAXæ˜¯ä¸€ç§æ•°æ®è¯·æ±‚æ–¹å¼ï¼Œä¸éœ€è¦åˆ·æ–°æ•´ä¸ªé¡µé¢å°±èƒ½å¤Ÿæ›´æ–°å±€éƒ¨é¡µé¢çš„æ•°æ®ã€‚AJAXçš„æŠ€æœ¯æ ¸å¿ƒæ˜¯XMLHttpRequestå¯¹è±¡ï¼Œä¸»è¦è¯·æ±‚è¿‡ç¨‹å¦‚ä¸‹ï¼š åˆ›å»ºXMLHttpRequestå¯¹è±¡(new) è¿æ¥æœåŠ¡å™¨(open) å‘é€è¯·æ±‚(send) æ¥æ”¶å“åº”æ•°æ®(onreadystatechange) ä¸è¯´è¯ç›´æ¥è´´ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/*** é€šè¿‡JSONçš„æ–¹å¼è¯·æ±‚* @param &#123;[type]&#125; params [description]* @return &#123;[type]&#125; [description]*/ajaxJSON(params) &#123; params.type = (params.type || &#x27;GET&#x27;).toUpperCase(); params.data = params.data || &#123;&#125;; var formatedParams = this.formateParams(params.data, params.cache); var xhr; //åˆ›å»ºXMLHttpRequestå¯¹è±¡ if (window.XMLHttpRequest) &#123; //éIE6 xhr = new XMLHttpRequest(); &#125; else &#123; xhr = new ActiveXObject(&#x27;Microsoft.XMLHTTP&#x27;); &#125; //å¼‚æ­¥çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ¥æ”¶å“åº”æ•°æ® xhr.onreadystatechange = function() &#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; if (!!params.success) &#123; if (typeof xhr.responseText == &#x27;string&#x27;) &#123; params.success(JSON.parse(xhr.responseText)); &#125; else &#123; params.success(xhr.responseText); &#125; &#125; &#125; else &#123; params.error &amp;&amp; params.error(status); &#125; &#125; if (params.type == &#x27;GET&#x27;) &#123; //è¿æ¥æœåŠ¡å™¨ xhr.open(&#x27;GET&#x27;, (!!formatedParams ? params.url + &#x27;?&#x27; + formatedParams : params.url), true); //å‘é€è¯·æ±‚ xhr.send(); &#125; else &#123; //è¿æ¥æœåŠ¡å™¨ xhr.open(&#x27;POST&#x27;, params.url, true); xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;); //å‘é€è¯·æ±‚ xhr.send(formatedParams); &#125;&#125;,/*** æ ¼å¼åŒ–æ•°æ®* @param &#123;Obj&#125; data éœ€è¦æ ¼å¼åŒ–çš„æ•°æ®* @param &#123;Boolean&#125; isCache æ˜¯å¦åŠ å…¥éšæœºå‚æ•°* @return &#123;String&#125; è¿”å›çš„å­—ç¬¦ä¸²*/formateParams: function(data, isCache) &#123; var arr = []; for (var name in data) &#123; arr.push(encodeURIComponent(name) + &#x27;=&#x27; + encodeURIComponent(data[name])); &#125; if (isCache) &#123; arr.push(&#x27;v=&#x27; + (new Date()).getTime()); &#125; return arr.join(&#x27;&amp;&#x27;);&#125; IE7åŠå…¶ä»¥ä¸Šç‰ˆæœ¬ä¸­æ”¯æŒåŸç”Ÿçš„ XHR å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ç”¨ï¼švar oAjax = new XMLHttpRequest();ã€‚IE6åŠå…¶ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒXHRå¯¹è±¡æ˜¯é€šè¿‡MSXMLåº“ä¸­çš„ä¸€ä¸ªActiveXObjectå¯¹è±¡å®ç°çš„ã€‚ é€šè¿‡xhrçš„openå‡½æ•°æ¥è¿æ¥æœåŠ¡å™¨ï¼Œä¸»è¦æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼šè¯·æ±‚æ–¹å¼ã€è¯·æ±‚åœ°å€å’Œæ˜¯å¦å¼‚æ­¥è¯·æ±‚ï¼ˆä¸€èˆ¬éƒ½æ˜¯å¼‚æ­¥è¯·æ±‚ï¼‰ã€‚è¯·æ±‚æ–¹å¼æœ‰ä¸¤ç§ï¼ŒGETå’ŒPOSTï¼ŒGETæ˜¯é€šè¿‡URLå°†æ•°æ®æäº¤åˆ°æœåŠ¡å™¨çš„ï¼ŒPOSTåˆ™æ˜¯é€šè¿‡å°†æ•°æ®ä½œä¸ºsendæ–¹æ³•çš„å‚æ•°å‘é€åˆ°æœåŠ¡å™¨ã€‚ ç»™xhrç»‘å®šçŠ¶æ€æ”¹å˜å‡½æ•°onreadystatechangeï¼Œä¸»è¦ç”¨æ¥æ£€æµ‹xhrçš„readyStateçš„å˜åŒ–ï¼Œå½“å¼‚æ­¥å‘é€æˆåŠŸåï¼ŒreadyStateçš„æ•°å€¼ä¼šç”±0å˜æˆ4ï¼ŒåŒæ—¶è§¦å‘onreadystatechangeäº‹ä»¶ã€‚readyStateçš„å±æ€§åŠå¯¹åº”çŠ¶æ€å¦‚ä¸‹ï¼š 0 (æœªåˆå§‹åŒ–) å¯¹è±¡å·²å»ºç«‹ï¼Œä½†æ˜¯å°šæœªåˆå§‹åŒ–ï¼ˆå°šæœªè°ƒç”¨openæ–¹æ³•ï¼‰ 1 (åˆå§‹åŒ–) å¯¹è±¡å·²å»ºç«‹ï¼Œå°šæœªè°ƒç”¨sendæ–¹æ³• 2 (å‘é€æ•°æ®) sendæ–¹æ³•å·²è°ƒç”¨ï¼Œä½†æ˜¯å½“å‰çš„çŠ¶æ€åŠhttpå¤´æœªçŸ¥ 3 (æ•°æ®ä¼ é€ä¸­) å·²æ¥æ”¶éƒ¨åˆ†æ•°æ®ï¼Œå› ä¸ºå“åº”åŠhttpå¤´ä¸å…¨ï¼Œè¿™æ—¶é€šè¿‡responseBodyå’ŒresponseTextè·å–éƒ¨åˆ†æ•°æ®ä¼šå‡ºç°é”™è¯¯ 4 (å®Œæˆ) æ•°æ®æ¥æ”¶å®Œæ¯•,æ­¤æ—¶å¯ä»¥é€šè¿‡é€šè¿‡responseBodyå’ŒresponseTextè·å–å®Œæ•´çš„å›åº”æ•°æ® åœ¨readystatechangeäº‹ä»¶ä¸­ï¼Œå…ˆåˆ¤æ–­å“åº”æ˜¯å¦æ¥æ”¶å®Œæˆï¼Œç„¶ååˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦æˆåŠŸå¤„ç†è¯·æ±‚ï¼Œxhr.status æ˜¯çŠ¶æ€ç ï¼ŒçŠ¶æ€ç ä»¥2å¼€å¤´çš„éƒ½æ˜¯æˆåŠŸï¼Œ304è¡¨ç¤ºä»ç¼“å­˜ä¸­è·å–ï¼Œä¸Šé¢çš„ä»£ç åœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½åŠ å…¥äº†éšæœºæ•°ï¼Œæ‰€ä»¥ä¸ä¼šä»ç¼“å­˜ä¸­å–å€¼ï¼Œæ•…è¯¥çŠ¶æ€ä¸éœ€åˆ¤æ–­ã€‚ JSONP å¦‚æœè¿˜æ˜¯ç”¨ä¸Šé¢çš„XMLHttpRequestå¯¹è±¡æ¥å‘é€éœ€è¦è·¨åŸŸçš„è¯·æ±‚ï¼Œè™½ç„¶è°ƒç”¨äº†sendå‡½æ•°ï¼Œä½†æ˜¯xhrçš„çŠ¶æ€ä¸€ç›´éƒ½æ˜¯0ï¼Œä¹Ÿä¸ä¼šè§¦å‘onreadystatechangeäº‹ä»¶ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°JSONPçš„è¯·æ±‚æ–¹å¼äº†ã€‚ JSONP(JSON with Padding) æ˜¯ä¸€ç§è·¨åŸŸè¯·æ±‚æ–¹å¼ã€‚ä¸»è¦åŸç†æ˜¯åˆ©ç”¨äº†scriptæ ‡ç­¾å¯ä»¥è·¨åŸŸè¯·æ±‚çš„ç‰¹ç‚¹ï¼Œç”±å…¶srcå±æ€§å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›jsä»£ç ï¼Œç½‘é¡µç«¯æ¥å—å“åº”ï¼Œç„¶åå°±ç›´æ¥æ‰§è¡Œäº†ï¼Œè¿™å’Œé€šè¿‡scriptæ ‡ç­¾å¼•ç”¨å¤–éƒ¨æ–‡ä»¶çš„åŸç†æ˜¯ä¸€æ ·çš„ã€‚ JSONPç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå›è°ƒå‡½æ•°å’Œæ•°æ®ï¼Œå›è°ƒå‡½æ•°ä¸€èˆ¬æ˜¯ç”±ç½‘é¡µç«¯æ§åˆ¶ï¼Œä½œä¸ºå‚æ•°å‘å¾€æœåŠ¡å™¨ç«¯ï¼ŒæœåŠ¡å™¨ç«¯æŠŠè¯¥å‡½æ•°å’Œæ•°æ®æ‹¼æˆå­—ç¬¦ä¸²è¿”å›ã€‚ æ¯”å¦‚ç½‘é¡µç«¯åˆ›å»ºä¸€ä¸ªscriptæ ‡ç­¾ï¼Œå¹¶ç»™å…¶srcèµ‹å€¼ä¸º http://www.test.com/json/?callback=processï¼Œ æ­¤æ—¶ç½‘é¡µç«¯å°±å‘èµ·ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡ç«¯å°†è¦è¿”å›çš„æ•°æ®æ‹¼ä½œä¸ºå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼ŒæœåŠ¡ç«¯è¿”å›çš„æ•°æ®æ ¼å¼ç±»ä¼¼â€process({â€˜name:â€™xieyufeiâ€™})â€ï¼Œç½‘é¡µç«¯æ¥æ”¶åˆ°äº†å“åº”å€¼ï¼Œå› ä¸ºè¯·æ±‚è€…æ˜¯ scriptï¼Œæ‰€ä»¥ç›¸å½“äºç›´æ¥è°ƒç”¨processæ–¹æ³•ï¼Œå¹¶ä¸”ä¼ å…¥äº†ä¸€ä¸ªå‚æ•°ã€‚ ä¸è¯´è¯ç›´æ¥è´´ä»£ç ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041/*** é€šè¿‡JSONPçš„æ–¹å¼è¯·æ±‚* @param &#123;[type]&#125; params [description]* @return &#123;[type]&#125; [description]*/ajaxJSONP(params) &#123; params.data = params.data || &#123;&#125;; params.jsonp = params.jsonp || &#x27;callback&#x27;; // è®¾ç½®ä¼ é€’ç»™åå°çš„å›è°ƒå‚æ•°åå’Œå‚æ•°å€¼ var callbackName = &#x27;jsonp_&#x27; + (new Date()).getTime(); params.data[params.jsonp] = callbackName; var formatedParams = this.formateParams(params.data, params.cache); //åˆ›å»ºscriptæ ‡ç­¾å¹¶æ’å…¥åˆ°é¡µé¢ä¸­ var head = document.getElementsByTagName(&#x27;head&#x27;)[0]; var script = document.createElement(&#x27;script&#x27;); head.appendChild(script); //åˆ›å»ºjsonpå›è°ƒå‡½æ•° window[callbackName] = function(json) &#123; head.removeChild(script); clearTimeout(script.timer); window[callbackName] = null; params.success &amp;&amp; params.success(json); &#125;; //å‘é€è¯·æ±‚ script.src = (!!formatedParams ? params.url + &#x27;?&#x27; + formatedParams : params.url); //ä¸ºäº†å¾—çŸ¥æ­¤æ¬¡è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œè®¾ç½®è¶…æ—¶å¤„ç† if (params.time) &#123; script.timer = setTimeout(function() &#123; window[callbackName] = null; head.removeChild(script); params.error &amp;&amp; params.error(&#123; message: &#x27;è¶…æ—¶&#x27; &#125;); &#125;, params.time); &#125;&#125; ç»™scriptæ ‡ç­¾è®¾ç½®srcå±æ€§æ—¶æµè§ˆå™¨å°±ä¼šå»å‘é€è¯·æ±‚ï¼Œä½†æ˜¯åªèƒ½å‘é€ä¸€æ¬¡è¯·æ±‚ï¼Œå¯¼è‡´scriptæ ‡ç­¾ä¸èƒ½å¤ç”¨ï¼Œå› æ­¤æ¯æ¬¡æ“ä½œå®Œéƒ½éœ€è¦æŠŠscriptæ ‡ç­¾ç§»é™¤ã€‚åœ¨æµè§ˆå™¨å‘é€è¯·æ±‚ä¹‹å‰ç»™å…¨å±€ç»‘å®šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå½“æ•°æ®è¯·æ±‚æˆåŠŸæ—¶å°±ä¼šè°ƒç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ã€‚ æ€»ç»“ å°†ä¸¤ç§å‘é€å¼‚æ­¥æ•°æ®çš„æ–¹å¼æ•´åˆèµ·æ¥ï¼Œæ ¹æ®dataTypeæ¥è¿›è¡Œåˆ¤æ–­é€‰ç”¨å“ªç§æ–¹å¼ã€‚è´´ä¸Šå®Œæ•´çš„ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134var xyfAjax = &#123; ajax: function(params) &#123; params = params || &#123;&#125;; params.cache = params.cache || false; if (!params.url) &#123; throw new Error(&#x27;å‚æ•°ä¸åˆæ³•&#x27;); &#125; params.dataType = (params.dataType || &#x27;json&#x27;).toLowerCase(); if (params.dataType == &#x27;jsonp&#x27;) &#123; this.ajaxJSONP(params); &#125; else if (params.dataType == &#x27;json&#x27;) &#123; this.ajaxJSON(params); &#125; &#125;, /** * é€šè¿‡JSONPçš„æ–¹å¼è¯·æ±‚ * @param &#123;[type]&#125; params [description] * @return &#123;[type]&#125; [description] */ ajaxJSONP(params) &#123; params.data = params.data || &#123;&#125;; params.jsonp = params.jsonp || &#x27;callback&#x27;; // è®¾ç½®ä¼ é€’ç»™åå°çš„å›è°ƒå‚æ•°åå’Œå‚æ•°å€¼ var callbackName = &#x27;jsonp_&#x27; + (new Date()).getTime(); params.data[params.jsonp] = callbackName; var formatedParams = this.formateParams(params.data, params.cache); //åˆ›å»ºscriptæ ‡ç­¾å¹¶æ’å…¥åˆ°é¡µé¢ä¸­ var head = document.getElementsByTagName(&#x27;head&#x27;)[0]; var script = document.createElement(&#x27;script&#x27;); head.appendChild(script); //åˆ›å»ºjsonpå›è°ƒå‡½æ•° window[callbackName] = function(json) &#123; head.removeChild(script); clearTimeout(script.timer); window[callbackName] = null; params.success &amp;&amp; params.success(json); &#125;; //å‘é€è¯·æ±‚ script.src = (!!formatedParams ? params.url + &#x27;?&#x27; + formatedParams : params.url); //ä¸ºäº†å¾—çŸ¥æ­¤æ¬¡è¯·æ±‚æ˜¯å¦æˆåŠŸï¼Œè®¾ç½®è¶…æ—¶å¤„ç† if (params.time) &#123; script.timer = setTimeout(function() &#123; window[callbackName] = null; head.removeChild(script); params.error &amp;&amp; params.error(&#123; message: &#x27;è¶…æ—¶&#x27; &#125;); &#125;, params.time); &#125; &#125;, /** * é€šè¿‡JSONçš„æ–¹å¼è¯·æ±‚ * @param &#123;[type]&#125; params [description] * @return &#123;[type]&#125; [description] */ ajaxJSON(params) &#123; params.type = (params.type || &#x27;GET&#x27;).toUpperCase(); params.data = params.data || &#123;&#125;; var formatedParams = this.formateParams(params.data, params.cache); var xhr; //åˆ›å»ºXMLHttpRequestå¯¹è±¡ if (window.XMLHttpRequest) &#123; //éIE6 xhr = new XMLHttpRequest(); &#125; else &#123; xhr = new ActiveXObject(&#x27;Microsoft.XMLHTTP&#x27;); &#125; //å¼‚æ­¥çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ¥æ”¶å“åº”æ•°æ® xhr.onreadystatechange = function() &#123; if (xhr.readyState == 4 &amp;&amp; xhr.status == 200) &#123; if (!!params.success) &#123; if (typeof xhr.responseText == &#x27;string&#x27;) &#123; params.success(JSON.parse(xhr.responseText)); &#125; else &#123; params.success(xhr.responseText); &#125; &#125; &#125; else &#123; params.error &amp;&amp; params.error(status); &#125; &#125; if (params.type == &#x27;GET&#x27;) &#123; //è¿æ¥æœåŠ¡å™¨ xhr.open(&#x27;GET&#x27;, (!!formatedParams ? params.url + &#x27;?&#x27; + formatedParams : params.url), true); //å‘é€è¯·æ±‚ xhr.send(null); &#125; else &#123; //è¿æ¥æœåŠ¡å™¨ xhr.open(&#x27;POST&#x27;, params.url, true); xhr.setRequestHeader(&#x27;Content-Type&#x27;, &#x27;application/x-www-form-urlencoded&#x27;); //å‘é€è¯·æ±‚ xhr.send(formatedParams); &#125; &#125;, /** * æ ¼å¼åŒ–æ•°æ® * @param &#123;Obj&#125; data éœ€è¦æ ¼å¼åŒ–çš„æ•°æ® * @param &#123;Boolean&#125; isCache æ˜¯å¦åŠ å…¥éšæœºå‚æ•° * @return &#123;String&#125; è¿”å›çš„å­—ç¬¦ä¸² */ formateParams: function(data, isCache) &#123; var arr = []; for (var name in data) &#123; arr.push(encodeURIComponent(name) + &#x27;=&#x27; + encodeURIComponent(data[name])); &#125; if (isCache) &#123; arr.push(&#x27;v=&#x27; + (new Date()).getTime()); &#125; return arr.join(&#x27;&amp;&#x27;); &#125;&#125;xyfAjax.ajax(&#123; url:&#x27;http://www.xieyufei.com&#x27;, type:&#x27;get&#x27;, //or post dataType:&#x27;json&#x27;, //or jsonp data:&#123; name:&#x27;xyf&#x27; &#125;, success: function(data)&#123; console.log(data) &#125;&#125;)","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"}]},{"title":"JavaScriptæ·±å…¥ç†è§£åŸå‹å’ŒåŸå‹é“¾","date":"2017-04-16T04:07:49.000Z","path":"2017/04/16/FrontEnd-JS-Prototype.html","text":"åœ¨JavaScriptä¸­ï¼ŒåŸå‹å’Œé—­åŒ…æ˜¯è¿™é—¨è¯­è¨€çš„ä¸¤ä¸ªç‰¹ç‚¹ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯è¿™é—¨è¯­è¨€çš„ä¸¤ä¸ªéš¾ç‚¹ï¼Œåœ¨jsä¸­é—­åŒ…çš„ç”¨æ³•æ•´ç†ä¸­ï¼Œç®€å•æ•´ç†äº†ä¸€ä¸‹é—­åŒ…çš„äº§ç”Ÿå’Œç”¨æ³•ã€‚åœ¨é¢è¯•ä¸­ï¼ŒåŸå‹ä¹Ÿæ˜¯é¢è¯•å®˜æœ€å–œæ¬¢é—®çš„ä¸€ä¸ªç‚¹ã€‚ æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡æˆ‘ä»¬å…ˆä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼š 12345function Person() &#123;&#125;var person = new Person();person.name = &#x27;name&#x27;;console.log(person.name) // name åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒPersonå°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨newåˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¯¹è±¡personã€‚ å¾ˆç®€å•å§ï¼Œæ¥ä¸‹æ¥è¿›å…¥æ­£é¢˜ï¼š prototypeæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªprototypeå±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬ç»å¸¸åœ¨å„ç§ä¾‹å­ä¸­çœ‹åˆ°çš„é‚£ä¸ªprototypeï¼Œæ¯”å¦‚ï¼š 1234567891011function Person() &#123;&#125;// è™½ç„¶å†™åœ¨æ³¨é‡Šé‡Œï¼Œä½†æ˜¯ä½ è¦æ³¨æ„ï¼š// prototypeæ˜¯å‡½æ•°æ‰ä¼šæœ‰çš„å±æ€§Person.prototype.name = &#x27;name&#x27;;var person1 = new Person();var person2 = new Person();console.log(person1.name) // nameconsole.log(person2.name) // name é‚£è¿™ä¸ªå‡½æ•°çš„prototypeå±æ€§åˆ°åº•æŒ‡å‘çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è¿™ä¸ªå‡½æ•°çš„åŸå‹å—ï¼Ÿ å…¶å®ï¼Œå‡½æ•°çš„prototypeå±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ­£æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹,ä¹Ÿå°±æ˜¯è¿™ä¸ªä¾‹å­ä¸­çš„person1å’Œperson2çš„åŸå‹ã€‚ é‚£ä¹ˆä»€ä¹ˆæ˜¯åŸå‹å‘¢ï¼Ÿä½ å¯ä»¥è¿™æ ·ç†è§£ï¼šæ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(nullé™¤å¤–)åœ¨åˆ›å»ºçš„æ—¶å€™å°±ä¼šä¸ä¹‹å…³è”å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åŸå‹ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹â€ç»§æ‰¿â€å±æ€§ã€‚ è®©æˆ‘ä»¬ç”¨ä¸€å¼ å›¾è¡¨ç¤ºæ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹ä¹‹é—´çš„å…³ç³»ï¼š åœ¨è¿™å¼ å›¾ä¸­æˆ‘ä»¬ç”¨Object.prototypeè¡¨ç¤ºå®ä¾‹åŸå‹ é‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆè¡¨ç¤ºå®ä¾‹ä¸å®ä¾‹åŸå‹ï¼Œä¹Ÿå°±æ˜¯personå’ŒPerson.prototypeä¹‹é—´çš„å…³ç³»å‘¢ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦è®²åˆ°ç¬¬äºŒä¸ªå±æ€§ï¼š __proto__è¿™æ˜¯æ¯ä¸€ä¸ªJavaScriptå¯¹è±¡(é™¤äº†null)éƒ½å…·æœ‰çš„ä¸€ä¸ªå±æ€§ï¼Œå«__proto__ï¼Œè¿™ä¸ªå±æ€§ä¼šæŒ‡å‘è¯¥å¯¹è±¡çš„åŸå‹ã€‚ ä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹,æˆ‘ä»¬å¯ä»¥åœ¨ç«ç‹æˆ–è€…è°·æ­Œä¸­è¾“å…¥ï¼š 1234function Person() &#123;&#125;var person = new Person();console.log(person.__proto__ === Person.prototype); //true äºæ˜¯æˆ‘ä»¬æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š æ—¢ç„¶å®ä¾‹å¯¹è±¡å’Œæ„é€ å‡½æ•°éƒ½å¯ä»¥æŒ‡å‘åŸå‹ï¼Œé‚£ä¹ˆåŸå‹æ˜¯å¦æœ‰å±æ€§æŒ‡å‘æ„é€ å‡½æ•°æˆ–è€…å®ä¾‹å‘¢ï¼Ÿ constructoræŒ‡å‘å®ä¾‹å€’æ˜¯æ²¡æœ‰ï¼Œå› ä¸ºä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ç”Ÿæˆå¤šä¸ªå®ä¾‹ï¼Œä½†æ˜¯åŸå‹æŒ‡å‘æ„é€ å‡½æ•°å€’æ˜¯æœ‰çš„ï¼Œè¿™å°±è¦è®²åˆ°ç¬¬ä¸‰ä¸ªå±æ€§ï¼šconstrucotrï¼Œæ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•° ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ï¼š 123function Person() &#123;&#125;console.log(Person === Person.prototype.constructor); //true æ‰€ä»¥å†æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š ç»¼ä¸Šæˆ‘ä»¬å·²ç»å¾—å‡ºï¼š 123456789function Person() &#123;&#125;var person = new Person();console.log(person.__proto__ == Person.prototype) // trueconsole.log(Person.prototype.constructor == Person) // true// é¡ºä¾¿å­¦ä¹ ä¸€ä¸ªES5çš„æ–¹æ³•,å¯ä»¥è·å¾—å¯¹è±¡çš„åŸå‹console.log(Object.getPrototypeOf(person) === Person.prototype) //true äº†è§£äº†æ„é€ å‡½æ•°ã€å®ä¾‹åŸå‹ã€å’Œå®ä¾‹ä¹‹é—´çš„å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è®²è®²å®ä¾‹å’ŒåŸå‹çš„å…³ç³»ï¼š å®ä¾‹ä¸åŸå‹å½“è¯»å–å®ä¾‹çš„å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŸ¥æ‰¾ä¸å¯¹è±¡å…³è”çš„åŸå‹ä¸­çš„å±æ€§ï¼Œå¦‚æœè¿˜æŸ¥ä¸åˆ°ï¼Œå°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶å±‚ä¸ºæ­¢ã€‚ ä¸¾ä¸ªä¾‹å­ï¼š 1234567891011function Person() &#123;&#125;Person.prototype.name = &#x27;name&#x27;;var person = new Person();person.name = &#x27;name of this person&#x27;;console.log(person.name) // name of this persondelete person.name;console.log(person.name) // name åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†personçš„nameå±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯»å–åˆ°ä¸ºâ€™name of this personâ€™ï¼Œå½“æˆ‘ä»¬åˆ é™¤äº†personçš„nameå±æ€§æ—¶ï¼Œè¯»å–person.nameï¼Œä»personä¸­æ‰¾ä¸åˆ°å°±ä¼šä»personçš„åŸå‹ä¹Ÿå°±æ˜¯person.__proto__ == Person.prototypeä¸­æŸ¥æ‰¾ï¼Œå¹¸è¿çš„æ˜¯æˆ‘ä»¬æ‰¾åˆ°äº†ä¸ºâ€™nameâ€™ï¼Œä½†æ˜¯ä¸‡ä¸€è¿˜æ²¡æœ‰æ‰¾åˆ°å‘¢ï¼ŸåŸå‹çš„åŸå‹åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ åœ¨å‰é¢ï¼Œæˆ‘ä»¬å·²ç»è®²äº†åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æœ€åŸå§‹çš„æ–¹å¼åˆ›å»ºå®ƒï¼Œé‚£å°±æ˜¯ 1234var obj = new Object();obj.name = &#x27;name&#x27;console.log(obj.name) // name æ‰€ä»¥åŸå‹å¯¹è±¡æ˜¯é€šè¿‡Objectæ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œç»“åˆä¹‹å‰æ‰€è®²,å®ä¾‹çš„__proto__æŒ‡å‘æ„é€ å‡½æ•°çš„prototype,æ‰€ä»¥æˆ‘ä»¬å†æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š åŸå‹é“¾é‚£Object.prototypeçš„åŸå‹å‘¢ï¼Ÿ nullï¼Œå—¯ï¼Œå°±æ˜¯null,æ‰€ä»¥æŸ¥åˆ°Object.prototypeå°±å¯ä»¥åœæ­¢æŸ¥æ‰¾äº† æ‰€ä»¥æœ€åä¸€å¼ å…³ç³»å›¾å°±æ˜¯ é¡ºä¾¿è¿˜è¦è¯´ä¸€ä¸‹ï¼Œå›¾ä¸­ç”±ç›¸äº’å…³è”çš„åŸå‹ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ï¼Œä¹Ÿå°±æ˜¯è“è‰²çš„è¿™æ¡çº¿ã€‚ è¡¥å……æœ€åï¼Œè¡¥å……å’Œçº æ­£æœ¬æ–‡ä¸­ä¸€äº›ä¸ä¸¥è°¨çš„åœ°æ–¹ï¼š é¦–å…ˆæ˜¯constructor, 12345function Person() &#123;&#125;var person = new Person();console.log(person.constructor === Person); // true å½“è·å–person.constructoræ—¶ï¼Œå…¶å®personä¸­å¹¶æ²¡æœ‰constructorå±æ€§,å½“ä¸èƒ½è¯»å–åˆ°constructorå±æ€§æ—¶ï¼Œä¼šä»personçš„åŸå‹ä¹Ÿå°±æ˜¯Person.prototypeä¸­è¯»å–ï¼Œæ­£å¥½åŸå‹ä¸­æœ‰è¯¥å±æ€§ï¼Œæ‰€ä»¥ 1person.constructor === Person.prototype.constructor å…¶æ¬¡æ˜¯__proto__, ç»å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªéæ ‡å‡†çš„æ–¹æ³•è®¿é—®åŸå‹ï¼Œç„¶è€Œå®ƒå¹¶ä¸å­˜åœ¨ä¸Person.prototypeä¸­ï¼Œå®é™…ä¸Šï¼Œå®ƒæ˜¯æ¥è‡ªäºObject.prototypeï¼Œä¸å…¶è¯´æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ä¸ªgetter/setterï¼Œå½“ä½¿ç”¨obj.__proto__æ—¶ï¼Œå¯ä»¥ç†è§£æˆè¿”å›äº†Object.getPrototypeOf(obj) æœ€åæ˜¯å…³äºç»§æ‰¿ï¼Œå‰é¢æˆ‘ä»¬è®²åˆ°â€œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹â€ç»§æ‰¿â€å±æ€§â€,å®é™…ä¸Šï¼Œç»§æ‰¿æ˜¯ä¸€ä¸ªååˆ†å…·æœ‰è¿·æƒ‘æ€§çš„è¯´æ³•ï¼Œå¼•ç”¨ã€Šä½ ä¸çŸ¥é“çš„JavaScriptã€‹ä¸­çš„è¯ï¼Œå°±æ˜¯:ç»§æ‰¿æ„å‘³ç€å¤åˆ¶æ“ä½œï¼Œç„¶è€ŒJavaScripté»˜è®¤å¹¶ä¸ä¼šå¤åˆ¶å¯¹è±¡çš„å±æ€§ï¼Œç›¸åï¼ŒJavaScriptåªæ˜¯åœ¨ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€ä¸ªå…³è”ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥é€šè¿‡å§”æ‰˜è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œå‡½æ•°ï¼Œæ‰€ä»¥ä¸å…¶å«ç»§æ‰¿ï¼Œå§”æ‰˜çš„è¯´æ³•åè€Œæ›´å‡†ç¡®äº›ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"}]},{"title":"èµ°è¿›ç½‘é¡µè™šæ‹Ÿç°å®WebVR","date":"2017-04-09T12:51:00.000Z","path":"2017/04/09/FrontEnd-Panorama.html","text":"æœ€è¿‘å‡ å¹´ï¼Œè™šæ‹Ÿç°å®VRçš„æ¦‚å¿µç«äº†ä¸€æŠŠï¼Œå„ç§VRæ¦‚å¿µçš„æ¸¸æˆã€è®¾å¤‡ã€è§†é¢‘å—åˆ°äººä»¬çš„å¹¿æ³›å…³æ³¨ã€‚ç¬”è€…åœ¨é€›å•†åœºçš„æ—¶å€™ä¹Ÿç»å¸¸ä¼šçœ‹åˆ°æœ‰VRè®¾å¤‡ä½“éªŒçš„åœ°æ–¹è®©æ¸¸äººä½“éªŒä¸€æŠŠï¼Œå„ç§é…·ç‚«çš„å¤´ç›”å’Œé…·ç‚«çš„è®¾å¤‡ç€å®æŠ“äººçœ¼çƒã€‚ä½†æ˜¯ä½œä¸ºä¸€ä¸ªå‰ç«¯å·¥ä½œè€…ï¼Œæˆ‘ä»¬è‚¯å®šä¹Ÿå¸Œæœ›åœ¨æˆ‘ä»¬çš„ç½‘é¡µé‡Œä¹Ÿèƒ½çœ‹åˆ°è¿™ä¹ˆé…·ç‚«çš„æ•ˆæœï¼Œä¸ç»æ„é—´åœ¨ç½‘ä¸Šå‘ç°äº†ä¸€ä¸ªç½‘é¡µè™šæ‹Ÿç°å®æ¡†æ¶A-Frameï¼Œåˆ†äº«ä¸€ä¸‹ç¬”è€…çš„ä½¿ç”¨å¿ƒå¾—ã€‚ ä»‹ç» A-Frameæ˜¯Mozillaå‘å¸ƒçš„ä¸€ä¸ªå…¨æ–°çš„å¼€æºæ¡†æ¶ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¼€å‘åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„é«˜æ€§èƒ½å“åº”å¼çš„VRä½“éªŒã€‚åªéœ€è¦åœ¨é¡µé¢ä¸­å¼•å…¥aFrame.min.jså°±èƒ½å¤Ÿé›†æˆæ”¯æŒVRé¡µé¢æ‰€éœ€è¦çš„ç»„ä»¶äº†ã€‚ ä¼˜ç‚¹åŸºäºDOM æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„JavaScript DOM APIæ¥æ“çºµA-Frameåœºæ™¯æ¥æ·»åŠ é€»è¾‘ï¼Œè¡Œä¸ºå’ŒåŠŸèƒ½ã€‚åŒæ—¶ï¼ŒA-Frameæ˜¯åŸºäºDOMçš„ï¼Œç°åœ¨ä¸€äº›æµè¡Œçš„æ¡†æ¶èƒ½å¤ŸåŸºäºA-Frameå·¥ä½œï¼Œæ¯”å¦‚Reactã€Vueã€jQueryå’ŒAngularã€‚ å®ä½“ç»„ä»¶ç³»ç»Ÿ A-Frameæ˜¯ä¸€ä¸ªåŸºäºthree.jsçš„å®ä½“ç»„ä»¶ç³»ç»Ÿã€‚åœ¨A-Frameé‡Œä¸€åˆ‡éƒ½æ˜¯å®ä½“ï¼Œæˆ‘ä»¬æ’å…¥ç»„ä»¶ï¼Œå¯ä»¥éšæ„æ’°å†™å¤–è§‚ï¼Œè¡Œä¸ºå’ŒåŠŸèƒ½é›†æˆã€‚ ä¸°å¯Œçš„ç”Ÿæ€ç³»ç»Ÿ A-Frameé…å¤‡äº†å¤šä¸ªç»„ä»¶ï¼Œä½†ç”±äºA-Frameåœ¨å…¶æ ¸å¿ƒéƒ¨åˆ†æ˜¯å®Œå…¨å¯æ‰©å±•çš„ï¼Œç¤¾åŒºå·²ç»ä¸ºç”Ÿæ€ç³»ç»Ÿå¡«å……äº†è®¸å¤šç»„ä»¶ï¼Œå¦‚ç‰©ç†ï¼Œç²’å­ç³»ç»Ÿï¼ŒéŸ³é¢‘å¯è§†åŒ–å’ŒLeap Motionæ§ä»¶ã€‚è¿™ä¸ªç”Ÿæ€ç³»ç»Ÿæ˜¯A-Frameçš„å‘½è„‰ã€‚å¼€å‘äººå‘˜å¯ä»¥æ„å»ºä¸€ä¸ªç»„ä»¶å¹¶å‘å¸ƒå®ƒï¼Œç„¶åå…¶ä»–äººå¯ä»¥ä½¿ç”¨è¯¥ç»„ä»¶å¹¶ç›´æ¥ä»HTMLä½¿ç”¨ï¼Œç”šè‡³ä¸å¿…çŸ¥é“ä»»ä½•JavaScriptã€‚ å¼ºå¤§çš„å¯è§†åŒ–æ£€æŸ¥å™¨ å¯è§†åŒ–ç¼–è¾‘å™¨ç”¨äºæ£€æŸ¥å’Œç¼–è¾‘Aæ¡†æ¶åœºæ™¯çš„å¯è§†åŒ–å·¥å…·ã€‚ä¸æµè§ˆå™¨çš„DOMæ£€æŸ¥å™¨ç±»ä¼¼ï¼Œæ‚¨å¯ä»¥è¿›å…¥ä»»ä½•A-Frameåœºæ™¯ï¼Œæœ¬åœ°æˆ–Webä¸Šï¼Œç„¶åç‚¹å‡»ctrl+alt+ié”®ç›˜ã€‚ è¿™å°†æ‰“å¼€è§†è§‰æ£€æŸ¥å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­è¿›è¡Œæ›´æ”¹ã€‚å¯ä»¥åœ¨è§†è§‰ä¸Šç§»åŠ¨å’Œæ”¾ç½®ç‰©ä½“ï¼Œç”¨ç»„ä»¶çš„å±æ€§éšæ„çš„æŒªåŠ¨ç‰©ä½“ï¼Œæˆ–è€…å›´ç»•ç›¸æœºå¹³ç§»ä»¥æŸ¥çœ‹åœºæ™¯çš„ä¸åŒè§†å›¾ã€‚ ç»„ä»¶ ä»‹ç»äº†è¿™ä¹ˆå¤šï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹A-Frameæ˜¯å¦‚ä½•æ¥æ„é€ ç»„ä»¶çš„ã€‚ a-scene ä¸€ä¸ªåœºæ™¯æ˜¯ç”±a-sceneåˆ›å»ºçš„ï¼Œæ˜¯å…¨æ™¯æ¸²æŸ“çš„æ ¹å¯¹è±¡ï¼Œæ‰€æœ‰çš„å…ƒç´ éƒ½éœ€è¦æ”¾åœ¨a-sceneè¿™ä¸ªç»„ä»¶é‡Œã€‚å®ƒä¼šå¤„ç†3Dæ‰€éœ€çš„æ‰€æœ‰è®¾ç½®ï¼šè®¾ç½®WebGLã€ç”»å¸ƒã€ç›¸æœºã€ç¯å…‰ã€æ¸²æŸ“å™¨ã€æ¸²æŸ“å¾ªç¯ä»¥åŠå¼€å¯åŠæ—¶çš„WebVRæ”¯æŒã€‚ a-sky æ¯ä¸€ä¸ªåœºæ™¯éƒ½éœ€è¦ä¸€ä¸ªèƒŒæ™¯ï¼Œa-skyæ ‡ç­¾ç”¨æ¥è®¾ç½®åœºæ™¯çš„èƒŒæ™¯ï¼Œå¯ä»¥ç›´æ¥æ”¾ç½®srcä¸ºå…¨æ™¯å›¾ç‰‡ï¼Œæˆ–è€…ç›´æ¥æ¸²æŸ“colorå€¼ã€‚ 123&lt;a-scene&gt; &lt;a-sky color=&quot;#ccc&quot; src=&quot;images/panorama.jpg&quot;&gt;&lt;/a-sky&gt;&lt;/a-scene&gt; å¦‚æœç›´æ¥æ¸²æŸ“äº†colorå€¼ï¼Œé‚£ä¹ˆæ•´ä¸ªèƒŒæ™¯å°±ä¼šå˜æˆè¯¥é¢œè‰²ï¼›å¦‚æœè®¾ç½®å…¨æ™¯å›¾ç‰‡ï¼Œå¯ä»¥å·¦å³ç§»åŠ¨æ¥æŸ¥çœ‹ã€‚æ•ˆæœé“¾æ¥æˆ³è¿™é‡Œã€‚ a-box æˆ‘ä»¬é€šè¿‡a-boxæ ‡ç­¾æ¥ç”Ÿæˆä¸€ä¸ªé•¿æ–¹ä½“ï¼Œæœ‰ä¸€ä¸‹å‡ ä¸ªé‡è¦çš„å±æ€§ï¼š widthï¼šå®½åº¦ heightï¼šé«˜åº¦ depthï¼šæ·±åº¦ colorï¼šé¢œè‰² positionï¼šä½ç½® rotationï¼šæ—‹è½¬ scaleï¼šç¼©æ”¾ 123456789101112&lt;a-scene&gt; &lt;a-sky color=&quot;#f0f0f0&quot;&gt;&lt;/a-sky&gt; &lt;a-box color=&quot;red&quot; depth=&quot;1&quot; height=&quot;1&quot; width=&quot;1&quot; position=&quot;0 2 -5&quot; rotation=&quot;0 45 45&quot; scale=&quot;1 1 1&quot;&gt; &lt;/a-box&gt;&lt;/a-scene&gt; æœ€åç”Ÿæˆä¸€ä¸ªé•¿1é«˜1æ·±1é¢œè‰²ä¸ºçº¢è‰²çš„é•¿æ–¹ä½“ï¼š a-assets ä½†æ˜¯å¦‚æœä»…ä»…æ˜¯çº¢è‰²çš„å¤–è§‚é‚£ä¹ˆå°±å¤ªå•è°ƒäº†ã€‚A-Frameå…è®¸æˆ‘ä»¬ç»™ç»„ä»¶è®¾ç½®çº¹ç†å›¾ç‰‡ï¼Œè™½ç„¶å¯ä»¥ç›´æ¥ç»™ç»„ä»¶è®¾ç½®srcå±æ€§ï¼Œä¸è¿‡ä¸æ¨èè¿™ç§åšæ³•ï¼Œæ¨èé€šè¿‡èµ„æºç®¡ç†ç³»ç»Ÿa-assetsã€‚ ä¸€èˆ¬åœ¨æ¸¸æˆç­‰è§†è§‰ä½“éªŒä¸°å¯Œçš„åœºæ™¯ä¸­ï¼Œç”±äºæœ‰ç€å¤§é‡çš„å›¾ç‰‡ã€æ¨¡å‹ã€å£°éŸ³ç­‰èµ„æºï¼Œéƒ½ä¼šå¯¹è¿™äº›èµ„æºè¿›è¡Œä¸€ä¸ªé¢„åŠ è½½å¤„ç†ï¼Œç¡®ä¿åœ¨æ¸²æŸ“çš„æ—¶å€™ä¸ä¼šå‡ºç°ç¼ºå¤±çš„ç°è±¡ã€‚ æˆ‘ä»¬æŠŠè¿™äº›èµ„æºæ”¾åˆ°a-assetsä¹Ÿæ˜¯ä¸ºäº†è¿›è¡Œé¢„åŠ è½½ã€‚æˆ‘ä»¬å¯ä»¥å­˜æ”¾ä»¥ä¸‹èµ„æºï¼š &lt;a-asset-item&gt;ï¼šå…¶ä»–èµ„äº§ï¼Œå¦‚3Dæ¨¡å‹å’Œææ–™ &lt;audio&gt;ï¼šå£°éŸ³æ–‡ä»¶ &lt;img&gt;ï¼šå›¾åƒçº¹ç† &lt;video&gt;ï¼šè§†é¢‘çº¹ç† æˆ‘ä»¬é€šè¿‡ç»™èµ„æºæ ‡å¿—ä¸€ä¸ªå”¯ä¸€çš„idï¼Œç„¶ååœ¨ç»„ä»¶çš„srcä¸­å¼•ç”¨è¿™ä¸ªidæ¥è¿›è¡Œè°ƒç”¨ã€‚ 123456789&lt;a-box src=&quot;#boxTexture&quot; depth=&quot;1&quot; height=&quot;1&quot; width=&quot;1&quot; position=&quot;0 2 -5&quot; rotation=&quot;0 45 45&quot; scale=&quot;1 1 1&quot;&gt;&lt;/a-box&gt; è¿™æ ·æˆ‘ä»¬çš„é•¿æ–¹ä½“å°±å˜æˆäº†ä¸€ä¸ªå¸¦æœ‰å›¾æ¡ˆçº¹ç†çš„é•¿æ–¹ä½“ã€‚ a-light æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨a-lightæ¥æ”¹å˜åœºæ™¯çš„äº®åº¦ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æŒ‡å®šä»»ä½•æŒ‡ç¤ºç¯ï¼ŒA-Frameå°†æ·»åŠ ç¯å¢ƒå…‰å’Œå®šå‘å…‰ã€‚å¦‚æœA-Frameæ²¡æœ‰ä¸ºæˆ‘ä»¬æ·»åŠ ç¯ï¼Œåœºæ™¯å°†æ˜¯é»‘è‰²çš„ã€‚ä¸€æ—¦æˆ‘ä»¬æ·»åŠ äº†æˆ‘ä»¬è‡ªå·±çš„ç¯ï¼Œé»˜è®¤çš„ç…§æ˜è®¾ç½®å°†è¢«åˆ é™¤ï¼Œå¹¶æ›¿æ¢ä¸ºæˆ‘ä»¬çš„è®¾ç½®ã€‚ æˆ‘ä»¬è¿˜ä¼šæ·»åŠ ä¸€ä¸ªç‚¹å…‰æºï¼Œç‚¹å…‰æºå°±åƒç¯æ³¡; æˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬æ”¾åœ¨åœºæ™¯å‘¨å›´ï¼Œç‚¹å…‰æºå¯¹å®ä½“çš„å½±å“å–å†³äºå®ƒä¸å®ä½“çš„è·ç¦»ã€‚ 12345678&lt;ï¼ - çº¢è‰²å®šå‘ç¯ä»å·¦ä¸Šæ–¹é—ªçƒã€‚ - &gt;&lt;a-light color=&quot;red&quot; position=&quot;-1 1 0&quot;&gt;&lt;/a-light&gt;&lt;ï¼ - è“ç‚¹å…‰ï¼Œ5ç±³ç©ºä¸­ã€‚ - &gt;&lt;a-light tpye=&quot;point&quot; color=&quot;blue&quot; position=&quot;0 5 0&quot;&gt;&lt;/a-light&gt;&lt;ï¼ - æ˜æš—ç¯å¢ƒç…§æ˜ã€‚ - &gt;&lt;a-light type=&quot;ambient&quot; color=&quot;yellow&quot;&gt;&lt;/a-light&gt; æˆ‘ä»¬ç»™ç¯å¢ƒä¸€ä¸ªé»„è‰²ç…§æ˜çš„å…‰æºï¼Œæœ€åçš„æ•ˆæœæ˜¯è¿™æ ·çš„ã€‚ a-animation æˆ‘ä»¬å¯ä»¥ä½¿ç”¨A-Frameçš„å†…ç½®åŠ¨ç”»ç³»ç»Ÿ&lt;a-animation&gt;å‘ç›’å­æ·»åŠ åŠ¨ç”»ã€‚æˆ‘ä»¬å¯ä»¥å°†&lt;a-animation&gt;å…ƒç´ ä½œä¸ºå®ä½“çš„å­ä»£ã€‚è®©æˆ‘ä»¬æŠŠç›’å­ä¸Šä¸‹æ‘†åŠ¨æ¥ç»™åœºæ™¯æ·»åŠ ä¸€äº›åŠ¨ä½œã€‚ 12345678910&lt;a-box src=&quot;#boxTexture&quot; depth=&quot;1&quot; height=&quot;1&quot; width=&quot;1&quot; position=&quot;0 2 -5&quot; rotation=&quot;0 45 45&quot; scale=&quot;1 1 1&quot;&gt; &lt;!-- åœ¨boxé‡Œé¢æ·»åŠ animationå…ƒç´  --&gt; &lt;a-animation attribute=&quot;position&quot; to=&quot;0 1 -5&quot; direction=&quot;alternate&quot; dur=&quot;2000&quot; repeat=&quot;indefinite&quot;&gt; &lt;/a-animation&gt;&lt;/a-box&gt; ä¸€äº›å±æ€§è¯´æ˜ï¼š attributeï¼šéœ€è¦æŠŠå“ªä¸ªå±æ€§ä½œä¸ºåŠ¨ç”» toï¼šå±æ€§åˆ°æŸä¸ªå€¼ directionï¼šæ–¹å‘ï¼Œalternateè¡¨ç¤ºæ¥å› durï¼šæ—¶é—´é—´éš” repeatï¼šé‡å¤æ¬¡æ•° a-text åœ¨A-Frameä¸­è¿˜å¯ä»¥æ·»åŠ æ–‡æœ¬ç»„ä»¶&lt;a-text&gt;ã€‚ 12345&lt;a-text value=&quot;Hello, A-Frame!&quot; color=&quot;#0abef0&quot; position=&quot;-0.9 0.2 -3&quot; scale=&quot;1.5 1.5 1.5&quot;&gt;&lt;/a-text&gt; æœ€åæ·»åŠ æ–‡å­—çš„æ•ˆæœï¼Œæ•ˆæœé“¾æ¥æˆ³è¿™é‡Œã€‚ a-cylinder åœ†ç­’åŸå‹æ˜¯å¤šåŠŸèƒ½çš„ï¼Œå¯ç”¨äºåˆ›å»ºä¸åŒç§ç±»çš„å½¢çŠ¶ï¼š 12345678&lt;!-- åŸºæœ¬åœ†ç­’ã€‚ -- &gt;&lt;a-cylinder color=&quot;crimson&quot; height=&quot;3&quot; radius=&quot;1.5&quot;&gt;&lt;/a-cylinder&gt;&lt;!-- å…­è§’å½¢ã€‚ -- &gt;&lt;a-cylinder color=&quot;cyan&quot; segments-radial=&quot;8&quot;&gt;&lt;/a-cylinder&gt;&lt;!-- åƒè±†äººã€‚ -- &gt;&lt;a-cylinder color=&quot;yellow&quot; theta-start=&quot;50&quot; theta-length=&quot;280&quot; side=&quot;double&quot;&gt;&lt;/a-cylinder &gt;&lt;!-- ç»¿è‰²ç®¡é“ã€‚ --&gt;&lt;a-cylinder color=&quot;green&quot; open-ended=&quot;true&quot;&gt;&lt;/a-cylinder&gt; a-cone ç”¨äºåˆ›é€ ä¸€ä¸ªæ¤ä½“ã€‚ 1&lt;a-cone position=&quot;0 0 -20&quot; rotation=&quot;35 45 30&quot; height=&quot;10&quot; radius-top=&quot;2&quot; radius-bottom=&quot;10&quot; color=&quot;#F3BA8D&quot;&gt;&lt;/a-cone&gt; ä½¿ç”¨JSå’ŒDOM åœ¨A-Frameä¸­ä¹Ÿæœ‰DOMå…ƒç´ ï¼Œé€šè¿‡querySelector()å’ŒquerySelectorAll()æ–¹æ³•æ¥æä¾›å…ƒç´ çš„éå†ï¼ŒæŸ¥è¯¢ï¼ŒæŸ¥æ‰¾å’Œé€‰æ‹©ã€‚è¿™ä¸ªå¾ˆåƒjQueryä¸­çš„é€‰æ‹©å™¨ã€‚ querySelector å¦‚æœæˆ‘ä»¬æƒ³æŠ“ä½ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨querySelector()è¿”å›é‚£ä¸€ä¸ªå…ƒç´ ã€‚æ¯”å¦‚æˆ‘ä»¬æ¥æŠ“ä½åœºæ™¯å…ƒç´ ï¼š 12var scene = document.querySelector(&#x27;a-scene&#x27;);console.log(scene); å¦‚æœå…ƒç´ å…·æœ‰IDï¼Œåˆ™å¯ä»¥ä½¿ç”¨IDé€‰æ‹©å™¨ï¼ˆå³ï¼Œ#ï¼‰ã€‚æˆ‘ä»¬æ¥æŠ“ä½ä¸€ä¸ªæœ‰ä¸€ä¸ªIDçš„çº¢è‰²æ¡†ã€‚ä¹‹å‰æˆ‘ä»¬åœ¨æ•´ä¸ªæ–‡æ¡£ä¸Šåšäº†ä¸€ä¸ªæŸ¥è¯¢é€‰æ‹©å™¨ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†åœ¨åœºæ™¯èŒƒå›´å†…åšä¸€ä¸ªæŸ¥è¯¢é€‰æ‹©å™¨ã€‚ä½¿ç”¨æŸ¥è¯¢é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸ¥è¯¢çš„èŒƒå›´é™åˆ¶åœ¨ä»»ä½•å…ƒç´ å†…ï¼š 12var scene = document.querySelector(&#x27;a-scene&#x27;);console.log(scene.querySelector(&#x27;#mybox&#x27;)); querySelectorAll å¦‚æœæˆ‘ä»¬è¦æŠ“å–ä¸€ç»„å…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨querySelector()å“ªä¸ªè¿”å›ä¸€ä¸ªå…ƒç´ æ•°ç»„ã€‚æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢å…ƒç´ åç§°ã€ç±»åã€å±æ€§åï¼š 12345678910// æŸ¥è¯¢å…ƒç´ åç§°console.log(document.querySelectorAll(&#x27;a-box&#x27;));// æŸ¥è¯¢ç±»åconsole.log(document.querySelectorAll(&#x27;.mybox&#x27;));// [// &lt;a-entity light=&quot;type:ambient&quot;&gt;&lt;/a-entity&gt;// &lt;a-entity light=&quot;type:directional&quot;&gt;&lt;/a-entity&gt;//]// æŸ¥è¯¢å±æ€§åconsole.log(document.querySelectorAll(&#x27;[light]&#x27;)); å¦‚æœæˆ‘ä»¬æŠ“ä½äº†ä¸€ç»„ä½¿ç”¨çš„å®ä½“querySelectorAll()ï¼Œæˆ‘ä»¬å¯ä»¥å¾ªç¯ä½¿ç”¨å®ƒä»¬forã€‚æˆ‘ä»¬å›´ç»•åœºæ™¯ä¸­çš„æ¯ä¸ªå…ƒç´ å¾ªç¯éå†ã€‚ 1234var els = document.querySelectorAll(&#x27;a-box&#x27;);for(var i = 0; i &lt; els.length; i++)&#123; console.log(els[i]);&#125; createElement è¦åˆ›å»ºä¸€ä¸ªå®ä½“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨document.createElementã€‚è¿™å°†ç»™æˆ‘ä»¬ä¸€ä¸ªç©ºç™½çš„å®ä½“ï¼š 1var el = document .createElement(&#x27;a-entity&#x27;); ä½†æ˜¯ï¼Œåœ¨å°†å®ä½“é™„åŠ åˆ°æˆ‘ä»¬çš„åœºæ™¯ä¹‹å‰ï¼Œè¯¥å®ä½“å°†ä¸ä¼šè¢«åˆå§‹åŒ–æˆ–è€…æˆä¸ºåœºæ™¯çš„ä¸€éƒ¨åˆ†ã€‚ appendChild è¦å‘DOMæ·»åŠ å®ä½“ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨.appendChild(element)ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³æŠŠå®ƒæ·»åŠ åˆ°æˆ‘ä»¬çš„åœºæ™¯ä¸­ã€‚æˆ‘ä»¬æŠ“ä½ç°åœºï¼Œåˆ›å»ºå®ä½“ï¼Œå¹¶å°†å®ä½“é™„åŠ åˆ°æˆ‘ä»¬çš„åœºæ™¯ã€‚ 123var sceneEl = document .querySelector(&#x27;a-scene&#x27;);var entityEl = document .createElement(&#x27;a-entity&#x27;);sceneEl.appendChild(entityEl); è¯·æ³¨æ„ï¼Œè¿™appendChild()æ–¹æ³•æ˜¯æµè§ˆå™¨ä¸­çš„å¼‚æ­¥æ“ä½œã€‚åœ¨å®ä½“å®Œæˆé™„åŠ åˆ°DOMä¹‹å‰ï¼Œæˆ‘ä»¬ä¸èƒ½å¯¹å®ä½“æ‰§è¡Œè®¸å¤šæ“ä½œï¼ˆå¦‚è°ƒç”¨.getAttribute()ï¼‰ã€‚å¦‚æœæˆ‘ä»¬éœ€è¦æŸ¥è¯¢åˆšè¢«è¿½åŠ çš„å®ä½“ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬loadedè¯¥å®ä½“ä¸Šçš„äº‹ä»¶ï¼Œæˆ–è€…å°†é€»è¾‘æ”¾åœ¨A-Frameç»„ä»¶ä¸­ï¼Œä»¥ä¾¿ä¸€æ—¦å®ƒè¢«å‡†å¤‡å¥½å°±æ‰§è¡Œï¼š removeChild è¦ä»DOMä¸­ç§»é™¤å®ä½“ï¼Œå› æ­¤ä»åœºæ™¯ä¸­åˆ é™¤ä¸€ä¸ªå®ä½“ï¼Œæˆ‘ä»¬removeChild(element)ä»çˆ¶å…ƒç´ è°ƒç”¨ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå®ä½“ï¼Œæˆ‘ä»¬å¿…é¡»è¦ç”¨å®ƒçš„parent(parentNode)å»é™¤å®ä½“ã€‚ 1entityEl.parentNode.removeChild(entityEl); setAttribute è¦æ›´æ–°ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨setAttribute()æ–¹æ³•ã€‚æ›´æ–°ç»„ä»¶éœ€è¦å‡ ç§å½¢å¼ã€‚å¦‚æœç»„ä»¶æ˜¯å•å±æ€§ç»„ä»¶ï¼Œåˆ™setAttributeå…¶è¡Œä¸ºä¸é€šå¸¸æƒ…å†µç›¸åŒï¼š 1entity.setAttribute(&#x27;visible&#x27;,false); ä½†æ˜¯å¦‚æœæ˜¯å•å±æ€§ï¼Œå®ƒå¯ä»¥å¤„ç†è¯¥å€¼çš„ç‰¹æ®Šè§£æã€‚ä¾‹å¦‚ï¼Œpositionç»„ä»¶æ˜¯å•å±æ€§ç»„ä»¶ï¼Œä½†å…¶å±æ€§ç±»å‹è§£æå™¨å…è®¸å®ƒå ç”¨ä¸€ä¸ªå¯¹è±¡ï¼š 1entity.setAttribute(&#x27;position&#x27;,&#123;x:1,y:2,z:3&#125;); è¦è®¾ç½®æˆ–æ›¿æ¢å¤šå±æ€§ç»„ä»¶çš„ç»„ä»¶æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’æ³¨å†Œç»„ä»¶çš„å±æ€§åç§°ï¼Œå¹¶å°†å±æ€§å¯¹è±¡ä¼ é€’ä¸ºvalueï¼š 12345entity.setAttribute(&#x27;light&#x27;, &#123; type: &#x27;spot&#x27;, distance: 30, intensity: 2.0&#125;); removeAttribute ä»DOMä¸­åˆ é™¤å±æ€§æˆ–è€…åˆ†ç¦»ç»„ä»¶ï¼Œè°ƒç”¨ç»„ä»¶çš„removeç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚ 12entity.removeAttribute(&#x27;goemetry&#x27;); //åˆ†ç¦»å‡ ä½•ç»„ä»¶ã€‚entity.removeAttribute(&#x27;sound&#x27;); //åˆ†ç¦»å£°éŸ³ç»„ä»¶ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¸¸æˆ","slug":"Game","permalink":"https://xieyufei.com/tags/Game/"}]},{"title":"è®°ä¸€æ¬¡é¡¹ç›®æ€»ç»“","date":"2017-03-29T09:06:49.000Z","path":"2017/03/29/Project-Summary.html","text":"è¿™ä¸€ä¸ªæœˆæ¥ä¸€ç›´åœ¨åšé¡¹ç›®ï¼Œåœ¨åšé¡¹ç›®çš„æ—¶å€™é‡åˆ°äº†ä¸å°‘çš„é—®é¢˜å’Œå‘ï¼Œå½’çº³äº†ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯æ–‡ä»¶ä¸Šä¼ ã€åœæ­¢Promiseé“¾å¼è°ƒç”¨å’Œchromeè‡ªåŠ¨å¡«å……ï¼Œæ•´ç†æ€»ç»“äº†ä¸€ä¸‹è§£å†³æ–¹æ³•ã€‚ ä¸€ã€æ–‡ä»¶ä¸Šä¼ é€‰æ‹©æ–‡ä»¶ åœ¨é€‰æ‹©æ–‡ä»¶ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ–‡ä»¶ç±»å‹è¿›è¡Œä¸€äº›è¿‡æ»¤çš„æ“ä½œã€‚ æ–‡ä»¶ç±»å‹ é€šè¿‡input:fileæ¥é€‰æ‹©æˆ‘ä»¬éœ€è¦çš„æ–‡ä»¶ç±»å‹ï¼Œæœ‰ä¸¤ä¸ªå±æ€§å€¼æ˜¯æˆ‘ä»¬éœ€è¦çš„ï¼š accept:è¡¨ç¤ºå¯ä»¥é€‰æ‹©çš„æ–‡ä»¶MIMEç±»å‹ï¼Œå¤šä¸ªMIMEç±»å‹ç”¨è‹±æ–‡é€—å·åˆ†å¼€ï¼Œå¸¸ç”¨çš„MIMEç±»å‹è§ä¸‹è¡¨ã€‚ multiple:æ˜¯å¦å¯ä»¥é€‰æ‹©å¤šä¸ªæ–‡ä»¶ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849åç¼€å MIMEåç§°*.3gpp audio/3gpp, video/3gpp*.ac3 audio/ac3*.asf allpication/vnd.ms-asf*.au audio/basic*.css text/css*.csv text/csv*.doc application/msword *.dot application/msword *.dtd application/xml-dtd *.dwg image/vnd.dwg *.dxf image/vnd.dxf*.gif image/gif *.htm text/html *.html text/html *.jp2 image/jp2 *.jpe image/jpeg*.jpeg image/jpeg*.jpg image/jpeg *.js text/javascript, application/javascript *.json application/json *.mp2 audio/mpeg, video/mpeg *.mp3 audio/mpeg *.mp4 audio/mp4, video/mp4 *.mpeg video/mpeg *.mpg video/mpeg *.mpp application/vnd.ms-project *.ogg application/ogg, audio/ogg *.pdf application/pdf *.png image/png *.pot application/vnd.ms-powerpoint *.pps application/vnd.ms-powerpoint *.ppt application/vnd.ms-powerpoint *.rtf application/rtf, text/rtf *.svf image/vnd.svf *.tif image/tiff *.tiff image/tiff *.txt text/plain *.wdb application/vnd.ms-works *.wps application/vnd.ms-works *.xhtml application/xhtml+xml *.xlc application/vnd.ms-excel *.xlm application/vnd.ms-excel *.xls application/vnd.ms-excel *.xlt application/vnd.ms-excel *.xlw application/vnd.ms-excel *.xml text/xml, application/xml *.zip aplication/zip *.xlsx application/vnd.openxmlformats-officedocument.spreadsheetml.sheet ä½†æ˜¯åœ¨å¼€å‘æ—¶ï¼Œæˆ‘ä»¬ä¹ æƒ¯æŠŠacceptè®¾ç½®ä¸ºimage/*æ¥è¿‡æ»¤æ‰€æœ‰éå›¾ç‰‡çš„æ–‡ä»¶ã€‚è™½ç„¶è¿™ç§æ–¹å¼ç®€å•ç²—æš´ï¼Œä½†æ˜¯åœ¨æ–°ç‰ˆæœ¬çš„chromeä¸­ï¼Œä¼šå‡ºç°ç‚¹å‡»inputä¹‹åï¼Œæ–‡ä»¶é€‰æ‹©æ¡†å¼¹å‡ºéå¸¸æ…¢çš„é—®é¢˜ã€‚å°†accept=&quot;image/*&quot;æ”¹ä¸ºæŒ‡å®šçš„å›¾ç‰‡æ ¼å¼ï¼Œæ¯”å¦‚æŒ‡å®šå‡ ç§å¸¸ç”¨æ ¼å¼ï¼Œå°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 1&lt;input type=&quot;file&quot; name=&quot;file&quot; accept=&quot;image/jpg,image/jpeg,image/png,image/gif&quot;&gt; æ–‡ä»¶è¯»å– åœ¨inputé€‰å–æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬changäº‹ä»¶æ¥è·å–æ‰€é€‰å–çš„æ–‡ä»¶ã€‚ 12345$(&#x27;input&#x27;).on(&#x27;change&#x27;,function()&#123; if(this.files &amp;&amp; this.files.length&gt;0)&#123; console.log(this.files); &#125;&#125;); è¿™é‡Œè·å–åˆ°çš„this.filesæ˜¯ä¸€ä¸ªFileListå¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡this.files[index]æ¥è·å–æ¯ä¸€ä¸ªæ–‡ä»¶ã€‚ è¿™ä¸ªæ•°ç»„å¯¹è±¡ä¸­çš„æ¯ä¸ªå¯¹è±¡æœ‰ä»¥ä¸‹å‡ ä¸ªå±æ€§ï¼š lastModified:ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´çš„æ—¶é—´æˆ³ lastModifiedDate:ä¸Šæ¬¡ä¿®æ”¹æ—¶é—´çš„æ—¥æœŸ name:æ–‡ä»¶åç§° size:æ–‡ä»¶å¤§å° type:æ–‡ä»¶ç±»å‹ webkitRelativePath: åœ¨è·å–åˆ°æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®typeå’Œsizeå¯¹æ–‡ä»¶çš„ç±»å‹å’Œå¤§å°è¿›è¡Œè¿‡æ»¤åŒ¹é…ã€‚åŒ¹é…åéœ€è¦å¯¹æ–‡ä»¶çš„å†…å®¹è¿›è¡Œè¯»å–ã€‚HTML5å®šä¹‰äº†ä¸€ä¸ªFileReaderå¯¹è±¡ç”¨æ¥è¯»å–æ–‡ä»¶ã€‚FileReaderä½¿ç”¨æ–¹å¼ä¹Ÿéå¸¸ç®€å•ï¼Œéœ€è¦åˆ›å»ºFileReaderå¯¹è±¡å¹¶è°ƒç”¨æ–¹æ³•ã€‚ 123if(window.FileReader)&#123; var fileReader = new FileReader();&#125; FileReaderçš„å®ä¾‹å¯¹è±¡æœ‰4ä¸ªæ–¹æ³•ï¼Œä¸‰ä¸ªæ–¹æ³•æ˜¯ç”¨æ¥è¯»å–æ–‡ä»¶çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ–¹æ³•ç”¨æ¥ä¸­æ–­è¯»å–ã€‚ æ–¹æ³• å‚æ•° æè¿° abort none ä¸­æ–­è¯»å– readAsBinaryString file å°†æ–‡ä»¶è¯»å–ä¸ºäºŒè¿›åˆ¶ç  readAsDataURL file å°†æ–‡ä»¶è¯»å–ä¸º DataURL readAsText file, [encoding] å°†æ–‡ä»¶è¯»å–ä¸ºæ–‡æœ¬ readAsTextä¸»è¦ç”¨æ¥è¯»å–æ–‡æœ¬æ–‡ä»¶çš„å†…å®¹ï¼ŒreadAsDataURLç”¨æ¥è¯»å–æ–‡ä»¶å¹¶å°†å…¶è½¬ä¸ºDataUrlæ ¼å¼ã€‚FileReaderè¿˜æœ‰ä¸€ç³»åˆ—å®Œæ•´çš„äº‹ä»¶å‡½æ•°ï¼Œç”¨æ¥æ•è·è¯»å–æ–‡ä»¶æ—¶çš„çŠ¶æ€ã€‚ äº‹ä»¶ æè¿° onabort ä¸­æ–­æ—¶è§¦å‘ onerror å‡ºé”™æ—¶è§¦å‘ onload æ–‡ä»¶è¯»å–æˆåŠŸå®Œæˆæ—¶è§¦å‘ onloadend è¯»å–å®Œæˆè§¦å‘ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥ onloadstart è¯»å–å¼€å§‹æ—¶è§¦å‘ onprogress è¯»å–ä¸­ æ–‡ä»¶ä¸€æ—¦å¼€å§‹è¯»å–ï¼Œæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼Œå®ä¾‹çš„resultå±æ€§éƒ½ä¼šè¢«å¡«å……ã€‚å¦‚æœè¯»å–å¤±è´¥ï¼Œåˆ™resultçš„å€¼ä¸º nullï¼Œå¦åˆ™å³æ˜¯è¯»å–çš„ç»“æœï¼Œç»å¤§å¤šæ•°çš„ç¨‹åºéƒ½ä¼šåœ¨æˆåŠŸè¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼ŒæŠ“å–è¿™ä¸ªå€¼ã€‚ 12345var fileReader = new FileReader();fileReader.readAsDataURL(imgFile);reader.onload = function(event) &#123; console.log(this.result);&#125; é€šè¿‡readAsDataURLæ¥è¯»å–å›¾ç‰‡å˜æˆDataUrlæ ¼å¼ã€‚å°†å…¶å­—ç¬¦ä¸²åµŒå…¥åˆ°é¡µé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯»å–åçš„å›¾ç‰‡ï¼Œé€šè¿‡è¿™ç§æ–¹å¼å®ç°é€‰å–å›¾ç‰‡åçš„é¢„è§ˆæ•ˆæœã€‚ 123456 &lt;img src=&quot;data:image/gif;base64,R0lGODlhMwAxAIAAAAAAAP///yH5BAAAAAAALAAAAAAzADEAAAK8jI+pBr0PowytzotTtbm/DTqQ6C3hGXElcraA9jIr66ozVpM3nseUvYP1UEHF0FUUHkNJxhLZfEJNvol06tzwrgdLbXsFZYmSMPnHLB+zNJFbq15+SOf50+6rG7lKOjwV1ibGdhHYRVYVJ9Wnk2HWtLdIWMSH9lfyODZoZTb4xdnpxQSEF9oyOWIqp6gaI9pI1Qo7BijbFZkoaAtEeiiLeKn72xM7vMZofJy8zJys2UxsCT3kO229LH1tXAAAOw==&quot;&gt; base64æ–¹å¼ä¸Šä¼  åœ¨é€šè¿‡readAsDataURLæ–¹æ³•è¯»å–åˆ°æ–‡ä»¶çš„DataUrlåï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¹ˆé•¿çš„å­—ç¬¦ä¸²ç›´æ¥æ”¾åˆ°ajaxä¸­ä½œä¸ºstringç±»å‹å‘é€åˆ°åå°è§£æï¼ˆå»ºè®®ä½¿ç”¨postæ–¹å¼ï¼‰ã€‚ä¸è¿‡ä¼šæœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå°±æ˜¯å¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼ŒæœåŠ¡å™¨å¯èƒ½ä¼šæ‹’ç»æ¥å—è¿™ä¹ˆé•¿çš„å­—ç¬¦ä¸²ã€‚ FormDataæ–¹å¼ä¸Šä¼  FormDataå¯¹è±¡æ˜¯HTML5æ–°å¢çš„ä¸€ä¸ªå¯¹è±¡ï¼Œç›®å‰ä¸€äº›ä¸»æµçš„æµè§ˆå™¨éƒ½å·²ç»å…¼å®¹äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡FormDataæ¥å‘æœåŠ¡å™¨ä¼ é€’æ•°æ®ã€‚ 1234567891011var formData = new FormData();formData.append(&#x27;username&#x27;,&#x27;corner&#x27;);formData.append(&#x27;pwd&#x27;,&#x27;corner&#x27;);$.ajax(&#123; url:&#x27;this is your url&#x27;, type:&#x27;get&#x27;, data:formData, success: function(data)&#123; console.log(data); &#125;&#125;); ä½†æ˜¯å¦‚æœè¿™æ ·ç›´æ¥æŠŠFormDataå¯¹è±¡ä½œä¸ºdataæ•°æ®æ¥å‘é€ï¼Œæµè§ˆå™¨ä¼šæŠ¥ä¸€ä¸ªéæ³•è°ƒç”¨çš„é”™è¯¯ã€‚ åœ¨å‘é€FormDataå¯¹è±¡æ—¶ï¼Œè¿˜éœ€è¦ç»™ajaxåŠ ä¸Šå¦å¤–ä¸¤ä¸ªå±æ€§ï¼š 12345678910$.ajax(&#123; url:&#x27;this is your url&#x27;, type:&#x27;get&#x27;, data:formData, processData:false, contentType:false, success: function(data)&#123; console.log(data); &#125;&#125;); jQueryåœ¨å‘é€å¼‚æ­¥è¯·æ±‚çš„æ—¶å€™ä¼šè‡ªåŠ¨å°†dataæ•°æ®è¿›è¡Œåºåˆ—åŒ–å¤„ç†ï¼Œè½¬åŒ–æˆkey/valueæ ¼å¼çš„å­—ç¬¦ä¸²ï¼ŒåŠ ä¸ŠprocessData:falseè¯´æ˜ç¦æ­¢å¯¹æ•°æ®è¿›è¡Œåºåˆ—åŒ–å¤„ç†ã€‚contentTypeç”¨æ¥æŒ‡å®šå‘é€è‡³æœåŠ¡å™¨æ—¶çš„å†…å®¹ç¼–ç ç±»å‹ã€‚ å¦‚æœæ¯ä¸ªè¡¨å•æ•°æ®éƒ½éœ€è¦ä½¿ç”¨appendæ¥æ·»åŠ å°±æ¯”è¾ƒéº»çƒ¦ï¼ŒFormDataè¿˜æ”¯æŒç›´æ¥ä»htmlä¸­çš„è¡¨å•ç”Ÿæˆæ•°æ®ï¼Œå°±æ˜¯åœ¨htmlé¡µé¢ä¸­å·²ç»æœ‰æ•°æ®äº†ï¼Œç„¶åFormDataå¯ä»¥ç›´æ¥æŠŠè¿™ä¸ªè¡¨å•çš„æ•°æ®å†™å…¥è¿™ä¸ªå¯¹è±¡ï¼Œç„¶åç›´æ¥æäº¤ç»™åå°ã€‚ 12345&lt;form id=&quot;form&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;img&quot; accept=&quot;image/jpeg,image/jpg,image/png,image/gif&quot;&gt; &lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt; &lt;input type=&quot;button&quot; class=&quot;submit&quot; value=&quot;submit&quot;/&gt;&lt;/form&gt; æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªformè¡¨å•ï¼Œæœ‰textç±»å‹å’Œfileç±»å‹çš„inputã€‚ 123456789101112$(&#x27;.submit&#x27;).on(&#x27;click&#x27;,function()&#123; var formData = new FormData($(&#x27;#form&#x27;)[0]); $.ajax(&#123; url:&#x27;this is your url&#x27;, type:&#x27;post&#x27;, data:formData, processData:false, contentType:false, success: function(data)&#123; console.log(data); &#125; &#125;); FormDataè¿˜æ”¯æŒå¼‚æ­¥çš„ä¸Šä¼ æ–‡ä»¶ï¼Œä»¥å‰æˆ‘ä»¬ä¸Šä¼ æ–‡ä»¶ï¼Œéœ€è¦å†™ä¸€ä¸ªè¡¨å•ç›´æ¥åˆ·æ–°æäº¤ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨FormDataï¼Œåœ¨æ„é€ è¿™ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼ŒæŠŠè¡¨å•çš„å¯¹è±¡ï¼Œä½œä¸ºä¸€ä¸ªå‚æ•°æ”¾è¿›å»ï¼Œå°±å¯ä»¥äº†ï¼Œç„¶åFormDataï¼Œå°±ä¼šå¾—åˆ°è¿™ä¸ªè¡¨å•å¯¹è±¡é‡Œé¢çš„æ‰€æœ‰çš„å‚æ•°ï¼Œç”šè‡³æˆ‘ä»¬åœ¨è¡¨å•ä¸­ï¼Œéƒ½ä¸éœ€è¦å£°æ˜enctype =&quot;multipart/form-data&quot;ï¼Œå°±å¯ä»¥ç›´æ¥æäº¤ã€‚ ä½¿ç”¨FormDataçš„ä¼˜ç‚¹ï¼Œç¬¬ä¸€æ˜¯åœ¨æäº¤è¡¨å•çš„æ—¶å€™ï¼Œä¸éœ€è¦å†™å¤§é‡çš„jsæ¥è·å¾—è¡¨å•æ•°æ®ï¼Œç›´æ¥æŠŠè¡¨å•å¯¹è±¡æ„é€ å°±è¡Œäº†ã€‚ç¬¬äºŒå°±æ˜¯å¯ä»¥ç›´æ¥å¼‚æ­¥ä¸Šä¼ æ–‡ä»¶ã€‚ äºŒã€åœæ­¢Promiseé“¾å¼è°ƒç”¨ Promiseçš„é“¾å¼è°ƒç”¨è™½ç„¶æ–¹ä¾¿æˆ‘ä»¬ä¸ç”¨å†å†™æ¶å¿ƒçš„åµŒå¥—å›è°ƒï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¦‚æœç¬¬ä¸€ä¸ªå¼‚æ­¥æ²¡æœ‰å‘é€æˆåŠŸï¼Œè¿›å…¥äº†rejectå‡½æ•°ï¼Œåé¢çš„é“¾å¼è°ƒç”¨çš„resolveå‡½æ•°çš„dataéƒ½æ˜¯undefinedï¼Œå¯¹åé¢çš„thenè°ƒç”¨é€ æˆäº†å¾ˆå¤§çš„é—®é¢˜ã€‚ ç¬¬ä¸€ä¸ªè§£å†³æ–¹æ³• åœ¨æ¯ä¸ªthenæ–¹æ³•ä¸­å¯¹dataè¿›è¡Œéç©ºåˆ¤æ–­ã€‚ ç¬¬äºŒä¸ªè§£å†³æ–¹æ³• å¦‚æœå½“å‰çš„Promiseè¿›å…¥rejectå‡½æ•°ï¼Œå¯¹åé¢çš„Promiseéƒ½è¿›è¡Œabortæ“ä½œï¼Œè¯¥æ–¹æ³•é€‚ç”¨äºjQueryçš„Promiseæ“ä½œã€‚ 1234567891011121314getAsync1().then(function(data)&#123; return getAsync2();&#125;,function(err)&#123; return getAsync2().abort();&#125;).then(function(data)&#123; return getAsync3();&#125;,function(err)&#123; if(err.statusText != &#x27;abort&#x27;)&#123; // ...ä¸æ˜¯é€šè¿‡ä¸Šä¸€ä¸ªPromiseçš„abortè¿›å…¥ &#125; return getAsync3().abort();&#125;); ä¸‰ã€chromeç¦æ­¢è‡ªåŠ¨å¡«å…… chromeä¿å­˜å¯†ç å¹¶ä¸”è‡ªåŠ¨å¡«å……çš„åŠŸèƒ½ç¡®å®èƒ½å¤Ÿæ–¹ä¾¿æˆ‘ä»¬åœ¨æµè§ˆç½‘ç«™çš„æ—¶å€™ç™»å½•è¿›å»ï¼Œä½†æ˜¯æœ‰æ—¶å€™chromeä¼šè«åå…¶å¦™çš„æŠ½é£ï¼Œåœ¨æˆ‘ä»¬ä¸æƒ³è¦å¡«å……çš„åœ°æ–¹è‡ªåŠ¨ç»™inputå¡«å……ä¸Šè´¦å·ï¼Œä¸ºäº†ä¸è®©chromeè‡ªåŠ¨å¡«å……ï¼Œæˆ‘ä»¬é‡‡ç”¨ä¸‹é¢çš„æ–¹å¼ç¦æ­¢è‡ªåŠ¨å¡«å……ï¼š 12&lt;input type=&quot;text&quot; style=&quot;display:none&quot;/&gt;&lt;input type=&quot;password&quot; id=&quot;pwd&quot; autocomplete=&quot;off&quot;/&gt; æˆ‘ä»¬åœ¨æˆ‘ä»¬éœ€è¦çš„input#pwdä¸Šé¢åŠ ä¸€ä¸ªdisplay:noneéšè—çš„divï¼Œç„¶åç»™input#pwdåŠ ä¸Šä¸€ä¸ªautocomplete=â€offâ€çš„å±æ€§ï¼Œè¿™æ ·ï¼Œè¿™ä¸ªinput#pwdå°±ä¸ä¼šè‡ªåŠ¨å¡«å……äº†ã€‚ å››ã€æ–‡ä»¶ä¸‹è½½ åˆšå¼€å§‹ï¼Œç¬”è€…åœ¨é¡µé¢ä¸Šç”¨jQueryçš„$.postæ–¹æ³•å‘é€ä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨æ ¹æ®è¿™ä¸ªå‚æ•°å†ç”Ÿæˆç›¸åº”çš„ä¸€ä¸ªæ–‡ä»¶æµè¿”å›ç»™å®¢æˆ·ç«¯ã€‚ä½†æ˜¯ï¼Œåœ¨$.postæ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­ï¼Œåªèƒ½å¤„ç†xml, json, script, or htmlç±»å‹ï¼Œå¯¹è¿”å›çš„æ–‡ä»¶æµå´æ²¡åŠæ³•å¼¹å‡ºå¯¹è¯æ¡†è®©ç”¨æˆ·ä¸‹è½½äº†ã€‚ç»è¿‡ç™¾åº¦ï¼Œçœ‹åˆ°äº†å¾ˆå¤šäººé‡‡ç”¨éšè—formæäº¤çš„æ–¹å¼ï¼Œå†ç”¨responseæ¥æ¨å°±å¯ä»¥ã€‚ 123456789101112131415function exportRecord(ajaxData) &#123; var form = $(&quot;&lt;form&gt;&quot;); form.attr(&#x27;style&#x27;, &#x27;display:none&#x27;); form.attr(&#x27;target&#x27;, &#x27;&#x27;); form.attr(&#x27;method&#x27;, ajaxData.method); //è¯·æ±‚æ–¹å¼ form.attr(&#x27;action&#x27;, ajaxData.url);//è¯·æ±‚åœ°å€ var input1 = $(&#x27;&lt;input&gt;&#x27;);//å°†ä½ è¯·æ±‚çš„æ•°æ®æ¨¡ä»¿æˆä¸€ä¸ªinputè¡¨å• input1.attr(&#x27;type&#x27;, &#x27;hidden&#x27;); input1.attr(&#x27;name&#x27;, &#x27;&#x27;);//è¯¥è¾“å…¥æ¡†çš„name input1.attr(&#x27;value&#x27;, &#x27;&#x27;);//è¯¥è¾“å…¥æ¡†çš„å€¼value $(&#x27;body&#x27;).append(form); form.append(input1); form.submit(); form.remove();&#125; è¿™ç§æ–¹æ³•å‘å‡ºçš„è¯·æ±‚æ ¼å¼ç±»ä¼¼äºusername=username&amp;password=password. ä»£ç ä¸­çš„nameå°±æ˜¯è¯·æ±‚ä¸­çš„keyï¼Œä»£ç ä¸­çš„valueå°±æ˜¯è¯·æ±‚æ•°æ®ä¸­çš„value","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"}]},{"title":"jQueryå®ç°è´ªåƒè›‡æ¸¸æˆ","date":"2017-02-28T13:45:10.000Z","path":"2017/02/28/jQuery-Realize-Snake.html","text":"è´ªåƒè›‡çš„æ¸¸æˆç›¸ä¿¡å¤§å®¶éƒ½ç©è¿‡ã€‚åœ¨é‚£ä¸ªæ°´æœæœºè¿˜æ²¡æœ‰æµè¡Œï¼Œäººæ‰‹ä¸€éƒ¨è¯ºåŸºäºšçš„æ—¶ä»£ï¼Œè´ªåƒè›‡æ˜¯æ‰‹æœºä¸­çš„å¿…å¤‡æ¸¸æˆã€‚ç¬”è€…é—²çš„æ— èŠçš„æ—¶å€™å°±æ‹¿å‡ºæ‰‹æœºæ¥ç©ä¸Šå‡ å±€ï¼ŒæŒ‘æˆ˜ä¸€ä¸‹è‡ªå·±çš„è®°å½•ã€‚ åæ¥ä¸Šå¤§å­¦äº†ï¼Œç”¨cè¯­è¨€åšè¿‡è´ªåƒè›‡çš„æ¸¸æˆï¼Œä¸è¿‡ä¸»è¦æ˜¯é€šè¿‡å‡½æ•°æ¥æ§åˆ¶ï¼ˆPSï¼šç°åœ¨è®©æˆ‘çœ‹ä»£ç éƒ½çœ‹ä¸æ‡‚(âŠ™ï¹âŠ™)ï¼‰ã€‚ç°åœ¨å­¦ä¹ å‰ç«¯æ¡†æ¶ä¹‹åï¼Œé€šè¿‡jQueryæ¥å®ç°ä¸€ä¸ªè´ªåƒè›‡çš„æ¸¸æˆæ•ˆæœï¼Œè™½ç„¶æ¸¸æˆç•Œé¢æ¯”ï¼ˆbuï¼‰è¾ƒï¼ˆrenï¼‰ç®€ï¼ˆzhiï¼‰é™‹ï¼ˆshiï¼‰ï¼Œä½†æ˜¯ä¸»è¦å­¦ä¹ ä¸€ä¸‹æ¸¸æˆä¸­é¢å‘å¯¹è±¡å’Œç”±å±€éƒ¨åˆ°æ•´ä½“çš„æ€æƒ³ã€‚ è®¾è®¡æ€æƒ³ åœ¨å¼€å§‹å†™ä»£ç å‰é¦–å…ˆè®©æˆ‘ä»¬æ¥æ„æ€ä¸€ä¸‹æ•´ä½“æ¸¸æˆçš„å®ç°è¿‡ç¨‹ï¼š éœ€è¦çš„å¯¹è±¡ é¦–å…ˆæ—¢ç„¶æ˜¯è´ªåƒè›‡ï¼Œé‚£ä¹ˆæ¸¸æˆä¸­è‚¯å®šè¦æ¶‰åŠåˆ°ä¸¤ä¸ªå¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯è›‡çš„å¯¹è±¡ï¼Œå¦ä¸€ä¸ªæ˜¯é£Ÿç‰©çš„å¯¹è±¡ã€‚é£Ÿç‰©å¯¹è±¡è‚¯å®šè¦æœ‰ä¸€ä¸ªå±æ€§å°±æ˜¯é£Ÿç‰©çš„åæ ‡ç‚¹ï¼Œè›‡å¯¹è±¡æœ‰ä¸€ä¸ªå±æ€§æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨æ¥å­˜æ”¾è›‡èº«ä½“æ‰€æœ‰çš„åæ ‡ç‚¹ã€‚ å¦‚ä½•ç§»åŠ¨ å¦å¤–å…¨å±€éœ€è¦æœ‰ä¸€ä¸ªå®šæ—¶å™¨æ¥å‘¨æœŸæ€§çš„ç§»åŠ¨è›‡çš„èº«ä½“ã€‚ç”±äºè›‡çš„èº«ä½“å¼¯å¼¯æ›²æ›²æœ‰å„ç§ä¸åŒçš„å½¢çŠ¶ï¼Œå› æ­¤æˆ‘ä»¬åªå¤„ç†è›‡çš„å¤´éƒ¨å’Œå°¾éƒ¨ï¼Œæ¯æ¬¡ç§»åŠ¨éƒ½æ ¹æ®ç§»åŠ¨çš„æ–¹å‘çš„ä¸åŒæ¥æ·»åŠ æ–°çš„å¤´éƒ¨ï¼Œå†æŠŠå°¾éƒ¨æ“¦å»ï¼Œçœ‹èµ·æ¥å°±åƒè›‡åœ¨å‘å‰çˆ¬è¡Œä¸€æ ·ã€‚ æ–¹å‘æ§åˆ¶ ç”±äºè›‡æœ‰ç§»åŠ¨çš„æ–¹å‘ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨å…¨å±€å®šä¹‰ä¸€ä¸ªæ–¹å‘å¯¹è±¡ï¼Œå¯¹è±¡ä¸­æœ‰ä¸Šä¸‹å·¦å³æ‰€ä»£è¡¨çš„å€¼ã€‚åŒæ—¶ï¼Œåœ¨è›‡å¯¹è±¡çš„å±æ€§ä¸­æˆ‘ä»¬ä¹Ÿéœ€è¦å®šä¹‰ä¸€ä¸ªæ–¹å‘å±æ€§ï¼Œç”¨æ¥è¡¨ç¤ºå½“å‰è›‡æ‰€ç§»åŠ¨çš„æ–¹å‘ã€‚ ç¢°æ’æ£€æµ‹ åœ¨è›‡å‘å‰çˆ¬è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°ä¸‰ç§ä¸åŒçš„æƒ…å†µï¼Œéœ€è¦è¿›è¡Œä¸åŒçš„åˆ¤æ–­æ£€æµ‹ã€‚ç¬¬ä¸€ç§æƒ…å†µæ˜¯åƒåˆ°äº†é£Ÿç‰©ï¼Œè¿™æ—¶å€™å°±éœ€è¦å‘è›‡çš„æ•°ç»„ä¸­æ·»åŠ é£Ÿç‰©çš„åæ ‡ç‚¹ï¼›ç¬¬äºŒç§æƒ…å†µæ˜¯ç¢°åˆ°äº†è‡ªå·±çš„èº«ä½“ï¼Œç¬¬ä¸‰ç§æ˜¯ç¢°åˆ°äº†è¾¹ç•Œï¼Œè¿™ä¸¤ç§æƒ…å†µéƒ½å¯¼è‡´æ¸¸æˆç»“æŸï¼›å¦‚æœä¸æ˜¯ä¸Šé¢çš„ä¸‰ç§æƒ…å†µï¼Œè›‡å°±å¯ä»¥æ­£å¸¸çš„ç§»åŠ¨ã€‚ å¼€å§‹ç¼–ç¨‹ æ•´ä½“æ„æ€æœ‰äº†ï¼Œä¸‹é¢å°±å¼€å§‹å†™ä»£ç äº†ã€‚ æ­å»ºå¹•å¸ƒ é¦–å…ˆæ•´ä¸ªæ¸¸æˆéœ€è¦ä¸€ä¸ªæ­å»ºæ´»åŠ¨çš„åœºæ™¯ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªè¡¨æ ¼å¸ƒå±€æ¥ä½œä¸ºæ•´ä¸ªæ¸¸æˆçš„èƒŒæ™¯ã€‚ 1234567891011121314151617181920212223242526272829&lt;style type=&quot;text/css&quot;&gt;#pannel table&#123; border-collapse:collapse;&#125;#pannel td&#123; width: 10px; height: 10px; border: 1px solid #000;&#125;#pannel td.food&#123; background: green;&#125;#pannel td.body&#123; background: #f60;&#125;&lt;/style&gt;&lt;div id=&quot;pannel&quot;&gt;&lt;/div&gt;&lt;select name=&quot;&quot; id=&quot;palSize&quot;&gt; &lt;option value=&quot;10&quot;&gt;10*10&lt;/option&gt; &lt;option value=&quot;20&quot;&gt;20*20&lt;/option&gt; &lt;option value=&quot;40&quot;&gt;30*30&lt;/option&gt;&lt;/select&gt;&lt;select name=&quot;&quot; id=&quot;palSpeed&quot;&gt; &lt;option value=&quot;500&quot;&gt;é€Ÿåº¦-æ…¢&lt;/option&gt; &lt;option value=&quot;250&quot;&gt;é€Ÿåº¦-æ­£å¸¸&lt;/option&gt; &lt;option value=&quot;100&quot;&gt;é€Ÿåº¦-å¿«&lt;/option&gt;&lt;/select&gt;&lt;button id=&quot;startBtn&quot;&gt;å¼€å§‹&lt;/button&gt; pannelå°±æ˜¯æˆ‘ä»¬çš„å¹•å¸ƒï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªé‡Œé¢ç”¨tdæ ‡ç­¾æ¥ç”»ä¸Šä¸€ä¸ªä¸ªçš„â€œåƒç´ ç‚¹â€ã€‚æˆ‘ä»¬ç”¨ä¸¤ç§æ ·å¼æ¥è¡¨ç°ä¸åŒçš„å¯¹è±¡ï¼Œ.bodyè¡¨ç¤ºè›‡çš„èº«ä½“çš„æ ·å¼ï¼Œ.foodè¡¨ç¤ºé£Ÿç‰©çš„æ ·å¼ã€‚ 12345678910111213141516171819202122var settings = &#123; // pannelé¢æ¿çš„é•¿åº¦ pannelSize: 10, // è´ªåƒè›‡ç§»åŠ¨çš„é€Ÿåº¦ speed: 500, // è´ªåƒè›‡å·¥ä½œçº¿ç¨‹ workThread: null,&#125;;function setPannel(size)&#123; var content = []; content.push(&#x27;&lt;table&gt;&#x27;); for(let i=0;i&lt;size;i++)&#123; content.push(&#x27;&lt;tr&gt;&#x27;); for(let j=0;j&lt;size;j++)&#123; content.push(&#x27;&lt;td class=&quot;td_&#x27;+i+&#x27;_&#x27;+j+&#x27;&quot;&gt;&lt;/td&gt;&#x27;); &#125; content.push(&#x27;&lt;/tr&gt;&#x27;); &#125; content.push(&#x27;&lt;/table&gt;&#x27;); $(&#x27;#pannel&#x27;).html(content.join(&#x27;&#x27;));&#125;setPannel(settings.pannelSize); æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„settingsç”¨æ¥å­˜æ”¾å…¨å±€æ€§çš„å˜é‡ï¼Œæ¯”å¦‚å¹•å¸ƒçš„å¤§å°ã€è›‡ç§»åŠ¨çš„é€Ÿåº¦å’Œå·¥ä½œçš„çº¿ç¨‹ã€‚ç„¶åé€šè¿‡ä¸€ä¸ªå‡½æ•°æŠŠå¹•å¸ƒç”»äº†å‡ºæ¥ï¼Œæœ€åçš„æ•ˆæœå°±æ˜¯è¿™æ ·ï¼š æ–¹å‘å’Œå®šä½ æ—¢ç„¶æˆ‘ä»¬çš„â€œèˆå°â€å·²ç»æ­å»ºå®Œäº†ï¼Œæ€ä¹ˆæ¥å®šä¹‰æˆ‘ä»¬â€œæ¼”å‘˜â€çš„ä½ç½®å’Œç§»åŠ¨çš„æ–¹å‘å‘¢ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸ªå…¨å±€çš„æ–¹å‘å˜é‡ï¼Œå¯¹åº”çš„æ•°å€¼å°±æ˜¯æˆ‘ä»¬çš„ä¸Šä¸‹å·¦å³æ–¹å‘é”®æ‰€ä»£è¡¨çš„keyCodeã€‚ 123456var Direction = &#123; UP: 38, DOWN: 40, LEFT: 37, RIGHT: 39,&#125;; æˆ‘ä»¬åœ¨ä¸Šé¢ç”»å¹•å¸ƒçš„æ—¶å€™é€šè¿‡ä¸¤æ¬¡éå†ç”»å‡ºäº†ä¸€ä¸ªç±»ä¼¼äºä¸­å­¦é‡Œå­¦çš„åæ ‡ç³»ï¼Œæœ‰Xè½´å’ŒYè½´ã€‚å¦‚æœæ¯æ¬¡éƒ½ç”¨&#123;x:x,y:y&#125;æ¥è¡¨ç¤ºä¼šå¾ˆï¼ˆmeiï¼‰éº»ï¼ˆbiï¼‰çƒ¦ï¼ˆgeï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåæ ‡ç‚¹å¯¹è±¡ã€‚ 123456function Position(x,y)&#123; // è·ç¦»Xè½´é•¿åº¦ï¼Œå–å€¼èŒƒå›´0~pannelSize-1 this.X = x || 0; // è·ç¦»Yè½´é•¿åº¦ï¼Œå–å€¼èŒƒå›´0~pannelSize-1 this.Y = y || 0;&#125; å‰¯å’–â€“é£Ÿç‰© æ—¢ç„¶å®šä¹‰å¥½äº†åæ ‡ç‚¹å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆæ¥çœ‹ä¸€ä¸‹ç®€å•çš„å¯¹è±¡ï¼Œå°±æ˜¯æˆ‘ä»¬çš„é£Ÿç‰©ï¼ˆFoodï¼‰å¯¹è±¡ï¼Œä¸Šé¢è¯´äº†ï¼Œå®ƒæœ‰ä¸€ä¸ªé‡è¦çš„å±æ€§å°±æ˜¯å®ƒçš„åæ ‡ç‚¹ã€‚ 12345678910111213141516171819202122232425262728function Food()&#123; this.pos = null; // éšæœºäº§ç”ŸFoodåæ ‡ç‚¹ï¼Œé¿å¼€è›‡èº« this.Create = function()&#123; if(this.pos)&#123; this.handleDot(false, this.pos, &#x27;food&#x27;); &#125; let isOk = true; while(isOk)&#123; let x = parseInt(Math.random()*settings.pannelSize), y = parseInt(Math.random()*settings.pannelSize); if(!$(&#x27;.td_&#x27;+x+&#x27;_&#x27;+y).hasClass(&#x27;body&#x27;))&#123; isOk = false; let pos = new Position(x, y); this.handleDot(true, pos, &#x27;food&#x27;); this.pos = pos; &#125; &#125; &#125;; // ç”»ç‚¹ this.handleDot = function(flag, dot, className)&#123; if(flag)&#123; $(&#x27;.td_&#x27;+dot.X+&#x27;_&#x27;+dot.Y).addClass(className); &#125; else &#123; $(&#x27;.td_&#x27;+dot.X+&#x27;_&#x27;+dot.Y).removeClass(className); &#125; &#125;;&#125; æ—¢ç„¶é£Ÿç‰©æœ‰äº†åæ ‡ç‚¹è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»€ä¹ˆæ—¶å€™ç»™ä»–èµ‹å€¼å‘¢ï¼Ÿæˆ‘ä»¬çŸ¥é“Foodæ˜¯éšæœºäº§ç”Ÿçš„ï¼Œå› æ­¤æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªCreateå‡½æ•°ç”¨æ¥äº§ç”ŸFoodçš„åæ ‡ç‚¹ã€‚ä½†æ˜¯äº§ç”Ÿçš„åæ ‡ç‚¹åˆä¸èƒ½åœ¨è›‡çš„èº«ä½“ä¸Šï¼Œæ‰€ä»¥é€šè¿‡ä¸€ä¸ªwhileå¾ªç¯æ¥äº§ç”Ÿåæ ‡ç‚¹ï¼Œå¦‚æœåæ ‡ç‚¹æ­£ç¡®äº†ï¼Œå°±ç»ˆæ­¢å¾ªç¯ã€‚æ­¤å¤–ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ç»Ÿä¸€å¤„ç†åæ ‡ç‚¹çš„æ ·å¼ï¼Œå› æ­¤å®šä¹‰äº†ä¸€ä¸ªhandleDotå‡½æ•°ã€‚ ä¸»å’–â€“è›‡ ç»ˆäºåˆ°äº†æˆ‘ä»¬çš„ä¸»å’–ï¼Œè›‡ã€‚é¦–å…ˆå®šä¹‰ä¸€ä¸‹è›‡åŸºæœ¬çš„å±æ€§ï¼Œæœ€é‡è¦çš„è‚¯å®šæ˜¯è›‡çš„bodyå±æ€§ï¼Œæ¯æ¬¡ç§»åŠ¨æ—¶ï¼Œéƒ½éœ€è¦å¯¹è¿™ä¸ªæ•°ç»„è¿›è¡Œä¸€äº›æ“ä½œã€‚å…¶æ¬¡æ˜¯è›‡çš„æ–¹å‘ï¼Œæˆ‘ä»¬ç»™å®ƒä¸€ä¸ªé»˜è®¤å‘ä¸‹çš„æ–¹å‘ã€‚ç„¶åæ˜¯é£Ÿç‰©ï¼Œåœ¨è›‡çš„æ„é€ å‡½æ•°ä¸­æˆ‘ä»¬ä¼ å…¥é£Ÿç‰©å¯¹è±¡ï¼Œåœ¨åç»­ç§»åŠ¨æ—¶éœ€è¦åˆ¤æ–­æ˜¯å¦åƒåˆ°é£Ÿç‰©ã€‚ 123456789101112131415161718192021222324252627282930function Snake(myFood)&#123; // è›‡çš„èº«ä½“ this.body = []; // è›‡çš„æ–¹å‘ this.dir = Direction.DOWN; // è›‡çš„é£Ÿç‰© this.food = myFood; // åˆ›é€ è›‡èº« this.Create = function()&#123; let isOk = true; while(isOk)&#123; let x = parseInt(Math.random()*(settings.pannelSize-2))+1, y = parseInt(Math.random()*(settings.pannelSize-2))+1; console.log(x,y) if(!$(&#x27;.td_&#x27;+x+&#x27;_&#x27;+y).hasClass(&#x27;food&#x27;))&#123; isOk = false; let pos = new Position(x, y); this.handleDot(true, pos, &#x27;body&#x27;) this.body.push(pos); &#125; &#125; &#125;; this.handleDot = function(flag, dot, className)&#123; if(flag)&#123; $(&#x27;.td_&#x27;+dot.X+&#x27;_&#x27;+dot.Y).addClass(className); &#125; else &#123; $(&#x27;.td_&#x27;+dot.X+&#x27;_&#x27;+dot.Y).removeClass(className); &#125; &#125;;&#125; ç§»åŠ¨å‡½æ•°å¤„ç† ä¸‹é¢å¯¹è›‡ç§»åŠ¨çš„è¿‡ç¨‹è¿›è¡Œå¤„ç†ï¼Œç”±äºæˆ‘ä»¬æ¯æ¬¡éƒ½é‡‡ç”¨æ·»å¤´å»å°¾çš„æ–¹å¼ç§»åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬æ¯æ¬¡åªéœ€è¦å…³æ³¨è›‡çš„å¤´å’Œå°¾ã€‚æˆ‘ä»¬çº¦å®šæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯å¤´ï¼Œæœ€åä¸€ä¸ªå…ƒç´ æ˜¯å°¾ã€‚ 12345678910111213141516171819202122232425this.Move = function()&#123; let oldHead = Object.assign(new Position(), this.body[0]), oldTail = Object.assign(new Position(), this.body[this.body.length - 1]), newHead = Object.assign(new Position(), oldHead); switch(this.dir)&#123; case Direction.UP: newHead.X = newHead.X - 1; break; case Direction.DOWN: newHead.X = newHead.X + 1; break; case Direction.LEFT: newHead.Y = newHead.Y - 1; break; case Direction.RIGHT: newHead.Y = newHead.Y + 1; break; default: break; &#125; // æ•°ç»„æ·»å¤´ this.body.unshift(newHead); // æ•°ç»„å»å°¾ this.body.pop();&#125;; æ£€æµ‹å‡½æ•°å¤„ç† è¿™æ ·æˆ‘ä»¬å¯¹è›‡èº«æ•°ç»„å°±å¤„ç†å®Œäº†ã€‚ä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦å¯¹æ–°çš„å¤´ï¼ˆnewHeadï¼‰è¿›è¡Œä¸€äº›ç¢°æ’æ£€æµ‹ï¼Œåˆ¤æ–­æ–°å¤´éƒ¨çš„ä½ç½®ä¸Šæ˜¯å¦æœ‰å…¶ä»–ä¸œè¥¿ï¼ˆç¢°æ’æ£€æµ‹ï¼‰ã€‚ 12345678910111213141516171819202122232425262728293031323334// é£Ÿç‰©æ£€æµ‹this.eatFood = function()&#123; let newHead = this.body[0]; if(newHead.X == this.food.pos.X&amp;&amp;newHead.Y == this.food.pos.Y)&#123; return true; &#125; else &#123; return false; &#125;&#125;;// è¾¹ç•Œæ£€æµ‹this.konckWall = function()&#123; let newHead = this.body[0]; if(newHead.X == -1 || newHead.Y == -1 || newHead.X == settings.pannelSize || newHead.Y == settings.pannelSize )&#123; return true; &#125; else &#123; return false; &#125;&#125;;// è›‡èº«æ£€æµ‹this.konckBody = function()&#123; let newHead = this.body[0], flag = false; this.body.map(function(elem, index)&#123; if(index == 0) return; if(elem.X == newHead.X &amp;&amp; elem.Y == newHead.Y)&#123; flag = true; &#125; &#125;); return flag;&#125;; é‡æ–°ç»˜åˆ¶ å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹Moveå‡½æ•°è¿›è¡Œä¸€äº›æ‰©å……ï¼š 123456789101112131415161718192021222324252627this.Move = function()&#123; // ...æ•°ç»„æ“ä½œ if(this.eatFood())&#123; this.body.push(oldTail); this.food.Create(); this.rePaint(true, newHead, oldTail); &#125; else if(this.konckWall() || this.konckBody()) &#123; this.Over(); &#125; else &#123; this.rePaint(false, newHead, oldTail); &#125;&#125;;this.Over = function()&#123; clearInterval(settings.workThread); console.log(&#x27;Game Over&#x27;);&#125;;this.rePaint = function(isEatFood, newHead, oldTail)&#123; if(isEatFood)&#123; // åŠ å¤´ this.handleDot(true, newHead, &#x27;body&#x27;); &#125; else &#123; // åŠ å¤´ this.handleDot(true, newHead, &#x27;body&#x27;); // å»å°¾ this.handleDot(false, oldTail, &#x27;body&#x27;); &#125;&#125;; å› ä¸ºåœ¨Moveå‡½æ•°å¤„ç†æ•°ç»„çš„åæˆ‘ä»¬çš„è›‡èº«è¿˜æ²¡æœ‰é‡æ–°ç»˜åˆ¶ï¼Œå› æ­¤æˆ‘ä»¬å¾ˆå·§å¦™åœ°åˆ¤æ–­å¦‚æœæ˜¯åƒåˆ°é£Ÿç‰©çš„æƒ…å†µï¼Œåœ¨æ•°ç»„ä¸­å°±æŠŠåŸæ¥çš„å°¾éƒ¨æ·»åŠ ä¸Šï¼Œè¿™æ ·å°±è¾¾åˆ°äº†åƒé£Ÿç‰©çš„æ•ˆæœã€‚åŒæ—¶æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªrePaintå‡½æ•°è¿›è¡Œé¡µé¢çš„é‡ç»˜ã€‚ æ¸¸æˆæ§åˆ¶å™¨ æˆ‘ä»¬çš„â€œå¹•å¸ƒâ€ã€â€œæ¼”å‘˜â€å’Œâ€œåŠ¨ä½œæŒ‡å¯¼â€éƒ½å·²ç»åˆ°ä½ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬ç°åœ¨å°±éœ€è¦ä¸€ä¸ªâ€œæ‘„å½±æœºâ€è¿›è¡Œæ‹æ‘„ï¼Œè®©å®ƒä»¬éƒ½å¼€å§‹â€œå¹²æ´»â€ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869function Control()&#123; this.snake = null; // æŒ‰é’®çš„äº‹ä»¶ç»‘å®š this.bindClick = function()&#123; var that = this; $(document).on(&#x27;keydown&#x27;, function(e)&#123; if(!that.snake) return; var canChangrDir = true; switch(e.keyCode)&#123; case Direction.DOWN: if(that.snake.dir == Direction.UP)&#123; canChangrDir = false; &#125; break; case Direction.UP: if(that.snake.dir == Direction.DOWN)&#123; canChangrDir = false; &#125; break; case Direction.LEFT: if(that.snake.dir == Direction.RIGHT)&#123; canChangrDir = false; &#125; break; case Direction.RIGHT: if(that.snake.dir == Direction.LEFT)&#123; canChangrDir = false; &#125; break; default: canChangrDir = false; break; &#125; if(canChangrDir)&#123; that.snake.dir = e.keyCode; &#125; &#125;); $(&#x27;#palSize&#x27;).on(&#x27;change&#x27;,function()&#123; settings.pannelSize = $(this).val(); setPannel(settings.pannelSize); &#125;); $(&#x27;#palSpeed&#x27;).on(&#x27;change&#x27;,function()&#123; settings.speed = $(this).val(); &#125;); $(&#x27;#startBtn&#x27;).on(&#x27;click&#x27;,function()&#123; $(&#x27;.food&#x27;).removeClass(&#x27;food&#x27;); $(&#x27;.body&#x27;).removeClass(&#x27;body&#x27;); that.startGame(); &#125;); &#125;; // åˆå§‹åŒ– this.init = function()&#123; this.bindClick(); setPannel(settings.pannelSize); &#125;; // å¼€å§‹æ¸¸æˆ this.startGame = function()&#123; var food = new Food(); food.Create(); var snake = new Snake(food); snake.Create(); this.snake =snake; settings.workThread = setInterval(function()&#123; snake.Move(); &#125;,settings.speed); &#125; this.init();&#125; æˆ‘ä»¬ç»™documentç»‘å®šä¸€ä¸ªkeydownäº‹ä»¶ï¼Œå½“è§¦å‘æŒ‰é”®æ—¶æ”¹å˜è›‡çš„ç§»åŠ¨æ–¹å‘ï¼Œä½†æ˜¯å¦‚æœå’Œå½“å‰è›‡ç§»åŠ¨æ–¹å‘ç›¸åæ—¶å°±ç›´æ¥returnã€‚æœ€åçš„æ•ˆæœå¦‚ä¸‹ï¼šå¯ä»¥æˆ³è¿™é‡ŒæŸ¥çœ‹å®ç°æ•ˆæœ æ€»ç»“ å®ç°äº†è´ªåƒè›‡çš„ä¸€äº›åŸºæœ¬åŠŸèƒ½ï¼Œæ¯”å¦‚ç§»åŠ¨ã€åƒç‚¹ã€æ§åˆ¶é€Ÿåº¦ç­‰ï¼Œé¡µé¢ä¹Ÿæ¯”è¾ƒçš„ç®€å•ï¼Œå°±ä¸€ä¸ªtableã€selectå’Œbuttonã€‚åæœŸå¯ä»¥æ·»åŠ ä¸€äº›å…¶ä»–çš„åŠŸèƒ½ï¼Œæ¯”å¦‚æœ‰è®¡åˆ†ã€å…³å¡ç­‰ï¼Œä¹Ÿå¯ä»¥æ·»åŠ å¤šä¸ªç‚¹ï¼Œæœ‰çš„ç‚¹åƒå®Œç›´æ¥GameOverç­‰ç­‰ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¸¸æˆ","slug":"Game","permalink":"https://xieyufei.com/tags/Game/"}]},{"title":"ç²¾å·§å¿«é€Ÿçš„å‰ç«¯æ¨¡æ¿å¼•æ“doT","date":"2017-02-21T13:33:49.000Z","path":"2017/02/21/Dotjs-Usage.html","text":"åœ¨æ²¡æœ‰æ¥è§¦æ¨¡æ¿å¼•æ“ä¹‹å‰ï¼Œæˆ‘ä»¬æ¥å—åå°ä¼ æ¥çš„jsonæ•°æ®åéœ€è¦å°†å…¶æ‹¼æ¥æˆå­—ç¬¦ä¸²ï¼Œç„¶åå°†å…¶æ’å…¥åˆ°DOMä¸­å»ï¼Œå¦‚æœæœ‰ä¸€äº›å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼Œæ‹¼æ¥ä»£ç ä¼šå˜å¾—æ›´åŠ çš„ç¹çï¼Œè€Œä¸”åæœŸç»´æŠ¤èµ·æ¥ä¹Ÿååˆ†çš„ä¸æ–¹ä¾¿ã€‚åæ¥åœ¨é¡¹ç›®ä¸­æ¥è§¦åˆ°ä¸€æ¬¾ååˆ†å¼ºå¤§çš„æ¨¡æ¿å¼•æ“ï¼Œå°±æ˜¯æˆ‘ä»¬çš„doTï¼Œè¢«å®ƒå¼ºå¤§çš„åŠŸèƒ½æ·±æ·±çš„å¸å¼•ä½äº†ã€‚å°¤å…¶åœ¨1.0.0ç‰ˆæœ¬åè¿˜æ–°å¢äº†å±€éƒ¨æ¨¡æ¿çš„åŠŸèƒ½ï¼Œå¯æ‰©å±•æ€§éå¸¸çš„å¼ºå¤§ã€‚åˆšå¼€å§‹çœ‹å®˜æ–¹çš„æ–‡æ¡£æ—¶å¯¹å±€éƒ¨æ¨¡æ¿è¿™ä¸ªåŠŸèƒ½è¿˜ä¸æ˜¯å¾ˆæ‡‚ï¼Œåæ¥åœ¨ç½‘ä¸Šæœå¯»äº†å„ç§èµ„æ–™ï¼Œæ‰è±ç„¶å¼€æœ—ï¼Œåˆ†äº«ä¸€ä¸‹è‡ªå·±çš„å¿ƒå¾—ä½“ä¼šã€‚ ä»‹ç» doTæ¨¡æ¿å¼•æ“æ˜¯ä¸€ä¸ªæœ€å¿«é€Ÿæœ€ç®€æ´çš„JavaScriptæ¨¡æ¿å¼•æ“ï¼Œåœ¨æµè§ˆå™¨ç«¯å’ŒNodejsç«¯éƒ½é€‚ç”¨ã€‚å®ƒå°å·§å¿«é€Ÿå¹¶ä¸”æ²¡æœ‰ä»»ä½•ä¾èµ–ï¼Œæ‰€æœ‰ä»£ç æ‰ä¸€ç™¾å¤šè¡Œï¼Œå‹ç¼©åæ‰4kï¼Œéå¸¸çš„è½»é‡ã€‚ é…ç½® åœ¨doTæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªtemplateSettingså±æ€§ç”¨æ¥é…ç½®doTçš„å®šç•Œç¬¦ï¼ˆå®˜æ–¹æ–‡æ¡£è¿™ä¹ˆç§°å‘¼ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºæ¨¡æ¿çš„è¯­æ³•ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¿®æ”¹ä½¿ç”¨è‡ªå·±çš„å®šç•Œç¬¦ï¼Œä½†æ˜¯å»ºè®®ä½¿ç”¨é»˜è®¤çš„ï¼š 12345678910111213141516171819templateSettings: &#123; evaluate: /\\&#123;\\&#123;([\\s\\S]+?(\\&#125;?)+)\\&#125;\\&#125;/g, interpolate: /\\&#123;\\&#123;=([\\s\\S]+?)\\&#125;\\&#125;/g, encode: /\\&#123;\\&#123;!([\\s\\S]+?)\\&#125;\\&#125;/g, use: /\\&#123;\\&#123;#([\\s\\S]+?)\\&#125;\\&#125;/g, useParams: /(^|[^\\w$])def(?:\\.|\\[[\\&#x27;\\&quot;])([\\w$\\.]+)(?:[\\&#x27;\\&quot;]\\])?\\s*\\:\\s*([\\w$\\.]+|\\&quot;[^\\&quot;]+\\&quot;|\\&#x27;[^\\&#x27;]+\\&#x27;|\\&#123;[^\\&#125;]+\\&#125;)/g, define: /\\&#123;\\&#123;##\\s*([\\w\\.$]+)\\s*(\\:|=)([\\s\\S]+?)#\\&#125;\\&#125;/g, defineParams:/^\\s*([\\w$]+):([\\s\\S]+)/, conditional: /\\&#123;\\&#123;\\?(\\?)?\\s*([\\s\\S]*?)\\s*\\&#125;\\&#125;/g, iterate: /\\&#123;\\&#123;~\\s*(?:\\&#125;\\&#125;|([\\s\\S]+?)\\s*\\:\\s*([\\w$]+)\\s*(?:\\:\\s*([\\w$]+))?\\s*\\&#125;\\&#125;)/g, varname: &quot;it&quot;, // æ§åˆ¶ç©ºç™½å­—ç¬¦ï¼Œtrue - å…¨éƒ¨å»æ‰ï¼Œfalse - ä¿ç•™ strip: true, // æ€§èƒ½ä¼˜åŒ–è®¾ç½®ï¼Œé€šè¿‡å®ƒè°ƒæ•´æ€§èƒ½ï¼Œappend è®¾ç½®æˆ falseï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ›´å¥½çš„æ•ˆæœ append: true, // å¦‚æœ &#x27;selfcontained&#x27; ä¸º trueï¼ŒdoT å°†æ¯«æ— ä¾èµ–çš„äº§ç”Ÿå‡½æ•° selfcontained: false, doNotSkipEncoded: false&#125;, åœ¨é…ç½®ä¸­æœ‰ä¸€ä¸ªå±æ€§æ˜¯varnameï¼Œå®ƒçš„å€¼æ˜¯itï¼Œä»£è¡¨äº†åœ¨æ¨¡æ¿ä¸­ä¼ å…¥å¯¹è±¡æ‰€ä½¿ç”¨çš„å˜é‡åã€‚ ç”¨æ³• é¦–å…ˆä»‹ç»ä¸€ä¸‹doTæ¨¡æ¿ä¸­å¸¸ç”¨çš„å®šç•Œç¬¦ä»£è¡¨çš„ä½¿ç”¨å’Œå«ä¹‰ï¼š 1234567&#123;&#123;= &#125;&#125; ç”¨äºæ’å€¼(interpolation)&#123;&#123; &#125;&#125; ç”¨äºæ±‚å€¼(evaluation)&#123;&#123;? &#125;&#125; æ¡ä»¶è¯­å¥&#123;&#123;~ &#125;&#125; æ•°ç»„è¿­ä»£&#123;&#123;! &#125;&#125; ç”¨äºç¼–ç æ±‚å€¼&#123;&#123;# &#125;&#125; ç”¨äºç¼–è¯‘æ—¶æ±‚å€¼/å¼•å…¥å’Œå±€éƒ¨æ¨¡æ¿&#123;&#123;## #&#125;&#125; ç”¨äºç¼–è¯‘æ—¶å®šä¹‰ èµ‹å€¼å®šç•Œç¬¦ é¦–å…ˆå®šä¹‰è¦èµ‹å€¼çš„æ¨¡æ¿ï¼Œæ³¨æ„æ¨¡æ¿çš„typeè¦å†™æˆtext/x-dot-templateã€‚ 1234&lt;script id=&quot;templ1&quot; type=&quot;text/x-dot-template&quot;&gt; &lt;div&gt;Hi &#123;&#123;=it.name&#125;&#125;!&lt;/div&gt; &lt;div&gt;Your age is &#123;&#123;=it.age || &#x27;&#x27;&#125;&#125;&lt;/div&gt;&lt;/script&gt; åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†çš„èµ‹å€¼å®šç•Œç¬¦ï¼Œç”¨äºåœ¨æ¨¡æ¿ä¸­è¿›è¡Œèµ‹å€¼æ“ä½œã€‚è¿™é‡Œä½¿ç”¨çš„itå°±æ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢é…ç½®ä¸­å®šä¹‰å¥½çš„varnameå˜é‡ã€‚ç„¶ååœ¨JSä¸­è°ƒç”¨æ¨¡æ¿æ¸²æŸ“åˆ°é¡µé¢ä¸Šå»ï¼š 1234var person = &#123;&#x27;name&#x27;:&#x27;ace&#x27;,&#x27;age&#x27;:20&#125;, person1 = &#123;&#x27;name&#x27;:&#x27;john&#x27;,&#x27;age&#x27;:21&#125;;var doTemplate = doT.template($(&#x27;#templ1&#x27;).html());$(&#x27;body&#x27;).html(doTemplate(person)+doTemplate(person1)); åœ¨è¿™é‡Œæˆ‘ä»¬è·å–åˆ°äº†æ¨¡æ¿å‡½æ•°doTemplateï¼Œç„¶åå°†å®šä¹‰å¥½çš„å¯¹è±¡ä¼ å…¥å‡½æ•°ä¸­ï¼Œæœ€åè¿”å›æˆ‘ä»¬æ‰€éœ€è¦çš„å­—ç¬¦ä¸²æ’å…¥åˆ°DOMä¸­ã€‚è¿™é‡Œæˆ‘ä»¬å¯¹doTemplateå‡½æ•°è¿›è¡Œäº†ä¸€æ¬¡å¤ç”¨ï¼Œå®šä¹‰äº†ä¸¤ä¸ªå±æ€§ç›¸åŒå­—é¢é‡ä¼ å…¥ã€‚ æ±‚å€¼å®šç•Œç¬¦ å¦‚æœä¼ å…¥åˆ°æ¨¡æ¿ä¸­çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æ±‚å€¼å®šç•Œç¬¦éå†è¾“å…¥å¯¹è±¡ä¸­çš„å±æ€§ï¼š 12345&lt;script id=&quot;templ2&quot; type=&quot;text/x-dot-template&quot;&gt;&#123;&#123; for(var prop in it) &#123; &#125;&#125;&lt;div&gt;key:&#123;&#123;= prop &#125;&#125; --- value:&#123;&#123;= it[prop] &#125;&#125;&lt;/div&gt;&#123;&#123; &#125; &#125;&#125;&lt;/script&gt; åœ¨æ±‚å€¼å®šç•Œç¬¦ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å†™ç±»ä¼¼äºjsçš„è¯­æ³•ã€‚ 123var dataEval = &#123;&quot;name&quot;:&quot;ace&quot;,&quot;age&quot;:20,&quot;interests&quot;:&quot;basketball&quot;,&quot;email&quot;:&quot;ace@ly.com&quot;,&quot;phone&quot;:&quot;110&quot;&#125;;var evalText = doT.template($(&quot;#templ2&quot;).html());$(&#x27;body&#x27;).html(evalText(dataEval)); è¿­ä»£å®šç•Œç¬¦ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦éå†å¯¹è±¡ä¸­çš„æ•°ç»„ï¼Œé€šè¿‡è¿­ä»£å®šç•Œç¬¦æ¥éå†ã€‚ä½†æ˜¯è¦åœ¨ä½†æ˜¯éœ€è¦åœ¨åé¢åŠ ä¸Š:value:indexè¡¨ç¤ºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å’Œç´¢å¼•å€¼ã€‚ 12345&lt;script id=&quot;templ3&quot; type=&quot;text/x-dot-template&quot;&gt;&#123;&#123;~it.array:value:index&#125;&#125; &lt;div&gt;index:&#123;&#123;= index+1 &#125;&#125;--value:&#123;&#123;= value &#125;&#125;!&lt;/div&gt;&#123;&#123;~&#125;&#125;&lt;/script&gt; åœ¨è¿™é‡Œæˆ‘ä»¬ä¼ å…¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥éœ€è¦ç”¨~it.arrayæ¥éå†æˆ‘ä»¬çš„æ•°ç»„ã€‚ 123var dataArr = &#123;&quot;array&quot;:[&quot;banana&quot;,&quot;apple&quot;,&quot;orange&quot;]&#125;;var arrText = doT.template($(&quot;#templ3&quot;).html());$(&#x27;body&#x27;).html(arrText(dataArr)); æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œéå†çš„æ—¶å€™å°±éœ€è¦ç”¨~itç›´æ¥æ¥éå†æ•°ç»„å€¼ã€‚ æ¡ä»¶å®šç•Œç¬¦ åœ¨æ¨¡æ¿ä¸­æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ¤æ–­ï¼Œè¿›è¡Œä¸åŒçš„å±•ç¤ºï¼Œè¿™æ—¶æˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ¡ä»¶å®šç•Œç¬¦ã€‚ 1234567891011121314151617&lt;script id=&quot;templ4&quot; type=&quot;text/x-dot-template&quot;&gt; &lt;div&gt;å§“åï¼š&#123;&#123;=it.name&#125;&#125;&lt;/div&gt; &lt;div&gt;æˆç»©ï¼š&#123;&#123;=it.score&#125;&#125;&lt;/div&gt; &#123;&#123;? it.score&lt;60&#125;&#125; &lt;div&gt;ç­‰çº§ï¼šä¸åŠæ ¼&lt;/div&gt; &#123;&#123;?? it.score&lt;70&#125;&#125; &lt;div&gt;ç­‰çº§ï¼šåŠæ ¼&lt;/div&gt; &#123;&#123;?? it.score&lt;80&#125;&#125; &lt;div&gt;ç­‰çº§ï¼šè‰¯å¥½&lt;/div&gt; &#123;&#123;?? it.score&lt;90&#125;&#125; &lt;div&gt;ç­‰çº§ï¼šä¼˜ç§€&lt;/div&gt; &#123;&#123;?? it.score&lt;100&#125;&#125; &lt;div&gt;ç­‰çº§ï¼šæ£’æäº†&lt;/div&gt; &#123;&#123;??&#125;&#125; &lt;div&gt;ç­‰çº§ï¼šæ•°æ®æœ‰è¯¯&lt;/div&gt; &#123;&#123;?&#125;&#125;&lt;/script&gt; æ¡ä»¶æ¨¡æ¿å‰åéƒ½ç”¨å•é—®å·åŒ…è£¹ï¼Œä¸­é—´çš„åŒé—®å·è¡¨ç¤ºelseã€‚ 123var student = &#123;&#x27;name&#x27;:&#x27;ace&#x27;,&#x27;score&#x27;:82&#125;var conditionText = doT.template($(&#x27;#templ4&#x27;).html());$(&#x27;body&#x27;).html(conditionText(student)) å¯¹äºæ¡ä»¶åˆ¤æ–­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ±‚å€¼å®šç•Œç¬¦ï¼Œå¯¹ä¸Šé¢çš„è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š 1234567891011121314151617&lt;script id=&quot;templ4&quot; type=&quot;text/x-dot-template&quot;&gt; &lt;div&gt;å§“åï¼š&#123;&#123;=it.name&#125;&#125;&lt;/div&gt; &lt;div&gt;æˆç»©ï¼š&#123;&#123;=it.score&#125;&#125;&lt;/div&gt; &#123;&#123; if(it.score&lt;60) &#123; &#125;&#125; &lt;div&gt;ç­‰çº§ï¼šä¸åŠæ ¼&lt;/div&gt; &#123;&#123; &#125; else if(it.score&lt;70) &#123; &#125;&#125; &lt;div&gt;ç­‰çº§ï¼šåŠæ ¼&lt;/div&gt; &#123;&#123; &#125; else if(it.score&lt;80) &#123; &#125;&#125; &lt;div&gt;ç­‰çº§ï¼šè‰¯å¥½&lt;/div&gt; &#123;&#123; &#125; else if(it.score&lt;90) &#123; &#125;&#125; &lt;div&gt;ç­‰çº§ï¼šä¼˜ç§€&lt;/div&gt; &#123;&#123; &#125; else if(it.score&lt;100) &#123; &#125;&#125; &lt;div&gt;ç­‰çº§ï¼šæ£’æäº†&lt;/div&gt; &#123;&#123; &#125; else &#123; &#125;&#125; &lt;div&gt;ç­‰çº§ï¼šæ•°æ®æœ‰è¯¯&lt;/div&gt; &#123;&#123; &#125; &#125;&#125;&lt;/script&gt; æ¨¡æ¿å®šç•Œç¬¦ï¼ˆdoTæ–°å¢åŠŸèƒ½ï¼‰ åœ¨1.0.0ä¹‹åçš„ç‰ˆæœ¬ï¼ŒdoTåŠ å…¥çš„å±€éƒ¨æ¨¡æ¿çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ªå±€éƒ¨æ¨¡æ¿ã€‚åœ¨ä¸»æ¨¡æ¿å’Œå­æ¨¡æ¿ä¸­æˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡itå˜é‡å¼•ç”¨åˆ°ä¼ å…¥çš„å¯¹è±¡ã€‚ 1234567891011&lt;script id=&quot;templ6&quot; type=&quot;text/x-dot-template&quot;&gt;// å®šä¹‰ä¸»æ¨¡æ¿&#123;&#123;##def.father: &lt;div&gt;ä¸»æ¨¡æ¿ï¼š&#123;&#123;=it.name&#125;&#125;&lt;/div&gt; å­æ¨¡æ¿1ï¼š&#123;&#123;#def.child1&#125;&#125; å­æ¨¡æ¿2ï¼š&#123;&#123;#def.child2&#125;&#125;#&#125;&#125;// ç¼–è¯‘æ—¶è¾“å…¥ä¸»æ¨¡æ¿&#123;&#123;#def.father&#125;&#125;&#123;&#123;=it.html&#125;&#125;&lt;/script&gt; é¦–å…ˆé€šè¿‡ä¸¤ä¸ª#å®šä¹‰ä¸€ä¸ªç¼–è¯‘çš„éœ€è¦å¼•å…¥å±€éƒ¨æ¨¡æ¿çš„ä¸»æ¨¡æ¿def.fatherï¼Œåœ¨å®ƒé‡Œé¢å®šä¹‰äº†ä¸¤ä¸ªå­æ¨¡æ¿def.child1å’Œdef.child2ï¼Œç„¶åé€šè¿‡ä¸€ä¸ª#åœ¨ç¼–è¯‘æ—¶è¾“å…¥æˆ‘ä»¬çš„ä¸»æ¨¡æ¿ã€‚å¦‚æœæ²¡æœ‰è¿™æ®µè¾“å…¥ä»£ç ï¼Œé‚£ä¹ˆæœ€ååœ¨ç¼–è¯‘æ—¶doTä¸ä¼šå¸®æˆ‘ä»¬è¾“å‡ºä¸»æ¨¡æ¿çš„ã€‚ 1234567891011var dataPart = &#123; &quot;name&quot;:&quot;Corner&quot;, &quot;age&quot;:31, &quot;html&quot;:&quot;&lt;div style=&#x27;background: #f00; height: 30px; line-height: 30px;&#x27;&gt;htmlå…ƒç´ &lt;/div&gt;&quot;&#125;;var defPart = &#123; &quot;child1&quot;:&quot;&lt;div&gt;&#123;&#123;=it.name&#125;&#125; who?&lt;/div&gt;&quot;, &quot;child2&quot;:&quot;&lt;div&gt;&#123;&#123;=it.name&#125;&#125; how?&lt;/div&gt;&quot;&#125;;var partText = doT.template($(&quot;#templ6&quot;).html(), undefined, defPart);$(&quot;body&quot;).html(partText(dataPart)); åœ¨JSä¸­æˆ‘ä»¬é¦–å…ˆå®šä¹‰éœ€è¦ä¼ å…¥çš„æ•°æ®ï¼Œç„¶åå®šä¹‰ä¸€ä¸ªå­æ¨¡æ¿çš„å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡ä¸­åŒ…å«äº†æˆ‘ä»¬åœ¨æ¨¡æ¿ä¸­å®šä¹‰çš„ä¸¤ä¸ªå­æ¨¡æ¿çš„åç§°å’Œå†…å®¹ï¼Œåœ¨å­æ¨¡æ¿å†…å®¹ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡itå˜é‡å¼•ç”¨åˆ°ä¼ å…¥çš„å¯¹è±¡ã€‚ç„¶ååœ¨ç”Ÿæˆæ¨¡æ¿å‡½æ•°æ—¶æˆ‘ä»¬å°†å­æ¨¡æ¿çš„å¯¹è±¡ä¸€èµ·ä¼ ç»™templateã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"}]},{"title":"ç†è§£JSæ¨¡å—åŒ–","date":"2017-02-19T11:33:22.000Z","path":"2017/02/19/JS-Standard.html","text":"æ¨¡å—åŒ–åœ¨é¡¹ç›®ä¸­ååˆ†çš„é‡è¦ï¼Œä¸€ä¸ªå¤æ‚çš„é¡¹ç›®è‚¯å®šæœ‰å¾ˆå¤šç›¸ä¼¼çš„åŠŸèƒ½æ¨¡å—ï¼Œå¦‚æœæ¯æ¬¡éƒ½éœ€è¦é‡æ–°ç¼–å†™æ¨¡å—è‚¯å®šæ—¢è´¹æ—¶åˆè€—åŠ›ã€‚ä½†æ˜¯å¼•ç”¨åˆ«äººç¼–å†™æ¨¡å—çš„å‰ææ˜¯è¦æœ‰ç»Ÿä¸€çš„â€œæ‰“å¼€å§¿åŠ¿â€ï¼Œå¦‚æœæ¯ä¸ªäººæœ‰å„è‡ªçš„å†™æ³•ï¼Œé‚£ä¹ˆè‚¯å®šä¼šä¹±å¥—ï¼Œä¸‹é¢ä»‹ç»å‡ ç§JSçš„æ¨¡å—åŒ–çš„è§„èŒƒã€‚ æ¨¡å—åŒ–è¿›ç¨‹ä¸€ï¼šscriptæ ‡ç­¾ è¿™æ˜¯æœ€åŸå§‹çš„ JavaScript æ–‡ä»¶åŠ è½½æ–¹å¼ï¼Œå¦‚æœæŠŠæ¯ä¸€ä¸ªæ–‡ä»¶çœ‹åšæ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œé‚£ä¹ˆä»–ä»¬çš„æ¥å£é€šå¸¸æ˜¯æš´éœ²åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œä¹Ÿå°±æ˜¯å®šä¹‰åœ¨ window å¯¹è±¡ä¸­ï¼Œä¸åŒæ¨¡å—çš„æ¥å£è°ƒç”¨éƒ½æ˜¯ä¸€ä¸ªä½œç”¨åŸŸä¸­ï¼Œä¸€äº›å¤æ‚çš„æ¡†æ¶ï¼Œä¼šä½¿ç”¨å‘½åç©ºé—´çš„æ¦‚å¿µæ¥ç»„ç»‡è¿™äº›æ¨¡å—çš„æ¥å£ã€‚ ç¼ºç‚¹:1ã€æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ2ã€å¼€å‘äººå‘˜å¿…é¡»ä¸»è§‚è§£å†³æ¨¡å—å’Œä»£ç åº“çš„ä¾èµ–å…³ç³»3ã€æ–‡ä»¶åªèƒ½æŒ‰ç…§scriptæ ‡ç­¾çš„ä¹¦å†™é¡ºåºè¿›è¡ŒåŠ è½½4ã€åœ¨å¤§å‹é¡¹ç›®ä¸­å„ç§èµ„æºéš¾ä»¥ç®¡ç†ï¼Œé•¿æœŸç§¯ç´¯çš„é—®é¢˜å¯¼è‡´ä»£ç åº“æ··ä¹±ä¸å ª æ¨¡å—åŒ–è¿›ç¨‹äºŒï¼šCommonJSè§„èŒƒ è¯¥è§„èŒƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯å…è®¸æ¨¡å—é€šè¿‡requireæ–¹æ³•æ¥åŒæ­¥åŠ è½½æ‰€è¦ä¾èµ–çš„å…¶ä»–æ¨¡å—ï¼Œç„¶åé€šè¿‡exportsæˆ–module.exportsæ¥å¯¼å‡ºéœ€è¦æš´éœ²çš„æ¥å£ã€‚ 1234require(&quot;module&quot;);require(&quot;../file.js&quot;);exports.doStuff = function() &#123;&#125;;module.exports = someValue; ä¼˜ç‚¹ï¼š1ã€ç®€å•å¹¶å®¹æ˜“ä½¿ç”¨2ã€æœåŠ¡å™¨ç«¯æ¨¡å—ä¾¿äºé‡ç”¨ ç¼ºç‚¹:1ã€åŒæ­¥çš„æ¨¡å—åŠ è½½æ–¹å¼ä¸é€‚åˆåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼ŒåŒæ­¥æ„å‘³ç€é˜»å¡åŠ è½½ï¼Œæµè§ˆå™¨èµ„æºæ˜¯å¼‚æ­¥åŠ è½½çš„2ã€ä¸èƒ½éé˜»å¡çš„å¹¶è¡ŒåŠ è½½å¤šä¸ªæ¨¡å— module.exportsä¸exportsçš„åŒºåˆ«1ã€exports æ˜¯æŒ‡å‘çš„ module.exports çš„å¼•ç”¨2ã€module.exports åˆå§‹å€¼ä¸ºä¸€ä¸ªç©ºå¯¹è±¡ {}ï¼Œæ‰€ä»¥ exports åˆå§‹å€¼ä¹Ÿæ˜¯ {}3ã€require() è¿”å›çš„æ˜¯ module.exports è€Œä¸æ˜¯ exports exportsç¤ºä¾‹ï¼š 12345678// app.jsvar circle = require(&#x27;./circle&#x27;);console.log(circle.area(4));// circle.jsexports.area = function(r) &#123; return r * r * Math.PI;&#125; module.exportsç¤ºä¾‹ï¼š 12345678// app.jsvar area = require(&#x27;./area&#x27;);console.log(area(4));// area.jsmodule.exports = function(r) &#123; return r * r * Math.PI;&#125; é”™è¯¯çš„æƒ…å†µï¼š 12345678// app.jsvar area = require(&#x27;./area&#x27;);console.log(area(4));// area.jsexports = function(r) &#123; return r * r * Math.PI;&#125; å…¶å®æ˜¯å¯¹ exports è¿›è¡Œäº†è¦†ç›–ï¼Œä¹Ÿå°±æ˜¯è¯´ exports æŒ‡å‘äº†ä¸€å—æ–°çš„å†…å­˜ï¼ˆå†…å®¹ä¸ºä¸€ä¸ªè®¡ç®—åœ†é¢ç§¯çš„å‡½æ•°ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ exports å’Œ module.exports ä¸å†æŒ‡å‘åŒä¸€å—å†…å­˜ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶ exports å’Œ module.exports æ¯«æ— è”ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ module.exports æŒ‡å‘çš„é‚£å—å†…å­˜å¹¶æ²¡æœ‰åšä»»ä½•æ”¹å˜ï¼Œä»ç„¶ä¸ºä¸€ä¸ªç©ºå¯¹è±¡{}ï¼Œä¹Ÿå°±æ˜¯è¯´area.jså¯¼å‡ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ app.js ä¸­è°ƒç”¨ area(4) ä¼šæŠ¥ TypeError: object is not a function çš„é”™è¯¯ã€‚ æ€»ç»“ï¼šå½“æˆ‘ä»¬æƒ³è®©æ¨¡å—å¯¼å‡ºçš„æ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ exports å’Œ module.exports å‡å¯ä½¿ç”¨ï¼ˆä½† exports ä¹Ÿä¸èƒ½é‡æ–°è¦†ç›–ä¸ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼‰ï¼Œè€Œå½“æˆ‘ä»¬æƒ³å¯¼å‡ºéå¯¹è±¡æ¥å£æ—¶ï¼Œå°±å¿…é¡»ä¹Ÿåªèƒ½è¦†ç›– module.exports ã€‚ æ¨¡å—åŒ–è¿›ç¨‹ä¸‰ï¼šAMDè§„èŒƒ ç”±äºæµè§ˆå™¨ç«¯çš„æ¨¡å—ä¸èƒ½é‡‡ç”¨åŒæ­¥çš„æ–¹å¼åŠ è½½ï¼Œä¼šå½±å“åç»­æ¨¡å—çš„åŠ è½½æ‰§è¡Œï¼Œå› æ­¤AMD(Asynchronous Module Definitionå¼‚æ­¥æ¨¡å—å®šä¹‰)è§„èŒƒè¯ç”Ÿäº†ã€‚ AMDæ ‡å‡†ä¸­å®šä¹‰äº†ä»¥ä¸‹ä¸¤ä¸ªAPI1ã€require([module], callback);2ã€define(id, [depends], callback);requireæ¥å£ç”¨æ¥åŠ è½½ä¸€ç³»åˆ—æ¨¡å—ï¼Œdefineæ¥å£ç”¨æ¥å®šä¹‰å¹¶æš´éœ²ä¸€ä¸ªæ¨¡å—ã€‚ ç¤ºä¾‹ï¼š 1234define(&quot;module&quot;, [&quot;dep1&quot;, &quot;dep2&quot;], function(d1, d2) &#123; return someExportedValue;&#125;);require([&quot;module&quot;, &quot;../file&quot;], function(module, file) &#123; /* ... */ &#125;); ä¼˜ç‚¹ï¼š1ã€é€‚åˆåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­å¼‚æ­¥åŠ è½½æ¨¡å—2ã€å¯ä»¥å¹¶è¡ŒåŠ è½½å¤šä¸ªæ¨¡å— ç¼ºç‚¹ï¼š1ã€æé«˜äº†å¼€å‘æˆæœ¬ï¼Œä»£ç çš„é˜…è¯»å’Œä¹¦å†™æ¯”è¾ƒå›°éš¾ï¼Œæ¨¡å—å®šä¹‰æ–¹å¼çš„è¯­ä¹‰ä¸é¡ºç•…2ã€ä¸ç¬¦åˆé€šç”¨çš„æ¨¡å—åŒ–æ€ç»´æ–¹å¼ï¼Œæ˜¯ä¸€ç§å¦¥åçš„å®ç° æ¨¡å—åŒ–è¿›ç¨‹å››ï¼šCMDè§„èŒƒ CMD(Common Module Definition)è§„èŒƒå’ŒAMDå¾ˆç›¸ä¼¼ï¼Œå°½é‡ä¿æŒç®€å•ï¼Œå¹¶ä¸CommonJSå’ŒNode.jsçš„ Modules è§„èŒƒä¿æŒäº†å¾ˆå¤§çš„å…¼å®¹æ€§ã€‚åœ¨CMDè§„èŒƒä¸­ï¼Œä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚ ç¤ºä¾‹ï¼š 123456define(function(require, exports, module) &#123; var $ = require(&#x27;jquery&#x27;); var Spinning = require(&#x27;./spinning&#x27;); exports.doSomething = ... module.exports = ...&#125;) ä¼˜ç‚¹ï¼š1ã€ä¾èµ–å°±è¿‘ï¼Œå»¶è¿Ÿæ‰§è¡Œ2ã€å¯ä»¥å¾ˆå®¹æ˜“åœ¨ Node.js ä¸­è¿è¡Œ ç¼ºç‚¹ï¼š1ã€ä¾èµ– SPM æ‰“åŒ…ï¼Œæ¨¡å—çš„åŠ è½½é€»è¾‘åé‡ AMDå’ŒCMDçš„åŒºåˆ« AMDå’ŒCMDèµ·æ¥å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä»–ä»¬çš„åŒºåˆ«åœ¨å“ªé‡Œï¼š1ã€å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMDæ˜¯æå‰æ‰§è¡Œï¼ŒCMDæ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚2ã€AMDæ¨å´‡ä¾èµ–å‰ç½®ï¼›CMDæ¨å´‡ä¾èµ–å°±è¿‘ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å»requireã€‚çœ‹ä»£ç ï¼š 123456789101112131415161718// AMDdefine([&#x27;./a&#x27;, &#x27;./b&#x27;], function(a, b) &#123; // ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½ a.doSomething() // æ­¤å¤„ç•¥å» 100 è¡Œ b.doSomething() ...&#125;);// CMDdefine(function(require, exports, module) &#123; var a = require(&#x27;./a&#x27;) a.doSomething() // æ­¤å¤„ç•¥å» 100 è¡Œ var b = require(&#x27;./b&#x27;) // ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™ b.doSomething() // ... &#125;); 3ã€AMD çš„ API é»˜è®¤æ˜¯ä¸€ä¸ªå½“å¤šä¸ªç”¨ï¼ŒCMD çš„ API ä¸¥æ ¼åŒºåˆ†ï¼Œæ¨å´‡èŒè´£å•ä¸€ã€‚ æ¨¡å—åŒ–è¿›ç¨‹äº”ï¼šES6æ¨¡å—åŒ– EcmaScript6æ ‡å‡†å¢åŠ äº†JavaScriptè¯­è¨€å±‚é¢çš„æ¨¡å—ä½“ç³»å®šä¹‰ã€‚ES6 æ¨¡å—çš„è®¾è®¡æ€æƒ³ï¼Œæ˜¯å°½é‡çš„é™æ€åŒ–ï¼Œä½¿å¾—ç¼–è¯‘æ—¶å°±èƒ½ç¡®å®šæ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œä»¥åŠè¾“å…¥å’Œè¾“å‡ºçš„å˜é‡ã€‚CommonJSå’ŒAMDæ¨¡å—ï¼Œéƒ½åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šè¿™äº›ä¸œè¥¿ã€‚ åœ¨ ES6 ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨exportå…³é”®å­—æ¥å¯¼å‡ºæ¨¡å—ï¼Œä½¿ç”¨importå…³é”®å­—å¼•ç”¨æ¨¡å—ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒES6çš„è¿™å¥—æ ‡å‡†å’Œç›®å‰çš„æ ‡å‡†æ²¡æœ‰ç›´æ¥å…³ç³»ï¼Œç›®å‰ä¹Ÿå¾ˆå°‘æœ‰JSå¼•æ“èƒ½ç›´æ¥æ”¯æŒã€‚å› æ­¤Babelçš„åšæ³•å®é™…ä¸Šæ˜¯å°†ä¸è¢«æ”¯æŒçš„importç¿»è¯‘æˆç›®å‰å·²è¢«æ”¯æŒçš„requireã€‚ å°½ç®¡ç›®å‰ä½¿ç”¨importå’Œrequireçš„åŒºåˆ«ä¸å¤§(æœ¬è´¨ä¸Šæ˜¯ä¸€å›äº‹)ï¼Œä½†ä¾ç„¶å¼ºçƒˆæ¨èä½¿ç”¨importå…³é”®å­—ï¼Œå› ä¸ºä¸€æ—¦JSå¼•æ“èƒ½å¤Ÿè§£æES6çš„importå…³é”®å­—ï¼Œæ•´ä¸ªå®ç°æ–¹å¼å°±ä¼šå’Œç›®å‰å‘ç”Ÿæ¯”è¾ƒå¤§çš„å˜åŒ–ã€‚å¦‚æœç›®å‰å°±å¼€å§‹ä½¿ç”¨importå…³é”®å­—ï¼Œå°†æ¥ä»£ç çš„æ”¹åŠ¨ä¼šéå¸¸å°ã€‚ ç¤ºä¾‹ï¼š 123import &quot;jquery&quot;;export function doStuff() &#123;&#125;module &quot;localModule&quot; &#123;&#125; ä¼˜ç‚¹ï¼š1ã€å®¹æ˜“è¿›è¡Œé™æ€åˆ†æ2ã€é¢å‘æœªæ¥çš„ EcmaScript æ ‡å‡† ä¼˜ç‚¹ï¼š1ã€åŸç”Ÿæµè§ˆå™¨ç«¯è¿˜æ²¡æœ‰å®ç°è¯¥æ ‡å‡†2ã€å…¨æ–°çš„å‘½ä»¤å­—ï¼Œæ–°ç‰ˆçš„ Node.jsæ‰æ”¯æŒ","tags":[{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"æ¨¡å—åŒ–","slug":"Modularization","permalink":"https://xieyufei.com/tags/Modularization/"}]},{"title":"å¯¹ç¨‹åºå‘˜çš„ä¸€ä¸ªPromiseï¼ˆäºŒï¼‰","date":"2017-01-28T07:47:12.000Z","path":"2017/01/28/FrontEnd-Promise-jQuery.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€Šå¯¹ç¨‹åºå‘˜çš„ä¸€ä¸ªPromiseï¼ˆä¸€ï¼‰ã€‹ä¸­ï¼Œåˆ†äº«äº†ä¸€ä¸‹äº†ES6ä¸­Promiseçš„ç”¨æ³•ï¼Œä½†æ˜¯éœ€è¦æµè§ˆå™¨æ”¯æŒPromiseã€‚åœ¨jQueryä¸­ä¹Ÿæœ‰Promiseï¼Œå°±è®©æˆ‘æ¥çœ‹çœ‹jQueryä¸­çš„Promiseæ˜¯æ€ä¹ˆç”¨çš„ã€‚ jQueryä¸­çš„Promise åœ¨jQueryä¸­ï¼Œé¦–å…ˆè¦é€šè¿‡Deferredæ–¹æ³•è·å–åˆ°Deferredå¯¹è±¡ï¼Œè®©æˆ‘ä»¬æ¥æ‰“å°å‡ºæ¥çœ‹çœ‹å®ƒæœ‰ä»€ä¹ˆæ–¹æ³•ã€‚ 12var d = $.Deferred();console.log(d); æœ€åè¾“å‡ºå¦‚ä¸‹ï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°$.Deferred()è¿”å›æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆDeferredå¯¹è±¡ï¼‰ï¼Œä¹Ÿæœ‰resolveã€thenã€rejectç­‰ä¸€äº›æˆ‘ä»¬ç†Ÿæ‚‰çš„æ–¹æ³•ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆç”¨çš„ã€‚ åŸºæœ¬ç”¨æ³•12345678910111213function getPromise1()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; console.log(&#x27;å¼‚æ­¥1ç»“æŸ&#x27;); d.resolve(&#x27;å¼‚æ­¥1æ•°æ®&#x27;); &#125;, 200); return d;&#125;var def = getPromise1();def.then((data) =&gt; &#123; console.log(data);&#125;); æ„Ÿè§‰è·ŸES6ä¸­Promiseçš„ç”¨æ³•å¾ˆç›¸ä¼¼ã€‚æˆ‘ä»¬é¦–å…ˆé€šè¿‡$.Deferred()è·å–åˆ°äº†Deferredå¯¹è±¡ï¼Œç„¶ååœ¨å¼‚æ­¥æˆåŠŸåè¿”å›æ•°æ®ï¼Œç„¶ååœ¨thenæ–¹æ³•ä¸­å¯¹å¼‚æ­¥æ•°æ®è¿›è¡Œå¤„ç†ã€‚ ä½†æ˜¯è·ŸES6ä¸­ä¸ä¸€æ ·çš„æ˜¯ï¼Œå¼‚æ­¥æ²¡æœ‰æ”¾åˆ°Promiseçš„æ„é€ å‡½æ•°ä¸­ï¼Œåœ¨å¼‚æ­¥æˆåŠŸåï¼Œè°ƒç”¨äº†Deferredå¯¹è±¡çš„resolveæ–¹æ³•ã€‚thenæ–¹æ³•å¤„ç†å›è°ƒæ•°æ®è¿˜æ˜¯ä¸€æ ·çš„ã€‚ å‘ç°é—®é¢˜ æ—¢ç„¶Deferredå¯¹è±¡ä¸Šæœ‰resolve()æ–¹æ³•ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯åœ¨å¤–éƒ¨å°±èƒ½å¤Ÿè°ƒç”¨resolve()æ–¹æ³•å°±èƒ½å¤Ÿä¿®æ”¹Promiseçš„çŠ¶æ€å‘¢ã€‚æŠŠä¸Šé¢çš„ä»£ç è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š 12345678910111213function getPromise1()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; console.log(&#x27;å¼‚æ­¥1ç»“æŸ&#x27;); d.resolve(&#x27;å¼‚æ­¥1æ•°æ®&#x27;); &#125;, 300); return d;&#125;var def = getPromise1();def.then((data) =&gt; &#123; console.log(data);&#125;);def.resolve(&#x27;å¤–éƒ¨æ•°æ®1&#x27;); è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åœ¨å‡½æ•°çš„å¤–é¢è°ƒç”¨äº†resolve()æ–¹æ³•æå‰è®©å¼‚æ­¥ç»“æŸå¹¶ä¸”è¿”å›äº†æ•°æ®ã€‚è¿™æ ·Promiseçš„çŠ¶æ€å°±èƒ½å¤Ÿè¢«éšæ„çš„æ”¹å˜ï¼Œè‚¯å®šæ˜¯ä¸è¡Œçš„ã€‚ è§£å†³é—®é¢˜ å°†ä»£ç è¿›è¡Œå¦‚ä¸‹æ”¹è¿›ï¼Œåœ¨è¿”å›çš„å¯¹è±¡ä¸Šå¤šåŠ ä¸€ä¸ªpromise()æ–¹æ³•ï¼š 12345678910111213function getPromise1()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; console.log(&#x27;å¼‚æ­¥1ç»“æŸ&#x27;); d.resolve(&#x27;å¼‚æ­¥1æ•°æ®&#x27;); &#125;, 300); return d.promise();&#125;var def = getPromise1();def.then((data) =&gt; &#123; console.log(data);&#125;);def.resolve(&#x27;å¤–éƒ¨æ•°æ®1&#x27;); è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š è¿™æ—¶å€™ï¼Œå¦‚æœåœ¨å‡½æ•°çš„å¤–éƒ¨è°ƒç”¨resolve()æ–¹æ³•ä¼šæŠ¥é”™ï¼Œå‘Šè¯‰æˆ‘ä»¬resolve()æ–¹æ³•ä¸å­˜åœ¨ï¼Œå¼‚æ­¥ä¹Ÿä¼šâ€œå¦‚æœŸâ€æ‰§è¡Œå®Œæˆã€‚å¦‚æœæˆ‘ä»¬å°†defå¯¹è±¡æ‰“å°å‡ºæ¥çœ‹çš„è¯ä¼šå‘ç°å¹¶æ²¡æœ‰resolve()æ–¹æ³•ã€‚ æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒ å’ŒES6ä¸­çš„Promiseç›¸ä¼¼ï¼Œthenä¹Ÿæ”¯æŒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æ‰§è¡ŒæˆåŠŸçš„å›è°ƒå’Œæ‰§è¡Œå¤±è´¥çš„å›è°ƒã€‚ 123456789101112131415161718192021222324function getPromise1()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; var number = Math.round(Math.random()*10); if(number %2 == 0) &#123; d.resolve(&#x27;æˆåŠŸæ•°æ®&#x27;); &#125; else &#123; d.reject(&#x27;å¤±è´¥æ•°æ®&#x27;); &#125; &#125;, 300); return d.promise();&#125;var def = getPromise1();def.then( (data) =&gt; &#123; console.log(&#x27;æˆåŠŸå›è°ƒ&#x27;); console.log(data); &#125;, (data) =&gt; &#123; console.log(&#x27;å¤±è´¥å›è°ƒ&#x27;); console.log(data); &#125;) é™¤æ­¤ä¹‹å¤–ï¼ŒjQueryè¿˜æ–°å¢äº†ä¸¤ä¸ªå‡½æ•°ï¼Œdone()å’Œfail()åˆ†åˆ«ç”¨æ¥æŒ‡å®šæˆåŠŸçš„å›è°ƒå’Œå¤±è´¥çš„å›è°ƒã€‚å› æ­¤ï¼Œä¸Šé¢çš„ä»£ç å’Œä¸‹é¢çš„ä»£ç æ˜¯ç­‰ä»·çš„ï¼š 123456789var def = getPromise1();def.done((data) =&gt; &#123; console.log(&#x27;æˆåŠŸå›è°ƒ&#x27;); console.log(data);&#125;);def.fail((data) =&gt; &#123; console.log(&#x27;å¤±è´¥å›è°ƒ&#x27;); console.log(data);&#125;); é“¾å¼è°ƒç”¨ æ—¢ç„¶æ˜¯Promiseï¼Œé‚£ä¹ˆthen()è‚¯å®šä¹Ÿæ”¯æŒé“¾å¼è°ƒç”¨çš„ï¼Œè¿™è¾¹ä¹Ÿä¸åœ¨èµ˜è¿°ï¼Œè·ŸES6ä¸­æ˜¯ä¸€æ ·çš„ç”¨æ³•ï¼Œä¸å¤ªç†Ÿæ‚‰çš„å¯ä»¥æˆ³è¿™è¾¹ã€Šå¯¹ç¨‹åºå‘˜çš„ä¸€ä¸ªPromiseï¼ˆä¸€ï¼‰ã€‹ æ‰©å±•å‡½æ•° jQueryä¸­æ²¡æœ‰allå’Œraceæ–¹æ³•ï¼Œä½†æ˜¯æ‰©å±•äº†ä¸€äº›å…¶ä»–çš„æ–¹æ³•ã€‚ alwaysæ–¹æ³• alwaysæ–¹æ³•å°±æ˜¯ä¸ç®¡æ‰§è¡ŒæˆåŠŸæˆ–è€…å¤±è´¥ï¼Œéƒ½ä¼šæ‰§è¡Œçš„ï¼Œæœ‰ç‚¹ç±»ä¼¼ajaxçš„completeæ–¹æ³•ã€‚ 123456789101112var def = getPromise1();def.done((data) =&gt; &#123; console.log(&#x27;æˆåŠŸå›è°ƒ&#x27;); console.log(data);&#125;);def.fail((data) =&gt; &#123; console.log(&#x27;å¤±è´¥å›è°ƒ&#x27;); console.log(data);&#125;);def.always(() =&gt; &#123; console.log(&#x27;æ€»æ˜¯æ‰§è¡Œ&#x27;)&#125;) whenæ–¹æ³• whenæ–¹æ³•å’ŒES6ä¸­çš„allæ–¹æ³•åŠŸèƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥ï¼Œæ‰€æœ‰å¼‚æ­¥æ‰§è¡Œå®Œæˆåæ‰æ‰§è¡Œå›è°ƒå‡½æ•°ã€‚ä¸è¿‡whenæ–¹æ³•æ˜¯æŒ‚è½½åœ¨å…¨å±€ä¸­çš„æ–¹æ³•ï¼Œè€Œä¸”ï¼Œå®ƒæ¥å—çš„å‚æ•°ä¹Ÿæ˜¯å¤šä¸ªå¯¹è±¡ã€‚ 1234567891011121314151617181920212223242526function getPromise1()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; d.resolve(&#x27;æˆåŠŸæ•°æ®1&#x27;); &#125;, 100); return d.promise();&#125;function getPromise2()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; d.resolve(&#x27;æˆåŠŸæ•°æ®2&#x27;); &#125;, 200); return d.promise();&#125;function getPromise3()&#123; var d = $.Deferred(); setTimeout(() =&gt; &#123; d.resolve(&#x27;æˆåŠŸæ•°æ®3&#x27;); &#125;, 300); return d.promise();&#125;$.when(getPromise1(), getPromise2(), getPromise3()).then((data1,data2,data3) =&gt; &#123; console.log(&#x27;æ‰§è¡Œå®Œæˆ&#x27;); console.log(data1, data2, data3);&#125;) ç†è§£ajaxçš„æœ¬è´¨ å¹³æ—¶æˆ‘ä»¬éƒ½æ˜¯è¿™ä¹ˆè¯·æ±‚ajaxå¼‚æ­¥çš„ï¼š 123456789$.ajax(&#123; url:&#x27;test.json&#x27;, success:function(data)&#123; // ... &#125;, error:function(data)&#123; // ... &#125;&#125;); ä¸Šé¢çš„ä»£ç ï¼Œå¹³æ—¶çš„å·¥ä½œä¸­æˆ‘ä»¬è‚¯å®šä¹Ÿå†™äº†æ— æ•°éäº†ï¼Œå·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œä½†æ˜¯è¿™ä¸ªajax()æ–¹æ³•è¿”å›çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Œè®©æˆ‘ä»¬æ‰“å°å‡ºæ¥çœ‹ä¸‹: éš¾é“æ˜¯å·§åˆä¹ˆï¼Ÿæˆ‘ä»¬çœ‹åˆ°äº†ç†Ÿæ‚‰çš„always()ã€done()ã€fail()ã€promise()ã€then()ç­‰æ–¹æ³•ã€‚æ²¡é”™ï¼Œajaxè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªDeferredå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯Deferredå¯¹è±¡ï¼Œé‚£ä¹ˆè‚¯å®šä¹Ÿæ”¯æŒé“¾å¼è°ƒç”¨äº†ã€‚ é‚£ä¹ˆå°†ajaxæ–¹æ³•è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š 12345678function getAjax1()&#123; var def = $.ajax(&#123;url:&#x27;test.json&#x27;&#125;); return def.promise();&#125;var def1 = getAjax1();def1.then((data) =&gt; &#123; console.log(data);&#125;); æ—¢ç„¶æ˜¯Deferredå¯¹è±¡ï¼Œé‚£ä¹ˆdone()ã€fail()ã€$.when()è¿™äº›æ–¹æ³•ä¹Ÿèƒ½ä½¿ç”¨ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"},{"name":"Promise","slug":"Promise","permalink":"https://xieyufei.com/tags/Promise/"}]},{"title":"å¯¹ç¨‹åºå‘˜çš„ä¸€ä¸ªPromiseï¼ˆä¸€ï¼‰","date":"2017-01-20T18:26:42.000Z","path":"2017/01/21/FrontEnd-Promise.html","text":"åœ¨æ—¥å¸¸çš„å·¥ä½œä¸­ç»å¸¸ä¼šé‡åˆ°éœ€è¦è¯·æ±‚å¤šæ¬¡å¼‚æ­¥çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºå¼‚æ­¥è¿”å›æ—¶é—´çš„ä¸ç¡®å®šæ€§ï¼Œå› æ­¤æœ‰æ—¶å€™ä¼šç»™æˆ‘ä»¬å¸¦æ¥å¾ˆå¤šçš„é—®é¢˜å’Œéº»çƒ¦ã€‚åœ¨æˆ‘ä»¬è¢«å¼‚æ­¥åµŒå¥—çš„å¤´æ˜è„‘èƒ€çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯å¤šä¹ˆå¸Œæœ›JSèƒ½å¤ŸåƒJAVAä¸€æ ·æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚å¸¦ç€è¿™æ ·è§£å†³é—®é¢˜çš„ä¿¡å¿µï¼Œç¬”è€…å­¦ä¹ äº†ä¸€ä¸‹Promiseï¼Œå‘ç°è¿˜æŒºå¥½ç”¨çš„ï¼Œå†™ä¸€ä¸‹ç¬”è€…çš„ä½¿ç”¨å¿ƒå¾—ã€‚ Promiseåœ¨è‹±æ–‡ä¸­çš„è§£é‡Šå°±æ˜¯æ‰¿è¯ºï¼Œåœ¨çˆ±æƒ…ä¸­æ—¶å¸¸ç”¨æ¥è¡¨ç¤ºæ¯”è¾ƒç½—æ›¼è’‚å…‹çš„æ†§æ†¬ï¼Œä½†æ˜¯åœ¨JSä¸­æ²¡æœ‰è¿™ä¹ˆæµªæ¼«ï¼Œåªæ˜¯å•çº¯åœ°è¡¨ç¤ºæ— è®ºæ“ä½œæˆåŠŸæˆ–è€…å¤±è´¥,ä¸€å®šä¼šç»™å‡ºä¸€ä¸ªâ€œåé¦ˆâ€ã€‚ å°±å¥½æ¯”åª³å¦‡å–Šä½ å»è¡—ä¸Šæ‰“é…±æ²¹ï¼Œæœ€ååªæœ‰ä¸¤ç§å¯èƒ½æ€§ï¼Œä¸€ç§å¯èƒ½æ€§æ˜¯ä½ æˆåŠŸçš„æ‰“åˆ°äº†é…±æ²¹ï¼Œå›æ¥ç»™å¥¹äº†ï¼›å¦ä¸€ç§å¯èƒ½æ€§å°±æ˜¯é…±æ²¹å–å…‰æˆ–è€…å…¶ä»–åŸå› ï¼Œç„¶åä½ æ²¡æœ‰æ‰“åˆ°é…±æ²¹ï¼Œä½†æ˜¯ä½ è¿˜æ˜¯ä¼šè·‘å»è·Ÿä½ åª³å¦‡æ±‡æŠ¥ï¼Œç„¶åä½ åª³å¦‡å°±ä¼šåœ¨å¿ƒé‡Œé»˜é»˜çš„æƒ³ä¸‹é¢è¿™å¼ å›¾ï¼š ES6ä¸­çš„Promise å’³å’³ï¼Œæœ‰ç‚¹æ‰¯è¿œäº†ï¼Œé‚£ä¹ˆé¦–å…ˆè®©æˆ‘ä»¬ç”¨consoleæ¥æ­å¼€Promiseçš„çœŸæ­£é¢ç›®å§ã€‚ ä»€ä¹ˆæ˜¯Promise é€šè¿‡æ§åˆ¶å°æ‰“å°å‡ºæ¥ï¼Œæˆ‘ä»¬çœ‹åˆ°åŸæ¥Promiseå…¶å®æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒçš„æ„é€ å‡½æ•°ä¸Šæœ‰resolveå’Œrejectç­‰å…¶ä»–å‡ ä¸ªæ–¹æ³•ï¼ŒåŸå‹ä¸Šä¹Ÿæœ‰thenã€catchç­‰æ–¹æ³•ã€‚æ—¢ç„¶æ˜¯æ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯èƒ½å¤Ÿé€šè¿‡newæ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„ã€‚ Promiseçš„ç‰¹ç‚¹ ä»‹ç»äº†Promiseï¼Œé‚£ä¹ˆæ¥è¯´ä¸€ä¸‹å®ƒçš„ä¸¤ä¸ªç‰¹ç‚¹å§ã€‚ å¯¹è±¡çš„çŠ¶æ€ä¸å—å¤–ç•Œå½±å“ã€‚Promise å¯¹è±¡ä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæœ‰ä¸‰ç§çŠ¶æ€ï¼šPendingï¼ˆè¿›è¡Œä¸­ï¼‰ã€Resolvedï¼ˆå·²å®Œæˆï¼‰å’Œ Rejectedï¼ˆå·²å¤±è´¥ï¼‰ã€‚åªæœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå¯ä»¥å†³å®šå½“å‰æ˜¯å“ªä¸€ç§çŠ¶æ€ï¼Œä»»ä½•å…¶ä»–æ“ä½œéƒ½æ— æ³•æ”¹å˜è¿™ä¸ªçŠ¶æ€ã€‚ ä¸€æ—¦çŠ¶æ€æ”¹å˜ï¼Œå°±ä¸ä¼šå†å˜ï¼Œä»»ä½•æ—¶å€™éƒ½å¯ä»¥å¾—åˆ°è¿™ä¸ªç»“æœã€‚Promise å¯¹è±¡çš„çŠ¶æ€æ”¹å˜ï¼Œåªæœ‰ä¸¤ç§å¯èƒ½ï¼šä» Pending å˜ä¸º Resolved å’Œä» Pending å˜ä¸º Rejectedã€‚åªè¦è¿™ä¸¤ç§æƒ…å†µå‘ç”Ÿï¼ŒçŠ¶æ€å°±å‡å›ºäº†ï¼Œä¸ä¼šå†å˜äº†ï¼Œä¼šä¸€ç›´ä¿æŒè¿™ä¸ªç»“æœã€‚å°±ç®—æ”¹å˜å·²ç»å‘ç”Ÿäº†ï¼Œä½ å†å¯¹ Promise å¯¹è±¡æ·»åŠ å›è°ƒå‡½æ•°ï¼Œä¹Ÿä¼šç«‹å³å¾—åˆ°è¿™ä¸ªç»“æœã€‚ è¯´äº†è¿™ä¹ˆå¤šï¼Œç›¸ä¿¡ç¬”è€…ä¹Ÿè¿«ä¸åŠå¾…äº†ï¼Œå…ˆæ¥æ„å»ºä¸€ä¸ªPromiseçœ‹çœ‹å§ã€‚ æ„å»ºä¸€ä¸ªPromise1234567891011function getPromise1() &#123; var p = new Promise((resolve, reject) =&gt; &#123; // è¿™é‡Œæ”¾ä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(() =&gt; &#123; console.log(&#x27;å¼‚æ­¥1æ‰§è¡Œå®Œæˆ&#x27;); resolve(&#x27;å¼‚æ­¥1è¿”å›æ•°æ®&#x27;); &#125;, 1000); &#125;); return p;&#125;getPromise1(); çœ‹åˆ°è¿™é‡Œè¯»è€…è‚¯å®šè§‰å¾—è·Ÿä»¥å‰æ¯”æ²¡æœ‰å¾ˆå¤§çš„å˜åŒ–ï¼Œè€Œä¸”æœ‰å¾ˆå¤šçš„å›°æƒ‘ï¼Œæ¯”å¦‚ï¼š ä¸ºä»€ä¹ˆPromiseå¤–å±‚è¦åŒ…ä¸€ä¸ªå‡½æ•°æŠŠå®ƒreturnå‡ºå»ï¼Œç›´æ¥åˆ›å»ºå¯¹è±¡ä¸å°±è¡Œäº†ä¹ˆã€‚ Promiseçš„æ„é€ å‡½æ•°ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æœ‰ä»€ä¹ˆç”¨ã€‚ è¿è¡Œä¸Šé¢çš„ä»£ç ï¼Œæ§åˆ¶å°å°±ä¼šæ‰“å°â€å¼‚æ­¥1æ‰§è¡Œå®Œæˆâ€ã€‚æˆ‘ä»¬åªæ˜¯æ„é€ äº†ä¸€ä¸ªPromiseçš„å¯¹è±¡ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨å®ƒé‡Œé¢çš„æ–¹æ³•ï¼Œå°±å·²ç»æ‰§è¡Œäº†ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè¦å°†Promiseæ”¾åˆ°å‡½æ•°ä¸­è°ƒç”¨è·å–çš„åŸå› ã€‚åŒæ—¶ï¼Œä½¿ç”¨ä¸€ä¸ªå‡½æ•°è¿”å›å¯¹è±¡æ›´åŠ ç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³ã€‚è¿™è¾¹çš„resolveæ–¹æ³•çš„ä½œç”¨å°±æ˜¯å°†Promiseå¯¹è±¡ä»PendingçŠ¶æ€ç½®ä¸ºResolvedçŠ¶æ€ã€‚ å¼‚æ­¥æ•°æ®å¤„ç†12345getPromise1().then((data) =&gt; &#123; // ä¸€äº›ä¸šåŠ¡é€»è¾‘å¤„ç† console.log(data);&#125;); getPromise1æ–¹æ³•è·å–åˆ°çš„å°±æ˜¯æˆ‘ä»¬ä¸Šé¢è¿”å›çš„Promiseå¯¹è±¡ï¼Œç›´æ¥è°ƒç”¨thenæ–¹æ³•ï¼Œè¡¨ç¤ºåœ¨å¼‚æ­¥ç»“æŸåè°ƒç”¨æ­¤æ–¹æ³•ã€‚å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°é»˜è®¤ä¼šä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬åœ¨Promiseæ„é€ å‡½æ•°ä¸­æ‰€è°ƒç”¨çš„resolveæ‰€ä¼ å…¥çš„å¼‚æ­¥æ•°æ®ã€‚ æ„Ÿæƒ…ç»•äº†ä¸€å¤§åœˆï¼Œå…¶å®å°±æ˜¯æŠŠåŸæœ‰åœ¨å¼‚æ­¥å®Œæˆåçš„ä¸šåŠ¡é€»è¾‘å•ç‹¬æŠ½ç¦»å‡ºä¸€ä¸ªæ–¹æ³•ä¹ˆï¼Ÿå…¶å®Promiseè¿˜èƒ½åšæ›´å¤šã€‚ æˆ‘æœ‰å¤šä¸ªå¼‚æ­¥ å¦‚æœè¿™ä¸ªæ—¶å€™æ¥äº†ä¸€ä¸ªéœ€æ±‚ï¼Œè¿™ä¸ªå¼‚æ­¥çš„æ•°æ®ä¸å¤Ÿï¼Œè¿˜éœ€è¦å‘å¦å¤–ä¸€ä¸ªå¼‚æ­¥ã€‚å¦‚æœæŒ‰ç…§ä»¥å‰çš„é€»è¾‘è‚¯å®šæ˜¯åœ¨thenå›è°ƒæ–¹æ³•çš„ç»§ç»­æ¥å‘å¼‚æ­¥ï¼Œç„¶åå°±é™·å…¥äº†æ¶(e)æ€§(xin)çš„åµŒå¥—ï¼Œå¦‚æœä¸šåŠ¡é€»è¾‘å¾ˆå¤æ‚ï¼Œè€Œä¸”è¿˜éœ€è¦å‘å¼‚æ­¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°é‡Œé¢ä»£ç ä¹Ÿä¼šè¶Šæ¥è¶Šåºå¤§ï¼ŒåæœŸç»´æŠ¤èµ·æ¥ä¼šéå¸¸çš„éº»çƒ¦ã€‚ä½†æ˜¯Promiseçš„å‡ºç°æ‹¯æ•‘äº†è¿™ä¸€åˆ‡ã€‚ Promiseçš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿè¿›è¡Œé“¾å¼çš„è°ƒç”¨ï¼Œå°†åŸæ¥åµŒå¥—è°ƒç”¨è½¬ä¸ºçº¿æ€§è°ƒç”¨ã€‚åœ¨thenæ–¹æ³•ä¸­ç»§ç»­è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼Œç„¶åèƒ½å¤Ÿç»§ç»­è°ƒç”¨thenæ–¹æ³•ã€‚ 123456789101112131415161718192021222324252627282930313233getPromise1().then((data) =&gt; &#123; console.log(data); return getPromise2();&#125;).then((data) =&gt; &#123; console.log(data); return getPromise3();&#125;).then((data) =&gt; &#123; console.log(data);&#125;);function getPromise2() &#123; var p = new Promise((resolve, reject) =&gt; &#123; // è¿™é‡Œæ”¾ä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(() =&gt; &#123; console.log(&#x27;å¼‚æ­¥2æ‰§è¡Œå®Œæˆ&#x27;); resolve(&#x27;å¼‚æ­¥2è¿”å›æ•°æ®&#x27;); &#125;, 2000); &#125;); return p;&#125;function getPromise3() &#123; var p = new Promise((resolve, reject) =&gt; &#123; // è¿™é‡Œæ”¾ä¸€äº›å¼‚æ­¥æ“ä½œ setTimeout(() =&gt; &#123; console.log(&#x27;å¼‚æ­¥3æ‰§è¡Œå®Œæˆ&#x27;); resolve(&#x27;å¼‚æ­¥3è¿”å›æ•°æ®&#x27;); &#125;, 3000); &#125;); return p;&#125; æˆ‘ä»¬ä¼šçœ‹åˆ°æ¯éš”ä¸€ç§’ã€ä¸¤ç§’ã€ä¸‰ç§’å°±ä¼šæ‰“å°ä¸€ç»„â€œæ‰§è¡Œå®Œæˆnå’Œè¿”å›æ•°æ®nâ€ã€‚åœ¨thenæ–¹æ³•ä¸­ä¹Ÿå¯ä»¥ä¸è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œç›´æ¥è¿”å›æ•°æ®ã€‚å°†ä¸Šé¢çš„ä»£ç å¦‚ä¸‹æ”¹å†™ï¼š 123456789101112getPromise1().then((data) =&gt; &#123; console.log(data); return data;&#125;).then((data) =&gt; &#123; console.log(data); return data;&#125;).then((data) =&gt; &#123; console.log(data);&#125;); æœ€åå¯ä»¥çœ‹åˆ°ï¼Œä¸€ç§’ä¹‹åæ‰“å°äº†ä¸€æ¬¡æ‰§è¡Œå®Œæˆ1å’Œä¸‰æ¬¡è¿”å›æ•°æ®1ã€‚è¿™æ ·çš„thenæ–¹æ³•æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ã€‚ rejectæ–¹æ³• ç»†å¿ƒçš„è¯»è€…å¯èƒ½å‘ç°äº†ï¼Œåœ¨Promiseçš„æ„é€ æ–¹æ³•ä¸­è¿˜æœ‰ä¸€ä¸ªrejectæ–¹æ³•è¿˜æ²¡æœ‰è¢«ç”¨åˆ°ã€‚æ—¢ç„¶æ˜¯å¼‚æ­¥ï¼Œé‚£ä¹ˆè‚¯å®šæœ‰æˆåŠŸä¹Ÿæœ‰å¤±è´¥çš„æ—¶å€™ï¼Œrejectæ–¹æ³•çš„ä½œç”¨æ˜¯å°†Promiseå¯¹è±¡çš„çŠ¶æ€ç½®ä¸ºRejectedçŠ¶æ€ï¼Œåœ¨thenæ–¹æ³•ä¸­æ‰§è¡Œå¤±è´¥æƒ…å†µçš„å›è°ƒå‡½æ•°ã€‚ 12345678910111213141516171819202122function getPromise4() &#123; var p = new Promise((resolve, reject) =&gt; &#123; setTimeout(() =&gt; &#123; var number = Math.round(Math.random()*10); if(number %2 == 0) &#123; resolve(&#x27;æˆåŠŸæ•°æ®&#x27;); &#125; else &#123; reject(&#x27;å¤±è´¥æ•°æ®&#x27;) &#125; &#125;, 100); &#125;); return p;&#125;getPromise4().then( (data) =&gt; &#123; console.log(&#x27;æˆåŠŸå›è°ƒï¼š&#x27; + data); &#125;, (data) =&gt; &#123; console.log(&#x27;å¤±è´¥å›è°ƒï¼š&#x27; + data); &#125;) æˆ‘ä»¬é¦–å…ˆè·å–ä¸€ä¸ªéšæœºæ•°ï¼Œåˆ¤æ–­è¿™ä¸ªéšæœºæ•°æ˜¯å¦æ˜¯å¶æ•°ï¼Œå¦‚æœæ˜¯å¶æ•°çš„è¯å°±è¿›å…¥æˆåŠŸçš„å›è°ƒæ–¹æ³•ï¼›å¦‚æœå¤±è´¥äº†å°±è¿›å…¥å¤±è´¥çš„å›è°ƒæ–¹æ³•ã€‚åœ¨thenæ–¹æ³•ä¸­æˆ‘ä»¬å‘ç°å¤šä¼ å…¥äº†ä¸€ä¸ªæ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªæ–¹æ³•è¿˜æ˜¯æˆåŠŸæƒ…å†µçš„å›è°ƒï¼Œç¬¬äºŒä¸ªæ–¹æ³•å°±æ˜¯å¤±è´¥æƒ…å†µçš„å›è°ƒï¼Œå¯ä»¥ä¸ä¼ ï¼Œä¸ä¼ çš„è¯å°±é»˜è®¤åªæœ‰æˆåŠŸçš„å›è°ƒã€‚ ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä¸ä¼ å¤±è´¥çš„å›è°ƒå‡½æ•°ï¼Œä½†æ˜¯åŒæ—¶ä½ è¿˜è°ƒç”¨äº†rejectæ–¹æ³•ï¼Œè¿™æ—¶å€™Promiseå†…éƒ¨ä¼šæŠ¥é”™ã€‚ è¿›é˜¶æ–¹æ³• åœ¨Promiseå¯¹è±¡ä¸Šè¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹æ³•ã€‚ catchæ–¹æ³• åœ¨Promiseçš„åŸå‹ä¸Šè¿˜æœ‰ä¸€ä¸ªcatchæ–¹æ³•ï¼Œæˆ‘ä»¬çŸ¥é“try/catchæ–¹æ³•æ˜¯ç”¨æ¥æ•æ‰å¼‚å¸¸çš„ï¼ŒPromiseä¸­çš„catchæ–¹æ³•ä¹Ÿå¯ä»¥åšåŒæ ·çš„äº‹æƒ…ã€‚å°†ä¸Šé¢çš„æ–¹æ³•è¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š 1234567891011121314getPromise4().then( (data) =&gt; &#123; console.log(&#x27;æˆåŠŸå›è°ƒï¼š&#x27; + data); console.log(temp); &#125;, (data) =&gt; &#123; console.log(&#x27;å¤±è´¥å›è°ƒï¼š&#x27; + data); console.log(temp); &#125;).catch((err)=&gt;&#123; console.log(&#x27;æ•è·å¼‚å¸¸&#x27;,err);&#125;) åœ¨æ‰§è¡ŒPromiseçš„å›è°ƒæ–¹æ³•æ—¶å¯èƒ½ä¼šè¿›å…¥åˆ°ç¬¬ä¸€ä¸ªæˆåŠŸçš„å›è°ƒå‡½æ•°ä¸­ä¹Ÿå¯èƒ½ä¼šè¿›å…¥åˆ°ç¬¬äºŒä¸ªå¤±è´¥çš„å›è°ƒå‡½æ•°ä¸­ï¼Œå¦‚æœå›è°ƒå‡½æ•°ä¸­æœ‰æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸ä¼šå› ä¸ºè¿™ä¸ªå¼‚å¸¸è€Œå¡æ­»ç¨‹åºï¼Œå°±ä¼šè¿›å…¥åˆ°catchæ–¹æ³•ä¸­æ•æ‰åˆ°å¼‚å¸¸ã€‚æœ€ç»ˆè¿è¡Œçš„æ•ˆæœæœ‰ä»¥ä¸‹ä¸¤ç§å¯èƒ½æ€§ï¼š allæ–¹æ³• Promiseä¸­è¿˜æœ‰ä¸€ä¸ªallæ–¹æ³•ï¼Œallæ˜¯å…¨éƒ¨çš„æ„æ€ï¼Œå› æ­¤æˆ‘ä»¬èƒ½çŒœæµ‹ï¼Œå°±æ˜¯ç­‰æ‰€æœ‰çš„å¼‚æ­¥éƒ½æ‰§è¡Œå®Œæ¯•ã€‚allæ–¹æ³•è®©Promiseæœ‰å¹¶è¡Œæ‰§è¡Œå¼‚æ­¥çš„èƒ½åŠ›ï¼Œç­‰æ‰€æœ‰å¹¶è¡Œå¼‚æ­¥æ‰§è¡Œå®Œæˆåæ‰æ‰§è¡Œå›è°ƒã€‚ 1234Promise.all([getPromise1(),getPromise2(),getPromise3()]).then((results) =&gt; &#123; console.log(&#x27;æ‰€æœ‰å¼‚æ­¥ç»“æŸ&#x27;, results)&#125;); å¯ä»¥çœ‹åˆ°allæ¥å—ä¸€ä¸ªPromiseçš„æ•°ç»„ï¼Œæ•°ç»„ä¸­æ˜¯ä¸‰ä¸ªPromiseå¯¹è±¡ã€‚åœ¨ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå¼‚æ­¥æ‰§è¡Œå®Œæˆåéƒ½æ²¡æœ‰è¿›å…¥thenæ–¹æ³•ï¼Œè€Œæ˜¯ç­‰æœ€åä¸€ä¸ªæœ€æ…¢çš„å¼‚æ­¥æ‰§è¡Œå®Œäº†æ‰è¿›å…¥thenæ–¹æ³•ã€‚æœ€ç»ˆï¼Œæ‰€æœ‰å¼‚æ­¥æ“ä½œçš„ç»“æœéƒ½é€šè¿‡thenæ–¹æ³•çš„å‚æ•°ä»¥æ•°ç»„çš„å½¢å¼ä¼ é€’è¿›æ¥ã€‚æœ€ç»ˆè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š ä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœå¤šä¸ªå¼‚æ­¥ä¸­æœ‰ä¸€ä¸ªå¼‚æ­¥æ‰§è¡Œå¤±è´¥äº†å‘¢ï¼Ÿå¦‚æœè¿™ä¸ªå¼‚æ­¥å¤±è´¥æ˜¯é€šè¿‡rejectæ–¹æ³•æŠ›å‡ºçš„ï¼Œé‚£ä¹ˆæ­¤æ—¶å…¶ä»–Pendingä¸­çš„å¼‚æ­¥è¿˜æ˜¯ä¼šç»§ç»­å»è¿è¡Œï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™å°±ä¼šæå‰è¿›å…¥thenæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°å‡½æ•°ä¸­å»ï¼Œè¿™ä¸ªå‡½æ•°çš„é»˜è®¤å‚æ•°ä¹Ÿåªæ˜¯è¿™ä¸ªå¤±è´¥å¼‚æ­¥rejectæ‰€å‘é€çš„æ•°æ®ï¼ˆä¸ä¸€å®šè¿˜æ˜¯æ•°ç»„ï¼‰ï¼Œç­‰å…¶ä»–å¼‚æ­¥æ‰§è¡Œå®Œæˆä¹Ÿä¸ä¼šå†å»æ‰§è¡Œthenæ–¹æ³•äº†ã€‚ raceæ–¹æ³• allæ–¹æ³•æ‰§è¡Œçš„æ•ˆæœæ˜¯ç­‰å¤§å®¶éƒ½ç»“æŸäº†å†è¿è¡Œï¼Œä½†æ˜¯raceæ˜¯èµ›è·‘ã€ç«äº‰çš„æ„æ€ï¼Œé‚£ä¹ˆå°±å¾ˆæ˜æ˜¾äº†ï¼Œå°±æ˜¯è°è·‘çš„å¿«å°±æœ‰è‚‰åƒã€‚å°†ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹å†™ï¼š 1234Promise.race([getPromise1(),getPromise2(),getPromise3()]).then((results) =&gt; &#123; console.log(&#x27;results&#x27;, results)&#125;); è¿™ä¸‰ä¸ªå¼‚æ­¥åŒæ ·æ˜¯å¹¶è¡Œæ‰§è¡Œçš„ï¼Œä½†æ˜¯raceçš„thenæ–¹æ³•ä¼˜å…ˆæ‰§è¡Œå…ˆå®Œæˆçš„å¼‚æ­¥ã€‚ç¬¬ä¸€ä¸ªå¼‚æ­¥getPromise1å…ˆæ‰§è¡Œå®Œï¼Œå› æ­¤å…ˆè¿›å…¥thenæ–¹æ³•ã€‚æ­¤æ—¶getPromise2å’ŒgetPromise3è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œè¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¸ä¼šå†å»æ‰§è¡Œthenæ–¹æ³•äº†ã€‚æœ€åæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š æ€»ç»“ æœ¬æ–‡ä¸­ä»‹ç»çš„æ‰€æœ‰å¼‚æ­¥æ“ä½œå‡ä»¥setTimeoutä½œä¸ºä¾‹å­ï¼Œå¦‚æœæœ‰ä¸æ­£ç¡®çš„åœ°æ–¹æ¬¢è¿æŒ‡æ­£ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"},{"name":"Promise","slug":"Promise","permalink":"https://xieyufei.com/tags/Promise/"}]},{"title":"æœåŠ¡å™¨å¼€å¯GZIP","date":"2017-01-08T02:25:00.000Z","path":"2017/01/08/SERVER-OPEN-GZIP.html","text":"å¼€å§‹æ¥è§¦GZIPå‹ç¼©æ˜¯åœ¨å·¥ä½œä¸­ä¸Šä¼ lodashè„šæœ¬æ–‡ä»¶åˆ°æœåŠ¡å™¨ä¸Šã€‚æœ¬æ¥å‹ç¼©ç‰ˆçš„è„šæœ¬ä¹Ÿæœ‰ä¸ƒåå‡ KBï¼Œä½†æ˜¯ç¬”è€…çš„åŒäº‹è¯´ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šåªæœ‰äºŒåå¤šKBï¼Œç¬”è€…åŠä¿¡åŠç–‘ï¼Œæ€ä¹ˆä¼šæœ‰è¿™ä¹ˆå¤§çš„å·®è·ï¼ŒæœåŠ¡å™¨å‹ç¼©çš„å¹…åº¦ä¹Ÿå¤ªå¤§äº†ã€‚åæ¥ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œå‘ç°GZIPç¡®å®èƒ½å¤ŸèŠ‚çœä¼ è¾“è¿‡ç¨‹ä¸­å¾ˆå¤šçš„æµé‡ã€‚ GZIPä»‹ç» ä»€ä¹ˆæ˜¯GZIP gzipæ˜¯GNUzipçš„ç¼©å†™ï¼Œæ˜¯ä¸€ä¸ªGUNè‡ªç”±è½¯ä»¶çš„æ–‡ä»¶å‹ç¼©ç¨‹åºã€‚åˆšå¼€å§‹ç”¨äºUNIXç³»ç»Ÿçš„æ–‡ä»¶å‹ç¼©ã€‚ç†Ÿæ‚‰Linuxç³»ç»Ÿçš„è¯»è€…åº”è¯¥äº†è§£æœ‰ä¸€ç§æ–‡ä»¶çš„åç¼€æ˜¯.gzï¼Œè¿™ç§æ–‡ä»¶å°±æ˜¯GZIPæ ¼å¼çš„æ–‡ä»¶ã€‚ç°åœ¨GZIPå·²ç»æˆä¸ºç½‘ä¸Šä½¿ç”¨éå¸¸æ™®éçš„ä¸€ç§æ•°æ®å‹ç¼©æ ¼å¼ã€‚ å·¥ä½œåŸç† æ—¢ç„¶GIZPæ˜¯ä¸€ç§æ•°æ®å‹ç¼©æ ¼å¼ï¼Œé‚£ä¹ˆå®ƒæ˜¯å¦‚ä½•åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´è¿›è¡Œæ•°æ®ä¼ è¾“çš„å‘¢ã€‚é€šè¿‡ä¸‹é¢ä¸€å¼ å›¾ç‰‡èƒ½å¤Ÿå¾ˆæ¸…æ™°çš„çœ‹å‡ºå®ƒçš„å·¥ä½œæ–¹å¼ï¼š é¦–å…ˆæµè§ˆå™¨å‘å‡ºä¸€ä¸ªè¯·æ±‚ç»™æœåŠ¡å™¨ï¼Œåœ¨è¯·æ±‚å¤´ä¸Šæ ‡æ˜è‡ªå·±å¯ä»¥æ¥æ”¶GZIPæ ¼å¼çš„æ•°æ®ã€‚ ç„¶åæœåŠ¡å™¨æ ¹æ®è¯·æ±‚å¤´ï¼Œå°†æ•°æ®ç»è¿‡å‹ç¼©åè¿”å›ç»™æµè§ˆå™¨ï¼ŒåŒæ—¶åœ¨å“åº”å¤´ä¸Šæ ‡æ˜è¿”å›çš„æ•°æ®æ˜¯GZIPæ ¼å¼çš„æ•°æ®ã€‚ æœ€åæµè§ˆå™¨å°†è¿”å›çš„æ•°æ®è§£å‹åæ¸²æŸ“ã€‚ æµè§ˆå™¨ä¸­æŸ¥çœ‹ ç¬”è€…æ¨¡æ‹Ÿäº†ä¸€ä¸ªGZIPæ•°æ®è¯·æ±‚ï¼š å¯ä»¥çœ‹åˆ°Request Headersï¼ˆè¯·æ±‚å¤´ï¼‰ä¸­æœ‰ä¸€ä¸ªAccept-Encodingå±æ€§ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªgzipï¼Œè¡¨ç¤ºæµè§ˆå™¨èƒ½å¤Ÿæ¥å—çš„æ•°æ®æ ¼å¼æœ‰ï¼šgzipã€deflateã€sdchå’Œbrã€‚ç„¶ååœ¨Response Headersï¼ˆå“åº”å¤´ï¼‰ä¸­æœ‰ä¸€ä¸ªContent-Encodingå±æ€§ï¼Œè¡¨ç¤ºè¿”å›çš„æ•°æ®æ ¼å¼çš„ç¼–ç ï¼Œæˆ‘ä»¬çœ‹åˆ°åªæœ‰ä¸€ç§ç¼–ç ï¼Œå°±æ˜¯gzipã€‚ ä¼˜åŠ¿ å‡å°ç½‘ç»œä¼ è¾“çš„æ•°æ®é‡ï¼Œæé«˜ç½‘é¡µå“åº”é€Ÿåº¦ã€‚ æœåŠ¡å™¨ä¸­å¦‚ä½•å¼€å¯GZIPTomcat ç»è¿‡åœ¨ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œæ‰¾åˆ°ç›®å½•ä¸‹çš„conf/server.xmlæ–‡ä»¶ï¼Œå°†Connectorè¿›è¡Œå¦‚ä¸‹æ”¹å†™ï¼š 123456789&lt;Connector port=&quot;8088&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; URIEcoding=&quot;UTF-8&quot; compression=&quot;on&quot; //æ‰“å¼€å‹ç¼©åŠŸèƒ½ compressionMinSize=&quot;2048&quot; //å¯ç”¨å‹ç¼©çš„è¾“å‡ºå†…å®¹å¤§å°ï¼Œè¿™é‡Œé¢é»˜è®¤ä¸º2KB noCompressionUserAgents=&quot;gozilla, traviata&quot; //å¯¹äºä»¥ä¸‹çš„æµè§ˆå™¨ï¼Œä¸å¯ç”¨å‹ç¼© compressableMimeType=&quot;text/html,text/xml,text/javascript,text/css,text/plain,image/png,image/jpg,image/gif&quot; //å‹ç¼©ç±»å‹ /&gt; é—®é¢˜å‡ºç° ä½†æ˜¯ã€‚ã€‚ã€‚å½“ç¬”è€…é…ç½®å®Œåï¼Œæ»¡å¿ƒæ¬¢å–œçš„æ‰“å¼€æœåŠ¡å™¨ä»¥ä¸ºæœ‰æ•ˆæ—¶ï¼Œå‘ç°è‡ªå·±å¤ªå¤©çœŸäº†ã€‚å¾ˆé—æ†¾çš„æ˜¯ï¼Œè„šæœ¬å¹¶æ²¡æœ‰è¢«å‹ç¼©ã€‚æˆ‘ä»¥ä¸ºæ˜¯æœåŠ¡å™¨æ²¡æœ‰é…ç½®æˆåŠŸï¼Œåˆå¤šæ¬¡é‡å¯ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ç”¨ï¼Œç½‘ä¸ŠæŸ¥äº†å¾ˆå¤šèµ„æ–™ï¼Œä¹Ÿæ²¡æœ‰è§£å†³ã€‚ è§£å†³é—®é¢˜ ç¬”è€…å‘ç°åŒæ ·æ˜¯CSSå´æ˜¯æœ‰æ•ˆçš„ï¼Œä¸ºä»€ä¹ˆè„šæœ¬ä¸è¡Œå‘¢ï¼Ÿä½†æ˜¯è„šæœ¬å äº†ç½‘ç»œæµé‡çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ã€‚ å½“ç¬”è€…å†æ¬¡ä»”ç»†æŸ¥çœ‹Response Headersçš„æ—¶å€™ï¼Œå‘ç°Content-Typeè¿™ä¸ªå±æ€§ç«Ÿç„¶æ˜¯application/javascriptï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„ä»£ç ä¸­é…ç½®çš„å´æ˜¯text/javascriptï¼Œä¼šä¸ä¼šæ˜¯è¿™ä¸ªé—®é¢˜å‘¢ã€‚ ç¬”è€…æŠ±ç€è¯•ä¸€ä¸‹çš„æ€åº¦ï¼Œåœ¨compressableMimeTypeå±æ€§ä¸­æ·»åŠ äº†application/javascriptã€‚æœ€åå†æ¬¡å¯åŠ¨æœåŠ¡å™¨ï¼ŒOKï¼Œé—®é¢˜è§£å†³äº†ã€‚ Nodejs Nodejsä¸­ç¬”è€…å¸¸ç”¨çš„åº“å°±æ˜¯expressï¼Œå°±ç”¨expressä½œä¸ºdemoã€‚å¦‚æœä½ çš„expressçš„4.0ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œåªéœ€è¦åœ¨ä»£ç ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 1app.use(express.compress()); åœ¨express 4.0ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ä¸å†é›†æˆGZIPåŠŸèƒ½ï¼Œéœ€è¦å•ç‹¬å®‰è£…ä¸­é—´ä»¶ï¼Œå…ˆé€šè¿‡npm i compressionå®‰è£…compressionï¼Œç„¶ååœ¨é¡¹ç›®ä¸­å¼•ç”¨ï¼š 12var compress = require(&#x27;compression&#x27;);app.use(compress()); NGINX ä¿®æ”¹nginxå®‰è£…ç›®å½•ä¸‹çš„conf/nginx.confé…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹ä»£ç ï¼š 12345678910111213#å¼€å¯gzipgzip on;#å‹ç¼©é˜€å€¼ï¼Œå°äº1kä¸å‹ç¼©gzip_min_length 1k;gzip_buffers 4 16k;#gzip_http_version 1.0;#å‹ç¼©çº§åˆ«gzip_comp_level 2;#å‹ç¼©çš„æ–‡ä»¶ç±»å‹gzip_types text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png application/javascript;gzip_vary off;#IE6å¯¹Gzipä¸æ€ä¹ˆå‹å¥½ï¼Œç¦æ­¢IE6è¿›è¡Œå‹ç¼©gzip_disable &quot;MSIE [1-6]\\.&quot;;","tags":[{"name":"æœåŠ¡å™¨","slug":"Server","permalink":"https://xieyufei.com/tags/Server/"},{"name":"æŠ€å·§","slug":"Tips","permalink":"https://xieyufei.com/tags/Tips/"}]},{"title":"Nodejså­¦ä¹ ï¼šæŸ¥è¯¢MySQLæ•°æ®åº“","date":"2016-12-05T14:33:55.000Z","path":"2016/12/05/Nodejs-Query-Mysql.html","text":"åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€ŠNodejså­¦ä¹ ï¼šè¿æ¥MySQLæ•°æ®åº“ã€‹ä¸­å­¦ä¹ äº†Nodejsè¿æ¥MySQLæ•°æ®åº“çš„å‡ ç§æ–¹æ³•ï¼Œæ•°æ®åº“è¿æ¥ä¸Šäº†ä¹‹åå°±éœ€è¦å¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ã€‚æœ¬ç¯‡æ–‡ç« ä»‹ç»ä¸€ä¸‹æŸ¥è¯¢MySQLæ•°æ®åº“çš„æ–¹æ³•ã€‚ æŸ¥è¯¢æ–¹å¼ ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸€ç§æŸ¥è¯¢æ•°æ®åº“çš„æœ€åŸºæœ¬çš„æ–¹æ³•ï¼šconnection.query(sqlString, callback)ã€‚ ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªSQLè¯­å¥ï¼Œå¯ä»¥æ˜¯ä»»æ„çš„æ•°æ®åº“è¯­å¥ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ŒæŸ¥è¯¢ç»“æœé€šè¿‡å›è°ƒå‚æ•°çš„æ–¹å¼è¿”å›ã€‚ 123456connection.query( &#x27;select * from book where author = &quot;xyf&quot; and country = &quot;china&quot;&#x27;, function(err, result) &#123; console.log(result); &#125;); è¿™æ˜¯æœ€ç®€å•çš„æŸ¥è¯¢æ–¹å¼ï¼Œä½†æ˜¯å­˜åœ¨ç€ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯éœ€è¦æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ¯”è¾ƒç¹çï¼›å¦ä¸€ä¸ªæ˜¯å®¹æ˜“è¢«sqlæ³¨å…¥æ”»å‡»ï¼Œå› æ­¤æˆ‘ä»¬æœ‰äº†ç¬¬äºŒç§æŸ¥è¯¢æ–¹å¼ã€‚ å ä½ç¬¦æ³¨å…¥æŸ¥è¯¢ ç¬¬äºŒç§æŸ¥è¯¢æ–¹å¼æ˜¯é‡‡ç”¨äº†å ä½ç¬¦çš„å½¢å¼connection.query(sqlString, values, callback)ï¼Œè¿™æ ·å°±ä¸éœ€è¦è¿›è¡Œæ¶å¿ƒçš„å­—ç¬¦ä¸²çš„æ‹¼æ¥äº†ã€‚ 1234567connection.query( &#x27;select * from book where author = ? and country = ?&#x27;, [&#x27;xyf&#x27;, &#x27;china&#x27;], function(err, result) &#123; console.log(result); &#125;); ä½¿ç”¨å¯¹è±¡æŸ¥è¯¢æ–¹å¼ ç¬¬ä¸‰ç§æŸ¥è¯¢æ–¹å¼æˆ‘ä»¬å°†æŸ¥è¯¢è¯­å¥å’ŒæŸ¥è¯¢å€¼ç»„åˆæˆä¸€ä¸ªå¯¹è±¡æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚å®ƒçš„å½¢å¼æ˜¯è¿™æ ·çš„ï¼šconnection.query(object, callback)ã€‚ 12345678910connection.query( &#123; sql: &#x27;select * from book where author = ? and country = ?&#x27;, values: [&#x27;xyf&#x27;, &#x27;china&#x27;], // ä½œä¸ºå¯¹è±¡çš„å±æ€§ timeout: 40000, &#125;, function(err, result) &#123; console.log(result); &#125;); ç»„åˆæŸ¥è¯¢æ–¹å¼ å°†ç¬¬äºŒç§å’Œç¬¬ä¸‰ç§æ–¹å¼å¯ä»¥ç»“åˆèµ·æ¥ä½¿ç”¨ï¼ŒæŸ¥è¯¢å€¼ä½œä¸ºqueryæ–¹æ³•çš„ä¸€ä¸ªå‚æ•°ï¼Œè€Œä¸æ˜¯ä½œä¸ºå¯¹è±¡ä¸­çš„ä¸€ä¸ªå±æ€§ã€‚ 1234567891011connection.query( &#123; sql: &#x27;select * from book where author = ? and country = ?&#x27;, timeout: 40000, // [&#x27;corner&#x27;, &#x27;us&#x27;] // å¦‚æœåŒæ—¶è®¾ç½®ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸ä¼šç”Ÿæ•ˆ &#125;, [&#x27;xyf&#x27;, &#x27;china&#x27;], // ä½œä¸ºqueryå‡½æ•°çš„ä¸€ä¸ªå‚æ•° function(err, result) &#123; console.log(result); &#125;); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ—¢å°†æŸ¥è¯¢å€¼ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œåˆå°†å…¶ä½œä¸ºqueryå‡½æ•°çš„å‚æ•°ï¼Œè¿™ä¸ªæ—¶å€™å‡½æ•°ä¸­çš„å‚æ•°å°†ä¼šè¦†ç›–å¯¹è±¡çš„å±æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶åªæœ‰å‚æ•°çš„å€¼ç”Ÿæ•ˆã€‚ è§£ææŸ¥è¯¢å€¼ åœ¨è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢æ—¶ï¼Œæœ‰ä¸€ä¸ªé‡è¦çš„åŸåˆ™å°±æ˜¯æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥ã€‚ä¸ºä»€ä¹ˆä¸èƒ½ç›¸ä¿¡ç”¨æˆ·çš„è¾“å…¥å‘¢ï¼Œé¦–å…ˆè®©æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹SQLæ³¨å…¥æ”»å‡»ã€‚ SQLæ³¨å…¥æ”»å‡» æ‰€è°“çš„SQLæ³¨å…¥æ”»å‡»ï¼Œå°±æ˜¯é€šè¿‡æŠŠSQLå‘½ä»¤æ’å…¥åˆ°Webè¡¨å•é€’äº¤æˆ–è¾“å…¥åŸŸåæˆ–é¡µé¢è¯·æ±‚çš„æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆè¾¾åˆ°æ¬ºéª—æœåŠ¡å™¨æ‰§è¡Œæ¶æ„çš„SQLå‘½ä»¤ã€‚ç”±äºç¬”è€…å¹¶ä¸æ˜¯ä»äº‹æ•°æ®åº“æ–¹é¢çš„å·¥ä½œï¼Œä¹Ÿä¸æ˜¯æ•°æ®åº“æ–¹é¢çš„ç –å®¶ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡ä¸€ä¸ªç®€å•çš„DEMOæ¥æ¼”ç¤ºä¸€ä¸‹SQLæ³¨å…¥æ”»å‡»ã€‚ å‡å¦‚æˆ‘ä»¬æ‹¼æ¥çš„SQLè¯­å¥æ˜¯è¿™æ ·çš„ 12var username = &#x27;xyf&#x27;;var sql = &#x27;select * from book where author = &quot;&#x27;+username+&#x27;&quot;&#x27;; è¿™é‡Œæˆ‘ä»¬æœŸå¾…ç”¨æˆ·è¾“å…¥çš„usernameæ˜¯Jackæˆ–è€…LiLiä¹‹ç±»çš„ï¼Œä½†æ˜¯ç”¨æˆ·è¯´æˆ‘åä¸ï¼Œæˆ‘å°±è¾“å…¥ä¸€ä¸²æ¶æ„ä»£ç ï¼š 12var username = &#x27;&quot;1 or 1=1&#x27;;var sql = &#x27;select * from book where author = &quot;&#x27;+username+&#x27;&quot;&#x27;; æœ€åæˆ‘ä»¬æ‹¼æ¥çš„æŸ¥è¯¢è¯­å¥å°±å˜æˆäº†ä¸‹é¢è¿™æ ·çš„ï¼š 1select * from book where author = &quot;&quot; or 1=1 å¦‚æœè¯»è€…å¯¹SQLè¯­å¥æœ‰ä¸€äº›åŸºæœ¬äº†è§£ï¼Œå°±ä¼šçŸ¥é“å¦‚æœæŠŠè¿™æ®µæŸ¥è¯¢è¯­å¥æ”¾åˆ°æ•°æ®åº“ä¸­è¿›è¡ŒæŸ¥è¯¢ï¼Œé‚£ä¹ˆæ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯éƒ½è¢«æŸ¥å‡ºæ¥äº†ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çœ‹åˆ°çš„ç»“æœã€‚ é¿å…SQLæ³¨å…¥æ”»å‡» é‚£ä¹ˆæ€ä¹ˆæ‰èƒ½é¿å…SQLæ³¨å…¥æ”»å‡»å‘¢ï¼Ÿmysqlæä¾›äº†ä¸¤ç§æ–¹æ³•ç»™æˆ‘ä»¬ï¼Œç¬¬ä¸€ç§æ–¹æ³•å°±æ˜¯æ¯æ¬¡æŸ¥è¯¢æ—¶éƒ½æŠŠç”¨æˆ·è¾“å…¥çš„æ•°æ®éƒ½ç”¨escape()å‡½æ•°è§£æä¸€ä¸‹ï¼Œæœ‰ç‚¹ç±»ä¼¼é¢„å¤„ç†è¯­å¥ã€‚ 123456789var authorname = &#x27;user input&#x27;;connection.escape(authorname);// æˆ–è€…ä½¿ç”¨mysql.escape(authorname);connection.query( &#x27;select * from book where author = &quot;&#x27;+authorname+&#x27;&quot;&#x27;, function(err, result) &#123; console.log(result); &#125;); ç¬¬äºŒç§æ–¹æ³•å°±æ˜¯åœ¨æŸ¥è¯¢æ—¶é€šè¿‡ä¸Šé¢è¯´åˆ°çš„å ä½ç¬¦æ³¨å…¥æŸ¥è¯¢çš„æŸ¥è¯¢æ–¹å¼æ¥è¿›è¡ŒæŸ¥è¯¢ã€‚ä½†å®ƒå†…éƒ¨çš„å®ç°ä¹Ÿæ˜¯é€šè¿‡ä¸Šé¢æ‰€è¯´çš„escape()æ–¹æ³•å°†ç”¨æˆ·è¾“å…¥è§£æäº†ä¸€ä¸‹ã€‚æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•æ¥å¾—ç®€å•å¿«æ·ã€‚ å¤šè¯­å¥æŸ¥è¯¢ mysqlè¿˜æ”¯æŒå¤šè¯­å¥æŸ¥è¯¢ï¼Œä½†æ˜¯ç”±äºæŸäº›å®‰å…¨åŸå› ï¼ˆå®˜æ–¹è§£é‡Šæ˜¯å› ä¸ºå¦‚æœå€¼æ²¡æœ‰æ­£ç¡®è§£æä¼šå¯¼è‡´SQLæ³¨å…¥æ”»å‡»ï¼‰é»˜è®¤æ˜¯è¢«ç¦æ­¢çš„ã€‚é‚£ä¹ˆè®©æˆ‘ä»¬æ¥æ‰“å¼€è¿™ä¸ªâ€œæ½˜å¤šæ‹‰é­”ç›’â€æŠŠã€‚ åœ¨åˆ›å»ºæ•°æ®åº“è¿æ¥æ—¶é¦–å…ˆæŠŠè¿™ä¸ªåŠŸèƒ½å¼€å¯ã€‚ 1234let connection = mysql.createConnection(&#123; // å…¶ä»–é…ç½® multipleStatements: true,&#125;); ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¤šè¯­å¥æŸ¥è¯¢äº†ã€‚ 1234567891011connection.query( &#123; sql: `select * from book where username = ?; select * from book where username = ?;`, &#125;, [&#x27;ace&#x27;,&#x27;xyf&#x27;], function(err, rows, fields) &#123; if (err) throw err; console.log(&#x27;The solution is: &#x27;, rows); &#125;); æŸ¥è¯¢ç»“æœ é€šè¿‡æŸ¥è¯¢è¯­å¥è¿”å›çš„ç»“æœä»¥æ•°ç»„çš„å½¢å¼è¿”å›ï¼Œå¦‚æœæ˜¯å•è¯­å¥æŸ¥è¯¢ï¼Œæ•°ç»„å°±æ˜¯ä¸€ä¸ªçº¯å¯¹è±¡æ•°ç»„[obj1,obj2,...]ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯æ•°æ®åº“ä¸­æ¯ä¸€è¡Œçš„æ•°æ®ï¼Œåªæ˜¯ä»¥å¯¹è±¡çš„æ–¹å¼è¿”å›ã€‚å¦‚æœæ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®ï¼Œé‚£ä¹ˆæ•°ç»„çš„é•¿åº¦å°±ä¸º0ã€‚ ä½†æ˜¯å¦‚æœæ˜¯å¤šè¯­å¥(mæ¡è¯­å¥)çš„æ–¹å¼æŸ¥è¯¢ï¼Œè™½ç„¶è¿”å›ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½†æ˜¯æ•°ç»„ä¸­åµŒå¥—æœ‰nä¸ªæ•°ç»„ï¼Œnçš„å–å€¼å–å†³äºä½ æŸ¥è¯¢è¯­å¥çš„æ¡æ•°m(å³n=m)ã€‚ æ€»ç»“ ç”±äºå®˜æ–¹æ–‡æ¡£æ¯”è¾ƒé›¶ç¢ï¼Œå› æ­¤æ•´ç†å¾—ä¸æ˜¯å¾ˆåˆ°ä½ï¼Œæœ‰é—®é¢˜çš„åœ°æ–¹å¸Œæœ›å¤§å®¶æŒ‡æ­£ã€‚","tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://xieyufei.com/tags/Nodejs/"},{"name":"Mysql","slug":"Mysql","permalink":"https://xieyufei.com/tags/Mysql/"},{"name":"æ•°æ®åº“","slug":"DataBase","permalink":"https://xieyufei.com/tags/DataBase/"}]},{"title":"Nodejså­¦ä¹ ï¼šè¿æ¥MySQLæ•°æ®åº“","date":"2016-11-15T14:33:55.000Z","path":"2016/11/15/Nodejs-Connect-Mysql.html","text":"å‰ä¸€é˜µåœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œéœ€è¦é€šè¿‡nodejsè¿æ¥åˆ°MySQLæ•°æ®åº“ï¼Œäºæ˜¯ç®€å•åœ°å­¦ä¹ äº†ä¸€ä¸‹MySQLè¿™ä¸ªåº“ï¼Œåˆ†äº«ä¸€äº›å­¦ä¹ å¿ƒå¾—ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ã€‚ ä»‹ç» é¦–å…ˆè¯´æ¥ä»‹ç»ä¸€ä¸‹MySQLï¼ˆéå¹¿å‘Šï¼‰ã€‚MySQLæ˜¯ç”±ç‘å…¸çš„MySQL ABå…¬å¸å¼€å‘ï¼Œåæ¥è¢«ç”²éª¨æ–‡å…¬å¸æ”¶è´­ã€‚å’ŒOracleä¸€æ ·ï¼ŒMySQLæ˜¯ä¸€ä¸ªå…¸å‹çš„å…³ç³»å‹æ•°æ®åº“ï¼Œåœ¨ç™¾åº¦ç™¾ç§‘ä¸­ï¼ŒæŠŠMySQLç§°ä¸ºæ˜¯æœ€å¥½çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„ä¹‹ä¸€ã€‚ ä»€ä¹ˆæ˜¯å…³ç³»å‹æ•°æ®åº“å’Œéå…³ç³»å‹æ•°æ®åº“ è¯´åˆ°å…³ç³»å‹æ•°æ®åº“ï¼Œå¤§å®¶è‚¯å®šå°±ä¼šæƒ³åˆ°å¦ä¸€ä¸ªè¯ä¸ä¹‹å¯¹åº”ï¼Œéå…³ç³»å‹æ•°æ®åº“ï¼Œé‚£ä¹ˆè¿™ä¸¤è€…æœ‰ä»€ä¹ˆæ ·çš„åŒºåˆ«å‘¢ï¼Ÿ å…³ç³»å‹æ•°æ®åº“æ˜¯æŒ‡é‡‡ç”¨äº†å…³ç³»æ¨¡å‹ï¼ˆæŒ‡çš„æ˜¯äºŒç»´è¡¨æ ¼æ¨¡å‹ï¼‰æ¥ç»„ç»‡æ•°æ®çš„æ•°æ®åº“ï¼Œæœ‰ç¨³å®šçš„è¡¨ç»“æ„ï¼›è€Œéå…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®æ²¡æœ‰å…³ç³»æ¨¡å‹ï¼Œä»¥å¯¹è±¡çš„å½¢å¼å­˜æ”¾åˆ°æ•°æ®åº“ä¸­ï¼Œå¯¹è±¡ä¹‹é—´çš„å…³ç³»æ˜¯é€šè¿‡æ¯ä¸ªå¯¹è±¡çš„å±æ€§æ¥å†³å®šçš„ï¼Œæœ‰ç‚¹ç±»ä¼¼äºä¸€é•¿ä¸²jsonå¯¹è±¡ã€‚å…¸å‹çš„éå…³ç³»å‹æ•°æ®åº“æœ‰MongoDBå’ŒRedisã€‚ è°¢å°é£åšå®¢ä¸“ç”¨é˜²çˆ¬è™«é“¾æ¥ï¼Œæƒ³è¦çœ‹æœ€æ–°çš„å‰ç«¯åšå®¢è¯·ç‚¹è¿™é‡Œ MySQLçš„ä¼˜ç¼ºç‚¹ æˆ‘åœ¨é¡¹ç›®ä¸­ä½¿ç”¨MySQLä½œä¸ºæ•°æ®åº“ä¸»è¦æ˜¯å› ä¸ºå®ƒä½“ç§¯å°ï¼Œé€Ÿåº¦å¿«ï¼Œå®‰è£…å®Œæ‰å‡ ç™¾å…†ï¼Œç›¸æ¯”äºOracleå¥½å‡ ä¸ªGå®ƒç¡®å®â€œè½»â€äº†ä¸å°‘ã€‚è€Œä¸”æ ¸å¿ƒç¨‹åºé‡‡ç”¨å¤šçº¿ç¨‹ç¼–ç¨‹ï¼Œçº¿ç¨‹ä¹Ÿæ˜¯è½»é‡çº§çš„è¿›ç¨‹ï¼Œä¸ä¼šå ç”¨å¤ªå¤šçš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤ä¸€èˆ¬çš„ä¸­å°å‹ç½‘ç«™éƒ½é€‰æ‹©MySQLæ•°æ®åº“ï¼Œè€Œä¸”æœ€é‡è¦çš„æ˜¯MySQLå‡ ä¹æ˜¯å…è´¹çš„ã€‚ ä½†æ˜¯ä¹Ÿæ­£æ˜¯ç”±äºå®ƒçš„è½»é‡çº§ï¼Œå› æ­¤å®ƒä¹Ÿâ€œç æ‰â€äº†ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚å­˜å‚¨è¿‡ç¨‹ç­‰ã€‚ ä½¿ç”¨ è¿™è¾¹ä¸å†èµ˜è¿°MySQLçš„å®‰è£…è¿‡ç¨‹ï¼Œæœ‰éœ€è¦çš„è¯»è€…å¯ä»¥è‡ªè¡Œç™¾åº¦å®‰è£…æ•™ç¨‹ã€‚åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­é€šè¿‡npm install mysql --saveæ¥å®‰è£…ä¾èµ–ã€‚ è°¢å°é£åšå®¢ä¸“ç”¨é˜²çˆ¬è™«é“¾æ¥ï¼Œæƒ³è¦çœ‹æœ€æ–°çš„å‰ç«¯åšå®¢è¯·ç‚¹è¿™é‡Œ ä¸€ä¸ªç®€å•çš„Demo é¦–å…ˆï¼Œé€šè¿‡ä¸€ä¸ªå°çš„Demoæ¥æµ‹è¯•æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯å¦å·²ç»æ­å»ºå®Œæ¯•äº†ï¼š 1234567891011121314151617181920212223var mysql = require(&#x27;mysql&#x27;);// è¿æ¥æ•°æ®åº“çš„é…ç½®var connection = mysql.createConnection(&#123; // ä¸»æœºåç§°ï¼Œä¸€èˆ¬æ˜¯æœ¬æœº host: &#x27;localhost&#x27;, // æ•°æ®åº“çš„ç«¯å£å·ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤æ˜¯3306 port: 3306 // åˆ›å»ºæ•°æ®åº“æ—¶è®¾ç½®ç”¨æˆ·å user: &#x27;xyf&#x27;, // åˆ›å»ºæ•°æ®åº“æ—¶è®¾ç½®çš„å¯†ç  password: &#x27;xyf&#x27;, // åˆ›å»ºçš„æ•°æ®åº“ database: &#x27;xyf_db&#x27;&#125;);// ä¸æ•°æ®åº“å»ºç«‹è¿æ¥connection.connect();// æŸ¥è¯¢æ•°æ®åº“connection.query(&#x27;SELECT 1 + 1 AS solution&#x27;, function(err, rows, fields) &#123; if (err) throw err; console.log(&#x27;The solution is: &#x27;, rows[0].solution);&#125;);// å…³é—­è¿æ¥connection.end(); è¿è¡Œç¨‹åºï¼Œå¦‚æœæ˜¾ç¤ºâ€œThe solution is: 2â€ï¼Œé‚£ä¹ˆæ•´ä¸ªè¿æ¥æŸ¥è¯¢æ˜¯æˆåŠŸçš„ï¼›å¦‚æœä¸æˆåŠŸï¼Œè¯»è€…å¯ä»¥æ ¹æ®æ‰“å°çš„é”™è¯¯ä¿¡æ¯æç¤ºæ¥ä¿®æ”¹ã€‚ åœ¨æŸ¥è¯¢å®Œæ•°æ®åº“åï¼Œéœ€è¦é€šè¿‡end()å‡½æ•°å°†è¿æ¥å…³é—­ã€‚å¦‚æœè¿æ¥ä¸€ç›´æ‰“å¼€ï¼Œé¦–å…ˆä¼šæµªè´¹ä¸å¿…è¦çš„ç³»ç»Ÿèµ„æºï¼›å…¶æ¬¡ï¼Œæ•°æ®åº“çš„è¿æ¥æ•°é‡æœ‰é™åˆ¶ï¼Œå¦‚æœè¾¾åˆ°ä¸Šé™æ—¶ï¼Œä¼šå‡ºç°åç»­è¿æ¥ä¸ä¸ŠæŠ¥é”™çš„æƒ…å†µã€‚ å»ºç«‹æ•°æ®åº“è¿æ¥ è¦æƒ³æŸ¥è¯¢æ•°æ®åº“ï¼Œé¦–å…ˆå°±è¦è·Ÿæ•°æ®åº“å»ºç«‹è¿æ¥ï¼Œä¸Šé¢çš„Demoç»™å‡ºäº†ä¸€ç§å»ºç«‹è¿æ¥çš„æ–¹å¼ã€‚å®˜æ–¹æ–‡æ¡£è¿˜ç»™å‡ºäº†å¦å¤–ä¸¤ç§å»ºç«‹è¿æ¥çš„æ–¹å¼ã€‚ éšå¼å»ºç«‹è¿æ¥1234567var mysql = require(&#x27;mysql&#x27;);var connection = mysql.createConnection(...);connection.query(&#x27;SELECT 1 + 1 AS solution&#x27;, function(err, rows, fields) &#123; if (err) throw err; console.log(&#x27;The solution is: &#x27;, rows[0].solution);&#125;);connection.end(); æˆ‘ä»¬å¹¶æ²¡æœ‰åƒDemoä¸­ä¸€æ ·ä½¿ç”¨connect()å‡½æ•°å»ºç«‹è¿æ¥ï¼Œè€Œä¸”ç›´æ¥è¿›è¡Œäº†æŸ¥è¯¢ï¼Œè¿™æ—¶å€™å»ºç«‹è¿æ¥å°†ä¼šè¢«éšå¼åœ°è°ƒç”¨ã€‚ è¿æ¥å›è°ƒæŸ¥è¯¢ ä¸Šé¢ä¸¤ç§è¿æ¥æ–¹å¼å¹¶æ²¡æœ‰å¯¹è¿æ¥å‡ºé”™çš„æƒ…å†µè¿›è¡Œå¤„ç†ï¼Œä¸€æ—¦è¿æ¥å‡ºç°é”™è¯¯å°†å¸¦æ¥è¿é”çš„å¤šç±³è¯ºéª¨ç‰Œæ•ˆåº”ï¼ŒæŸ¥è¯¢ä¹Ÿå°†ä¼šå¤±è´¥ï¼Œæ•´ä¸ªç¨‹åºä¹Ÿä¼šå´©æºƒï¼Œä¸ºäº†é¿å…å‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œæˆ‘ä»¬å°†æŸ¥è¯¢å’Œå…³é—­è¿æ¥æ”¾åˆ°å›è°ƒå‡½æ•°ä¸­ã€‚ 123456789101112131415161718var mysql = require(&#x27;mysql&#x27;);var connection = mysql.createConnection(...);connection.connect(function(err)&#123; if(err)&#123; // è¿æ¥å¤±è´¥æ—¶çš„é”™è¯¯å¤„ç† console.log(err); return; &#125; connection.query(&#x27;SELECT 1 + 1 AS solution&#x27;, function(err, rows, fields) &#123; if(err)&#123; // æŸ¥è¯¢å¤±è´¥æ—¶çš„é”™è¯¯å¤„ç† console.log(err); return err; &#125; console.log(&#x27;The solution is: &#x27;, rows[0].solution); &#125;); connection.end();&#125;); æ³¨ï¼šä¸Šé¢çš„ä¸‰ç§å»ºç«‹è¿æ¥çš„æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ï¼Œå–å†³äºç¬”è€…æ€ä¹ˆå¤„ç†è¿æ¥é”™è¯¯ã€‚ è°¢å°é£åšå®¢ä¸“ç”¨é˜²çˆ¬è™«é“¾æ¥ï¼Œæƒ³è¦çœ‹æœ€æ–°çš„å‰ç«¯åšå®¢è¯·ç‚¹è¿™é‡Œ å…³é—­è¿æ¥ æ‰“å¼€äº†æ•°æ®åº“çš„è¿æ¥æˆ‘ä»¬ä¹Ÿéœ€è¦å…³é—­è¿æ¥ï¼Œæœ‰ä¸¤ç§å…³é—­è¿æ¥çš„æ–¹å¼ï¼Œä¸€ç§å°±æ˜¯æˆ‘ä»¬ä¸Šé¢ç”¨çš„end()æ–¹æ³•æ¥å…³é—­è¿æ¥ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚ 123connection.end(function(err) &#123; // è¿™æ—¶è¿æ¥å·²ç»è¢«å…³é—­äº†&#125;); é€šè¿‡end()å‡½æ•°å…³é—­è¿æ¥ä¸ä¼šå½±å“é˜Ÿåˆ—ä¸­çš„æŸ¥è¯¢ã€‚è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯è°ƒç”¨destroy()å‡½æ•°ã€‚ 1connection.destroy(); destroy()å‡½æ•°ç¡®ä¿äº†æ²¡æœ‰æ›´å¤šçš„æ—¶é—´å’Œå›è°ƒä¼šè§¦å‘è¿æ¥ã€‚åŒæ—¶destroy()å‡½æ•°ä¹Ÿæ²¡æœ‰å›è°ƒå‡½æ•°ã€‚ ä½¿ç”¨æ•°æ®åº“è¿æ¥æ±  æ•°æ®åº“è¿æ¥æ˜¯ä¸€ç§å…³é”®çš„ã€æœ‰é™çš„ã€æ˜‚è´µçš„èµ„æºã€‚ â€”ç™¾åº¦ç™¾ç§‘ é€šè¿‡ä¸Šé¢çš„æ•°æ®åº“è¿æ¥æ–¹å¼æˆ‘ä»¬ä¼šå‘ç°ç›´æ¥åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ¯”è¾ƒâ€œå±é™©â€ï¼Œå› ä¸ºæœ‰å¾ˆå¤šç§å¯èƒ½æ€§å¯¼è‡´è¿æ¥çš„å¤±è´¥ã€‚è€Œä¸”å¦‚æœæˆ‘ä»¬çš„ç¨‹åºä¸­éšæ„éƒ½å¯ä»¥å’Œæ•°æ®åº“å»ºç«‹è¿æ¥çš„è¯ï¼Œæˆ‘ä»¬çš„ç¨‹åºå°±æ¯”è¾ƒå¾—æ··ä¹±ï¼Œä¸èƒ½å¾ˆæœ‰æ•ˆçš„ç®¡ç†æ•°æ®åº“è¿æ¥ã€‚mysqlåº“æä¾›äº†å¦ä¸€ç§æ•°æ®åº“è¿æ¥æ–¹å¼ç»™æˆ‘ä»¬ã€‚ ä»€ä¹ˆæ˜¯æ•°æ®åº“è¿æ¥æ±  æ•°æ®åº“è¿æ¥æ± è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯å†é‡æ–°å»ºç«‹ä¸€ä¸ªã€‚è¿™é¡¹æŠ€æœ¯èƒ½æ˜æ˜¾æé«˜å¯¹æ•°æ®åº“æ“ä½œçš„æ€§èƒ½ã€‚ ç”¨ä¸€ä¸ªå¾ˆç”ŸåŠ¨çš„ä¾‹å­æ¥å½¢å®¹æ•°æ®åº“è¿æ¥æ± çš„å·¥ä½œï¼šä»¥å‰æˆ‘ä»¬å­˜å–é’±éƒ½éœ€è¦å»é“¶è¡Œçš„æŸœå°äº¤æ˜“ï¼Œé“¶è¡Œçš„æŸœå°æ•°é‡æ˜¯æœ‰é™çš„ï¼Œäººå¤šçš„æ—¶å€™è¿˜éœ€è¦æ’é˜Ÿï¼›ç°åœ¨æˆ‘ä»¬æŠŠé’±éƒ½å­˜åœ¨äº†æ”¯ä»˜å®ä¸Šï¼Œæ¯æ¬¡éœ€è¦ç”¨é’±çš„æ—¶å€™éƒ½ç›´æ¥è·Ÿæ”¯ä»˜å®â€œè¦â€ï¼Œä¸éœ€è¦å†è·‘åˆ°é“¶è¡Œå»äº†ï¼Œæ‰€æœ‰å’Œé“¶è¡Œâ€œæ‰“äº¤é“â€çš„ä¸šåŠ¡éƒ½äº¤ç»™äº†æ”¯ä»˜å®å¸®æˆ‘ä»¬æ¥ç®¡ç†ã€‚ æ•°æ®åº“è¿æ¥æ± åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°†ä¸€å®šæ•°é‡ï¼ˆæ•°é‡å—æœ€å°è¿æ¥æ•°åˆ¶çº¦ï¼‰çš„æ•°æ®åº“è¿æ¥å­˜æ”¾åˆ°æ•°æ®åº“è¿æ¥æ± ä¸­ï¼Œä¸ç®¡è¿™äº›æ•°æ®åº“è¿æ¥æ˜¯å¦è¢«ä½¿ç”¨ï¼Œè¿æ¥æ± ä¸€ç›´è¦å­˜æ”¾è¿™ä¹ˆå¤šçš„è¿æ¥æ•°é‡ã€‚è¿æ¥æ± çš„æœ€å¤§æ•°æ®åº“è¿æ¥æ•°é‡é™åˆ¶äº†è¿æ¥æ± æœ€å¤šèƒ½åŒæ—¶æ‹¥æœ‰çš„è¿æ¥æ•°ï¼Œå¦‚æœè¶…è¿‡æœ€å¤§è¿æ¥æ•°æ—¶ï¼Œè¯·æ±‚å°†ä¼šè¢«æ·»åŠ åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­å»ã€‚ åˆ›å»ºè¿æ¥æ±  ä¸‹é¢å°±å¼€å§‹åˆ›å»ºä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ã€‚ 123456789101112131415161718192021222324var mysql = require(&#x27;mysql&#x27;);var pool=mysql.createPool(&#123; host: &#x27;localhost&#x27;, user: &#x27;xyf&#x27;, password: &#x27;xyf&#x27;, port: &#x27;3306&#x27;, database: &#x27;xyf_db&#x27;, // æœ€å¤§è¿æ¥æ•°ï¼Œé»˜è®¤ä¸º10 connectionLimit: 10,&#125;)pool.getConnection(function(err,connection)&#123; if(err)&#123; console.log(err); return; &#125; connection.query(&#x27;SELECT 1 + 1 AS solution&#x27;,function(err,result)&#123; connection.release(); if(err)&#123; console.log(err); return; &#125; console.log(&#x27;The solution is: &#x27;, result[0].solution); &#125;)&#125;) é¦–å…ˆæˆ‘ä»¬é€šè¿‡createPool()æ–¹æ³•åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒçš„é…ç½®å‚æ•°å’Œä¸Šé¢çš„é…ç½®åŸºæœ¬å·®ä¸å¤šï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªæœ€å¤§è¿æ¥æ•°ã€‚æ¯æ¬¡æˆ‘ä»¬éœ€è¦å’Œæ•°æ®åº“å»ºç«‹è¿æ¥çš„æ—¶å€™ä¸å†æ˜¯ç›´æ¥å»ºç«‹è¿æ¥ï¼Œè€Œæ˜¯å»è¿æ¥æ± ä¸­é€šè¿‡pool.getConnection()æ–¹æ³•â€œæå–â€å·²æœ‰çš„è¿æ¥ã€‚è¿™ä¸ªæ–¹æ³•æœ‰ä¸€ä¸ªå›è°ƒï¼Œæ•°æ®åº“è¿æ¥ä½œä¸ºå›è°ƒå‚æ•°è¿”å›ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚ æ¯æ¬¡æŸ¥è¯¢å®Œæ•°æ®åº“æ˜¯éƒ½è¦ä½¿ç”¨release()æ–¹æ³•é‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œè¿™æ ·æ•°æ®åº“è¿æ¥åˆå›åˆ°äº†è¿æ¥æ± ä¸­ã€‚é‡Šæ”¾åå¦‚æœå†ä½¿ç”¨connectionå°†ä¼šæŠ¥é”™ã€‚ è°¢å°é£åšå®¢ä¸“ç”¨é˜²çˆ¬è™«é“¾æ¥ï¼Œæƒ³è¦çœ‹æœ€æ–°çš„å‰ç«¯åšå®¢è¯·ç‚¹è¿™é‡Œ å…³é—­è¿æ¥æ±  ä¸€èˆ¬æ•°æ®åº“è¿æ¥æ± ä¸éœ€è¦å…³é—­ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨å®Œè¿æ¥æ± éœ€è¦å°†æ‰€æœ‰çš„è¿æ¥å…³é—­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨pool.end()æ–¹æ³•å°†å…¶å…³é—­ã€‚ 123pool.end(function (err) &#123; // æ‰€æœ‰è¿æ¥æ± ä¸­çš„æ•°æ®åº“è¿æ¥å°†ä¼šè¢«å…³é—­&#125;); end()æ–¹æ³•æä¾›ä¸€ä¸ªå›è°ƒæ–¹æ³•ï¼Œä»¥ä¾¿åœ¨æ‰€æœ‰è¿æ¥å…³é—­æ—¶è¿›è¡Œä¸€äº›æ“ä½œã€‚å…³é—­è¿æ¥æ± å‰æ‰€æœ‰é˜Ÿåˆ—ä¸­çš„æŸ¥è¯¢ä»»ç„¶ä¼šæ‰§è¡Œå®Œæˆï¼Œæ‰€ä»¥æ¯æ¬¡å…³é—­çš„æ—¶é—´éƒ½ä¸ä¸€æ ·ã€‚ä¸€æ—¦end()æ–¹æ³•è¢«è°ƒç”¨äº†ï¼ŒgetConnectionå’Œå…¶ä»–ä¸€äº›è·å–è¿æ¥æ± ä¸­è¿æ¥çš„æ–¹æ³•ä¸ä¼šå†è¢«æ‰§è¡Œã€‚ æ€»ç»“ æœ¬ç¯‡æ–‡ç« ä¸»è¦å­¦ä¹ äº†nodejsè¿æ¥mysqlæ•°æ®åº“çš„ä¸€äº›ä¸¤ç§è¿æ¥æ–¹å¼ï¼Œç›´æ¥è¿æ¥å’Œé€šè¿‡æ•°æ®åº“è¿æ¥æ± çš„æ–¹å¼è¿›è¡Œè¿æ¥ã€‚ç›´æ¥åˆ›å»ºè¿æ¥çš„æ–¹å¼æ¯”è¾ƒâ€œå±é™©â€ï¼Œæ¨èä½¿ç”¨è¿æ¥æ± ï¼ŒæŠŠæ‰€æœ‰çš„è¿æ¥é›†ä¸­ç®¡ç†ï¼Œæ—¢æ–¹ä¾¿åˆå®‰å…¨ã€‚","tags":[{"name":"Nodejs","slug":"Nodejs","permalink":"https://xieyufei.com/tags/Nodejs/"},{"name":"Mysql","slug":"Mysql","permalink":"https://xieyufei.com/tags/Mysql/"},{"name":"æ•°æ®åº“","slug":"DataBase","permalink":"https://xieyufei.com/tags/DataBase/"}]},{"title":"æ‰“é€ è‡ªå·±çš„èŠå¤©æœºå™¨äººHubot","date":"2016-11-12T02:24:29.000Z","path":"2016/11/12/Hubot-Chat-Machine.html","text":"è®°å¾—ä»¥å‰çœ‹é’¢é“ä¾ çš„æ—¶å€™ï¼Œçœ‹åˆ°æœ‰ä¸€ä¸ªå°ç½—ä¼¯ç‰¹æœ‰ä¸€ä¸ªç§äººçš„è¯­éŸ³æ™ºèƒ½ç³»ç»Ÿè´¾ç»´æ–¯ï¼ŒååŠ©é’¢é“ä¾ å¤„ç†å„ç§äº‹åŠ¡ã€è®¡ç®—å„ç§æ•°æ®å’Œä¿¡æ¯ï¼Œç›¸å½“çš„æ–¹ä¾¿ï¼Œè®©æˆ‘æ¬£ç¾¡ä¸å·²ã€‚äºæ˜¯æˆ‘å°±æƒ³ç€æœ‰ä¸€ä¸ªè‡ªå·±çš„æœºå™¨äººå¸®æˆ‘å¤„ç†äº‹æƒ…ï¼Œæ­£å¥½åœ¨ç½‘ä¸Šçœ‹åˆ°GitHubçš„ä¸€ä¸ªå¼€æºèŠå¤©æœºå™¨äººHubotï¼Œå­¦ä¹ ç€ç”¨äº†ä¸€ä¸‹ï¼Œè™½ç„¶æ²¡æœ‰è´¾ç»´æ–¯é‚£ä¹ˆç‹‚æ‹½é…·çœ©ï¼Œä½†æ˜¯æ¯•ç«Ÿæ˜¯å±äºè‡ªå·±çš„Hubotã€‚ ä¸€ã€ä»‹ç»Hubot Hubotæ˜¯GitHubçš„å¼€æºèŠå¤©æœºå™¨äººï¼Œå‰èº«ä¸»è¦æ˜¯GitHubç”¨æ¥å®Œæˆä¸€äº›è‡ªåŠ¨åŒ–çš„ä»»åŠ¡ï¼Œæ¯”å¦‚éƒ¨ç½²ç«™ç‚¹ã€è‡ªåŠ¨å¤„ç†ä»»åŠ¡(åˆ«é—®æˆ‘ï¼Œç¬”è€…ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆä»»åŠ¡)ç­‰ã€‚éšç€ä½¿ç”¨Hubotä½¿ç”¨è¶Šæ¥è¶Šé¢‘ç¹ï¼Œå®ƒä¹Ÿå˜å¾—æ›´å¥å£®æ›´æ™ºèƒ½ã€‚ä¸ºäº†å¸®åŠ©æ›´å¤šçš„äººï¼ŒGitHubå°†å®ƒé‡å†™å¹¶ä¸”å¼€æºã€‚ Huboté‡‡ç”¨CoffeeScriptè¯­è¨€å¼€å‘ï¼Œè¿™æ˜¯ä¸€å¥—ç±»ä¼¼äºJavaScriptçš„è¯­è¨€ï¼Œä½†æ˜¯æ›´åŠ çš„ç®€æ´ï¼Œå¾ˆå®¹æ˜“å°±èƒ½å¤Ÿè¯»æ‡‚ã€‚ç›®å‰HubotåŸç”Ÿå¸¦æœ‰ä¸€äº›åŠŸèƒ½ï¼Œæ¯”å¦‚æœç´¢å›¾ç‰‡ã€ç¿»è¯‘ã€åœ°å›¾æœåŠ¡ï¼Œè¿˜å¯ä»¥è‡ªå®šä¹‰æ’ä»¶è„šæœ¬ï¼ŒåŒæ—¶è¿˜èƒ½ä½¿ç”¨åˆ«äººå¼€å‘å¥½çš„æ’ä»¶ã€‚Hubotæ’ä»¶åº“ä¸­å¤§æ¦‚æœ‰ä¸€ç™¾å¤šä¸ªæ’ä»¶ã€‚ è¦è¿è¡ŒHubotï¼Œéœ€è¦å¯¹nodejså’Œnpmæœ‰ä¸€äº›äº†è§£ï¼Œæœ€å¥½è¿˜è£…æœ‰redisæœåŠ¡ã€‚æ¨èä½¿ç”¨Gitå·¥å…·è¿›è¡Œä»¥ä¸‹æ“ä½œã€‚ äºŒã€å®‰è£…Hubot ä¸‹é¢å°±å¼€å§‹åœ¨ç”µè„‘ä¸Šå®‰è£…æˆ‘ä»¬çš„Hubotï¼Œé»˜è®¤è¯»è€…ä»¬æŠŠnodejså’Œnpméƒ½å®‰è£…å¥½äº†ã€‚ ä¸€äº›å‡†å¤‡å·¥ä½œ ç”±äºå®˜æ–¹æ”¯æŒä½¿ç”¨CoffeeScriptè¯­è¨€ç¼–å†™ä»£ç ï¼Œæ‰€ä»¥å…ˆå®‰è£…è„šæœ¬ç¼–è¯‘å™¨å’ŒHubotçš„æ¡†æ¶ 1npm install yo generator-hubot coffee-script -g æ¥ç€åˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œè¿™é‡Œçš„ç›®å½•åå»ºè®®è·ŸHubotçš„åç§°ä¿æŒä¸€è‡´ï¼Œè¿™é‡Œæˆ‘çš„Hubotå«jarvis 12mkdir jarviscd jarvis å¼€å§‹å®‰è£… åœ¨gitå‘½ä»¤è¡Œä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå¼€å§‹æˆ‘ä»¬çš„å®‰è£…è¿‡ç¨‹ã€‚ 1yo hubot å‡ºç°äº†å¦‚ä¸‹å®‰è£…æç¤ºç•Œé¢ï¼Œè¾“å…¥æˆ‘ä»¬çš„æ‰€æœ‰è€…ã€Hubotåç§°å’Œæè¿°ç­‰ã€‚ è¾“å¥½åä¼šæ ¹æ®ä½ è¾“å…¥çš„åˆ›å»ºå¯¹åº”çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åè¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”å®‰è£…ä¸€äº›æ¨¡å—æ–‡ä»¶ç­‰ã€‚ç­‰å¾…å®‰è£…å®Œæˆå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ é…ç½®æ–‡ä»¶ å®‰è£…å®Œåå¯åŠ¨Hubotï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥bin/hubotï¼Œçœ‹åˆ°æœ‰æŠ¥é”™ï¼š å‡ºç°è¿™ä¸ªæŠ¥é”™æ˜¯å› ä¸ºæ²¡æœ‰é…ç½®herokuå’ŒredisæœåŠ¡æ²¡æœ‰å¼€å¯ã€‚å¯ä»¥å¿½ç•¥ï¼Œä¹Ÿå¯ä»¥åœ¨external-script.jsonä¸­æŠŠhubot-heroku-keepaliveå’Œhubot-redis-brainæ³¨é‡Šæ‰ã€‚ ç„¶åæŠŠ/scriptsç›®å½•ä¸‹çš„example.coffeeæ‰“å¼€ï¼Œå°†ä¸‹é¢ä¸¤è¡Œä»£ç ä¸­çš„#åˆ é™¤ï¼š 12# robot.hear /badger/i, (res) -&gt;# res.send &quot;Badgers? BADGERS? WE DON&#x27;T NEED NO STINKIN BADGERS&quot; ç„¶åå†æ¬¡å¯åŠ¨ï¼Œè¿™æ—¶å€™å°±èƒ½çœ‹åˆ°æˆ‘ä»¬çš„jarvisæ­£å¸¸å¯åŠ¨ã€‚åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥jarvis pingï¼Œå¦‚æœèƒ½çœ‹åˆ°jarviså›å¤pongï¼ŒHubotå°±å®‰è£…å®Œæˆäº†ã€‚ ä¸‰ã€è„šæœ¬ é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å“ªäº›å‘½ä»¤ã€‚åœ¨å‘½ä»¤è¡Œé‡Œè¾“å…¥jarvis helpï¼Œå¯ä»¥çœ‹åˆ°æ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å‘½ä»¤ä»¥åŠæè¿°ï¼Œæ¯”å¦‚mapã€pugã€timeã€imageå‘½ä»¤ç­‰ã€‚åœ¨å®‰è£…è¿‡å…¶ä»–æ’ä»¶åå¯ä»¥ä½¿ç”¨åŒæ ·çš„å‘½ä»¤æŸ¥çœ‹æ–°å¢åŠ çš„å‘½ä»¤ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„jarvis helpä¸­çš„jarvisæ˜¯ç¬”è€…çš„è‡ªå®šä¹‰æœºå™¨äººåç§°ï¼Œè¯»è€…éœ€è¦æ›¿æ¢æˆè‡ªå·±çš„æœºå™¨äººåç§°ï¼Œæ¯”å¦‚myhubot helpã€‚ è‡ªå®šä¹‰è„šæœ¬ Hubotæ˜¯åŸºäºäº‹ä»¶ç›‘å¬æœºåˆ¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä»–è‡ªå®šä¹‰äº‹ä»¶å‘ç”Ÿæ—¶çš„å›è°ƒï¼Œå½“è§¦å‘è¿™ä¸ªäº‹ä»¶æ—¶æ‰§è¡Œå›è°ƒã€‚ åœ¨é¡¹ç›®ç›®å½•ä¸‹æœ‰ä¸€ä¸ª/scriptsç›®å½•ï¼Œå­˜æ”¾çš„å°±æ˜¯æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è„šæœ¬ï¼Œåƒä¹‹å‰çš„example.coffeeå°±æ˜¯ä¸€ä¸ªå°çš„demoã€‚ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªgreet.coffeeï¼Œè¾“å…¥ä¸€ä¸‹ä»£ç ï¼š 123module.exports = (robot) -&gt; robot.hear /greet/i, (res) -&gt; res.send &quot;Hello,My Master&quot; æ¯ä¸ªè‡ªå®šä¹‰çš„è„šæœ¬éƒ½éœ€è¦å¯¼å‡ºä¸€ä¸ªå‡½æ•°functionï¼Œé»˜è®¤æœ‰ä¸€ä¸ªrobotçš„å‚æ•°ã€‚è¿™é‡Œçš„module.exports = (robot) -&gt;å°±ç›¸å½“äºJavaScriptä¸­çš„module.exports = function(rebot){}ã€‚ è¿™é‡Œçš„robotçš„hearæ–¹æ³•ç›¸å½“äºä¸€ä¸ªç›‘å¬äº‹ä»¶ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œåªè¦åŒ¹é…äº†è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å°±æ‰§è¡Œä¸‹é¢çš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒå‡½æ•°ä¸­æˆ‘ä»¬é€šè¿‡sendæ–¹æ³•è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ å†æ¬¡é‡å¯æˆ‘ä»¬çš„Hubotï¼Œè¾“å…¥jarvis greetï¼Œä¼šçœ‹åˆ°Hubotè·Ÿæˆ‘ä»¬æ‰“æ‹›å‘¼äº†ã€‚ æ·»åŠ å‘½ä»¤åˆ°helpä¸­ ä½†æ˜¯è¿™æ—¶å€™ä½¿ç”¨helpå‘½ä»¤ï¼Œæ²¡æœ‰çœ‹åˆ°å¯ä»¥ä½¿ç”¨greetå‘½ä»¤çš„æç¤ºï¼Œæ€ä¹ˆæ ·å°†æˆ‘ä»¬è‡ªå®šä¹‰çš„greetå‘½ä»¤æ·»åŠ åˆ°helpä¸­å»å‘¢ï¼Ÿå¦‚ä¸‹ä¿®æ”¹æˆ‘ä»¬çš„greet.coffeeè„šæœ¬ï¼Œæ·»åŠ å¤´éƒ¨æ³¨é‡Šè¯´æ˜ã€‚ 1234567# Description:# Greet To Master# Commands:# hubot greet - Greet To Mastermodule.exports = (robot) -&gt; robot.hear /greet/i, (res) -&gt; res.send &quot;Hello,My Master&quot; æ·»åŠ è·¯ç”±åœ°å€ Hubotä¸ä»…èƒ½é€šè¿‡å‘½ä»¤è¡Œç›‘å¬å‘½ä»¤ï¼Œè¿˜èƒ½å¤Ÿé€šè¿‡è·¯ç”±ç›‘å¬åœ°å€ã€‚ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ–‡ä»¶router.coffeeã€‚ 123module.exports = (robot) -&gt; robot.router.get &quot;/foo&quot;, (req, res) -&gt; res.end &quot;bar&quot; è¿™æ—¶å€™æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨è¾“å…¥http://localhost:8080/fooå°±èƒ½çœ‹åˆ°è¾“å‡ºbarã€‚è¿™é‡Œçš„ç«¯å£é»˜è®¤è¯†8080ï¼Œå¦‚æœéœ€è¦æ›´æ”¹ç«¯å£å¯ä»¥åœ¨å¯åŠ¨Hubotçš„æ—¶å€™é€šè¿‡PORT=8888 bin/hubotå‘½ä»¤è®¾ç½®ç«¯å£å· è‡ªå®šä¹‰è„šæœ¬å‘é€å¼‚æ­¥ Hubotä¸ä»…å¯ä»¥é™æ€çš„è®¾ç½®è¦å›å¤çš„å†…å®¹ï¼Œè¿˜èƒ½å¤ŸåŠ¨æ€åœ°é€šè¿‡å¼‚æ­¥æ•°æ®è¿”å›å¯¹åº”çš„å†…å®¹ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘ä»¬é€šè¿‡Hubotæ¥æŸ¥è¯¢åŸå¸‚çš„å¤©æ°”ã€‚ æˆ‘ä»¬æ–°å»ºä¸€ä¸ªweather.coffeeè„šæœ¬(éœ€è¦ç”³è¯·openweathermap.orgçš„APPID)ã€‚ 12345678910111213141516171819202122232425# Description:# Tells the weather## Configuration:# HUBOT_WEATHER_API_URL - Optional openweathermap.org API endpoint to use## Commands:# weather in &lt;location&gt; - Tells about the weather in given location## Author:# Cornerprocess.env.HUBOT_WEATHER_API_URL ||= &#x27;http://openweathermap.org/data/2.5/weather?units=imperial&amp;appid=[your appid]&amp;q=&#x27;module.exports = (robot) -&gt; robot.hear /weather in (\\w+)/i, (msg) -&gt; city = msg.match[1] url = process.env.HUBOT_WEATHER_API_URL + city msg.robot.http(url).get() (err, res, body) -&gt; data = JSON.parse(body) weather = [ &quot;#&#123;Math.round(data.main.temp)&#125; degrees&quot; ] for w in data.weather weather.push w.description msg.send &quot;It&#x27;s #&#123;weather.join(&#x27;, &#x27;)&#125; in #&#123;data.name&#125;, #&#123;data.sys.country&#125;&quot; process.envå…è®¸æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œæˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸€ä¸ªå¤©æ°”urlæ¥å£çš„å˜é‡ã€‚åœ¨CoffeeScriptä¸­x ||=yæ˜¯x = (x != null) ? x : yçš„ç®€å†™æ–¹å¼ï¼Œä»£è¡¨äº†å¦‚æœxæ²¡æœ‰èµ‹å€¼ï¼Œå°±å–yçš„å€¼ï¼Œä¿è¯äº†xä¸€å®šæœ‰å€¼ã€‚ é€šè¿‡è°ƒç”¨msg.robot.http()æ–¹æ³•æ¥å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œåœ¨å›è°ƒæ–¹æ³•ä¸­å…ˆè§£ææˆJSONæ ¼å¼ï¼Œç„¶åå¯¹æ•°æ®è¿›è¡Œæ‹¼æ¥å¤„ç†ï¼Œå†ç”¨msgè¿”å›ã€‚ å†æ¬¡å¯åŠ¨Hubotï¼Œè¾“å…¥jarvis weather in Suzhouå°±èƒ½æŸ¥åˆ°å¯¹åº”åŸå¸‚çš„å¤©æ°”äº†ã€‚ å¤„ç†æ²¡æœ‰è¯†åˆ«çš„ä¿¡æ¯ æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬è¾“å…¥çš„ä¿¡æ¯æ²¡æœ‰è¢«ä»»ä½•è„šæœ¬çš„æ­£åˆ™æ•è·åˆ°ï¼Œæˆ‘ä»¬è¿˜æ˜¯å¸Œæœ›å¯¹è¿™äº›ä¿¡æ¯è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆå¯ä»¥æ–°å»ºä¸€ä¸ªcatchAll.coffeeè„šæœ¬ã€‚ 123module.exports = (robot) -&gt; robot.catchAll (res) -&gt; res.send &quot;Sorry My Master,I do not know what you are saying&quot; å››ã€æ’ä»¶ è™½ç„¶æˆ‘ä»¬å†™äº†å¾ˆå¤šçš„è„šæœ¬ï¼Œä½†æ˜¯æœ‰çš„åŠŸèƒ½å·²ç»æœ‰ç°æˆçš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ è‡ªå¸¦æ’ä»¶ Hubotè‡ªå¸¦äº†å‡ ä¸ªæ’ä»¶ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ã€‚ hubot-pugme è¿™ä¸ªæ’ä»¶æœ‰ä¸¤ä¸ªå‘½ä»¤ï¼Œä¸€ä¸ªæ˜¯hubot pug meï¼Œå¦ä¸€ä¸ªæ˜¯hubot pug bomb [number]ã€‚ è¾“å…¥ç¬¬ä¸€ä¸ªå‘½ä»¤çœ‹åˆ°å‡ºç°ä¸€ä¸ªé“¾æ¥ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æˆ‘ä»¬çœ‹åˆ°äº†ä¸€åªå¯çˆ±çš„å“ˆå·´ç‹—ï¼Œè¾“å…¥ç¬¬äºŒä¸ªé“¾æ¥ï¼Œæˆ‘ä»¬æŠŠ[number]æ”¹æˆéšæ„çš„ä¸€ä¸ªæ•°å­—6ï¼Œæˆ‘ä»¬çœ‹åˆ°å‡ºæ¥6å¼ ç…§ç‰‡ï¼Œæ‰“å¼€æ˜¯6å¼ å“ˆå·´ç‹—çš„ç…§ç‰‡ï¼Œæ²¡é”™ï¼Œè¿™ä¸ªæ’ä»¶å°±æ˜¯ç»™ä½ çœ‹ç‹—ç‹—çš„(éš¾é“æ˜¯ç‹—ç‹—çˆ±å¥½è€…åšçš„ï¼Ÿ)ã€‚ æˆ‘é¡¿æ—¶å°±å¿ä¸ä½åæ§½äº†ï¼Œå±…ç„¶è¿˜æ ‡æ¦œè‡ªå·±æ˜¯æœ€é‡è¦çš„Hubotæ’ä»¶(Pugme is the most important hubot script)ï¼Œç®€ç›´é¸¡è‚‹å•Šã€‚ hubot-google-images è¿™ä¸ªæ’ä»¶æœ‰ä¸¤ä¸ªå‘½ä»¤ï¼Œä¸€ä¸ªæ˜¯hubot image meï¼Œå¦ä¸€ä¸ªæ˜¯hubot animate meã€‚ å®˜ç½‘è§£é‡Šå®ƒæ˜¯ç”¨æ¥æœç´¢å›¾ç‰‡åœ°å€çš„ï¼Œé‚£ä¹ˆå°±è®©æˆ‘ä»¬ç”¨å®˜ç½‘çš„ä¾‹å­æ¥å°è¯•ä¸€ä¸‹å§jarvis image me bananasã€‚ å¾ˆé—æ†¾çš„æ˜¯Hubotæé†’æˆ‘è¿™ä¸ªè°·æ­Œçš„å›¾ç‰‡æœç´¢å¼•æ“ä¸èƒ½ç”¨äº†ï¼Œè¦è®¾ç½®è‡ªå®šä¹‰çš„å¼•æ“ã€‚å†çœ‹äº†ä¸€ä¸‹å®˜æ–¹çš„æ–‡æ¡£ï¼Œè¿™ä¸ªè°·æ­Œå›¾ç‰‡æœç´¢å¼•æ“è¿˜è¦æ³¨å†Œï¼Œå¹¶ä¸”æ¯å¤©åªèƒ½å…è´¹æœç´¢ä¸€ç™¾æ¬¡ï¼Œè¶…è¿‡äº†è¿˜è¦æ”¶è´¹ï¼Œæœ‰ç‚¹å‘å•Šã€‚ hubot-maps è¿™ä¸ªæ’ä»¶çœ‹æ ·å­æ˜¯åœ°å›¾æ’ä»¶ï¼Œçœ‹äº†ä¸€ä¸‹å®˜æ–¹è¯´æ˜ï¼Œä¹Ÿæœ‰ä¸¤ä¸ªå‘½ä»¤hubot map meå’Œhubot direction meã€‚æŠ±ç€å¸Œæœ›å†æ¬¡å°è¯•äº†ä¸€ä¸‹jarvis map me wuxiï¼Œå¹¸è¿çš„æ˜¯ç»“æœå‡ºæ¥äº†ï¼Œæ˜¯ä¸€ä¸ªåœ°å›¾çš„åœ°å€ï¼Œå†çœ‹äº†ä¸€ä¸‹æ˜¯è°·æ­Œåœ°å›¾çš„åœ°å€ï¼Œé‚£ä¸ç”¨è¯´äº†ï¼Œç»å£è¦ç§‘å­¦ä¸Šç½‘äº†ã€‚ ä¸‹è½½æ’ä»¶ è‡ªå¸¦çš„æ’ä»¶ç”¨å®Œäº†ï¼Œç¬”è€…é¡¿æ—¶ç´¯è§‰ä¸çˆ±äº†ï¼Œæƒ³ç€å»ç½‘ä¸Šæ‰¾æ‰¾æœ‰æ²¡æœ‰å…¶ä»–çš„æ’ä»¶ã€‚ ç¬”è€…åœ¨ç½‘ä¸Šçœ‹åˆ°èƒ½å¤Ÿä½¿ç”¨npm search hubot-scripts githubå‘½ä»¤æŸ¥çœ‹Hubotçš„æ’ä»¶ï¼Œä½†æ˜¯è¯•äº†ä¸€ä¸‹è€æ˜¯æŠ¥é”™ï¼Œæ±‚å¥½å¿ƒäººå‘ŠçŸ¥ã€‚ äºæ˜¯åˆæ‰¾åˆ°äº†Hubotåœ¨çº¿æ’ä»¶åº“çš„é“¾æ¥ï¼Œè¿›å»çœ‹åˆ°ç¡®å®æœ‰ä¸å°‘æ’ä»¶ã€‚è¯¦ç»†çš„æ’ä»¶ç”¨æ³•æœ¬æ–‡ä¸å†èµ˜è¿°ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œæ ¹æ®éœ€è¦ä¸‹è½½ä½¿ç”¨ï¼Œä½¿ç”¨å‰éœ€è¦æŠŠæ’ä»¶åç§°æ·»åŠ åˆ°/external-scripts.jsonæ–‡ä»¶ä¸­å» äº”ã€æ€»ç»“ ç»è¿‡è¿™å‡ å¤©å¯¹Hubotçš„å­¦ä¹ ï¼Œå¯¹Hubotæˆ‘æœ‰ä»¥ä¸‹å‡ ç‚¹æ„Ÿæ‚Ÿï¼š Hubotç¡®å®èƒ½å¤Ÿåšä¸€äº›è‡ªåŠ¨åŒ–çš„å·¥ä½œï¼Œä½†æ˜¯éœ€è¦æˆ‘ä»¬å»å†™è„šæœ¬é…ç½® Hubotèƒ½å¤ŸèŠå¤©ä½†æ˜¯æ²¡æœ‰å¾ˆæ™ºèƒ½ï¼ŒåŸºäºäº‹ä»¶ç›‘å¬çš„åŸºç¡€ä¸Šï¼Œåªèƒ½å¤Ÿè®¾ç½®å‡ ç§å›ºå®šçš„å›å¤è¯­å¥ï¼Œå®ç°ç±»ä¼¼äºäº¬ä¸œJIMIçš„æ•ˆæœï¼Œè·ç¦»ç”µå½±ä¸­çš„æ•ˆæœè¿˜å·®çš„å¾ˆè¿œã€‚ æ’ä»¶æ•°é‡ä¸å¤šï¼Œåªæœ‰ä¸€ç™¾å¤šä¸ªï¼Œå®ç”¨çš„æ’ä»¶æ•°é‡æ›´å°‘ï¼Œå¾ˆå¤šæ’ä»¶éƒ½æ¯”è¾ƒçš„é¸¡è‚‹ï¼Œä¸å…·å®ç”¨æ€§ã€‚ å¾ˆå¤šæ’ä»¶è¿˜ä¸èƒ½ç”¨ï¼Œæ¯”å¦‚Hubot-WeChatæ®è¯´èƒ½å¤Ÿé›†æˆåˆ°å¾®ä¿¡ï¼Œæˆ‘ç”¨äº†ä¸€ç›´æœ‰æŠ¥é”™ï¼Œå¸Œæœ›æœ‰å¥½å¿ƒäººæˆåŠŸäº†äº¤æµä¸‹ç»éªŒã€‚","tags":[{"name":"èŠå¤©","slug":"Chat","permalink":"https://xieyufei.com/tags/Chat/"},{"name":"æœºå™¨","slug":"Machine","permalink":"https://xieyufei.com/tags/Machine/"}]},{"title":"æ­å»ºè‡ªå·±çš„Webpacké¡¹ç›®:å…¥é—¨ï¼ˆä¸€ï¼‰","date":"2016-10-21T04:15:07.000Z","path":"2016/10/21/Front-Webpack-First.html","text":"ä½œä¸ºå½“ä¸‹æœ€æµè¡Œçš„å‰ç«¯æ‰“åŒ…å·¥å…·ï¼Œwebpackæœ‰è‡ªå·±æ— ä¸ä¼¦æ¯”çš„ä¼˜åŠ¿å’ŒåŠŸèƒ½ç‰¹æ€§ï¼Œä½¿ç”¨webpackæ‰“åŒ…è‡ªå·±çš„é¡¹ç›®èƒ½å¤Ÿå¤§å¤§åœ°æé«˜æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚å°ç¼–æ•´ç†äº†ä¸€ä¸‹webpackåœ¨é¡¹ç›®ä¸­çš„æœ€ä½³å®æˆ˜åˆ†äº«ç»™å¤§å®¶ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯webpack éšç€ç½‘é¡µå†…å®¹çš„è¶Šæ¥è¶Šä¸°å¯Œï¼Œåœ¨æˆ‘ä»¬çš„ç½‘é¡µä¸Šæˆ‘ä»¬ç»å¸¸è¦ç”¨åˆ°å¾ˆå¤šçš„è„šæœ¬æ–‡ä»¶ï¼Œæ¯”å¦‚å¹»ç¯æ¨¡å—çš„è„šæœ¬ã€åˆ—è¡¨æ¨¡å—çš„è„šæœ¬å’Œæœç´¢æ¨¡å—çš„è„šæœ¬ç­‰ç­‰ã€‚å¦‚æœä¸å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œç»Ÿä¸€çš„æ‰“åŒ…ï¼Œæ•´ä¸ªé¡µé¢å°±ä¼šéå¸¸çš„å‡Œä¹±ã€‚ äºæ˜¯ï¼Œwebpackå°±è¯ç”Ÿäº†ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€å°æ´—è¡£æœº+çƒ˜å¹²æœº+å è¡£æœº(æ®è¯´å²›å›½å·²ç»å‘æ˜ç±»ä¼¼çš„æœºå™¨äººäº†)ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‚ä¸ƒæ‚å…«çš„è¡£æœã€è£¤å­ã€è¢œå­ç­‰ç­‰éƒ½ä¸¢è¿›å»ï¼Œç„¶åå®ƒå°±ä¼šå¸®æˆ‘ä»¬æ´—å¹²å‡€ã€çƒ˜å¹²ã€å æ•´é½äº†ï¼Œä¸€ç³»åˆ—å·¥ä½œå…¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦æˆ‘ä»¬äº²è‡ªåŠ¨æ‰‹ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯å¾ˆå¿ƒåŠ¨ã€‚ å€Ÿç”¨webpackå®˜ç½‘çš„ä¸€å¼ å›¾æ¥è§£é‡Šä¸€ä¸‹webpackçš„å·¥ä½œåŸç†ã€‚å·¦è¾¹å°±æ˜¯æˆ‘ä»¬æ‚ä¹±çš„é¡µé¢èµ„æºï¼Œæœ‰è„šæœ¬æ–‡ä»¶ã€æ ·å¼æ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ç­‰ç­‰ï¼Œå„ç§æ–‡ä»¶ä¹‹é—´äº’ç›¸å¼•ç”¨ã€‚ç»è¿‡webpackçš„æ‰“åŒ…æ•´ç†ï¼Œç”Ÿæˆé™æ€æ–‡ä»¶ã€‚ webpackçš„å·¥ä½œæ–¹å¼æ˜¯ï¼šé€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ‰¾åˆ°å…¥å£æ–‡ä»¶ï¼Œä»è¿™ä¸ªå…¥å£æ–‡ä»¶æ‰¾åˆ°ä½ é¡¹ç›®ä¾èµ–çš„æ‰€æœ‰èµ„æºæ–‡ä»¶ï¼Œä½¿ç”¨å¯¹åº”çš„èµ„æºåŠ è½½å™¨(loaders)æ¥å¤„ç†è¿™äº›èµ„æºæ–‡ä»¶ï¼Œæœ€åæ‰“åŒ…æˆé™æ€æ–‡ä»¶ã€‚ äºŒã€å®‰è£…webpack ä½¿ç”¨webpackä¹‹å‰éœ€è¦å®‰è£…webpackï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªåœ°æ–¹å®‰è£…ï¼šå…¨å±€ç›®å½•å’Œé¡¹ç›®ç›®å½•ï¼Œåœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1234//å…¨å±€å®‰è£…çš„ä½œç”¨æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨npm install -g webpack//å®‰è£…åˆ°é¡¹ç›®ç›®å½•ï¼Œä½¿ç”¨webpackçš„åŠŸèƒ½npm install --save-dev webpack ä¸‰ã€ä½¿ç”¨webpack åœ¨å¼€å§‹ä¸Šæ‰‹é¡¹ç›®ä¹‹å‰é¦–å…ˆæ¥æ­å»ºæˆ‘ä»¬çš„ç›®å½•ç»“æ„ã€‚ ç›®å½•ç»“æ„è¯´æ˜ æˆ‘ä»¬å¯ä»¥æŠŠé¡¹ç›®ç›®å½•æ­å»ºæˆå¦‚ä¸‹ï¼Œå½“ç„¶åªæ˜¯ç»™å¤§å®¶åšä¸€ä¸ªå‚è€ƒè€Œå·²ï¼š 12345678-- package.json-- webpack.config.js-- public/ -- images/ -- javascript/ -- stylesheet/-- view/-- build/ package.jsonä½¿ç”¨npm initå‘½ä»¤å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œåœ¨è¿™é‡Œä¸è¿‡å¤šçš„é˜è¿°ï¼›buildç›®å½•ä¸»è¦æ˜¯webpackæ„å»ºçš„äº§ç‰©ï¼Œè‡ªåŠ¨ç”Ÿæˆï¼›è¿™é‡Œçš„æ ¸å¿ƒæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬çš„webpack.config.jsæ–‡ä»¶ï¼Œéœ€è¦è‡ªå·±æ‰‹åŠ¨ç¼–å†™ã€‚ webpacké…ç½®æ–‡ä»¶ webpack.config.jsé…ç½®æ–‡ä»¶é€šè¿‡exportså¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¸­æœ‰ä¸‰ä¸ªæ¨¡å—æ¯”è¾ƒé‡è¦ï¼šentryã€outputå’Œmoduleï¼Œå…·ä½“å¦‚ä¸‹ï¼š 12345678910111213141516var webpack = require(&#x27;webpack&#x27;);var path = require(&#x27;path&#x27;)module.exports = &#123; entry: &#123; index: &#x27;./public/javascript/index.js&#x27; &#125;, output: &#123; path: path.resolve(__dirname, &#x27;build&#x27;), filename: &#x27;[name].bundle.js&#x27;, publicPath: &#x27;./build/&#x27; &#125;, module: &#123; loaders: [] &#125;, plugins:&#123;&#125;&#125; entryå±æ€§ entryå±æ€§æ˜¯é¡µé¢çš„ä¸»å…¥å£ï¼Œæ‰€æœ‰é¡µé¢çš„æ–‡ä»¶éƒ½åœ¨è¿™ä¸ªå…¥å£æ–‡ä»¶ä¸­è¿›è¡Œå¼•ç”¨ã€‚ å½“ç„¶ï¼Œä¸€ä¸ªé¡¹ç›®è‚¯å®šæœ‰ä¸æ­¢ä¸€ä¸ªé¡µé¢ï¼Œéœ€è¦å¤šä¸ªå…¥å£ï¼Œentryå±æ€§å¯ä»¥è¿™æ ·é…ç½®ï¼š 12345entry: &#123; index: &#x27;./public/javascript/index.js&#x27;, list: &#x27;./public/javascript/list.js&#x27;, //...å¤šä¸ªé¡µé¢çš„å…¥å£&#125;, outputå±æ€§ åœ¨webpackæ‰“åŒ…ä¹‹åï¼Œç”Ÿæˆçš„jsæ–‡ä»¶ã€cssæ–‡ä»¶ã€å›¾ç‰‡æ–‡ä»¶ç­‰ç­‰å°±ä¼šæ”¾åˆ°outputå±æ€§æ‰€æŒ‡å®šçš„æ–‡ä»¶ç›®å½•ä¸‹ã€‚ pathå±æ€§å°±æ˜¯æ‰€åœ¨æ–‡ä»¶å¤¹çš„è·¯å¾„ï¼Œéœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œè¿™é‡Œç”¨pathçš„resolveæ–¹æ³•è¿›è¡Œè§£æï¼›filenameå±æ€§æŒ‡å®šäº†è¾“å‡ºçš„æ–‡ä»¶åï¼Œ[name]è¡¨ç¤ºå…¥å£çš„å±æ€§åå«ä»€ä¹ˆå°±è¾“å‡ºå¯¹åº”çš„æ–‡ä»¶ï¼Œæ¯”å¦‚è¿™é‡Œçš„indexè¾“å…¥çš„æ–‡ä»¶åå°±æ˜¯index.bundle.jsã€‚ publicPathæ˜¯ä»¥httpæ–¹å¼è¯·æ±‚çš„é™æ€èµ„æºçš„è·¯å¾„ï¼Œwebpack-dev-server(webpackçš„ä¸€ä¸ªæ’ä»¶)ä¼šæ ¹æ®ä½ è¯·æ±‚çš„urlæ¥åŒ¹é…è¿™ä¸ªpublicPathä¸‹çš„æ–‡ä»¶ã€‚ moduleå±æ€§ moduleå±æ€§ä¸»è¦å­˜æ”¾è§£æèµ„æºæ–‡ä»¶çš„å„ä¸ªåŠ è½½å™¨ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡è¡¨ç¤ºäº†ä¸€ä¸ªåŠ è½½å™¨ã€‚ testå±æ€§è¡¨ç¤ºæ­£åˆ™åŒ¹é…ï¼Œç”¨æ¥åŒ¹é…æ–‡ä»¶çš„åç¼€åï¼›loaderå±æ€§è¡¨ç¤ºå¦‚æœæ–‡ä»¶ç›¸åŒ¹é…ï¼Œåˆ™è°ƒç”¨å¯¹åº”çš„åŠ è½½å™¨æ¥è§£ææ–‡ä»¶ã€‚æ¯”å¦‚æ ·å¼åŠ è½½å™¨æœ‰css-loaderã€sass-loaderã€‚ åŠ è½½å™¨çš„åç¼€éƒ½æ˜¯-loaderï¼Œåœ¨loaderå±æ€§ä¸­é…ç½®åŠ è½½å™¨ä¸ç”¨å†™åç¼€ï¼Œé…ç½®ä¸åŒçš„åŠ è½½å™¨éœ€è¦ä½¿ç”¨!åˆ†éš”å¹¶ä¸²è”èµ·æ¥ã€‚ pluginså±æ€§ pluginså±æ€§æ˜¯ç”¨æ¥æ”¾webpackçš„æ’ä»¶ï¼Œè¿™ä¸ªå±æ€§ä¸‹é¢ä¼šç”¨åˆ° ç¼–å†™å…¥å£æ–‡ä»¶ åœ¨/public/javascript/ç›®å½•ä¸‹ï¼Œç¼–å†™æˆ‘ä»¬çš„å…¥å£æ–‡ä»¶index.jsï¼Œæˆ‘ä»¬çš„å…¥å£æ–‡ä»¶éå¸¸ç®€å•ï¼Œå°±åœ¨é¡µé¢ä¸Šæ‰“å°ä¸€å¥è¯ï¼š 123/public/javascript/index.jsdocument.write(&#x27;webpack works&#x27;)document.write(require(&#x27;./module.js&#x27;)) è¿˜æœ‰æˆ‘ä»¬çš„æ¨¡å—æ–‡ä»¶ï¼š 12/public/javascript/module.jsmodule.exports=&#x27;It works from module.js.&#x27; è¿™æ ·ä¸€ä¸ªç®€å•çš„webpacké¡¹ç›®å°±å®Œæˆäº†ï¼Œé€šè¿‡åœ¨é¡¹ç›®æ ¹ç›®å½•ä½¿ç”¨webpackå‘½ä»¤ï¼Œåœ¨buildæ–‡ä»¶ä¸­ç”Ÿæˆindex.bundle.jsæ–‡ä»¶å°±æ˜¯æˆ‘ä»¬çš„æ„å»ºäº§ç‰©ï¼Œåœ¨é¡µé¢ä¸Šç›´æ¥å¼•ç”¨è¿™ä¸ªjså°±èƒ½çœ‹åˆ°æ•ˆæœäº† ç»™é¡µé¢ç‚¹â€œé¢œè‰²â€çœ‹çœ‹ åœ¨é¡µé¢ä¸Šæˆ‘ä»¬è‚¯å®šä¼šç”¨åˆ°å¾ˆå¤šçš„æ ·å¼æ–‡ä»¶ï¼Œé‚£ä¹ˆæ€ä¹ˆåœ¨é¡µé¢ä¸Šä½¿ç”¨å‘¢ï¼Ÿé¦–å…ˆéœ€è¦æœ‰å¯¹åº”çš„åŠ è½½å™¨ï¼Œè¿™é‡Œæˆ‘ä»¬å°±è¦ç”¨åˆ°æ ·å¼åŠ è½½å™¨ã€‚ é¦–å…ˆå®‰è£…æˆ‘ä»¬çš„åŠ è½½å™¨ï¼š 1npm install css-loader style-loader sass-loader --save-dev ç„¶åæ”¹å†™é…ç½®æ–‡ä»¶ä¸­çš„åŠ è½½å™¨æ¨¡å—ï¼š 123456module: &#123; loaders: [ &#123; test: /\\.css$/, loader: &#x27;style!css&#x27; &#125;, &#123;test: /\\.scss$/, loader: &quot;style!css!sass&quot;&#125; ]&#125; css-loaderä¼šéå†cssæ–‡ä»¶ï¼Œæ‰¾åˆ°æ‰€æœ‰çš„url(â€¦)å¹¶ä¸”å¤„ç†ã€‚style-loaderä¼šæŠŠæ‰€æœ‰çš„æ ·å¼æ’å…¥åˆ°ä½ é¡µé¢çš„ä¸€ä¸ªstyleæ ‡ç­¾ä¸­ã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥ç¼–å†™æˆ‘ä»¬çš„æ ·å¼æ–‡ä»¶äº†ï¼š 12/stylesheet/style.cssbody&#123;background:#f5f5f5&#125; åœ¨index.jsä¸­æˆ‘ä»¬æ·»åŠ å¯¹æ ·å¼æ–‡ä»¶çš„å¼•ç”¨ï¼š 1require(&#x27;../stylesheet/style.css&#x27;); åœ¨æ ¹ç›®å½•æˆ‘ä»¬å†æ¬¡æ‰§è¡Œwebpackå‘½ä»¤ï¼Œå†æ¬¡ç”Ÿæˆæ„å»ºçš„jsæ–‡ä»¶å°±èƒ½çœ‹åˆ°é¡µé¢ä¸Šæœ‰é¢œè‰²äº†ã€‚ æå–å…¬å…±çš„è„šæœ¬å¹¶å‹ç¼© æœ‰æ—¶å€™å¤šä¸ªå…¬å…±è„šæœ¬ä¸­æœ‰å…¬ç”¨çš„éƒ¨åˆ†ï¼Œå¦‚æœå¤šå†™å°±æ˜¾å¾—æœ‰ç‚¹å¤šä½™ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨webpackçš„æå–å…¬å…±éƒ¨åˆ†çš„æ’ä»¶æ¥å¸®åŠ©æˆ‘ä»¬æå–ã€‚ åœ¨pluginså±æ€§ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š 123456plugins: [ //å‹ç¼©ä»£ç  new webpack.optimize.UglifyJsPlugin(), //æå–å…¬å…±éƒ¨åˆ† new webpack.optimize.CommonsChunkPlugin(&#x27;common.js&#x27;)] å†æ¬¡æ‰§è¡Œwebpackå‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨buildæ–‡ä»¶å¤¹é‡Œçœ‹åˆ°å¤šå‡ºäº†ä¸€ä¸ªcommon.jsæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æå–å‡ºçš„å…¬å…±éƒ¨åˆ†ã€‚ ç‹¬ç«‹å‡ºæ ·å¼æ–‡ä»¶ é€šè¿‡styleæ ‡ç­¾å¼•å…¥æ ·å¼å¯èƒ½ä¼šè®©é¡µé¢çš„ä»£ç çœ‹èµ·æ¥éå¸¸çš„åºå¤§éå¸¸çš„å‡Œä¹±ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰çš„æ ·å¼å¯¼å‡ºåˆ°ä¸€ä¸ªç‹¬ç«‹çš„æ ·å¼æ–‡ä»¶ï¼Œç„¶åé€šè¿‡linkæ ‡ç­¾å¼•å…¥æ ·å¼æ–‡ä»¶ã€‚ è¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦ç”¨æ–°çš„æ’ä»¶ã€‚é€šè¿‡npm installå‘½ä»¤å®‰è£…extract-text-webpack-pluginæ’ä»¶ã€‚ 1npm install extract-text-webpack-plugin --save-dev å®‰è£…å®Œæ’ä»¶æˆ‘ä»¬å°±éœ€è¦åœ¨webpack.config.jsæ–‡ä»¶ä¸­è¿›è¡Œé…ç½®äº†ã€‚ 1234567891011121314var ExtractTextPlugin = require(&quot;extract-text-webpack-plugin&quot;);module.exports = &#123; // ...çœç•¥éƒ¨åˆ†ä»£ç  module: &#123; loaders: [ // ...çœç•¥éƒ¨åˆ†ä»£ç  &#123;test: /\\.css$/, loader: ExtractTextPlugin.extract(&quot;style-loader&quot;, &quot;css-loader&quot;)&#125; ] &#125;, plugins: [ new webpack.optimize.CommonsChunkPlugin(&#x27;common.js&#x27;), new ExtractTextPlugin(&quot;[name].css&quot;) ]&#125; æˆ‘ä»¬å†ä½¿ç”¨webpackå‘½ä»¤æ‰“åŒ…ä¸€ä¸‹ï¼Œçœ‹åˆ°buildæ–‡ä»¶å¤¹ä¸­çœ‹åˆ°å¤šäº†ä¸€ä¸ªindex.cssæ–‡ä»¶ï¼Œå°±æ˜¯æ’ä»¶æå–å‡ºæ¥çš„æ‰€æœ‰é¡µé¢æ ·å¼ï¼Œéƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚ ä½¿ç”¨é«˜é€¼æ ¼çš„ES6 ES6ç®€æ´çš„è¯­æ³•ç³–ã€æ€§èƒ½çš„æå‡éƒ½è®©å¼€å‘è€…å¯¹å…¶æ·±æ·±çš„â€œè¿·æ‹â€ï¼Œä¸‹é¢æ¥è®©æˆ‘ä»¬çš„é¡¹ç›®ä¹Ÿæ¥æ”¯æŒES6çš„è¯­æ³•ã€‚ è¦æƒ³æ”¯æŒES6é¦–å…ˆè¦å®‰è£…å¯¹åº”çš„è§£ç å™¨ï¼Œes6çš„è§£ç å™¨å°±æ˜¯babelï¼Œé¦–å…ˆå®‰è£…babel-loaderï¼š 1npm install babel-loader --save-dev ç„¶åæ”¹å†™é…ç½®æ–‡ä»¶ï¼š 1234loaders: [ // ...çœç•¥éƒ¨åˆ†ä»£ç  &#123; test: /\\.js[x]?$/, loader: &#x27;babel&#x27; &#125;] é…ç½®å®Œæˆåæˆ‘ä»¬å°±å¯ä»¥åœ¨jsä¸­å°½æƒ…åœ°ä½¿ç”¨es6çš„è¯­æ³•ç³–äº†ã€‚ å››ã€æ€»ç»“ åœ¨è¿™é‡Œæˆ‘ä»¬ç¼–å†™äº†webpackçš„é…ç½®æ–‡ä»¶ï¼Œå¯¹é…ç½®æ–‡ä»¶çš„å±æ€§è¿›è¡Œäº†è¯¦ç»†åœ°è¯´æ˜ï¼Œä¹Ÿæ·»åŠ äº†webpackçš„å‡ ä¸ªæ’ä»¶ã€‚ä½†æ˜¯è¿˜æ˜¯æ¬ ç¼ºä»¥ä¸‹å‡ ç‚¹ï¼š æ²¡æœ‰å›¾ç‰‡åŠ è½½å™¨ æ²¡æœ‰æ„å»ºæœ¬åœ°æœåŠ¡å™¨ï¼Œæ²¡æœ‰çƒ­åŠ è½½ æ²¡æœ‰å¼•å¯¼å‘½ä»¤æ‰§è¡Œ æœ¬æ–‡æ‰€æ¶‰åŠåˆ°çš„ä»£ç éƒ½åœ¨æˆ‘çš„githubä»“åº“ï¼Œéœ€è¦çš„è¯»è€…å¯ä»¥å»forkï¼Œå–œæ¬¢çš„ç»™ä¸ªèµå•Šäº²ã€‚å¸Œæœ›åœ¨åç»­çš„æ–‡ç« ä¸­å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œæ·»åŠ æ›´å¤šçš„æ’ä»¶æ¥ä¸°å¯ŒåŠŸèƒ½ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ‰“åŒ…å·¥å…·","slug":"PackTool","permalink":"https://xieyufei.com/tags/PackTool/"},{"name":"Webpack","slug":"Webpack","permalink":"https://xieyufei.com/tags/Webpack/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºä¸Šæ‰‹å¼€å‘å’Œä½¿ç”¨æ€»ç»“ï¼ˆä¸‹ï¼‰","date":"2016-10-11T08:53:26.000Z","path":"2016/10/11/Front-Tiny-WeChat-Next.html","text":"åœ¨å¾®ä¿¡å°ç¨‹åºä¸Šæ‰‹å¼€å‘å’Œä½¿ç”¨æ€»ç»“ï¼ˆä¸Šï¼‰ä¸­ä»‹ç»äº†å¾®ä¿¡å°ç¨‹åºçš„åŸºæœ¬ç”¨æ³•ã€æ•°æ®å¤„ç†å’Œé¡µé¢æ¸²æŸ“ç­‰ï¼Œè¿™ç¯‡æ–‡ç« æ•´ç†ä¸€ä¸‹å¾®ä¿¡å°ç¨‹åºçš„äº‹ä»¶ç»‘å®šåŠæ¨¡æ¿çš„ç”¨æ³•ã€‚ ä¸€ã€æ¨¡æ¿ WXMLæä¾›æ¨¡æ¿ç»„ä»¶ç»™æˆ‘ä»¬ä½¿ç”¨ï¼Œå¯ä»¥åœ¨æ¨¡æ¿å®šä¹‰å…¬ç”¨çš„ä»£ç ç‰‡æ®µï¼Œç„¶ååœ¨éœ€è¦å¼•ç”¨çš„åœ°æ–¹è¿›è¡Œè°ƒç”¨ã€‚ å®šä¹‰æ¨¡æ¿ å®šä¹‰æ¨¡æ¿ä½¿ç”¨nameå±æ€§ä½œä¸ºæ¨¡æ¿çš„åå­—ï¼Œç„¶ååœ¨templateæ ‡ç­¾ä¸­å®šä¹‰ä»£ç ç‰‡æ®µï¼š 123456789101112&lt;template name=&quot;mytemplate1&quot;&gt; &lt;view&gt; &lt;text&gt;firstName:&#123;&#123;firstName&#125;&#125;&lt;/text&gt; &lt;text&gt;lastName: &#123;&#123;lastName&#125;&#125;&lt;/text&gt; &lt;/view&gt;&lt;/template&gt;&lt;template name=&quot;mytemplate2&quot;&gt; &lt;view wx:for=&quot;&#123;&#123;persons&#125;&#125;&quot;&gt; &lt;text&gt;firstName:&#123;&#123;item.firstName&#125;&#125;&lt;/text&gt; &lt;text&gt;lastName: &#123;&#123;item.lastName&#125;&#125;&lt;/text&gt; &lt;/view&gt;&lt;/template&gt; ä½¿ç”¨æ¨¡æ¿ ä½¿ç”¨æ¨¡æ¿æˆ‘ä»¬ç”¨iså±æ€§å¼•ç”¨å®šä¹‰å¥½çš„æ¨¡æ¿ï¼Œç„¶åæŠŠæ¨¡æ¿æ‰€éœ€è¦çš„å€¼é€šè¿‡dataå±æ€§ä¼ ç»™æ¨¡æ¿ã€‚æ¯”å¦‚éœ€è¦éå†personsæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªpersonsä½œä¸ºå¯¹è±¡ä¼ ç»™æ¨¡æ¿ï¼Œä¹Ÿå¯ä»¥éå†personsåå°†æ¯ä¸ªå¯¹è±¡ä¼ ç»™æ¨¡æ¿ï¼Œå…·ä½“å–å†³äºæ‰€åº”ç”¨çš„åœºæ™¯ã€‚ 1234&lt;view wx:for=&quot;&#123;&#123;persons&#125;&#125;&quot;&gt; &lt;template is=&quot;mytemplate1&quot; data=&quot;&#123;&#123;...item&#125;&#125;&quot;&gt;&lt;/template&gt;&lt;/view&gt;&lt;template is=&quot;mytemplate2&quot; data=&quot;&#123;&#123;persons&#125;&#125;&quot;&gt;&lt;/template&gt; éœ€è¦çš„æ•°æ®ç»“æ„å¦‚ä¸‹ 123456789Page(&#123; data:&#123; persons:[ &#123;firstName: &#x27;Hulk&#x27;, lastName: &#x27;Hu&#x27;&#125;, &#123;firstName: &#x27;Shang&#x27;, lastName: &#x27;You&#x27;&#125;, &#123;firstName: &#x27;Gideon&#x27;, lastName: &#x27;Lin&#x27;&#125; ] &#125;&#125;) æ³¨æ„ï¼š iså±æ€§ä¹Ÿå¯ä»¥ä½¿ç”¨Mustacheè¯­æ³•è¿›è¡ŒåŠ¨æ€æ¸²æŸ“ï¼Œå†³å®šä½¿ç”¨å“ªä¸ªæ¨¡æ¿ dataå¦‚æœä¼ çš„æ˜¯å¯¹è±¡ç±»å‹çš„æ•°æ®ï¼Œéœ€è¦ç”¨â€œâ€¦â€è¿›è¡Œâ€œè§£æ„â€ï¼Œåœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥è°ƒç”¨å¯¹è±¡çš„å±æ€§ï¼›å¦‚æœæ˜¯å…¶ä»–æ•°æ®ç±»å‹åˆ™ä¸éœ€è¦ç”¨â€œâ€¦â€ äºŒã€äº‹ä»¶ ä»€ä¹ˆæ˜¯äº‹ä»¶å‘¢ï¼Œç®€å•æ¥è¯´ï¼Œäº‹ä»¶å°±æ˜¯é€»è¾‘å±‚åˆ°é€»è¾‘å±‚çš„é€šè®¯æ–¹å¼ã€‚å°±æ˜¯åœ¨é¡µé¢ä¸Šé€šè¿‡è§¦å‘æŸä¸ªæ“ä½œï¼ˆå°±æ˜¯æˆ‘ä»¬è¯´çš„äº‹ä»¶ï¼‰ï¼Œåœ¨é€»è¾‘å±‚è¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œæœ€ç»ˆæ¥æ”¹å˜æ•°æ®ã€‚ æ¯”å¦‚åœ¨ä¸€ä¸ªè¾“å…¥æ¡†ä¸­ç”¨æˆ·è¾“å…¥äº†ä¸€æ®µæ–‡å­—ï¼Œä½†æ˜¯dataä¸­çš„æ•°æ®å¹¶æ²¡æœ‰éšä¹‹æ”¹å˜ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åœ¨è¾“å…¥æ¡†ä¸Šç»‘å®šå¯¹åº”çš„è¾“å…¥äº‹ä»¶æ¥æ›´æ”¹æ•°æ®ã€‚ äº‹ä»¶åˆ†ç±» äº‹ä»¶ä¹Ÿæœ‰åˆ†ç±»ï¼Œå¯ä»¥åˆ†ä¸ºå†’æ³¡äº‹ä»¶å’Œéå†’æ³¡äº‹ä»¶ã€‚â€œå†’æ³¡â€è¿™ä¸ªè¯å¾ˆå½¢è±¡çš„è¡¨ç°äº†äº‹ä»¶å‘ä¸Šä¼ é€’çš„è¿‡ç¨‹ï¼Œè¿™ä¸¤ç§äº‹ä»¶çš„åŒºåˆ«ä¹Ÿåœ¨äºæ˜¯å¦ä¼šå‘çˆ¶èŠ‚ç‚¹è¿›è¡Œä¼ é€’ã€‚ ä¸€äº›å¸¸ç”¨çš„å†’æ³¡äº‹ä»¶ï¼Œé™¤ä»¥ä¸‹çš„äº‹ä»¶å¤–éƒ½æ˜¯éå†’æ³¡äº‹ä»¶ï¼š åç§° è§¦å‘ touchstart æ‰‹æŒ‡å¼€å§‹è§¦æ‘¸ touchmove æ‰‹æŒ‡è§¦æ‘¸åç§»åŠ¨ touchend æ‰‹æŒ‡è§¦æ‘¸åŠ¨ä½œç»“æŸ touchcancel è§¦æ‘¸è¢«æ‰“æ–­ï¼Œæ¯”å¦‚æ¥ç‚¹ï¼Œå¼¹æ¡†ç­‰ tap è§¦æ‘¸åç¦»å¼€ï¼Œæœ‰ç‚¹åƒç‚¹å‡»click longtap é•¿æŒ‰ï¼Œè¶…è¿‡350msæ‰ç¦»å¼€ äº‹ä»¶å¯¹è±¡ å½“äº‹ä»¶å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä»é€»è¾‘å±‚æœ‰ä¸€ä¸ªé»˜è®¤çš„äº‹ä»¶å¯¹è±¡ä¼ åˆ°å‡½æ•°ä¸­ï¼Œä¸åŒçš„äº‹ä»¶æ‰€åŒ…å«çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§æœ‰æ‰€åŒºåˆ«ï¼Œä¸€äº›å¸¸ç”¨çš„äº‹ä»¶å¯¹è±¡çš„å±æ€§å¦‚ä¸‹ï¼š å±æ€§ ç±»å‹ è¯´æ˜ type String äº‹ä»¶ç±»å‹ timeStamp Int ä»é¡µé¢åŠ è½½åˆ°äº‹ä»¶è§¦å‘çš„æ—¶é—´æˆ³ target Object è§¦å‘äº‹ä»¶çš„ç»„ä»¶çš„ä¸€äº›å±æ€§å€¼é›†åˆ currentTarget Object å½“å‰ç»„ä»¶çš„å±æ€§å€¼é›†åˆ touches Array è§¦æ‘¸ç‚¹ä¿¡æ¯çš„æ•°ç»„ detail Object é¢å¤–çš„ä¿¡æ¯ targetå’ŒcurrentTargetåŒºåˆ« å½“ä¸å­˜åœ¨åµŒå¥—æ—¶ï¼Œtargetå’ŒcurrentTargetæ²¡æœ‰åŒºåˆ«ã€‚ä½†æ˜¯å½“åµŒå¥—è§¦å‘äº‹ä»¶æ˜¯ï¼Œcurrentå’ŒcurrentTargetçš„åŒºåˆ«å°±ä½“ç°å‡ºæ¥äº†ã€‚ 123456&lt;view class=&quot;A&quot; bindtap=&quot;handle1&quot;&gt; outer &lt;view class=&quot;B&quot; bindtap=&quot;handle2&quot;&gt; inner &lt;/view&gt; &lt;/view&gt; ç‚¹å‡»ç»„ä»¶Bï¼Œå½“è§¦å‘handle2äº‹ä»¶æ—¶ï¼Œæ”¶åˆ°targetå’ŒcurrentTargetå¯¹è±¡æ˜¯ä¸€æ ·ï¼Œéƒ½æŒ‡å‘ç»„ä»¶Bï¼›è€Œå½“ç‚¹å‡»ç»„ä»¶Bè§¦å‘handle1äº‹ä»¶æ—¶ï¼Œtargetå¯¹è±¡æŒ‡å‘äº†ç»„ä»¶Bï¼ŒcurrentTargetå¯¹è±¡åˆ™ç»„ä»¶Aã€‚æ€»ç»“ä¸€ä¸‹ï¼š targetå¯¹è±¡æŒ‡å‘äº†æ‰€è§¦å‘äº‹ä»¶çš„å¯¹è±¡ currentTargetå¯¹è±¡æŒ‡å‘äº†ç»‘å®šäº‹ä»¶æ‰€åœ¨çš„å¯¹è±¡ å‘detailä¸­æ·»åŠ å†…å®¹ åœ¨ç»„ä»¶ä¸­å®šä¹‰æ•°æ®ï¼Œå½“è§¦å‘äº‹ä»¶æ—¶ï¼Œè¿™äº›æ•°æ®é€šè¿‡äº‹ä»¶å¯¹è±¡ä¼ ç»™é€»è¾‘å±‚ã€‚ä¹¦å†™è§„åˆ™ï¼šä»¥â€œdata-â€å¼€å¤´ï¼Œå¤šä¸ªå­—ç¬¦ç”¨â€œ-â€è¿æ¥ï¼Œä¸èƒ½å«æœ‰å¤§å†™ï¼Œå¯ä»¥ç»‘å®šå¤šä¸ªdataå€¼ã€‚ä¾‹å¦‚data-element-nameï¼Œæœ€ç»ˆä¼šåœ¨event.currentTarget.datasetä¸­è½¬ä¸ºelementNameå±æ€§ï¼Œå±æ€§çš„å€¼å°±æ˜¯å®šä¹‰çš„æ•°æ®ã€‚ ä¸‰ã€å¼‚æ­¥æ•°æ® å°ç¨‹åºè¿˜æä¾›å‘é€å¼‚æ­¥çš„æ–¹æ³•request(object)ï¼Œå‘èµ·çš„æ˜¯httpsè¯·æ±‚ã€‚ä¸€ä¸ªå°ç¨‹åºï¼ŒåŒæ—¶åªæœ‰æœ‰5ä¸ªç½‘ç»œè¯·æ±‚é“¾æ¥ã€‚objectçš„å‚æ•°å¦‚ä¸‹ï¼š å‚æ•°å‘½ ç±»å‹ è¯´æ˜ url Sring æœåŠ¡å™¨æ¥å£åœ°å€ data Object è¯·æ±‚çš„å‚æ•° header Object è®¾ç½®è¯·æ±‚å¤´headerï¼Œheaderä¸èƒ½è®¾ç½®Referer method String è¯·æ±‚æ–¹å¼ï¼Œé»˜è®¤GET success Function è¯·æ±‚æˆåŠŸçš„å›è°ƒæ–¹æ³• fail Function è¯·æ±‚å¤±è´¥çš„å›è°ƒæ–¹æ³• complete Function è¯·æ±‚å®Œæˆçš„å›è°ƒæ–¹æ³•(è¯·æ±‚æˆåŠŸã€å¤±è´¥éƒ½ä¼šè°ƒç”¨) è·ŸjQueryä¸åŒçš„æ˜¯ï¼Œå°ç¨‹åºè¯·æ±‚çš„æ•°æ®ä¸æ˜¯ç›´æ¥åœ¨successæ–¹æ³•çš„resä¸­(resæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿˜åŒ…æ‹¬è¯·æ±‚æˆåŠŸçš„çŠ¶æ€ç ç­‰)ï¼Œè€Œæ˜¯åœ¨res.dataä¸­ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š 12345678910111213wx.request(&#123; url: &#x27;/url&#x27;, data: &#123; x: &#x27;&#x27;, y: &#x27;&#x27; &#125;, header: &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125;, success: function(res) &#123; console.log(res.data) //æ¥æ”¶åˆ°çš„æ•°æ® &#125;&#125;)","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"WeChat","slug":"WeChat","permalink":"https://xieyufei.com/tags/WeChat/"}]},{"title":"å¾®ä¿¡å°ç¨‹åºä¸Šæ‰‹å¼€å‘å’Œä½¿ç”¨æ€»ç»“ï¼ˆä¸Šï¼‰","date":"2016-10-09T01:58:02.000Z","path":"2016/10/09/Front-Tiny-WeChat.html","text":"æœ€è¿‘å¾®ä¿¡å°ç¨‹åºä¸€ä¸‹å­ç«äº†èµ·æ¥ï¼Œæˆ‘ä¹Ÿå­¦ä¹ äº†ä¸€ä¸‹ï¼Œå†™äº†å‡ ä¸ªç®€å•çš„demoï¼Œåˆ†äº«ä¸€ä¸‹è‡ªå·±çš„ä½¿ç”¨å¿ƒå¾—ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ã€‚ æˆ‘ä»¬æä¾›äº†ä¸€ç§æ–°çš„å¼€æ”¾èƒ½åŠ›ï¼Œå¼€å‘è€…å¯ä»¥å¿«é€Ÿçš„å¼€å‘ä¸€ä¸ªå°ç¨‹åºã€‚å°ç¨‹åºå¯ä»¥åœ¨å¾®ä¿¡å†…è¢«ä¾¿æ·åœ°è·å–å’Œä¼ æ’­ï¼ŒåŒæ—¶å…·æœ‰å‡ºè‰²çš„ä½¿ç”¨ä½“éªŒã€‚ æ­å»ºç¯å¢ƒ è¦å¼€å§‹åšé¡¹ç›®ï¼Œé¦–å…ˆè¦å®‰è£…å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘å·¥å…·ã€‚å®˜ç½‘çš„ç‰ˆæœ¬æ¯”è¾ƒæ—§ï¼Œç¬”è€…åˆ†äº«ä¸€ä¸ªä¸‹è½½é“¾æ¥ï¼Œå¤§å®¶å¯ä»¥å»ä¸‹è½½ï¼Œå¾®ä¿¡å°ç¨‹åºå¼€å‘å·¥å…·ä¸‹è½½ï¼Œä¸‹è½½å®Œç›´æ¥å®‰è£…åæ–°å»ºé¡¹ç›®å°±å¯ä»¥ä½¿ç”¨äº†ã€‚å½“ç„¶ï¼Œç”±äºè¿˜å¤„åœ¨å†…æµ‹é˜¶æ®µï¼Œè…¾è®¯åªé‚€è¯·äº†éƒ¨åˆ†ä¼ä¸šå‚ä¸å†…ä¾§ï¼Œæ‰€ä»¥AppIDæ•°é‡å¾ˆç¨€å°‘ï¼Œè¯»è€…åœ¨æ·»åŠ é¡¹ç›®çš„æ—¶å€™å¯ä»¥é€‰æ‹©æ— AppIDã€‚æ·»åŠ é¡¹ç›®åæ‰“å¼€å°ç¨‹åºçš„å¼€å‘å·¥å…·æ˜¯è¿™æ ·çš„ï¼šè°ƒè¯•æŒ‰é’®å¯ä»¥æ‰“å¼€è°ƒè¯•ç•Œé¢ï¼Œå¦‚æœè¯»è€…ç”¨æƒ¯äº†Chromeæµè§ˆå™¨ï¼Œæƒ³å¿…å¯¹è¿™ä¸ªç•Œé¢è‚¯å®šä¸ä¼šé™Œç”Ÿï¼›å¦‚æœéœ€è¦åˆ‡æ¢åˆ°å…¶ä»–çš„é¡¹ç›®ï¼Œå¯ä»¥ç›´æ¥ç‚¹å…³é—­æŒ‰é’®ï¼Œè€Œä¸ç”¨å…³é—­æ•´ä¸ªå·¥å…·ã€‚ é¡¹ç›®ç»“æ„ æ•´ä¸ªé¡¹ç›®ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œä¸€ä¸ªæ˜¯æè¿°æ•´ä½“ç¨‹åºçš„appæ–‡ä»¶å’Œå¤šä¸ªæ¡†æ¶é¡µé¢æ–‡ä»¶ç»„æˆã€‚ appæ–‡ä»¶ æè¿°æ•´ä½“ç¨‹åºçš„appæ–‡ä»¶å¿…é¡»æ”¾åœ¨æ–‡ä»¶çš„è·Ÿç›®å½•ï¼Œç”±ä¸‰ä¸ªæ–‡ä»¶ç»„æˆï¼Œapp.jsã€app.jsonå’Œapp.wxssã€‚ app.js:ç¨‹åºçš„æ•´ä½“é€»è¾‘ app.json:ç¨‹åºçš„å…¬å…±è®¾ç½® app.wxss:å°ç¨‹åºçš„å…¬å…±æ ·å¼(éå¿…é¡») åœ¨app.jsonæ–‡ä»¶ä¸­å¯ä»¥å¯¹å°ç¨‹åºè¿›è¡Œå…¨å±€é…ç½®ï¼Œæ¯”å¦‚é¡µé¢è·¯ç”±ã€çª—å£è¡¨ç°ã€ç½‘ç»œè¶…æ—¶ã€å¤šä¸ªtabç­‰ï¼›åœ¨app.jsä¸­æˆ‘ä»¬ä½¿ç”¨App()æ³¨å†Œå°ç¨‹åºçš„ï¼Œå®ƒæ¥å—ä¸€ä¸ªobjectå¯¹è±¡ä½œä¸ºå®ƒçš„å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°æŒ‡å®šäº†å°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚objectå‡½æ•°è¯´æ˜ï¼š å±æ€§ æè¿° è§¦å‘ onLaunch å°ç¨‹åºåˆå§‹åŒ– åˆå§‹åŒ–å®Œæˆå onShow å°ç¨‹åºæ˜¾ç¤º å°ç¨‹åºç”±åå°è¿›å…¥å‰å° onHide å°ç¨‹åºéšè— å°ç¨‹åºç”±å‰å°è¿›å…¥åå° æ³¨æ„ï¼š App()å‡½æ•°åªèƒ½å®šä¹‰ä¸€æ¬¡ï¼Œå¹¶ä¸”åªèƒ½åœ¨app.jsä¸­å®šä¹‰ã€‚ onLaunch()å‡½æ•°åœ¨æ•´ä¸ªå°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸåªè°ƒç”¨ä¸€æ¬¡ï¼Œå…¶ä»–ä¸¤ä¸ªå‡½æ•°è°ƒç”¨å¤šæ¬¡ã€‚ æ¡†æ¶é¡µé¢æ–‡ä»¶ é¡¹ç›®æ¡†æ¶é¡µé¢å¯ä»¥é…ç½®å¤šä¸ªï¼Œå»ºè®®é¡µé¢çš„æ–‡ä»¶åç§°å’Œæ–‡ä»¶åä¿æŒä¸€è‡´ã€‚æ¯”å¦‚æœ‰ä¸€ä¸ªä¸‹å•é¡µbookï¼Œå…¶ä¸­çš„æ–‡ä»¶å¯ä»¥è®¾ç½®ä¸ºbook.jsã€book.wxmlã€book.wxssã€book.jsonã€‚ xxx.js:é¡µé¢é€»è¾‘ xxx.wxml:é¡µé¢ç»“æ„ xxx.wxss:é¡µé¢æ ·å¼(éå¿…é¡») xxx.json:é¡µé¢é…ç½®(éå¿…é¡») æˆ‘ä»¬åœ¨æ¡†æ¶é¡µé¢ä¹Ÿéœ€è¦æ³¨å†Œé¡µé¢ï¼Œæ³¨å†Œé¡µé¢é€šè¿‡Page()å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¹Ÿæ¥å—ä¸€ä¸ªobjectå‡½æ•°ï¼Œç”¨æ¥æŒ‡å®šå‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å’Œåˆå§‹åŒ–çš„æ•°æ®ã€‚ å±æ€§ ç±»å‹ æè¿° data object é¡µé¢åˆå§‹åŒ–æ•°æ® onLoad Function é¡µé¢åŠ è½½æ—¶ onReady Function é¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆ onShow Function é¡µé¢æ˜¾ç¤ºæ—¶ onHide Function é¡µé¢éšè—æ—¶ onUnload Function é¡µé¢å¸è½½æ—¶ onPullDownRefreash Function é¡µé¢ä¸‹æ‹‰æ—¶ æ³¨æ„ï¼š onLoad()å‡½æ•°åœ¨é¡µé¢åŠ è½½æ—¶åªè°ƒç”¨ä¸€æ¬¡ã€‚å¯ä»¥è·å–ä¸Šä¸ªé¡µé¢ä¼ æ¥çš„å‚æ•°ï¼Œé»˜è®¤ä¿å­˜åœ¨dataå‚æ•°ä¸­ï¼Œå¯ä»¥é€šè¿‡data.paramçš„æ–¹å¼è·å–ã€‚ onUnload()é¡µé¢å¸è½½æ—¶è°ƒç”¨ï¼Œæ¯”å¦‚è°ƒç”¨redirectToæˆ–è€…navigateBackæ—¶ã€‚ æ•°æ®å¤„ç† å’ŒjQueryç­‰å…¶ä»–jsæ¡†æ¶ä¸åŒçš„ï¼Œå°ç¨‹åºä¸èƒ½ç›´æ¥æ“ä½œDOMå…ƒç´ ï¼Œåªèƒ½é€šè¿‡æ”¹å˜æ•°æ®æ¥æ§åˆ¶é¡µé¢å…ƒç´ çš„çŠ¶æ€ï¼Œè¿™æ ·æœ‰ç‚¹ç±»ä¼¼Reactçš„æ€æƒ³ã€‚æ‰€ä»¥æˆ‘è§‰å¾—å°ç¨‹åºçš„æ€æƒ³æ˜¯é¢å‘æ•°æ®ï¼Œè€Œä¸æ˜¯é¢å‘å…ƒç´ ã€‚ æ•°æ®ç»‘å®š ä¸Šä¸€èŠ‚æˆ‘ä»¬è¯´è¿‡æ³¨å†Œé¡µé¢æ—¶éœ€è¦ä¼ å…¥ä¸€ä¸ªobjectå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å¯ä»¥æŒ‚è½½å¾ˆå¤šé¡µé¢çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ŒåŒæ—¶ï¼Œä¹Ÿèƒ½å°†é¡µé¢çš„æ•°æ®æŒ‚è½½è¿›å»ã€‚é¡µé¢çš„æ•°æ®å¯ä»¥ç›´æ¥æŒ‚è½½åˆ°objectå‚æ•°çš„dataå¯¹è±¡ä¸­å»ã€‚ 12345678Page(&#123; data:&#123; name:&#x27;xyf&#x27; &#125;, myname:&#x27;test&#x27; onLoad:function()&#123; &#125;&#125;) è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ•°æ®ï¼Œä¸€ä¸ªæ•°æ®å®šä¹‰åœ¨dataå¯¹è±¡ä¸­ï¼Œå¦ä¸€ä¸ªæ•°æ®ç›´æ¥å®šä¹‰Pageçš„å‚æ•°ä¸­ã€‚æˆ‘ä»¬å¯ä»¥å°†dataä¸­çš„æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼Œä½¿ç”¨Mustacheè¯­æ³•(åŒå¤§æ‹¬å·)å°†è¦æ¸²æŸ“çš„å˜é‡åŒ…èµ·æ¥ï¼Œå¦‚ä¸‹ï¼š 1&lt;view&gt;&#123;&#123;name&#125;&#125;&lt;/view&gt; å¦‚æœéœ€è¦åœ¨ç»„ä»¶çš„å±æ€§å†…æ¸²æŸ“æ•°æ®ï¼Œä¹Ÿéœ€è¦ç”¨åŒå¤§æ‹¬å·åŒ…èµ·æ¥ï¼š 1&lt;view class=&quot;item-&#123;&#123;name&#125;&#125;&quot;&gt;&lt;/view&gt; åœ¨åŒå¤§æ‹¬å·ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œç®€å•çš„è¿ç®—å’Œåˆ¤æ–­ï¼Œæ¯”å¦‚ä¸‰å…ƒè¿ç®—ï¼Œç®—æ•°è¿ç®—ï¼Œå­—ç¬¦ä¸²è¿ç®—ç­‰ã€‚ 1&lt;view class=&quot;&#123;&#123;name==&#x27;xyf&#x27;?&#x27;yes&#x27;:&#x27;no&#x27;&#125;&#125;&quot;&gt;&#123;&#123;name+&#x27; is a smart boy&#x27;&#125;&#125;&lt;/view&gt; æ•°æ®è·å–å’Œæ›´æ”¹ å¯¹äºdataä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡this.data.nameè¿™ç§æ–¹å¼æ¥è·å–ï¼Œå¯¹äºdataå¤–é¢çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡this.mynameçš„æ–¹å¼æ¥è·å–ã€‚ 1234onLoad:function()&#123; console.log(this.data.name); //&#x27;xyf&#x27; console.log(this.myname); //&#x27;test&#x27;&#125; å¯¹äºdataä¸­çš„æ•°æ®ï¼Œè¦æƒ³æ”¹å˜å®ƒçš„å€¼ï¼Œå¿…é¡»è¦è°ƒç”¨setData()æ–¹æ³•æ¥æ”¹å˜ï¼Œè€Œè¦æ”¹å˜dataå¤–çš„æ•°æ®ï¼Œå¯ä»¥ç›´æ¥ç»™ä»–è¿›è¡Œèµ‹å€¼ã€‚ 12345678910onLoad:function()&#123; this.setData(&#123; name:&#x27;Corner&#x27; &#125;); console.log(this.data.name); //&#x27;Corner&#x27; this.data.name=&#x27;Nick&#x27;; console.log(this.data.name); //&#x27;Corner&#x27; this.myname=&#x27;mytest&#x27;; console.log(this.myname); //&#x27;myest&#x27;&#125; æ³¨æ„ï¼š åœ¨å‡½æ•°ä¸­æ³¨æ„thisçš„ä½œç”¨åŸŸã€‚åœ¨mapå‡½æ•°æˆ–è€…å¼‚æ­¥å›è°ƒå‡½æ•°ä¸­è¦ä½¿ç”¨thisï¼Œè¦åœ¨å‡½æ•°å¤–å…ˆæŠŠthisèµ‹å€¼ç»™thatï¼Œç„¶åç”¨thatè¿›è¡Œæ“ä½œã€‚ setData()å¯¹è±¡å‚æ•°çš„å€¼ä¸èƒ½ä¸ºundefinedã€‚æ¯æ¬¡setDataè¿›è¡Œèµ‹å€¼æ—¶éƒ½è¦å¯¹è¦èµ‹çš„å€¼è¿›è¡Œéç©ºåˆ¤æ–­ï¼Œç¡®ä¿ä¸æ˜¯undefinedï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ æ€»ç»“ä¸€ä¸‹ï¼Œä¸¤ç§æ–¹å¼å®šä¹‰çš„æ•°æ®åŒºåˆ«å¦‚ä¸‹ï¼š èƒ½å¦è¢«æ¸²æŸ“ï¼šé¡µé¢åªèƒ½åŠ¨æ€æ¸²æŸ“dataä¸­çš„æ•°æ®ï¼Œdataå¤–çš„æ•°æ®ä¸èƒ½è¢«æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œæ‰€ä»¥dataä¸­æ”¾ä¸€äº›éœ€è¦é¡µé¢åŠ¨æ€æ¸²æŸ“çš„æ•°æ® è·å–æ–¹å¼ï¼šdataä¸­çš„æ•°æ®é€šè¿‡this.data.[param]æ–¹å¼è·å–ï¼Œdataå¤–çš„æ•°æ®é€šè¿‡this.[param]æ–¹å¼è·å–ã€‚ èµ‹å€¼æ–¹å¼ï¼šdataä¸­çš„æ•°æ®åªèƒ½é€šè¿‡setData()å‡½æ•°è¿›è¡Œèµ‹å€¼ï¼Œè€Œdataå¤–çš„æ•°æ®å¯ä»¥ç›´æ¥èµ‹å€¼ã€‚ é¡µé¢æ¸²æŸ“ å¯¹äºdataä¸­çš„ç®€å•å˜é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŒå¤§æ‹¬å·çš„æ–¹å¼è¿›è¡Œæ¸²æŸ“ï¼Œä½†æ˜¯å¦‚æœå¯¹äºä¸€äº›ç¨å¾®å¤æ‚ä¸€ç‚¹çš„æ•°æ®ç»“æ„(æ¯”å¦‚æ•°ç»„)ï¼ŒåŒå¤§æ‹¬å·å°±ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ã€‚æˆ‘ä»¬éœ€è¦å¼•å…¥å¦å¤–ä¸¤ç§æ¸²æŸ“æ–¹å¼ï¼Œæ¡ä»¶æ¸²æŸ“å’Œåˆ—è¡¨æ¸²æŸ“ã€‚ æ¡ä»¶æ¸²æŸ“ æˆ‘ä»¬ä½¿ç”¨wx:if=â€â€œçš„æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ¸²æŸ“è¯¥æ¨¡å—ï¼Œè¿˜å¯ä»¥æ·»åŠ wx:elifå’Œwx:elseæ¸²æŸ“ã€‚ 123&lt;view wx:if=&quot;&#123;&#123;length &gt; 5&#125;&#125;&quot;&gt; å¤§äº &lt;/view&gt;&lt;view wx:elif=&quot;&#123;&#123;length &gt; 2&#125;&#125;&quot;&gt; ä¸­ç­‰ &lt;/view&gt;&lt;view wx:else&gt; å°äº &lt;/view&gt; ä¹Ÿå¯ä»¥ç›´æ¥åœ¨å¤§æ‹¬å·ä¸­ä½¿ç”¨å¸ƒå°”ç±»å‹çš„å€¼æ§åˆ¶é¡µé¢å…ƒç´ éšè—å’Œæ˜¾ç¤ºã€‚å¦‚æœdataä¸­flagä¸ºfalseï¼Œé‚£ä¹ˆç±»åä¸ºdemoçš„è¿™ä¸ªviewç»„ä»¶å°±ä¸ä¼šæ¸²æŸ“åˆ°é¡µé¢ä¸Šå»ã€‚ 123&lt;view class=&quot;demo&quot; wx:if=&quot;&#123;&#123;flag&#125;&#125;&quot;&gt;æ˜¾ç¤º&lt;/view&gt; åˆ—è¡¨æ¸²æŸ“ æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªæ•°ç»„æ¸²æŸ“åˆ°é¡µé¢ä¸Šï¼Œæ¯”å¦‚å‡ ä¸ªç”¨æˆ·ä¿¡æ¯ï¼Œæ¯”å¦‚ç‚¹è¯„åˆ—è¡¨ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°åˆ—è¡¨å¾ªç¯ã€‚ åˆ—è¡¨å¾ªç¯ä½¿ç”¨wx:foræ¥ç»‘å®šä¸€ä¸ªæ•°ç»„ï¼Œå°±å¯ä»¥å°†æ•°ç»„ä¸­çš„æ¯ä¸ªæ•°æ®å¾ªç¯éå†åˆ°ç»„ä»¶ä¸­ã€‚é»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªå…ƒç´ çš„å˜é‡åä¸ºitemï¼Œæ¯ä¸ªå˜é‡çš„ç´¢å¼•å€¼ä¸ºindexã€‚ 123&lt;view wx:for=&quot;&#123;&#123;[&#x27;a&#x27;,&#x27;b&#x27;,&#x27;c&#x27;,&#x27;d&#x27;]&#125;&#125;&quot;&gt; è¿™æ˜¯ç¬¬&#123;&#123;index&#125;&#125;ä¸ªå…ƒç´ ï¼Œå…ƒç´ å†…å®¹ä¸º&#123;&#123;item&#125;&#125;&lt;/view&gt; åœ¨åˆ—è¡¨éå†æ—¶æˆ‘ä»¬å¹¶æ²¡æœ‰å®šä¹‰itemå’Œindexï¼Œå°ç¨‹åºè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ·»åŠ äº†wx:for-index=â€indexâ€å’Œwx:for-item=â€itemâ€ã€‚å› æ­¤åœ¨åµŒå¥—åˆ—è¡¨æ¸²æŸ“æ—¶ï¼Œæ³¨æ„indexå’Œitemæ‰€ä»£è¡¨çš„å€¼å’Œå¯¹è±¡ã€‚éœ€è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰å˜é‡åå’Œç´¢å¼•ï¼Œé¿å…æ··ä¹±ã€‚ æ€»ç»“å’ŒæœŸå¾… å¾®ä¿¡å°ç¨‹åºè¿˜åœ¨å†…æµ‹é˜¶æ®µå°±å¼•èµ·äº†è¿™ä¹ˆå¤šå…³æ³¨ï¼Œä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼Œå°¤å…¶æ˜¯ä¸€åå‰ç«¯ç¨‹åºå‘˜ï¼Œä¸Šæ‰‹å’Œç†Ÿæ‚‰å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘æ— ç–‘ä¼šè®©æˆ‘ä»¬è¶Šæ¥è¶Šâ€œåƒé¦™â€ã€‚ç½‘ä¸Šä¹Ÿåœ¨çƒ­è®®å¾®ä¿¡å°ç¨‹åºæ˜¯å¦ä¼šé¢ è¦†æˆ–è€…ä»£æ›¿åŸç”ŸAppï¼Œæˆ‘è§‰å¾—ä¸¤è€…è¿˜æ˜¯æœ‰ä»¥ä¸‹åŒºåˆ«çš„ï¼š äº§å“å½¢æ€ï¼šå¾®ä¿¡å°ç¨‹åºæ›´åŠ æ¥è¿‘äºHTML5äº§å“ï¼Œå¼€å‘ä¸Šä¹Ÿä½¿ç”¨JavaScriptè¿›è¡Œå¼€å‘ï¼Œæ€§èƒ½æ¯”H5å¥½ï¼Œä½†æ˜¯è¦æ¯”åŸç”ŸAppæ€§èƒ½ä½ã€‚è€Œä¸”å¾®ä¿¡å°ç¨‹åºæ•´ä½“æ–‡ä»¶å¤§å°é™åˆ¶åœ¨1MBä»¥å†…ï¼Œä¼°è®¡åªèƒ½è¿è¡Œä¸€äº›å°å‹çš„åº”ç”¨å’Œæ¸¸æˆï¼Œä¸€äº›å¤§å‹çš„åº”ç”¨è‚¯å®šè¿˜æ˜¯è¦ç”¨Appçš„ã€‚ ç”¨æˆ·ä¹ æƒ¯ï¼šå¾ˆå¤šç”¨æˆ·å·²ç»ç”¨æƒ¯äº†Appï¼Œè¦æƒ³æ”¹å˜ç”¨æˆ·çš„ä¹ æƒ¯è¿˜æ˜¯æŒºéš¾çš„ã€‚ç”¨æˆ·æ“ä½œè‚¯å®šæ˜¯è¶Šç®€å•è¶Šå¥½ã€‚æ¯”å¦‚ç°åœ¨å¾®åšAppæ‰“å¼€å°±èƒ½ç”¨ï¼Œä½†æ˜¯å¦‚æœæœ‰äº†å¾®åšå°ç¨‹åºï¼Œéœ€è¦è¿›å…¥å¾®ä¿¡æ‰èƒ½æ‰“å¼€ï¼Œç›¸ä¿¡ç”¨æˆ·è¿˜æ˜¯æŒºåæ„Ÿä¸­é—´å¤šä½™çš„â€œæ­¥éª¤â€ã€‚ ä¸ªäººæ„Ÿè§‰å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘ä¹Ÿå­˜åœ¨ç€ä¸è¶³ä¹‹å¤„ï¼Œå¸Œæœ›åœ¨ä»¥åçš„ç‰ˆæœ¬ä¸­èƒ½å¤Ÿæ”¹è¿›ï¼š å¼€å‘å·¥å…·ä¸èƒ½å®æ—¶è¿è¡Œç»“æœï¼šæ¯æ¬¡éƒ½éœ€è¦ç¼–è¯‘æ‰èƒ½çœ‹åˆ°ç»“æœï¼Œç¨‹åºçŒ¿è¡¨ç¤ºæ¯æ¬¡çœ‹æ•ˆæœéƒ½æ¯”è¾ƒéº»çƒ¦ã€‚ ä¸æ”¯æŒES6ï¼šç°åœ¨ES6è¶Šæ¥è¶Šæµè¡Œï¼Œç¡®å®ç»™å¼€å‘å¸¦æ¥äº†ä¸å°‘çš„ç®€æ´å’Œä¾¿åˆ©ã€‚æ¯æ¬¡å¼€å‘è¿˜è¦ä½¿ç”¨åŸç”Ÿjsï¼Œç¨‹åºçŒ¿è¡¨ç¤ºé¸­æ¢¨å±±å¤§å•Šã€‚ ç»„ä»¶å¤ªå°‘ï¼Œä¸æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ï¼šèƒ½å¤Ÿä½¿ç”¨çš„ç»„ä»¶åå°‘ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹åªèƒ½ä½¿ç”¨viewå’Œtextï¼Œä¸èƒ½å¤Ÿæ»¡è¶³å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"WeChat","slug":"WeChat","permalink":"https://xieyufei.com/tags/WeChat/"}]},{"title":"é‡œå±±è¡Œï¼šä¸€æ®µæ—…é€”æŠ˜å°„å‡ºä¸–é—´ç™¾æ€","date":"2016-09-23T15:41:01.000Z","path":"2016/09/23/Film-TrainToBusan.html","text":"æœ€è¿‘ç”µå½±ã€Šé‡œå±±è¡Œã€‹åœ¨å„å¤§è§å¹•çƒ­æ˜ ï¼Œå¼•èµ·äº†è§‚å½±ç¾¤ä¼—çš„å¹¿æ³›çƒ­è®®ã€‚æˆ‘èº«è¾¹çš„å¥½å¤šæœ‹å‹çœ‹å®Œäº†åå“éƒ½è¿˜æŒºä¸é”™çš„ï¼Œè±†ç“£ä¹Ÿæ˜¯ç»™å‡ºäº†è¯„åˆ†8.2çš„é«˜åˆ†ã€‚ä»Šå¤©åœ¨Aç«™æ­£å¥½çœ‹åˆ°ã€Šé‡œå±±è¡Œã€‹æœ‰èµ„æºï¼Œäºæ˜¯ä¹å¿ä¸ä½æŠŠå®ƒçœ‹å®Œäº†ã€‚ä¸å¾—ä¸è¯´ï¼ŒéŸ©å›½äººæ‹çš„ç”µå½±è¿˜æ˜¯å¾ˆä¸é”™çš„ï¼Œç»™æˆ‘çš„æ„Ÿè§¦æŒºå¤§çš„ï¼Œæƒ³æŠŠè‡ªå·±çš„ä¸€äº›çœ‹æ³•å†™ä¸‹æ¥ã€‚ è¿™éƒ¨ç”µå½±åœ¨ä¸¤ä¸ªå°æ—¶é‡Œå…¶å®è®²äº†æŒºå¤šä¸œè¥¿çš„ï¼Œäº²æƒ…ã€çˆ±æƒ…ã€å‹æƒ…å’Œäººæ€§å–„è‰¯è¿˜æœ‰ä¸‘æ¶ã€‚ç¬”è€…è§‰å¾—ä¸€éƒ¨å¥½çš„ç”µå½±ä¸ä»…ä»…åœ¨ç‰¹æ•ˆå’Œæ¼”å‘˜æ–¹é¢åšå¥½ï¼Œæ‰€è¦åˆ»ç”»çš„äººç‰©æ‰æ˜¯æ•´ä¸ªç”µå½±çš„çµé­‚æ‰€åœ¨ã€‚é‚£ä¹ˆæ€ä¹ˆæ ·æ‰èƒ½åˆ»ç”»å¥½ç”µå½±ä¸­çš„äººç‰©å½¢è±¡å‘¢ï¼Œå°±æ˜¯é€šè¿‡äººæ€§çš„å–„æ¶æ¥åˆ»ç”»ï¼ŒæŠ˜å°„å‡ºä¸€ç±»äººï¼ŒæŠ˜å°„å‡ºç¤¾ä¼šçš„é€šç—…ï¼Œè¿™æ ·çš„ç”µå½±æ‰èƒ½ç®—æ˜¯æˆåŠŸçš„ç”µå½±ã€‚ è¿™éƒ¨ç”µå½±ä¸€å…±åˆ»ç”»äº†è¿™ä¹ˆå‡ ç±»äººç‰©ï¼Œä¸€ä¸ªæ˜¯ä¸»äººå…¬ï¼Œèº«ä»½æ˜¯ä¸€ä½çˆ¶äº²ï¼ŒèŒä¸šæ˜¯è¯åˆ¸åŸºé‡‘ç»çºªäººï¼›ä¸€ä¸ªæ˜¯ç§€å®‰ï¼Œè·Ÿéšçˆ¶äº²ä¸€èµ·å»é‡œå±±çœ‹å¦ˆå¦ˆï¼›ä¸€ä¸ªæ˜¯ä½“æ ¼å¥å£®çš„å¤§å”ï¼Œèº«ä»½æ˜¯ä¸€ä½ä¸ˆå¤«ï¼Œå­©å­å³å°†å‡ºä¸–ï¼›ä¸€ä¸ªæ˜¯å¿«è¦ä¸´ç›†çš„å­•å¦‡ï¼Œè·Ÿéšä¸ˆå¤«ä¸€èµ·å»é‡œå±±ï¼›è¿˜æœ‰æ˜¯é«˜ä¸­ç”Ÿæ£’çƒé˜Ÿå­¦ç”Ÿï¼Œå’ŒåŒå­¦ä»¬å»é‡œå±±æ¯”èµ›ï¼›è¿˜æœ‰æ˜¯ç©¿è¥¿è£…çš„ä¸­å¹´å¤§å”ï¼ŒèŒä¸šæ˜¯å·´å£«å…¬å¸å¸¸åŠ¡ï¼Œå±äºä¸­äº§é˜¶çº§ï¼›æœ€åæ˜¯ä¸­å¹´å¤§å¦ˆä»¬ï¼Œæ˜¯ä¸€å¯¹å§å¦¹èŠ±ã€‚ 1.ä¸€ä¸ªä¸è¢«ç†è§£çš„çˆ¶äº² é¦–å…ˆæ˜¯æˆ‘ä»¬çš„ä¸»äººå…¬ï¼Œä½œä¸ºä¸€åè¯åˆ¸åŸºé‡‘ç»çºªäººï¼Œä»–ä¹Ÿæ˜¯ä¸€ä½æˆåŠŸäººå£«ï¼Œä½†æ˜¯ç”±äºå·¥ä½œç¹å¿™ï¼Œä»–ç»å¸¸ä¸åœ¨å®¶é™ªå­©å­ï¼Œå’Œå­©å­äº§ç”Ÿäº†å¾ˆæ·±çš„éš”é˜‚ã€‚åœ¨å­©å­çš„å¼ºçƒˆè¦æ±‚ä¸‹ï¼Œæ‰æ”¾ä¸‹å·¥ä½œï¼Œè¿›è¡Œäº†è¿™è¶Ÿé‡œå±±è¡Œã€‚ä¸Šè½¦åï¼Œç§€å®‰å»æ´—æ‰‹é—´é‡åˆ°äº†ä½“æ ¼å¥å£®çš„å¤§å”ï¼Œå¤§å”è¯´ä¸»äººå…¬æ˜¯â€œå¸è¡€é¬¼â€ï¼Œç§€å®‰éä½†æ²¡æœ‰ä¸ºçˆ¶äº²è¾©æŠ¤ï¼Œåè€Œè¿˜èµåŒå¤§å”çš„è§‚ç‚¹ã€‚ä¸€å¼€å§‹ä¸»äººå…¬ä¹Ÿæ˜¯æ¯”è¾ƒè‡ªç§è‡ªåˆ©çš„ï¼Œåœ¨å¤§å”é¢ä¸´å›°éš¾çš„æ—¶å€™ä»–å±…ç„¶ä¸æ˜¯æ•‘äººè€Œæ˜¯å…³é—¨ã€‚åœ¨ä»–å¾—çŸ¥å‰é¢æœ‰å±é™©æ—¶ï¼Œä»–ä¹Ÿå¹¶æ²¡æœ‰åŠæ—¶åœ°å‘Šè¯‰å…¶ä»–äººï¼Œè€Œæ˜¯å„è‡ªç®¡å„è‡ªçš„å¸¦ç€å¥³å„¿èµ°äº†ã€‚ åæ¥åœ¨é‡åˆ°å±é™©æ—¶ï¼Œè¿˜æ˜¯å¤§å”å’Œå­•å¦‡çš„å¸®åŠ©ä¸‹ï¼Œç§€å®‰æ‰è¢«æ•‘ã€‚ä»–ä¹Ÿè¢«å¤§å”å’Œå­•å¦‡æ…¢æ…¢çš„æ„ŸåŒ–ï¼Œæœ€åç‰ºç‰²äº†è‡ªå·±ï¼Œè®©ç§€å®‰æ´»äº†ä¸‹æ¥ï¼Œåœ¨ç”Ÿå‘½çš„æœ€åè¿˜æ˜¯æƒ¦è®°çš„å¥³å„¿å°æ—¶å€™çš„æ ·å­ã€‚çœ‹åˆ°æœ€åè¿™ä¸€å¹•ï¼Œç¬”è€…ä¹Ÿä¸ç¦ä¸ºä¹‹æ‰€æ„ŸåŠ¨ã€‚ä¸»äººå…¬æ‰€ä»£è¡¨çš„æ˜¯ä¸€ä¸ªä¸ä¸ºå¥³å„¿æ‰€ç†è§£çš„å¥½çˆ¶äº²çš„å½¢è±¡ï¼Œè™½ç„¶ä»–è‡ªèº«ä¹Ÿæœ‰å¾ˆå¤šç¼ºç‚¹ï¼Œä½†æ˜¯ä»–è¿˜æ˜¯ä¼šå®ˆæŠ¤æ•´ä¸ªå®¶åº­ï¼Œéƒ½åœ¨é»˜é»˜çš„ä¸ºæ•´ä¸ªå®¶åº­æ‰€ä»˜å‡ºã€‚ 2.ä¸€ä¸ªå†…å¿ƒçƒ­æƒ…çš„å¥å£®å¤§å” å…¶æ¬¡æ˜¯ä½“æ ¼å¥å£®çš„å¤§å”ï¼Œä¸€å¼€å§‹ï¼Œå¤–è¡¨çœ‹èµ·æ¥ä¸å¤ªå‹å–„ï¼Œä½†æ˜¯å¯¹å·²æ€€å­•çš„å¦»å­ç¡®å®ååˆ†çš„å‘µæŠ¤ï¼Œå¦»å­å¯¹ä»–å‘ç«çš„æ—¶å€™ä»–ä¹Ÿåªæ˜¯è„¸ä¸Šå †æ»¡ç¬‘å®¹ã€‚åœ¨æ•´ä¸ªç”µå½±é‡Œä¸€ç›´åœ¨æ•‘äººï¼Œååˆ†çš„æœ‰æ­£ä¹‰æ„Ÿã€‚ä»–åˆ©ç”¨è‡ªå·±å¥å£®çš„ä¼˜åŠ¿ï¼Œæ‰“é€€åƒµå°¸å¤§å†›ï¼Œä¸æ–­åœ°ä¿æŠ¤è‡ªå·±çš„å¦»å­ï¼Œä¿æŠ¤èº«è¾¹çš„äººã€‚ä»–ä¹Ÿå¿ƒèƒ¸å¼€é˜”ï¼Œè™½ç„¶ä¹‹å‰ä¸»äººå…¬å…³é—¨ä¸æ•‘ä»–ï¼Œä½†æ˜¯åæ¥ä¸è®¡å‰å«Œï¼Œåœ¨ä¸»äººå…¬å±éš¾çš„æ—¶å€™è¿˜æ˜¯æ•‘äº†ä»–ä¸€æŠŠï¼Œä¸¤äººä¹Ÿå¹¶è‚©ä½œæˆ˜ã€‚åœ¨æœ€å±æœºçš„æ—¶åˆ»ï¼Œä»–ä¸»åŠ¨ç‰ºç‰²äº†è‡ªå·±ï¼Œè®©ä¸»äººå…¬å¸¦è‡ªå·±çš„å¦»å­å…ˆè¡Œé€ƒç¦»ï¼Œè‡ªå·±æ‹–ä½äº†åƒµå°¸é˜Ÿä¼ï¼Œè¿˜ä¸å¿˜è®°ç»™è‡ªå·±æœªå‡ºä¸–çš„å¥³å„¿èµ·åå­—ã€‚ä»–æ˜¯ä¸€ä¸ªå¥½ä¸ˆå¤«ï¼Œå¥½çˆ¶äº²ï¼Œå¥½å…¬æ°‘çš„è§’è‰²ã€‚åœ¨æˆ‘ä»¬ç”Ÿæ´»ä¸­ï¼Œæ€»èƒ½çœ‹åˆ°è¿™æ ·ä¸€ç¾¤å¤§å”çš„èº«å½±ï¼Œå¯¹ç”Ÿæ´»å……æ»¡çƒ­æƒ…ï¼Œåœ¨æˆ‘ä»¬è¿·è·¯æ—¶ï¼Œä»–ä¼šçƒ­æƒ…çš„ä¸ºæˆ‘ä»¬æŒ‡è·¯ï¼Œåœ¨æœ‰äººéœ€è¦å¸®åŠ©çš„æ—¶å€™ï¼Œä»–æ€»ä¼šç¬¬ä¸€æ—¶é—´ç«™å‡ºæ¥ã€‚ 3.ä¸€ç¾¤æ¶‰ä¸–æœªæ·±çš„é«˜ä¸­ç”Ÿ ç„¶åæ˜¯å‚åŠ æ¯”èµ›çš„æ£’çƒé˜Ÿå­¦ç”Ÿï¼Œä»–ä»¬åˆšå¼€å§‹åœ¨è½¦ä¸Šæ‰“æ‰“é—¹é—¹ï¼Œç©çš„å¾ˆå¼€å¿ƒï¼Œå¤©çœŸæ— é‚ªã€‚ä½†æ˜¯ç¾éš¾å‘ç”Ÿçš„å¤ªçªç„¶äº†ï¼Œé™¤äº†å¥³é«˜ä¸­ç”Ÿå’Œé˜Ÿé•¿ï¼Œå…¶ä»–çš„åŒå­¦éƒ½è¢«æ„ŸæŸ“äº†ã€‚é¢å¯¹æ˜”æ—¥çš„å¥½å‹å˜æˆåƒµå°¸æ¥æ”»å‡»ä»–ä»¬ï¼Œé˜Ÿé•¿æ‹¿ç€æ£’çƒæ‹æ„£ä½äº†ï¼Œè¿Ÿè¿Ÿä¸æ•¢åŠ¨æ‰‹ï¼Œä»–å†…å¿ƒè‚¯å®šæ˜¯ä¸æ•¢å»ç›¸ä¿¡çš„ï¼Œè‡ªå·±çš„å¥½æœ‹å‹æ€ä¹ˆä¼šå˜æˆè¿™æ ·ã€‚åˆ°æœ€åé¢å¯¹è‡ªå·±å¿ƒçˆ±çš„å¥³ç”Ÿå˜æˆäº†åƒµå°¸ï¼Œé˜Ÿé•¿ä¹Ÿåªæœ‰ä¸€ä¸ªåŠ²çš„ç—›è‹¦ï¼Œå´æ— å¯å¥ˆä½•ï¼Œåªèƒ½è·Ÿç€çˆ±æƒ…ä¸€èµ·â€œé™ªè‘¬â€ã€‚å­¦ç”Ÿæ˜¯ä¸€ç¾¤å……æ»¡æ´»åŠ›å……æ»¡çƒ­æƒ…çš„ç¾¤ä½“ï¼Œä»–ä»¬æ•¢çˆ±æ•¢æ¨ï¼Œèƒ½ä¸ºçˆ±æƒ…æ‰€ç‰ºç‰²ï¼Œä½†æ˜¯ä»–ä»¬æ¶‰ä¸–æœªæ·±ï¼Œåœ¨å›°éš¾é¢å‰å®¹æ˜“ä¸çŸ¥æ‰€æªï¼Œéœ€è¦æœ‰äººæŒ‡å¼•ä»–ä»¬å‰è¿›ã€‚ 4.ä¸€å¯¹ä¸­å¹´å§å¦¹èŠ±å¤§å¦ˆ è¿˜æœ‰å°±æ˜¯ä¸€å¯¹ä¸­å¹´å¤§å¦ˆï¼Œä¸€å¼€å§‹ï¼Œå§å§ç»™å¦¹å¦¹å‰¥é¸¡è›‹åƒï¼Œå¯¹å¦¹å¦¹ååˆ†çš„â€œæººçˆ±â€ï¼Œä½†æ˜¯å¦¹å¦¹ä¸€è„¸å«Œå¼ƒã€‚ä»–ä»¬çš„è¡£ç€ä¹Ÿæœ‰ç€é²œæ˜çš„å¯¹æ¯”ï¼Œå§å§ç´ é¢œç´ è¡£ï¼Œå¤´ä¸Šå¸¦ç€äº›è®¸çš„ç™½å‘ï¼Œçœ‹å¾—å‡ºç”Ÿæ´»æ¯”è¾ƒè‰°è¾›ï¼Œå†ç»å²æœˆçš„æ²§æ¡‘ã€‚åæ¥ä»å¦¹å¦¹çš„è¯„ä»·ä¸­å¾—çŸ¥ï¼Œå§å§æœ‰ä¸€ä¸ªå„¿å­ï¼ŒæŠŠæ‰€æœ‰çš„éƒ½ç»™äº†å„¿å­ï¼Œè¿™åº”è¯¥æ˜¯æ‰€æœ‰çš„æ¯äº²éƒ½ä¼šåšçš„å§ã€‚å¦¹å¦¹æ‰“æ‰®æ—¶é«¦ï¼Œä¸€èº«çš„èŠ±è¡£æœï¼Œçƒ«ç€å¤´è·Ÿäºè°¦è€å¸ˆä¸€æ ·ï¼Œæ‰‹ä¸Šè¿˜æ¶‚ç€é“ä¸½çš„æŒ‡ç”²æ²¹ã€‚ä¸€å¼€å§‹å¦¹å¦¹è·Ÿå¹¿å¤§çš„â€œåƒç“œç¾¤ä¼—â€ä¸€æ ·å†·æ¼ ï¼Œå¥³å­¦ç”Ÿè¯´è·Ÿä»–ä»¬åœ¨ä¸€èµ·æ¯”è·Ÿåƒµå°¸åœ¨ä¸€èµ·è¿˜å¯æ€•ã€‚ä½†æ˜¯åæ¥è§åˆ°äº†å·²ç»å˜æˆäº†åƒµå°¸çš„å§å§ï¼Œæ„Ÿå¹å¥¹è¾›å‹¤åŠ³åŠ¨äº†ä¸€è¾ˆå­éƒ½æ˜¯è™šå¦„çš„ã€‚çœ‹åˆ°è‡ªå·±çš„äº²äººå—åˆ°äº†ç¤¾ä¼šä¸å…¬å¹³çš„å¾…é‡ï¼Œå¥¹å†…å¿ƒåäººç±»åç¤¾ä¼šçš„æ€§æ ¼å¼€å§‹è¡¨ç°ï¼Œä¸é¡¾ä»–äººçš„åŠ³åŠ¨æˆæœï¼Œæ¯…ç„¶åœ°æ”¾åƒµå°¸å¤§å†›è¿›æ¥ï¼Œæ‹‰æ‰€æœ‰äººè·Ÿå¥¹ä¸€èµ·é™ªè‘¬ã€‚ 5.ä¸€ä¸ªåªæƒ³è‡ªå·±æ´»å‘½çš„å¸¸åŠ¡å¤§å” æœ€åæ˜¯é‡Œé¢ç©¿è¥¿è£…çš„å¸¸åŠ¡å¤§å”ï¼Œä¸€å¼€å§‹å¯¹ç§€å®‰è¯´ï¼Œå¦‚æœä¸è®¤çœŸå­¦ä¹ ä¹Ÿä¼šå˜æˆæµæµªæ±‰ï¼Œå¤©çœŸæ— é‚ªçš„ç§€å®‰å´å¼•ç”¨å¦ˆå¦ˆçš„è¯ï¼Œè¯´ä»–æ˜¯åäººï¼Œæ„Ÿè§‰è¿™æ˜¯å¯¼æ¼”çš„é“ºå«ï¼Ÿåæ¥åˆ°äº†å‰é¢çš„è½¦ç«™ï¼Œä»–ä¸»åŠ¨è·Ÿåˆ—è½¦é•¿è¯´è¦æŠ›ä¸‹å…¶ä»–ä¹˜å®¢è·‘è·¯ã€‚åˆ—è½¦é•¿è¿˜æ˜¯æŒºçƒ­å¿ƒè‚ çš„ï¼Œä¸ºäº†æ›´å¤šä¹˜å®¢ç€æƒ³ï¼Œæ‹’ç»äº†ä»–ï¼Œä¸è¿‡ä»–çš„è¿™ç§çƒ­å¿ƒè‚ æ³¨å®šæ˜¯è¦è¢«å¸¸åŠ¡å¤§å”æ‰€åˆ©ç”¨çš„ã€‚åæ¥ä¸»äººå…¬ä¸€è¡Œæƒ³è¦è·Ÿâ€œåƒç“œç¾¤ä¼—â€æ±‡åˆï¼Œä½†æ˜¯å¸¸åŠ¡å¤§å”è¿™ä¸ªæ—¶å€™å´å¼€å§‹çƒ­å¿ƒè‚ èµ·æ¥äº†ï¼Œå£å£å£°å£°è¯´ä¸ºäº†æ‰€æœ‰çš„ä¹˜å®¢çš„å®‰å…¨ç€æƒ³ï¼Œä¸èƒ½è®©ä»–ä»¬æŠŠå±é™©å¸¦è¿‡æ¥ï¼Œå…¶å®å†…å¿ƒä»å¤´åˆ°å°¾éƒ½åªæ˜¯ä¸ºäº†è‡ªå·±ã€‚ä»–è¿˜æ¬ºéª—â€œåƒç“œç¾¤ä¼—â€è¯´ä¸»äººå…¬å·²ç»è¢«æ„ŸæŸ“ï¼Œç…½åŠ¨å…¶ä»–ä¹˜å®¢å°†ä¸»äººå…¬ä¸€è¡Œèµ¶åˆ°äº†å…¶ä»–è½¦å¢å»ã€‚åæ¥å½“ä»–å’Œä¹˜åŠ¡é•¿å‡†å¤‡ä¸€èµ·é€ƒç¦»æ—¶ï¼Œéª—ä¹˜åŠ¡é•¿å…ˆå‡ºå»å¼•å¼€äº†åƒµå°¸ï¼Œè‡ªå·±ç‹¬è‡ªé€ƒç¦»ï¼›åœ¨è¢«åƒµå°¸è¿½ä¸Šæ—¶ï¼Œå°†å¥³é«˜ä¸­ç”Ÿæ¨äº†ä¸‹å»ï¼Œè‡ªå·±åˆè·‘äº†ï¼›åœ¨çƒ­å¿ƒçš„åˆ—è½¦é•¿æ•‘ä»–åï¼Œä»–å´æ²¡æœ‰å¸®åˆ—è½¦é•¿ï¼Œè€Œæ˜¯æ©å°†ä»‡æŠ¥å°†åˆ—è½¦é•¿æ‹‰äº†ä¸‹å»ï¼Œè‡ªå·±é€ƒç”Ÿã€‚ åˆ°äº†æœ€åï¼Œäº¤ä»£äº†è‡ªå·±è¿˜æœ‰äº²äººåœ¨ç­‰ä»–ï¼Œä»–æƒ³è¦æ´»ç€å›å»ã€‚å¾ˆå¤šäººéƒ½å¾ˆç—›æ¨å¸¸åŠ¡å¤§å”ï¼Œå®³æ­»äº†è¿™ä¹ˆå¤šäººï¼Œä½†æ˜¯åœ¨ç¾éš¾é¢å‰ï¼Œæœ‰å¤šå°‘äººä¼šä¸ºä»–äººè€ƒè™‘å‘¢ã€‚æ¯ä¸ªäººéƒ½æƒ³è¦åœ¨ç¾éš¾é¢å‰æ´»ä¸‹å»ï¼Œæ¯ä¸ªäººéƒ½æœ‰æ´»ä¸‹å»çš„æƒåˆ©ï¼Œæˆ‘ä»¬æ²¡æœ‰æƒåˆ©å†³å®šä»–äººçš„ç”Ÿæ­»ã€‚ è¿˜è®°å¾—æœ‰ä¸€ä¸ªç½‘å‹åœ¨è±†ç“£ä¸Šçš„è¯„è®ºæ˜¯è¿™æ ·çš„ï¼šæ¯”ä¸§å°¸æ›´å¯æ€•çš„æ˜¯äººæ€§ã€‚ç¡®å®ï¼Œåªæœ‰åœ¨å±é™©çš„æƒ…å†µä¸‹æ‰èƒ½å±•ç¤ºä¸€ä¸ªäººæœ€çœŸå®çš„ä¸€é¢ï¼Œäººæ€§æ‰èƒ½å¤Ÿå½»åº•çš„æš´éœ²å‡ºæ¥ï¼Œè¿™æ‰æ˜¯æœ€çœŸå®çš„ã€‚æœ‰çš„äººå¯èƒ½ä¼šå–„è‰¯çš„å¸®åŠ©ä»–äººï¼Œæœ‰çš„äººå¯èƒ½å°±è‡ªå·±åªé¡¾ç€è‡ªå·±é€ƒç”Ÿï¼Œæ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„é€‰æ‹©ï¼Œå­°æ˜¯å­°éæˆ‘è§‰å¾—åº”è¯¥æ›´åŠ ç†æ€§çš„çœ‹åˆ°ã€‚æœ‰çš„äººæ€»å–œæ¬¢ç«™åœ¨é“å¾·çš„è‡³é«˜ç‚¹ï¼Œå¯¹ä»–äººçš„è¨€è¡ŒæŒ‡æŒ‡ç‚¹ç‚¹ï¼Œä½†æ˜¯è‡ªå·±é‡åˆ°äº†ä¸€æ ·çš„æƒ…å†µå´å¹¶æ²¡æœ‰åšçš„æ¯”ä»–äººå¥½ï¼Œè¿™æ ·çš„äººæ›´åŠ çš„å¯æ€•ã€‚ æœ€åï¼Œå›½åº†é©¬ä¸Šè¦ç»“æŸäº†ï¼Œå¸Œæœ›åé«˜é“å›æ¥çš„ç«¥é‹ä»¬æ—…é€”æ„‰å¿«;-)","tags":[{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"},{"name":"ç”µå½±","slug":"Movie","permalink":"https://xieyufei.com/tags/Movie/"}]},{"title":"æ·±å…¥ç†è§£jsä¸­çš„å˜é‡å’Œä½œç”¨åŸŸ","date":"2016-09-21T02:51:58.000Z","path":"2016/09/21/JS-Variate-Scope.html","text":"å¦‚æœæŠŠæ•´ä¸ªjsæ¯”ä½œæ˜¯ä¸€ä¸ªä½œæˆ˜çš„å†›é˜Ÿï¼Œä½œç”¨åŸŸå°±åƒæ˜¯å†›é˜Ÿä¸­çš„ä¸€ä¸ªä¸ªç¼–åˆ¶å•ä½ï¼Œè´Ÿè´£æ•´ç¼–å£«å…µï¼›è€Œå˜é‡å°±åƒå†›é˜Ÿä¸­çš„æœ€å°å•ä½â€”å£«å…µã€‚ å˜é‡å˜é‡åˆ†ç±» jsä¸­çš„å˜é‡åˆ†ä¸ºä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚å…¨å±€å˜é‡å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯åœ¨jsä»»ä½•åœ°æ–¹éƒ½èƒ½å¤Ÿè°ƒç”¨çš„å˜é‡ï¼›è€Œå±€éƒ¨å˜é‡å°±åªèƒ½åœ¨å‡½æ•°çš„å†…éƒ¨æ‰èƒ½å¤Ÿè°ƒç”¨çš„å˜é‡ã€‚ 12345678var a=10;function show()&#123; console.log(&#x27;a:&#x27;+a); //a:10 var b=2; console.log(&#x27;inside b:&#x27;+b); //inside b:2&#125;show();console.log(&#x27;outside b:&#x27;+b); //b is no defined åœ¨ä¸Šé¢çš„ç¨‹åºä¸­ï¼Œå˜é‡aå°±æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨å‡½æ•°çš„å†…éƒ¨èƒ½å¤Ÿè°ƒç”¨ã€‚ä½†æ˜¯è¿™é‡Œçš„å˜é‡bå°±æ˜¯å±€éƒ¨å˜é‡ï¼Œå½“å‡½æ•°ç»“æŸè°ƒç”¨åï¼Œå˜é‡bå°±è¢«å›æ”¶äº†ï¼Œå› æ­¤åœ¨å‡½æ•°å¤–éƒ¨è°ƒç”¨å¤±è´¥ã€‚ å¦å¤–éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š å¦‚æœåœ¨å£°æ˜å±€éƒ¨å˜é‡æ—¶ä¸ç”¨varå£°æ˜ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡è‡ªåŠ¨â€œæå‡â€ä¸ºå…¨å±€å˜é‡ã€‚ 12345678var a=10;function show()&#123; console.log(&#x27;a:&#x27;+a); //a:10 b=2; console.log(&#x27;inside b:&#x27;+b); //inside b:2&#125;show();console.log(&#x27;outside b:&#x27;+b); //outside b:2 å¯¹æ¯”ä¸¤æ®µä»£ç ï¼Œå¦‚æœä½ åœ¨å£°æ˜b=2æ—¶æ²¡æœ‰å†™varï¼Œé‚£ä¹ˆbå°±éšå¼åœ°å£°æ˜ä¸ºå…¨å±€å˜é‡ï¼Œåœ¨å‡½æ•°å¤–é¢è¿˜æ˜¯èƒ½å¤Ÿè¢«è°ƒç”¨åˆ°çš„ã€‚ è™½ç„¶ä½¿ç”¨å…¨å±€å˜é‡èƒ½å¤Ÿåœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ï¼Œå¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å…¨å±€å˜é‡çš„ä¼˜ç‚¹ä¹Ÿç»™ä»–å¸¦æ¥äº†ç¼ºç‚¹ï¼š ä¸€ç›´å ç”¨å†…å­˜ï¼šå…¨å±€å˜é‡ä¿å­˜åœ¨é™æ€å­˜å‚¨åŒºï¼Œå¦‚æœå…¨å±€å˜é‡è¿‡å¤šä¼šå å¤šå¤§é‡å†…å­˜ï¼Œä¸¥é‡å½±å“é¡µé¢çš„æ€§èƒ½ã€‚ å½±å“äº†å‡½æ•°çš„ç‹¬ç«‹æ€§ï¼šä¸€èˆ¬å‡½æ•°éƒ½æ˜¯ä¼ å…¥å‚æ•°å’Œä¼ å‡ºè¿”å›å€¼è¿›è¡Œè¿ç®—çš„ï¼Œå¦‚æœå‡½æ•°ä¾èµ–äºå…¨å±€å˜é‡ï¼Œç ´åäº†å‡½æ•°çš„è¿™ç§ç‹¬ç«‹æ€§ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†å‡½æ•°çš„å¯ç§»æ¤æ€§ã€‚ å› æ­¤æˆ‘ä»¬åœ¨å®šä¹‰å˜é‡æ—¶ä¸€èˆ¬è¦å°½å¯èƒ½å°‘çš„å®šä¹‰å…¨å±€å˜é‡ã€‚ å˜é‡å£°æ˜ å‡½æ•°å£°æ˜ä¼˜å…ˆäºå˜é‡å£°æ˜ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€æ®µä»£ç æ¥è¯´æ˜. 1234var a; function a()&#123;&#125;console.log(typeof a); //function æˆ–è®¸æœ‰äººæ˜¯è®¤ä¸ºå‡½æ•°å£°æ˜åœ¨åé¢çš„åŸå› ï¼Œé‚£ä¹ˆè°ƒæ¢ä¸€ä¸‹ä½ç½®ã€‚ 1234function a()&#123;&#125;var a; console.log(typeof a); //function è°ƒæ¢ä½ç½®åå˜é‡açš„ç±»å‹è¿˜æ˜¯functionï¼Œè¿™æ—¶å€™å£°æ˜å˜é‡açš„è¯­å¥æ²¡æœ‰èµ·ä½œç”¨ï¼Œè¢«å‡½æ•°å£°æ˜è¦†ç›–äº†ã€‚å› æ­¤å‡½æ•°å£°æ˜ä¼˜å…ˆäºå˜é‡çš„å£°æ˜ã€‚ ä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å£°æ˜çš„åŒæ—¶ç»™aè¿›è¡Œèµ‹å€¼ã€‚ 1234function a()&#123;&#125;var a=&#x27;xyf&#x27;; console.log(typeof a); //string æˆ‘ä»¬å°†å…¶è°ƒæ¢ä¸€ä¸‹ä½ç½®å†æ¬¡è¿›è¡ŒéªŒè¯ã€‚ 1234var a=&#x27;xyf&#x27;; function a()&#123;&#125;console.log(typeof a); //string å¯ä»¥çœ‹åˆ°ï¼Œç»™å˜é‡aè¿›è¡Œèµ‹å€¼åï¼Œä¸ç®¡å˜é‡aåœ¨å“ªï¼Œå…¶ç±»å‹å˜ä¸ºå­—ç¬¦ä¸²ç±»å‹ï¼Œä¸Šé¢ä¸¤æ®µä»£ç ç›¸å½“äºå¦‚ä¸‹ä»£ç ï¼š 12345function a()&#123;&#125;var a;a=&#x27;xyf&#x27;;console.log(typeof a); //string aæœ€åè¢«èµ‹å€¼ä¸ºå­—ç¬¦ä¸²ï¼Œå› æ­¤açš„ç±»å‹è‡ªç„¶æ˜¯å­—ç¬¦ä¸² ä½œç”¨åŸŸå—çº§ä½œç”¨åŸŸ jsä¸­ä½œç”¨åŸŸåªæœ‰ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸå’Œå…¨å±€ä½œç”¨åŸŸï¼Œä¸€ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹å°±æ˜¯jsä¸­æ²¡æœ‰å—çº§ä½œç”¨åŸŸã€‚å‡½æ•°ä½œç”¨åŸŸæ˜¯æ¯”è¾ƒå®¹æ˜“ç†è§£çš„ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å—çº§ä½œç”¨åŸŸå‘¢ï¼Ÿ ä»»ä½•ä¸€å¯¹èŠ±æ‹¬å·ï¼ˆï½›å’Œï½ï¼‰ä¸­çš„è¯­å¥é›†éƒ½å±äºä¸€ä¸ªå—ï¼Œåœ¨è¿™ä¹‹ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡åœ¨ä»£ç å—å¤–éƒ½æ˜¯ä¸å¯è§çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå—çº§ä½œç”¨åŸŸã€‚ ç†è§£äº†å—çº§ä½œç”¨åŸŸï¼Œæ¥çœ‹ä¸€ä¸‹ä¸‹é¢çš„å°ä¾‹å­ã€‚ 12console.log(v); //undefinedvar v = &quot;world&quot;; è¿™æ®µä»£ç å¾ˆå¥½ç†è§£ï¼Œç”±äºå˜é‡våœ¨æ²¡æœ‰èµ‹å€¼å‰ä½¿ç”¨äº†ï¼Œæ‰€ä»¥æ˜¯undefinedã€‚å…¶å®è¿™é‡Œå­˜åœ¨ç€å£°æ˜çš„æå‰ã€‚ å½“å‰ä½œç”¨åŸŸå†…çš„å£°æ˜éƒ½ä¼šæå‡åˆ°ä½œç”¨åŸŸçš„æœ€å‰é¢ï¼ŒåŒ…æ‹¬å˜é‡å’Œå‡½æ•°çš„å£°æ˜ ç”±äºjsä½œç”¨åŸŸä¸­çš„å£°æ˜éƒ½ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸçš„æœ€å‰é¢ï¼Œæ‰€ä»¥ï¼Œä¸Šé¢çš„ä»£ç ç›¸å½“äºï¼š 123var v;console.log(v); //undefinedv = &quot;world&quot;; è¿™æ ·å°±èƒ½å¾ˆæ¸…æ™°åœ°ç†è§£ä¸ºä»€ä¹ˆå˜é‡væ˜¯undefinedçš„äº†ã€‚ ä¸‹é¢æˆ‘ä»¬æŠŠå˜é‡væ”¾åˆ°ä¸€ä¸ªæ–¹æ³•ä¸­å»ï¼š 1234if(true)&#123; var v = &quot;hello&quot;;&#125;console.log(v); //hello åœ¨è¿™é‡Œç”±äºjsæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥ifæ–¹æ³•æ²¡æœ‰â€œå½¢æˆâ€ä¸€ä¸ªå°é—­çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸èƒ½å¤Ÿâ€œé˜»æŒ¡â€å¤–é¢çš„ä»£ç è·å–é‡Œé¢çš„å˜é‡ã€‚ å‡½æ•°ä½œç”¨åŸŸ æˆ‘ä»¬å†æŠŠå˜é‡væ”¾åˆ°å‡½æ•°ä¸­å»ï¼š 12345function show()&#123; var v=&#x27;world&#x27;;&#125;show();console.log(v); //undefined ç”±äºshowå‡½æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼Œâ€œé˜»æŒ¡â€å¤–é¢çš„ä»£ç è·å–é‡Œé¢å˜é‡ï¼ˆå¹¶ä¸èƒ½é˜»æŒ¡é‡Œé¢çš„ä»£ç è·å–å¤–é¢çš„å˜é‡ï¼‰ï¼Œæ‰€ä»¥å‡½æ•°å¤–éƒ¨å¹¶ä¸èƒ½è·å–åˆ°å‡½æ•°é‡Œé¢çš„å˜é‡vã€‚å› æ­¤è¯æ˜äº†jsä¸­åªæœ‰å‡½æ•°ä½œç”¨åŸŸï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸã€‚ å†æ¥çœ‹ä¸‹é¢çš„ä¸€æ®µä»£ç ï¼š 123456var v=&#x27;hello&#x27;;function show()&#123; console.log(v); //undefined var v=&#x27;world&#x27;;&#125;show(); å¾ˆå¤šäººçœ‹åˆ°è¿™è¾¹éƒ½ä¼šå¾ˆç–‘æƒ‘ï¼Œä¸æ˜¯è¯´è¿™è¾¹showå‡½æ•°ä¸­èƒ½å¤Ÿè·å–åˆ°å‡½æ•°å¤–é¢çš„å˜é‡çš„ä¹ˆï¼Ÿä½†æ˜¯ç”±äºè¿™è¾¹æ˜¯ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸï¼Œè€Œå‡½æ•°ä½œç”¨åŸŸå­˜åœ¨ç€å˜é‡å£°æ˜çš„æå‰ï¼Œå› æ­¤ï¼Œä¸Šé¢çš„ä»£ç ç›¸å½“äºä¸‹é¢çš„ä»£ç ï¼š 1234567var v=&#x27;hello&#x27;;function show()&#123; var v; console.log(v); //undefined v=&#x27;world&#x27;;&#125;show(); è¿™é‡ŒæŠŠå˜é‡vçš„å£°æ˜æ”¾åˆ°äº†æ•´ä¸ªå‡½æ•°ä½œç”¨åŸŸçš„æœ€å‰é¢ï¼Œå› æ­¤æ˜¾ç¤ºä¸ºundefinedã€‚ç†è§£äº†ä¸Šé¢çš„ä»£ç ï¼Œç›¸ä¿¡ä¸‹é¢çš„ä»£ç ä¹Ÿä¸éš¾ç†è§£äº†ã€‚ 12345var v = &quot;hello&quot;;(function()&#123; console.log(v); var v = &quot;world&quot;;&#125;)(); åœ¨è¿™é‡Œè‡ªæ‰§è¡Œå‡½æ•°å½¢æˆäº†å‡½æ•°ä½œç”¨åŸŸ éœ€è¦æ³¨æ„çš„æ˜¯ å˜é‡æå‡åªæå‡å‡½æ•°çš„å£°æ˜ï¼Œå¹¶ä¸æå‡å‡½æ•°çš„å®šä¹‰ 12345show(); //show is not a functionvar show=function()&#123; //...&#125;show(); //æˆåŠŸè¿è¡Œ æˆ–è®¸æœ‰äººæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆè¿™è¾¹å®šä¹‰çš„å‡½æ•°å°±ä¸èƒ½æ‰§è¡Œå‘¢ï¼Ÿåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦æ˜ç™½å‡½æ•°åœ¨jsä¸­æ˜¯å¦‚ä½•è¿›è¡Œå®šä¹‰çš„ã€‚å‡½æ•°æœ‰ä¸¤ç§å®šä¹‰æ–¹å¼ï¼Œä¸€ç§æ˜¯å‡½æ•°å£°æ˜ï¼Œå¦ä¸€ç§æ˜¯å‡½æ•°è¡¨è¾¾å¼ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯å‡½æ•°å£°æ˜ä»€ä¹ˆæ˜¯å‡½æ•°è¡¨è¾¾å¼å‘¢ï¼Ÿ 12345678//å‡½æ•°å£°æ˜function show()&#123; //....&#125;//å‡½æ•°è¡¨è¾¾å¼var show=function()&#123; //...&#125; ä¹ä¸€çœ‹ï¼Œä»–ä»¬é•¿å¾—å¾ˆåƒï¼Œå†™æ³•éƒ½å·®ä¸å¤šï¼Œä½†æ˜¯å®é™…ä¸Šè¿˜æ˜¯æœ‰åŒºåˆ«çš„ã€‚jsçš„è§£æå™¨å¯¹å‡½æ•°å£°æ˜å’Œå‡½æ•°è¡¨è¾¾å¼å¹¶ä¸æ˜¯ä¸€è§†åŒä»çš„å¯¹å¾…çš„ï¼Œæœ‰ç‚¹â€œç§æ—æ­§è§†â€çš„æ„æ€åœ¨é‡Œé¢ã€‚ å‡½æ•°å£°æ˜å°±åƒæ˜¯â€œä¸€ç­‰å…¬æ°‘â€ï¼Œjsä¼šä¼˜å…ˆè¯»å–ï¼Œç¡®ä¿åœ¨æ‰§è¡Œå‰å°±å·²ç»è¢«è§£æäº†ï¼Œæ‰€ä»¥å‡½æ•°å£°æ˜æ”¾åœ¨å½“å‰ä½œç”¨åŸŸçš„ä»»ä½•åœ°æ–¹éƒ½èƒ½å¤Ÿè¢«è°ƒç”¨ï¼Œç”šè‡³æ”¾åˆ°è°ƒç”¨å‡½æ•°å£°æ˜ä¹‹åé¢ã€‚ è€Œå‡½æ•°è¡¨è¾¾å¼å°±æ˜¾å¾—æ¯”è¾ƒâ€œæ™®é€šâ€ï¼Œå’Œä¸€èˆ¬çš„å˜é‡ä¸€æ ·ï¼Œåªæœ‰åˆ°æ‰§è¡Œåˆ°è¯¥è¡Œæ—¶æ‰è¿›è¡Œè§£æï¼Œå› æ­¤ï¼Œè°ƒç”¨å‡½æ•°è¡¨è¾¾å¼è¦åœ¨å®šä¹‰åè¿›è¡Œä½¿ç”¨ã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"js","slug":"js","permalink":"https://xieyufei.com/tags/js/"}]},{"title":"jsä¸­é—­åŒ…çš„ç”¨æ³•æ•´ç†","date":"2016-09-20T13:48:47.000Z","path":"2016/09/20/Js-Closure.html","text":"é—­åŒ…åœ¨jsä¸­æ¯”è¾ƒå¸¸è§ï¼Œæ˜¯jsçš„ä¸€ç§ç‰¹è‰²ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯jsçš„ä¸€ä¸ªéš¾ç‚¹ã€‚å¾ˆå¤šé¢è¯•é¢˜éƒ½å–œæ¬¢è€ƒæ ¸å¯¹jsé—­åŒ…çš„ç†è§£ã€‚è¿™ç¯‡æ–‡ç« æ•´ç†äº†jsçš„ä¸€äº›å¸¸è§çš„ç”¨æ³•ã€‚ ä»€ä¹ˆæ˜¯jsé—­åŒ… å¯¹äºjsé—­åŒ…ï¼Œå®˜æ–¹çš„è§£é‡Šæ˜¯è¿™æ ·çš„ï¼š ä¸€ä¸ªæ‹¥æœ‰è®¸å¤šå˜é‡å’Œç»‘å®šäº†è¿™äº›å˜é‡çš„ç¯å¢ƒçš„è¡¨è¾¾å¼ï¼ˆé€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ï¼Œå› è€Œè¿™äº›å˜é‡ä¹Ÿæ˜¯è¯¥è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ã€‚ ç¬¬ä¸€æ¬¡è¯»ä¼°è®¡å¾ˆéš¾ç†è§£ï¼Œä»€ä¹ˆç»‘å®šå˜é‡çš„ç¯å¢ƒè¡¨è¾¾å¼ã€è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†ï¼Œéƒ½æ˜¯äº›ä»€ä¹ˆé¬¼ã€‚ç”¨é€šä¿—ä¸€ç‚¹çš„è¯æ¥è¯´å°±æ˜¯ï¼š ä¸€ä¸ªå‡½æ•°ä¸­æœ‰è®¸å¤šå˜é‡ï¼Œè¿™äº›å˜é‡å˜æˆäº†å‡½æ•°çš„ä¸€éƒ¨åˆ†ã€‚é—­åŒ…å°±æ˜¯èƒ½å¤Ÿè·å–åˆ°å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚ å› æ­¤ï¼Œé—­åŒ…ä¹Ÿç§°ä¸ºé—­åŒ…æ•°æ®ï¼Œé—­åŒ…çš„æœ¬è´¨ä¹Ÿå°±æ˜¯å‡½æ•°ã€‚ è¦ç†è§£é—­åŒ…ï¼Œé¦–å…ˆè¦æ¥ç†è§£ä¸¤ä¸ªæ¦‚å¿µï¼šå˜é‡å’Œä½œç”¨åŸŸã€‚åœ¨è¿™é‡Œä¸å¤šé˜è¿°ï¼Œå¯ä»¥çœ‹ç¬”è€…çš„å¦ä¸€ç¯‡æ–‡ç« ã€Šæ·±å…¥ç†è§£jsä¸­çš„å˜é‡å’Œä½œç”¨åŸŸã€‹ã€‚ é—­åŒ…çš„äº§ç”Ÿ ç”±äºå‡½æ•°ä½œç”¨åŸŸçš„å°é—­æ€§ï¼Œå‡½æ•°å¤–éƒ¨å¹¶ä¸èƒ½è®¿é—®å‡½æ•°å†…éƒ¨çš„å˜é‡ã€‚ 1234function func()&#123; var n=999;&#125;console.log(n); // n is not defined ä½†æ˜¯æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ç”¨åˆ°å‡½æ•°å†…éƒ¨çš„å˜é‡ï¼Œè¿™æ—¶å€™é—­åŒ…å°±æ´¾ä¸Šç”¨å¤„äº†ã€‚æˆ‘ä»¬å°†ä¸Šé¢çš„ä»£ç æ”¹é€ ä¸€ä¸‹ï¼Œå°±èƒ½å¤Ÿè·å–åˆ°funcå‡½æ•°å†…éƒ¨çš„å˜é‡ã€‚ 1234567891011121314function func()&#123; var n=999; add=function()&#123; n++; &#125; function show()&#123; return n; &#125; return show;&#125;var tempShow=func();console.log(tempShow()); //999add();console.log(tempShow()); //1000 è¿™é‡Œçš„tempShowå‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªé—­åŒ…showå‡½æ•°ã€‚å®ƒæ˜¯é€šè¿‡æœ€å¤–å±‚çš„funcå‡½æ•°è¿è¡Œåè¿›è¡Œèµ‹å€¼çš„ã€‚tempShowå‡½æ•°è¿è¡Œåå°±è·å–åˆ°äº†funcå‡½æ•°å†…éƒ¨çš„å˜é‡nã€‚ é‚£ä¸ºä»€ä¹ˆfuncå‡½æ•°è¿è¡Œä¹‹åå˜é‡næ²¡æœ‰è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶æ‰å‘¢ï¼Ÿåœ¨ã€Šæ·±å…¥ç†è§£jsä¸­çš„å˜é‡å’Œä½œç”¨åŸŸã€‹ä¸­æˆ‘ä»¬è¯´è¿‡äº†ï¼Œå…¨å±€å˜é‡æ˜¯ä¿å­˜åœ¨é™æ€å­˜å‚¨åŒºçš„ï¼Œç”±äºé™æ€å­˜å‚¨åŒºä¸­çš„å˜é‡æ˜¯ä¸ä¼šè¢«å›æ”¶æ‰çš„ã€‚è€Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†å‡½æ•°showèµ‹å€¼ç»™å…¨å±€å˜é‡tempShowï¼Œè€Œå‡½æ•°showæ˜¯å‡½æ•°funcçš„å­å‡½æ•°ï¼Œå› æ­¤ï¼Œå‡½æ•°funcä¹Ÿä¿å­˜åœ¨é™æ€å­˜å‚¨åŒºäº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨tempShowæ–¹æ³•ã€‚ åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå¾ˆå·§å¦™çš„å®šä¹‰äº†ä¸€ä¸ªaddå‡½æ•°ï¼Œæ²¡æœ‰åœ¨addå‰ä½¿ç”¨varå…³é”®å­—ï¼Œå› æ­¤å‡½æ•°addæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡è€Œä¸æ˜¯å±€éƒ¨å˜é‡ï¼Œå¯ä»¥åœ¨å‡½æ•°çš„å¤–éƒ¨è°ƒç”¨å¯¹å˜é‡nè¿›è¡Œæ“ä½œã€‚å‡½æ•°addä¹Ÿæ˜¯ä¸€ä¸ªé—­åŒ…å‡½æ•°ã€‚ ç†è§£äº†ä¸Šé¢çš„ä»£ç ï¼Œç›¸ä¿¡ä¸‹é¢çš„ä»£ç ä¹Ÿä¸éš¾ç†è§£äº†ã€‚ 1234567891011var name = &quot;The Window&quot;;var object = &#123; name : &quot;My Object&quot;, getNameFunc : function()&#123; return function()&#123; return this.name; &#125;; &#125;&#125;;var temp=object.getNameFunc();console.log(temp()); //The Window åœ¨è¿™é‡Œå‡ºç°äº†ä¸€ä¸ªæ–°çš„å˜é‡thisï¼Œè¯»è€…ä»¬å¯ä»¥é€šè¿‡ç¬”è€…çš„è¿™ç¯‡æ–‡ç« ã€ŠJsä¸­thisçš„ç”¨æ³•ã€‹å¤§è‡´çš„äº†è§£thisã€‚ç”±äºå‡½æ•°tempè°ƒç”¨çš„ç¯å¢ƒä¸åœ¨objectå†…éƒ¨è¿›è¡Œäº†è°ƒç”¨ï¼Œå› æ­¤å‡½æ•°ä¸­çš„thisæŒ‡ä»£äº†å…¨å±€å˜é‡windowã€‚ä¸ºäº†è¾¾åˆ°è·å–objectå†…éƒ¨nameçš„æ•ˆæœï¼Œæˆ‘ä»¬å¯¹ä¸Šé¢çš„ä»£ç è¿›è¡Œæ”¹é€ ï¼š 123456789101112var name = &quot;The Window&quot;;var object = &#123; name : &quot;My Object&quot;, getNameFunc : function()&#123; var that = this; return function()&#123; return that.name; &#125;; &#125;&#125;;var temp=object.getNameFunc();console.log(temp()); //My Object æˆ–è€…è¿™æ ·æ”¹é€ ï¼Œä½¿ç”¨bindæ–¹æ³•ï¼Œå°†tempå‡½æ•°çš„ä½œç”¨åŸŸç»‘å®šåˆ°objectä¸Šã€‚ 123456789101112var name = &quot;The Window&quot;;var object = &#123; name : &quot;My Object&quot;, getNameFunc : function()&#123; var that = this; return function()&#123; return that.name; &#125;; &#125;&#125;;var temp=object.getNameFunc().bind(object);console.log(temp()); //My Object é—­åŒ…ä¸ä»…èƒ½å¤Ÿè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿˜èƒ½å¤Ÿè¿”å›å…¶ä»–ç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç è¿”å›äº†ä¸€ä¸ªæ•°ç»„å¯¹è±¡ã€‚ 12345678910111213function createFunctions()&#123; var result = new Array(); for (var i=0; i &lt; 10; i++)&#123; result[i] = function()&#123; return i; &#125;; &#125; return result;&#125;var funcs = createFunctions();for (var i=0; i &lt; funcs.length; i++)&#123; console.log(funcs[i]()); //10ä¸ª10&#125;","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"js","slug":"js","permalink":"https://xieyufei.com/tags/js/"}]},{"title":"Jsä¸­thisçš„ç”¨æ³•","date":"2016-09-18T04:02:50.000Z","path":"2016/09/18/Explain-Js-This.html","text":"thisåœ¨jsä¸­æ˜¯ä¸€ä¸ªå¸¸è§çš„å˜é‡ï¼Œåœ¨ä¸åŒçš„å‡½æ•°ä¸­thisæŒ‡ä»£äº†ä¸åŒçš„å˜é‡ã€‚åˆšå¼€å§‹æˆ‘å¾ˆå›°æƒ‘ï¼Œæ€ä¹ˆåœ¨è¿™é‡Œæ˜¯è¿™ä¸ªæ„æ€ï¼Œåˆ°äº†ç›¸ä¼¼çš„å‡½æ•°ä¸­å´åˆæ”¹å˜äº†æ„æ€ï¼Œè®©æˆ‘å¾ˆæ‘¸ä¸ç€å¤´è„‘ã€‚æ‰€ä»¥æ•´ç†ä¸€ä¸‹thisçš„ç”¨æ³• å…¨å±€ä½œç”¨åŸŸä¸­çš„this åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼ŒthisæŒ‡å‘äº†Windowå¯¹è±¡ã€‚ 12this.name=&#x27;xyf&#x27;;console.log(this); åœ¨ä¸Šé¢æˆ‘ä»¬æŠŠnameæŒ‚è½½åˆ°äº†å…¨å±€ä½œç”¨åŸŸWindowä¸‹é¢ï¼Œå…¶å®æˆ‘ä»¬åœ¨ç”¨varå£°æ˜å˜é‡çš„æ—¶å€™ä¹Ÿæ˜¯æŠŠå˜é‡æŒ‚è½½åˆ°Windowä¸‹é¢ã€‚æ‰€ä»¥ä¸Šé¢çš„æ“ä½œç­‰ä»·äºä¸‹é¢çš„æ“ä½œ 12var name=&#x27;xyf&#x27;;console.log(this); å‡½æ•°ä¸­çš„this åœ¨jsä¸­å‡½æ•°åˆ†ä¸ºæ™®é€šçš„å‡½æ•°å’Œæ„é€ å‡½æ•°ï¼Œä¸»è¦çš„åŒºåˆ«å°±æ˜¯å‡½æ•°çš„è°ƒç”¨å½¢å¼ã€‚æ™®é€šå‡½æ•°èƒ½å¤Ÿç›´æ¥è°ƒç”¨ï¼Œè€Œæ„é€ å‡½æ•°æ˜¯ä¸èƒ½è°ƒç”¨ï¼Œéœ€è¦ç”¨newå®ä¾‹åŒ–ã€‚ æ™®é€šå‡½æ•°ä¸­çš„this æ™®é€šå‡½æ•°çš„ä¸­thisæŒ‡å‘äº†Windowå¯¹è±¡ 1234function show(name)&#123; this.name=name;&#125;show(&#x27;xyf&#x27;); è¿™æ—¶å€™å‡½æ•°showä½œä¸ºä¸€ä¸ªæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œè™½ç„¶çœ‹èµ·æ¥åƒæ„é€ å‡½æ•°ï¼Œä½†æ˜¯å†…éƒ¨çš„thiså´æŒ‡å‘äº†Windowå¯¹è±¡ï¼Œå¦‚æœä½ åœ¨æ§åˆ¶å°æ‰“å°Windowå¯¹è±¡ï¼Œå®ƒä¸‹é¢æŒ‚è½½äº†nameå±æ€§ æ„é€ å‡½æ•°ä¸­çš„this æ„é€ å‡½æ•°ä¸­çš„thisåˆ™æŒ‡å‘äº†å®ƒæ‰€å®ä¾‹åŒ–çš„å¯¹è±¡ 12345function show(name)&#123; this.name=name;&#125;var myshow=new show(&#x27;xyf&#x27;);console.log(myshow.name); //&#x27;xyf&#x27; åœ¨è¿™é‡Œå¦‚æœä½ ç›´æ¥è°ƒç”¨show(â€˜xyfâ€™)è·Ÿæ™®é€šå‡½æ•°æ²¡æœ‰åŒºåˆ«ï¼Œé€šè¿‡newå®ä¾‹åŒ–ä¸€ä¸ªmyshowå¯¹è±¡ï¼Œè¿™æ—¶å€™thiså°±æŒ‡å‘äº†è¿™ä¸ªå®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ å¯¹è±¡ä¸­çš„this å¯¹è±¡ä¸­çš„thisæŒ‡å‘äº†å½“å‰å¯¹è±¡ 1234567891011var person=&#123; name=&#x27;origin&#x27;, setName:function(name)&#123; this.name=name &#125;, getName:function()&#123; return this.name; &#125;&#125;person.setName(&#x27;xyf&#x27;);console.log(person.getName()); //&#x27;xyf&#x27; ä½†æ˜¯å¦‚æœå¯¹è±¡çš„å‡½æ•°ä¸­åµŒå¥—äº†å…¶ä»–å‡½æ•°ï¼Œthisçš„æŒ‡å‘å°±è¢«æ”¹å˜äº†ã€‚ åµŒå¥—è‡ªæ‰§è¡Œå‡½æ•°12345678910111213var person=&#123; name=&#x27;origin&#x27;, setName:function(name)&#123; (function(name)&#123; this.name=name; &#125;)(name); &#125;, getName:function()&#123; return this.name; &#125;&#125;person.setName(&#x27;xyf&#x27;);console.log(person.getName()); //&#x27;origin&#x27; è¿™æ—¶å€™è‡ªæ‰§è¡Œå‡½æ•°ä¸­çš„thisæŒ‡å‘äº†å…¨å±€å¯¹è±¡Windowï¼Œæ‰€ä»¥setName()å‡½æ•°å¹¶ä¸èƒ½äº§ç”Ÿä½œç”¨ã€‚ åµŒå¥—å›è°ƒå‡½æ•°12345678910111213var person=&#123; name=&#x27;origin&#x27;, setName:function(name)&#123; $(&#x27;.temp&#x27;).on(&#x27;click&#x27;,function(e)&#123; this.name=name; &#125;); &#125;, getName:function()&#123; return this.name; &#125;&#125;person.setName(&#x27;xyf&#x27;);console.log(person.getName()); //&#x27;origin&#x27; è¿™é‡Œçš„thisæŒ‡å‘äº†$(â€˜.tempâ€™)è¿™ä¸ªå¯¹è±¡ã€‚ä¸ºäº†é¿å…è¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬å…ˆå°†thisèµ‹å€¼ç»™å±€éƒ¨å˜é‡thatï¼Œç„¶åä½¿ç”¨thatã€‚è¿™æ—¶å€™thatå°±æŒ‡å‘äº†æˆ‘ä»¬éœ€è¦çš„å¯¹è±¡ã€‚ 1234var that=this;(function(name)&#123; that.name=name;&#125;)(name); ç‰¹åˆ«å£°æ˜ å¦‚æœå°†ä¸€ä¸ªå¯¹è±¡ä¸­çš„å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå†é€šè¿‡è¯¥å˜é‡è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæ­¤æ—¶å‡½æ•°ä¸­çš„thisæŒ‡å‘Windowå¯¹è±¡ï¼Œå³ä½¿è¿™ä¸ªæ“ä½œåœ¨å›è°ƒå‡½æ•°ä¸­ã€‚ 12345678910111213141516171819var person=&#123; name:&quot;person&quot;, setName:function(name)&#123; this.name=name &#125;, getName:function()&#123; return this.name; &#125;&#125;var temp=&#123; name:&quot;temp&quot;, tempFun:function()&#123; $(&#x27;.temp&#x27;).on(&#x27;click&#x27;,function()&#123; var fun=person.getName; fun(); //&#x27;&#x27; &#125;) &#125;&#125;temp.tempFun(); ä½¿ç”¨applyå’Œcallå‡½æ•°æ”¹å˜thisæŒ‡å‘ è¿™ä¸¤ä¸ªå‡½æ•°éƒ½èƒ½å¤Ÿæ‰‹åŠ¨æŒ‡å®šè¢«è°ƒç”¨å‡½æ•°å†…éƒ¨thisæŒ‡å‘å“ªä¸ªå¯¹è±¡ã€‚ 123456789101112131415function person(name)&#123; this.name=&quot;&quot;; this.setName=function(name)&#123; this.name=name; &#125;&#125;var p1=new person(&#x27;p1&#x27;);var p2=new person(&#x27;p2&#x27;);p1.setName(&#x27;p1&#x27;);p2.setName(&#x27;p2&#x27;);//p1.setName.apply(p2,[&#x27;c&#x27;]);p1.setName.call(p2,&#x27;c&#x27;);console.log(p2.name); //&#x27;c&#x27; å½“å¯¹è±¡p1ä½¿ç”¨applyå‡½æ•°åï¼Œp1å¯¹è±¡ä¸­çš„thiså°±æŒ‡å‘äº†å¯¹è±¡p2ï¼Œæ­¤æ—¶å¯¹è±¡p1çš„setNameå‡½æ•°çš„æ“ä½œå°±ä½œç”¨åœ¨äº†p2å¯¹è±¡ä¸Šã€‚","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"JS","slug":"JS","permalink":"https://xieyufei.com/tags/JS/"}]},{"title":"Windowsç¨‹åºå‘˜å¿…å¤‡å°å·¥å…·æ¨è","date":"2016-09-16T00:49:40.000Z","path":"2016/09/16/Windows-Tools-Recommend.html","text":"ä½œä¸ºä¸€ä¸ªç¨‹åºçŒ¿ï¼Œæœ‰ä¸€ä¸ªå¥½çš„æ’¸ç å·¥å…·è‚¯å®šä¼šè®©ä½ çš„æ•ˆç‡æˆå€çš„æå‡ã€‚è¿™ç¯‡æ–‡ç« æ€»ç»“äº†è‡ªç¬”è€…å·¥ä½œä»¥æ¥ç”¨è¿‡çš„æ¯”è¾ƒå¥½çš„æå‡æ•ˆç‡çš„Windowsä¸‹çš„å°å·¥å…·ï¼Œæ¨èç»™å¤§å®¶æ¥ç”¨(éå¹¿å‘Š)ï¼Œè¿™äº›å°å·¥å…·ä¸ä»…ä»…æ˜¯æ’¸ç çš„ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›è½¯ä»¶ã€‚ å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ â€œå·¥â€æ˜¯æŒ‡çš„å·¥ä½œï¼Œä¸€ä»¶äº‹æƒ…è¦æƒ³åšå¥½ï¼Œå¿…å®šå…ˆè¦è®©å·¥å…·â€œé”‹åˆ©â€ã€‚ æ’¸ç ç¥å™¨Sublime Textæ¨èæŒ‡æ•°â˜…â˜…â˜…â˜…â˜… Sublimeæ˜¯æˆ‘ç”¨è¿‡çš„æœ€å¥½çš„æ’¸ç ç¥å™¨ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚é‚£äº›æ’¸ç è¿˜åœ¨ç”¨ä»€ä¹ˆEditPlusã€DreamWeaverçš„ï¼Œå’ŒSublimeæ¯”ï¼Œç®€ç›´å°±æ˜¯æ‹¿çŸ³å™¨æ—¶ä»£çš„çŸ³å™¨æ­¦å™¨å’ŒäºŒåä¸€ä¸–çºªçš„å¤§è§„æ¨¡æ€ä¼¤æ€§æ­¦å™¨åšæ¯”è¾ƒã€‚Sublimeæ‹¥æœ‰æ¼‚äº®çš„ç”¨æˆ·ç•Œé¢å’Œæ— æ¯”å¼ºå¤§çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ä»£ç çš„ç¼©ç•¥å›¾ã€è‡ªå®šä¹‰æŒ‰é”®ç»‘å®šã€æ‹¼å†™æ£€æŸ¥ã€é¡¹ç›®åˆ‡æ¢ã€å¤šçª—å£ç­‰ç­‰ã€‚Sublimeçš„ç•Œé¢å¦‚ä¸‹ï¼š Sublimeè¿˜èƒ½æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•é«˜äº®ï¼Œæœ‰ä¼˜ç§€çš„ä»£ç è‡ªåŠ¨è¡¥å…¨çš„åŠŸèƒ½ã€‚è€Œä¸”Sublimeè¿˜æœ‰éå¸¸å¼ºå¤§çš„æ’ä»¶ç³»ç»Ÿä½œä¸ºå…¶åŠŸèƒ½çš„è¡¥å……ã€‚ä¸€äº›å¸¸è§å’Œå®ç”¨çš„æ’ä»¶å¦‚Emmet(å¿«é€Ÿç¼–å†™ HTML/CSS ä»£ç çš„æ–¹æ¡ˆ)ã€ColorPicker(é¢œè‰²é€‰æ‹©å™¨)ã€MarkdownPreview(markdowné¢„è§ˆ)ã€DocBlockr(ä»£ç æ³¨é‡Šè§„èŒƒ)ã€SideBar(ä¾§è¾¹æ å·¥å…·)ç­‰ç­‰ï¼Œå…¶ä»–ä¸€äº›å¼ºå¤§çš„æ’ä»¶ç­‰å¾…è¯»è€…å»ä½“éªŒã€‚ å°å­©æ¡Œé¢ä¾¿ç­¾æ¨èæŒ‡æ•°â˜…â˜…â˜…â˜†â˜† å¤§å®¶åœ¨ä¸Šå­¦çš„æ—¶å€™è‚¯å®šéƒ½ç”¨è¿‡ä¾¿ç­¾çº¸ä¸€ç±»çš„ä¸œè¥¿æ¥è®°ä¸€äº›ä¸Šè¯¾ç¬”è®°ä¹‹ç±»çš„ä¸œè¥¿ï¼Œç„¶åè´´åœ¨è¯¾æœ¬ä¸Šï¼Œæ•´ä¸ªè¯¾æœ¬å°±è´´çš„èŠ±èŠ±ç»¿ç»¿çš„ã€‚å°å­©æ¡Œé¢ä¾¿ç­¾å°±æ˜¯è¿™æ ·ä¸€ä¸ªåœ¨æ¡Œé¢ä¸Šè´´ä¸Šä¾¿ç­¾çš„å·¥å…·ã€‚æ­£å¦‚å®ƒçš„åå­—ä¸€æ ·ï¼šDeskNotes(æ¡Œé¢è´´çº¸)ã€‚ è¿™æ˜¯æˆ‘ä¸€ä¸ªå¥³åŒäº‹æ¨èæˆ‘ä½¿ç”¨çš„ï¼Œåˆšå¼€å§‹æˆ‘è¿˜å¾ˆä¸å±‘çš„ï¼Œæ²¡æ€ä¹ˆç”¨ã€‚åæ¥éšç€å·¥ä½œè¶Šæ¥è¶Šå¤šï¼Œæ¸æ¸çš„å‘ç°â€¦â€¦è„‘å­è¶Šæ¥è¶Šä¸å¤Ÿç”¨äº†ã€‚ç„¶åæˆ‘å°±æŠŠè¿™ä¸ªå·¥å…·ç”¨èµ·æ¥äº†ï¼Œç¡®å®èƒ½å¤Ÿæé†’æˆ‘å¾ˆå¤šäº‹æƒ…ã€‚å®ƒçš„ç•Œé¢å¦‚ä¸‹ï¼š é™¤äº†èƒ½å¤Ÿæ·»åŠ è´´çº¸å¤–ï¼Œå°å­©ä¾¿ç­¾è¿˜å¢åŠ äº†å®ç”¨çš„å°åŠŸèƒ½ï¼Œå¦‚é—¹é’Ÿæé†’å’Œå®šæ—¶å…³æœºã€‚ FastStone Captureæ¨èæŒ‡æ•°â˜…â˜…â˜†â˜†â˜† ç”±äºç¬”è€…ä»äº‹ç½‘é¡µçš„å·¥ä½œï¼Œç»å¸¸è¦å’Œå›¾ç‰‡æ‰“äº¤é“ï¼Œæ‰€ä»¥ç»å¸¸éœ€è¦æˆªå›¾ã€å–è‰²ã€æµ‹é‡åƒç´ ç­‰ç­‰ã€‚è¿™æ˜¯ç¬”è€…åœ¨ä¸Šå­¦æ—¶ä¸€ä¸ªè€å¸ˆæ¨èçš„è½¯ä»¶ï¼ŒåŸºæœ¬èƒ½å¤Ÿè§£å†³ä¸Šè¿°éœ€æ±‚ã€‚FastStone Captureçš„ç•Œé¢å¦‚ä¸‹ï¼š å¾ˆå¤šè¯»è€…å¯èƒ½ä¼šè¯´ï¼šé‚£ä½ ç”¨PhotoShopå•Šï¼ŒåŠŸèƒ½æ›´å¼ºæ‚ã€‚è¯šç„¶ï¼ŒPhotoShopåŠŸèƒ½ç¡®å®ç›¸å½“çš„å¼ºæ‚ï¼Œç¬”è€…çš„ç”µè„‘é‡Œä¹Ÿè£…äº†ï¼Œä½†æ˜¯ä½“ç§¯å¤§ï¼Œè€Œä¸”åˆååˆ†çš„åƒå†…å­˜ï¼Œæ¯æ¬¡æ‰“å¼€éƒ½è¦è€—ä¸å°‘æ—¶é—´(ä¼°è®¡æ˜¯ç”µè„‘å¤ªè€äº†)ã€‚ ç›¸æ¯”äºPhotoShopï¼ŒFastStone Captureå°±è½»å·§äº†ä¸å°‘ã€‚æ•´ä¸ªè½¯ä»¶çš„å¤§å°ä¸è¶…è¿‡3MBï¼Œé€šè¿‡ä»»åŠ¡ç®¡ç†å™¨çœ‹åˆ°æ‰€å ç”¨çš„å†…å­˜ä»…0.3MBï¼ŒåŸºæœ¬ä¸Šå¯ä»¥å¿½ç•¥ä¸è®¡ï¼Œæ¯æ¬¡æ‰“å¼€åŸºæœ¬ä¸Šéƒ½æ˜¯ç§’å¼€çš„ã€‚ å®ƒçš„ä¸»è¦åŠŸèƒ½æœ‰æˆªå›¾ã€å±å¹•å½•åƒã€å›¾åƒå¤„ç†(è£åˆ‡ï¼Œæ”¹å˜å›¾åƒæ•ˆæœç­‰)ã€‚é™„å¸¦çš„ç‰¹è‰²å°åŠŸèƒ½æœ‰å±å¹•æ”¾å¤§å™¨ã€å±å¹•å–è‰²å™¨ã€å±å¹•æ ‡å°ºã€å›¾åƒè½¬ä¸ºPDFï¼ŒåŠŸèƒ½å¯æ˜¯éå¸¸çš„å¼ºå¤§ã€‚ æœ‰é“äº‘ç¬”è®°æ¨èæŒ‡æ•°â˜…â˜…â˜†â˜†â˜† æœ‰çš„è¯»è€…å¯èƒ½ä¼šè¯´ï¼šæ¬¸ï¼Œä¸Šé¢ä¸æ˜¯æœ‰å°å­©æ¡Œé¢ä¾¿ç­¾å¯ä»¥ç”¨æ¥è®°äº‹äº†ä¹ˆï¼Œæ€ä¹ˆè¿˜è¦æœ‰é“äº‘ç¬”è®°å‘¢ã€‚è¯šç„¶ï¼Œä¾¿ç­¾æ˜¯å¯ä»¥è®°å½•ç”Ÿæ´»ä¸­çš„çäº‹ï¼Œä½†æ˜¯è¦æƒ³æŠŠè®°å½•çš„å†…å®¹ä»ä¸€å°ç”µè„‘è½¬ç§»åˆ°å¦ä¸€å°ç”µè„‘å´æ¯”è¾ƒè´¹æ—¶ã€‚ ç¬”è€…çš„æ‰€å¤„çš„ç¯å¢ƒå°±æ˜¯éœ€è¦åœ¨å¤šä¸ªåœ°ç‚¹è®°å½•ï¼Œæ¯”å¦‚ä¸Šç­çš„æ—¶å€™çœ‹åˆ°æœ‰ç”¨çš„ä¸œè¥¿éœ€è¦è®°å½•ä¸‹æ¥ï¼Œä¸‹ç­åœ¨å®¶é‡Œåšä¸€äº›å­¦ä¹ ç¬”è®°ä¹Ÿéœ€è¦è®°å½•ä¸‹æ¥ï¼Œè™½ç„¶å°å­©æ¡Œé¢ä¾¿ç­¾æœ‰å¼ºå¤§çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œä½†æ˜¯é¢‘ç¹çš„å¯¼å…¥å¯¼å‡ºæ“ä½œä¹Ÿæ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæˆ–è®¸æ˜¯ç¬”è€…æ¯”è¾ƒæ‡’ã€‚ è¿™ä¸ªæ—¶å€™ä½¿ç”¨æœ‰é“äº‘ç¬”è®°å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨â€œäº‘ä¸Šâ€è¿›è¡ŒåŠå…¬ï¼Œè€Œä¸”è¿˜æ”¯æŒAndroidã€iPhoneã€iPadã€Macã€WPå’Œwebç­‰å¹³å°ï¼Œè®©å·¥ä½œæ‘†è„±äº†å¹³å°å’Œè®¾å¤‡çš„é™åˆ¶ã€‚æœ‰é“äº‘ç¬”è®°è¿˜æ”¯æŒå¤šç§ç¼–è¾‘æ ¼å¼ï¼Œå¯ä»¥ç”¨å¯Œæ–‡æœ¬è¿›è¡Œç¼–è¾‘ä¹Ÿå¯ä»¥é‡‡ç”¨Markdownè¯­æ³•è¿›è¡Œç¼–è¾‘ï¼ŒMarkdownæ”¯æŒæœ‰é¢„è§ˆçš„åŠŸèƒ½ã€‚è¯»è€…è¿˜å¯ä»¥å°†å†™çš„æ–‡ç« æ¯”è¾ƒå¥½çš„æ–‡ç« åœ¨å¾®åšã€å¾®ä¿¡å’Œæ‰£æ‰£ä¸­è¿›è¡Œåˆ†äº«ã€‚ Beyond Compareæ¨èæŒ‡æ•°â˜…â˜…â˜…â˜…â˜† åœ¨å·¥ä½œå’Œç”Ÿæ´»ä¸­ï¼Œç¬”è€…ç»å¸¸ä¼šå°†æ–‡ä»¶æ·»åŠ ä¸Šç‰ˆæœ¬å·ä»¥åŒºåˆ†ï¼Œä½†æ˜¯æ—¶é—´ä¸€é•¿ï¼Œå°±ä¼šå¿˜è®°ä¸åŒçš„ç‰ˆæœ¬å·æ‰€æ›´æ”¹çš„å†…å®¹ï¼Œæ‰€ä»¥ç»å¸¸éœ€è¦ä¸€ä¸€åœ°æ¯”å¯¹ï¼Œè¿™å°±è®©ç¬”è€…å¾ˆè‹¦æ¼ã€‚æœ‰ä¸€å¤©åœ¨ä¸Šç½‘æ—¶æ— æ„ä¸­å‘ç°äº†è¿™æ¬¾â€œç¥å™¨â€ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒé•¿ä»€ä¹ˆæ ·ï¼š Beyond Compareä¸»è¦ç”¨é€”æ˜¯å¯¹æ¯”ä¸¤ä¸ªæ–‡ä»¶å¤¹æˆ–è€…æ–‡ä»¶çš„ä¸åŒï¼Œå¹¶å°†å·®å¼‚ é€šè¿‡é¢œè‰²çš„ä¸åŒä»¥æ ‡è¯†ã€‚å¯¹çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œå°±æ˜¯æ–‡ä»¶å¤¹çš„ä¸åŒã€‚å®ƒè¿˜å¯ä»¥æŒ‰ç…§ä½ çš„éœ€è¦è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”å¦‚éœ€è¦å¯¹æ¯”æ–‡ä»¶çš„ä¸åŒæˆ–è€…å¯¹æ¯”æ–‡ä»¶çš„ç›¸åŒï¼Œéƒ½å¯ä»¥æ˜¾ç¤ºã€‚ Everythingæ¨èæŒ‡æ•°â˜…â˜…â˜…â˜…â˜… ç”±äºç¬”è€…çš„æ¯å¤©å·¥ä½œéƒ½ä¼šæ”¶åˆ°å¾ˆå¤šä¸åŒæ–‡ä»¶ï¼Œä½†æ˜¯ç¬”è€…åˆä¸å–„äºå¯¹æ–‡ä»¶å½’ç±»å­˜æ”¾ï¼Œéƒ½æ˜¯æ‚ä¹±çš„æ”¾åœ¨æ¡Œé¢ï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™æ‰¾èµ·æ¥åˆç›¸å½“çš„éº»çƒ¦ã€‚è¿™æ—¶å€™Everythingè¿™æ¬¾æ–‡ä»¶å¿«é€Ÿæœç´¢è½¯ä»¶å°±æˆä¸ºæˆ‘ä»¬è¿™ç§â€œæ‡’äººâ€çš„ç¦éŸ³äº†ã€‚ä»–çš„ç•Œé¢å¦‚ä¸‹ï¼š å®ƒçš„ä½“ç§¯ä¹Ÿç›¸å½“çš„è½»å·§ï¼Œæ‰30å¤šMBï¼Œå’Œç°åœ¨åŠ¨è¾„å‡ ç™¾MBçš„è½¯ä»¶ç›¸æ¯”ç¡®å®å°äº†å¾ˆå¤šï¼›å®ƒçš„ç•Œé¢ä¹Ÿå¾ˆç®€æ´æ˜“ç”¨ï¼Œå¸¸ç”¨çš„å°±ä¸€ä¸ªè¾“å…¥æ¡†å’Œä¸‹é¢çš„æ–‡ä»¶åˆ—è¡¨ï¼Œéå¸¸æ–¹ä¾¿æ—¥å¸¸çš„ä½¿ç”¨ï¼›å ç”¨ç³»ç»Ÿèµ„æºæä½ï¼ŒEverythingæœç´¢åªåŸºäºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„åç§°ï¼Œæ‰€ä»¥å»ºç«‹èµ·æœç´¢æ•°æ®åº“éå¸¸çš„å¿«ï¼Œæœç´¢æ–‡ä»¶åŸºæœ¬ä¸Šéƒ½æ˜¯ç§’æœã€‚ Chromeæ¨èæŒ‡æ•°â˜…â˜…â˜…â˜…â˜… Chromeæ˜¯ç¬”è€…ç”¨è¿‡æœ€å¥½ç”¨çš„æµè§ˆå™¨ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚ä¸ç®¡æ˜¯æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ä½¿ç”¨è¿˜æ˜¯å¼€å‘ä¸­çš„æµ‹è¯•ç­‰ï¼ŒChromeéƒ½èƒ½å¤Ÿè½»æ¾èƒœä»»ã€‚ Chromeçš„ç‰¹ç‚¹æ˜¯ç®€æ´ã€å¿«é€Ÿã€‚å®ƒæ”¯æŒå¤šä¸ªæ ‡ç­¾è¿›è¡Œæµè§ˆï¼Œå³ä½¿æœ‰ä¸€ä¸ªæ ‡ç­¾å´©æºƒï¼Œå…¶ä»–æ ‡ç­¾é¡µä¸ä¼šå´©æºƒã€‚è€Œä¸”ï¼ŒChromeæ˜¯åŸºäºV8 JavaScriptå¼•æ“çš„ï¼Œé¡µé¢æ€§èƒ½æ›´åŠ ä¼˜å¼‚ã€‚ å¯¹äºåƒç¬”è€…ä¸€æ ·çš„ç½‘é¡µå¼€å‘è€…æ¥è¯´ï¼ŒChromeæ›´æ˜¯å¼€å‘ç½‘é¡µçš„â€œåˆ©å™¨â€ã€‚ä½¿ç”¨F12è°ƒå‡ºæ§åˆ¶å°ï¼Œåœ¨è¿™é‡Œä½ èƒ½çœ‹åˆ°Elements(é¡µé¢å…ƒç´ )ã€Console(ç½‘é¡µè¿è¡Œçš„æç¤ºæ¶ˆæ¯)ã€Sources(é¡µé¢è¿è¡Œæ‰€åŠ è½½çš„æºç )ã€Resources(é¡µé¢æ‰€éœ€è¦çš„æ–‡ä»¶ã€å­˜å‚¨çš„cookieå’Œsessionç­‰èµ„æº)ã€Network(å¯ä»¥çœ‹åˆ°ç½‘é¡µåŠ è½½è„šæœ¬æ ·å¼é¡µé¢çš„æ—¶é—´è¿˜æœ‰å¼‚æ­¥çš„èµ„æº)","tags":[{"name":"æ¨è","slug":"Recommend","permalink":"https://xieyufei.com/tags/Recommend/"}]},{"title":"Gitå‘½ä»¤å­¦ä¹ ï¼ˆä¸Šï¼‰","date":"2016-09-11T01:48:00.000Z","path":"2016/09/11/Git-Command-Start.html","text":"gitæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå¯ä»¥å¾ˆé«˜æ•ˆçš„å¤„ç†ä¸åŒè§„æ¨¡çš„é¡¹ç›®çš„ç‰ˆæœ¬ç®¡ç†ã€‚gitçš„å‘½ä»¤æ¯”è¾ƒå¤šï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ä¸»è¦ä»‹ç»äº†å„ç§gitå‘½ä»¤çš„åŸºæœ¬æ“ä½œã€‚æœ¬æ–‡æ¯”è¾ƒåŸºç¡€ï¼Œé€‚åˆå…¥é—¨ã€‚ 1. åˆ›å»ºç‰ˆæœ¬åº“åˆ›å»ºç›®å½•12mkdir examplecd example å°†è¿™ä¸ªç›®å½•å˜æˆç‰ˆæœ¬åº“1git init ç›®å½•ä¸‹å¤šä¸€ä¸ª.gitç›®å½•ï¼Œç”¨æ¥è·Ÿè¸ªç®¡ç†ç‰ˆæœ¬åº“ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠçº¿ä¸Šçš„é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ 1git clone [url] 2.å°†æ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“è¿½è¸ªæ–‡ä»¶1git add [filename] æˆ–è€…ä¸€æ¬¡æ€§æ·»åŠ æ‰€æœ‰æœªè¿½è¸ªçš„æ–‡ä»¶ 1git add . æäº¤åˆ°ä»“åº“1git commit -m &quot;[you description]&quot; 3.æŸ¥çœ‹å½“å‰ä»“åº“çš„çŠ¶æ€1git status è¿™ä¸ªå‘½ä»¤ç”¨æ¥æŸ¥çœ‹ä»“åº“çš„è¯¦ç»†çŠ¶æ€ï¼Œæ·»åŠ -sæŸ¥çœ‹ç®€è¦çš„çŠ¶æ€(sè¡¨ç¤ºshort) 1git status -s ç®€è¦çŠ¶æ€ä¸‹å‰é¢çš„ç¬¦å·ä»£è¡¨çš„æ„æ€ï¼š ?? è¡¨ç¤ºæ·»åŠ æ–‡ä»¶åè€Œæœªè¿½è¸ªçš„æ–‡ä»¶ M è¡¨ç¤ºä¿®æ”¹æ–‡ä»¶(Modify) A è¡¨ç¤ºæ·»åŠ æ–‡ä»¶åè¿½è¸ªäº†è¯¥æ–‡ä»¶(Add) D è¡¨ç¤ºåˆ é™¤æ–‡ä»¶(Delete) ç®€è¦çŠ¶æ€ä¸‹é¢œè‰²çš„ä¸åŒä¹Ÿæœ‰åŒºåˆ«ã€‚å¦‚æœæ˜¯çº¢è‰²ï¼Œåˆ™è¡¨ç¤ºè¯¥æ–‡ä»¶ä¿®æ”¹åæ²¡æœ‰è¿½è¸ªï¼›æ˜¯ç»¿è‰²åˆ™è¡¨ç¤ºä¿®æ”¹åè¿½è¸ªäº†æ”¹æ–‡ä»¶ã€‚ 4.å¯¹æ¯”æ–‡ä»¶å·®å¼‚ git diff(difference)æ­¤å‘½ä»¤æ¯”è¾ƒçš„æ˜¯å·¥ä½œç›®å½•ä¸­å½“å‰æ–‡ä»¶å’Œæš‚å­˜åŒºåŸŸå¿«ç…§ä¹‹é—´çš„å·®å¼‚,ä¹Ÿå°±æ˜¯ä¿®æ”¹ä¹‹åè¿˜æ²¡æœ‰æš‚å­˜èµ·æ¥çš„å˜åŒ–å†…å®¹ 1git diff å¦‚æœä½¿ç”¨addå‘½ä»¤è¿½è¸ªè¯¥æ–‡ä»¶åï¼Œdiffå‘½ä»¤å¤±æ•ˆã€‚ 5.æ˜¾ç¤ºæäº¤çš„æ—¥å¿—1git log logå‘½ä»¤ç”¨äºæ˜¾ç¤ºä»æœ€è¿‘åˆ°ä»¥å‰çš„æäº¤æ—¥å¿—ï¼Œcommitåé¢æ˜¾ç¤ºçš„ä¸€é•¿ä¸²å­—ç¬¦æ•°å­—æ˜¯è¯¥æ¬¡æäº¤æ‰€å¯¹åº”çš„ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡éƒ½ä¸ä¼šé‡å¤çš„ã€‚logå‘½ä»¤æ˜¾ç¤ºçš„ä¿¡æ¯æ¯”è¾ƒå¤šï¼Œå¯ä»¥åŠ ä¸Š â€“pretty=oneline å‚æ•° 1git log --pretty=oneline åœ¨ä¸‹é¢çš„ç‰ˆæœ¬å›é€€ä¸­éœ€è¦ç”¨åˆ°æäº¤æ—¥å¿—çš„ç‰ˆæœ¬å·ï¼Œè¿™æ—¶å€™å°±éœ€è¦å¤åˆ¶è¿™ä¸ªç‰ˆæœ¬å·ã€‚åœ¨windowsä¸‹å¤åˆ¶gitçª—å£ä¸­çš„å†…å®¹çš„å¿«æ·é”®æ˜¯Ctrl+Insertï¼Œç²˜è´´æ˜¯Insert 6.ç‰ˆæœ¬å›é€€1git reset --hard [LogId] resetå‘½ä»¤ç”¨äºæ§åˆ¶ç‰ˆæœ¬å›é€€åˆ°ä¹‹å‰æäº¤æ—¶çš„çŠ¶æ€ã€‚è¿™è¾¹çš„LogIdå°±æ˜¯ä¸Šä¸€èŠ‚ä¸­å¤åˆ¶å‡ºæ¥çš„ç‰ˆæœ¬å·ã€‚ 7.æ’¤é”€ä¿®æ”¹1git checkout -- [filename] checkoutå‘½ä»¤è®©ä½ åœ¨å·¥ä½œåŒºåšçš„ä¿®æ”¹å…¨éƒ¨æ’¤é”€ï¼Œå›åˆ°ä¸Šä¸€æ¬¡commitæ—¶çš„çŠ¶æ€ã€‚ 8.åˆ é™¤æ–‡ä»¶ å¦‚æœä½ åœ¨å·¥ä½œåŒºåˆ é™¤äº†ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆstatuså°±ä¼šæé†’ä½ å·¥ä½œåŒºå’Œæš‚å­˜åŒºä¸ä¸€è‡´ã€‚è¿™æ—¶å€™ä½ æœ‰ä¸¤ç§é€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯git rmå‘½ä»¤ç¡®è®¤åˆ é™¤ï¼Œ 1git rm [filename] è¿™ä¸ªå‘½ä»¤ç›¸å½“äºåŒæ—¶è¿›è¡Œäº†åˆ é™¤å‘½ä»¤å’Œè¿½è¸ªæ–‡ä»¶å‘½ä»¤ï¼Œå…¶ç­‰ä»·å‘½ä»¤å¦‚ä¸‹ï¼š 12rm [filename]git add [filename] å¦ä¸€ä¸ªæ˜¯é€šè¿‡checkoutå‘½ä»¤æ‰¾å›åˆ é™¤çš„æ–‡ä»¶ 1git checkout -- [filename]","tags":[{"name":"é¢è¯•","slug":"Interview","permalink":"https://xieyufei.com/tags/Interview/"},{"name":"git","slug":"git","permalink":"https://xieyufei.com/tags/git/"}]},{"title":"CraftyJsåˆæ¢","date":"2016-07-08T14:00:00.000Z","path":"2016/07/08/CraftyJs-Start.html","text":"å‰ä¸ä¹…å¬äº†ä¸€è¶Ÿåˆ†äº«è¯¾ï¼Œåˆ†äº«è¯¾çš„ä¸»é¢˜æ˜¯JSæ¸¸æˆçš„åˆ¶ä½œï¼Œä½†æ˜¯å¦‚æœæ˜¯è‡ªå·±å†™æ¸¸æˆæ¯”è¾ƒçš„ç¹çï¼Œå¦‚æœèƒ½åº”ç”¨ä¸€ä¸ªæ¸¸æˆå¼•æ“ï¼Œå°±èƒ½å¤§å¤§çš„ç®€åŒ–æ¸¸æˆçš„å¼€å‘é€Ÿåº¦å’Œå¼€å‘æ•ˆç‡ï¼Œäºæ˜¯æˆ‘åœ¨ç½‘ä¸Šå‚è€ƒäº†å‡ ä¸ªæ¸¸æˆå¼•æ“ï¼Œæ‰¾åˆ°äº†CraftyJsè¿™ä¸ªæ¸¸æˆå¼•æ“è¿˜æ˜¯æŒºä¸é”™çš„ï¼Œä½†æ˜¯è‹¦äºç½‘ä¸Šçš„æ•™ç¨‹ä¸æ˜¯å¾ˆå…¨é¢ï¼Œæ‰€ä»¥ä»Šå¤©å°±å¼€ä¸ªå‘ï¼Œå†™ä¸ªå…¥é—¨çº§çš„æ•™ç¨‹ï¼Œä»…ä¾›å‚è€ƒã€‚ åˆå§‹åŒ– é¦–å…ˆä»å®˜ç½‘ä¸Šä¸‹è½½CraftyJsçš„è„šæœ¬å¼•ç”¨åˆ°é¡¹ç›®ä¸­æ¥ã€‚ç„¶åå°±å¯ä»¥å¼€å§‹å†™æˆ‘ä»¬è‡ªå·±çš„ç¨‹åºäº†ã€‚ 1CraftyJs.init(this.config.width,this.config.height); è¿™æ®µä»£ç ç”¨äºåˆå§‹åŒ–æ•´ä¸ªstageï¼Œç”¨å®˜æ–¹çš„è¯æ¥è¯´å°±æ˜¯èˆå°ï¼Œæ‰€æœ‰çš„å…ƒç´ å°†åœ¨è¿™æ•´ä¸ªèˆå°é‡Œæ´»åŠ¨ã€‚è¿™ä¸ªèˆå°çš„å®½åº¦æ˜¯this.config.width(px)ï¼Œé«˜åº¦æ˜¯this.config.height(px)ã€‚å¦‚æœæœ‰å…ƒç´ è¶…å‡ºäº†èˆå°çš„èŒƒå›´ï¼Œè¿™ä¸ªå…ƒç´ å°†è¢«é®ä½ï¼Œå› ä¸ºæ•´ä¸ªèˆå°è®¾ç½®äº†æ ·å¼overflow:hiddenå°†è¶…å‡ºçš„å…ƒç´ éšè—æ‰ã€‚ 1Crafty.background(&quot;#f0f0f0&quot;); ä½ è¿˜å¯ä»¥é€šè¿‡background()æ–¹æ³•ç»™æ•´ä¸ªèˆå°è®¾ç½®èƒŒæ™¯é¢œè‰² æ”¾ç½®åœºæ™¯ å½“æ•´ä¸ªèˆå°åˆå§‹åŒ–åå°±å¯ä»¥ç©æ¸¸æˆäº†å§ï¼Ÿä¸ï¼ä½ å»å‰§é™¢çœ‹æˆä¸€å…¥åº§æ¼”å‘˜å°±ç»™ä½ æ¼”æˆä¹ˆï¼Œå½“ç„¶ä¸æ˜¯ï¼Œè¿˜éœ€è¦ä¸€äº›åœºæ™¯çš„å¸¦å…¥å’Œåˆ‡æ¢ã€‚è¿™äº›åœºæ™¯æ¯”å¦‚åŠ è½½åŠ¨ç”»ã€èœå•é€‰é¡¹ç­‰ä¸€ç³»åˆ—ã€‚ 1234567891011Crafty.defineScene(&quot;loading&quot;, function() &#123; Crafty.background(&quot;#000&quot;); Crafty.e(&quot;2D, DOM, Text&quot;).attr(&#123; w: 100, h: 20, x: 150, y: 120 &#125;).text(&quot;Loading&quot;).css(&#123; &quot;text-align&quot;: &quot;center&quot; &#125;).textColor(&quot;#FFFFFF&quot;);&#125;); æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Crafty.defineScene()æ–¹æ³•æ¥å®šä¹‰ä¸€ä¸ªåœºæ™¯ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå«loadingçš„åœºæ™¯ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€è¡Œâ€Loadingâ€çš„å­—ã€‚ä½†æ˜¯å®šä¹‰å¥½äº†åœºæ™¯å¹¶æ²¡æœ‰æ˜¾ç¤ºåœ¨èˆå°ä¸Šï¼Œå› ä¸ºè¿™ä¸ªåœºæ™¯å¹¶æ²¡æœ‰è¢«è°ƒç”¨åˆ°ã€‚ 1Crafty.enterScene(&quot;loading&quot;); é€šè¿‡enterScene()è¿™ä¸ªæ–¹æ³•æ¥å±•ç¤ºåˆšæ‰æˆ‘ä»¬å®šä¹‰å¥½åœºæ™¯ï¼Œä½ ä¼šåœ¨èˆå°ä¸Šçœ‹åˆ°è¿™ä¸ªåœºæ™¯ã€‚è¿™ä¸ªå±•ç¤ºèˆå°çš„æ–¹æ³•å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¢«è°ƒç”¨ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•ä¼šæ¸…é™¤èˆå°ä¸Šæ‰€æœ‰çš„å…ƒç´ ï¼Œé™¤äº†é‚£äº›æœ‰â€Persistâ€ç»„ä»¶çš„å…ƒç´ ï¼ˆç»„ä»¶è¿™ä¸€åè¯ä¸‹é¢ä¼šè§£é‡Šåˆ°ï¼‰ã€‚ å®ä½“/ç»„ä»¶ç³»ç»Ÿ ç°åœ¨åˆ°äº†CraftyJSæœ€é‡è¦çš„éƒ¨åˆ†æ¥äº†ï¼Œå°±æ˜¯CraftyJSç‹¬ç‰¹çš„å®ä½“/ç»„ä»¶ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿæœ‰ç‚¹é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ„æ€ã€‚æ•´ä¸ªç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ã€‚ ç»„ä»¶ç³»ç»Ÿ æ‰€è°“çš„ç»„ä»¶ï¼Œæœ‰ç‚¹ç±»ä¼¼JAVAä¸­çš„å¯¹è±¡ï¼ˆä¸æ˜¯ç°å®é‡Œçš„å¯¹è±¡ï¼‰ï¼Œçœ‹ä¸è§æ‘¸ä¸ç€ï¼Œæ˜¯å¯¹å®ä½“çš„æŠ½è±¡ã€‚æ¯ä¸ªç»„ä»¶é‡Œå°è£…äº†å¯¹åº”çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨å®ä½“ä¸­ç›´æ¥è°ƒç”¨ã€‚CraftyJSä¸­æœ‰å¾ˆå¤šå·²ç»è¢«é¢„å…ˆå®šä¹‰å¥½çš„ç»„ä»¶å¯ä»¥ç›´æ¥æ‹¿æ¥ä½¿ç”¨ï¼Œè€Œä¸”ç»„ä»¶å¯ä»¥è¢«é‡å¤åœ°ç»§æ‰¿ã€‚ å®ä½“ç³»ç»Ÿ å®ä½“æ˜¯çœŸæ­£çœ‹å¾—è§çš„å…ƒç´ ï¼Œæ˜¯å¯¹ç»„ä»¶çš„â€œå®ä¾‹åŒ–â€ã€‚ä¸€ä¸ªå•ä¸€çš„å®ä½“èƒ½å¤Ÿç»§æ‰¿å¤šä¸ªå®ä½“ã€‚ 1var square = Crafty.e(&#x27;2D, DOM, Color&#x27;); è¿™æ ·å°±é€šè¿‡e()æ–¹æ³•å®šä¹‰äº†å‡ ä¸ªå«â€squareâ€çš„å®ä½“ã€‚è¿™ä¸ªå®ä½“ç»§æ‰¿äº†ä¸‰ä¸ªç»„ä»¶â€2Dâ€ã€â€DOMâ€å’Œâ€Colorâ€ï¼Œè¿™ä¸‰ä¸ªç»„ä»¶é¢„å…ˆåœ¨CraftyJSä¸­å°±å·²ç»è¢«å®šä¹‰å¥½äº†ã€‚å¦‚æœä½ è§‰å¾—å•å•ä½¿ç”¨è¿™ä¸‰ä¸ªç»„ä»¶è¿˜ä¸å¤Ÿï¼Œä½ å¯ä»¥åç»­å¾€â€squareâ€è¿™ä¸ªå®ä½“ä¸­å†æ·»åŠ ç»„ä»¶ã€‚ 1square.addComponent(&quot;Text&quot;); é€šè¿‡addComponent()æ–¹æ³•å‘å®ä½“ä¸­åŠ å…¥â€Textâ€ç»„ä»¶ï¼Œè¿™ä¸ªæ–¹æ³•æ”¯æŒä¸€æ¬¡æ·»åŠ å¤šä¸ªç»„ä»¶ã€‚ 1square.addComponent(&quot;Text,Mouse&quot;);//è¿™æ˜¯å¯ä»¥çš„ ä½ è¿˜å¯ä»¥é€šè¿‡has()æ–¹æ³•åˆ¤æ–­æŸä¸ªå®ä½“ä¸­æ˜¯å¦å«æœ‰æŸä¸ªç»„ä»¶ 1square.has(&quot;Mouse&quot;); è¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªbooleanç±»å‹çš„å€¼ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªæ–¹æ³•ä¸€æ¬¡æ€§åªèƒ½åˆ¤æ–­ä¸€ä¸ªç»„ä»¶å­˜åœ¨ï¼Œå¹¶ä¸æ”¯æŒåŒæ—¶åˆ¤å®šå¤šä¸ªç»„ä»¶æ¯”å¦‚ï¼š 1square.has(&quot;2D,DOM&quot;);//è¿™æ˜¯é”™è¯¯çš„ å¦‚æœä½ å¯¹æŸä¸ªç»„ä»¶ä¸æ»¡æ„ï¼Œä½ è¿˜å¯ä»¥æŠŠå®ƒåˆ æ‰ï¼Œè¿™ä¸ªæ–¹æ³•ä¹Ÿä¸æ”¯æŒä¼ å…¥ä¸¤ä¸ªä»¥ä¸Šçš„ç»„ä»¶åç§° 1square.removeComponent(&quot;2D&quot;); å¸¸ç”¨çš„ç»„ä»¶ã€å±æ€§å’Œæ–¹æ³• ä¸€äº›å¸¸ç”¨çš„ç»„ä»¶æ˜¯CratyJså¸®æˆ‘ä»¬å®šä¹‰å¥½äº†ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ã€‚ â€œ2Dâ€ç»„ä»¶ 2Dç»„ä»¶æ˜¯CraftyJSé¢„å…ˆç»™æˆ‘ä»¬å®šä¹‰å¥½çš„ä¸€ä¸ªç»„ä»¶ï¼Œæ˜¯æœ€å¸¸ç”¨çš„ç»„ä»¶ä¹‹ä¸€ã€‚ä»–æä¾›äº†ä¸€ä¸ªattr()çš„æ–¹æ³•è®©æˆ‘ä»¬æ¥è®¾ç½®å®ä½“çš„å±æ€§å€¼ã€‚ 123456789square.attr(&#123; x: 150, y: 150, w: 100, h: 100, alpha: 0.5, rotation: 45, visible:true &#125;); è¿™é‡Œçš„xå’Œyæ˜¯å®ä½“ç›¸å¯¹äºèˆå°å·¦ä¸Šè§’çš„ä½ç½®ï¼Œå•ä½éƒ½ä¸ºåƒç´ (px)ã€‚wå’Œhæ˜¯å®ä½“çš„å®½åº¦å’Œé«˜åº¦ï¼Œå•ä½ä¹Ÿæ˜¯åƒç´ (px)ã€‚alphaæ˜¯å®ä½“çš„é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´æ˜¯0åˆ°1ã€‚visibleä»£è¡¨å®ä½“æ˜¯å¦å¯è§ï¼Œåªèƒ½æ¥å—booleanç±»å‹çš„å‚æ•°ã€‚xã€yã€wã€hå¦‚æœä¸è®¾ç½®å€¼ï¼Œé»˜è®¤ä¸º0ã€‚ â€œTextâ€ç»„ä»¶ Textç»„ä»¶æœ‰å››ä¸ªæ–¹æ³•å¯ä»¥ä½¿ç”¨ï¼Œåˆ†åˆ«æ˜¯text()ã€textColor()ã€textFont()å’Œunselectable()ã€‚text()æ–¹æ³•ç”¨äºè®¾ç½®ç»„ä»¶é‡Œé¢çš„å†…å®¹ã€‚ 1Crafty.e(&quot;2D,DOM,Text&quot;).text(&quot;hello world!&quot;); text()æ–¹æ³•æ”¯æŒä¼ å…¥ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•å¿…é¡»è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹çš„å‚æ•°ï¼Œå¦åˆ™è¿™ä¸ªç»„ä»¶çš„å†…å®¹å°†ä¼šæ˜¾ç¤ºundefined(æœªå®šä¹‰)ã€‚ 123Crafty.e(&quot;2D, Canvas, Text&quot;).text(function () &#123; return &quot;hello world!&quot;;&#125;); textColor()æ–¹æ³•ç”¨æ¥è®¾ç½®ç»„ä»¶æ–‡å­—çš„é¢œè‰²ï¼Œä½ å¯ä»¥ä½¿ç”¨HEXã€rgbæˆ–è€…rgbaçš„æ–¹å¼æ¥å®šä¹‰é¢œè‰²ã€‚ 123Crafty.e(&quot;2D, DOM, Text&quot;).textColor(&#x27;#FF0000&#x27;) .textColor(&#x27;rgba(0, 255, 0, 0.5)&#x27;) .textColor(&#x27;white&#x27;); textFont()æ–¹æ³•ç”¨æ¥è®¾ç½®æ–‡å­—çš„å­—ä½“ã€‚å¦‚æœæœ‰å¤šä¸ªå­—ä½“çš„å±æ€§ï¼Œä¼ å…¥ä¸€ä¸ªå¯¹è±¡çš„æ–¹å¼è¿›è¡Œè®¾ç½®ï¼ŒCraftyæ”¯æŒè®¾ç½®çš„å±æ€§æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š 1Crafty.e(&quot;2D, DOM, Text&quot;).textFont(&#123; &#x27;type&#x27;: &#x27;italic&#x27;, &#x27;family&#x27;: &#x27;Arial&#x27; , &#x27;size&#x27;:&#x27;20px&#x27;, &#x27;weight&#x27;:&#x27;bold&#x27;, &#x27;lineHeight&#x27;:&#x27;30px&#x27;&#125;); unselectable()æ–¹æ³•è®¾ç½®Textç»„ä»¶ä¸­çš„å†…å®¹ä¸èƒ½è¢«é«˜äº®é€‰ä¸­ã€‚Canvasçš„Textæ˜¯ä¸èƒ½è¢«é«˜äº®é€‰ä¸­çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•åªå¯¹DOMçš„Textç»„ä»¶æœ‰æ•ˆã€‚ 1Crafty.e(&quot;2D, DOM, Text&quot;).text(&#x27;This text cannot be highlighted!&#x27;).unselectable();","tags":[{"name":"å‰ç«¯","slug":"FrontEnd","permalink":"https://xieyufei.com/tags/FrontEnd/"},{"name":"æ¸¸æˆå¼•æ“","slug":"æ¸¸æˆå¼•æ“","permalink":"https://xieyufei.com/tags/%E6%B8%B8%E6%88%8F%E5%BC%95%E6%93%8E/"},{"name":"CraftyJs","slug":"CraftyJs","permalink":"https://xieyufei.com/tags/CraftyJs/"}]},{"title":"JAVAå¤„ç†è·¨åŸŸé—®é¢˜","date":"2016-05-28T05:58:00.000Z","path":"2016/05/28/Java-Ajax.html","text":"åœ¨å†™å‰ç«¯è„šæœ¬çš„æ—¶å€™æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å‘é€æ•°æ®åˆ°åå°çš„æƒ…å†µï¼Œä½†æ˜¯ç”±äºæµè§ˆå™¨çš„é™åˆ¶ï¼Œä¸åŒåŸŸåä¹‹é—´çš„æ•°æ®æ˜¯ä¸èƒ½äº’ç›¸è®¿é—®çš„ï¼Œé‚£å‰ç«¯æ€ä¹ˆå’Œåç«¯å¦‚ä½•è¿›è¡Œæ•°æ®ä¹‹é—´çš„äº¤æ¢å‘¢ï¼Ÿ JavaScriptç”±äºå®‰å…¨æ€§æ–¹é¢çš„è€ƒè™‘ï¼Œä¸å…è®¸é¡µé¢è·¨åŸŸè°ƒç”¨å…¶ä»–é¡µé¢çš„å¯¹è±¡ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ˜¯è·¨åŸŸé—®é¢˜ï¼Ÿç­”ï¼šè¿™æ˜¯ç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œç°åœ¨æ‰€æœ‰æ”¯æŒJavaScriptçš„æµè§ˆå™¨éƒ½ä½¿ç”¨äº†è¿™ä¸ªç­–ç•¥ã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯åŒæºå‘¢ï¼Ÿæ‰€è°“çš„åŒæºæ˜¯æŒ‡ä¸‰ä¸ªæ–¹é¢â€œç›¸åŒâ€ï¼š åŸŸåç›¸åŒ åè®®ç›¸åŒ ç«¯å£ç›¸åŒ ä¸‹é¢å°±ä¸¾å‡ ä¸ªä¾‹å­æ¥å¸®åŠ©æ›´å¥½çš„ç†è§£åŒæºç­–ç•¥ã€‚ URL è¯´æ˜ æ˜¯å¦å…è®¸é€šä¿¡ http://www.a.com/a.js http://www.a.com/b.js åŒä¸€åŸŸå å…è®¸ http://www.a.com/a.js http://www.b.com/a.js ä¸åŒåŸŸå ä¸å…è®¸ http://www.a.com:8000/a.jshttp://www.a.com/b.js åŒä¸€åŸŸåä¸åŒç«¯å£ ä¸å…è®¸ https://www.a.com/a.js http://www.a.com/b.js åŒä¸€åŸŸåä¸åŒåè®® ä¸å…è®¸ åœ¨JAVAä¸­å¤„ç†è·¨åŸŸé—®é¢˜ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹ä¸¤ç§å¸¸ç”¨çš„è§£å†³æ–¹æ³•ã€‚ ç¬¬ä¸€ç§è§£å†³æ–¹æ³• åå°ä»£ç åœ¨è¢«è¯·æ±‚çš„Servletä¸­æ·»åŠ Headerè®¾ç½®ï¼š 12345678910111213response.setHeader(&quot;Access-Control-Allow-Origin&quot;, &quot;*&quot;);PrintWriter out =null;try&#123; out = response.getWriter();&#125; catch (IOException e)&#123; // TODO Auto-generated catch block e.printStackTrace();&#125;out.print(&quot;&#123;&#x27;status&#x27;:&#x27;ok&#x27;&#125;&quot;);out.flush();out.close(); Access-Control-Allow-Originè¿™ä¸ªHeaderåœ¨W3Cæ ‡å‡†é‡Œç”¨æ¥æ£€æŸ¥è¯¥è·¨åŸŸè¯·æ±‚æ˜¯å¦å¯ä»¥è¢«é€šè¿‡ï¼Œå¦‚æœå€¼ä¸º*åˆ™è¡¨æ˜å½“å‰é¡µé¢å¯ä»¥è·¨åŸŸè®¿é—®ã€‚é»˜è®¤çš„æƒ…å†µä¸‹æ˜¯ä¸å…è®¸çš„ã€‚ åœ¨å‰ç«¯JSä¸­éœ€è¦å‘Servletå‘å‡ºè¯·æ±‚ï¼Œè¯·æ±‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910$.ajax(&#123; url: &quot;your url&quot;, type:&quot;get or post&quot;, dataType:&quot;json&quot;, data:&#123; .... &#125;, success:function(data)&#123; ... &#125; ç¬¬äºŒç§è§£å†³æ–¹æ³• é€šè¿‡jsonpè·¨åŸŸè¯·æ±‚çš„æ–¹å¼ã€‚JSONPå’ŒJSONè™½ç„¶åªæœ‰ä¸€ä¸ªå­—æ¯çš„åŒºåˆ«ï¼Œä½†æ˜¯ä»–ä»¬å®Œå…¨å°±æ˜¯ä¸¤å›äº‹ï¼Œå¾ˆå¤šäººå¾ˆå®¹æ˜“æŠŠä»–ä»¬ææ··ã€‚JSONæ˜¯ä¸€ç§æ•°æ®äº¤æ¢çš„æ ¼å¼ï¼Œè€ŒJSONPåˆ™æ˜¯ä¸€ç§éå®˜æ–¹è·¨åŸŸæ•°æ®äº¤äº’åè®®ã€‚ é¦–å…ˆæ¥è¯´ä¸€ä¸‹å‰ç«¯JSæ˜¯æ€ä¹ˆå‘é€è¯·æ±‚ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516$.ajax(&#123; url:&quot;your url&quot;, type:&quot;get or post&quot;, async:false, dataType : &quot;jsonp&quot;, //æœåŠ¡ç«¯ç”¨äºæ¥æ”¶callbackè°ƒç”¨çš„functionåçš„å‚æ•° jsonp:&quot;callbackparam&quot;, //callbackçš„functionåç§° jsonpCallback:&quot;success_jsonpCallback&quot;, success:function(data)&#123; console.log(data); &#125;, error:function(data)&#123; console.log(data); &#125;&#125;); è¿™é‡Œçš„callbackparamå’Œsuccess_jsonpCallbackå¯ä»¥ç†è§£ä¸ºå‘é€çš„dataæ•°æ®çš„é”®å€¼å¯¹ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†æ˜¯callbackparaméœ€è¦å’Œåå°çº¦å®šå¥½å‚æ•°åç§°ï¼Œå› ä¸ºåå°éœ€è¦è·å–åˆ°è¿™ä¸ªå‚æ•°é‡Œé¢çš„å€¼ï¼ˆå³success_jsonpCallbackï¼‰ã€‚ ä¸‹é¢ï¼Œæœ€é‡è¦çš„æ¥äº†ï¼Œåå°æ€ä¹ˆæ ·è·å–å’Œè¿”å›æ•°æ®å‘¢ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤º: 1234567891011121314PrintWriter out =null;String callback=req.getParameter(&quot;callbackparam&quot;);String json=callback+&quot;(&#123;&#x27;status&#x27;:&#x27;ok&#x27;&#125;)&quot;;try&#123; out = resp.getWriter();&#125; catch (IOException e)&#123; // TODO Auto-generated catch block e.printStackTrace();&#125;out.print(json);out.flush();out.close(); é¦–å…ˆéœ€è¦è·å–å‚æ•°åä¸ºcallbackparamçš„å€¼ï¼Œè¿™é‡Œè·å–åˆ°çš„å€¼å°±æ˜¯â€œsuccess_jsonpCallbackâ€ã€‚ç„¶åå°†è¿™ä¸ªå€¼åŠ ä¸Šä¸€å¯¹å°æ‹¬å·ã€‚å°æ‹¬å·é‡Œæ”¾å…¥ä½ éœ€è¦è¿”å›çš„æ•°æ®å†…å®¹ï¼Œæ¯”å¦‚è¿™é‡Œæˆ‘è¿”å›ä¸€ä¸ªJSONå¯¹è±¡ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥è¿”å›å…¶ä»–å¯¹è±¡ï¼Œæ¯”å¦‚åªè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹æ•°æ®ä¹Ÿå¯ä»¥ã€‚æœ€åå‰ç«¯JSè¿”å›çš„æ•°æ®å°±æ˜¯è¿™æ ·çš„ï¼š 1success_jsonpCallback(&#123;&#x27;status&#x27;:&#x27;ok&#x27;&#125;) æµè§ˆå™¨ä¼šè‡ªåŠ¨è§£æä¸ºjsonå¯¹è±¡ï¼Œè¿™æ—¶å€™ä½ åªéœ€è¦åœ¨successå›è°ƒå‡½æ•°ä¸­ç›´æ¥ç”¨data.statuså°±å¯ä»¥äº†ã€‚","tags":[{"name":"Java","slug":"Java","permalink":"https://xieyufei.com/tags/Java/"},{"name":"å¼‚æ­¥è·¨åŸŸ","slug":"å¼‚æ­¥è·¨åŸŸ","permalink":"https://xieyufei.com/tags/%E5%BC%82%E6%AD%A5%E8%B7%A8%E5%9F%9F/"}]}]