

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.ico">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="　　路由是前端项目一个重要的组成部分，因为我们项目都是由多个页面组成，即使单页面项目也会有路由，多个页面之间跳转就是通过路由或者导航器来实现的。在RN 0.44之前的版本，我们可以直接使用官方提供的Navigator组件来实现跳转；从0.44版本开始，Navigator被官方从RN的核心组件库中剥离出来，主推的一个导航库就是React Navigation，它性能也很接近原生，我们今天就来学习下它">
  <meta name="author" content="Corner">
  <meta name="keywords" content="Corner">
  
  <title>深入学习React Native之路由导航 - 谢小飞的博客</title>

  <link  rel="stylesheet" href="https://xieyufei.com/npm/bootstrap/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://xieyufei.com/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://xieyufei.com/npm/highlight.js@10.7.2/styles/vs2015.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://xieyufei.com/npm/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"xieyufei.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":"466240fe55764d8ee20bd7f43c5e8b26","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":1260607518,"leancloud":{"app_id":null,"app_key":null,"server_url":null}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/title.js" ></script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 7.1.1"><link rel="alternate" href="/atom.xml" title="谢小飞的博客" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>谢小飞的博客</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-pen"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-friends"></i>
                友链
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" target="_blank" rel="noopener" href="https://gallery.xieyufei.com/">
                <i class="iconfont icon-link-fill"></i>
                创意
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/bookshelf/">
                <i class="iconfont icon-books"></i>
                书架
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('//xieyufei.com/blog/bg_small.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="深入学习React Native之路由导航">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2022-07-22 13:14" pubdate>
        2022年7月22日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.2k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      69
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      
<style>
  .prevent_reptile{
    display: none;
  }
</style>
<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">深入学习React Native之路由导航</h1>
            
            <div class="markdown-body">
              <p>　　路由是前端项目一个重要的组成部分，因为我们项目都是由多个页面组成，即使单页面项目也会有路由，多个页面之间跳转就是通过路由或者导航器来实现的。在RN 0.44之前的版本，我们可以直接使用官方提供的<code>Navigator</code>组件来实现跳转；从0.44版本开始，<code>Navigator</code>被官方从RN的核心组件库中剥离出来，主推的一个导航库就是<code>React Navigation</code>，它性能也很接近原生，我们今天就来学习下它的用法。</p>
<span id="more"></span>


<h1 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h1><p>　　<code>React Navigation</code>库每个版本的改动还是挺大的，比如3.x创建堆栈导航和创建选项卡导航都是直接在<code>react-navigation</code>库中导出create函数，而4.x中堆栈路由是从<code>react-navigation-stack</code>这个库导出，5.x版本库名又改成了<code>@react-navigation/stack</code>，6.x版本又双叒叕改成<code>@react-navigation/native-stack</code>，因此对新手及其不友好，很容易让人看了头大。</p>
<p><img src="/images/React-Native-Router/silly.jpg" srcset="/img/loading.gif" lazyload alt="人都看傻了"></p>
<p>　　不过好在导航方式主要是三种：堆栈导航（StackNavigator）、选项卡导航（TabNavigator）和抽屉导航（DrawerNavigator），而且导航方式、传参都大差不差，因此本文主要以目前最新的6.x为例。</p>
<h2 id="堆栈导航"><a href="#堆栈导航" class="headerlink" title="堆栈导航"></a>堆栈导航</h2><p>　　堆栈导航是比较常见的导航方式，为应用程序在不同屏幕之间转换提供导航和管理的方式；其有些类似于web浏览器处理导航状态的方式。首先我们安装一些依赖：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment"># 安装导航的核心库</span><br>yarn add @react-navigation/native<br><br><span class="hljs-comment"># 安装导航的外部依赖库</span><br>yarn add react-native-screens react-native-safe-area-context<br><br><span class="hljs-comment"># 安装堆栈导航的主要库</span><br>yarn add @react-navigation/native-stack<br></code></pre></div></td></tr></table></figure>

<p>　　要在项目里使用导航，我们首先要在项目的根组件创建一个路由导航容器，将我们的路由都包裹（一般是在App.js中），有点类似于Vue的<code>&lt;router-view /&gt;</code>：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">NavigationContainer</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-navigation/native&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">NavigationContainer</span>&gt;</span></span><br><span class="language-xml">    &#123;/* 导航组件 */&#125;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">NavigationContainer</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>　　我们导出<code>createNativeStackNavigator</code>函数，用于配置堆栈路由的管理；它返回了包含两个组件的对象：Screen和Navigator，他们都是配置导航器所需的React组件，其中Screen组件是一个高阶组件，会增强props；在使用的页面中，会携带<code>navigation</code>对象和<code>route</code>对象，下面我们会介绍这两个对象的用法。</p>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p>　　我们新建一个<code>StackRouter.js</code>，将所有的堆栈导航配置统一在这个文件配置：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// StackRouter.js</span><br><span class="hljs-keyword">import</span> &#123;createNativeStackNavigator&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-navigation/native-stack&#x27;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Stack</span> = <span class="hljs-title function_">createNativeStackNavigator</span>();<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HomeScreen</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">alignItems:</span> &#x27;<span class="hljs-attr">center</span>&#x27;, <span class="hljs-attr">justifyContent:</span> &#x27;<span class="hljs-attr">center</span>&#x27; &#125;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Home Screen<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br>  );<br>&#125;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">StackRouter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Stack.Navigator</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Stack.Navigator</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>　　在根组件中引入我们的堆栈导航组件即可：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// App.js</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">StackRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./src/StackRouter&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">NavigationContainer</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">StackRouter</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">StackRouter</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">NavigationContainer</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>

<p><img src="/images/React-Native-Router/stack-router.png" srcset="/img/loading.gif" lazyload alt="堆栈导航"></p>
<p>　　我们的程序很多时候都不止一个页面，我们可以在堆栈导航中继续加入其他的列表页、详情页等等；<code>initialRouteName</code>配置初始化的路由，可以设置成非第一个Screen页面：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// StackRouter.js</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">StackRouter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Stack.Navigator</span> <span class="hljs-attr">initialRouteName</span>=<span class="hljs-string">&quot;Home&quot;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;List&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListScreen&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Detail&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">          <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;DetailScreen&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Stack.Navigator</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>


<p>　　我们可以在每个路由上通过<code>options</code>配置不同参数，比如标题、导航栏颜色等：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Screen</span><br>    name=<span class="hljs-string">&quot;Home&quot;</span><br>    component=&#123;<span class="hljs-title class_">HomeScreen</span>&#125;<br>    options=&#123;&#123;<br>        <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;首页&#x27;</span>,<br>        <span class="hljs-attr">headerStyle</span>: &#123;<br>            <span class="hljs-attr">height</span>: <span class="hljs-number">80</span>,<br>            <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#2196F3&#x27;</span>,<br>        &#125;,<br>    &#125;&#125;<br>/&gt;<br></code></pre></div></td></tr></table></figure>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>


<p>　　有时候，我们想要给一个页面传入额外的参数，我们可以把页面组件放到上下文中包裹，并传入props：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Screen</span> name=<span class="hljs-string">&quot;Home&quot;</span>&gt;<br>  &#123;<span class="hljs-function">(<span class="hljs-params">props</span>) =&gt;</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">HomeScreen</span> &#123;<span class="hljs-attr">...props</span>&#125; <span class="hljs-attr">extraData</span>=<span class="hljs-string">&#123;someData&#125;</span> /&gt;</span></span>&#125;<br>&lt;/<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Screen</span>&gt;<br></code></pre></div></td></tr></table></figure>

<p>　　上面的用法在配置同一个页面不同路径时会很有用；比如我们的新建和编辑页面可以做成一个页面，配置不同路由通过传入额外的参数对两个页面进行区分。</p>
<h3 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h3><p>　　在不同页面间，我们需要进行路由跳转；我们上面说过，在所有的页面组件中，都会携带一个<code>navigation</code>对象，它是react-navigation注入的路由对象，它上面有很多的函数，可以进行不同形式的跳转。</p>
<blockquote>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p>如果我们跳转到未定义的路由，在开发版本中会报错，而在生产环境中不会发生任何事，</p>
</blockquote>
<p>　　我们调用<code>navigation.navigate()</code>函数来跳转，直接传入<code>Stack.Navigator</code>中定义路由名name：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Button</span> <br>  onPress=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">navigation</span>.<span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;List&#x27;</span>)&#125; <br>  title=<span class="hljs-string">&quot;Go List&quot;</span>&gt;<br>&lt;/<span class="hljs-title class_">Button</span>&gt;<br></code></pre></div></td></tr></table></figure>

<p><img src="/images/React-Native-Router/navigate.gif" srcset="/img/loading.gif" lazyload alt="navigate跳转"></p>
<p>　　如果我们在List列表页也调用<code>navigate(&#39;List&#39;)</code>，我们发现不会产生任何的效果，因为我们已经在列表页面了。navigate的含义是跳到这个页面，有点类似vue-router的<code>router.replace</code>。</p>
<p>　　如果我们确实想要打开多个页面，可以将navigate改成push：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Button</span> <br>  onPress=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">navigation</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;List&#x27;</span>)&#125; <br>  title=<span class="hljs-string">&quot;Go List Again&quot;</span>&gt;<br>&lt;/<span class="hljs-title class_">Button</span>&gt;<br></code></pre></div></td></tr></table></figure>

<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<p><img src="/images/React-Native-Router/push.gif" srcset="/img/loading.gif" lazyload alt="push跳转"></p>
<p>　　每次我们调用<code>push</code>，都会在历史记录中新增一条记录，这也就是堆栈导航的由来；而调用<code>navigate</code>，它会尝试在现在的路由堆栈中查找是否有这个路由，没有的话才会新增。</p>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p>　　在堆栈导航的顶部有一个返回按钮，点击后可以返回上一个页面，我们也调用<code>navigation.goBack()</code>来触发返回：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Button</span> <br>    onPress=&#123;<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">navigation</span>.<span class="hljs-title function_">goBack</span>()&#125; <br>    title=<span class="hljs-string">&quot;Go Back&quot;</span>&gt;<br>&lt;/<span class="hljs-title class_">Button</span>&gt;<br></code></pre></div></td></tr></table></figure>


<p>　　有时候堆栈导航的层级很深，我们需要穿越好几个页面才能返回到第一个页面；在这种情况下如果我们明确的知道我们想要回到的是Home页，我们可以直接调用<code>navigation.navigate(&#39;Home&#39;)</code>，清除所有的路由并且回到Home。</p>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<p>　　另一种方式是调用<code>navigation.popToTop()</code>，这样将清除路由堆栈并回到堆栈的第一个页面。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ListScreen</span>(<span class="hljs-params">&#123;navigation&#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;flex:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">alignItems:</span> &#x27;<span class="hljs-attr">center</span>&#x27;, <span class="hljs-attr">justifyContent:</span> &#x27;<span class="hljs-attr">center</span>&#x27;&#125;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>List Screen<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> navigation.push(&#x27;List&#x27;)&#125;</span><br><span class="language-xml">        title=&quot;Push List&quot;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> navigation.navigate(&#x27;Home&#x27;)&#125;</span><br><span class="language-xml">        title=&quot;Go Home&quot;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> navigation.popToTop()&#125; title=&quot;Popup&quot;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>


<h3 id="传递参数"><a href="#传递参数" class="headerlink" title="传递参数"></a>传递参数</h3><p>　　我们已经创建了多个页面并且在页面之间进行跳转，我们还需要传递不同的参数；例如从列表页到详情页需要传id，我们将需要传递的数据作为navigate函数的第二个参数。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ListScreen</span>(<span class="hljs-params">&#123;navigation&#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Go to Details&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> &#123;</span><br><span class="language-xml">          navigation.navigate(&#x27;Details&#x27;, &#123;</span><br><span class="language-xml">            id: 86,</span><br><span class="language-xml">            otherParam: &#x27;anything you want here&#x27;,</span><br><span class="language-xml">          &#125;);</span><br><span class="language-xml">        &#125;&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>　　<code>route</code>对象是Screen组件增强的props，它里面包含一个属性params，就是用来接受传递过来的参数：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">DetailsScreen</span>(<span class="hljs-params">&#123;route, navigation&#125;</span>) &#123;<br>  <span class="hljs-keyword">const</span> &#123;id, otherParam&#125; = route.<span class="hljs-property">params</span>;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Details Screen<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>id: &#123;id&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>otherParam: &#123;otherParam&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>


<p>　　页面也能更新自己的参数，就像更新state状态一样；通过<code>navigation.setParams</code>进行更新：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">navigation.<span class="hljs-title function_">setParams</span>(&#123;<br>  <span class="hljs-attr">otherParam</span>: <span class="hljs-string">&#x27;someText&#x27;</span>,<br>&#125;);<br></code></pre></div></td></tr></table></figure>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>

<p>　　在传递参数时，虽然我们可以将整个数据传过去，例如下面的方式：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-comment">// 避免这样的写法</span><br>navigation.<span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;Detail&#x27;</span>, &#123;<br>  <span class="hljs-attr">user</span>: &#123;<br>    <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;18&#x27;</span>,<br>    <span class="hljs-attr">firstName</span>: <span class="hljs-string">&#x27;Jane&#x27;</span>,<br>    <span class="hljs-attr">lastName</span>: <span class="hljs-string">&#x27;Done&#x27;</span>,<br>    <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>,<br>  &#125;,<br>&#125;);<br></code></pre></div></td></tr></table></figure>

<p>　　我们接收的时候也看似很方便的可以通过<code>route.params.user</code>就能获取到数据；但是这是一种反模式，例如用户数据等，应该通过接口获取，或者放在全局的用户列表中，然后通过id进行获取。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">navigation.<span class="hljs-title function_">navigate</span>(<span class="hljs-string">&#x27;Profile&#x27;</span>, &#123; <span class="hljs-attr">userId</span>: <span class="hljs-string">&#x27;18&#x27;</span> &#125;);<br></code></pre></div></td></tr></table></figure>


<h3 id="导航栏配置"><a href="#导航栏配置" class="headerlink" title="导航栏配置"></a>导航栏配置</h3><p>　　我们在上面介绍了配置导航栏的标题，我们继续看下<code>options</code>还有哪些用法；它除了接收一个对象，还可以接收一个返回对象的函数；函数的方式可以接收navigation和route两个参数，这种方式会很有用，例如我们在设置导航栏的组件时，获取这两个参数进行跳转操作。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Navigator</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">options</span>=<span class="hljs-string">&#123;(&#123;navigation,</span> <span class="hljs-attr">route</span>&#125;) =&gt;</span> &#123;</span><br><span class="language-xml">      return &#123;</span><br><span class="language-xml">        headerTitle: () =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">            <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>标题：&#123;route.params.title&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">          <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">        ),</span><br><span class="language-xml">        headerRight: () =&gt; (</span><br><span class="language-xml">          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Go List&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">            <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> navigation.navigate(&#x27;List&#x27;)&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">        ),</span><br><span class="language-xml">      &#125;;</span><br><span class="language-xml">    &#125;&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Stack.Screen</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Navigator</span>&gt;<br></code></pre></div></td></tr></table></figure>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>

<p>　　<code>headerTitle</code>可以覆写标题组件，替换成我们自定义的；<code>headerRight</code>定义导航栏右侧的组件，可以是一些功能性的，比如设置、帮助等等，可能会涉及路由的跳转，因此我们可以将options设置成函数的形式。</p>
<p>　　我们可以调整导航栏标题的样式，通过下面三个参数：</p>
<ul>
<li>headerStyle：整个标题的样式，可以设置<code>backgroundColor</code>背景颜色。</li>
<li>headerTintColor：返回按钮和标题文字的颜色。</li>
<li>headerTitleStyle：标题文字的样式，可以设置<code>fontFamily</code>和<code>fontWeight</code>。</li>
</ul>
<p>　　我们肯定希望我们的App大部分的导航栏都是相同样式，有个别样式需要定制；我们将Options移动到Stack.Navigator的<code>screenOptions</code>上：</p>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Navigator</span><br>  screenOptions=&#123;&#123;<br>    <span class="hljs-attr">headerStyle</span>: &#123;<br>      <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#f4511e&#x27;</span>,<br>    &#125;,<br>    <span class="hljs-attr">headerTintColor</span>: <span class="hljs-string">&#x27;#fff&#x27;</span>,<br>    <span class="hljs-attr">headerTitleStyle</span>: &#123;<br>      <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">&#x27;bold&#x27;</span>,<br>    &#125;,<br>  &#125;&#125;&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Stack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">    <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span></span></span><br><span class="hljs-tag"><span class="language-xml">  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Stack.Screen</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">Stack</span>.<span class="hljs-property">Navigator</span>&gt;<br></code></pre></div></td></tr></table></figure>


<p><img src="/images/React-Native-Router/screen-options.gif" srcset="/img/loading.gif" lazyload alt="screenOptions"></p>
<p>　　这样，所有的导航栏的配置都是相同的了；有时候我们还需要和导航栏互动，修改导航栏的配置，我们可以调用<code>navigation.setOptions</code>来重新设置options。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">HomeScreen</span>(<span class="hljs-params">&#123; navigation &#125;</span>)&#123;<br>  <span class="hljs-keyword">return</span> (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Update&quot;</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span>=&gt;</span> navigation.setOptions(&#123;</span><br><span class="language-xml">      title: &#x27;New Home&#x27;,</span><br><span class="language-xml">      headerRight: () =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Setting&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>,</span><br><span class="language-xml">    &#125;)&#125;&gt;<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>)<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p><img src="/images/React-Native-Router/set-options.gif" srcset="/img/loading.gif" lazyload alt="setOptions"></p>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<h3 id="导航的生命周期"><a href="#导航的生命周期" class="headerlink" title="导航的生命周期"></a>导航的生命周期</h3><p>　　在上一小节中，我们在不同的页面中进行导航跳转，当我们从a页面去b页面时，我们怎么才能知道即将要离开a页面？从b页面返回时，如果我们需要更新a页面中的数据，那我们在a页面如何监听呢？</p>
<p>　　很多同学会理所当然的认为离开a页面时，我们直接在<code>componentWillUnmount</code>处理可以了；但是实际上，a页面只是暂时的隐藏到后台了，它并没有被销毁，始终保持了挂载状态，因此它的componentWillUnmount并不会被调用；而b页面则是会进入时创建，返回时被销毁。</p>
<p>　　选项卡导航在操作时也会观察到类似的情况，由于它有多个tab页，我们可以将它想象成多个堆栈导航，它的每个tab切换时也只是将页面隐藏，并不会销毁。那我们怎么回到刚开始的问题，如何发现用户在进入它和离开它呢？</p>
<p>　　我们通过<code>navigation</code>导航来订阅相关的事件，通过监听对应的事件来了解页面何时进入以及离开。</p>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>  &#125;<br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">navigation</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;页面进入&#x27;</span>);<br>    &#125;);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">navigation</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;blur&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;页面离开&#x27;</span>);<br>    &#125;);<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>　　navigation支持以下五种事件：</p>
<ul>
<li>focus：当屏幕聚焦时。</li>
<li>blur：当屏幕失去焦点时。</li>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<li>state：当导航器的状态改变时，通过event接收新的状态(event.data.state)。</li>
<li>beforeRemove：当用户要离开页面时，可以阻止用户离开。</li>
<li>tabPress：点击tab页面切换</li>
</ul>
<p>　　<code>navigation.addListener</code>返回一个函数，可以在组件销毁时调用来取消订阅的事件：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) &#123;<br>    <span class="hljs-variable language_">super</span>(props);<br>  &#125;<br>  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_focus</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">navigation</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-comment">// ....</span><br>    &#125;);<br>  &#125;<br>  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_focus</span>()<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>



<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<h2 id="选项卡导航"><a href="#选项卡导航" class="headerlink" title="选项卡导航"></a>选项卡导航</h2><p>　　我们再来看下另一种常见的导航方式：选项卡导航；我们在常用的App中都能看到这种导航方式，如微信、知乎、某东、某猫底部导航，在屏幕底部显示三到五个App的主要板块，能够很方便的让用户在目标板块之间进行切换操作，避免路由层次过深。</p>
<p><img src="/images/React-Native-Router/principle.png" srcset="/img/loading.gif" lazyload alt="选项卡导航设计原则"></p>
<p>　　React Natigation中主要使用的选项卡导航就是<code>@react-navigation/bottom-tabs</code>，其他的还有下面这种material风格的：</p>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p><img src="/images/React-Native-Router/material-bottom-tabs.gif" srcset="/img/loading.gif" lazyload alt="material风格选项卡导航"></p>
<p>　　material风格主要是<code>@react-navigation/material-bottom-tabs</code>和<code>@react-navigation/material-top-tabs</code>，使用方法都大同小异，只是风格不同，需要和App整体的风格协调。我们回到bottom-tabs，首先需要进行安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">npm install @react-navigation/bottom-tabs<br><span class="hljs-comment"># 或者</span><br>yarn add @react-navigation/bottom-tabs<br></code></pre></div></td></tr></table></figure>


<p>　　我们看下<code>bottom-tabs</code>的简单使用案例：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Tab</span> = <span class="hljs-title function_">createBottomTabNavigator</span>();<br><span class="hljs-keyword">import</span> &#123;createBottomTabNavigator&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-navigation/bottom-tabs&#x27;</span>;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TabRouter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">        <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;List&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br>    )<br>  &#125;<br>&#125;<br></code></pre></div></td></tr></table></figure>


<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<p>　　这样我们看到底部多了两个tab按钮，但是没有icon，比较简陋；这里引入<code>react-native-vector-icons</code>这个库，包含很多icon图标。遵循<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/react-native-vector-icons">安装教程</a>安装好后，我们在<a target="_blank" rel="noopener" href="https://oblador.github.io/react-native-vector-icons/">它的主页</a>上，找到我们需要的icon，这里包含了AntDesign、FontAwesome、Ionicons、MaterialIcons等一众丰富的图标。</p>
<p>　　我们可以给每个tab设置单独的options，但是为了方便统一，我们在Tab.Navigator上的<code>screenOptions</code>集中配置：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Ionicons</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-vector-icons/Ionicons&#x27;</span>;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tab.Navigator</span></span></span><br><span class="hljs-tag"><span class="language-xml">  <span class="hljs-attr">screenOptions</span>=<span class="hljs-string">&#123;(&#123;route&#125;)</span> =&gt;</span> (&#123;</span><br><span class="language-xml">    tabBarActiveTintColor: &#x27;tomato&#x27;,</span><br><span class="language-xml">    tabBarInactiveTintColor: &#x27;gray&#x27;,</span><br><span class="language-xml">    tabBarIcon: (&#123;focused, color, size&#125;) =&gt; &#123;</span><br><span class="language-xml">      let iconName;</span><br><span class="language-xml">      if (route.name === &#x27;Home&#x27;) &#123;</span><br><span class="language-xml">        iconName = focused ? &#x27;home&#x27;: &#x27;home-outline&#x27;;</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      if (route.name === &#x27;List&#x27;) &#123;</span><br><span class="language-xml">        iconName = focused ? &#x27;list-circle&#x27;: &#x27;list-circle-outline&#x27;;</span><br><span class="language-xml">      &#125;</span><br><span class="language-xml">      return <span class="hljs-tag">&lt;<span class="hljs-name">Ionicons</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&#123;iconName&#125;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&#123;size&#125;</span> <span class="hljs-attr">color</span>=<span class="hljs-string">&#123;color&#125;</span> /&gt;</span>;</span><br><span class="language-xml">    &#125;,</span><br><span class="language-xml">  &#125;)&#125;&gt;</span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;List&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListScreen&#125;</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br></code></pre></div></td></tr></table></figure>



<p><img src="/images/React-Native-Router/tab-bar.gif" srcset="/img/loading.gif" lazyload alt="Tab导航"></p>
<p>　　tabBarActiveTintColor和tabBarInactiveTintColor从名字我们就能看出，是设置激活状态和非激活的icon和label的颜色（<strong>注意，是两者的颜色</strong>）；<code>tabBarIcon</code>用来设置icon图标，接收一个函数，函数传入三个参数：focused(boolean)、color(string)和size(number)。</p>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p>　　focused用来表示tab激活或者非激活，很好理解，但是这里的color和size就很奇怪了，我们打印color的值，发现和上面的active color和inactive color相同；这个色值是为了和icon下面的label色值保持统一而传入的，我们可以用它的色值，也可以和label不同；size则是导航预期icon的大小。</p>
<p>　　如果我们只需要展示图标，而不要label，将<code>tabBarShowLabel</code>选项置为false即可。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Tab</span>.<span class="hljs-property">Navigator</span><br>  screenOptions=&#123;<span class="hljs-function">(<span class="hljs-params">&#123;route&#125;</span>) =&gt;</span> (&#123;<br>    <span class="hljs-attr">tabBarShowLabel</span>: <span class="hljs-literal">false</span>,<br>  &#125;)&#125;&gt;<br>  ....<br>&lt;/<span class="hljs-title class_">Tab</span>.<span class="hljs-property">Navigator</span>&gt;<br></code></pre></div></td></tr></table></figure>



<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<h3 id="徽章"><a href="#徽章" class="headerlink" title="徽章"></a>徽章</h3><p>　　有时候，我们想要在tab按钮上加一个徽章（Badge），来标识未读信息，可以使用<code>tabBarBadge</code>选项：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Tab</span>.<span class="hljs-property">Screen</span> name=<span class="hljs-string">&quot;Home&quot;</span> component=&#123;<span class="hljs-title class_">HomeScreen</span>&#125; options=&#123;&#123; <span class="hljs-attr">tabBarBadge</span>: <span class="hljs-number">3</span> &#125;&#125; /&gt;<br></code></pre></div></td></tr></table></figure>


<p><img src="/images/React-Native-Router/badge.png" srcset="/img/loading.gif" lazyload alt="Badge"></p>
<h3 id="路由跳转和嵌套"><a href="#路由跳转和嵌套" class="headerlink" title="路由跳转和嵌套"></a>路由跳转和嵌套</h3><p>　　上面堆栈导航我们介绍过navigate和push的用法，而选项卡导航就比较简单了，由于两个tab是同一级关系，直接调用navigate就能实现路由跳转：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">HomeScreen</span>(<span class="hljs-params">&#123; navigation &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">justifyContent:</span> &#x27;<span class="hljs-attr">center</span>&#x27;, <span class="hljs-attr">alignItems:</span> &#x27;<span class="hljs-attr">center</span>&#x27; &#125;&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>Home!<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;去列表页&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;()</span> =&gt;</span> navigation.navigate(&#x27;List&#x27;)&#125;</span><br><span class="language-xml">      /&gt;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>


<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<blockquote>
<p>选项卡导航中不能调用push函数。</p>
</blockquote>
<p>　　想象一下，在选项卡导航中我们经常用到不止一个路由，在列表页后面我们需要跳转到详情页；但如果直接把详情页面放到<code>Tab.Screen</code>中肯定是不行的，这样只会增加一个tab按钮。我们可以利用上面的堆栈导航，将两种导航方式进行嵌套使用。</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Tab</span> = <span class="hljs-title function_">createBottomTabNavigator</span>();<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">ListStack</span> = <span class="hljs-title function_">createNativeStackNavigator</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">ListStackScreen</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">ListStack.Navigator</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ListStack.Screen</span> </span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;List&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListScreen&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ListStack.Screen</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">ListStack.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Detail&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;DetailScreen&#125;</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">ListStack.Screen</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">ListStack.Navigator</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">TabStackRouter</span>(<span class="hljs-params">&#123; navigation &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span> </span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span> </span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ListStack&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListStackScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br>  )<br>&#125;<br></code></pre></div></td></tr></table></figure>

<p>　　我们创建了一个<code>ListStack</code>堆栈导航，相当于在tab页面中嵌套了一层堆栈导航；我们很明显发现List页面会有两个头部的导航栏，我们将ListStack的<code>headerShown</code>置为false即可将它的导航栏隐藏：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TabStackRouter</span>(<span class="hljs-params">&#123; navigation &#125;</span>) &#123;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">Tab.Screen</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;ListStack&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListStackScreen&#125;</span>           </span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">options</span>=<span class="hljs-string">&#123;&#123;</span></span></span><br><span class="hljs-tag"><span class="language-xml">        <span class="hljs-attr">headerShown:</span> <span class="hljs-attr">false</span>,</span></span><br><span class="hljs-tag"><span class="language-xml">      &#125;&#125; /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">Tab.Navigator</span>&gt;</span></span><br>&#125;<br></code></pre></div></td></tr></table></figure>


<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>

<p><img src="/images/React-Native-Router/tab-stack.gif" srcset="/img/loading.gif" lazyload alt="路由嵌套"></p>
<h3 id="安全区域"><a href="#安全区域" class="headerlink" title="安全区域"></a>安全区域</h3><p>　　在iPhone X、iPhone XR等设备上，顶部的刘海设计和底部的小黑条都可能会遮住我们的App内容，因此需要进行适配；尽管RN提供了<code>SafeAreaView</code>，但它有一些问题，React Navigation提供了更好用的<code>react-native-safe-area-context</code>：</p>
<p><img src="/images/React-Native-Router/shelter.png" srcset="/img/loading.gif" lazyload alt="遮住"></p>
<p>　　首先我们yarn安装，在iOS平台多一步pod安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">yarn add react-native-safe-area-context<br><br><span class="hljs-comment"># iOS Platform</span><br>npx pod-install<br></code></pre></div></td></tr></table></figure>


<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p>　　首先在根组件使用<code>SafeAreaProvider</code>，这是一个提供者，本身不会对布局产生影响，只有在该组件包裹下的子组件才能使用react-native-safe-area-context提供的功能，因此我们通常把它包裹在App组件：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">SafeAreaProvider</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-safe-area-context&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SafeAreaProvider</span> <span class="hljs-attr">initialMetrics</span>=<span class="hljs-string">&#123;null&#125;</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">NavigationContainer</span>&gt;</span>&#123;/*(...) */&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">NavigationContainer</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">SafeAreaProvider</span>&gt;</span></span>);<br>&#125;<br></code></pre></div></td></tr></table></figure>


<p>　　在我们要适配的页面引入<code>SafeAreaView</code>自动处理：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">SafeAreaView</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-native-safe-area-context&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">HomeScreen</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">SafeAreaView</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">style</span>=<span class="hljs-string">&#123;&#123;</span> <span class="hljs-attr">flex:</span> <span class="hljs-attr">1</span>, <span class="hljs-attr">justifyContent:</span> &#x27;<span class="hljs-attr">space-between</span>&#x27;, <span class="hljs-attr">alignItems:</span> &#x27;<span class="hljs-attr">center</span>&#x27; &#125;&#125;</span></span><br><span class="hljs-tag"><span class="language-xml">    &gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>This is Top Text.<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>This is Bottom Text.<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">SafeAreaView</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>

<p><img src="/images/React-Native-Router/safe-area.png" srcset="/img/loading.gif" lazyload alt="SafeAreaView"></p>
<blockquote>
<p>React Navigation内置了react-native-safe-area-context，一般如果使用了导航栏和底部的tab则无需处理。</p>
</blockquote>
<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p><img src="/images/React-Native-Router/auto.png" srcset="/img/loading.gif" lazyload alt="导航栏和底部自动处理了"></p>
<h2 id="抽屉式导航"><a href="#抽屉式导航" class="headerlink" title="抽屉式导航"></a>抽屉式导航</h2><p>　　抽屉式导航是从侧边栏划出抽屉一样的效果，抽屉式导航的核心是<code>「隐藏」</code>，突出核心功能，隐藏一些不必要的操作，比如一些简报、新闻、栏目等等；在小屏幕时代，内容篇幅展示有限，会把一些辅助的功能放到侧边栏里；但是随着屏幕尺寸越来越大，通过新的交互方式，我们的App已经能够容纳足够多的内容，抽屉式导航的缺点也逐渐暴露：交互效率低下，处于操作盲区，单手操作不便。</p>
<p>　　因此抽屉式导航也逐渐衰落了，我们在大多App中也很难看到这种导航方式，仅有少数还保留，我们看下在虎嗅App上使用抽屉式导航的效果：</p>
<p><img src="/images/React-Native-Router/huxiu.jpg" srcset="/img/loading.gif" lazyload alt="虎嗅App的抽屉式导航"></p>
<p>　　要在我们的App中使用这种导航，我们首先安装几个依赖：</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">yarn add @react-navigation/drawer<br>yarn add react-native-gesture-handler react-native-reanimated<br></code></pre></div></td></tr></table></figure>


<p>　　和其他两种导航方式相同，我们需要把创建函数从依赖中导出：</p>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123; createDrawerNavigator &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-navigation/drawer&#x27;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">Drawer</span> = <span class="hljs-title function_">createDrawerNavigator</span>();<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">DrawerRouter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Drawer.Navigator</span>&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Drawer.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;Home&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;HomeScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">Drawer.Screen</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;List&quot;</span> <span class="hljs-attr">component</span>=<span class="hljs-string">&#123;ListScreen&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Drawer.Navigator</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>


<p>　　我们可以点击左上角的按钮展开抽屉，或者在页面调用如下API进行手动打开或关闭：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">navigation.<span class="hljs-title function_">openDrawer</span>();<br>navigation.<span class="hljs-title function_">closeDrawer</span>();<br>navigation.<span class="hljs-title function_">toggleDrawer</span>();<br></code></pre></div></td></tr></table></figure>


<p><a class="prevent_reptile" href="https://www.xieyufei.com" style="font-size:24px" target="_blank" rel="noopener">谢小飞博客专用防爬虫链接，想要看最新的前端博客请点这里</a></p>
<p>　　还可以定义<code>drawerPosition</code>，设置打开抽屉的位置，支持left（默认）和right：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx">&lt;<span class="hljs-title class_">Drawer</span>.<span class="hljs-property">Navigator</span><br>  screenOptions=&#123;&#123;<br>    <span class="hljs-attr">drawerPosition</span>: <span class="hljs-string">&#x27;right&#x27;</span>,<br>  &#125;&#125;&gt;<br>  ...<br>&lt;/<span class="hljs-title class_">Drawer</span>.<span class="hljs-property">Navigator</span>&gt;<br></code></pre></div></td></tr></table></figure>

<p>　　我们可以设置打开抽屉的内容，通过<code>drawContentView</code>很容易的覆写内容。默认情况下在ScrollView下渲染了一个<code>DrawerItemList</code>元素，在这基础上我们可以进行自定义，也可以使用<code>DrawerItem</code>元素：</p>
<figure class="highlight jsx"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> &#123;<br>  <span class="hljs-title class_">DrawerContentScrollView</span>,<br>  <span class="hljs-title class_">DrawerItemList</span>,<br>  <span class="hljs-title class_">DrawerItem</span>,<br>&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@react-navigation/drawer&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">drawContentView</span>(<span class="hljs-params">props</span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">DrawerContentScrollView</span> &#123;<span class="hljs-attr">...props</span>&#125;&gt;</span></span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">DrawerItemList</span> &#123;<span class="hljs-attr">...props</span>&#125; /&gt;</span></span><br><span class="language-xml">      &#123;/* 这里加入想要新增的一些元素 */&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">DrawerItem</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;Help&quot;</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">&#123;...&#125;</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">DrawerContentScrollView</span>&gt;</span></span><br>  );<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">DrawerRouter</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Drawer.Navigator</span></span></span><br><span class="hljs-tag"><span class="language-xml">      <span class="hljs-attr">drawerContent</span>=<span class="hljs-string">&#123;props</span> =&gt;</span> drawContentView(props)&#125;&gt;</span><br><span class="language-xml">      ...</span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">Drawer.Navigator</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></div></td></tr></table></figure>


<p><img src="/images/React-Native-Router/drawer.gif" srcset="/img/loading.gif" lazyload alt="抽屉式导航效果"></p>
<script>if(window.location.hostname.indexOf("xieyufei.com") === -1){ window.location.href = "https://xieyufei.com" }</script>
<h1 id="彩蛋"><a href="#彩蛋" class="headerlink" title="彩蛋"></a>彩蛋</h1><p>　　经过前面几篇对RN的学习，我们基本已经掌握了RN的相关开发技巧，下面我们就开始进行实战环节，从零开始开发一款属于我们自己的App，敬请期待。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/programing/">编程</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/FrontEnd/">前端</a>
                    
                      <a class="hover-with-bg" href="/tags/Apps/">移动端</a>
                    
                      <a class="hover-with-bg" href="/tags/React/">React</a>
                    
                      <a class="hover-with-bg" href="/tags/ReactNative/">ReactNative</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本网所有内容文字和图片，版权均属谢小飞所有，任何媒体、网站或个人未经本网协议授权不得转载、链接、转贴或以其他方式复制发布/发表。如需转载请关注公众号【前端壹读】后回复【转载】。
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/08/28/React-Native-Safebox.html">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">React Native实战之安全密码箱</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/06/08/FrontEnd-Docker-Compose.html">
                        <span class="hidden-mobile">前端抢饭碗系列之Docker容器编排</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createScript('https://xieyufei.com/npm/waline@1.6.0/Waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"https://comment.xieyufei.com","placeholder":"说点什么","path":"window.location.pathname","avatar":"retro","meta":["nick","mail","link"],"pageSize":10,"lang":"zh-CN","highlight":true,"avatarCDN":"","avatarForce":false,"requiredFields":[],"emojiCDN":null,"emojiMaps":null,"anonymous":null,"appId":"dUHCmA1MmCKBNcTMG9KBopvL-MdYXbMMI","appKey":"33GvkVfTefXyelQRBTXNgEn6"},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        new Waline(options);
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="javascript:; target="_blank" rel="nofollow noopener"><span>We</span></a> <i class="iconfont icon-love"></i> <a href="https://xieyufei.com" target="_blank" rel="nofollow noopener"><span>谢小飞</span></a> <div> <span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span> <script src="/js/duration.js"></script> </div> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        苏ICP备2024128889号-1
      </a>
    </span>
    
  </div>


  
    <!-- cnzz Analytics Icon -->
    <span id="cnzz_stat_icon_1260607518" style="display: none"></span>
  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://xieyufei.com/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://xieyufei.com/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://xieyufei.com/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://xieyufei.com/npm/bootstrap/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://xieyufei.com/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://xieyufei.com/npm/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://xieyufei.com/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://xieyufei.com/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script  src="/js/local-search.js" ></script>






  <script  src="https://xieyufei.com/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?466240fe55764d8ee20bd7f43c5e8b26";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  

  

  

  

  
    <!-- cnzz Analytics -->
    <script defer src="//s4.cnzz.com/z_stat.php?id=1260607518&show=pic"
            type="text/javascript"></script>
  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
